var qv=Object.defineProperty;var Kv=(nt,rt,it)=>rt in nt?qv(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it;var So=(nt,rt,it)=>(Kv(nt,typeof rt!="symbol"?rt+"":rt,it),it);function _mergeNamespaces(nt,rt){for(var it=0;it<rt.length;it++){const st=rt[it];if(typeof st!="string"&&!Array.isArray(st)){for(const lt in st)if(lt!=="default"&&!(lt in nt)){const ct=Object.getOwnPropertyDescriptor(st,lt);ct&&Object.defineProperty(nt,lt,ct.get?ct:{enumerable:!0,get:()=>st[lt]})}}}return Object.freeze(Object.defineProperty(nt,Symbol.toStringTag,{value:"Module"}))}(function(){const rt=document.createElement("link").relList;if(rt&&rt.supports&&rt.supports("modulepreload"))return;for(const lt of document.querySelectorAll('link[rel="modulepreload"]'))st(lt);new MutationObserver(lt=>{for(const ct of lt)if(ct.type==="childList")for(const ut of ct.addedNodes)ut.tagName==="LINK"&&ut.rel==="modulepreload"&&st(ut)}).observe(document,{childList:!0,subtree:!0});function it(lt){const ct={};return lt.integrity&&(ct.integrity=lt.integrity),lt.referrerPolicy&&(ct.referrerPolicy=lt.referrerPolicy),lt.crossOrigin==="use-credentials"?ct.credentials="include":lt.crossOrigin==="anonymous"?ct.credentials="omit":ct.credentials="same-origin",ct}function st(lt){if(lt.ep)return;lt.ep=!0;const ct=it(lt);fetch(lt.href,ct)}})();var define_global_default$2={},commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof define_global_default$2<"u"?define_global_default$2:typeof self<"u"?self:{};function getDefaultExportFromCjs(nt){return nt&&nt.__esModule&&Object.prototype.hasOwnProperty.call(nt,"default")?nt.default:nt}function getAugmentedNamespace(nt){if(nt.__esModule)return nt;var rt=nt.default;if(typeof rt=="function"){var it=function st(){return this instanceof st?Reflect.construct(rt,arguments,this.constructor):rt.apply(this,arguments)};it.prototype=rt.prototype}else it={};return Object.defineProperty(it,"__esModule",{value:!0}),Object.keys(nt).forEach(function(st){var lt=Object.getOwnPropertyDescriptor(nt,st);Object.defineProperty(it,st,lt.get?lt:{enumerable:!0,get:function(){return nt[st]}})}),it}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$8=Symbol.for("react.element"),n$6=Symbol.for("react.portal"),p$7=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$5=Symbol.for("react.profiler"),t$8=Symbol.for("react.provider"),u$7=Symbol.for("react.context"),v$5=Symbol.for("react.forward_ref"),w$4=Symbol.for("react.suspense"),x$4=Symbol.for("react.memo"),y$6=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$3(nt){return nt===null||typeof nt!="object"?null:(nt=z$3&&nt[z$3]||nt["@@iterator"],typeof nt=="function"?nt:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$4=Object.assign,D$5={};function E$3(nt,rt,it){this.props=nt,this.context=rt,this.refs=D$5,this.updater=it||B$3}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(nt,rt){if(typeof nt!="object"&&typeof nt!="function"&&nt!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,nt,rt,"setState")};E$3.prototype.forceUpdate=function(nt){this.updater.enqueueForceUpdate(this,nt,"forceUpdate")};function F$4(){}F$4.prototype=E$3.prototype;function G$3(nt,rt,it){this.props=nt,this.context=rt,this.refs=D$5,this.updater=it||B$3}var H$3=G$3.prototype=new F$4;H$3.constructor=G$3;C$4(H$3,E$3.prototype);H$3.isPureReactComponent=!0;var I$a=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$6(nt,rt,it){var st,lt={},ct=null,ut=null;if(rt!=null)for(st in rt.ref!==void 0&&(ut=rt.ref),rt.key!==void 0&&(ct=""+rt.key),rt)J$1.call(rt,st)&&!L$2.hasOwnProperty(st)&&(lt[st]=rt[st]);var dt=arguments.length-2;if(dt===1)lt.children=it;else if(1<dt){for(var ht=Array(dt),ft=0;ft<dt;ft++)ht[ft]=arguments[ft+2];lt.children=ht}if(nt&&nt.defaultProps)for(st in dt=nt.defaultProps,dt)lt[st]===void 0&&(lt[st]=dt[st]);return{$$typeof:l$8,type:nt,key:ct,ref:ut,props:lt,_owner:K$2.current}}function N$5(nt,rt){return{$$typeof:l$8,type:nt.type,key:rt,ref:nt.ref,props:nt.props,_owner:nt._owner}}function O$4(nt){return typeof nt=="object"&&nt!==null&&nt.$$typeof===l$8}function escape$1(nt){var rt={"=":"=0",":":"=2"};return"$"+nt.replace(/[=:]/g,function(it){return rt[it]})}var P$4=/\/+/g;function Q$3(nt,rt){return typeof nt=="object"&&nt!==null&&nt.key!=null?escape$1(""+nt.key):rt.toString(36)}function R$4(nt,rt,it,st,lt){var ct=typeof nt;(ct==="undefined"||ct==="boolean")&&(nt=null);var ut=!1;if(nt===null)ut=!0;else switch(ct){case"string":case"number":ut=!0;break;case"object":switch(nt.$$typeof){case l$8:case n$6:ut=!0}}if(ut)return ut=nt,lt=lt(ut),nt=st===""?"."+Q$3(ut,0):st,I$a(lt)?(it="",nt!=null&&(it=nt.replace(P$4,"$&/")+"/"),R$4(lt,rt,it,"",function(ft){return ft})):lt!=null&&(O$4(lt)&&(lt=N$5(lt,it+(!lt.key||ut&&ut.key===lt.key?"":(""+lt.key).replace(P$4,"$&/")+"/")+nt)),rt.push(lt)),1;if(ut=0,st=st===""?".":st+":",I$a(nt))for(var dt=0;dt<nt.length;dt++){ct=nt[dt];var ht=st+Q$3(ct,dt);ut+=R$4(ct,rt,it,ht,lt)}else if(ht=A$3(nt),typeof ht=="function")for(nt=ht.call(nt),dt=0;!(ct=nt.next()).done;)ct=ct.value,ht=st+Q$3(ct,dt++),ut+=R$4(ct,rt,it,ht,lt);else if(ct==="object")throw rt=String(nt),Error("Objects are not valid as a React child (found: "+(rt==="[object Object]"?"object with keys {"+Object.keys(nt).join(", ")+"}":rt)+"). If you meant to render a collection of children, use an array instead.");return ut}function S$8(nt,rt,it){if(nt==null)return nt;var st=[],lt=0;return R$4(nt,st,"","",function(ct){return rt.call(it,ct,lt++)}),st}function T$6(nt){if(nt._status===-1){var rt=nt._result;rt=rt(),rt.then(function(it){(nt._status===0||nt._status===-1)&&(nt._status=1,nt._result=it)},function(it){(nt._status===0||nt._status===-1)&&(nt._status=2,nt._result=it)}),nt._status===-1&&(nt._status=0,nt._result=rt)}if(nt._status===1)return nt._result.default;throw nt._result}var U$5={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$5,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};react_production_min.Children={map:S$8,forEach:function(nt,rt,it){S$8(nt,function(){rt.apply(this,arguments)},it)},count:function(nt){var rt=0;return S$8(nt,function(){rt++}),rt},toArray:function(nt){return S$8(nt,function(rt){return rt})||[]},only:function(nt){if(!O$4(nt))throw Error("React.Children.only expected to receive a single React element child.");return nt}};react_production_min.Component=E$3;react_production_min.Fragment=p$7;react_production_min.Profiler=r$5;react_production_min.PureComponent=G$3;react_production_min.StrictMode=q$3;react_production_min.Suspense=w$4;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(nt,rt,it){if(nt==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+nt+".");var st=C$4({},nt.props),lt=nt.key,ct=nt.ref,ut=nt._owner;if(rt!=null){if(rt.ref!==void 0&&(ct=rt.ref,ut=K$2.current),rt.key!==void 0&&(lt=""+rt.key),nt.type&&nt.type.defaultProps)var dt=nt.type.defaultProps;for(ht in rt)J$1.call(rt,ht)&&!L$2.hasOwnProperty(ht)&&(st[ht]=rt[ht]===void 0&&dt!==void 0?dt[ht]:rt[ht])}var ht=arguments.length-2;if(ht===1)st.children=it;else if(1<ht){dt=Array(ht);for(var ft=0;ft<ht;ft++)dt[ft]=arguments[ft+2];st.children=dt}return{$$typeof:l$8,type:nt.type,key:lt,ref:ct,props:st,_owner:ut}};react_production_min.createContext=function(nt){return nt={$$typeof:u$7,_currentValue:nt,_currentValue2:nt,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},nt.Provider={$$typeof:t$8,_context:nt},nt.Consumer=nt};react_production_min.createElement=M$6;react_production_min.createFactory=function(nt){var rt=M$6.bind(null,nt);return rt.type=nt,rt};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(nt){return{$$typeof:v$5,render:nt}};react_production_min.isValidElement=O$4;react_production_min.lazy=function(nt){return{$$typeof:y$6,_payload:{_status:-1,_result:nt},_init:T$6}};react_production_min.memo=function(nt,rt){return{$$typeof:x$4,type:nt,compare:rt===void 0?null:rt}};react_production_min.startTransition=function(nt){var rt=V$2.transition;V$2.transition={};try{nt()}finally{V$2.transition=rt}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(nt,rt){return U$5.current.useCallback(nt,rt)};react_production_min.useContext=function(nt){return U$5.current.useContext(nt)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(nt){return U$5.current.useDeferredValue(nt)};react_production_min.useEffect=function(nt,rt){return U$5.current.useEffect(nt,rt)};react_production_min.useId=function(){return U$5.current.useId()};react_production_min.useImperativeHandle=function(nt,rt,it){return U$5.current.useImperativeHandle(nt,rt,it)};react_production_min.useInsertionEffect=function(nt,rt){return U$5.current.useInsertionEffect(nt,rt)};react_production_min.useLayoutEffect=function(nt,rt){return U$5.current.useLayoutEffect(nt,rt)};react_production_min.useMemo=function(nt,rt){return U$5.current.useMemo(nt,rt)};react_production_min.useReducer=function(nt,rt,it){return U$5.current.useReducer(nt,rt,it)};react_production_min.useRef=function(nt){return U$5.current.useRef(nt)};react_production_min.useState=function(nt){return U$5.current.useState(nt)};react_production_min.useSyncExternalStore=function(nt,rt,it){return U$5.current.useSyncExternalStore(nt,rt,it)};react_production_min.useTransition=function(){return U$5.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const e$2=getDefaultExportFromCjs(reactExports),e$3=_mergeNamespaces({__proto__:null,default:e$2},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$7=reactExports,k$3=Symbol.for("react.element"),l$7=Symbol.for("react.fragment"),m$6=Object.prototype.hasOwnProperty,n$5=f$7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$6={key:!0,ref:!0,__self:!0,__source:!0};function q$2(nt,rt,it){var st,lt={},ct=null,ut=null;it!==void 0&&(ct=""+it),rt.key!==void 0&&(ct=""+rt.key),rt.ref!==void 0&&(ut=rt.ref);for(st in rt)m$6.call(rt,st)&&!p$6.hasOwnProperty(st)&&(lt[st]=rt[st]);if(nt&&nt.defaultProps)for(st in rt=nt.defaultProps,rt)lt[st]===void 0&&(lt[st]=rt[st]);return{$$typeof:k$3,type:nt,key:ct,ref:ut,props:lt,_owner:n$5.current}}reactJsxRuntime_production_min.Fragment=l$7;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom$1={exports:{}},reactDom_production_min={},scheduler$2={exports:{}},scheduler_production_min$2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(nt){function rt(Bt,Ht){var Gt=Bt.length;Bt.push(Ht);e:for(;0<Gt;){var Xt=Gt-1>>>1,Zt=Bt[Xt];if(0<lt(Zt,Ht))Bt[Xt]=Ht,Bt[Gt]=Zt,Gt=Xt;else break e}}function it(Bt){return Bt.length===0?null:Bt[0]}function st(Bt){if(Bt.length===0)return null;var Ht=Bt[0],Gt=Bt.pop();if(Gt!==Ht){Bt[0]=Gt;e:for(var Xt=0,Zt=Bt.length,hr=Zt>>>1;Xt<hr;){var nr=2*(Xt+1)-1,ir=Bt[nr],yr=nr+1,Cr=Bt[yr];if(0>lt(ir,Gt))yr<Zt&&0>lt(Cr,ir)?(Bt[Xt]=Cr,Bt[yr]=Gt,Xt=yr):(Bt[Xt]=ir,Bt[nr]=Gt,Xt=nr);else if(yr<Zt&&0>lt(Cr,Gt))Bt[Xt]=Cr,Bt[yr]=Gt,Xt=yr;else break e}}return Ht}function lt(Bt,Ht){var Gt=Bt.sortIndex-Ht.sortIndex;return Gt!==0?Gt:Bt.id-Ht.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ct=performance;nt.unstable_now=function(){return ct.now()}}else{var ut=Date,dt=ut.now();nt.unstable_now=function(){return ut.now()-dt}}var ht=[],ft=[],pt=1,mt=null,gt=3,xt=!1,yt=!1,vt=!1,St=typeof setTimeout=="function"?setTimeout:null,wt=typeof clearTimeout=="function"?clearTimeout:null,Et=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Rt(Bt){for(var Ht=it(ft);Ht!==null;){if(Ht.callback===null)st(ft);else if(Ht.startTime<=Bt)st(ft),Ht.sortIndex=Ht.expirationTime,rt(ht,Ht);else break;Ht=it(ft)}}function Tt(Bt){if(vt=!1,Rt(Bt),!yt)if(it(ht)!==null)yt=!0,Ut(It);else{var Ht=it(ft);Ht!==null&&zt(Tt,Ht.startTime-Bt)}}function It(Bt,Ht){yt=!1,vt&&(vt=!1,wt(jt),jt=-1),xt=!0;var Gt=gt;try{for(Rt(Ht),mt=it(ht);mt!==null&&(!(mt.expirationTime>Ht)||Bt&&!Mt());){var Xt=mt.callback;if(typeof Xt=="function"){mt.callback=null,gt=mt.priorityLevel;var Zt=Xt(mt.expirationTime<=Ht);Ht=nt.unstable_now(),typeof Zt=="function"?mt.callback=Zt:mt===it(ht)&&st(ht),Rt(Ht)}else st(ht);mt=it(ht)}if(mt!==null)var hr=!0;else{var nr=it(ft);nr!==null&&zt(Tt,nr.startTime-Ht),hr=!1}return hr}finally{mt=null,gt=Gt,xt=!1}}var At=!1,Dt=null,jt=-1,Ft=5,Lt=-1;function Mt(){return!(nt.unstable_now()-Lt<Ft)}function Ot(){if(Dt!==null){var Bt=nt.unstable_now();Lt=Bt;var Ht=!0;try{Ht=Dt(!0,Bt)}finally{Ht?Nt():(At=!1,Dt=null)}}else At=!1}var Nt;if(typeof Et=="function")Nt=function(){Et(Ot)};else if(typeof MessageChannel<"u"){var $t=new MessageChannel,Vt=$t.port2;$t.port1.onmessage=Ot,Nt=function(){Vt.postMessage(null)}}else Nt=function(){St(Ot,0)};function Ut(Bt){Dt=Bt,At||(At=!0,Nt())}function zt(Bt,Ht){jt=St(function(){Bt(nt.unstable_now())},Ht)}nt.unstable_IdlePriority=5,nt.unstable_ImmediatePriority=1,nt.unstable_LowPriority=4,nt.unstable_NormalPriority=3,nt.unstable_Profiling=null,nt.unstable_UserBlockingPriority=2,nt.unstable_cancelCallback=function(Bt){Bt.callback=null},nt.unstable_continueExecution=function(){yt||xt||(yt=!0,Ut(It))},nt.unstable_forceFrameRate=function(Bt){0>Bt||125<Bt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ft=0<Bt?Math.floor(1e3/Bt):5},nt.unstable_getCurrentPriorityLevel=function(){return gt},nt.unstable_getFirstCallbackNode=function(){return it(ht)},nt.unstable_next=function(Bt){switch(gt){case 1:case 2:case 3:var Ht=3;break;default:Ht=gt}var Gt=gt;gt=Ht;try{return Bt()}finally{gt=Gt}},nt.unstable_pauseExecution=function(){},nt.unstable_requestPaint=function(){},nt.unstable_runWithPriority=function(Bt,Ht){switch(Bt){case 1:case 2:case 3:case 4:case 5:break;default:Bt=3}var Gt=gt;gt=Bt;try{return Ht()}finally{gt=Gt}},nt.unstable_scheduleCallback=function(Bt,Ht,Gt){var Xt=nt.unstable_now();switch(typeof Gt=="object"&&Gt!==null?(Gt=Gt.delay,Gt=typeof Gt=="number"&&0<Gt?Xt+Gt:Xt):Gt=Xt,Bt){case 1:var Zt=-1;break;case 2:Zt=250;break;case 5:Zt=1073741823;break;case 4:Zt=1e4;break;default:Zt=5e3}return Zt=Gt+Zt,Bt={id:pt++,callback:Ht,priorityLevel:Bt,startTime:Gt,expirationTime:Zt,sortIndex:-1},Gt>Xt?(Bt.sortIndex=Gt,rt(ft,Bt),it(ht)===null&&Bt===it(ft)&&(vt?(wt(jt),jt=-1):vt=!0,zt(Tt,Gt-Xt))):(Bt.sortIndex=Zt,rt(ht,Bt),yt||xt||(yt=!0,Ut(It))),Bt},nt.unstable_shouldYield=Mt,nt.unstable_wrapCallback=function(Bt){var Ht=gt;return function(){var Gt=gt;gt=Ht;try{return Bt.apply(this,arguments)}finally{gt=Gt}}}})(scheduler_production_min$2);scheduler$2.exports=scheduler_production_min$2;var schedulerExports$1=scheduler$2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports,ca$1=schedulerExports$1;function p$5(nt){for(var rt="https://reactjs.org/docs/error-decoder.html?invariant="+nt,it=1;it<arguments.length;it++)rt+="&args[]="+encodeURIComponent(arguments[it]);return"Minified React error #"+nt+"; visit "+rt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(nt,rt){ha(nt,rt),ha(nt+"Capture",rt)}function ha(nt,rt){for(ea[nt]=rt,nt=0;nt<rt.length;nt++)da.add(rt[nt])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(nt){return ja.call(ma,nt)?!0:ja.call(la,nt)?!1:ka.test(nt)?ma[nt]=!0:(la[nt]=!0,!1)}function pa(nt,rt,it,st){if(it!==null&&it.type===0)return!1;switch(typeof rt){case"function":case"symbol":return!0;case"boolean":return st?!1:it!==null?!it.acceptsBooleans:(nt=nt.toLowerCase().slice(0,5),nt!=="data-"&&nt!=="aria-");default:return!1}}function qa(nt,rt,it,st){if(rt===null||typeof rt>"u"||pa(nt,rt,it,st))return!0;if(st)return!1;if(it!==null)switch(it.type){case 3:return!rt;case 4:return rt===!1;case 5:return isNaN(rt);case 6:return isNaN(rt)||1>rt}return!1}function v$4(nt,rt,it,st,lt,ct,ut){this.acceptsBooleans=rt===2||rt===3||rt===4,this.attributeName=st,this.attributeNamespace=lt,this.mustUseProperty=it,this.propertyName=nt,this.type=rt,this.sanitizeURL=ct,this.removeEmptyString=ut}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(nt){z$2[nt]=new v$4(nt,0,!1,nt,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(nt){var rt=nt[0];z$2[rt]=new v$4(rt,1,!1,nt[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(nt){z$2[nt]=new v$4(nt,2,!1,nt.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(nt){z$2[nt]=new v$4(nt,2,!1,nt,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(nt){z$2[nt]=new v$4(nt,3,!1,nt.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(nt){z$2[nt]=new v$4(nt,3,!0,nt,null,!1,!1)});["capture","download"].forEach(function(nt){z$2[nt]=new v$4(nt,4,!1,nt,null,!1,!1)});["cols","rows","size","span"].forEach(function(nt){z$2[nt]=new v$4(nt,6,!1,nt,null,!1,!1)});["rowSpan","start"].forEach(function(nt){z$2[nt]=new v$4(nt,5,!1,nt.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(nt){return nt[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(nt){var rt=nt.replace(ra,sa);z$2[rt]=new v$4(rt,1,!1,nt,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(nt){var rt=nt.replace(ra,sa);z$2[rt]=new v$4(rt,1,!1,nt,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(nt){var rt=nt.replace(ra,sa);z$2[rt]=new v$4(rt,1,!1,nt,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(nt){z$2[nt]=new v$4(nt,1,!1,nt.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v$4("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(nt){z$2[nt]=new v$4(nt,1,!1,nt.toLowerCase(),null,!0,!0)});function ta(nt,rt,it,st){var lt=z$2.hasOwnProperty(rt)?z$2[rt]:null;(lt!==null?lt.type!==0:st||!(2<rt.length)||rt[0]!=="o"&&rt[0]!=="O"||rt[1]!=="n"&&rt[1]!=="N")&&(qa(rt,it,lt,st)&&(it=null),st||lt===null?oa(rt)&&(it===null?nt.removeAttribute(rt):nt.setAttribute(rt,""+it)):lt.mustUseProperty?nt[lt.propertyName]=it===null?lt.type===3?!1:"":it:(rt=lt.attributeName,st=lt.attributeNamespace,it===null?nt.removeAttribute(rt):(lt=lt.type,it=lt===3||lt===4&&it===!0?"":""+it,st?nt.setAttributeNS(st,rt,it):nt.setAttribute(rt,it))))}var ua=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(nt){return nt===null||typeof nt!="object"?null:(nt=Ja&&nt[Ja]||nt["@@iterator"],typeof nt=="function"?nt:null)}var A$2=Object.assign,La;function Ma(nt){if(La===void 0)try{throw Error()}catch(it){var rt=it.stack.trim().match(/\n( *(at )?)/);La=rt&&rt[1]||""}return`
`+La+nt}var Na=!1;function Oa(nt,rt){if(!nt||Na)return"";Na=!0;var it=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(rt)if(rt=function(){throw Error()},Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch(ft){var st=ft}Reflect.construct(nt,[],rt)}else{try{rt.call()}catch(ft){st=ft}nt.call(rt.prototype)}else{try{throw Error()}catch(ft){st=ft}nt()}}catch(ft){if(ft&&st&&typeof ft.stack=="string"){for(var lt=ft.stack.split(`
`),ct=st.stack.split(`
`),ut=lt.length-1,dt=ct.length-1;1<=ut&&0<=dt&&lt[ut]!==ct[dt];)dt--;for(;1<=ut&&0<=dt;ut--,dt--)if(lt[ut]!==ct[dt]){if(ut!==1||dt!==1)do if(ut--,dt--,0>dt||lt[ut]!==ct[dt]){var ht=`
`+lt[ut].replace(" at new "," at ");return nt.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",nt.displayName)),ht}while(1<=ut&&0<=dt);break}}}finally{Na=!1,Error.prepareStackTrace=it}return(nt=nt?nt.displayName||nt.name:"")?Ma(nt):""}function Pa(nt){switch(nt.tag){case 5:return Ma(nt.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return nt=Oa(nt.type,!1),nt;case 11:return nt=Oa(nt.type.render,!1),nt;case 1:return nt=Oa(nt.type,!0),nt;default:return""}}function Qa(nt){if(nt==null)return null;if(typeof nt=="function")return nt.displayName||nt.name||null;if(typeof nt=="string")return nt;switch(nt){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof nt=="object")switch(nt.$$typeof){case Ca:return(nt.displayName||"Context")+".Consumer";case Ba:return(nt._context.displayName||"Context")+".Provider";case Da:var rt=nt.render;return nt=nt.displayName,nt||(nt=rt.displayName||rt.name||"",nt=nt!==""?"ForwardRef("+nt+")":"ForwardRef"),nt;case Ga:return rt=nt.displayName||null,rt!==null?rt:Qa(nt.type)||"Memo";case Ha:rt=nt._payload,nt=nt._init;try{return Qa(nt(rt))}catch{}}return null}function Ra(nt){var rt=nt.type;switch(nt.tag){case 24:return"Cache";case 9:return(rt.displayName||"Context")+".Consumer";case 10:return(rt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return nt=rt.render,nt=nt.displayName||nt.name||"",rt.displayName||(nt!==""?"ForwardRef("+nt+")":"ForwardRef");case 7:return"Fragment";case 5:return rt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(rt);case 8:return rt===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof rt=="function")return rt.displayName||rt.name||null;if(typeof rt=="string")return rt}return null}function Sa(nt){switch(typeof nt){case"boolean":case"number":case"string":case"undefined":return nt;case"object":return nt;default:return""}}function Ta(nt){var rt=nt.type;return(nt=nt.nodeName)&&nt.toLowerCase()==="input"&&(rt==="checkbox"||rt==="radio")}function Ua(nt){var rt=Ta(nt)?"checked":"value",it=Object.getOwnPropertyDescriptor(nt.constructor.prototype,rt),st=""+nt[rt];if(!nt.hasOwnProperty(rt)&&typeof it<"u"&&typeof it.get=="function"&&typeof it.set=="function"){var lt=it.get,ct=it.set;return Object.defineProperty(nt,rt,{configurable:!0,get:function(){return lt.call(this)},set:function(ut){st=""+ut,ct.call(this,ut)}}),Object.defineProperty(nt,rt,{enumerable:it.enumerable}),{getValue:function(){return st},setValue:function(ut){st=""+ut},stopTracking:function(){nt._valueTracker=null,delete nt[rt]}}}}function Va(nt){nt._valueTracker||(nt._valueTracker=Ua(nt))}function Wa(nt){if(!nt)return!1;var rt=nt._valueTracker;if(!rt)return!0;var it=rt.getValue(),st="";return nt&&(st=Ta(nt)?nt.checked?"true":"false":nt.value),nt=st,nt!==it?(rt.setValue(nt),!0):!1}function Xa(nt){if(nt=nt||(typeof document<"u"?document:void 0),typeof nt>"u")return null;try{return nt.activeElement||nt.body}catch{return nt.body}}function Ya(nt,rt){var it=rt.checked;return A$2({},rt,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:it??nt._wrapperState.initialChecked})}function Za(nt,rt){var it=rt.defaultValue==null?"":rt.defaultValue,st=rt.checked!=null?rt.checked:rt.defaultChecked;it=Sa(rt.value!=null?rt.value:it),nt._wrapperState={initialChecked:st,initialValue:it,controlled:rt.type==="checkbox"||rt.type==="radio"?rt.checked!=null:rt.value!=null}}function ab$1(nt,rt){rt=rt.checked,rt!=null&&ta(nt,"checked",rt,!1)}function bb$1(nt,rt){ab$1(nt,rt);var it=Sa(rt.value),st=rt.type;if(it!=null)st==="number"?(it===0&&nt.value===""||nt.value!=it)&&(nt.value=""+it):nt.value!==""+it&&(nt.value=""+it);else if(st==="submit"||st==="reset"){nt.removeAttribute("value");return}rt.hasOwnProperty("value")?cb$1(nt,rt.type,it):rt.hasOwnProperty("defaultValue")&&cb$1(nt,rt.type,Sa(rt.defaultValue)),rt.checked==null&&rt.defaultChecked!=null&&(nt.defaultChecked=!!rt.defaultChecked)}function db(nt,rt,it){if(rt.hasOwnProperty("value")||rt.hasOwnProperty("defaultValue")){var st=rt.type;if(!(st!=="submit"&&st!=="reset"||rt.value!==void 0&&rt.value!==null))return;rt=""+nt._wrapperState.initialValue,it||rt===nt.value||(nt.value=rt),nt.defaultValue=rt}it=nt.name,it!==""&&(nt.name=""),nt.defaultChecked=!!nt._wrapperState.initialChecked,it!==""&&(nt.name=it)}function cb$1(nt,rt,it){(rt!=="number"||Xa(nt.ownerDocument)!==nt)&&(it==null?nt.defaultValue=""+nt._wrapperState.initialValue:nt.defaultValue!==""+it&&(nt.defaultValue=""+it))}var eb=Array.isArray;function fb(nt,rt,it,st){if(nt=nt.options,rt){rt={};for(var lt=0;lt<it.length;lt++)rt["$"+it[lt]]=!0;for(it=0;it<nt.length;it++)lt=rt.hasOwnProperty("$"+nt[it].value),nt[it].selected!==lt&&(nt[it].selected=lt),lt&&st&&(nt[it].defaultSelected=!0)}else{for(it=""+Sa(it),rt=null,lt=0;lt<nt.length;lt++){if(nt[lt].value===it){nt[lt].selected=!0,st&&(nt[lt].defaultSelected=!0);return}rt!==null||nt[lt].disabled||(rt=nt[lt])}rt!==null&&(rt.selected=!0)}}function gb(nt,rt){if(rt.dangerouslySetInnerHTML!=null)throw Error(p$5(91));return A$2({},rt,{value:void 0,defaultValue:void 0,children:""+nt._wrapperState.initialValue})}function hb(nt,rt){var it=rt.value;if(it==null){if(it=rt.children,rt=rt.defaultValue,it!=null){if(rt!=null)throw Error(p$5(92));if(eb(it)){if(1<it.length)throw Error(p$5(93));it=it[0]}rt=it}rt==null&&(rt=""),it=rt}nt._wrapperState={initialValue:Sa(it)}}function ib(nt,rt){var it=Sa(rt.value),st=Sa(rt.defaultValue);it!=null&&(it=""+it,it!==nt.value&&(nt.value=it),rt.defaultValue==null&&nt.defaultValue!==it&&(nt.defaultValue=it)),st!=null&&(nt.defaultValue=""+st)}function jb(nt){var rt=nt.textContent;rt===nt._wrapperState.initialValue&&rt!==""&&rt!==null&&(nt.value=rt)}function kb(nt){switch(nt){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(nt,rt){return nt==null||nt==="http://www.w3.org/1999/xhtml"?kb(rt):nt==="http://www.w3.org/2000/svg"&&rt==="foreignObject"?"http://www.w3.org/1999/xhtml":nt}var mb,nb=function(nt){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(rt,it,st,lt){MSApp.execUnsafeLocalFunction(function(){return nt(rt,it,st,lt)})}:nt}(function(nt,rt){if(nt.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in nt)nt.innerHTML=rt;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+rt.valueOf().toString()+"</svg>",rt=mb.firstChild;nt.firstChild;)nt.removeChild(nt.firstChild);for(;rt.firstChild;)nt.appendChild(rt.firstChild)}});function ob(nt,rt){if(rt){var it=nt.firstChild;if(it&&it===nt.lastChild&&it.nodeType===3){it.nodeValue=rt;return}}nt.textContent=rt}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(nt){qb.forEach(function(rt){rt=rt+nt.charAt(0).toUpperCase()+nt.substring(1),pb[rt]=pb[nt]})});function rb(nt,rt,it){return rt==null||typeof rt=="boolean"||rt===""?"":it||typeof rt!="number"||rt===0||pb.hasOwnProperty(nt)&&pb[nt]?(""+rt).trim():rt+"px"}function sb(nt,rt){nt=nt.style;for(var it in rt)if(rt.hasOwnProperty(it)){var st=it.indexOf("--")===0,lt=rb(it,rt[it],st);it==="float"&&(it="cssFloat"),st?nt.setProperty(it,lt):nt[it]=lt}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(nt,rt){if(rt){if(tb[nt]&&(rt.children!=null||rt.dangerouslySetInnerHTML!=null))throw Error(p$5(137,nt));if(rt.dangerouslySetInnerHTML!=null){if(rt.children!=null)throw Error(p$5(60));if(typeof rt.dangerouslySetInnerHTML!="object"||!("__html"in rt.dangerouslySetInnerHTML))throw Error(p$5(61))}if(rt.style!=null&&typeof rt.style!="object")throw Error(p$5(62))}}function vb(nt,rt){if(nt.indexOf("-")===-1)return typeof rt.is=="string";switch(nt){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(nt){return nt=nt.target||nt.srcElement||window,nt.correspondingUseElement&&(nt=nt.correspondingUseElement),nt.nodeType===3?nt.parentNode:nt}var yb=null,zb=null,Ab=null;function Bb(nt){if(nt=Cb(nt)){if(typeof yb!="function")throw Error(p$5(280));var rt=nt.stateNode;rt&&(rt=Db(rt),yb(nt.stateNode,nt.type,rt))}}function Eb(nt){zb?Ab?Ab.push(nt):Ab=[nt]:zb=nt}function Fb(){if(zb){var nt=zb,rt=Ab;if(Ab=zb=null,Bb(nt),rt)for(nt=0;nt<rt.length;nt++)Bb(rt[nt])}}function Gb(nt,rt){return nt(rt)}function Hb(){}var Ib=!1;function Jb(nt,rt,it){if(Ib)return nt(rt,it);Ib=!0;try{return Gb(nt,rt,it)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(nt,rt){var it=nt.stateNode;if(it===null)return null;var st=Db(it);if(st===null)return null;it=st[rt];e:switch(rt){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(st=!st.disabled)||(nt=nt.type,st=!(nt==="button"||nt==="input"||nt==="select"||nt==="textarea")),nt=!st;break e;default:nt=!1}if(nt)return null;if(it&&typeof it!="function")throw Error(p$5(231,rt,typeof it));return it}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(nt,rt,it,st,lt,ct,ut,dt,ht){var ft=Array.prototype.slice.call(arguments,3);try{rt.apply(it,ft)}catch(pt){this.onError(pt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(nt){Ob=!0,Pb=nt}};function Tb(nt,rt,it,st,lt,ct,ut,dt,ht){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(nt,rt,it,st,lt,ct,ut,dt,ht){if(Tb.apply(this,arguments),Ob){if(Ob){var ft=Pb;Ob=!1,Pb=null}else throw Error(p$5(198));Qb||(Qb=!0,Rb=ft)}}function Vb(nt){var rt=nt,it=nt;if(nt.alternate)for(;rt.return;)rt=rt.return;else{nt=rt;do rt=nt,rt.flags&4098&&(it=rt.return),nt=rt.return;while(nt)}return rt.tag===3?it:null}function Wb(nt){if(nt.tag===13){var rt=nt.memoizedState;if(rt===null&&(nt=nt.alternate,nt!==null&&(rt=nt.memoizedState)),rt!==null)return rt.dehydrated}return null}function Xb(nt){if(Vb(nt)!==nt)throw Error(p$5(188))}function Yb(nt){var rt=nt.alternate;if(!rt){if(rt=Vb(nt),rt===null)throw Error(p$5(188));return rt!==nt?null:nt}for(var it=nt,st=rt;;){var lt=it.return;if(lt===null)break;var ct=lt.alternate;if(ct===null){if(st=lt.return,st!==null){it=st;continue}break}if(lt.child===ct.child){for(ct=lt.child;ct;){if(ct===it)return Xb(lt),nt;if(ct===st)return Xb(lt),rt;ct=ct.sibling}throw Error(p$5(188))}if(it.return!==st.return)it=lt,st=ct;else{for(var ut=!1,dt=lt.child;dt;){if(dt===it){ut=!0,it=lt,st=ct;break}if(dt===st){ut=!0,st=lt,it=ct;break}dt=dt.sibling}if(!ut){for(dt=ct.child;dt;){if(dt===it){ut=!0,it=ct,st=lt;break}if(dt===st){ut=!0,st=ct,it=lt;break}dt=dt.sibling}if(!ut)throw Error(p$5(189))}}if(it.alternate!==st)throw Error(p$5(190))}if(it.tag!==3)throw Error(p$5(188));return it.stateNode.current===it?nt:rt}function Zb(nt){return nt=Yb(nt),nt!==null?$b(nt):null}function $b(nt){if(nt.tag===5||nt.tag===6)return nt;for(nt=nt.child;nt!==null;){var rt=$b(nt);if(rt!==null)return rt;nt=nt.sibling}return null}var ac$1=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc=ca$1.unstable_requestPaint,B$2=ca$1.unstable_now,ec=ca$1.unstable_getCurrentPriorityLevel,fc=ca$1.unstable_ImmediatePriority,gc=ca$1.unstable_UserBlockingPriority,hc=ca$1.unstable_NormalPriority,ic=ca$1.unstable_LowPriority,jc=ca$1.unstable_IdlePriority,kc=null,lc=null;function mc(nt){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,nt,void 0,(nt.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(nt){return nt>>>=0,nt===0?32:31-(pc(nt)/qc|0)|0}var rc=64,sc=4194304;function tc(nt){switch(nt&-nt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return nt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return nt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return nt}}function uc(nt,rt){var it=nt.pendingLanes;if(it===0)return 0;var st=0,lt=nt.suspendedLanes,ct=nt.pingedLanes,ut=it&268435455;if(ut!==0){var dt=ut&~lt;dt!==0?st=tc(dt):(ct&=ut,ct!==0&&(st=tc(ct)))}else ut=it&~lt,ut!==0?st=tc(ut):ct!==0&&(st=tc(ct));if(st===0)return 0;if(rt!==0&&rt!==st&&!(rt&lt)&&(lt=st&-st,ct=rt&-rt,lt>=ct||lt===16&&(ct&4194240)!==0))return rt;if(st&4&&(st|=it&16),rt=nt.entangledLanes,rt!==0)for(nt=nt.entanglements,rt&=st;0<rt;)it=31-oc(rt),lt=1<<it,st|=nt[it],rt&=~lt;return st}function vc(nt,rt){switch(nt){case 1:case 2:case 4:return rt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return rt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(nt,rt){for(var it=nt.suspendedLanes,st=nt.pingedLanes,lt=nt.expirationTimes,ct=nt.pendingLanes;0<ct;){var ut=31-oc(ct),dt=1<<ut,ht=lt[ut];ht===-1?(!(dt&it)||dt&st)&&(lt[ut]=vc(dt,rt)):ht<=rt&&(nt.expiredLanes|=dt),ct&=~dt}}function xc(nt){return nt=nt.pendingLanes&-1073741825,nt!==0?nt:nt&1073741824?1073741824:0}function yc(){var nt=rc;return rc<<=1,!(rc&4194240)&&(rc=64),nt}function zc(nt){for(var rt=[],it=0;31>it;it++)rt.push(nt);return rt}function Ac(nt,rt,it){nt.pendingLanes|=rt,rt!==536870912&&(nt.suspendedLanes=0,nt.pingedLanes=0),nt=nt.eventTimes,rt=31-oc(rt),nt[rt]=it}function Bc(nt,rt){var it=nt.pendingLanes&~rt;nt.pendingLanes=rt,nt.suspendedLanes=0,nt.pingedLanes=0,nt.expiredLanes&=rt,nt.mutableReadLanes&=rt,nt.entangledLanes&=rt,rt=nt.entanglements;var st=nt.eventTimes;for(nt=nt.expirationTimes;0<it;){var lt=31-oc(it),ct=1<<lt;rt[lt]=0,st[lt]=-1,nt[lt]=-1,it&=~ct}}function Cc(nt,rt){var it=nt.entangledLanes|=rt;for(nt=nt.entanglements;it;){var st=31-oc(it),lt=1<<st;lt&rt|nt[st]&rt&&(nt[st]|=rt),it&=~lt}}var C$3=0;function Dc(nt){return nt&=-nt,1<nt?4<nt?nt&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(nt,rt){switch(nt){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(rt.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(rt.pointerId)}}function Tc(nt,rt,it,st,lt,ct){return nt===null||nt.nativeEvent!==ct?(nt={blockedOn:rt,domEventName:it,eventSystemFlags:st,nativeEvent:ct,targetContainers:[lt]},rt!==null&&(rt=Cb(rt),rt!==null&&Fc(rt)),nt):(nt.eventSystemFlags|=st,rt=nt.targetContainers,lt!==null&&rt.indexOf(lt)===-1&&rt.push(lt),nt)}function Uc(nt,rt,it,st,lt){switch(rt){case"focusin":return Lc=Tc(Lc,nt,rt,it,st,lt),!0;case"dragenter":return Mc=Tc(Mc,nt,rt,it,st,lt),!0;case"mouseover":return Nc=Tc(Nc,nt,rt,it,st,lt),!0;case"pointerover":var ct=lt.pointerId;return Oc.set(ct,Tc(Oc.get(ct)||null,nt,rt,it,st,lt)),!0;case"gotpointercapture":return ct=lt.pointerId,Pc.set(ct,Tc(Pc.get(ct)||null,nt,rt,it,st,lt)),!0}return!1}function Vc(nt){var rt=Wc(nt.target);if(rt!==null){var it=Vb(rt);if(it!==null){if(rt=it.tag,rt===13){if(rt=Wb(it),rt!==null){nt.blockedOn=rt,Ic(nt.priority,function(){Gc(it)});return}}else if(rt===3&&it.stateNode.current.memoizedState.isDehydrated){nt.blockedOn=it.tag===3?it.stateNode.containerInfo:null;return}}}nt.blockedOn=null}function Xc(nt){if(nt.blockedOn!==null)return!1;for(var rt=nt.targetContainers;0<rt.length;){var it=Yc(nt.domEventName,nt.eventSystemFlags,rt[0],nt.nativeEvent);if(it===null){it=nt.nativeEvent;var st=new it.constructor(it.type,it);wb=st,it.target.dispatchEvent(st),wb=null}else return rt=Cb(it),rt!==null&&Fc(rt),nt.blockedOn=it,!1;rt.shift()}return!0}function Zc(nt,rt,it){Xc(nt)&&it.delete(rt)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad$1(nt,rt){nt.blockedOn===rt&&(nt.blockedOn=null,Jc||(Jc=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c)))}function bd$1(nt){function rt(lt){return ad$1(lt,nt)}if(0<Kc.length){ad$1(Kc[0],nt);for(var it=1;it<Kc.length;it++){var st=Kc[it];st.blockedOn===nt&&(st.blockedOn=null)}}for(Lc!==null&&ad$1(Lc,nt),Mc!==null&&ad$1(Mc,nt),Nc!==null&&ad$1(Nc,nt),Oc.forEach(rt),Pc.forEach(rt),it=0;it<Qc.length;it++)st=Qc[it],st.blockedOn===nt&&(st.blockedOn=null);for(;0<Qc.length&&(it=Qc[0],it.blockedOn===null);)Vc(it),it.blockedOn===null&&Qc.shift()}var cd$1=ua.ReactCurrentBatchConfig,dd=!0;function ed(nt,rt,it,st){var lt=C$3,ct=cd$1.transition;cd$1.transition=null;try{C$3=1,fd(nt,rt,it,st)}finally{C$3=lt,cd$1.transition=ct}}function gd(nt,rt,it,st){var lt=C$3,ct=cd$1.transition;cd$1.transition=null;try{C$3=4,fd(nt,rt,it,st)}finally{C$3=lt,cd$1.transition=ct}}function fd(nt,rt,it,st){if(dd){var lt=Yc(nt,rt,it,st);if(lt===null)hd(nt,rt,st,id,it),Sc(nt,st);else if(Uc(lt,nt,rt,it,st))st.stopPropagation();else if(Sc(nt,st),rt&4&&-1<Rc.indexOf(nt)){for(;lt!==null;){var ct=Cb(lt);if(ct!==null&&Ec(ct),ct=Yc(nt,rt,it,st),ct===null&&hd(nt,rt,st,id,it),ct===lt)break;lt=ct}lt!==null&&st.stopPropagation()}else hd(nt,rt,st,null,it)}}var id=null;function Yc(nt,rt,it,st){if(id=null,nt=xb(st),nt=Wc(nt),nt!==null)if(rt=Vb(nt),rt===null)nt=null;else if(it=rt.tag,it===13){if(nt=Wb(rt),nt!==null)return nt;nt=null}else if(it===3){if(rt.stateNode.current.memoizedState.isDehydrated)return rt.tag===3?rt.stateNode.containerInfo:null;nt=null}else rt!==nt&&(nt=null);return id=nt,null}function jd(nt){switch(nt){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var nt,rt=ld,it=rt.length,st,lt="value"in kd?kd.value:kd.textContent,ct=lt.length;for(nt=0;nt<it&&rt[nt]===lt[nt];nt++);var ut=it-nt;for(st=1;st<=ut&&rt[it-st]===lt[ct-st];st++);return md=lt.slice(nt,1<st?1-st:void 0)}function od(nt){var rt=nt.keyCode;return"charCode"in nt?(nt=nt.charCode,nt===0&&rt===13&&(nt=13)):nt=rt,nt===10&&(nt=13),32<=nt||nt===13?nt:0}function pd(){return!0}function qd(){return!1}function rd(nt){function rt(it,st,lt,ct,ut){this._reactName=it,this._targetInst=lt,this.type=st,this.nativeEvent=ct,this.target=ut,this.currentTarget=null;for(var dt in nt)nt.hasOwnProperty(dt)&&(it=nt[dt],this[dt]=it?it(ct):ct[dt]);return this.isDefaultPrevented=(ct.defaultPrevented!=null?ct.defaultPrevented:ct.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2(rt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var it=this.nativeEvent;it&&(it.preventDefault?it.preventDefault():typeof it.returnValue!="unknown"&&(it.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var it=this.nativeEvent;it&&(it.stopPropagation?it.stopPropagation():typeof it.cancelBubble!="unknown"&&(it.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),rt}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(nt){return nt.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(nt){return nt.relatedTarget===void 0?nt.fromElement===nt.srcElement?nt.toElement:nt.fromElement:nt.relatedTarget},movementX:function(nt){return"movementX"in nt?nt.movementX:(nt!==yd&&(yd&&nt.type==="mousemove"?(wd=nt.screenX-yd.screenX,xd=nt.screenY-yd.screenY):xd=wd=0,yd=nt),wd)},movementY:function(nt){return"movementY"in nt?nt.movementY:xd}}),Bd=rd(Ad),Cd=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$2({},sd,{clipboardData:function(nt){return"clipboardData"in nt?nt.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(nt){var rt=this.nativeEvent;return rt.getModifierState?rt.getModifierState(nt):(nt=Od[nt])?!!rt[nt]:!1}function zd(){return Pd}var Qd=A$2({},ud,{key:function(nt){if(nt.key){var rt=Md[nt.key]||nt.key;if(rt!=="Unidentified")return rt}return nt.type==="keypress"?(nt=od(nt),nt===13?"Enter":String.fromCharCode(nt)):nt.type==="keydown"||nt.type==="keyup"?Nd[nt.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(nt){return nt.type==="keypress"?od(nt):0},keyCode:function(nt){return nt.type==="keydown"||nt.type==="keyup"?nt.keyCode:0},which:function(nt){return nt.type==="keypress"?od(nt):nt.type==="keydown"||nt.type==="keyup"?nt.keyCode:0}}),Rd=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(nt){return"deltaX"in nt?nt.deltaX:"wheelDeltaX"in nt?-nt.wheelDeltaX:0},deltaY:function(nt){return"deltaY"in nt?nt.deltaY:"wheelDeltaY"in nt?-nt.wheelDeltaY:"wheelDelta"in nt?-nt.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$2=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae$2||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe$1=!1;function ge(nt,rt){switch(nt){case"keyup":return $d.indexOf(rt.keyCode)!==-1;case"keydown":return rt.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(nt){return nt=nt.detail,typeof nt=="object"&&"data"in nt?nt.data:null}var ie$1=!1;function je$2(nt,rt){switch(nt){case"compositionend":return he$1(rt);case"keypress":return rt.which!==32?null:(fe$1=!0,ee$1);case"textInput":return nt=rt.data,nt===ee$1&&fe$1?null:nt;default:return null}}function ke$1(nt,rt){if(ie$1)return nt==="compositionend"||!ae$2&&ge(nt,rt)?(nt=nd(),md=ld=kd=null,ie$1=!1,nt):null;switch(nt){case"paste":return null;case"keypress":if(!(rt.ctrlKey||rt.altKey||rt.metaKey)||rt.ctrlKey&&rt.altKey){if(rt.char&&1<rt.char.length)return rt.char;if(rt.which)return String.fromCharCode(rt.which)}return null;case"compositionend":return de$1&&rt.locale!=="ko"?null:rt.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(nt){var rt=nt&&nt.nodeName&&nt.nodeName.toLowerCase();return rt==="input"?!!le$1[nt.type]:rt==="textarea"}function ne(nt,rt,it,st){Eb(st),rt=oe$1(rt,"onChange"),0<rt.length&&(it=new td("onChange","change",null,it,st),nt.push({event:it,listeners:rt}))}var pe=null,qe$3=null;function re$1(nt){se$1(nt,0)}function te$1(nt){var rt=ue$2(nt);if(Wa(rt))return nt}function ve(nt,rt){if(nt==="change")return rt}var we$2=!1;if(ia){var xe$1;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze$2=document.createElement("div");ze$2.setAttribute("oninput","return;"),ye$1=typeof ze$2.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$2=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be$1),qe$3=pe=null)}function Be$1(nt){if(nt.propertyName==="value"&&te$1(qe$3)){var rt=[];ne(rt,qe$3,nt,xb(nt)),Jb(re$1,rt)}}function Ce(nt,rt,it){nt==="focusin"?(Ae(),pe=rt,qe$3=it,pe.attachEvent("onpropertychange",Be$1)):nt==="focusout"&&Ae()}function De$1(nt){if(nt==="selectionchange"||nt==="keyup"||nt==="keydown")return te$1(qe$3)}function Ee$1(nt,rt){if(nt==="click")return te$1(rt)}function Fe$1(nt,rt){if(nt==="input"||nt==="change")return te$1(rt)}function Ge$2(nt,rt){return nt===rt&&(nt!==0||1/nt===1/rt)||nt!==nt&&rt!==rt}var He$3=typeof Object.is=="function"?Object.is:Ge$2;function Ie(nt,rt){if(He$3(nt,rt))return!0;if(typeof nt!="object"||nt===null||typeof rt!="object"||rt===null)return!1;var it=Object.keys(nt),st=Object.keys(rt);if(it.length!==st.length)return!1;for(st=0;st<it.length;st++){var lt=it[st];if(!ja.call(rt,lt)||!He$3(nt[lt],rt[lt]))return!1}return!0}function Je$2(nt){for(;nt&&nt.firstChild;)nt=nt.firstChild;return nt}function Ke$2(nt,rt){var it=Je$2(nt);nt=0;for(var st;it;){if(it.nodeType===3){if(st=nt+it.textContent.length,nt<=rt&&st>=rt)return{node:it,offset:rt-nt};nt=st}e:{for(;it;){if(it.nextSibling){it=it.nextSibling;break e}it=it.parentNode}it=void 0}it=Je$2(it)}}function Le$1(nt,rt){return nt&&rt?nt===rt?!0:nt&&nt.nodeType===3?!1:rt&&rt.nodeType===3?Le$1(nt,rt.parentNode):"contains"in nt?nt.contains(rt):nt.compareDocumentPosition?!!(nt.compareDocumentPosition(rt)&16):!1:!1}function Me$1(){for(var nt=window,rt=Xa();rt instanceof nt.HTMLIFrameElement;){try{var it=typeof rt.contentWindow.location.href=="string"}catch{it=!1}if(it)nt=rt.contentWindow;else break;rt=Xa(nt.document)}return rt}function Ne$3(nt){var rt=nt&&nt.nodeName&&nt.nodeName.toLowerCase();return rt&&(rt==="input"&&(nt.type==="text"||nt.type==="search"||nt.type==="tel"||nt.type==="url"||nt.type==="password")||rt==="textarea"||nt.contentEditable==="true")}function Oe(nt){var rt=Me$1(),it=nt.focusedElem,st=nt.selectionRange;if(rt!==it&&it&&it.ownerDocument&&Le$1(it.ownerDocument.documentElement,it)){if(st!==null&&Ne$3(it)){if(rt=st.start,nt=st.end,nt===void 0&&(nt=rt),"selectionStart"in it)it.selectionStart=rt,it.selectionEnd=Math.min(nt,it.value.length);else if(nt=(rt=it.ownerDocument||document)&&rt.defaultView||window,nt.getSelection){nt=nt.getSelection();var lt=it.textContent.length,ct=Math.min(st.start,lt);st=st.end===void 0?ct:Math.min(st.end,lt),!nt.extend&&ct>st&&(lt=st,st=ct,ct=lt),lt=Ke$2(it,ct);var ut=Ke$2(it,st);lt&&ut&&(nt.rangeCount!==1||nt.anchorNode!==lt.node||nt.anchorOffset!==lt.offset||nt.focusNode!==ut.node||nt.focusOffset!==ut.offset)&&(rt=rt.createRange(),rt.setStart(lt.node,lt.offset),nt.removeAllRanges(),ct>st?(nt.addRange(rt),nt.extend(ut.node,ut.offset)):(rt.setEnd(ut.node,ut.offset),nt.addRange(rt)))}}for(rt=[],nt=it;nt=nt.parentNode;)nt.nodeType===1&&rt.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof it.focus=="function"&&it.focus(),it=0;it<rt.length;it++)nt=rt[it],nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}var Pe$2=ia&&"documentMode"in document&&11>=document.documentMode,Qe$2=null,Re$1=null,Se$1=null,Te=!1;function Ue$2(nt,rt,it){var st=it.window===it?it.document:it.nodeType===9?it:it.ownerDocument;Te||Qe$2==null||Qe$2!==Xa(st)||(st=Qe$2,"selectionStart"in st&&Ne$3(st)?st={start:st.selectionStart,end:st.selectionEnd}:(st=(st.ownerDocument&&st.ownerDocument.defaultView||window).getSelection(),st={anchorNode:st.anchorNode,anchorOffset:st.anchorOffset,focusNode:st.focusNode,focusOffset:st.focusOffset}),Se$1&&Ie(Se$1,st)||(Se$1=st,st=oe$1(Re$1,"onSelect"),0<st.length&&(rt=new td("onSelect","select",null,rt,it),nt.push({event:rt,listeners:st}),rt.target=Qe$2)))}function Ve$2(nt,rt){var it={};return it[nt.toLowerCase()]=rt.toLowerCase(),it["Webkit"+nt]="webkit"+rt,it["Moz"+nt]="moz"+rt,it}var We$2={animationend:Ve$2("Animation","AnimationEnd"),animationiteration:Ve$2("Animation","AnimationIteration"),animationstart:Ve$2("Animation","AnimationStart"),transitionend:Ve$2("Transition","TransitionEnd")},Xe$2={},Ye$2={};ia&&(Ye$2=document.createElement("div").style,"AnimationEvent"in window||(delete We$2.animationend.animation,delete We$2.animationiteration.animation,delete We$2.animationstart.animation),"TransitionEvent"in window||delete We$2.transitionend.transition);function Ze$2(nt){if(Xe$2[nt])return Xe$2[nt];if(!We$2[nt])return nt;var rt=We$2[nt],it;for(it in rt)if(rt.hasOwnProperty(it)&&it in Ye$2)return Xe$2[nt]=rt[it];return nt}var $e$2=Ze$2("animationend"),af$1=Ze$2("animationiteration"),bf$1=Ze$2("animationstart"),cf$1=Ze$2("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff$1(nt,rt){df.set(nt,rt),fa(rt,[nt])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff$1(jf,"on"+kf)}ff$1($e$2,"onAnimationEnd");ff$1(af$1,"onAnimationIteration");ff$1(bf$1,"onAnimationStart");ff$1("dblclick","onDoubleClick");ff$1("focusin","onFocus");ff$1("focusout","onBlur");ff$1(cf$1,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(nt,rt,it){var st=nt.type||"unknown-event";nt.currentTarget=it,Ub(st,rt,void 0,nt),nt.currentTarget=null}function se$1(nt,rt){rt=(rt&4)!==0;for(var it=0;it<nt.length;it++){var st=nt[it],lt=st.event;st=st.listeners;e:{var ct=void 0;if(rt)for(var ut=st.length-1;0<=ut;ut--){var dt=st[ut],ht=dt.instance,ft=dt.currentTarget;if(dt=dt.listener,ht!==ct&&lt.isPropagationStopped())break e;nf(lt,dt,ft),ct=ht}else for(ut=0;ut<st.length;ut++){if(dt=st[ut],ht=dt.instance,ft=dt.currentTarget,dt=dt.listener,ht!==ct&&lt.isPropagationStopped())break e;nf(lt,dt,ft),ct=ht}}}if(Qb)throw nt=Rb,Qb=!1,Rb=null,nt}function D$4(nt,rt){var it=rt[of];it===void 0&&(it=rt[of]=new Set);var st=nt+"__bubble";it.has(st)||(pf(rt,nt,2,!1),it.add(st))}function qf(nt,rt,it){var st=0;rt&&(st|=4),pf(it,nt,st,rt)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(nt){if(!nt[rf]){nt[rf]=!0,da.forEach(function(it){it!=="selectionchange"&&(mf.has(it)||qf(it,!1,nt),qf(it,!0,nt))});var rt=nt.nodeType===9?nt:nt.ownerDocument;rt===null||rt[rf]||(rt[rf]=!0,qf("selectionchange",!1,rt))}}function pf(nt,rt,it,st){switch(jd(rt)){case 1:var lt=ed;break;case 4:lt=gd;break;default:lt=fd}it=lt.bind(null,rt,it,nt),lt=void 0,!Lb||rt!=="touchstart"&&rt!=="touchmove"&&rt!=="wheel"||(lt=!0),st?lt!==void 0?nt.addEventListener(rt,it,{capture:!0,passive:lt}):nt.addEventListener(rt,it,!0):lt!==void 0?nt.addEventListener(rt,it,{passive:lt}):nt.addEventListener(rt,it,!1)}function hd(nt,rt,it,st,lt){var ct=st;if(!(rt&1)&&!(rt&2)&&st!==null)e:for(;;){if(st===null)return;var ut=st.tag;if(ut===3||ut===4){var dt=st.stateNode.containerInfo;if(dt===lt||dt.nodeType===8&&dt.parentNode===lt)break;if(ut===4)for(ut=st.return;ut!==null;){var ht=ut.tag;if((ht===3||ht===4)&&(ht=ut.stateNode.containerInfo,ht===lt||ht.nodeType===8&&ht.parentNode===lt))return;ut=ut.return}for(;dt!==null;){if(ut=Wc(dt),ut===null)return;if(ht=ut.tag,ht===5||ht===6){st=ct=ut;continue e}dt=dt.parentNode}}st=st.return}Jb(function(){var ft=ct,pt=xb(it),mt=[];e:{var gt=df.get(nt);if(gt!==void 0){var xt=td,yt=nt;switch(nt){case"keypress":if(od(it)===0)break e;case"keydown":case"keyup":xt=Rd;break;case"focusin":yt="focus",xt=Fd;break;case"focusout":yt="blur",xt=Fd;break;case"beforeblur":case"afterblur":xt=Fd;break;case"click":if(it.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xt=Vd;break;case $e$2:case af$1:case bf$1:xt=Hd;break;case cf$1:xt=Xd;break;case"scroll":xt=vd;break;case"wheel":xt=Zd;break;case"copy":case"cut":case"paste":xt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xt=Td}var vt=(rt&4)!==0,St=!vt&&nt==="scroll",wt=vt?gt!==null?gt+"Capture":null:gt;vt=[];for(var Et=ft,Rt;Et!==null;){Rt=Et;var Tt=Rt.stateNode;if(Rt.tag===5&&Tt!==null&&(Rt=Tt,wt!==null&&(Tt=Kb(Et,wt),Tt!=null&&vt.push(tf(Et,Tt,Rt)))),St)break;Et=Et.return}0<vt.length&&(gt=new xt(gt,yt,null,it,pt),mt.push({event:gt,listeners:vt}))}}if(!(rt&7)){e:{if(gt=nt==="mouseover"||nt==="pointerover",xt=nt==="mouseout"||nt==="pointerout",gt&&it!==wb&&(yt=it.relatedTarget||it.fromElement)&&(Wc(yt)||yt[uf]))break e;if((xt||gt)&&(gt=pt.window===pt?pt:(gt=pt.ownerDocument)?gt.defaultView||gt.parentWindow:window,xt?(yt=it.relatedTarget||it.toElement,xt=ft,yt=yt?Wc(yt):null,yt!==null&&(St=Vb(yt),yt!==St||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(xt=null,yt=ft),xt!==yt)){if(vt=Bd,Tt="onMouseLeave",wt="onMouseEnter",Et="mouse",(nt==="pointerout"||nt==="pointerover")&&(vt=Td,Tt="onPointerLeave",wt="onPointerEnter",Et="pointer"),St=xt==null?gt:ue$2(xt),Rt=yt==null?gt:ue$2(yt),gt=new vt(Tt,Et+"leave",xt,it,pt),gt.target=St,gt.relatedTarget=Rt,Tt=null,Wc(pt)===ft&&(vt=new vt(wt,Et+"enter",yt,it,pt),vt.target=Rt,vt.relatedTarget=St,Tt=vt),St=Tt,xt&&yt)t:{for(vt=xt,wt=yt,Et=0,Rt=vt;Rt;Rt=vf(Rt))Et++;for(Rt=0,Tt=wt;Tt;Tt=vf(Tt))Rt++;for(;0<Et-Rt;)vt=vf(vt),Et--;for(;0<Rt-Et;)wt=vf(wt),Rt--;for(;Et--;){if(vt===wt||wt!==null&&vt===wt.alternate)break t;vt=vf(vt),wt=vf(wt)}vt=null}else vt=null;xt!==null&&wf(mt,gt,xt,vt,!1),yt!==null&&St!==null&&wf(mt,St,yt,vt,!0)}}e:{if(gt=ft?ue$2(ft):window,xt=gt.nodeName&&gt.nodeName.toLowerCase(),xt==="select"||xt==="input"&&gt.type==="file")var It=ve;else if(me(gt))if(we$2)It=Fe$1;else{It=De$1;var At=Ce}else(xt=gt.nodeName)&&xt.toLowerCase()==="input"&&(gt.type==="checkbox"||gt.type==="radio")&&(It=Ee$1);if(It&&(It=It(nt,ft))){ne(mt,It,it,pt);break e}At&&At(nt,gt,ft),nt==="focusout"&&(At=gt._wrapperState)&&At.controlled&&gt.type==="number"&&cb$1(gt,"number",gt.value)}switch(At=ft?ue$2(ft):window,nt){case"focusin":(me(At)||At.contentEditable==="true")&&(Qe$2=At,Re$1=ft,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$2=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue$2(mt,it,pt);break;case"selectionchange":if(Pe$2)break;case"keydown":case"keyup":Ue$2(mt,it,pt)}var Dt;if(ae$2)e:{switch(nt){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else ie$1?ge(nt,it)&&(jt="onCompositionEnd"):nt==="keydown"&&it.keyCode===229&&(jt="onCompositionStart");jt&&(de$1&&it.locale!=="ko"&&(ie$1||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&ie$1&&(Dt=nd()):(kd=pt,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),At=oe$1(ft,jt),0<At.length&&(jt=new Ld(jt,nt,null,it,pt),mt.push({event:jt,listeners:At}),Dt?jt.data=Dt:(Dt=he$1(it),Dt!==null&&(jt.data=Dt)))),(Dt=ce$1?je$2(nt,it):ke$1(nt,it))&&(ft=oe$1(ft,"onBeforeInput"),0<ft.length&&(pt=new Ld("onBeforeInput","beforeinput",null,it,pt),mt.push({event:pt,listeners:ft}),pt.data=Dt))}se$1(mt,rt)})}function tf(nt,rt,it){return{instance:nt,listener:rt,currentTarget:it}}function oe$1(nt,rt){for(var it=rt+"Capture",st=[];nt!==null;){var lt=nt,ct=lt.stateNode;lt.tag===5&&ct!==null&&(lt=ct,ct=Kb(nt,it),ct!=null&&st.unshift(tf(nt,ct,lt)),ct=Kb(nt,rt),ct!=null&&st.push(tf(nt,ct,lt))),nt=nt.return}return st}function vf(nt){if(nt===null)return null;do nt=nt.return;while(nt&&nt.tag!==5);return nt||null}function wf(nt,rt,it,st,lt){for(var ct=rt._reactName,ut=[];it!==null&&it!==st;){var dt=it,ht=dt.alternate,ft=dt.stateNode;if(ht!==null&&ht===st)break;dt.tag===5&&ft!==null&&(dt=ft,lt?(ht=Kb(it,ct),ht!=null&&ut.unshift(tf(it,ht,dt))):lt||(ht=Kb(it,ct),ht!=null&&ut.push(tf(it,ht,dt)))),it=it.return}ut.length!==0&&nt.push({event:rt,listeners:ut})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(nt){return(typeof nt=="string"?nt:""+nt).replace(xf,`
`).replace(yf,"")}function Af(nt,rt,it){if(rt=zf(rt),zf(nt)!==rt&&it)throw Error(p$5(425))}function Bf(){}var Cf=null,Df=null;function Ef(nt,rt){return nt==="textarea"||nt==="noscript"||typeof rt.children=="string"||typeof rt.children=="number"||typeof rt.dangerouslySetInnerHTML=="object"&&rt.dangerouslySetInnerHTML!==null&&rt.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(nt){return Hf.resolve(null).then(nt).catch(If)}:Ff;function If(nt){setTimeout(function(){throw nt})}function Kf(nt,rt){var it=rt,st=0;do{var lt=it.nextSibling;if(nt.removeChild(it),lt&&lt.nodeType===8)if(it=lt.data,it==="/$"){if(st===0){nt.removeChild(lt),bd$1(rt);return}st--}else it!=="$"&&it!=="$?"&&it!=="$!"||st++;it=lt}while(it);bd$1(rt)}function Lf(nt){for(;nt!=null;nt=nt.nextSibling){var rt=nt.nodeType;if(rt===1||rt===3)break;if(rt===8){if(rt=nt.data,rt==="$"||rt==="$!"||rt==="$?")break;if(rt==="/$")return null}}return nt}function Mf(nt){nt=nt.previousSibling;for(var rt=0;nt;){if(nt.nodeType===8){var it=nt.data;if(it==="$"||it==="$!"||it==="$?"){if(rt===0)return nt;rt--}else it==="/$"&&rt++}nt=nt.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(nt){var rt=nt[Of];if(rt)return rt;for(var it=nt.parentNode;it;){if(rt=it[uf]||it[Of]){if(it=rt.alternate,rt.child!==null||it!==null&&it.child!==null)for(nt=Mf(nt);nt!==null;){if(it=nt[Of])return it;nt=Mf(nt)}return rt}nt=it,it=nt.parentNode}return null}function Cb(nt){return nt=nt[Of]||nt[uf],!nt||nt.tag!==5&&nt.tag!==6&&nt.tag!==13&&nt.tag!==3?null:nt}function ue$2(nt){if(nt.tag===5||nt.tag===6)return nt.stateNode;throw Error(p$5(33))}function Db(nt){return nt[Pf]||null}var Sf=[],Tf=-1;function Uf(nt){return{current:nt}}function E$2(nt){0>Tf||(nt.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$2(nt,rt){Tf++,Sf[Tf]=nt.current,nt.current=rt}var Vf={},H$2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(nt,rt){var it=nt.type.contextTypes;if(!it)return Vf;var st=nt.stateNode;if(st&&st.__reactInternalMemoizedUnmaskedChildContext===rt)return st.__reactInternalMemoizedMaskedChildContext;var lt={},ct;for(ct in it)lt[ct]=rt[ct];return st&&(nt=nt.stateNode,nt.__reactInternalMemoizedUnmaskedChildContext=rt,nt.__reactInternalMemoizedMaskedChildContext=lt),lt}function Zf(nt){return nt=nt.childContextTypes,nt!=null}function $f(){E$2(Wf),E$2(H$2)}function ag$1(nt,rt,it){if(H$2.current!==Vf)throw Error(p$5(168));G$2(H$2,rt),G$2(Wf,it)}function bg$1(nt,rt,it){var st=nt.stateNode;if(rt=rt.childContextTypes,typeof st.getChildContext!="function")return it;st=st.getChildContext();for(var lt in st)if(!(lt in rt))throw Error(p$5(108,Ra(nt)||"Unknown",lt));return A$2({},it,st)}function cg$1(nt){return nt=(nt=nt.stateNode)&&nt.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$2.current,G$2(H$2,nt),G$2(Wf,Wf.current),!0}function dg(nt,rt,it){var st=nt.stateNode;if(!st)throw Error(p$5(169));it?(nt=bg$1(nt,rt,Xf),st.__reactInternalMemoizedMergedChildContext=nt,E$2(Wf),E$2(H$2),G$2(H$2,nt)):E$2(Wf),G$2(Wf,it)}var eg=null,fg=!1,gg$1=!1;function hg(nt){eg===null?eg=[nt]:eg.push(nt)}function ig(nt){fg=!0,hg(nt)}function jg(){if(!gg$1&&eg!==null){gg$1=!0;var nt=0,rt=C$3;try{var it=eg;for(C$3=1;nt<it.length;nt++){var st=it[nt];do st=st(!0);while(st!==null)}eg=null,fg=!1}catch(lt){throw eg!==null&&(eg=eg.slice(nt+1)),ac$1(fc,jg),lt}finally{C$3=rt,gg$1=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(nt,rt){kg[lg++]=ng,kg[lg++]=mg,mg=nt,ng=rt}function ug(nt,rt,it){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=nt;var st=rg;nt=sg;var lt=32-oc(st)-1;st&=~(1<<lt),it+=1;var ct=32-oc(rt)+lt;if(30<ct){var ut=lt-lt%5;ct=(st&(1<<ut)-1).toString(32),st>>=ut,lt-=ut,rg=1<<32-oc(rt)+lt|it<<lt|st,sg=ct+nt}else rg=1<<ct|it<<lt|st,sg=nt}function vg(nt){nt.return!==null&&(tg(nt,1),ug(nt,1,0))}function wg(nt){for(;nt===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;nt===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$9=!1,zg=null;function Ag(nt,rt){var it=Bg(5,null,null,0);it.elementType="DELETED",it.stateNode=rt,it.return=nt,rt=nt.deletions,rt===null?(nt.deletions=[it],nt.flags|=16):rt.push(it)}function Cg(nt,rt){switch(nt.tag){case 5:var it=nt.type;return rt=rt.nodeType!==1||it.toLowerCase()!==rt.nodeName.toLowerCase()?null:rt,rt!==null?(nt.stateNode=rt,xg=nt,yg=Lf(rt.firstChild),!0):!1;case 6:return rt=nt.pendingProps===""||rt.nodeType!==3?null:rt,rt!==null?(nt.stateNode=rt,xg=nt,yg=null,!0):!1;case 13:return rt=rt.nodeType!==8?null:rt,rt!==null?(it=qg!==null?{id:rg,overflow:sg}:null,nt.memoizedState={dehydrated:rt,treeContext:it,retryLane:1073741824},it=Bg(18,null,null,0),it.stateNode=rt,it.return=nt,nt.child=it,xg=nt,yg=null,!0):!1;default:return!1}}function Dg(nt){return(nt.mode&1)!==0&&(nt.flags&128)===0}function Eg(nt){if(I$9){var rt=yg;if(rt){var it=rt;if(!Cg(nt,rt)){if(Dg(nt))throw Error(p$5(418));rt=Lf(it.nextSibling);var st=xg;rt&&Cg(nt,rt)?Ag(st,it):(nt.flags=nt.flags&-4097|2,I$9=!1,xg=nt)}}else{if(Dg(nt))throw Error(p$5(418));nt.flags=nt.flags&-4097|2,I$9=!1,xg=nt}}}function Fg(nt){for(nt=nt.return;nt!==null&&nt.tag!==5&&nt.tag!==3&&nt.tag!==13;)nt=nt.return;xg=nt}function Gg(nt){if(nt!==xg)return!1;if(!I$9)return Fg(nt),I$9=!0,!1;var rt;if((rt=nt.tag!==3)&&!(rt=nt.tag!==5)&&(rt=nt.type,rt=rt!=="head"&&rt!=="body"&&!Ef(nt.type,nt.memoizedProps)),rt&&(rt=yg)){if(Dg(nt))throw Hg(),Error(p$5(418));for(;rt;)Ag(nt,rt),rt=Lf(rt.nextSibling)}if(Fg(nt),nt.tag===13){if(nt=nt.memoizedState,nt=nt!==null?nt.dehydrated:null,!nt)throw Error(p$5(317));e:{for(nt=nt.nextSibling,rt=0;nt;){if(nt.nodeType===8){var it=nt.data;if(it==="/$"){if(rt===0){yg=Lf(nt.nextSibling);break e}rt--}else it!=="$"&&it!=="$!"&&it!=="$?"||rt++}nt=nt.nextSibling}yg=null}}else yg=xg?Lf(nt.stateNode.nextSibling):null;return!0}function Hg(){for(var nt=yg;nt;)nt=Lf(nt.nextSibling)}function Ig(){yg=xg=null,I$9=!1}function Jg(nt){zg===null?zg=[nt]:zg.push(nt)}var Kg=ua.ReactCurrentBatchConfig;function Lg(nt,rt){if(nt&&nt.defaultProps){rt=A$2({},rt),nt=nt.defaultProps;for(var it in nt)rt[it]===void 0&&(rt[it]=nt[it]);return rt}return rt}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(nt){var rt=Mg.current;E$2(Mg),nt._currentValue=rt}function Sg(nt,rt,it){for(;nt!==null;){var st=nt.alternate;if((nt.childLanes&rt)!==rt?(nt.childLanes|=rt,st!==null&&(st.childLanes|=rt)):st!==null&&(st.childLanes&rt)!==rt&&(st.childLanes|=rt),nt===it)break;nt=nt.return}}function Tg(nt,rt){Ng=nt,Pg=Og=null,nt=nt.dependencies,nt!==null&&nt.firstContext!==null&&(nt.lanes&rt&&(Ug=!0),nt.firstContext=null)}function Vg(nt){var rt=nt._currentValue;if(Pg!==nt)if(nt={context:nt,memoizedValue:rt,next:null},Og===null){if(Ng===null)throw Error(p$5(308));Og=nt,Ng.dependencies={lanes:0,firstContext:nt}}else Og=Og.next=nt;return rt}var Wg=null;function Xg(nt){Wg===null?Wg=[nt]:Wg.push(nt)}function Yg(nt,rt,it,st){var lt=rt.interleaved;return lt===null?(it.next=it,Xg(rt)):(it.next=lt.next,lt.next=it),rt.interleaved=it,Zg(nt,st)}function Zg(nt,rt){nt.lanes|=rt;var it=nt.alternate;for(it!==null&&(it.lanes|=rt),it=nt,nt=nt.return;nt!==null;)nt.childLanes|=rt,it=nt.alternate,it!==null&&(it.childLanes|=rt),it=nt,nt=nt.return;return it.tag===3?it.stateNode:null}var $g=!1;function ah$1(nt){nt.updateQueue={baseState:nt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh$1(nt,rt){nt=nt.updateQueue,rt.updateQueue===nt&&(rt.updateQueue={baseState:nt.baseState,firstBaseUpdate:nt.firstBaseUpdate,lastBaseUpdate:nt.lastBaseUpdate,shared:nt.shared,effects:nt.effects})}function ch$1(nt,rt){return{eventTime:nt,lane:rt,tag:0,payload:null,callback:null,next:null}}function dh(nt,rt,it){var st=nt.updateQueue;if(st===null)return null;if(st=st.shared,K$1&2){var lt=st.pending;return lt===null?rt.next=rt:(rt.next=lt.next,lt.next=rt),st.pending=rt,Zg(nt,it)}return lt=st.interleaved,lt===null?(rt.next=rt,Xg(st)):(rt.next=lt.next,lt.next=rt),st.interleaved=rt,Zg(nt,it)}function eh(nt,rt,it){if(rt=rt.updateQueue,rt!==null&&(rt=rt.shared,(it&4194240)!==0)){var st=rt.lanes;st&=nt.pendingLanes,it|=st,rt.lanes=it,Cc(nt,it)}}function fh(nt,rt){var it=nt.updateQueue,st=nt.alternate;if(st!==null&&(st=st.updateQueue,it===st)){var lt=null,ct=null;if(it=it.firstBaseUpdate,it!==null){do{var ut={eventTime:it.eventTime,lane:it.lane,tag:it.tag,payload:it.payload,callback:it.callback,next:null};ct===null?lt=ct=ut:ct=ct.next=ut,it=it.next}while(it!==null);ct===null?lt=ct=rt:ct=ct.next=rt}else lt=ct=rt;it={baseState:st.baseState,firstBaseUpdate:lt,lastBaseUpdate:ct,shared:st.shared,effects:st.effects},nt.updateQueue=it;return}nt=it.lastBaseUpdate,nt===null?it.firstBaseUpdate=rt:nt.next=rt,it.lastBaseUpdate=rt}function gh(nt,rt,it,st){var lt=nt.updateQueue;$g=!1;var ct=lt.firstBaseUpdate,ut=lt.lastBaseUpdate,dt=lt.shared.pending;if(dt!==null){lt.shared.pending=null;var ht=dt,ft=ht.next;ht.next=null,ut===null?ct=ft:ut.next=ft,ut=ht;var pt=nt.alternate;pt!==null&&(pt=pt.updateQueue,dt=pt.lastBaseUpdate,dt!==ut&&(dt===null?pt.firstBaseUpdate=ft:dt.next=ft,pt.lastBaseUpdate=ht))}if(ct!==null){var mt=lt.baseState;ut=0,pt=ft=ht=null,dt=ct;do{var gt=dt.lane,xt=dt.eventTime;if((st&gt)===gt){pt!==null&&(pt=pt.next={eventTime:xt,lane:0,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null});e:{var yt=nt,vt=dt;switch(gt=rt,xt=it,vt.tag){case 1:if(yt=vt.payload,typeof yt=="function"){mt=yt.call(xt,mt,gt);break e}mt=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=vt.payload,gt=typeof yt=="function"?yt.call(xt,mt,gt):yt,gt==null)break e;mt=A$2({},mt,gt);break e;case 2:$g=!0}}dt.callback!==null&&dt.lane!==0&&(nt.flags|=64,gt=lt.effects,gt===null?lt.effects=[dt]:gt.push(dt))}else xt={eventTime:xt,lane:gt,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null},pt===null?(ft=pt=xt,ht=mt):pt=pt.next=xt,ut|=gt;if(dt=dt.next,dt===null){if(dt=lt.shared.pending,dt===null)break;gt=dt,dt=gt.next,gt.next=null,lt.lastBaseUpdate=gt,lt.shared.pending=null}}while(!0);if(pt===null&&(ht=mt),lt.baseState=ht,lt.firstBaseUpdate=ft,lt.lastBaseUpdate=pt,rt=lt.shared.interleaved,rt!==null){lt=rt;do ut|=lt.lane,lt=lt.next;while(lt!==rt)}else ct===null&&(lt.shared.lanes=0);hh$1|=ut,nt.lanes=ut,nt.memoizedState=mt}}function ih(nt,rt,it){if(nt=rt.effects,rt.effects=null,nt!==null)for(rt=0;rt<nt.length;rt++){var st=nt[rt],lt=st.callback;if(lt!==null){if(st.callback=null,st=it,typeof lt!="function")throw Error(p$5(191,lt));lt.call(st)}}}var jh=new aa$1.Component().refs;function kh(nt,rt,it,st){rt=nt.memoizedState,it=it(st,rt),it=it==null?rt:A$2({},rt,it),nt.memoizedState=it,nt.lanes===0&&(nt.updateQueue.baseState=it)}var nh={isMounted:function(nt){return(nt=nt._reactInternals)?Vb(nt)===nt:!1},enqueueSetState:function(nt,rt,it){nt=nt._reactInternals;var st=L$1(),lt=lh(nt),ct=ch$1(st,lt);ct.payload=rt,it!=null&&(ct.callback=it),rt=dh(nt,ct,lt),rt!==null&&(mh(rt,nt,lt,st),eh(rt,nt,lt))},enqueueReplaceState:function(nt,rt,it){nt=nt._reactInternals;var st=L$1(),lt=lh(nt),ct=ch$1(st,lt);ct.tag=1,ct.payload=rt,it!=null&&(ct.callback=it),rt=dh(nt,ct,lt),rt!==null&&(mh(rt,nt,lt,st),eh(rt,nt,lt))},enqueueForceUpdate:function(nt,rt){nt=nt._reactInternals;var it=L$1(),st=lh(nt),lt=ch$1(it,st);lt.tag=2,rt!=null&&(lt.callback=rt),rt=dh(nt,lt,st),rt!==null&&(mh(rt,nt,st,it),eh(rt,nt,st))}};function oh(nt,rt,it,st,lt,ct,ut){return nt=nt.stateNode,typeof nt.shouldComponentUpdate=="function"?nt.shouldComponentUpdate(st,ct,ut):rt.prototype&&rt.prototype.isPureReactComponent?!Ie(it,st)||!Ie(lt,ct):!0}function ph(nt,rt,it){var st=!1,lt=Vf,ct=rt.contextType;return typeof ct=="object"&&ct!==null?ct=Vg(ct):(lt=Zf(rt)?Xf:H$2.current,st=rt.contextTypes,ct=(st=st!=null)?Yf(nt,lt):Vf),rt=new rt(it,ct),nt.memoizedState=rt.state!==null&&rt.state!==void 0?rt.state:null,rt.updater=nh,nt.stateNode=rt,rt._reactInternals=nt,st&&(nt=nt.stateNode,nt.__reactInternalMemoizedUnmaskedChildContext=lt,nt.__reactInternalMemoizedMaskedChildContext=ct),rt}function qh(nt,rt,it,st){nt=rt.state,typeof rt.componentWillReceiveProps=="function"&&rt.componentWillReceiveProps(it,st),typeof rt.UNSAFE_componentWillReceiveProps=="function"&&rt.UNSAFE_componentWillReceiveProps(it,st),rt.state!==nt&&nh.enqueueReplaceState(rt,rt.state,null)}function rh(nt,rt,it,st){var lt=nt.stateNode;lt.props=it,lt.state=nt.memoizedState,lt.refs=jh,ah$1(nt);var ct=rt.contextType;typeof ct=="object"&&ct!==null?lt.context=Vg(ct):(ct=Zf(rt)?Xf:H$2.current,lt.context=Yf(nt,ct)),lt.state=nt.memoizedState,ct=rt.getDerivedStateFromProps,typeof ct=="function"&&(kh(nt,rt,ct,it),lt.state=nt.memoizedState),typeof rt.getDerivedStateFromProps=="function"||typeof lt.getSnapshotBeforeUpdate=="function"||typeof lt.UNSAFE_componentWillMount!="function"&&typeof lt.componentWillMount!="function"||(rt=lt.state,typeof lt.componentWillMount=="function"&&lt.componentWillMount(),typeof lt.UNSAFE_componentWillMount=="function"&&lt.UNSAFE_componentWillMount(),rt!==lt.state&&nh.enqueueReplaceState(lt,lt.state,null),gh(nt,it,lt,st),lt.state=nt.memoizedState),typeof lt.componentDidMount=="function"&&(nt.flags|=4194308)}function sh(nt,rt,it){if(nt=it.ref,nt!==null&&typeof nt!="function"&&typeof nt!="object"){if(it._owner){if(it=it._owner,it){if(it.tag!==1)throw Error(p$5(309));var st=it.stateNode}if(!st)throw Error(p$5(147,nt));var lt=st,ct=""+nt;return rt!==null&&rt.ref!==null&&typeof rt.ref=="function"&&rt.ref._stringRef===ct?rt.ref:(rt=function(ut){var dt=lt.refs;dt===jh&&(dt=lt.refs={}),ut===null?delete dt[ct]:dt[ct]=ut},rt._stringRef=ct,rt)}if(typeof nt!="string")throw Error(p$5(284));if(!it._owner)throw Error(p$5(290,nt))}return nt}function th(nt,rt){throw nt=Object.prototype.toString.call(rt),Error(p$5(31,nt==="[object Object]"?"object with keys {"+Object.keys(rt).join(", ")+"}":nt))}function uh(nt){var rt=nt._init;return rt(nt._payload)}function vh(nt){function rt(wt,Et){if(nt){var Rt=wt.deletions;Rt===null?(wt.deletions=[Et],wt.flags|=16):Rt.push(Et)}}function it(wt,Et){if(!nt)return null;for(;Et!==null;)rt(wt,Et),Et=Et.sibling;return null}function st(wt,Et){for(wt=new Map;Et!==null;)Et.key!==null?wt.set(Et.key,Et):wt.set(Et.index,Et),Et=Et.sibling;return wt}function lt(wt,Et){return wt=wh(wt,Et),wt.index=0,wt.sibling=null,wt}function ct(wt,Et,Rt){return wt.index=Rt,nt?(Rt=wt.alternate,Rt!==null?(Rt=Rt.index,Rt<Et?(wt.flags|=2,Et):Rt):(wt.flags|=2,Et)):(wt.flags|=1048576,Et)}function ut(wt){return nt&&wt.alternate===null&&(wt.flags|=2),wt}function dt(wt,Et,Rt,Tt){return Et===null||Et.tag!==6?(Et=xh(Rt,wt.mode,Tt),Et.return=wt,Et):(Et=lt(Et,Rt),Et.return=wt,Et)}function ht(wt,Et,Rt,Tt){var It=Rt.type;return It===ya?pt(wt,Et,Rt.props.children,Tt,Rt.key):Et!==null&&(Et.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===Ha&&uh(It)===Et.type)?(Tt=lt(Et,Rt.props),Tt.ref=sh(wt,Et,Rt),Tt.return=wt,Tt):(Tt=yh(Rt.type,Rt.key,Rt.props,null,wt.mode,Tt),Tt.ref=sh(wt,Et,Rt),Tt.return=wt,Tt)}function ft(wt,Et,Rt,Tt){return Et===null||Et.tag!==4||Et.stateNode.containerInfo!==Rt.containerInfo||Et.stateNode.implementation!==Rt.implementation?(Et=zh(Rt,wt.mode,Tt),Et.return=wt,Et):(Et=lt(Et,Rt.children||[]),Et.return=wt,Et)}function pt(wt,Et,Rt,Tt,It){return Et===null||Et.tag!==7?(Et=Ah(Rt,wt.mode,Tt,It),Et.return=wt,Et):(Et=lt(Et,Rt),Et.return=wt,Et)}function mt(wt,Et,Rt){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return Et=xh(""+Et,wt.mode,Rt),Et.return=wt,Et;if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case va:return Rt=yh(Et.type,Et.key,Et.props,null,wt.mode,Rt),Rt.ref=sh(wt,null,Et),Rt.return=wt,Rt;case wa:return Et=zh(Et,wt.mode,Rt),Et.return=wt,Et;case Ha:var Tt=Et._init;return mt(wt,Tt(Et._payload),Rt)}if(eb(Et)||Ka(Et))return Et=Ah(Et,wt.mode,Rt,null),Et.return=wt,Et;th(wt,Et)}return null}function gt(wt,Et,Rt,Tt){var It=Et!==null?Et.key:null;if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number")return It!==null?null:dt(wt,Et,""+Rt,Tt);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case va:return Rt.key===It?ht(wt,Et,Rt,Tt):null;case wa:return Rt.key===It?ft(wt,Et,Rt,Tt):null;case Ha:return It=Rt._init,gt(wt,Et,It(Rt._payload),Tt)}if(eb(Rt)||Ka(Rt))return It!==null?null:pt(wt,Et,Rt,Tt,null);th(wt,Rt)}return null}function xt(wt,Et,Rt,Tt,It){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return wt=wt.get(Rt)||null,dt(Et,wt,""+Tt,It);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case va:return wt=wt.get(Tt.key===null?Rt:Tt.key)||null,ht(Et,wt,Tt,It);case wa:return wt=wt.get(Tt.key===null?Rt:Tt.key)||null,ft(Et,wt,Tt,It);case Ha:var At=Tt._init;return xt(wt,Et,Rt,At(Tt._payload),It)}if(eb(Tt)||Ka(Tt))return wt=wt.get(Rt)||null,pt(Et,wt,Tt,It,null);th(Et,Tt)}return null}function yt(wt,Et,Rt,Tt){for(var It=null,At=null,Dt=Et,jt=Et=0,Ft=null;Dt!==null&&jt<Rt.length;jt++){Dt.index>jt?(Ft=Dt,Dt=null):Ft=Dt.sibling;var Lt=gt(wt,Dt,Rt[jt],Tt);if(Lt===null){Dt===null&&(Dt=Ft);break}nt&&Dt&&Lt.alternate===null&&rt(wt,Dt),Et=ct(Lt,Et,jt),At===null?It=Lt:At.sibling=Lt,At=Lt,Dt=Ft}if(jt===Rt.length)return it(wt,Dt),I$9&&tg(wt,jt),It;if(Dt===null){for(;jt<Rt.length;jt++)Dt=mt(wt,Rt[jt],Tt),Dt!==null&&(Et=ct(Dt,Et,jt),At===null?It=Dt:At.sibling=Dt,At=Dt);return I$9&&tg(wt,jt),It}for(Dt=st(wt,Dt);jt<Rt.length;jt++)Ft=xt(Dt,wt,jt,Rt[jt],Tt),Ft!==null&&(nt&&Ft.alternate!==null&&Dt.delete(Ft.key===null?jt:Ft.key),Et=ct(Ft,Et,jt),At===null?It=Ft:At.sibling=Ft,At=Ft);return nt&&Dt.forEach(function(Mt){return rt(wt,Mt)}),I$9&&tg(wt,jt),It}function vt(wt,Et,Rt,Tt){var It=Ka(Rt);if(typeof It!="function")throw Error(p$5(150));if(Rt=It.call(Rt),Rt==null)throw Error(p$5(151));for(var At=It=null,Dt=Et,jt=Et=0,Ft=null,Lt=Rt.next();Dt!==null&&!Lt.done;jt++,Lt=Rt.next()){Dt.index>jt?(Ft=Dt,Dt=null):Ft=Dt.sibling;var Mt=gt(wt,Dt,Lt.value,Tt);if(Mt===null){Dt===null&&(Dt=Ft);break}nt&&Dt&&Mt.alternate===null&&rt(wt,Dt),Et=ct(Mt,Et,jt),At===null?It=Mt:At.sibling=Mt,At=Mt,Dt=Ft}if(Lt.done)return it(wt,Dt),I$9&&tg(wt,jt),It;if(Dt===null){for(;!Lt.done;jt++,Lt=Rt.next())Lt=mt(wt,Lt.value,Tt),Lt!==null&&(Et=ct(Lt,Et,jt),At===null?It=Lt:At.sibling=Lt,At=Lt);return I$9&&tg(wt,jt),It}for(Dt=st(wt,Dt);!Lt.done;jt++,Lt=Rt.next())Lt=xt(Dt,wt,jt,Lt.value,Tt),Lt!==null&&(nt&&Lt.alternate!==null&&Dt.delete(Lt.key===null?jt:Lt.key),Et=ct(Lt,Et,jt),At===null?It=Lt:At.sibling=Lt,At=Lt);return nt&&Dt.forEach(function(Ot){return rt(wt,Ot)}),I$9&&tg(wt,jt),It}function St(wt,Et,Rt,Tt){if(typeof Rt=="object"&&Rt!==null&&Rt.type===ya&&Rt.key===null&&(Rt=Rt.props.children),typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case va:e:{for(var It=Rt.key,At=Et;At!==null;){if(At.key===It){if(It=Rt.type,It===ya){if(At.tag===7){it(wt,At.sibling),Et=lt(At,Rt.props.children),Et.return=wt,wt=Et;break e}}else if(At.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===Ha&&uh(It)===At.type){it(wt,At.sibling),Et=lt(At,Rt.props),Et.ref=sh(wt,At,Rt),Et.return=wt,wt=Et;break e}it(wt,At);break}else rt(wt,At);At=At.sibling}Rt.type===ya?(Et=Ah(Rt.props.children,wt.mode,Tt,Rt.key),Et.return=wt,wt=Et):(Tt=yh(Rt.type,Rt.key,Rt.props,null,wt.mode,Tt),Tt.ref=sh(wt,Et,Rt),Tt.return=wt,wt=Tt)}return ut(wt);case wa:e:{for(At=Rt.key;Et!==null;){if(Et.key===At)if(Et.tag===4&&Et.stateNode.containerInfo===Rt.containerInfo&&Et.stateNode.implementation===Rt.implementation){it(wt,Et.sibling),Et=lt(Et,Rt.children||[]),Et.return=wt,wt=Et;break e}else{it(wt,Et);break}else rt(wt,Et);Et=Et.sibling}Et=zh(Rt,wt.mode,Tt),Et.return=wt,wt=Et}return ut(wt);case Ha:return At=Rt._init,St(wt,Et,At(Rt._payload),Tt)}if(eb(Rt))return yt(wt,Et,Rt,Tt);if(Ka(Rt))return vt(wt,Et,Rt,Tt);th(wt,Rt)}return typeof Rt=="string"&&Rt!==""||typeof Rt=="number"?(Rt=""+Rt,Et!==null&&Et.tag===6?(it(wt,Et.sibling),Et=lt(Et,Rt),Et.return=wt,wt=Et):(it(wt,Et),Et=xh(Rt,wt.mode,Tt),Et.return=wt,wt=Et),ut(wt)):it(wt,Et)}return St}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(nt){if(nt===Dh)throw Error(p$5(174));return nt}function Ih(nt,rt){switch(G$2(Gh,rt),G$2(Fh,nt),G$2(Eh,Dh),nt=rt.nodeType,nt){case 9:case 11:rt=(rt=rt.documentElement)?rt.namespaceURI:lb(null,"");break;default:nt=nt===8?rt.parentNode:rt,rt=nt.namespaceURI||null,nt=nt.tagName,rt=lb(rt,nt)}E$2(Eh),G$2(Eh,rt)}function Jh(){E$2(Eh),E$2(Fh),E$2(Gh)}function Kh(nt){Hh(Gh.current);var rt=Hh(Eh.current),it=lb(rt,nt.type);rt!==it&&(G$2(Fh,nt),G$2(Eh,it))}function Lh(nt){Fh.current===nt&&(E$2(Eh),E$2(Fh))}var M$5=Uf(0);function Mh(nt){for(var rt=nt;rt!==null;){if(rt.tag===13){var it=rt.memoizedState;if(it!==null&&(it=it.dehydrated,it===null||it.data==="$?"||it.data==="$!"))return rt}else if(rt.tag===19&&rt.memoizedProps.revealOrder!==void 0){if(rt.flags&128)return rt}else if(rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===nt)break;for(;rt.sibling===null;){if(rt.return===null||rt.return===nt)return null;rt=rt.return}rt.sibling.return=rt.return,rt=rt.sibling}return null}var Nh=[];function Oh(){for(var nt=0;nt<Nh.length;nt++)Nh[nt]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$4=null,O$3=null,P$3=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$2(){throw Error(p$5(321))}function Wh(nt,rt){if(rt===null)return!1;for(var it=0;it<rt.length&&it<nt.length;it++)if(!He$3(nt[it],rt[it]))return!1;return!0}function Xh(nt,rt,it,st,lt,ct){if(Rh=ct,N$4=rt,rt.memoizedState=null,rt.updateQueue=null,rt.lanes=0,Ph.current=nt===null||nt.memoizedState===null?Yh:Zh,nt=it(st,lt),Th){ct=0;do{if(Th=!1,Uh=0,25<=ct)throw Error(p$5(301));ct+=1,P$3=O$3=null,rt.updateQueue=null,Ph.current=$h,nt=it(st,lt)}while(Th)}if(Ph.current=ai$1,rt=O$3!==null&&O$3.next!==null,Rh=0,P$3=O$3=N$4=null,Sh=!1,rt)throw Error(p$5(300));return nt}function bi$1(){var nt=Uh!==0;return Uh=0,nt}function ci$1(){var nt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$3===null?N$4.memoizedState=P$3=nt:P$3=P$3.next=nt,P$3}function di(){if(O$3===null){var nt=N$4.alternate;nt=nt!==null?nt.memoizedState:null}else nt=O$3.next;var rt=P$3===null?N$4.memoizedState:P$3.next;if(rt!==null)P$3=rt,O$3=nt;else{if(nt===null)throw Error(p$5(310));O$3=nt,nt={memoizedState:O$3.memoizedState,baseState:O$3.baseState,baseQueue:O$3.baseQueue,queue:O$3.queue,next:null},P$3===null?N$4.memoizedState=P$3=nt:P$3=P$3.next=nt}return P$3}function ei(nt,rt){return typeof rt=="function"?rt(nt):rt}function fi(nt){var rt=di(),it=rt.queue;if(it===null)throw Error(p$5(311));it.lastRenderedReducer=nt;var st=O$3,lt=st.baseQueue,ct=it.pending;if(ct!==null){if(lt!==null){var ut=lt.next;lt.next=ct.next,ct.next=ut}st.baseQueue=lt=ct,it.pending=null}if(lt!==null){ct=lt.next,st=st.baseState;var dt=ut=null,ht=null,ft=ct;do{var pt=ft.lane;if((Rh&pt)===pt)ht!==null&&(ht=ht.next={lane:0,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),st=ft.hasEagerState?ft.eagerState:nt(st,ft.action);else{var mt={lane:pt,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null};ht===null?(dt=ht=mt,ut=st):ht=ht.next=mt,N$4.lanes|=pt,hh$1|=pt}ft=ft.next}while(ft!==null&&ft!==ct);ht===null?ut=st:ht.next=dt,He$3(st,rt.memoizedState)||(Ug=!0),rt.memoizedState=st,rt.baseState=ut,rt.baseQueue=ht,it.lastRenderedState=st}if(nt=it.interleaved,nt!==null){lt=nt;do ct=lt.lane,N$4.lanes|=ct,hh$1|=ct,lt=lt.next;while(lt!==nt)}else lt===null&&(it.lanes=0);return[rt.memoizedState,it.dispatch]}function gi(nt){var rt=di(),it=rt.queue;if(it===null)throw Error(p$5(311));it.lastRenderedReducer=nt;var st=it.dispatch,lt=it.pending,ct=rt.memoizedState;if(lt!==null){it.pending=null;var ut=lt=lt.next;do ct=nt(ct,ut.action),ut=ut.next;while(ut!==lt);He$3(ct,rt.memoizedState)||(Ug=!0),rt.memoizedState=ct,rt.baseQueue===null&&(rt.baseState=ct),it.lastRenderedState=ct}return[ct,st]}function hi(){}function ii$1(nt,rt){var it=N$4,st=di(),lt=rt(),ct=!He$3(st.memoizedState,lt);if(ct&&(st.memoizedState=lt,Ug=!0),st=st.queue,ji(ki.bind(null,it,st,nt),[nt]),st.getSnapshot!==rt||ct||P$3!==null&&P$3.memoizedState.tag&1){if(it.flags|=2048,li(9,mi.bind(null,it,st,lt,rt),void 0,null),R$3===null)throw Error(p$5(349));Rh&30||ni(it,rt,lt)}return lt}function ni(nt,rt,it){nt.flags|=16384,nt={getSnapshot:rt,value:it},rt=N$4.updateQueue,rt===null?(rt={lastEffect:null,stores:null},N$4.updateQueue=rt,rt.stores=[nt]):(it=rt.stores,it===null?rt.stores=[nt]:it.push(nt))}function mi(nt,rt,it,st){rt.value=it,rt.getSnapshot=st,oi(rt)&&pi(nt)}function ki(nt,rt,it){return it(function(){oi(rt)&&pi(nt)})}function oi(nt){var rt=nt.getSnapshot;nt=nt.value;try{var it=rt();return!He$3(nt,it)}catch{return!0}}function pi(nt){var rt=Zg(nt,1);rt!==null&&mh(rt,nt,1,-1)}function qi(nt){var rt=ci$1();return typeof nt=="function"&&(nt=nt()),rt.memoizedState=rt.baseState=nt,nt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:nt},rt.queue=nt,nt=nt.dispatch=ri.bind(null,N$4,nt),[rt.memoizedState,nt]}function li(nt,rt,it,st){return nt={tag:nt,create:rt,destroy:it,deps:st,next:null},rt=N$4.updateQueue,rt===null?(rt={lastEffect:null,stores:null},N$4.updateQueue=rt,rt.lastEffect=nt.next=nt):(it=rt.lastEffect,it===null?rt.lastEffect=nt.next=nt:(st=it.next,it.next=nt,nt.next=st,rt.lastEffect=nt)),nt}function si(){return di().memoizedState}function ti(nt,rt,it,st){var lt=ci$1();N$4.flags|=nt,lt.memoizedState=li(1|rt,it,void 0,st===void 0?null:st)}function ui(nt,rt,it,st){var lt=di();st=st===void 0?null:st;var ct=void 0;if(O$3!==null){var ut=O$3.memoizedState;if(ct=ut.destroy,st!==null&&Wh(st,ut.deps)){lt.memoizedState=li(rt,it,ct,st);return}}N$4.flags|=nt,lt.memoizedState=li(1|rt,it,ct,st)}function vi(nt,rt){return ti(8390656,8,nt,rt)}function ji(nt,rt){return ui(2048,8,nt,rt)}function wi(nt,rt){return ui(4,2,nt,rt)}function xi(nt,rt){return ui(4,4,nt,rt)}function yi(nt,rt){if(typeof rt=="function")return nt=nt(),rt(nt),function(){rt(null)};if(rt!=null)return nt=nt(),rt.current=nt,function(){rt.current=null}}function zi(nt,rt,it){return it=it!=null?it.concat([nt]):null,ui(4,4,yi.bind(null,rt,nt),it)}function Ai(){}function Bi(nt,rt){var it=di();rt=rt===void 0?null:rt;var st=it.memoizedState;return st!==null&&rt!==null&&Wh(rt,st[1])?st[0]:(it.memoizedState=[nt,rt],nt)}function Ci(nt,rt){var it=di();rt=rt===void 0?null:rt;var st=it.memoizedState;return st!==null&&rt!==null&&Wh(rt,st[1])?st[0]:(nt=nt(),it.memoizedState=[nt,rt],nt)}function Di(nt,rt,it){return Rh&21?(He$3(it,rt)||(it=yc(),N$4.lanes|=it,hh$1|=it,nt.baseState=!0),rt):(nt.baseState&&(nt.baseState=!1,Ug=!0),nt.memoizedState=it)}function Ei(nt,rt){var it=C$3;C$3=it!==0&&4>it?it:4,nt(!0);var st=Qh.transition;Qh.transition={};try{nt(!1),rt()}finally{C$3=it,Qh.transition=st}}function Fi(){return di().memoizedState}function Gi(nt,rt,it){var st=lh(nt);if(it={lane:st,action:it,hasEagerState:!1,eagerState:null,next:null},Hi(nt))Ii(rt,it);else if(it=Yg(nt,rt,it,st),it!==null){var lt=L$1();mh(it,nt,st,lt),Ji(it,rt,st)}}function ri(nt,rt,it){var st=lh(nt),lt={lane:st,action:it,hasEagerState:!1,eagerState:null,next:null};if(Hi(nt))Ii(rt,lt);else{var ct=nt.alternate;if(nt.lanes===0&&(ct===null||ct.lanes===0)&&(ct=rt.lastRenderedReducer,ct!==null))try{var ut=rt.lastRenderedState,dt=ct(ut,it);if(lt.hasEagerState=!0,lt.eagerState=dt,He$3(dt,ut)){var ht=rt.interleaved;ht===null?(lt.next=lt,Xg(rt)):(lt.next=ht.next,ht.next=lt),rt.interleaved=lt;return}}catch{}finally{}it=Yg(nt,rt,lt,st),it!==null&&(lt=L$1(),mh(it,nt,st,lt),Ji(it,rt,st))}}function Hi(nt){var rt=nt.alternate;return nt===N$4||rt!==null&&rt===N$4}function Ii(nt,rt){Th=Sh=!0;var it=nt.pending;it===null?rt.next=rt:(rt.next=it.next,it.next=rt),nt.pending=rt}function Ji(nt,rt,it){if(it&4194240){var st=rt.lanes;st&=nt.pendingLanes,it|=st,rt.lanes=it,Cc(nt,it)}}var ai$1={readContext:Vg,useCallback:Q$2,useContext:Q$2,useEffect:Q$2,useImperativeHandle:Q$2,useInsertionEffect:Q$2,useLayoutEffect:Q$2,useMemo:Q$2,useReducer:Q$2,useRef:Q$2,useState:Q$2,useDebugValue:Q$2,useDeferredValue:Q$2,useTransition:Q$2,useMutableSource:Q$2,useSyncExternalStore:Q$2,useId:Q$2,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(nt,rt){return ci$1().memoizedState=[nt,rt===void 0?null:rt],nt},useContext:Vg,useEffect:vi,useImperativeHandle:function(nt,rt,it){return it=it!=null?it.concat([nt]):null,ti(4194308,4,yi.bind(null,rt,nt),it)},useLayoutEffect:function(nt,rt){return ti(4194308,4,nt,rt)},useInsertionEffect:function(nt,rt){return ti(4,2,nt,rt)},useMemo:function(nt,rt){var it=ci$1();return rt=rt===void 0?null:rt,nt=nt(),it.memoizedState=[nt,rt],nt},useReducer:function(nt,rt,it){var st=ci$1();return rt=it!==void 0?it(rt):rt,st.memoizedState=st.baseState=rt,nt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nt,lastRenderedState:rt},st.queue=nt,nt=nt.dispatch=Gi.bind(null,N$4,nt),[st.memoizedState,nt]},useRef:function(nt){var rt=ci$1();return nt={current:nt},rt.memoizedState=nt},useState:qi,useDebugValue:Ai,useDeferredValue:function(nt){return ci$1().memoizedState=nt},useTransition:function(){var nt=qi(!1),rt=nt[0];return nt=Ei.bind(null,nt[1]),ci$1().memoizedState=nt,[rt,nt]},useMutableSource:function(){},useSyncExternalStore:function(nt,rt,it){var st=N$4,lt=ci$1();if(I$9){if(it===void 0)throw Error(p$5(407));it=it()}else{if(it=rt(),R$3===null)throw Error(p$5(349));Rh&30||ni(st,rt,it)}lt.memoizedState=it;var ct={value:it,getSnapshot:rt};return lt.queue=ct,vi(ki.bind(null,st,ct,nt),[nt]),st.flags|=2048,li(9,mi.bind(null,st,ct,it,rt),void 0,null),it},useId:function(){var nt=ci$1(),rt=R$3.identifierPrefix;if(I$9){var it=sg,st=rg;it=(st&~(1<<32-oc(st)-1)).toString(32)+it,rt=":"+rt+"R"+it,it=Uh++,0<it&&(rt+="H"+it.toString(32)),rt+=":"}else it=Vh++,rt=":"+rt+"r"+it.toString(32)+":";return nt.memoizedState=rt},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(nt){var rt=di();return Di(rt,O$3.memoizedState,nt)},useTransition:function(){var nt=fi(ei)[0],rt=di().memoizedState;return[nt,rt]},useMutableSource:hi,useSyncExternalStore:ii$1,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(nt){var rt=di();return O$3===null?rt.memoizedState=nt:Di(rt,O$3.memoizedState,nt)},useTransition:function(){var nt=gi(ei)[0],rt=di().memoizedState;return[nt,rt]},useMutableSource:hi,useSyncExternalStore:ii$1,useId:Fi,unstable_isNewReconciler:!1};function Ki(nt,rt){try{var it="",st=rt;do it+=Pa(st),st=st.return;while(st);var lt=it}catch(ct){lt=`
Error generating stack: `+ct.message+`
`+ct.stack}return{value:nt,source:rt,stack:lt,digest:null}}function Li(nt,rt,it){return{value:nt,source:null,stack:it??null,digest:rt??null}}function Mi(nt,rt){try{console.error(rt.value)}catch(it){setTimeout(function(){throw it})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(nt,rt,it){it=ch$1(-1,it),it.tag=3,it.payload={element:null};var st=rt.value;return it.callback=function(){Pi||(Pi=!0,Qi=st),Mi(nt,rt)},it}function Ri(nt,rt,it){it=ch$1(-1,it),it.tag=3;var st=nt.type.getDerivedStateFromError;if(typeof st=="function"){var lt=rt.value;it.payload=function(){return st(lt)},it.callback=function(){Mi(nt,rt)}}var ct=nt.stateNode;return ct!==null&&typeof ct.componentDidCatch=="function"&&(it.callback=function(){Mi(nt,rt),typeof st!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var ut=rt.stack;this.componentDidCatch(rt.value,{componentStack:ut!==null?ut:""})}),it}function Ti(nt,rt,it){var st=nt.pingCache;if(st===null){st=nt.pingCache=new Ni;var lt=new Set;st.set(rt,lt)}else lt=st.get(rt),lt===void 0&&(lt=new Set,st.set(rt,lt));lt.has(it)||(lt.add(it),nt=Ui.bind(null,nt,rt,it),rt.then(nt,nt))}function Vi(nt){do{var rt;if((rt=nt.tag===13)&&(rt=nt.memoizedState,rt=rt!==null?rt.dehydrated!==null:!0),rt)return nt;nt=nt.return}while(nt!==null);return null}function Wi(nt,rt,it,st,lt){return nt.mode&1?(nt.flags|=65536,nt.lanes=lt,nt):(nt===rt?nt.flags|=65536:(nt.flags|=128,it.flags|=131072,it.flags&=-52805,it.tag===1&&(it.alternate===null?it.tag=17:(rt=ch$1(-1,1),rt.tag=2,dh(it,rt,1))),it.lanes|=1),nt)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(nt,rt,it,st){rt.child=nt===null?Ch(rt,null,it,st):Bh(rt,nt.child,it,st)}function Zi(nt,rt,it,st,lt){it=it.render;var ct=rt.ref;return Tg(rt,lt),st=Xh(nt,rt,it,st,ct,lt),it=bi$1(),nt!==null&&!Ug?(rt.updateQueue=nt.updateQueue,rt.flags&=-2053,nt.lanes&=~lt,$i(nt,rt,lt)):(I$9&&it&&vg(rt),rt.flags|=1,Yi(nt,rt,st,lt),rt.child)}function aj$1(nt,rt,it,st,lt){if(nt===null){var ct=it.type;return typeof ct=="function"&&!bj$1(ct)&&ct.defaultProps===void 0&&it.compare===null&&it.defaultProps===void 0?(rt.tag=15,rt.type=ct,cj$1(nt,rt,ct,st,lt)):(nt=yh(it.type,null,st,rt,rt.mode,lt),nt.ref=rt.ref,nt.return=rt,rt.child=nt)}if(ct=nt.child,!(nt.lanes&lt)){var ut=ct.memoizedProps;if(it=it.compare,it=it!==null?it:Ie,it(ut,st)&&nt.ref===rt.ref)return $i(nt,rt,lt)}return rt.flags|=1,nt=wh(ct,st),nt.ref=rt.ref,nt.return=rt,rt.child=nt}function cj$1(nt,rt,it,st,lt){if(nt!==null){var ct=nt.memoizedProps;if(Ie(ct,st)&&nt.ref===rt.ref)if(Ug=!1,rt.pendingProps=st=ct,(nt.lanes&lt)!==0)nt.flags&131072&&(Ug=!0);else return rt.lanes=nt.lanes,$i(nt,rt,lt)}return dj(nt,rt,it,st,lt)}function ej(nt,rt,it){var st=rt.pendingProps,lt=st.children,ct=nt!==null?nt.memoizedState:null;if(st.mode==="hidden")if(!(rt.mode&1))rt.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$2(fj,gj),gj|=it;else{if(!(it&1073741824))return nt=ct!==null?ct.baseLanes|it:it,rt.lanes=rt.childLanes=1073741824,rt.memoizedState={baseLanes:nt,cachePool:null,transitions:null},rt.updateQueue=null,G$2(fj,gj),gj|=nt,null;rt.memoizedState={baseLanes:0,cachePool:null,transitions:null},st=ct!==null?ct.baseLanes:it,G$2(fj,gj),gj|=st}else ct!==null?(st=ct.baseLanes|it,rt.memoizedState=null):st=it,G$2(fj,gj),gj|=st;return Yi(nt,rt,lt,it),rt.child}function hj(nt,rt){var it=rt.ref;(nt===null&&it!==null||nt!==null&&nt.ref!==it)&&(rt.flags|=512,rt.flags|=2097152)}function dj(nt,rt,it,st,lt){var ct=Zf(it)?Xf:H$2.current;return ct=Yf(rt,ct),Tg(rt,lt),it=Xh(nt,rt,it,st,ct,lt),st=bi$1(),nt!==null&&!Ug?(rt.updateQueue=nt.updateQueue,rt.flags&=-2053,nt.lanes&=~lt,$i(nt,rt,lt)):(I$9&&st&&vg(rt),rt.flags|=1,Yi(nt,rt,it,lt),rt.child)}function ij(nt,rt,it,st,lt){if(Zf(it)){var ct=!0;cg$1(rt)}else ct=!1;if(Tg(rt,lt),rt.stateNode===null)jj(nt,rt),ph(rt,it,st),rh(rt,it,st,lt),st=!0;else if(nt===null){var ut=rt.stateNode,dt=rt.memoizedProps;ut.props=dt;var ht=ut.context,ft=it.contextType;typeof ft=="object"&&ft!==null?ft=Vg(ft):(ft=Zf(it)?Xf:H$2.current,ft=Yf(rt,ft));var pt=it.getDerivedStateFromProps,mt=typeof pt=="function"||typeof ut.getSnapshotBeforeUpdate=="function";mt||typeof ut.UNSAFE_componentWillReceiveProps!="function"&&typeof ut.componentWillReceiveProps!="function"||(dt!==st||ht!==ft)&&qh(rt,ut,st,ft),$g=!1;var gt=rt.memoizedState;ut.state=gt,gh(rt,st,ut,lt),ht=rt.memoizedState,dt!==st||gt!==ht||Wf.current||$g?(typeof pt=="function"&&(kh(rt,it,pt,st),ht=rt.memoizedState),(dt=$g||oh(rt,it,dt,st,gt,ht,ft))?(mt||typeof ut.UNSAFE_componentWillMount!="function"&&typeof ut.componentWillMount!="function"||(typeof ut.componentWillMount=="function"&&ut.componentWillMount(),typeof ut.UNSAFE_componentWillMount=="function"&&ut.UNSAFE_componentWillMount()),typeof ut.componentDidMount=="function"&&(rt.flags|=4194308)):(typeof ut.componentDidMount=="function"&&(rt.flags|=4194308),rt.memoizedProps=st,rt.memoizedState=ht),ut.props=st,ut.state=ht,ut.context=ft,st=dt):(typeof ut.componentDidMount=="function"&&(rt.flags|=4194308),st=!1)}else{ut=rt.stateNode,bh$1(nt,rt),dt=rt.memoizedProps,ft=rt.type===rt.elementType?dt:Lg(rt.type,dt),ut.props=ft,mt=rt.pendingProps,gt=ut.context,ht=it.contextType,typeof ht=="object"&&ht!==null?ht=Vg(ht):(ht=Zf(it)?Xf:H$2.current,ht=Yf(rt,ht));var xt=it.getDerivedStateFromProps;(pt=typeof xt=="function"||typeof ut.getSnapshotBeforeUpdate=="function")||typeof ut.UNSAFE_componentWillReceiveProps!="function"&&typeof ut.componentWillReceiveProps!="function"||(dt!==mt||gt!==ht)&&qh(rt,ut,st,ht),$g=!1,gt=rt.memoizedState,ut.state=gt,gh(rt,st,ut,lt);var yt=rt.memoizedState;dt!==mt||gt!==yt||Wf.current||$g?(typeof xt=="function"&&(kh(rt,it,xt,st),yt=rt.memoizedState),(ft=$g||oh(rt,it,ft,st,gt,yt,ht)||!1)?(pt||typeof ut.UNSAFE_componentWillUpdate!="function"&&typeof ut.componentWillUpdate!="function"||(typeof ut.componentWillUpdate=="function"&&ut.componentWillUpdate(st,yt,ht),typeof ut.UNSAFE_componentWillUpdate=="function"&&ut.UNSAFE_componentWillUpdate(st,yt,ht)),typeof ut.componentDidUpdate=="function"&&(rt.flags|=4),typeof ut.getSnapshotBeforeUpdate=="function"&&(rt.flags|=1024)):(typeof ut.componentDidUpdate!="function"||dt===nt.memoizedProps&&gt===nt.memoizedState||(rt.flags|=4),typeof ut.getSnapshotBeforeUpdate!="function"||dt===nt.memoizedProps&&gt===nt.memoizedState||(rt.flags|=1024),rt.memoizedProps=st,rt.memoizedState=yt),ut.props=st,ut.state=yt,ut.context=ht,st=ft):(typeof ut.componentDidUpdate!="function"||dt===nt.memoizedProps&&gt===nt.memoizedState||(rt.flags|=4),typeof ut.getSnapshotBeforeUpdate!="function"||dt===nt.memoizedProps&&gt===nt.memoizedState||(rt.flags|=1024),st=!1)}return kj(nt,rt,it,st,ct,lt)}function kj(nt,rt,it,st,lt,ct){hj(nt,rt);var ut=(rt.flags&128)!==0;if(!st&&!ut)return lt&&dg(rt,it,!1),$i(nt,rt,ct);st=rt.stateNode,Xi.current=rt;var dt=ut&&typeof it.getDerivedStateFromError!="function"?null:st.render();return rt.flags|=1,nt!==null&&ut?(rt.child=Bh(rt,nt.child,null,ct),rt.child=Bh(rt,null,dt,ct)):Yi(nt,rt,dt,ct),rt.memoizedState=st.state,lt&&dg(rt,it,!0),rt.child}function lj(nt){var rt=nt.stateNode;rt.pendingContext?ag$1(nt,rt.pendingContext,rt.pendingContext!==rt.context):rt.context&&ag$1(nt,rt.context,!1),Ih(nt,rt.containerInfo)}function mj(nt,rt,it,st,lt){return Ig(),Jg(lt),rt.flags|=256,Yi(nt,rt,it,st),rt.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(nt){return{baseLanes:nt,cachePool:null,transitions:null}}function pj(nt,rt,it){var st=rt.pendingProps,lt=M$5.current,ct=!1,ut=(rt.flags&128)!==0,dt;if((dt=ut)||(dt=nt!==null&&nt.memoizedState===null?!1:(lt&2)!==0),dt?(ct=!0,rt.flags&=-129):(nt===null||nt.memoizedState!==null)&&(lt|=1),G$2(M$5,lt&1),nt===null)return Eg(rt),nt=rt.memoizedState,nt!==null&&(nt=nt.dehydrated,nt!==null)?(rt.mode&1?nt.data==="$!"?rt.lanes=8:rt.lanes=1073741824:rt.lanes=1,null):(ut=st.children,nt=st.fallback,ct?(st=rt.mode,ct=rt.child,ut={mode:"hidden",children:ut},!(st&1)&&ct!==null?(ct.childLanes=0,ct.pendingProps=ut):ct=qj(ut,st,0,null),nt=Ah(nt,st,it,null),ct.return=rt,nt.return=rt,ct.sibling=nt,rt.child=ct,rt.child.memoizedState=oj(it),rt.memoizedState=nj,nt):rj(rt,ut));if(lt=nt.memoizedState,lt!==null&&(dt=lt.dehydrated,dt!==null))return sj(nt,rt,ut,st,dt,lt,it);if(ct){ct=st.fallback,ut=rt.mode,lt=nt.child,dt=lt.sibling;var ht={mode:"hidden",children:st.children};return!(ut&1)&&rt.child!==lt?(st=rt.child,st.childLanes=0,st.pendingProps=ht,rt.deletions=null):(st=wh(lt,ht),st.subtreeFlags=lt.subtreeFlags&14680064),dt!==null?ct=wh(dt,ct):(ct=Ah(ct,ut,it,null),ct.flags|=2),ct.return=rt,st.return=rt,st.sibling=ct,rt.child=st,st=ct,ct=rt.child,ut=nt.child.memoizedState,ut=ut===null?oj(it):{baseLanes:ut.baseLanes|it,cachePool:null,transitions:ut.transitions},ct.memoizedState=ut,ct.childLanes=nt.childLanes&~it,rt.memoizedState=nj,st}return ct=nt.child,nt=ct.sibling,st=wh(ct,{mode:"visible",children:st.children}),!(rt.mode&1)&&(st.lanes=it),st.return=rt,st.sibling=null,nt!==null&&(it=rt.deletions,it===null?(rt.deletions=[nt],rt.flags|=16):it.push(nt)),rt.child=st,rt.memoizedState=null,st}function rj(nt,rt){return rt=qj({mode:"visible",children:rt},nt.mode,0,null),rt.return=nt,nt.child=rt}function tj(nt,rt,it,st){return st!==null&&Jg(st),Bh(rt,nt.child,null,it),nt=rj(rt,rt.pendingProps.children),nt.flags|=2,rt.memoizedState=null,nt}function sj(nt,rt,it,st,lt,ct,ut){if(it)return rt.flags&256?(rt.flags&=-257,st=Li(Error(p$5(422))),tj(nt,rt,ut,st)):rt.memoizedState!==null?(rt.child=nt.child,rt.flags|=128,null):(ct=st.fallback,lt=rt.mode,st=qj({mode:"visible",children:st.children},lt,0,null),ct=Ah(ct,lt,ut,null),ct.flags|=2,st.return=rt,ct.return=rt,st.sibling=ct,rt.child=st,rt.mode&1&&Bh(rt,nt.child,null,ut),rt.child.memoizedState=oj(ut),rt.memoizedState=nj,ct);if(!(rt.mode&1))return tj(nt,rt,ut,null);if(lt.data==="$!"){if(st=lt.nextSibling&&lt.nextSibling.dataset,st)var dt=st.dgst;return st=dt,ct=Error(p$5(419)),st=Li(ct,st,void 0),tj(nt,rt,ut,st)}if(dt=(ut&nt.childLanes)!==0,Ug||dt){if(st=R$3,st!==null){switch(ut&-ut){case 4:lt=2;break;case 16:lt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:lt=32;break;case 536870912:lt=268435456;break;default:lt=0}lt=lt&(st.suspendedLanes|ut)?0:lt,lt!==0&&lt!==ct.retryLane&&(ct.retryLane=lt,Zg(nt,lt),mh(st,nt,lt,-1))}return uj(),st=Li(Error(p$5(421))),tj(nt,rt,ut,st)}return lt.data==="$?"?(rt.flags|=128,rt.child=nt.child,rt=vj.bind(null,nt),lt._reactRetry=rt,null):(nt=ct.treeContext,yg=Lf(lt.nextSibling),xg=rt,I$9=!0,zg=null,nt!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=nt.id,sg=nt.overflow,qg=rt),rt=rj(rt,st.children),rt.flags|=4096,rt)}function wj(nt,rt,it){nt.lanes|=rt;var st=nt.alternate;st!==null&&(st.lanes|=rt),Sg(nt.return,rt,it)}function xj(nt,rt,it,st,lt){var ct=nt.memoizedState;ct===null?nt.memoizedState={isBackwards:rt,rendering:null,renderingStartTime:0,last:st,tail:it,tailMode:lt}:(ct.isBackwards=rt,ct.rendering=null,ct.renderingStartTime=0,ct.last=st,ct.tail=it,ct.tailMode=lt)}function yj(nt,rt,it){var st=rt.pendingProps,lt=st.revealOrder,ct=st.tail;if(Yi(nt,rt,st.children,it),st=M$5.current,st&2)st=st&1|2,rt.flags|=128;else{if(nt!==null&&nt.flags&128)e:for(nt=rt.child;nt!==null;){if(nt.tag===13)nt.memoizedState!==null&&wj(nt,it,rt);else if(nt.tag===19)wj(nt,it,rt);else if(nt.child!==null){nt.child.return=nt,nt=nt.child;continue}if(nt===rt)break e;for(;nt.sibling===null;){if(nt.return===null||nt.return===rt)break e;nt=nt.return}nt.sibling.return=nt.return,nt=nt.sibling}st&=1}if(G$2(M$5,st),!(rt.mode&1))rt.memoizedState=null;else switch(lt){case"forwards":for(it=rt.child,lt=null;it!==null;)nt=it.alternate,nt!==null&&Mh(nt)===null&&(lt=it),it=it.sibling;it=lt,it===null?(lt=rt.child,rt.child=null):(lt=it.sibling,it.sibling=null),xj(rt,!1,lt,it,ct);break;case"backwards":for(it=null,lt=rt.child,rt.child=null;lt!==null;){if(nt=lt.alternate,nt!==null&&Mh(nt)===null){rt.child=lt;break}nt=lt.sibling,lt.sibling=it,it=lt,lt=nt}xj(rt,!0,it,null,ct);break;case"together":xj(rt,!1,null,null,void 0);break;default:rt.memoizedState=null}return rt.child}function jj(nt,rt){!(rt.mode&1)&&nt!==null&&(nt.alternate=null,rt.alternate=null,rt.flags|=2)}function $i(nt,rt,it){if(nt!==null&&(rt.dependencies=nt.dependencies),hh$1|=rt.lanes,!(it&rt.childLanes))return null;if(nt!==null&&rt.child!==nt.child)throw Error(p$5(153));if(rt.child!==null){for(nt=rt.child,it=wh(nt,nt.pendingProps),rt.child=it,it.return=rt;nt.sibling!==null;)nt=nt.sibling,it=it.sibling=wh(nt,nt.pendingProps),it.return=rt;it.sibling=null}return rt.child}function zj(nt,rt,it){switch(rt.tag){case 3:lj(rt),Ig();break;case 5:Kh(rt);break;case 1:Zf(rt.type)&&cg$1(rt);break;case 4:Ih(rt,rt.stateNode.containerInfo);break;case 10:var st=rt.type._context,lt=rt.memoizedProps.value;G$2(Mg,st._currentValue),st._currentValue=lt;break;case 13:if(st=rt.memoizedState,st!==null)return st.dehydrated!==null?(G$2(M$5,M$5.current&1),rt.flags|=128,null):it&rt.child.childLanes?pj(nt,rt,it):(G$2(M$5,M$5.current&1),nt=$i(nt,rt,it),nt!==null?nt.sibling:null);G$2(M$5,M$5.current&1);break;case 19:if(st=(it&rt.childLanes)!==0,nt.flags&128){if(st)return yj(nt,rt,it);rt.flags|=128}if(lt=rt.memoizedState,lt!==null&&(lt.rendering=null,lt.tail=null,lt.lastEffect=null),G$2(M$5,M$5.current),st)break;return null;case 22:case 23:return rt.lanes=0,ej(nt,rt,it)}return $i(nt,rt,it)}var Aj,Bj,Cj,Dj;Aj=function(nt,rt){for(var it=rt.child;it!==null;){if(it.tag===5||it.tag===6)nt.appendChild(it.stateNode);else if(it.tag!==4&&it.child!==null){it.child.return=it,it=it.child;continue}if(it===rt)break;for(;it.sibling===null;){if(it.return===null||it.return===rt)return;it=it.return}it.sibling.return=it.return,it=it.sibling}};Bj=function(){};Cj=function(nt,rt,it,st){var lt=nt.memoizedProps;if(lt!==st){nt=rt.stateNode,Hh(Eh.current);var ct=null;switch(it){case"input":lt=Ya(nt,lt),st=Ya(nt,st),ct=[];break;case"select":lt=A$2({},lt,{value:void 0}),st=A$2({},st,{value:void 0}),ct=[];break;case"textarea":lt=gb(nt,lt),st=gb(nt,st),ct=[];break;default:typeof lt.onClick!="function"&&typeof st.onClick=="function"&&(nt.onclick=Bf)}ub(it,st);var ut;it=null;for(ft in lt)if(!st.hasOwnProperty(ft)&&lt.hasOwnProperty(ft)&&lt[ft]!=null)if(ft==="style"){var dt=lt[ft];for(ut in dt)dt.hasOwnProperty(ut)&&(it||(it={}),it[ut]="")}else ft!=="dangerouslySetInnerHTML"&&ft!=="children"&&ft!=="suppressContentEditableWarning"&&ft!=="suppressHydrationWarning"&&ft!=="autoFocus"&&(ea.hasOwnProperty(ft)?ct||(ct=[]):(ct=ct||[]).push(ft,null));for(ft in st){var ht=st[ft];if(dt=lt!=null?lt[ft]:void 0,st.hasOwnProperty(ft)&&ht!==dt&&(ht!=null||dt!=null))if(ft==="style")if(dt){for(ut in dt)!dt.hasOwnProperty(ut)||ht&&ht.hasOwnProperty(ut)||(it||(it={}),it[ut]="");for(ut in ht)ht.hasOwnProperty(ut)&&dt[ut]!==ht[ut]&&(it||(it={}),it[ut]=ht[ut])}else it||(ct||(ct=[]),ct.push(ft,it)),it=ht;else ft==="dangerouslySetInnerHTML"?(ht=ht?ht.__html:void 0,dt=dt?dt.__html:void 0,ht!=null&&dt!==ht&&(ct=ct||[]).push(ft,ht)):ft==="children"?typeof ht!="string"&&typeof ht!="number"||(ct=ct||[]).push(ft,""+ht):ft!=="suppressContentEditableWarning"&&ft!=="suppressHydrationWarning"&&(ea.hasOwnProperty(ft)?(ht!=null&&ft==="onScroll"&&D$4("scroll",nt),ct||dt===ht||(ct=[])):(ct=ct||[]).push(ft,ht))}it&&(ct=ct||[]).push("style",it);var ft=ct;(rt.updateQueue=ft)&&(rt.flags|=4)}};Dj=function(nt,rt,it,st){it!==st&&(rt.flags|=4)};function Ej(nt,rt){if(!I$9)switch(nt.tailMode){case"hidden":rt=nt.tail;for(var it=null;rt!==null;)rt.alternate!==null&&(it=rt),rt=rt.sibling;it===null?nt.tail=null:it.sibling=null;break;case"collapsed":it=nt.tail;for(var st=null;it!==null;)it.alternate!==null&&(st=it),it=it.sibling;st===null?rt||nt.tail===null?nt.tail=null:nt.tail.sibling=null:st.sibling=null}}function S$7(nt){var rt=nt.alternate!==null&&nt.alternate.child===nt.child,it=0,st=0;if(rt)for(var lt=nt.child;lt!==null;)it|=lt.lanes|lt.childLanes,st|=lt.subtreeFlags&14680064,st|=lt.flags&14680064,lt.return=nt,lt=lt.sibling;else for(lt=nt.child;lt!==null;)it|=lt.lanes|lt.childLanes,st|=lt.subtreeFlags,st|=lt.flags,lt.return=nt,lt=lt.sibling;return nt.subtreeFlags|=st,nt.childLanes=it,rt}function Fj(nt,rt,it){var st=rt.pendingProps;switch(wg(rt),rt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$7(rt),null;case 1:return Zf(rt.type)&&$f(),S$7(rt),null;case 3:return st=rt.stateNode,Jh(),E$2(Wf),E$2(H$2),Oh(),st.pendingContext&&(st.context=st.pendingContext,st.pendingContext=null),(nt===null||nt.child===null)&&(Gg(rt)?rt.flags|=4:nt===null||nt.memoizedState.isDehydrated&&!(rt.flags&256)||(rt.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(nt,rt),S$7(rt),null;case 5:Lh(rt);var lt=Hh(Gh.current);if(it=rt.type,nt!==null&&rt.stateNode!=null)Cj(nt,rt,it,st,lt),nt.ref!==rt.ref&&(rt.flags|=512,rt.flags|=2097152);else{if(!st){if(rt.stateNode===null)throw Error(p$5(166));return S$7(rt),null}if(nt=Hh(Eh.current),Gg(rt)){st=rt.stateNode,it=rt.type;var ct=rt.memoizedProps;switch(st[Of]=rt,st[Pf]=ct,nt=(rt.mode&1)!==0,it){case"dialog":D$4("cancel",st),D$4("close",st);break;case"iframe":case"object":case"embed":D$4("load",st);break;case"video":case"audio":for(lt=0;lt<lf.length;lt++)D$4(lf[lt],st);break;case"source":D$4("error",st);break;case"img":case"image":case"link":D$4("error",st),D$4("load",st);break;case"details":D$4("toggle",st);break;case"input":Za(st,ct),D$4("invalid",st);break;case"select":st._wrapperState={wasMultiple:!!ct.multiple},D$4("invalid",st);break;case"textarea":hb(st,ct),D$4("invalid",st)}ub(it,ct),lt=null;for(var ut in ct)if(ct.hasOwnProperty(ut)){var dt=ct[ut];ut==="children"?typeof dt=="string"?st.textContent!==dt&&(ct.suppressHydrationWarning!==!0&&Af(st.textContent,dt,nt),lt=["children",dt]):typeof dt=="number"&&st.textContent!==""+dt&&(ct.suppressHydrationWarning!==!0&&Af(st.textContent,dt,nt),lt=["children",""+dt]):ea.hasOwnProperty(ut)&&dt!=null&&ut==="onScroll"&&D$4("scroll",st)}switch(it){case"input":Va(st),db(st,ct,!0);break;case"textarea":Va(st),jb(st);break;case"select":case"option":break;default:typeof ct.onClick=="function"&&(st.onclick=Bf)}st=lt,rt.updateQueue=st,st!==null&&(rt.flags|=4)}else{ut=lt.nodeType===9?lt:lt.ownerDocument,nt==="http://www.w3.org/1999/xhtml"&&(nt=kb(it)),nt==="http://www.w3.org/1999/xhtml"?it==="script"?(nt=ut.createElement("div"),nt.innerHTML="<script><\/script>",nt=nt.removeChild(nt.firstChild)):typeof st.is=="string"?nt=ut.createElement(it,{is:st.is}):(nt=ut.createElement(it),it==="select"&&(ut=nt,st.multiple?ut.multiple=!0:st.size&&(ut.size=st.size))):nt=ut.createElementNS(nt,it),nt[Of]=rt,nt[Pf]=st,Aj(nt,rt,!1,!1),rt.stateNode=nt;e:{switch(ut=vb(it,st),it){case"dialog":D$4("cancel",nt),D$4("close",nt),lt=st;break;case"iframe":case"object":case"embed":D$4("load",nt),lt=st;break;case"video":case"audio":for(lt=0;lt<lf.length;lt++)D$4(lf[lt],nt);lt=st;break;case"source":D$4("error",nt),lt=st;break;case"img":case"image":case"link":D$4("error",nt),D$4("load",nt),lt=st;break;case"details":D$4("toggle",nt),lt=st;break;case"input":Za(nt,st),lt=Ya(nt,st),D$4("invalid",nt);break;case"option":lt=st;break;case"select":nt._wrapperState={wasMultiple:!!st.multiple},lt=A$2({},st,{value:void 0}),D$4("invalid",nt);break;case"textarea":hb(nt,st),lt=gb(nt,st),D$4("invalid",nt);break;default:lt=st}ub(it,lt),dt=lt;for(ct in dt)if(dt.hasOwnProperty(ct)){var ht=dt[ct];ct==="style"?sb(nt,ht):ct==="dangerouslySetInnerHTML"?(ht=ht?ht.__html:void 0,ht!=null&&nb(nt,ht)):ct==="children"?typeof ht=="string"?(it!=="textarea"||ht!=="")&&ob(nt,ht):typeof ht=="number"&&ob(nt,""+ht):ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&ct!=="autoFocus"&&(ea.hasOwnProperty(ct)?ht!=null&&ct==="onScroll"&&D$4("scroll",nt):ht!=null&&ta(nt,ct,ht,ut))}switch(it){case"input":Va(nt),db(nt,st,!1);break;case"textarea":Va(nt),jb(nt);break;case"option":st.value!=null&&nt.setAttribute("value",""+Sa(st.value));break;case"select":nt.multiple=!!st.multiple,ct=st.value,ct!=null?fb(nt,!!st.multiple,ct,!1):st.defaultValue!=null&&fb(nt,!!st.multiple,st.defaultValue,!0);break;default:typeof lt.onClick=="function"&&(nt.onclick=Bf)}switch(it){case"button":case"input":case"select":case"textarea":st=!!st.autoFocus;break e;case"img":st=!0;break e;default:st=!1}}st&&(rt.flags|=4)}rt.ref!==null&&(rt.flags|=512,rt.flags|=2097152)}return S$7(rt),null;case 6:if(nt&&rt.stateNode!=null)Dj(nt,rt,nt.memoizedProps,st);else{if(typeof st!="string"&&rt.stateNode===null)throw Error(p$5(166));if(it=Hh(Gh.current),Hh(Eh.current),Gg(rt)){if(st=rt.stateNode,it=rt.memoizedProps,st[Of]=rt,(ct=st.nodeValue!==it)&&(nt=xg,nt!==null))switch(nt.tag){case 3:Af(st.nodeValue,it,(nt.mode&1)!==0);break;case 5:nt.memoizedProps.suppressHydrationWarning!==!0&&Af(st.nodeValue,it,(nt.mode&1)!==0)}ct&&(rt.flags|=4)}else st=(it.nodeType===9?it:it.ownerDocument).createTextNode(st),st[Of]=rt,rt.stateNode=st}return S$7(rt),null;case 13:if(E$2(M$5),st=rt.memoizedState,nt===null||nt.memoizedState!==null&&nt.memoizedState.dehydrated!==null){if(I$9&&yg!==null&&rt.mode&1&&!(rt.flags&128))Hg(),Ig(),rt.flags|=98560,ct=!1;else if(ct=Gg(rt),st!==null&&st.dehydrated!==null){if(nt===null){if(!ct)throw Error(p$5(318));if(ct=rt.memoizedState,ct=ct!==null?ct.dehydrated:null,!ct)throw Error(p$5(317));ct[Of]=rt}else Ig(),!(rt.flags&128)&&(rt.memoizedState=null),rt.flags|=4;S$7(rt),ct=!1}else zg!==null&&(Gj(zg),zg=null),ct=!0;if(!ct)return rt.flags&65536?rt:null}return rt.flags&128?(rt.lanes=it,rt):(st=st!==null,st!==(nt!==null&&nt.memoizedState!==null)&&st&&(rt.child.flags|=8192,rt.mode&1&&(nt===null||M$5.current&1?T$5===0&&(T$5=3):uj())),rt.updateQueue!==null&&(rt.flags|=4),S$7(rt),null);case 4:return Jh(),Bj(nt,rt),nt===null&&sf(rt.stateNode.containerInfo),S$7(rt),null;case 10:return Rg(rt.type._context),S$7(rt),null;case 17:return Zf(rt.type)&&$f(),S$7(rt),null;case 19:if(E$2(M$5),ct=rt.memoizedState,ct===null)return S$7(rt),null;if(st=(rt.flags&128)!==0,ut=ct.rendering,ut===null)if(st)Ej(ct,!1);else{if(T$5!==0||nt!==null&&nt.flags&128)for(nt=rt.child;nt!==null;){if(ut=Mh(nt),ut!==null){for(rt.flags|=128,Ej(ct,!1),st=ut.updateQueue,st!==null&&(rt.updateQueue=st,rt.flags|=4),rt.subtreeFlags=0,st=it,it=rt.child;it!==null;)ct=it,nt=st,ct.flags&=14680066,ut=ct.alternate,ut===null?(ct.childLanes=0,ct.lanes=nt,ct.child=null,ct.subtreeFlags=0,ct.memoizedProps=null,ct.memoizedState=null,ct.updateQueue=null,ct.dependencies=null,ct.stateNode=null):(ct.childLanes=ut.childLanes,ct.lanes=ut.lanes,ct.child=ut.child,ct.subtreeFlags=0,ct.deletions=null,ct.memoizedProps=ut.memoizedProps,ct.memoizedState=ut.memoizedState,ct.updateQueue=ut.updateQueue,ct.type=ut.type,nt=ut.dependencies,ct.dependencies=nt===null?null:{lanes:nt.lanes,firstContext:nt.firstContext}),it=it.sibling;return G$2(M$5,M$5.current&1|2),rt.child}nt=nt.sibling}ct.tail!==null&&B$2()>Hj&&(rt.flags|=128,st=!0,Ej(ct,!1),rt.lanes=4194304)}else{if(!st)if(nt=Mh(ut),nt!==null){if(rt.flags|=128,st=!0,it=nt.updateQueue,it!==null&&(rt.updateQueue=it,rt.flags|=4),Ej(ct,!0),ct.tail===null&&ct.tailMode==="hidden"&&!ut.alternate&&!I$9)return S$7(rt),null}else 2*B$2()-ct.renderingStartTime>Hj&&it!==1073741824&&(rt.flags|=128,st=!0,Ej(ct,!1),rt.lanes=4194304);ct.isBackwards?(ut.sibling=rt.child,rt.child=ut):(it=ct.last,it!==null?it.sibling=ut:rt.child=ut,ct.last=ut)}return ct.tail!==null?(rt=ct.tail,ct.rendering=rt,ct.tail=rt.sibling,ct.renderingStartTime=B$2(),rt.sibling=null,it=M$5.current,G$2(M$5,st?it&1|2:it&1),rt):(S$7(rt),null);case 22:case 23:return Ij(),st=rt.memoizedState!==null,nt!==null&&nt.memoizedState!==null!==st&&(rt.flags|=8192),st&&rt.mode&1?gj&1073741824&&(S$7(rt),rt.subtreeFlags&6&&(rt.flags|=8192)):S$7(rt),null;case 24:return null;case 25:return null}throw Error(p$5(156,rt.tag))}function Jj(nt,rt){switch(wg(rt),rt.tag){case 1:return Zf(rt.type)&&$f(),nt=rt.flags,nt&65536?(rt.flags=nt&-65537|128,rt):null;case 3:return Jh(),E$2(Wf),E$2(H$2),Oh(),nt=rt.flags,nt&65536&&!(nt&128)?(rt.flags=nt&-65537|128,rt):null;case 5:return Lh(rt),null;case 13:if(E$2(M$5),nt=rt.memoizedState,nt!==null&&nt.dehydrated!==null){if(rt.alternate===null)throw Error(p$5(340));Ig()}return nt=rt.flags,nt&65536?(rt.flags=nt&-65537|128,rt):null;case 19:return E$2(M$5),null;case 4:return Jh(),null;case 10:return Rg(rt.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$4=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Mj(nt,rt){var it=nt.ref;if(it!==null)if(typeof it=="function")try{it(null)}catch(st){W$1(nt,rt,st)}else it.current=null}function Nj(nt,rt,it){try{it()}catch(st){W$1(nt,rt,st)}}var Oj=!1;function Pj(nt,rt){if(Cf=dd,nt=Me$1(),Ne$3(nt)){if("selectionStart"in nt)var it={start:nt.selectionStart,end:nt.selectionEnd};else e:{it=(it=nt.ownerDocument)&&it.defaultView||window;var st=it.getSelection&&it.getSelection();if(st&&st.rangeCount!==0){it=st.anchorNode;var lt=st.anchorOffset,ct=st.focusNode;st=st.focusOffset;try{it.nodeType,ct.nodeType}catch{it=null;break e}var ut=0,dt=-1,ht=-1,ft=0,pt=0,mt=nt,gt=null;t:for(;;){for(var xt;mt!==it||lt!==0&&mt.nodeType!==3||(dt=ut+lt),mt!==ct||st!==0&&mt.nodeType!==3||(ht=ut+st),mt.nodeType===3&&(ut+=mt.nodeValue.length),(xt=mt.firstChild)!==null;)gt=mt,mt=xt;for(;;){if(mt===nt)break t;if(gt===it&&++ft===lt&&(dt=ut),gt===ct&&++pt===st&&(ht=ut),(xt=mt.nextSibling)!==null)break;mt=gt,gt=mt.parentNode}mt=xt}it=dt===-1||ht===-1?null:{start:dt,end:ht}}else it=null}it=it||{start:0,end:0}}else it=null;for(Df={focusedElem:nt,selectionRange:it},dd=!1,V$1=rt;V$1!==null;)if(rt=V$1,nt=rt.child,(rt.subtreeFlags&1028)!==0&&nt!==null)nt.return=rt,V$1=nt;else for(;V$1!==null;){rt=V$1;try{var yt=rt.alternate;if(rt.flags&1024)switch(rt.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var vt=yt.memoizedProps,St=yt.memoizedState,wt=rt.stateNode,Et=wt.getSnapshotBeforeUpdate(rt.elementType===rt.type?vt:Lg(rt.type,vt),St);wt.__reactInternalSnapshotBeforeUpdate=Et}break;case 3:var Rt=rt.stateNode.containerInfo;Rt.nodeType===1?Rt.textContent="":Rt.nodeType===9&&Rt.documentElement&&Rt.removeChild(Rt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$5(163))}}catch(Tt){W$1(rt,rt.return,Tt)}if(nt=rt.sibling,nt!==null){nt.return=rt.return,V$1=nt;break}V$1=rt.return}return yt=Oj,Oj=!1,yt}function Qj(nt,rt,it){var st=rt.updateQueue;if(st=st!==null?st.lastEffect:null,st!==null){var lt=st=st.next;do{if((lt.tag&nt)===nt){var ct=lt.destroy;lt.destroy=void 0,ct!==void 0&&Nj(rt,it,ct)}lt=lt.next}while(lt!==st)}}function Rj(nt,rt){if(rt=rt.updateQueue,rt=rt!==null?rt.lastEffect:null,rt!==null){var it=rt=rt.next;do{if((it.tag&nt)===nt){var st=it.create;it.destroy=st()}it=it.next}while(it!==rt)}}function Sj(nt){var rt=nt.ref;if(rt!==null){var it=nt.stateNode;switch(nt.tag){case 5:nt=it;break;default:nt=it}typeof rt=="function"?rt(nt):rt.current=nt}}function Tj(nt){var rt=nt.alternate;rt!==null&&(nt.alternate=null,Tj(rt)),nt.child=null,nt.deletions=null,nt.sibling=null,nt.tag===5&&(rt=nt.stateNode,rt!==null&&(delete rt[Of],delete rt[Pf],delete rt[of],delete rt[Qf],delete rt[Rf])),nt.stateNode=null,nt.return=null,nt.dependencies=null,nt.memoizedProps=null,nt.memoizedState=null,nt.pendingProps=null,nt.stateNode=null,nt.updateQueue=null}function Uj(nt){return nt.tag===5||nt.tag===3||nt.tag===4}function Vj(nt){e:for(;;){for(;nt.sibling===null;){if(nt.return===null||Uj(nt.return))return null;nt=nt.return}for(nt.sibling.return=nt.return,nt=nt.sibling;nt.tag!==5&&nt.tag!==6&&nt.tag!==18;){if(nt.flags&2||nt.child===null||nt.tag===4)continue e;nt.child.return=nt,nt=nt.child}if(!(nt.flags&2))return nt.stateNode}}function Wj(nt,rt,it){var st=nt.tag;if(st===5||st===6)nt=nt.stateNode,rt?it.nodeType===8?it.parentNode.insertBefore(nt,rt):it.insertBefore(nt,rt):(it.nodeType===8?(rt=it.parentNode,rt.insertBefore(nt,it)):(rt=it,rt.appendChild(nt)),it=it._reactRootContainer,it!=null||rt.onclick!==null||(rt.onclick=Bf));else if(st!==4&&(nt=nt.child,nt!==null))for(Wj(nt,rt,it),nt=nt.sibling;nt!==null;)Wj(nt,rt,it),nt=nt.sibling}function Xj(nt,rt,it){var st=nt.tag;if(st===5||st===6)nt=nt.stateNode,rt?it.insertBefore(nt,rt):it.appendChild(nt);else if(st!==4&&(nt=nt.child,nt!==null))for(Xj(nt,rt,it),nt=nt.sibling;nt!==null;)Xj(nt,rt,it),nt=nt.sibling}var X$2=null,Yj=!1;function Zj(nt,rt,it){for(it=it.child;it!==null;)ak$1(nt,rt,it),it=it.sibling}function ak$1(nt,rt,it){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,it)}catch{}switch(it.tag){case 5:U$4||Mj(it,rt);case 6:var st=X$2,lt=Yj;X$2=null,Zj(nt,rt,it),X$2=st,Yj=lt,X$2!==null&&(Yj?(nt=X$2,it=it.stateNode,nt.nodeType===8?nt.parentNode.removeChild(it):nt.removeChild(it)):X$2.removeChild(it.stateNode));break;case 18:X$2!==null&&(Yj?(nt=X$2,it=it.stateNode,nt.nodeType===8?Kf(nt.parentNode,it):nt.nodeType===1&&Kf(nt,it),bd$1(nt)):Kf(X$2,it.stateNode));break;case 4:st=X$2,lt=Yj,X$2=it.stateNode.containerInfo,Yj=!0,Zj(nt,rt,it),X$2=st,Yj=lt;break;case 0:case 11:case 14:case 15:if(!U$4&&(st=it.updateQueue,st!==null&&(st=st.lastEffect,st!==null))){lt=st=st.next;do{var ct=lt,ut=ct.destroy;ct=ct.tag,ut!==void 0&&(ct&2||ct&4)&&Nj(it,rt,ut),lt=lt.next}while(lt!==st)}Zj(nt,rt,it);break;case 1:if(!U$4&&(Mj(it,rt),st=it.stateNode,typeof st.componentWillUnmount=="function"))try{st.props=it.memoizedProps,st.state=it.memoizedState,st.componentWillUnmount()}catch(dt){W$1(it,rt,dt)}Zj(nt,rt,it);break;case 21:Zj(nt,rt,it);break;case 22:it.mode&1?(U$4=(st=U$4)||it.memoizedState!==null,Zj(nt,rt,it),U$4=st):Zj(nt,rt,it);break;default:Zj(nt,rt,it)}}function bk$1(nt){var rt=nt.updateQueue;if(rt!==null){nt.updateQueue=null;var it=nt.stateNode;it===null&&(it=nt.stateNode=new Lj),rt.forEach(function(st){var lt=ck$1.bind(null,nt,st);it.has(st)||(it.add(st),st.then(lt,lt))})}}function dk(nt,rt){var it=rt.deletions;if(it!==null)for(var st=0;st<it.length;st++){var lt=it[st];try{var ct=nt,ut=rt,dt=ut;e:for(;dt!==null;){switch(dt.tag){case 5:X$2=dt.stateNode,Yj=!1;break e;case 3:X$2=dt.stateNode.containerInfo,Yj=!0;break e;case 4:X$2=dt.stateNode.containerInfo,Yj=!0;break e}dt=dt.return}if(X$2===null)throw Error(p$5(160));ak$1(ct,ut,lt),X$2=null,Yj=!1;var ht=lt.alternate;ht!==null&&(ht.return=null),lt.return=null}catch(ft){W$1(lt,rt,ft)}}if(rt.subtreeFlags&12854)for(rt=rt.child;rt!==null;)ek(rt,nt),rt=rt.sibling}function ek(nt,rt){var it=nt.alternate,st=nt.flags;switch(nt.tag){case 0:case 11:case 14:case 15:if(dk(rt,nt),fk(nt),st&4){try{Qj(3,nt,nt.return),Rj(3,nt)}catch(vt){W$1(nt,nt.return,vt)}try{Qj(5,nt,nt.return)}catch(vt){W$1(nt,nt.return,vt)}}break;case 1:dk(rt,nt),fk(nt),st&512&&it!==null&&Mj(it,it.return);break;case 5:if(dk(rt,nt),fk(nt),st&512&&it!==null&&Mj(it,it.return),nt.flags&32){var lt=nt.stateNode;try{ob(lt,"")}catch(vt){W$1(nt,nt.return,vt)}}if(st&4&&(lt=nt.stateNode,lt!=null)){var ct=nt.memoizedProps,ut=it!==null?it.memoizedProps:ct,dt=nt.type,ht=nt.updateQueue;if(nt.updateQueue=null,ht!==null)try{dt==="input"&&ct.type==="radio"&&ct.name!=null&&ab$1(lt,ct),vb(dt,ut);var ft=vb(dt,ct);for(ut=0;ut<ht.length;ut+=2){var pt=ht[ut],mt=ht[ut+1];pt==="style"?sb(lt,mt):pt==="dangerouslySetInnerHTML"?nb(lt,mt):pt==="children"?ob(lt,mt):ta(lt,pt,mt,ft)}switch(dt){case"input":bb$1(lt,ct);break;case"textarea":ib(lt,ct);break;case"select":var gt=lt._wrapperState.wasMultiple;lt._wrapperState.wasMultiple=!!ct.multiple;var xt=ct.value;xt!=null?fb(lt,!!ct.multiple,xt,!1):gt!==!!ct.multiple&&(ct.defaultValue!=null?fb(lt,!!ct.multiple,ct.defaultValue,!0):fb(lt,!!ct.multiple,ct.multiple?[]:"",!1))}lt[Pf]=ct}catch(vt){W$1(nt,nt.return,vt)}}break;case 6:if(dk(rt,nt),fk(nt),st&4){if(nt.stateNode===null)throw Error(p$5(162));lt=nt.stateNode,ct=nt.memoizedProps;try{lt.nodeValue=ct}catch(vt){W$1(nt,nt.return,vt)}}break;case 3:if(dk(rt,nt),fk(nt),st&4&&it!==null&&it.memoizedState.isDehydrated)try{bd$1(rt.containerInfo)}catch(vt){W$1(nt,nt.return,vt)}break;case 4:dk(rt,nt),fk(nt);break;case 13:dk(rt,nt),fk(nt),lt=nt.child,lt.flags&8192&&(ct=lt.memoizedState!==null,lt.stateNode.isHidden=ct,!ct||lt.alternate!==null&&lt.alternate.memoizedState!==null||(gk=B$2())),st&4&&bk$1(nt);break;case 22:if(pt=it!==null&&it.memoizedState!==null,nt.mode&1?(U$4=(ft=U$4)||pt,dk(rt,nt),U$4=ft):dk(rt,nt),fk(nt),st&8192){if(ft=nt.memoizedState!==null,(nt.stateNode.isHidden=ft)&&!pt&&nt.mode&1)for(V$1=nt,pt=nt.child;pt!==null;){for(mt=V$1=pt;V$1!==null;){switch(gt=V$1,xt=gt.child,gt.tag){case 0:case 11:case 14:case 15:Qj(4,gt,gt.return);break;case 1:Mj(gt,gt.return);var yt=gt.stateNode;if(typeof yt.componentWillUnmount=="function"){st=gt,it=gt.return;try{rt=st,yt.props=rt.memoizedProps,yt.state=rt.memoizedState,yt.componentWillUnmount()}catch(vt){W$1(st,it,vt)}}break;case 5:Mj(gt,gt.return);break;case 22:if(gt.memoizedState!==null){hk(mt);continue}}xt!==null?(xt.return=gt,V$1=xt):hk(mt)}pt=pt.sibling}e:for(pt=null,mt=nt;;){if(mt.tag===5){if(pt===null){pt=mt;try{lt=mt.stateNode,ft?(ct=lt.style,typeof ct.setProperty=="function"?ct.setProperty("display","none","important"):ct.display="none"):(dt=mt.stateNode,ht=mt.memoizedProps.style,ut=ht!=null&&ht.hasOwnProperty("display")?ht.display:null,dt.style.display=rb("display",ut))}catch(vt){W$1(nt,nt.return,vt)}}}else if(mt.tag===6){if(pt===null)try{mt.stateNode.nodeValue=ft?"":mt.memoizedProps}catch(vt){W$1(nt,nt.return,vt)}}else if((mt.tag!==22&&mt.tag!==23||mt.memoizedState===null||mt===nt)&&mt.child!==null){mt.child.return=mt,mt=mt.child;continue}if(mt===nt)break e;for(;mt.sibling===null;){if(mt.return===null||mt.return===nt)break e;pt===mt&&(pt=null),mt=mt.return}pt===mt&&(pt=null),mt.sibling.return=mt.return,mt=mt.sibling}}break;case 19:dk(rt,nt),fk(nt),st&4&&bk$1(nt);break;case 21:break;default:dk(rt,nt),fk(nt)}}function fk(nt){var rt=nt.flags;if(rt&2){try{e:{for(var it=nt.return;it!==null;){if(Uj(it)){var st=it;break e}it=it.return}throw Error(p$5(160))}switch(st.tag){case 5:var lt=st.stateNode;st.flags&32&&(ob(lt,""),st.flags&=-33);var ct=Vj(nt);Xj(nt,ct,lt);break;case 3:case 4:var ut=st.stateNode.containerInfo,dt=Vj(nt);Wj(nt,dt,ut);break;default:throw Error(p$5(161))}}catch(ht){W$1(nt,nt.return,ht)}nt.flags&=-3}rt&4096&&(nt.flags&=-4097)}function ik(nt,rt,it){V$1=nt,jk(nt)}function jk(nt,rt,it){for(var st=(nt.mode&1)!==0;V$1!==null;){var lt=V$1,ct=lt.child;if(lt.tag===22&&st){var ut=lt.memoizedState!==null||Kj;if(!ut){var dt=lt.alternate,ht=dt!==null&&dt.memoizedState!==null||U$4;dt=Kj;var ft=U$4;if(Kj=ut,(U$4=ht)&&!ft)for(V$1=lt;V$1!==null;)ut=V$1,ht=ut.child,ut.tag===22&&ut.memoizedState!==null?kk(lt):ht!==null?(ht.return=ut,V$1=ht):kk(lt);for(;ct!==null;)V$1=ct,jk(ct),ct=ct.sibling;V$1=lt,Kj=dt,U$4=ft}lk(nt)}else lt.subtreeFlags&8772&&ct!==null?(ct.return=lt,V$1=ct):lk(nt)}}function lk(nt){for(;V$1!==null;){var rt=V$1;if(rt.flags&8772){var it=rt.alternate;try{if(rt.flags&8772)switch(rt.tag){case 0:case 11:case 15:U$4||Rj(5,rt);break;case 1:var st=rt.stateNode;if(rt.flags&4&&!U$4)if(it===null)st.componentDidMount();else{var lt=rt.elementType===rt.type?it.memoizedProps:Lg(rt.type,it.memoizedProps);st.componentDidUpdate(lt,it.memoizedState,st.__reactInternalSnapshotBeforeUpdate)}var ct=rt.updateQueue;ct!==null&&ih(rt,ct,st);break;case 3:var ut=rt.updateQueue;if(ut!==null){if(it=null,rt.child!==null)switch(rt.child.tag){case 5:it=rt.child.stateNode;break;case 1:it=rt.child.stateNode}ih(rt,ut,it)}break;case 5:var dt=rt.stateNode;if(it===null&&rt.flags&4){it=dt;var ht=rt.memoizedProps;switch(rt.type){case"button":case"input":case"select":case"textarea":ht.autoFocus&&it.focus();break;case"img":ht.src&&(it.src=ht.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(rt.memoizedState===null){var ft=rt.alternate;if(ft!==null){var pt=ft.memoizedState;if(pt!==null){var mt=pt.dehydrated;mt!==null&&bd$1(mt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$5(163))}U$4||rt.flags&512&&Sj(rt)}catch(gt){W$1(rt,rt.return,gt)}}if(rt===nt){V$1=null;break}if(it=rt.sibling,it!==null){it.return=rt.return,V$1=it;break}V$1=rt.return}}function hk(nt){for(;V$1!==null;){var rt=V$1;if(rt===nt){V$1=null;break}var it=rt.sibling;if(it!==null){it.return=rt.return,V$1=it;break}V$1=rt.return}}function kk(nt){for(;V$1!==null;){var rt=V$1;try{switch(rt.tag){case 0:case 11:case 15:var it=rt.return;try{Rj(4,rt)}catch(ht){W$1(rt,it,ht)}break;case 1:var st=rt.stateNode;if(typeof st.componentDidMount=="function"){var lt=rt.return;try{st.componentDidMount()}catch(ht){W$1(rt,lt,ht)}}var ct=rt.return;try{Sj(rt)}catch(ht){W$1(rt,ct,ht)}break;case 5:var ut=rt.return;try{Sj(rt)}catch(ht){W$1(rt,ut,ht)}}}catch(ht){W$1(rt,rt.return,ht)}if(rt===nt){V$1=null;break}var dt=rt.sibling;if(dt!==null){dt.return=rt.return,V$1=dt;break}V$1=rt.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$1=0,R$3=null,Y$2=null,Z$2=0,gj=0,fj=Uf(0),T$5=0,qk=null,hh$1=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$1(){return K$1&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh(nt){return nt.mode&1?K$1&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(nt=C$3,nt!==0||(nt=window.event,nt=nt===void 0?16:jd(nt.type)),nt):1}function mh(nt,rt,it,st){if(50<zk)throw zk=0,Ak=null,Error(p$5(185));Ac(nt,it,st),(!(K$1&2)||nt!==R$3)&&(nt===R$3&&(!(K$1&2)&&(rk|=it),T$5===4&&Dk(nt,Z$2)),Ek(nt,st),it===1&&K$1===0&&!(rt.mode&1)&&(Hj=B$2()+500,fg&&jg()))}function Ek(nt,rt){var it=nt.callbackNode;wc(nt,rt);var st=uc(nt,nt===R$3?Z$2:0);if(st===0)it!==null&&bc$1(it),nt.callbackNode=null,nt.callbackPriority=0;else if(rt=st&-st,nt.callbackPriority!==rt){if(it!=null&&bc$1(it),rt===1)nt.tag===0?ig(Fk.bind(null,nt)):hg(Fk.bind(null,nt)),Jf(function(){!(K$1&6)&&jg()}),it=null;else{switch(Dc(st)){case 1:it=fc;break;case 4:it=gc;break;case 16:it=hc;break;case 536870912:it=jc;break;default:it=hc}it=Gk(it,Hk.bind(null,nt))}nt.callbackPriority=rt,nt.callbackNode=it}}function Hk(nt,rt){if(Bk=-1,Ck=0,K$1&6)throw Error(p$5(327));var it=nt.callbackNode;if(Ik()&&nt.callbackNode!==it)return null;var st=uc(nt,nt===R$3?Z$2:0);if(st===0)return null;if(st&30||st&nt.expiredLanes||rt)rt=Jk(nt,st);else{rt=st;var lt=K$1;K$1|=2;var ct=Kk();(R$3!==nt||Z$2!==rt)&&(vk=null,Hj=B$2()+500,Lk(nt,rt));do try{Mk();break}catch(dt){Nk(nt,dt)}while(!0);Qg(),nk.current=ct,K$1=lt,Y$2!==null?rt=0:(R$3=null,Z$2=0,rt=T$5)}if(rt!==0){if(rt===2&&(lt=xc(nt),lt!==0&&(st=lt,rt=Ok(nt,lt))),rt===1)throw it=qk,Lk(nt,0),Dk(nt,st),Ek(nt,B$2()),it;if(rt===6)Dk(nt,st);else{if(lt=nt.current.alternate,!(st&30)&&!Pk(lt)&&(rt=Jk(nt,st),rt===2&&(ct=xc(nt),ct!==0&&(st=ct,rt=Ok(nt,ct))),rt===1))throw it=qk,Lk(nt,0),Dk(nt,st),Ek(nt,B$2()),it;switch(nt.finishedWork=lt,nt.finishedLanes=st,rt){case 0:case 1:throw Error(p$5(345));case 2:Qk(nt,uk,vk);break;case 3:if(Dk(nt,st),(st&130023424)===st&&(rt=gk+500-B$2(),10<rt)){if(uc(nt,0)!==0)break;if(lt=nt.suspendedLanes,(lt&st)!==st){L$1(),nt.pingedLanes|=nt.suspendedLanes&lt;break}nt.timeoutHandle=Ff(Qk.bind(null,nt,uk,vk),rt);break}Qk(nt,uk,vk);break;case 4:if(Dk(nt,st),(st&4194240)===st)break;for(rt=nt.eventTimes,lt=-1;0<st;){var ut=31-oc(st);ct=1<<ut,ut=rt[ut],ut>lt&&(lt=ut),st&=~ct}if(st=lt,st=B$2()-st,st=(120>st?120:480>st?480:1080>st?1080:1920>st?1920:3e3>st?3e3:4320>st?4320:1960*mk(st/1960))-st,10<st){nt.timeoutHandle=Ff(Qk.bind(null,nt,uk,vk),st);break}Qk(nt,uk,vk);break;case 5:Qk(nt,uk,vk);break;default:throw Error(p$5(329))}}}return Ek(nt,B$2()),nt.callbackNode===it?Hk.bind(null,nt):null}function Ok(nt,rt){var it=tk;return nt.current.memoizedState.isDehydrated&&(Lk(nt,rt).flags|=256),nt=Jk(nt,rt),nt!==2&&(rt=uk,uk=it,rt!==null&&Gj(rt)),nt}function Gj(nt){uk===null?uk=nt:uk.push.apply(uk,nt)}function Pk(nt){for(var rt=nt;;){if(rt.flags&16384){var it=rt.updateQueue;if(it!==null&&(it=it.stores,it!==null))for(var st=0;st<it.length;st++){var lt=it[st],ct=lt.getSnapshot;lt=lt.value;try{if(!He$3(ct(),lt))return!1}catch{return!1}}}if(it=rt.child,rt.subtreeFlags&16384&&it!==null)it.return=rt,rt=it;else{if(rt===nt)break;for(;rt.sibling===null;){if(rt.return===null||rt.return===nt)return!0;rt=rt.return}rt.sibling.return=rt.return,rt=rt.sibling}}return!0}function Dk(nt,rt){for(rt&=~sk,rt&=~rk,nt.suspendedLanes|=rt,nt.pingedLanes&=~rt,nt=nt.expirationTimes;0<rt;){var it=31-oc(rt),st=1<<it;nt[it]=-1,rt&=~st}}function Fk(nt){if(K$1&6)throw Error(p$5(327));Ik();var rt=uc(nt,0);if(!(rt&1))return Ek(nt,B$2()),null;var it=Jk(nt,rt);if(nt.tag!==0&&it===2){var st=xc(nt);st!==0&&(rt=st,it=Ok(nt,st))}if(it===1)throw it=qk,Lk(nt,0),Dk(nt,rt),Ek(nt,B$2()),it;if(it===6)throw Error(p$5(345));return nt.finishedWork=nt.current.alternate,nt.finishedLanes=rt,Qk(nt,uk,vk),Ek(nt,B$2()),null}function Rk(nt,rt){var it=K$1;K$1|=1;try{return nt(rt)}finally{K$1=it,K$1===0&&(Hj=B$2()+500,fg&&jg())}}function Sk(nt){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var rt=K$1;K$1|=1;var it=pk.transition,st=C$3;try{if(pk.transition=null,C$3=1,nt)return nt()}finally{C$3=st,pk.transition=it,K$1=rt,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$2(fj)}function Lk(nt,rt){nt.finishedWork=null,nt.finishedLanes=0;var it=nt.timeoutHandle;if(it!==-1&&(nt.timeoutHandle=-1,Gf(it)),Y$2!==null)for(it=Y$2.return;it!==null;){var st=it;switch(wg(st),st.tag){case 1:st=st.type.childContextTypes,st!=null&&$f();break;case 3:Jh(),E$2(Wf),E$2(H$2),Oh();break;case 5:Lh(st);break;case 4:Jh();break;case 13:E$2(M$5);break;case 19:E$2(M$5);break;case 10:Rg(st.type._context);break;case 22:case 23:Ij()}it=it.return}if(R$3=nt,Y$2=nt=wh(nt.current,null),Z$2=gj=rt,T$5=0,qk=null,sk=rk=hh$1=0,uk=tk=null,Wg!==null){for(rt=0;rt<Wg.length;rt++)if(it=Wg[rt],st=it.interleaved,st!==null){it.interleaved=null;var lt=st.next,ct=it.pending;if(ct!==null){var ut=ct.next;ct.next=lt,st.next=ut}it.pending=st}Wg=null}return nt}function Nk(nt,rt){do{var it=Y$2;try{if(Qg(),Ph.current=ai$1,Sh){for(var st=N$4.memoizedState;st!==null;){var lt=st.queue;lt!==null&&(lt.pending=null),st=st.next}Sh=!1}if(Rh=0,P$3=O$3=N$4=null,Th=!1,Uh=0,ok.current=null,it===null||it.return===null){T$5=1,qk=rt,Y$2=null;break}e:{var ct=nt,ut=it.return,dt=it,ht=rt;if(rt=Z$2,dt.flags|=32768,ht!==null&&typeof ht=="object"&&typeof ht.then=="function"){var ft=ht,pt=dt,mt=pt.tag;if(!(pt.mode&1)&&(mt===0||mt===11||mt===15)){var gt=pt.alternate;gt?(pt.updateQueue=gt.updateQueue,pt.memoizedState=gt.memoizedState,pt.lanes=gt.lanes):(pt.updateQueue=null,pt.memoizedState=null)}var xt=Vi(ut);if(xt!==null){xt.flags&=-257,Wi(xt,ut,dt,ct,rt),xt.mode&1&&Ti(ct,ft,rt),rt=xt,ht=ft;var yt=rt.updateQueue;if(yt===null){var vt=new Set;vt.add(ht),rt.updateQueue=vt}else yt.add(ht);break e}else{if(!(rt&1)){Ti(ct,ft,rt),uj();break e}ht=Error(p$5(426))}}else if(I$9&&dt.mode&1){var St=Vi(ut);if(St!==null){!(St.flags&65536)&&(St.flags|=256),Wi(St,ut,dt,ct,rt),Jg(Ki(ht,dt));break e}}ct=ht=Ki(ht,dt),T$5!==4&&(T$5=2),tk===null?tk=[ct]:tk.push(ct),ct=ut;do{switch(ct.tag){case 3:ct.flags|=65536,rt&=-rt,ct.lanes|=rt;var wt=Oi(ct,ht,rt);fh(ct,wt);break e;case 1:dt=ht;var Et=ct.type,Rt=ct.stateNode;if(!(ct.flags&128)&&(typeof Et.getDerivedStateFromError=="function"||Rt!==null&&typeof Rt.componentDidCatch=="function"&&(Si===null||!Si.has(Rt)))){ct.flags|=65536,rt&=-rt,ct.lanes|=rt;var Tt=Ri(ct,dt,rt);fh(ct,Tt);break e}}ct=ct.return}while(ct!==null)}Tk(it)}catch(It){rt=It,Y$2===it&&it!==null&&(Y$2=it=it.return);continue}break}while(!0)}function Kk(){var nt=nk.current;return nk.current=ai$1,nt===null?ai$1:nt}function uj(){(T$5===0||T$5===3||T$5===2)&&(T$5=4),R$3===null||!(hh$1&268435455)&&!(rk&268435455)||Dk(R$3,Z$2)}function Jk(nt,rt){var it=K$1;K$1|=2;var st=Kk();(R$3!==nt||Z$2!==rt)&&(vk=null,Lk(nt,rt));do try{Uk();break}catch(lt){Nk(nt,lt)}while(!0);if(Qg(),K$1=it,nk.current=st,Y$2!==null)throw Error(p$5(261));return R$3=null,Z$2=0,T$5}function Uk(){for(;Y$2!==null;)Vk(Y$2)}function Mk(){for(;Y$2!==null&&!cc$1();)Vk(Y$2)}function Vk(nt){var rt=Wk(nt.alternate,nt,gj);nt.memoizedProps=nt.pendingProps,rt===null?Tk(nt):Y$2=rt,ok.current=null}function Tk(nt){var rt=nt;do{var it=rt.alternate;if(nt=rt.return,rt.flags&32768){if(it=Jj(it,rt),it!==null){it.flags&=32767,Y$2=it;return}if(nt!==null)nt.flags|=32768,nt.subtreeFlags=0,nt.deletions=null;else{T$5=6,Y$2=null;return}}else if(it=Fj(it,rt,gj),it!==null){Y$2=it;return}if(rt=rt.sibling,rt!==null){Y$2=rt;return}Y$2=rt=nt}while(rt!==null);T$5===0&&(T$5=5)}function Qk(nt,rt,it){var st=C$3,lt=pk.transition;try{pk.transition=null,C$3=1,Xk(nt,rt,it,st)}finally{pk.transition=lt,C$3=st}return null}function Xk(nt,rt,it,st){do Ik();while(xk!==null);if(K$1&6)throw Error(p$5(327));it=nt.finishedWork;var lt=nt.finishedLanes;if(it===null)return null;if(nt.finishedWork=null,nt.finishedLanes=0,it===nt.current)throw Error(p$5(177));nt.callbackNode=null,nt.callbackPriority=0;var ct=it.lanes|it.childLanes;if(Bc(nt,ct),nt===R$3&&(Y$2=R$3=null,Z$2=0),!(it.subtreeFlags&2064)&&!(it.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),ct=(it.flags&15990)!==0,it.subtreeFlags&15990||ct){ct=pk.transition,pk.transition=null;var ut=C$3;C$3=1;var dt=K$1;K$1|=4,ok.current=null,Pj(nt,it),ek(it,nt),Oe(Df),dd=!!Cf,Df=Cf=null,nt.current=it,ik(it),dc(),K$1=dt,C$3=ut,pk.transition=ct}else nt.current=it;if(wk&&(wk=!1,xk=nt,yk=lt),ct=nt.pendingLanes,ct===0&&(Si=null),mc(it.stateNode),Ek(nt,B$2()),rt!==null)for(st=nt.onRecoverableError,it=0;it<rt.length;it++)lt=rt[it],st(lt.value,{componentStack:lt.stack,digest:lt.digest});if(Pi)throw Pi=!1,nt=Qi,Qi=null,nt;return yk&1&&nt.tag!==0&&Ik(),ct=nt.pendingLanes,ct&1?nt===Ak?zk++:(zk=0,Ak=nt):zk=0,jg(),null}function Ik(){if(xk!==null){var nt=Dc(yk),rt=pk.transition,it=C$3;try{if(pk.transition=null,C$3=16>nt?16:nt,xk===null)var st=!1;else{if(nt=xk,xk=null,yk=0,K$1&6)throw Error(p$5(331));var lt=K$1;for(K$1|=4,V$1=nt.current;V$1!==null;){var ct=V$1,ut=ct.child;if(V$1.flags&16){var dt=ct.deletions;if(dt!==null){for(var ht=0;ht<dt.length;ht++){var ft=dt[ht];for(V$1=ft;V$1!==null;){var pt=V$1;switch(pt.tag){case 0:case 11:case 15:Qj(8,pt,ct)}var mt=pt.child;if(mt!==null)mt.return=pt,V$1=mt;else for(;V$1!==null;){pt=V$1;var gt=pt.sibling,xt=pt.return;if(Tj(pt),pt===ft){V$1=null;break}if(gt!==null){gt.return=xt,V$1=gt;break}V$1=xt}}}var yt=ct.alternate;if(yt!==null){var vt=yt.child;if(vt!==null){yt.child=null;do{var St=vt.sibling;vt.sibling=null,vt=St}while(vt!==null)}}V$1=ct}}if(ct.subtreeFlags&2064&&ut!==null)ut.return=ct,V$1=ut;else e:for(;V$1!==null;){if(ct=V$1,ct.flags&2048)switch(ct.tag){case 0:case 11:case 15:Qj(9,ct,ct.return)}var wt=ct.sibling;if(wt!==null){wt.return=ct.return,V$1=wt;break e}V$1=ct.return}}var Et=nt.current;for(V$1=Et;V$1!==null;){ut=V$1;var Rt=ut.child;if(ut.subtreeFlags&2064&&Rt!==null)Rt.return=ut,V$1=Rt;else e:for(ut=Et;V$1!==null;){if(dt=V$1,dt.flags&2048)try{switch(dt.tag){case 0:case 11:case 15:Rj(9,dt)}}catch(It){W$1(dt,dt.return,It)}if(dt===ut){V$1=null;break e}var Tt=dt.sibling;if(Tt!==null){Tt.return=dt.return,V$1=Tt;break e}V$1=dt.return}}if(K$1=lt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,nt)}catch{}st=!0}return st}finally{C$3=it,pk.transition=rt}}return!1}function Yk(nt,rt,it){rt=Ki(it,rt),rt=Oi(nt,rt,1),nt=dh(nt,rt,1),rt=L$1(),nt!==null&&(Ac(nt,1,rt),Ek(nt,rt))}function W$1(nt,rt,it){if(nt.tag===3)Yk(nt,nt,it);else for(;rt!==null;){if(rt.tag===3){Yk(rt,nt,it);break}else if(rt.tag===1){var st=rt.stateNode;if(typeof rt.type.getDerivedStateFromError=="function"||typeof st.componentDidCatch=="function"&&(Si===null||!Si.has(st))){nt=Ki(it,nt),nt=Ri(rt,nt,1),rt=dh(rt,nt,1),nt=L$1(),rt!==null&&(Ac(rt,1,nt),Ek(rt,nt));break}}rt=rt.return}}function Ui(nt,rt,it){var st=nt.pingCache;st!==null&&st.delete(rt),rt=L$1(),nt.pingedLanes|=nt.suspendedLanes&it,R$3===nt&&(Z$2&it)===it&&(T$5===4||T$5===3&&(Z$2&130023424)===Z$2&&500>B$2()-gk?Lk(nt,0):sk|=it),Ek(nt,rt)}function Zk(nt,rt){rt===0&&(nt.mode&1?(rt=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):rt=1);var it=L$1();nt=Zg(nt,rt),nt!==null&&(Ac(nt,rt,it),Ek(nt,it))}function vj(nt){var rt=nt.memoizedState,it=0;rt!==null&&(it=rt.retryLane),Zk(nt,it)}function ck$1(nt,rt){var it=0;switch(nt.tag){case 13:var st=nt.stateNode,lt=nt.memoizedState;lt!==null&&(it=lt.retryLane);break;case 19:st=nt.stateNode;break;default:throw Error(p$5(314))}st!==null&&st.delete(rt),Zk(nt,it)}var Wk;Wk=function(nt,rt,it){if(nt!==null)if(nt.memoizedProps!==rt.pendingProps||Wf.current)Ug=!0;else{if(!(nt.lanes&it)&&!(rt.flags&128))return Ug=!1,zj(nt,rt,it);Ug=!!(nt.flags&131072)}else Ug=!1,I$9&&rt.flags&1048576&&ug(rt,ng,rt.index);switch(rt.lanes=0,rt.tag){case 2:var st=rt.type;jj(nt,rt),nt=rt.pendingProps;var lt=Yf(rt,H$2.current);Tg(rt,it),lt=Xh(null,rt,st,nt,lt,it);var ct=bi$1();return rt.flags|=1,typeof lt=="object"&&lt!==null&&typeof lt.render=="function"&&lt.$$typeof===void 0?(rt.tag=1,rt.memoizedState=null,rt.updateQueue=null,Zf(st)?(ct=!0,cg$1(rt)):ct=!1,rt.memoizedState=lt.state!==null&&lt.state!==void 0?lt.state:null,ah$1(rt),lt.updater=nh,rt.stateNode=lt,lt._reactInternals=rt,rh(rt,st,nt,it),rt=kj(null,rt,st,!0,ct,it)):(rt.tag=0,I$9&&ct&&vg(rt),Yi(null,rt,lt,it),rt=rt.child),rt;case 16:st=rt.elementType;e:{switch(jj(nt,rt),nt=rt.pendingProps,lt=st._init,st=lt(st._payload),rt.type=st,lt=rt.tag=$k(st),nt=Lg(st,nt),lt){case 0:rt=dj(null,rt,st,nt,it);break e;case 1:rt=ij(null,rt,st,nt,it);break e;case 11:rt=Zi(null,rt,st,nt,it);break e;case 14:rt=aj$1(null,rt,st,Lg(st.type,nt),it);break e}throw Error(p$5(306,st,""))}return rt;case 0:return st=rt.type,lt=rt.pendingProps,lt=rt.elementType===st?lt:Lg(st,lt),dj(nt,rt,st,lt,it);case 1:return st=rt.type,lt=rt.pendingProps,lt=rt.elementType===st?lt:Lg(st,lt),ij(nt,rt,st,lt,it);case 3:e:{if(lj(rt),nt===null)throw Error(p$5(387));st=rt.pendingProps,ct=rt.memoizedState,lt=ct.element,bh$1(nt,rt),gh(rt,st,null,it);var ut=rt.memoizedState;if(st=ut.element,ct.isDehydrated)if(ct={element:st,isDehydrated:!1,cache:ut.cache,pendingSuspenseBoundaries:ut.pendingSuspenseBoundaries,transitions:ut.transitions},rt.updateQueue.baseState=ct,rt.memoizedState=ct,rt.flags&256){lt=Ki(Error(p$5(423)),rt),rt=mj(nt,rt,st,it,lt);break e}else if(st!==lt){lt=Ki(Error(p$5(424)),rt),rt=mj(nt,rt,st,it,lt);break e}else for(yg=Lf(rt.stateNode.containerInfo.firstChild),xg=rt,I$9=!0,zg=null,it=Ch(rt,null,st,it),rt.child=it;it;)it.flags=it.flags&-3|4096,it=it.sibling;else{if(Ig(),st===lt){rt=$i(nt,rt,it);break e}Yi(nt,rt,st,it)}rt=rt.child}return rt;case 5:return Kh(rt),nt===null&&Eg(rt),st=rt.type,lt=rt.pendingProps,ct=nt!==null?nt.memoizedProps:null,ut=lt.children,Ef(st,lt)?ut=null:ct!==null&&Ef(st,ct)&&(rt.flags|=32),hj(nt,rt),Yi(nt,rt,ut,it),rt.child;case 6:return nt===null&&Eg(rt),null;case 13:return pj(nt,rt,it);case 4:return Ih(rt,rt.stateNode.containerInfo),st=rt.pendingProps,nt===null?rt.child=Bh(rt,null,st,it):Yi(nt,rt,st,it),rt.child;case 11:return st=rt.type,lt=rt.pendingProps,lt=rt.elementType===st?lt:Lg(st,lt),Zi(nt,rt,st,lt,it);case 7:return Yi(nt,rt,rt.pendingProps,it),rt.child;case 8:return Yi(nt,rt,rt.pendingProps.children,it),rt.child;case 12:return Yi(nt,rt,rt.pendingProps.children,it),rt.child;case 10:e:{if(st=rt.type._context,lt=rt.pendingProps,ct=rt.memoizedProps,ut=lt.value,G$2(Mg,st._currentValue),st._currentValue=ut,ct!==null)if(He$3(ct.value,ut)){if(ct.children===lt.children&&!Wf.current){rt=$i(nt,rt,it);break e}}else for(ct=rt.child,ct!==null&&(ct.return=rt);ct!==null;){var dt=ct.dependencies;if(dt!==null){ut=ct.child;for(var ht=dt.firstContext;ht!==null;){if(ht.context===st){if(ct.tag===1){ht=ch$1(-1,it&-it),ht.tag=2;var ft=ct.updateQueue;if(ft!==null){ft=ft.shared;var pt=ft.pending;pt===null?ht.next=ht:(ht.next=pt.next,pt.next=ht),ft.pending=ht}}ct.lanes|=it,ht=ct.alternate,ht!==null&&(ht.lanes|=it),Sg(ct.return,it,rt),dt.lanes|=it;break}ht=ht.next}}else if(ct.tag===10)ut=ct.type===rt.type?null:ct.child;else if(ct.tag===18){if(ut=ct.return,ut===null)throw Error(p$5(341));ut.lanes|=it,dt=ut.alternate,dt!==null&&(dt.lanes|=it),Sg(ut,it,rt),ut=ct.sibling}else ut=ct.child;if(ut!==null)ut.return=ct;else for(ut=ct;ut!==null;){if(ut===rt){ut=null;break}if(ct=ut.sibling,ct!==null){ct.return=ut.return,ut=ct;break}ut=ut.return}ct=ut}Yi(nt,rt,lt.children,it),rt=rt.child}return rt;case 9:return lt=rt.type,st=rt.pendingProps.children,Tg(rt,it),lt=Vg(lt),st=st(lt),rt.flags|=1,Yi(nt,rt,st,it),rt.child;case 14:return st=rt.type,lt=Lg(st,rt.pendingProps),lt=Lg(st.type,lt),aj$1(nt,rt,st,lt,it);case 15:return cj$1(nt,rt,rt.type,rt.pendingProps,it);case 17:return st=rt.type,lt=rt.pendingProps,lt=rt.elementType===st?lt:Lg(st,lt),jj(nt,rt),rt.tag=1,Zf(st)?(nt=!0,cg$1(rt)):nt=!1,Tg(rt,it),ph(rt,st,lt),rh(rt,st,lt,it),kj(null,rt,st,!0,nt,it);case 19:return yj(nt,rt,it);case 22:return ej(nt,rt,it)}throw Error(p$5(156,rt.tag))};function Gk(nt,rt){return ac$1(nt,rt)}function al$1(nt,rt,it,st){this.tag=nt,this.key=it,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=rt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=st,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(nt,rt,it,st){return new al$1(nt,rt,it,st)}function bj$1(nt){return nt=nt.prototype,!(!nt||!nt.isReactComponent)}function $k(nt){if(typeof nt=="function")return bj$1(nt)?1:0;if(nt!=null){if(nt=nt.$$typeof,nt===Da)return 11;if(nt===Ga)return 14}return 2}function wh(nt,rt){var it=nt.alternate;return it===null?(it=Bg(nt.tag,rt,nt.key,nt.mode),it.elementType=nt.elementType,it.type=nt.type,it.stateNode=nt.stateNode,it.alternate=nt,nt.alternate=it):(it.pendingProps=rt,it.type=nt.type,it.flags=0,it.subtreeFlags=0,it.deletions=null),it.flags=nt.flags&14680064,it.childLanes=nt.childLanes,it.lanes=nt.lanes,it.child=nt.child,it.memoizedProps=nt.memoizedProps,it.memoizedState=nt.memoizedState,it.updateQueue=nt.updateQueue,rt=nt.dependencies,it.dependencies=rt===null?null:{lanes:rt.lanes,firstContext:rt.firstContext},it.sibling=nt.sibling,it.index=nt.index,it.ref=nt.ref,it}function yh(nt,rt,it,st,lt,ct){var ut=2;if(st=nt,typeof nt=="function")bj$1(nt)&&(ut=1);else if(typeof nt=="string")ut=5;else e:switch(nt){case ya:return Ah(it.children,lt,ct,rt);case za:ut=8,lt|=8;break;case Aa:return nt=Bg(12,it,rt,lt|2),nt.elementType=Aa,nt.lanes=ct,nt;case Ea:return nt=Bg(13,it,rt,lt),nt.elementType=Ea,nt.lanes=ct,nt;case Fa:return nt=Bg(19,it,rt,lt),nt.elementType=Fa,nt.lanes=ct,nt;case Ia:return qj(it,lt,ct,rt);default:if(typeof nt=="object"&&nt!==null)switch(nt.$$typeof){case Ba:ut=10;break e;case Ca:ut=9;break e;case Da:ut=11;break e;case Ga:ut=14;break e;case Ha:ut=16,st=null;break e}throw Error(p$5(130,nt==null?nt:typeof nt,""))}return rt=Bg(ut,it,rt,lt),rt.elementType=nt,rt.type=st,rt.lanes=ct,rt}function Ah(nt,rt,it,st){return nt=Bg(7,nt,st,rt),nt.lanes=it,nt}function qj(nt,rt,it,st){return nt=Bg(22,nt,st,rt),nt.elementType=Ia,nt.lanes=it,nt.stateNode={isHidden:!1},nt}function xh(nt,rt,it){return nt=Bg(6,nt,null,rt),nt.lanes=it,nt}function zh(nt,rt,it){return rt=Bg(4,nt.children!==null?nt.children:[],nt.key,rt),rt.lanes=it,rt.stateNode={containerInfo:nt.containerInfo,pendingChildren:null,implementation:nt.implementation},rt}function bl$1(nt,rt,it,st,lt){this.tag=rt,this.containerInfo=nt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=st,this.onRecoverableError=lt,this.mutableSourceEagerHydrationData=null}function cl$1(nt,rt,it,st,lt,ct,ut,dt,ht){return nt=new bl$1(nt,rt,it,dt,ht),rt===1?(rt=1,ct===!0&&(rt|=8)):rt=0,ct=Bg(3,null,null,rt),nt.current=ct,ct.stateNode=nt,ct.memoizedState={element:st,isDehydrated:it,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah$1(ct),nt}function dl(nt,rt,it){var st=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:st==null?null:""+st,children:nt,containerInfo:rt,implementation:it}}function el(nt){if(!nt)return Vf;nt=nt._reactInternals;e:{if(Vb(nt)!==nt||nt.tag!==1)throw Error(p$5(170));var rt=nt;do{switch(rt.tag){case 3:rt=rt.stateNode.context;break e;case 1:if(Zf(rt.type)){rt=rt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}rt=rt.return}while(rt!==null);throw Error(p$5(171))}if(nt.tag===1){var it=nt.type;if(Zf(it))return bg$1(nt,it,rt)}return rt}function fl(nt,rt,it,st,lt,ct,ut,dt,ht){return nt=cl$1(it,st,!0,nt,lt,ct,ut,dt,ht),nt.context=el(null),it=nt.current,st=L$1(),lt=lh(it),ct=ch$1(st,lt),ct.callback=rt??null,dh(it,ct,lt),nt.current.lanes=lt,Ac(nt,lt,st),Ek(nt,st),nt}function gl(nt,rt,it,st){var lt=rt.current,ct=L$1(),ut=lh(lt);return it=el(it),rt.context===null?rt.context=it:rt.pendingContext=it,rt=ch$1(ct,ut),rt.payload={element:nt},st=st===void 0?null:st,st!==null&&(rt.callback=st),nt=dh(lt,rt,ut),nt!==null&&(mh(nt,lt,ut,ct),eh(nt,lt,ut)),ut}function hl(nt){if(nt=nt.current,!nt.child)return null;switch(nt.child.tag){case 5:return nt.child.stateNode;default:return nt.child.stateNode}}function il(nt,rt){if(nt=nt.memoizedState,nt!==null&&nt.dehydrated!==null){var it=nt.retryLane;nt.retryLane=it!==0&&it<rt?it:rt}}function jl(nt,rt){il(nt,rt),(nt=nt.alternate)&&il(nt,rt)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(nt){console.error(nt)};function ml(nt){this._internalRoot=nt}nl.prototype.render=ml.prototype.render=function(nt){var rt=this._internalRoot;if(rt===null)throw Error(p$5(409));gl(nt,rt,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var nt=this._internalRoot;if(nt!==null){this._internalRoot=null;var rt=nt.containerInfo;Sk(function(){gl(null,nt,null,null)}),rt[uf]=null}};function nl(nt){this._internalRoot=nt}nl.prototype.unstable_scheduleHydration=function(nt){if(nt){var rt=Hc();nt={blockedOn:null,target:nt,priority:rt};for(var it=0;it<Qc.length&&rt!==0&&rt<Qc[it].priority;it++);Qc.splice(it,0,nt),it===0&&Vc(nt)}};function ol(nt){return!(!nt||nt.nodeType!==1&&nt.nodeType!==9&&nt.nodeType!==11)}function pl(nt){return!(!nt||nt.nodeType!==1&&nt.nodeType!==9&&nt.nodeType!==11&&(nt.nodeType!==8||nt.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(nt,rt,it,st,lt){if(lt){if(typeof st=="function"){var ct=st;st=function(){var ft=hl(ut);ct.call(ft)}}var ut=fl(rt,st,nt,0,null,!1,!1,"",ql);return nt._reactRootContainer=ut,nt[uf]=ut.current,sf(nt.nodeType===8?nt.parentNode:nt),Sk(),ut}for(;lt=nt.lastChild;)nt.removeChild(lt);if(typeof st=="function"){var dt=st;st=function(){var ft=hl(ht);dt.call(ft)}}var ht=cl$1(nt,0,!1,null,null,!1,!1,"",ql);return nt._reactRootContainer=ht,nt[uf]=ht.current,sf(nt.nodeType===8?nt.parentNode:nt),Sk(function(){gl(rt,ht,it,st)}),ht}function sl(nt,rt,it,st,lt){var ct=it._reactRootContainer;if(ct){var ut=ct;if(typeof lt=="function"){var dt=lt;lt=function(){var ht=hl(ut);dt.call(ht)}}gl(rt,ut,nt,lt)}else ut=rl(it,rt,nt,lt,st);return hl(ut)}Ec=function(nt){switch(nt.tag){case 3:var rt=nt.stateNode;if(rt.current.memoizedState.isDehydrated){var it=tc(rt.pendingLanes);it!==0&&(Cc(rt,it|1),Ek(rt,B$2()),!(K$1&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var st=Zg(nt,1);if(st!==null){var lt=L$1();mh(st,nt,1,lt)}}),jl(nt,1)}};Fc=function(nt){if(nt.tag===13){var rt=Zg(nt,134217728);if(rt!==null){var it=L$1();mh(rt,nt,134217728,it)}jl(nt,134217728)}};Gc=function(nt){if(nt.tag===13){var rt=lh(nt),it=Zg(nt,rt);if(it!==null){var st=L$1();mh(it,nt,rt,st)}jl(nt,rt)}};Hc=function(){return C$3};Ic=function(nt,rt){var it=C$3;try{return C$3=nt,rt()}finally{C$3=it}};yb=function(nt,rt,it){switch(rt){case"input":if(bb$1(nt,it),rt=it.name,it.type==="radio"&&rt!=null){for(it=nt;it.parentNode;)it=it.parentNode;for(it=it.querySelectorAll("input[name="+JSON.stringify(""+rt)+'][type="radio"]'),rt=0;rt<it.length;rt++){var st=it[rt];if(st!==nt&&st.form===nt.form){var lt=Db(st);if(!lt)throw Error(p$5(90));Wa(st),bb$1(st,lt)}}}break;case"textarea":ib(nt,it);break;case"select":rt=it.value,rt!=null&&fb(nt,!!it.multiple,rt,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue$2,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(nt){return nt=Zb(nt),nt===null?null:nt.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(nt,rt){var it=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(rt))throw Error(p$5(200));return dl(nt,rt,null,it)};reactDom_production_min.createRoot=function(nt,rt){if(!ol(nt))throw Error(p$5(299));var it=!1,st="",lt=ll;return rt!=null&&(rt.unstable_strictMode===!0&&(it=!0),rt.identifierPrefix!==void 0&&(st=rt.identifierPrefix),rt.onRecoverableError!==void 0&&(lt=rt.onRecoverableError)),rt=cl$1(nt,1,!1,null,null,it,!1,st,lt),nt[uf]=rt.current,sf(nt.nodeType===8?nt.parentNode:nt),new ml(rt)};reactDom_production_min.findDOMNode=function(nt){if(nt==null)return null;if(nt.nodeType===1)return nt;var rt=nt._reactInternals;if(rt===void 0)throw typeof nt.render=="function"?Error(p$5(188)):(nt=Object.keys(nt).join(","),Error(p$5(268,nt)));return nt=Zb(rt),nt=nt===null?null:nt.stateNode,nt};reactDom_production_min.flushSync=function(nt){return Sk(nt)};reactDom_production_min.hydrate=function(nt,rt,it){if(!pl(rt))throw Error(p$5(200));return sl(null,nt,rt,!0,it)};reactDom_production_min.hydrateRoot=function(nt,rt,it){if(!ol(nt))throw Error(p$5(405));var st=it!=null&&it.hydratedSources||null,lt=!1,ct="",ut=ll;if(it!=null&&(it.unstable_strictMode===!0&&(lt=!0),it.identifierPrefix!==void 0&&(ct=it.identifierPrefix),it.onRecoverableError!==void 0&&(ut=it.onRecoverableError)),rt=fl(rt,null,nt,1,it??null,lt,!1,ct,ut),nt[uf]=rt.current,sf(nt),st)for(nt=0;nt<st.length;nt++)it=st[nt],lt=it._getVersion,lt=lt(it._source),rt.mutableSourceEagerHydrationData==null?rt.mutableSourceEagerHydrationData=[it,lt]:rt.mutableSourceEagerHydrationData.push(it,lt);return new nl(rt)};reactDom_production_min.render=function(nt,rt,it){if(!pl(rt))throw Error(p$5(200));return sl(null,nt,rt,!1,it)};reactDom_production_min.unmountComponentAtNode=function(nt){if(!pl(nt))throw Error(p$5(40));return nt._reactRootContainer?(Sk(function(){sl(null,null,nt,!1,function(){nt._reactRootContainer=null,nt[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(nt,rt,it,st){if(!pl(it))throw Error(p$5(200));if(nt==null||nt._reactInternals===void 0)throw Error(p$5(38));return sl(nt,rt,it,!1,st)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(nt){console.error(nt)}}checkDCE(),reactDom$1.exports=reactDom_production_min;var reactDomExports=reactDom$1.exports;const reactDom=getDefaultExportFromCjs(reactDomExports),ReactDOM=_mergeNamespaces({__proto__:null,default:reactDom},[reactDomExports]);var m$5=reactDomExports;client.createRoot=m$5.createRoot,client.hydrateRoot=m$5.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt];for(var st in it)Object.prototype.hasOwnProperty.call(it,st)&&(nt[st]=it[st])}return nt},_extends$5.apply(this,arguments)}var Action;(function(nt){nt.Pop="POP",nt.Push="PUSH",nt.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(nt){nt===void 0&&(nt={});function rt(st,lt){let{pathname:ct,search:ut,hash:dt}=st.location;return createLocation("",{pathname:ct,search:ut,hash:dt},lt.state&&lt.state.usr||null,lt.state&&lt.state.key||"default")}function it(st,lt){return typeof lt=="string"?lt:createPath(lt)}return getUrlBasedHistory(rt,it,null,nt)}function invariant$1(nt,rt){if(nt===!1||nt===null||typeof nt>"u")throw new Error(rt)}function warning$1(nt,rt){if(!nt){typeof console<"u"&&console.warn(rt);try{throw new Error(rt)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(nt,rt){return{usr:nt.state,key:nt.key,idx:rt}}function createLocation(nt,rt,it,st){return it===void 0&&(it=null),_extends$5({pathname:typeof nt=="string"?nt:nt.pathname,search:"",hash:""},typeof rt=="string"?parsePath(rt):rt,{state:it,key:rt&&rt.key||st||createKey()})}function createPath(nt){let{pathname:rt="/",search:it="",hash:st=""}=nt;return it&&it!=="?"&&(rt+=it.charAt(0)==="?"?it:"?"+it),st&&st!=="#"&&(rt+=st.charAt(0)==="#"?st:"#"+st),rt}function parsePath(nt){let rt={};if(nt){let it=nt.indexOf("#");it>=0&&(rt.hash=nt.substr(it),nt=nt.substr(0,it));let st=nt.indexOf("?");st>=0&&(rt.search=nt.substr(st),nt=nt.substr(0,st)),nt&&(rt.pathname=nt)}return rt}function getUrlBasedHistory(nt,rt,it,st){st===void 0&&(st={});let{window:lt=document.defaultView,v5Compat:ct=!1}=st,ut=lt.history,dt=Action.Pop,ht=null,ft=pt();ft==null&&(ft=0,ut.replaceState(_extends$5({},ut.state,{idx:ft}),""));function pt(){return(ut.state||{idx:null}).idx}function mt(){dt=Action.Pop;let St=pt(),wt=St==null?null:St-ft;ft=St,ht&&ht({action:dt,location:vt.location,delta:wt})}function gt(St,wt){dt=Action.Push;let Et=createLocation(vt.location,St,wt);it&&it(Et,St),ft=pt()+1;let Rt=getHistoryState(Et,ft),Tt=vt.createHref(Et);try{ut.pushState(Rt,"",Tt)}catch(It){if(It instanceof DOMException&&It.name==="DataCloneError")throw It;lt.location.assign(Tt)}ct&&ht&&ht({action:dt,location:vt.location,delta:1})}function xt(St,wt){dt=Action.Replace;let Et=createLocation(vt.location,St,wt);it&&it(Et,St),ft=pt();let Rt=getHistoryState(Et,ft),Tt=vt.createHref(Et);ut.replaceState(Rt,"",Tt),ct&&ht&&ht({action:dt,location:vt.location,delta:0})}function yt(St){let wt=lt.location.origin!=="null"?lt.location.origin:lt.location.href,Et=typeof St=="string"?St:createPath(St);return invariant$1(wt,"No window.location.(origin|href) available to create URL for href: "+Et),new URL(Et,wt)}let vt={get action(){return dt},get location(){return nt(lt,ut)},listen(St){if(ht)throw new Error("A history only accepts one active listener");return lt.addEventListener(PopStateEventType,mt),ht=St,()=>{lt.removeEventListener(PopStateEventType,mt),ht=null}},createHref(St){return rt(lt,St)},createURL:yt,encodeLocation(St){let wt=yt(St);return{pathname:wt.pathname,search:wt.search,hash:wt.hash}},push:gt,replace:xt,go(St){return ut.go(St)}};return vt}var ResultType;(function(nt){nt.data="data",nt.deferred="deferred",nt.redirect="redirect",nt.error="error"})(ResultType||(ResultType={}));const immutableRouteKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isIndexRoute(nt){return nt.index===!0}function convertRoutesToDataRoutes(nt,rt,it,st){return it===void 0&&(it=[]),st===void 0&&(st={}),nt.map((lt,ct)=>{let ut=[...it,ct],dt=typeof lt.id=="string"?lt.id:ut.join("-");if(invariant$1(lt.index!==!0||!lt.children,"Cannot specify children on an index route"),invariant$1(!st[dt],'Found a route id collision on id "'+dt+`".  Route id's must be globally unique within Data Router usages`),isIndexRoute(lt)){let ht=_extends$5({},lt,rt(lt),{id:dt});return st[dt]=ht,ht}else{let ht=_extends$5({},lt,rt(lt),{id:dt,children:void 0});return st[dt]=ht,lt.children&&(ht.children=convertRoutesToDataRoutes(lt.children,rt,ut,st)),ht}})}function matchRoutes(nt,rt,it){it===void 0&&(it="/");let st=typeof rt=="string"?parsePath(rt):rt,lt=stripBasename(st.pathname||"/",it);if(lt==null)return null;let ct=flattenRoutes(nt);rankRouteBranches(ct);let ut=null;for(let dt=0;ut==null&&dt<ct.length;++dt)ut=matchRouteBranch(ct[dt],safelyDecodeURI(lt));return ut}function convertRouteMatchToUiMatch(nt,rt){let{route:it,pathname:st,params:lt}=nt;return{id:it.id,pathname:st,params:lt,data:rt[it.id],handle:it.handle}}function flattenRoutes(nt,rt,it,st){rt===void 0&&(rt=[]),it===void 0&&(it=[]),st===void 0&&(st="");let lt=(ct,ut,dt)=>{let ht={relativePath:dt===void 0?ct.path||"":dt,caseSensitive:ct.caseSensitive===!0,childrenIndex:ut,route:ct};ht.relativePath.startsWith("/")&&(invariant$1(ht.relativePath.startsWith(st),'Absolute route path "'+ht.relativePath+'" nested under path '+('"'+st+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),ht.relativePath=ht.relativePath.slice(st.length));let ft=joinPaths([st,ht.relativePath]),pt=it.concat(ht);ct.children&&ct.children.length>0&&(invariant$1(ct.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+ft+'".')),flattenRoutes(ct.children,rt,pt,ft)),!(ct.path==null&&!ct.index)&&rt.push({path:ft,score:computeScore(ft,ct.index),routesMeta:pt})};return nt.forEach((ct,ut)=>{var dt;if(ct.path===""||!((dt=ct.path)!=null&&dt.includes("?")))lt(ct,ut);else for(let ht of explodeOptionalSegments(ct.path))lt(ct,ut,ht)}),rt}function explodeOptionalSegments(nt){let rt=nt.split("/");if(rt.length===0)return[];let[it,...st]=rt,lt=it.endsWith("?"),ct=it.replace(/\?$/,"");if(st.length===0)return lt?[ct,""]:[ct];let ut=explodeOptionalSegments(st.join("/")),dt=[];return dt.push(...ut.map(ht=>ht===""?ct:[ct,ht].join("/"))),lt&&dt.push(...ut),dt.map(ht=>nt.startsWith("/")&&ht===""?"/":ht)}function rankRouteBranches(nt){nt.sort((rt,it)=>rt.score!==it.score?it.score-rt.score:compareIndexes(rt.routesMeta.map(st=>st.childrenIndex),it.routesMeta.map(st=>st.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=nt=>nt==="*";function computeScore(nt,rt){let it=nt.split("/"),st=it.length;return it.some(isSplat)&&(st+=splatPenalty),rt&&(st+=indexRouteValue),it.filter(lt=>!isSplat(lt)).reduce((lt,ct)=>lt+(paramRe.test(ct)?dynamicSegmentValue:ct===""?emptySegmentValue:staticSegmentValue),st)}function compareIndexes(nt,rt){return nt.length===rt.length&&nt.slice(0,-1).every((st,lt)=>st===rt[lt])?nt[nt.length-1]-rt[rt.length-1]:0}function matchRouteBranch(nt,rt){let{routesMeta:it}=nt,st={},lt="/",ct=[];for(let ut=0;ut<it.length;++ut){let dt=it[ut],ht=ut===it.length-1,ft=lt==="/"?rt:rt.slice(lt.length)||"/",pt=matchPath({path:dt.relativePath,caseSensitive:dt.caseSensitive,end:ht},ft);if(!pt)return null;Object.assign(st,pt.params);let mt=dt.route;ct.push({params:st,pathname:joinPaths([lt,pt.pathname]),pathnameBase:normalizePathname(joinPaths([lt,pt.pathnameBase])),route:mt}),pt.pathnameBase!=="/"&&(lt=joinPaths([lt,pt.pathnameBase]))}return ct}function matchPath(nt,rt){typeof nt=="string"&&(nt={path:nt,caseSensitive:!1,end:!0});let[it,st]=compilePath(nt.path,nt.caseSensitive,nt.end),lt=rt.match(it);if(!lt)return null;let ct=lt[0],ut=ct.replace(/(.)\/+$/,"$1"),dt=lt.slice(1);return{params:st.reduce((ft,pt,mt)=>{let{paramName:gt,isOptional:xt}=pt;if(gt==="*"){let vt=dt[mt]||"";ut=ct.slice(0,ct.length-vt.length).replace(/(.)\/+$/,"$1")}const yt=dt[mt];return xt&&!yt?ft[gt]=void 0:ft[gt]=safelyDecodeURIComponent(yt||"",gt),ft},{}),pathname:ct,pathnameBase:ut,pattern:nt}}function compilePath(nt,rt,it){rt===void 0&&(rt=!1),it===void 0&&(it=!0),warning$1(nt==="*"||!nt.endsWith("*")||nt.endsWith("/*"),'Route path "'+nt+'" will be treated as if it were '+('"'+nt.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+nt.replace(/\*$/,"/*")+'".'));let st=[],lt="^"+nt.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(ut,dt,ht)=>(st.push({paramName:dt,isOptional:ht!=null}),ht?"/?([^\\/]+)?":"/([^\\/]+)"));return nt.endsWith("*")?(st.push({paramName:"*"}),lt+=nt==="*"||nt==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):it?lt+="\\/*$":nt!==""&&nt!=="/"&&(lt+="(?:(?=\\/|$))"),[new RegExp(lt,rt?void 0:"i"),st]}function safelyDecodeURI(nt){try{return decodeURI(nt)}catch(rt){return warning$1(!1,'The URL path "'+nt+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+rt+").")),nt}}function safelyDecodeURIComponent(nt,rt){try{return decodeURIComponent(nt)}catch(it){return warning$1(!1,'The value for the URL param "'+rt+'" will not be decoded because'+(' the string "'+nt+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+it+").")),nt}}function stripBasename(nt,rt){if(rt==="/")return nt;if(!nt.toLowerCase().startsWith(rt.toLowerCase()))return null;let it=rt.endsWith("/")?rt.length-1:rt.length,st=nt.charAt(it);return st&&st!=="/"?null:nt.slice(it)||"/"}function resolvePath(nt,rt){rt===void 0&&(rt="/");let{pathname:it,search:st="",hash:lt=""}=typeof nt=="string"?parsePath(nt):nt;return{pathname:it?it.startsWith("/")?it:resolvePathname(it,rt):rt,search:normalizeSearch(st),hash:normalizeHash(lt)}}function resolvePathname(nt,rt){let it=rt.replace(/\/+$/,"").split("/");return nt.split("/").forEach(lt=>{lt===".."?it.length>1&&it.pop():lt!=="."&&it.push(lt)}),it.length>1?it.join("/"):"/"}function getInvalidPathError(nt,rt,it,st){return"Cannot include a '"+nt+"' character in a manually specified "+("`to."+rt+"` field ["+JSON.stringify(st)+"].  Please separate it out to the ")+("`to."+it+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(nt){return nt.filter((rt,it)=>it===0||rt.route.path&&rt.route.path.length>0)}function getResolveToMatches(nt,rt){let it=getPathContributingMatches(nt);return rt?it.map((st,lt)=>lt===nt.length-1?st.pathname:st.pathnameBase):it.map(st=>st.pathnameBase)}function resolveTo(nt,rt,it,st){st===void 0&&(st=!1);let lt;typeof nt=="string"?lt=parsePath(nt):(lt=_extends$5({},nt),invariant$1(!lt.pathname||!lt.pathname.includes("?"),getInvalidPathError("?","pathname","search",lt)),invariant$1(!lt.pathname||!lt.pathname.includes("#"),getInvalidPathError("#","pathname","hash",lt)),invariant$1(!lt.search||!lt.search.includes("#"),getInvalidPathError("#","search","hash",lt)));let ct=nt===""||lt.pathname==="",ut=ct?"/":lt.pathname,dt;if(ut==null)dt=it;else{let mt=rt.length-1;if(!st&&ut.startsWith("..")){let gt=ut.split("/");for(;gt[0]==="..";)gt.shift(),mt-=1;lt.pathname=gt.join("/")}dt=mt>=0?rt[mt]:"/"}let ht=resolvePath(lt,dt),ft=ut&&ut!=="/"&&ut.endsWith("/"),pt=(ct||ut===".")&&it.endsWith("/");return!ht.pathname.endsWith("/")&&(ft||pt)&&(ht.pathname+="/"),ht}const joinPaths=nt=>nt.join("/").replace(/\/\/+/g,"/"),normalizePathname=nt=>nt.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=nt=>!nt||nt==="?"?"":nt.startsWith("?")?nt:"?"+nt,normalizeHash=nt=>!nt||nt==="#"?"":nt.startsWith("#")?nt:"#"+nt;class ErrorResponseImpl{constructor(rt,it,st,lt){lt===void 0&&(lt=!1),this.status=rt,this.statusText=it||"",this.internal=lt,st instanceof Error?(this.data=st.toString(),this.error=st):this.data=st}}function isRouteErrorResponse(nt){return nt!=null&&typeof nt.status=="number"&&typeof nt.statusText=="string"&&typeof nt.internal=="boolean"&&"data"in nt}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX$1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,defaultMapRouteProperties=nt=>({hasErrorBoundary:!!nt.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions";function createRouter(nt){const rt=nt.window?nt.window:typeof window<"u"?window:void 0,it=typeof rt<"u"&&typeof rt.document<"u"&&typeof rt.document.createElement<"u",st=!it;invariant$1(nt.routes.length>0,"You must provide a non-empty routes array to createRouter");let lt;if(nt.mapRouteProperties)lt=nt.mapRouteProperties;else if(nt.detectErrorBoundary){let kr=nt.detectErrorBoundary;lt=Er=>({hasErrorBoundary:kr(Er)})}else lt=defaultMapRouteProperties;let ct={},ut=convertRoutesToDataRoutes(nt.routes,lt,void 0,ct),dt,ht=nt.basename||"/",ft=_extends$5({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},nt.future),pt=null,mt=new Set,gt=null,xt=null,yt=null,vt=nt.hydrationData!=null,St=matchRoutes(ut,nt.history.location,ht),wt=null;if(St==null){let kr=getInternalRouterError(404,{pathname:nt.history.location.pathname}),{matches:Er,route:Ur}=getShortCircuitMatches(ut);St=Er,wt={[Ur.id]:kr}}let Et,Rt=St.some(kr=>kr.route.lazy),Tt=St.some(kr=>kr.route.loader);if(Rt)Et=!1;else if(!Tt)Et=!0;else if(ft.v7_partialHydration){let kr=nt.hydrationData?nt.hydrationData.loaderData:null,Er=nt.hydrationData?nt.hydrationData.errors:null;Et=St.every(Ur=>Ur.route.loader&&Ur.route.loader.hydrate!==!0&&(kr&&kr[Ur.route.id]!==void 0||Er&&Er[Ur.route.id]!==void 0))}else Et=nt.hydrationData!=null;let It,At={historyAction:nt.history.action,location:nt.history.location,matches:St,initialized:Et,navigation:IDLE_NAVIGATION,restoreScrollPosition:nt.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:nt.hydrationData&&nt.hydrationData.loaderData||{},actionData:nt.hydrationData&&nt.hydrationData.actionData||null,errors:nt.hydrationData&&nt.hydrationData.errors||wt,fetchers:new Map,blockers:new Map},Dt=Action.Pop,jt=!1,Ft,Lt=!1,Mt=new Map,Ot=null,Nt=!1,$t=!1,Vt=[],Ut=[],zt=new Map,Bt=0,Ht=-1,Gt=new Map,Xt=new Set,Zt=new Map,hr=new Map,nr=new Set,ir=new Map,yr=new Map,Cr=!1;function Sr(){if(pt=nt.history.listen(kr=>{let{action:Er,location:Ur,delta:on}=kr;if(Cr){Cr=!1;return}warning$1(yr.size===0||on!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let fn=or({currentLocation:At.location,nextLocation:Ur,historyAction:Er});if(fn&&on!=null){Cr=!0,nt.history.go(on*-1),Ar(fn,{state:"blocked",location:Ur,proceed(){Ar(fn,{state:"proceeding",proceed:void 0,reset:void 0,location:Ur}),nt.history.go(on)},reset(){let Kn=new Map(At.blockers);Kn.set(fn,IDLE_BLOCKER),_r({blockers:Kn})}});return}return Hr(Er,Ur)}),it){restoreAppliedTransitions(rt,Mt);let kr=()=>persistAppliedTransitions(rt,Mt);rt.addEventListener("pagehide",kr),Ot=()=>rt.removeEventListener("pagehide",kr)}return At.initialized||Hr(Action.Pop,At.location,{initialHydration:!0}),It}function xr(){pt&&pt(),Ot&&Ot(),mt.clear(),Ft&&Ft.abort(),At.fetchers.forEach((kr,Er)=>Rn(Er)),At.blockers.forEach((kr,Er)=>Mn(Er))}function gr(kr){return mt.add(kr),()=>mt.delete(kr)}function _r(kr,Er){Er===void 0&&(Er={}),At=_extends$5({},At,kr);let Ur=[],on=[];ft.v7_fetcherPersist&&At.fetchers.forEach((fn,Kn)=>{fn.state==="idle"&&(nr.has(Kn)?on.push(Kn):Ur.push(Kn))}),[...mt].forEach(fn=>fn(At,{deletedFetchers:on,unstable_viewTransitionOpts:Er.viewTransitionOpts,unstable_flushSync:Er.flushSync===!0})),ft.v7_fetcherPersist&&(Ur.forEach(fn=>At.fetchers.delete(fn)),on.forEach(fn=>Rn(fn)))}function fr(kr,Er,Ur){var on,fn;let{flushSync:Kn}=Ur===void 0?{}:Ur,es=At.actionData!=null&&At.navigation.formMethod!=null&&isMutationMethod(At.navigation.formMethod)&&At.navigation.state==="loading"&&((on=kr.state)==null?void 0:on._isRedirect)!==!0,Zn;Er.actionData?Object.keys(Er.actionData).length>0?Zn=Er.actionData:Zn=null:es?Zn=At.actionData:Zn=null;let Dn=Er.loaderData?mergeLoaderData(At.loaderData,Er.loaderData,Er.matches||[],Er.errors):At.loaderData,ss=At.blockers;ss.size>0&&(ss=new Map(ss),ss.forEach((As,Vs)=>ss.set(Vs,IDLE_BLOCKER)));let $s=jt===!0||At.navigation.formMethod!=null&&isMutationMethod(At.navigation.formMethod)&&((fn=kr.state)==null?void 0:fn._isRedirect)!==!0;dt&&(ut=dt,dt=void 0),Nt||Dt===Action.Pop||(Dt===Action.Push?nt.history.push(kr,kr.state):Dt===Action.Replace&&nt.history.replace(kr,kr.state));let ws;if(Dt===Action.Pop){let As=Mt.get(At.location.pathname);As&&As.has(kr.pathname)?ws={currentLocation:At.location,nextLocation:kr}:Mt.has(kr.pathname)&&(ws={currentLocation:kr,nextLocation:At.location})}else if(Lt){let As=Mt.get(At.location.pathname);As?As.add(kr.pathname):(As=new Set([kr.pathname]),Mt.set(At.location.pathname,As)),ws={currentLocation:At.location,nextLocation:kr}}_r(_extends$5({},Er,{actionData:Zn,loaderData:Dn,historyAction:Dt,location:kr,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:Mr(kr,Er.matches||At.matches),preventScrollReset:$s,blockers:ss}),{viewTransitionOpts:ws,flushSync:Kn===!0}),Dt=Action.Pop,jt=!1,Lt=!1,Nt=!1,$t=!1,Vt=[],Ut=[]}async function Nr(kr,Er){if(typeof kr=="number"){nt.history.go(kr);return}let Ur=normalizeTo(At.location,At.matches,ht,ft.v7_prependBasename,kr,ft.v7_relativeSplatPath,Er==null?void 0:Er.fromRouteId,Er==null?void 0:Er.relative),{path:on,submission:fn,error:Kn}=normalizeNavigateOptions(ft.v7_normalizeFormMethod,!1,Ur,Er),es=At.location,Zn=createLocation(At.location,on,Er&&Er.state);Zn=_extends$5({},Zn,nt.history.encodeLocation(Zn));let Dn=Er&&Er.replace!=null?Er.replace:void 0,ss=Action.Push;Dn===!0?ss=Action.Replace:Dn===!1||fn!=null&&isMutationMethod(fn.formMethod)&&fn.formAction===At.location.pathname+At.location.search&&(ss=Action.Replace);let $s=Er&&"preventScrollReset"in Er?Er.preventScrollReset===!0:void 0,ws=(Er&&Er.unstable_flushSync)===!0,As=or({currentLocation:es,nextLocation:Zn,historyAction:ss});if(As){Ar(As,{state:"blocked",location:Zn,proceed(){Ar(As,{state:"proceeding",proceed:void 0,reset:void 0,location:Zn}),Nr(kr,Er)},reset(){let Vs=new Map(At.blockers);Vs.set(As,IDLE_BLOCKER),_r({blockers:Vs})}});return}return await Hr(ss,Zn,{submission:fn,pendingError:Kn,preventScrollReset:$s,replace:Er&&Er.replace,enableViewTransition:Er&&Er.unstable_viewTransition,flushSync:ws})}function Tr(){if(Kr(),_r({revalidation:"loading"}),At.navigation.state!=="submitting"){if(At.navigation.state==="idle"){Hr(At.historyAction,At.location,{startUninterruptedRevalidation:!0});return}Hr(Dt||At.historyAction,At.navigation.location,{overrideNavigation:At.navigation})}}async function Hr(kr,Er,Ur){Ft&&Ft.abort(),Ft=null,Dt=kr,Nt=(Ur&&Ur.startUninterruptedRevalidation)===!0,kn(At.location,At.matches),jt=(Ur&&Ur.preventScrollReset)===!0,Lt=(Ur&&Ur.enableViewTransition)===!0;let on=dt||ut,fn=Ur&&Ur.overrideNavigation,Kn=matchRoutes(on,Er,ht),es=(Ur&&Ur.flushSync)===!0;if(!Kn){let Vs=getInternalRouterError(404,{pathname:Er.pathname}),{matches:Fo,route:Lo}=getShortCircuitMatches(on);Wr(),fr(Er,{matches:Fo,loaderData:{},errors:{[Lo.id]:Vs}},{flushSync:es});return}if(At.initialized&&!$t&&isHashChangeOnly(At.location,Er)&&!(Ur&&Ur.submission&&isMutationMethod(Ur.submission.formMethod))){fr(Er,{matches:Kn},{flushSync:es});return}Ft=new AbortController;let Zn=createClientSideRequest(nt.history,Er,Ft.signal,Ur&&Ur.submission),Dn,ss;if(Ur&&Ur.pendingError)ss={[findNearestBoundary(Kn).route.id]:Ur.pendingError};else if(Ur&&Ur.submission&&isMutationMethod(Ur.submission.formMethod)){let Vs=await Vr(Zn,Er,Ur.submission,Kn,{replace:Ur.replace,flushSync:es});if(Vs.shortCircuited)return;Dn=Vs.pendingActionData,ss=Vs.pendingActionError,fn=getLoadingNavigation(Er,Ur.submission),es=!1,Zn=new Request(Zn.url,{signal:Zn.signal})}let{shortCircuited:$s,loaderData:ws,errors:As}=await mn(Zn,Er,Kn,fn,Ur&&Ur.submission,Ur&&Ur.fetcherSubmission,Ur&&Ur.replace,Ur&&Ur.initialHydration===!0,es,Dn,ss);$s||(Ft=null,fr(Er,_extends$5({matches:Kn},Dn?{actionData:Dn}:{},{loaderData:ws,errors:As})))}async function Vr(kr,Er,Ur,on,fn){fn===void 0&&(fn={}),Kr();let Kn=getSubmittingNavigation(Er,Ur);_r({navigation:Kn},{flushSync:fn.flushSync===!0});let es,Zn=getTargetMatch(on,Er);if(!Zn.route.action&&!Zn.route.lazy)es={type:ResultType.error,error:getInternalRouterError(405,{method:kr.method,pathname:Er.pathname,routeId:Zn.route.id})};else if(es=await callLoaderOrAction("action",kr,Zn,on,ct,lt,ht,ft.v7_relativeSplatPath),kr.signal.aborted)return{shortCircuited:!0};if(isRedirectResult(es)){let Dn;return fn&&fn.replace!=null?Dn=fn.replace:Dn=es.location===At.location.pathname+At.location.search,await vr(At,es,{submission:Ur,replace:Dn}),{shortCircuited:!0}}if(isErrorResult(es)){let Dn=findNearestBoundary(on,Zn.route.id);return(fn&&fn.replace)!==!0&&(Dt=Action.Push),{pendingActionData:{},pendingActionError:{[Dn.route.id]:es.error}}}if(isDeferredResult(es))throw getInternalRouterError(400,{type:"defer-action"});return{pendingActionData:{[Zn.route.id]:es.data}}}async function mn(kr,Er,Ur,on,fn,Kn,es,Zn,Dn,ss,$s){let ws=on||getLoadingNavigation(Er,fn),As=fn||Kn||getSubmissionFromNavigation(ws),Vs=dt||ut,[Fo,Lo]=getMatchesToLoad(nt.history,At,Ur,As,Er,ft.v7_partialHydration&&Zn===!0,$t,Vt,Ut,nr,Zt,Xt,Vs,ht,ss,$s);if(Wr(os=>!(Ur&&Ur.some(ys=>ys.route.id===os))||Fo&&Fo.some(ys=>ys.route.id===os)),Ht=++Bt,Fo.length===0&&Lo.length===0){let os=Xn();return fr(Er,_extends$5({matches:Ur,loaderData:{},errors:$s||null},ss?{actionData:ss}:{},os?{fetchers:new Map(At.fetchers)}:{}),{flushSync:Dn}),{shortCircuited:!0}}if(!Nt&&(!ft.v7_partialHydration||!Zn)){Lo.forEach(ys=>{let Os=At.fetchers.get(ys.key),Zs=getLoadingFetcher(void 0,Os?Os.data:void 0);At.fetchers.set(ys.key,Zs)});let os=ss||At.actionData;_r(_extends$5({navigation:ws},os?Object.keys(os).length===0?{actionData:null}:{actionData:os}:{},Lo.length>0?{fetchers:new Map(At.fetchers)}:{}),{flushSync:Dn})}Lo.forEach(os=>{zt.has(os.key)&&Ln(os.key),os.controller&&zt.set(os.key,os.controller)});let Ho=()=>Lo.forEach(os=>Ln(os.key));Ft&&Ft.signal.addEventListener("abort",Ho);let{results:Bo,loaderResults:Kl,fetcherResults:Nl}=await Fr(At.matches,Ur,Fo,Lo,kr);if(kr.signal.aborted)return{shortCircuited:!0};Ft&&Ft.signal.removeEventListener("abort",Ho),Lo.forEach(os=>zt.delete(os.key));let Lr=findRedirect(Bo);if(Lr){if(Lr.idx>=Fo.length){let os=Lo[Lr.idx-Fo.length].key;Xt.add(os)}return await vr(At,Lr.result,{replace:es}),{shortCircuited:!0}}let{loaderData:wn,errors:On}=processLoaderData(At,Ur,Fo,Kl,$s,Lo,Nl,ir);ir.forEach((os,ys)=>{os.subscribe(Os=>{(Os||os.done)&&ir.delete(ys)})});let In=Xn(),Br=Yr(Ht),gs=In||Br||Lo.length>0;return _extends$5({loaderData:wn,errors:On},gs?{fetchers:new Map(At.fetchers)}:{})}function tn(kr,Er,Ur,on){if(st)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");zt.has(kr)&&Ln(kr);let fn=(on&&on.unstable_flushSync)===!0,Kn=dt||ut,es=normalizeTo(At.location,At.matches,ht,ft.v7_prependBasename,Ur,ft.v7_relativeSplatPath,Er,on==null?void 0:on.relative),Zn=matchRoutes(Kn,es,ht);if(!Zn){pn(kr,Er,getInternalRouterError(404,{pathname:es}),{flushSync:fn});return}let{path:Dn,submission:ss,error:$s}=normalizeNavigateOptions(ft.v7_normalizeFormMethod,!0,es,on);if($s){pn(kr,Er,$s,{flushSync:fn});return}let ws=getTargetMatch(Zn,Dn);if(jt=(on&&on.preventScrollReset)===!0,ss&&isMutationMethod(ss.formMethod)){er(kr,Er,Dn,ws,Zn,fn,ss);return}Zt.set(kr,{routeId:Er,path:Dn}),tr(kr,Er,Dn,ws,Zn,fn,ss)}async function er(kr,Er,Ur,on,fn,Kn,es){if(Kr(),Zt.delete(kr),!on.route.action&&!on.route.lazy){let ys=getInternalRouterError(405,{method:es.formMethod,pathname:Ur,routeId:Er});pn(kr,Er,ys,{flushSync:Kn});return}let Zn=At.fetchers.get(kr);qr(kr,getSubmittingFetcher(es,Zn),{flushSync:Kn});let Dn=new AbortController,ss=createClientSideRequest(nt.history,Ur,Dn.signal,es);zt.set(kr,Dn);let $s=Bt,ws=await callLoaderOrAction("action",ss,on,fn,ct,lt,ht,ft.v7_relativeSplatPath);if(ss.signal.aborted){zt.get(kr)===Dn&&zt.delete(kr);return}if(ft.v7_fetcherPersist&&nr.has(kr)){if(isRedirectResult(ws)||isErrorResult(ws)){qr(kr,getDoneFetcher(void 0));return}}else{if(isRedirectResult(ws))if(zt.delete(kr),Ht>$s){qr(kr,getDoneFetcher(void 0));return}else return Xt.add(kr),qr(kr,getLoadingFetcher(es)),vr(At,ws,{fetcherSubmission:es});if(isErrorResult(ws)){pn(kr,Er,ws.error);return}}if(isDeferredResult(ws))throw getInternalRouterError(400,{type:"defer-action"});let As=At.navigation.location||At.location,Vs=createClientSideRequest(nt.history,As,Dn.signal),Fo=dt||ut,Lo=At.navigation.state!=="idle"?matchRoutes(Fo,At.navigation.location,ht):At.matches;invariant$1(Lo,"Didn't find any matches after fetcher action");let Ho=++Bt;Gt.set(kr,Ho);let Bo=getLoadingFetcher(es,ws.data);At.fetchers.set(kr,Bo);let[Kl,Nl]=getMatchesToLoad(nt.history,At,Lo,es,As,!1,$t,Vt,Ut,nr,Zt,Xt,Fo,ht,{[on.route.id]:ws.data},void 0);Nl.filter(ys=>ys.key!==kr).forEach(ys=>{let Os=ys.key,Zs=At.fetchers.get(Os),Ys=getLoadingFetcher(void 0,Zs?Zs.data:void 0);At.fetchers.set(Os,Ys),zt.has(Os)&&Ln(Os),ys.controller&&zt.set(Os,ys.controller)}),_r({fetchers:new Map(At.fetchers)});let Lr=()=>Nl.forEach(ys=>Ln(ys.key));Dn.signal.addEventListener("abort",Lr);let{results:wn,loaderResults:On,fetcherResults:In}=await Fr(At.matches,Lo,Kl,Nl,Vs);if(Dn.signal.aborted)return;Dn.signal.removeEventListener("abort",Lr),Gt.delete(kr),zt.delete(kr),Nl.forEach(ys=>zt.delete(ys.key));let Br=findRedirect(wn);if(Br){if(Br.idx>=Kl.length){let ys=Nl[Br.idx-Kl.length].key;Xt.add(ys)}return vr(At,Br.result)}let{loaderData:gs,errors:os}=processLoaderData(At,At.matches,Kl,On,void 0,Nl,In,ir);if(At.fetchers.has(kr)){let ys=getDoneFetcher(ws.data);At.fetchers.set(kr,ys)}Yr(Ho),At.navigation.state==="loading"&&Ho>Ht?(invariant$1(Dt,"Expected pending action"),Ft&&Ft.abort(),fr(At.navigation.location,{matches:Lo,loaderData:gs,errors:os,fetchers:new Map(At.fetchers)})):(_r({errors:os,loaderData:mergeLoaderData(At.loaderData,gs,Lo,os),fetchers:new Map(At.fetchers)}),$t=!1)}async function tr(kr,Er,Ur,on,fn,Kn,es){let Zn=At.fetchers.get(kr);qr(kr,getLoadingFetcher(es,Zn?Zn.data:void 0),{flushSync:Kn});let Dn=new AbortController,ss=createClientSideRequest(nt.history,Ur,Dn.signal);zt.set(kr,Dn);let $s=Bt,ws=await callLoaderOrAction("loader",ss,on,fn,ct,lt,ht,ft.v7_relativeSplatPath);if(isDeferredResult(ws)&&(ws=await resolveDeferredData(ws,ss.signal,!0)||ws),zt.get(kr)===Dn&&zt.delete(kr),!ss.signal.aborted){if(nr.has(kr)){qr(kr,getDoneFetcher(void 0));return}if(isRedirectResult(ws))if(Ht>$s){qr(kr,getDoneFetcher(void 0));return}else{Xt.add(kr),await vr(At,ws);return}if(isErrorResult(ws)){pn(kr,Er,ws.error);return}invariant$1(!isDeferredResult(ws),"Unhandled fetcher deferred data"),qr(kr,getDoneFetcher(ws.data))}}async function vr(kr,Er,Ur){let{submission:on,fetcherSubmission:fn,replace:Kn}=Ur===void 0?{}:Ur;Er.revalidate&&($t=!0);let es=createLocation(kr.location,Er.location,{_isRedirect:!0});if(invariant$1(es,"Expected a location on the redirect navigation"),it){let As=!1;if(Er.reloadDocument)As=!0;else if(ABSOLUTE_URL_REGEX$1.test(Er.location)){const Vs=nt.history.createURL(Er.location);As=Vs.origin!==rt.location.origin||stripBasename(Vs.pathname,ht)==null}if(As){Kn?rt.location.replace(Er.location):rt.location.assign(Er.location);return}}Ft=null;let Zn=Kn===!0?Action.Replace:Action.Push,{formMethod:Dn,formAction:ss,formEncType:$s}=kr.navigation;!on&&!fn&&Dn&&ss&&$s&&(on=getSubmissionFromNavigation(kr.navigation));let ws=on||fn;if(redirectPreserveMethodStatusCodes.has(Er.status)&&ws&&isMutationMethod(ws.formMethod))await Hr(Zn,es,{submission:_extends$5({},ws,{formAction:Er.location}),preventScrollReset:jt});else{let As=getLoadingNavigation(es,on);await Hr(Zn,es,{overrideNavigation:As,fetcherSubmission:fn,preventScrollReset:jt})}}async function Fr(kr,Er,Ur,on,fn){let Kn=await Promise.all([...Ur.map(Dn=>callLoaderOrAction("loader",fn,Dn,Er,ct,lt,ht,ft.v7_relativeSplatPath)),...on.map(Dn=>Dn.matches&&Dn.match&&Dn.controller?callLoaderOrAction("loader",createClientSideRequest(nt.history,Dn.path,Dn.controller.signal),Dn.match,Dn.matches,ct,lt,ht,ft.v7_relativeSplatPath):{type:ResultType.error,error:getInternalRouterError(404,{pathname:Dn.path})})]),es=Kn.slice(0,Ur.length),Zn=Kn.slice(Ur.length);return await Promise.all([resolveDeferredResults(kr,Ur,es,es.map(()=>fn.signal),!1,At.loaderData),resolveDeferredResults(kr,on.map(Dn=>Dn.match),Zn,on.map(Dn=>Dn.controller?Dn.controller.signal:null),!0)]),{results:Kn,loaderResults:es,fetcherResults:Zn}}function Kr(){$t=!0,Vt.push(...Wr()),Zt.forEach((kr,Er)=>{zt.has(Er)&&(Ut.push(Er),Ln(Er))})}function qr(kr,Er,Ur){Ur===void 0&&(Ur={}),At.fetchers.set(kr,Er),_r({fetchers:new Map(At.fetchers)},{flushSync:(Ur&&Ur.flushSync)===!0})}function pn(kr,Er,Ur,on){on===void 0&&(on={});let fn=findNearestBoundary(At.matches,Er);Rn(kr),_r({errors:{[fn.route.id]:Ur},fetchers:new Map(At.fetchers)},{flushSync:(on&&on.flushSync)===!0})}function En(kr){return ft.v7_fetcherPersist&&(hr.set(kr,(hr.get(kr)||0)+1),nr.has(kr)&&nr.delete(kr)),At.fetchers.get(kr)||IDLE_FETCHER}function Rn(kr){let Er=At.fetchers.get(kr);zt.has(kr)&&!(Er&&Er.state==="loading"&&Gt.has(kr))&&Ln(kr),Zt.delete(kr),Gt.delete(kr),Xt.delete(kr),nr.delete(kr),At.fetchers.delete(kr)}function Qn(kr){if(ft.v7_fetcherPersist){let Er=(hr.get(kr)||0)-1;Er<=0?(hr.delete(kr),nr.add(kr)):hr.set(kr,Er)}else Rn(kr);_r({fetchers:new Map(At.fetchers)})}function Ln(kr){let Er=zt.get(kr);invariant$1(Er,"Expected fetch controller: "+kr),Er.abort(),zt.delete(kr)}function ln(kr){for(let Er of kr){let Ur=En(Er),on=getDoneFetcher(Ur.data);At.fetchers.set(Er,on)}}function Xn(){let kr=[],Er=!1;for(let Ur of Xt){let on=At.fetchers.get(Ur);invariant$1(on,"Expected fetcher: "+Ur),on.state==="loading"&&(Xt.delete(Ur),kr.push(Ur),Er=!0)}return ln(kr),Er}function Yr(kr){let Er=[];for(let[Ur,on]of Gt)if(on<kr){let fn=At.fetchers.get(Ur);invariant$1(fn,"Expected fetcher: "+Ur),fn.state==="loading"&&(Ln(Ur),Gt.delete(Ur),Er.push(Ur))}return ln(Er),Er.length>0}function Qr(kr,Er){let Ur=At.blockers.get(kr)||IDLE_BLOCKER;return yr.get(kr)!==Er&&yr.set(kr,Er),Ur}function Mn(kr){At.blockers.delete(kr),yr.delete(kr)}function Ar(kr,Er){let Ur=At.blockers.get(kr)||IDLE_BLOCKER;invariant$1(Ur.state==="unblocked"&&Er.state==="blocked"||Ur.state==="blocked"&&Er.state==="blocked"||Ur.state==="blocked"&&Er.state==="proceeding"||Ur.state==="blocked"&&Er.state==="unblocked"||Ur.state==="proceeding"&&Er.state==="unblocked","Invalid blocker state transition: "+Ur.state+" -> "+Er.state);let on=new Map(At.blockers);on.set(kr,Er),_r({blockers:on})}function or(kr){let{currentLocation:Er,nextLocation:Ur,historyAction:on}=kr;if(yr.size===0)return;yr.size>1&&warning$1(!1,"A router only supports one blocker at a time");let fn=Array.from(yr.entries()),[Kn,es]=fn[fn.length-1],Zn=At.blockers.get(Kn);if(!(Zn&&Zn.state==="proceeding")&&es({currentLocation:Er,nextLocation:Ur,historyAction:on}))return Kn}function Wr(kr){let Er=[];return ir.forEach((Ur,on)=>{(!kr||kr(on))&&(Ur.cancel(),Er.push(on),ir.delete(on))}),Er}function Ir(kr,Er,Ur){if(gt=kr,yt=Er,xt=Ur||null,!vt&&At.navigation===IDLE_NAVIGATION){vt=!0;let on=Mr(At.location,At.matches);on!=null&&_r({restoreScrollPosition:on})}return()=>{gt=null,yt=null,xt=null}}function dn(kr,Er){return xt&&xt(kr,Er.map(on=>convertRouteMatchToUiMatch(on,At.loaderData)))||kr.key}function kn(kr,Er){if(gt&&yt){let Ur=dn(kr,Er);gt[Ur]=yt()}}function Mr(kr,Er){if(gt){let Ur=dn(kr,Er),on=gt[Ur];if(typeof on=="number")return on}return null}function vn(kr){ct={},dt=convertRoutesToDataRoutes(kr,lt,void 0,ct)}return It={get basename(){return ht},get future(){return ft},get state(){return At},get routes(){return ut},get window(){return rt},initialize:Sr,subscribe:gr,enableScrollRestoration:Ir,navigate:Nr,fetch:tn,revalidate:Tr,createHref:kr=>nt.history.createHref(kr),encodeLocation:kr=>nt.history.encodeLocation(kr),getFetcher:En,deleteFetcher:Qn,dispose:xr,getBlocker:Qr,deleteBlocker:Mn,_internalFetchControllers:zt,_internalActiveDeferreds:ir,_internalSetRoutes:vn},It}function isSubmissionNavigation(nt){return nt!=null&&("formData"in nt&&nt.formData!=null||"body"in nt&&nt.body!==void 0)}function normalizeTo(nt,rt,it,st,lt,ct,ut,dt){let ht,ft;if(ut){ht=[];for(let mt of rt)if(ht.push(mt),mt.route.id===ut){ft=mt;break}}else ht=rt,ft=rt[rt.length-1];let pt=resolveTo(lt||".",getResolveToMatches(ht,ct),stripBasename(nt.pathname,it)||nt.pathname,dt==="path");return lt==null&&(pt.search=nt.search,pt.hash=nt.hash),(lt==null||lt===""||lt===".")&&ft&&ft.route.index&&!hasNakedIndexQuery(pt.search)&&(pt.search=pt.search?pt.search.replace(/^\?/,"?index&"):"?index"),st&&it!=="/"&&(pt.pathname=pt.pathname==="/"?it:joinPaths([it,pt.pathname])),createPath(pt)}function normalizeNavigateOptions(nt,rt,it,st){if(!st||!isSubmissionNavigation(st))return{path:it};if(st.formMethod&&!isValidMethod(st.formMethod))return{path:it,error:getInternalRouterError(405,{method:st.formMethod})};let lt=()=>({path:it,error:getInternalRouterError(400,{type:"invalid-body"})}),ct=st.formMethod||"get",ut=nt?ct.toUpperCase():ct.toLowerCase(),dt=stripHashFromPath(it);if(st.body!==void 0){if(st.formEncType==="text/plain"){if(!isMutationMethod(ut))return lt();let gt=typeof st.body=="string"?st.body:st.body instanceof FormData||st.body instanceof URLSearchParams?Array.from(st.body.entries()).reduce((xt,yt)=>{let[vt,St]=yt;return""+xt+vt+"="+St+`
`},""):String(st.body);return{path:it,submission:{formMethod:ut,formAction:dt,formEncType:st.formEncType,formData:void 0,json:void 0,text:gt}}}else if(st.formEncType==="application/json"){if(!isMutationMethod(ut))return lt();try{let gt=typeof st.body=="string"?JSON.parse(st.body):st.body;return{path:it,submission:{formMethod:ut,formAction:dt,formEncType:st.formEncType,formData:void 0,json:gt,text:void 0}}}catch{return lt()}}}invariant$1(typeof FormData=="function","FormData is not available in this environment");let ht,ft;if(st.formData)ht=convertFormDataToSearchParams(st.formData),ft=st.formData;else if(st.body instanceof FormData)ht=convertFormDataToSearchParams(st.body),ft=st.body;else if(st.body instanceof URLSearchParams)ht=st.body,ft=convertSearchParamsToFormData(ht);else if(st.body==null)ht=new URLSearchParams,ft=new FormData;else try{ht=new URLSearchParams(st.body),ft=convertSearchParamsToFormData(ht)}catch{return lt()}let pt={formMethod:ut,formAction:dt,formEncType:st&&st.formEncType||"application/x-www-form-urlencoded",formData:ft,json:void 0,text:void 0};if(isMutationMethod(pt.formMethod))return{path:it,submission:pt};let mt=parsePath(it);return rt&&mt.search&&hasNakedIndexQuery(mt.search)&&ht.append("index",""),mt.search="?"+ht,{path:createPath(mt),submission:pt}}function getLoaderMatchesUntilBoundary(nt,rt){let it=nt;if(rt){let st=nt.findIndex(lt=>lt.route.id===rt);st>=0&&(it=nt.slice(0,st))}return it}function getMatchesToLoad(nt,rt,it,st,lt,ct,ut,dt,ht,ft,pt,mt,gt,xt,yt,vt){let St=vt?Object.values(vt)[0]:yt?Object.values(yt)[0]:void 0,wt=nt.createURL(rt.location),Et=nt.createURL(lt),Rt=vt?Object.keys(vt)[0]:void 0,It=getLoaderMatchesUntilBoundary(it,Rt).filter((Dt,jt)=>{let{route:Ft}=Dt;if(Ft.lazy)return!0;if(Ft.loader==null)return!1;if(ct)return Ft.loader.hydrate?!0:rt.loaderData[Ft.id]===void 0&&(!rt.errors||rt.errors[Ft.id]===void 0);if(isNewLoader(rt.loaderData,rt.matches[jt],Dt)||dt.some(Ot=>Ot===Dt.route.id))return!0;let Lt=rt.matches[jt],Mt=Dt;return shouldRevalidateLoader(Dt,_extends$5({currentUrl:wt,currentParams:Lt.params,nextUrl:Et,nextParams:Mt.params},st,{actionResult:St,defaultShouldRevalidate:ut||wt.pathname+wt.search===Et.pathname+Et.search||wt.search!==Et.search||isNewRouteInstance(Lt,Mt)}))}),At=[];return pt.forEach((Dt,jt)=>{if(ct||!it.some(Nt=>Nt.route.id===Dt.routeId)||ft.has(jt))return;let Ft=matchRoutes(gt,Dt.path,xt);if(!Ft){At.push({key:jt,routeId:Dt.routeId,path:Dt.path,matches:null,match:null,controller:null});return}let Lt=rt.fetchers.get(jt),Mt=getTargetMatch(Ft,Dt.path),Ot=!1;mt.has(jt)?Ot=!1:ht.includes(jt)?Ot=!0:Lt&&Lt.state!=="idle"&&Lt.data===void 0?Ot=ut:Ot=shouldRevalidateLoader(Mt,_extends$5({currentUrl:wt,currentParams:rt.matches[rt.matches.length-1].params,nextUrl:Et,nextParams:it[it.length-1].params},st,{actionResult:St,defaultShouldRevalidate:ut})),Ot&&At.push({key:jt,routeId:Dt.routeId,path:Dt.path,matches:Ft,match:Mt,controller:new AbortController})}),[It,At]}function isNewLoader(nt,rt,it){let st=!rt||it.route.id!==rt.route.id,lt=nt[it.route.id]===void 0;return st||lt}function isNewRouteInstance(nt,rt){let it=nt.route.path;return nt.pathname!==rt.pathname||it!=null&&it.endsWith("*")&&nt.params["*"]!==rt.params["*"]}function shouldRevalidateLoader(nt,rt){if(nt.route.shouldRevalidate){let it=nt.route.shouldRevalidate(rt);if(typeof it=="boolean")return it}return rt.defaultShouldRevalidate}async function loadLazyRouteModule(nt,rt,it){if(!nt.lazy)return;let st=await nt.lazy();if(!nt.lazy)return;let lt=it[nt.id];invariant$1(lt,"No route found in manifest");let ct={};for(let ut in st){let ht=lt[ut]!==void 0&&ut!=="hasErrorBoundary";warning$1(!ht,'Route "'+lt.id+'" has a static property "'+ut+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+ut+'" will be ignored.')),!ht&&!immutableRouteKeys.has(ut)&&(ct[ut]=st[ut])}Object.assign(lt,ct),Object.assign(lt,_extends$5({},rt(lt),{lazy:void 0}))}async function callLoaderOrAction(nt,rt,it,st,lt,ct,ut,dt,ht){ht===void 0&&(ht={});let ft,pt,mt,gt=vt=>{let St,wt=new Promise((Et,Rt)=>St=Rt);return mt=()=>St(),rt.signal.addEventListener("abort",mt),Promise.race([vt({request:rt,params:it.params,context:ht.requestContext}),wt])};try{let vt=it.route[nt];if(it.route.lazy)if(vt){let St,wt=await Promise.all([gt(vt).catch(Et=>{St=Et}),loadLazyRouteModule(it.route,ct,lt)]);if(St)throw St;pt=wt[0]}else if(await loadLazyRouteModule(it.route,ct,lt),vt=it.route[nt],vt)pt=await gt(vt);else if(nt==="action"){let St=new URL(rt.url),wt=St.pathname+St.search;throw getInternalRouterError(405,{method:rt.method,pathname:wt,routeId:it.route.id})}else return{type:ResultType.data,data:void 0};else if(vt)pt=await gt(vt);else{let St=new URL(rt.url),wt=St.pathname+St.search;throw getInternalRouterError(404,{pathname:wt})}invariant$1(pt!==void 0,"You defined "+(nt==="action"?"an action":"a loader")+" for route "+('"'+it.route.id+"\" but didn't return anything from your `"+nt+"` ")+"function. Please return a value or `null`.")}catch(vt){ft=ResultType.error,pt=vt}finally{mt&&rt.signal.removeEventListener("abort",mt)}if(isResponse(pt)){let vt=pt.status;if(redirectStatusCodes.has(vt)){let wt=pt.headers.get("Location");if(invariant$1(wt,"Redirects returned/thrown from loaders/actions must have a Location header"),!ABSOLUTE_URL_REGEX$1.test(wt))wt=normalizeTo(new URL(rt.url),st.slice(0,st.indexOf(it)+1),ut,!0,wt,dt);else if(!ht.isStaticRequest){let Et=new URL(rt.url),Rt=wt.startsWith("//")?new URL(Et.protocol+wt):new URL(wt),Tt=stripBasename(Rt.pathname,ut)!=null;Rt.origin===Et.origin&&Tt&&(wt=Rt.pathname+Rt.search+Rt.hash)}if(ht.isStaticRequest)throw pt.headers.set("Location",wt),pt;return{type:ResultType.redirect,status:vt,location:wt,revalidate:pt.headers.get("X-Remix-Revalidate")!==null,reloadDocument:pt.headers.get("X-Remix-Reload-Document")!==null}}if(ht.isRouteRequest)throw{type:ft===ResultType.error?ResultType.error:ResultType.data,response:pt};let St;try{let wt=pt.headers.get("Content-Type");wt&&/\bapplication\/json\b/.test(wt)?pt.body==null?St=null:St=await pt.json():St=await pt.text()}catch(wt){return{type:ResultType.error,error:wt}}return ft===ResultType.error?{type:ft,error:new ErrorResponseImpl(vt,pt.statusText,St),headers:pt.headers}:{type:ResultType.data,data:St,statusCode:pt.status,headers:pt.headers}}if(ft===ResultType.error)return{type:ft,error:pt};if(isDeferredData(pt)){var xt,yt;return{type:ResultType.deferred,deferredData:pt,statusCode:(xt=pt.init)==null?void 0:xt.status,headers:((yt=pt.init)==null?void 0:yt.headers)&&new Headers(pt.init.headers)}}return{type:ResultType.data,data:pt}}function createClientSideRequest(nt,rt,it,st){let lt=nt.createURL(stripHashFromPath(rt)).toString(),ct={signal:it};if(st&&isMutationMethod(st.formMethod)){let{formMethod:ut,formEncType:dt}=st;ct.method=ut.toUpperCase(),dt==="application/json"?(ct.headers=new Headers({"Content-Type":dt}),ct.body=JSON.stringify(st.json)):dt==="text/plain"?ct.body=st.text:dt==="application/x-www-form-urlencoded"&&st.formData?ct.body=convertFormDataToSearchParams(st.formData):ct.body=st.formData}return new Request(lt,ct)}function convertFormDataToSearchParams(nt){let rt=new URLSearchParams;for(let[it,st]of nt.entries())rt.append(it,typeof st=="string"?st:st.name);return rt}function convertSearchParamsToFormData(nt){let rt=new FormData;for(let[it,st]of nt.entries())rt.append(it,st);return rt}function processRouteLoaderData(nt,rt,it,st,lt){let ct={},ut=null,dt,ht=!1,ft={};return it.forEach((pt,mt)=>{let gt=rt[mt].route.id;if(invariant$1(!isRedirectResult(pt),"Cannot handle redirect results in processLoaderData"),isErrorResult(pt)){let xt=findNearestBoundary(nt,gt),yt=pt.error;st&&(yt=Object.values(st)[0],st=void 0),ut=ut||{},ut[xt.route.id]==null&&(ut[xt.route.id]=yt),ct[gt]=void 0,ht||(ht=!0,dt=isRouteErrorResponse(pt.error)?pt.error.status:500),pt.headers&&(ft[gt]=pt.headers)}else isDeferredResult(pt)?(lt.set(gt,pt.deferredData),ct[gt]=pt.deferredData.data):ct[gt]=pt.data,pt.statusCode!=null&&pt.statusCode!==200&&!ht&&(dt=pt.statusCode),pt.headers&&(ft[gt]=pt.headers)}),st&&(ut=st,ct[Object.keys(st)[0]]=void 0),{loaderData:ct,errors:ut,statusCode:dt||200,loaderHeaders:ft}}function processLoaderData(nt,rt,it,st,lt,ct,ut,dt){let{loaderData:ht,errors:ft}=processRouteLoaderData(rt,it,st,lt,dt);for(let pt=0;pt<ct.length;pt++){let{key:mt,match:gt,controller:xt}=ct[pt];invariant$1(ut!==void 0&&ut[pt]!==void 0,"Did not find corresponding fetcher result");let yt=ut[pt];if(!(xt&&xt.signal.aborted))if(isErrorResult(yt)){let vt=findNearestBoundary(nt.matches,gt==null?void 0:gt.route.id);ft&&ft[vt.route.id]||(ft=_extends$5({},ft,{[vt.route.id]:yt.error})),nt.fetchers.delete(mt)}else if(isRedirectResult(yt))invariant$1(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(yt))invariant$1(!1,"Unhandled fetcher deferred data");else{let vt=getDoneFetcher(yt.data);nt.fetchers.set(mt,vt)}}return{loaderData:ht,errors:ft}}function mergeLoaderData(nt,rt,it,st){let lt=_extends$5({},rt);for(let ct of it){let ut=ct.route.id;if(rt.hasOwnProperty(ut)?rt[ut]!==void 0&&(lt[ut]=rt[ut]):nt[ut]!==void 0&&ct.route.loader&&(lt[ut]=nt[ut]),st&&st.hasOwnProperty(ut))break}return lt}function findNearestBoundary(nt,rt){return(rt?nt.slice(0,nt.findIndex(st=>st.route.id===rt)+1):[...nt]).reverse().find(st=>st.route.hasErrorBoundary===!0)||nt[0]}function getShortCircuitMatches(nt){let rt=nt.length===1?nt[0]:nt.find(it=>it.index||!it.path||it.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:rt}],route:rt}}function getInternalRouterError(nt,rt){let{pathname:it,routeId:st,method:lt,type:ct}=rt===void 0?{}:rt,ut="Unknown Server Error",dt="Unknown @remix-run/router error";return nt===400?(ut="Bad Request",lt&&it&&st?dt="You made a "+lt+' request to "'+it+'" but '+('did not provide a `loader` for route "'+st+'", ')+"so there is no way to handle the request.":ct==="defer-action"?dt="defer() is not supported in actions":ct==="invalid-body"&&(dt="Unable to encode submission body")):nt===403?(ut="Forbidden",dt='Route "'+st+'" does not match URL "'+it+'"'):nt===404?(ut="Not Found",dt='No route matches URL "'+it+'"'):nt===405&&(ut="Method Not Allowed",lt&&it&&st?dt="You made a "+lt.toUpperCase()+' request to "'+it+'" but '+('did not provide an `action` for route "'+st+'", ')+"so there is no way to handle the request.":lt&&(dt='Invalid request method "'+lt.toUpperCase()+'"')),new ErrorResponseImpl(nt||500,ut,new Error(dt),!0)}function findRedirect(nt){for(let rt=nt.length-1;rt>=0;rt--){let it=nt[rt];if(isRedirectResult(it))return{result:it,idx:rt}}}function stripHashFromPath(nt){let rt=typeof nt=="string"?parsePath(nt):nt;return createPath(_extends$5({},rt,{hash:""}))}function isHashChangeOnly(nt,rt){return nt.pathname!==rt.pathname||nt.search!==rt.search?!1:nt.hash===""?rt.hash!=="":nt.hash===rt.hash?!0:rt.hash!==""}function isDeferredResult(nt){return nt.type===ResultType.deferred}function isErrorResult(nt){return nt.type===ResultType.error}function isRedirectResult(nt){return(nt&&nt.type)===ResultType.redirect}function isDeferredData(nt){let rt=nt;return rt&&typeof rt=="object"&&typeof rt.data=="object"&&typeof rt.subscribe=="function"&&typeof rt.cancel=="function"&&typeof rt.resolveData=="function"}function isResponse(nt){return nt!=null&&typeof nt.status=="number"&&typeof nt.statusText=="string"&&typeof nt.headers=="object"&&typeof nt.body<"u"}function isValidMethod(nt){return validRequestMethods.has(nt.toLowerCase())}function isMutationMethod(nt){return validMutationMethods.has(nt.toLowerCase())}async function resolveDeferredResults(nt,rt,it,st,lt,ct){for(let ut=0;ut<it.length;ut++){let dt=it[ut],ht=rt[ut];if(!ht)continue;let ft=nt.find(mt=>mt.route.id===ht.route.id),pt=ft!=null&&!isNewRouteInstance(ft,ht)&&(ct&&ct[ht.route.id])!==void 0;if(isDeferredResult(dt)&&(lt||pt)){let mt=st[ut];invariant$1(mt,"Expected an AbortSignal for revalidating fetcher deferred result"),await resolveDeferredData(dt,mt,lt).then(gt=>{gt&&(it[ut]=gt||it[ut])})}}}async function resolveDeferredData(nt,rt,it){if(it===void 0&&(it=!1),!await nt.deferredData.resolveData(rt)){if(it)try{return{type:ResultType.data,data:nt.deferredData.unwrappedData}}catch(lt){return{type:ResultType.error,error:lt}}return{type:ResultType.data,data:nt.deferredData.data}}}function hasNakedIndexQuery(nt){return new URLSearchParams(nt).getAll("index").some(rt=>rt==="")}function getTargetMatch(nt,rt){let it=typeof rt=="string"?parsePath(rt).search:rt.search;if(nt[nt.length-1].route.index&&hasNakedIndexQuery(it||""))return nt[nt.length-1];let st=getPathContributingMatches(nt);return st[st.length-1]}function getSubmissionFromNavigation(nt){let{formMethod:rt,formAction:it,formEncType:st,text:lt,formData:ct,json:ut}=nt;if(!(!rt||!it||!st)){if(lt!=null)return{formMethod:rt,formAction:it,formEncType:st,formData:void 0,json:void 0,text:lt};if(ct!=null)return{formMethod:rt,formAction:it,formEncType:st,formData:ct,json:void 0,text:void 0};if(ut!==void 0)return{formMethod:rt,formAction:it,formEncType:st,formData:void 0,json:ut,text:void 0}}}function getLoadingNavigation(nt,rt){return rt?{state:"loading",location:nt,formMethod:rt.formMethod,formAction:rt.formAction,formEncType:rt.formEncType,formData:rt.formData,json:rt.json,text:rt.text}:{state:"loading",location:nt,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(nt,rt){return{state:"submitting",location:nt,formMethod:rt.formMethod,formAction:rt.formAction,formEncType:rt.formEncType,formData:rt.formData,json:rt.json,text:rt.text}}function getLoadingFetcher(nt,rt){return nt?{state:"loading",formMethod:nt.formMethod,formAction:nt.formAction,formEncType:nt.formEncType,formData:nt.formData,json:nt.json,text:nt.text,data:rt}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:rt}}function getSubmittingFetcher(nt,rt){return{state:"submitting",formMethod:nt.formMethod,formAction:nt.formAction,formEncType:nt.formEncType,formData:nt.formData,json:nt.json,text:nt.text,data:rt?rt.data:void 0}}function getDoneFetcher(nt){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:nt}}function restoreAppliedTransitions(nt,rt){try{let it=nt.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(it){let st=JSON.parse(it);for(let[lt,ct]of Object.entries(st||{}))ct&&Array.isArray(ct)&&rt.set(lt,new Set(ct||[]))}}catch{}}function persistAppliedTransitions(nt,rt){if(rt.size>0){let it={};for(let[st,lt]of rt)it[st]=[...lt];try{nt.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(it))}catch(st){warning$1(!1,"Failed to save applied view transitions in sessionStorage ("+st+").")}}}/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt];for(var st in it)Object.prototype.hasOwnProperty.call(it,st)&&(nt[st]=it[st])}return nt},_extends$4.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(nt,rt){let{relative:it}=rt===void 0?{}:rt;useInRouterContext()||invariant$1(!1);let{basename:st,navigator:lt}=reactExports.useContext(NavigationContext),{hash:ct,pathname:ut,search:dt}=useResolvedPath(nt,{relative:it}),ht=ut;return st!=="/"&&(ht=ut==="/"?st:joinPaths([st,ut])),lt.createHref({pathname:ht,search:dt,hash:ct})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$2(nt){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(nt)}function useNavigate(){let{isDataRoute:nt}=reactExports.useContext(RouteContext);return nt?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let nt=reactExports.useContext(DataRouterContext),{basename:rt,future:it,navigator:st}=reactExports.useContext(NavigationContext),{matches:lt}=reactExports.useContext(RouteContext),{pathname:ct}=useLocation(),ut=JSON.stringify(getResolveToMatches(lt,it.v7_relativeSplatPath)),dt=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{dt.current=!0}),reactExports.useCallback(function(ft,pt){if(pt===void 0&&(pt={}),!dt.current)return;if(typeof ft=="number"){st.go(ft);return}let mt=resolveTo(ft,JSON.parse(ut),ct,pt.relative==="path");nt==null&&rt!=="/"&&(mt.pathname=mt.pathname==="/"?rt:joinPaths([rt,mt.pathname])),(pt.replace?st.replace:st.push)(mt,pt.state,pt)},[rt,st,ut,ct,nt])}const OutletContext=reactExports.createContext(null);function useOutlet(nt){let rt=reactExports.useContext(RouteContext).outlet;return rt&&reactExports.createElement(OutletContext.Provider,{value:nt},rt)}function useParams(){let{matches:nt}=reactExports.useContext(RouteContext),rt=nt[nt.length-1];return rt?rt.params:{}}function useResolvedPath(nt,rt){let{relative:it}=rt===void 0?{}:rt,{future:st}=reactExports.useContext(NavigationContext),{matches:lt}=reactExports.useContext(RouteContext),{pathname:ct}=useLocation(),ut=JSON.stringify(getResolveToMatches(lt,st.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(nt,JSON.parse(ut),ct,it==="path"),[nt,ut,ct,it])}function useRoutesImpl(nt,rt,it,st){useInRouterContext()||invariant$1(!1);let{navigator:lt}=reactExports.useContext(NavigationContext),{matches:ct}=reactExports.useContext(RouteContext),ut=ct[ct.length-1],dt=ut?ut.params:{};ut&&ut.pathname;let ht=ut?ut.pathnameBase:"/";ut&&ut.route;let ft=useLocation(),pt;if(rt){var mt;let St=typeof rt=="string"?parsePath(rt):rt;ht==="/"||(mt=St.pathname)!=null&&mt.startsWith(ht)||invariant$1(!1),pt=St}else pt=ft;let gt=pt.pathname||"/",xt=ht==="/"?gt:gt.slice(ht.length)||"/",yt=matchRoutes(nt,{pathname:xt}),vt=_renderMatches(yt&&yt.map(St=>Object.assign({},St,{params:Object.assign({},dt,St.params),pathname:joinPaths([ht,lt.encodeLocation?lt.encodeLocation(St.pathname).pathname:St.pathname]),pathnameBase:St.pathnameBase==="/"?ht:joinPaths([ht,lt.encodeLocation?lt.encodeLocation(St.pathnameBase).pathname:St.pathnameBase])})),ct,it,st);return rt&&vt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$4({pathname:"/",search:"",hash:"",state:null,key:"default"},pt),navigationType:Action.Pop}},vt):vt}function DefaultErrorComponent(){let nt=useRouteError(),rt=isRouteErrorResponse(nt)?nt.status+" "+nt.statusText:nt instanceof Error?nt.message:JSON.stringify(nt),it=nt instanceof Error?nt.stack:null,lt={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},rt),it?reactExports.createElement("pre",{style:lt},it):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(rt){super(rt),this.state={location:rt.location,revalidation:rt.revalidation,error:rt.error}}static getDerivedStateFromError(rt){return{error:rt}}static getDerivedStateFromProps(rt,it){return it.location!==rt.location||it.revalidation!=="idle"&&rt.revalidation==="idle"?{error:rt.error,location:rt.location,revalidation:rt.revalidation}:{error:rt.error!==void 0?rt.error:it.error,location:it.location,revalidation:rt.revalidation||it.revalidation}}componentDidCatch(rt,it){console.error("React Router caught the following error during render",rt,it)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(nt){let{routeContext:rt,match:it,children:st}=nt,lt=reactExports.useContext(DataRouterContext);return lt&&lt.static&&lt.staticContext&&(it.route.errorElement||it.route.ErrorBoundary)&&(lt.staticContext._deepestRenderedBoundaryId=it.route.id),reactExports.createElement(RouteContext.Provider,{value:rt},st)}function _renderMatches(nt,rt,it,st){var lt;if(rt===void 0&&(rt=[]),it===void 0&&(it=null),st===void 0&&(st=null),nt==null){var ct;if((ct=it)!=null&&ct.errors)nt=it.matches;else return null}let ut=nt,dt=(lt=it)==null?void 0:lt.errors;if(dt!=null){let pt=ut.findIndex(mt=>mt.route.id&&(dt==null?void 0:dt[mt.route.id]));pt>=0||invariant$1(!1),ut=ut.slice(0,Math.min(ut.length,pt+1))}let ht=!1,ft=-1;if(it&&st&&st.v7_partialHydration)for(let pt=0;pt<ut.length;pt++){let mt=ut[pt];if((mt.route.HydrateFallback||mt.route.hydrateFallbackElement)&&(ft=pt),mt.route.id){let{loaderData:gt,errors:xt}=it,yt=mt.route.loader&&gt[mt.route.id]===void 0&&(!xt||xt[mt.route.id]===void 0);if(mt.route.lazy||yt){ht=!0,ft>=0?ut=ut.slice(0,ft+1):ut=[ut[0]];break}}}return ut.reduceRight((pt,mt,gt)=>{let xt,yt=!1,vt=null,St=null;it&&(xt=dt&&mt.route.id?dt[mt.route.id]:void 0,vt=mt.route.errorElement||defaultErrorElement,ht&&(ft<0&&gt===0?(warningOnce("route-fallback",!1),yt=!0,St=null):ft===gt&&(yt=!0,St=mt.route.hydrateFallbackElement||null)));let wt=rt.concat(ut.slice(0,gt+1)),Et=()=>{let Rt;return xt?Rt=vt:yt?Rt=St:mt.route.Component?Rt=reactExports.createElement(mt.route.Component,null):mt.route.element?Rt=mt.route.element:Rt=pt,reactExports.createElement(RenderedRoute,{match:mt,routeContext:{outlet:pt,matches:wt,isDataRoute:it!=null},children:Rt})};return it&&(mt.route.ErrorBoundary||mt.route.errorElement||gt===0)?reactExports.createElement(RenderErrorBoundary,{location:it.location,revalidation:it.revalidation,component:vt,error:xt,children:Et(),routeContext:{outlet:null,matches:wt,isDataRoute:!0}}):Et()},null)}var DataRouterHook$1=function(nt){return nt.UseBlocker="useBlocker",nt.UseRevalidator="useRevalidator",nt.UseNavigateStable="useNavigate",nt}(DataRouterHook$1||{}),DataRouterStateHook$1=function(nt){return nt.UseBlocker="useBlocker",nt.UseLoaderData="useLoaderData",nt.UseActionData="useActionData",nt.UseRouteError="useRouteError",nt.UseNavigation="useNavigation",nt.UseRouteLoaderData="useRouteLoaderData",nt.UseMatches="useMatches",nt.UseRevalidator="useRevalidator",nt.UseNavigateStable="useNavigate",nt.UseRouteId="useRouteId",nt}(DataRouterStateHook$1||{});function useDataRouterContext$1(nt){let rt=reactExports.useContext(DataRouterContext);return rt||invariant$1(!1),rt}function useDataRouterState(nt){let rt=reactExports.useContext(DataRouterStateContext);return rt||invariant$1(!1),rt}function useRouteContext(nt){let rt=reactExports.useContext(RouteContext);return rt||invariant$1(!1),rt}function useCurrentRouteId(nt){let rt=useRouteContext(),it=rt.matches[rt.matches.length-1];return it.route.id||invariant$1(!1),it.route.id}function useRouteError(){var nt;let rt=reactExports.useContext(RouteErrorContext),it=useDataRouterState(DataRouterStateHook$1.UseRouteError),st=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return rt!==void 0?rt:(nt=it.errors)==null?void 0:nt[st]}function useNavigateStable(){let{router:nt}=useDataRouterContext$1(DataRouterHook$1.UseNavigateStable),rt=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),it=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{it.current=!0}),reactExports.useCallback(function(lt,ct){ct===void 0&&(ct={}),it.current&&(typeof lt=="number"?nt.navigate(lt):nt.navigate(lt,_extends$4({fromRouteId:rt},ct)))},[nt,rt])}const alreadyWarned={};function warningOnce(nt,rt,it){!rt&&!alreadyWarned[nt]&&(alreadyWarned[nt]=!0)}function Outlet(nt){return useOutlet(nt.context)}function Router(nt){let{basename:rt="/",children:it=null,location:st,navigationType:lt=Action.Pop,navigator:ct,static:ut=!1,future:dt}=nt;useInRouterContext()&&invariant$1(!1);let ht=rt.replace(/^\/*/,"/"),ft=reactExports.useMemo(()=>({basename:ht,navigator:ct,static:ut,future:_extends$4({v7_relativeSplatPath:!1},dt)}),[ht,dt,ct,ut]);typeof st=="string"&&(st=parsePath(st));let{pathname:pt="/",search:mt="",hash:gt="",state:xt=null,key:yt="default"}=st,vt=reactExports.useMemo(()=>{let St=stripBasename(pt,ht);return St==null?null:{location:{pathname:St,search:mt,hash:gt,state:xt,key:yt},navigationType:lt}},[ht,pt,mt,gt,xt,yt,lt]);return vt==null?null:reactExports.createElement(NavigationContext.Provider,{value:ft},reactExports.createElement(LocationContext.Provider,{children:it,value:vt}))}new Promise(()=>{});function mapRouteProperties(nt){let rt={hasErrorBoundary:nt.ErrorBoundary!=null||nt.errorElement!=null};return nt.Component&&Object.assign(rt,{element:reactExports.createElement(nt.Component),Component:void 0}),nt.HydrateFallback&&Object.assign(rt,{hydrateFallbackElement:reactExports.createElement(nt.HydrateFallback),HydrateFallback:void 0}),nt.ErrorBoundary&&Object.assign(rt,{errorElement:reactExports.createElement(nt.ErrorBoundary),ErrorBoundary:void 0}),rt}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt];for(var st in it)Object.prototype.hasOwnProperty.call(it,st)&&(nt[st]=it[st])}return nt},_extends$3.apply(this,arguments)}function _objectWithoutPropertiesLoose$2(nt,rt){if(nt==null)return{};var it={},st=Object.keys(nt),lt,ct;for(ct=0;ct<st.length;ct++)lt=st[ct],!(rt.indexOf(lt)>=0)&&(it[lt]=nt[lt]);return it}function isModifiedEvent(nt){return!!(nt.metaKey||nt.altKey||nt.ctrlKey||nt.shiftKey)}function shouldProcessLinkClick(nt,rt){return nt.button===0&&(!rt||rt==="_self")&&!isModifiedEvent(nt)}const _excluded$3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_excluded2=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"];function createBrowserRouter(nt,rt){return createRouter({basename:rt==null?void 0:rt.basename,future:_extends$3({},rt==null?void 0:rt.future,{v7_prependBasename:!0}),history:createBrowserHistory({window:rt==null?void 0:rt.window}),hydrationData:(rt==null?void 0:rt.hydrationData)||parseHydrationData(),routes:nt,mapRouteProperties,window:rt==null?void 0:rt.window}).initialize()}function parseHydrationData(){var nt;let rt=(nt=window)==null?void 0:nt.__staticRouterHydrationData;return rt&&rt.errors&&(rt=_extends$3({},rt,{errors:deserializeErrors(rt.errors)})),rt}function deserializeErrors(nt){if(!nt)return null;let rt=Object.entries(nt),it={};for(let[st,lt]of rt)if(lt&&lt.__type==="RouteErrorResponse")it[st]=new ErrorResponseImpl(lt.status,lt.statusText,lt.data,lt.internal===!0);else if(lt&&lt.__type==="Error"){if(lt.__subType){let ct=window[lt.__subType];if(typeof ct=="function")try{let ut=new ct(lt.message);ut.stack="",it[st]=ut}catch{}}if(it[st]==null){let ct=new Error(lt.message);ct.stack="",it[st]=ct}}else it[st]=lt;return it}const ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),FetchersContext=reactExports.createContext(new Map),START_TRANSITION="startTransition",startTransitionImpl=e$3[START_TRANSITION],FLUSH_SYNC="flushSync",flushSyncImpl=ReactDOM[FLUSH_SYNC];function startTransitionSafe(nt){startTransitionImpl?startTransitionImpl(nt):nt()}function flushSyncSafe(nt){flushSyncImpl?flushSyncImpl(nt):nt()}class Deferred{constructor(){this.status="pending",this.promise=new Promise((rt,it)=>{this.resolve=st=>{this.status==="pending"&&(this.status="resolved",rt(st))},this.reject=st=>{this.status==="pending"&&(this.status="rejected",it(st))}})}}function RouterProvider(nt){let{fallbackElement:rt,router:it,future:st}=nt,[lt,ct]=reactExports.useState(it.state),[ut,dt]=reactExports.useState(),[ht,ft]=reactExports.useState({isTransitioning:!1}),[pt,mt]=reactExports.useState(),[gt,xt]=reactExports.useState(),[yt,vt]=reactExports.useState(),St=reactExports.useRef(new Map),{v7_startTransition:wt}=st||{},Et=reactExports.useCallback(Dt=>{wt?startTransitionSafe(Dt):Dt()},[wt]),Rt=reactExports.useCallback((Dt,jt)=>{let{deletedFetchers:Ft,unstable_flushSync:Lt,unstable_viewTransitionOpts:Mt}=jt;Ft.forEach(Nt=>St.current.delete(Nt)),Dt.fetchers.forEach((Nt,$t)=>{Nt.data!==void 0&&St.current.set($t,Nt.data)});let Ot=it.window==null||typeof it.window.document.startViewTransition!="function";if(!Mt||Ot){Lt?flushSyncSafe(()=>ct(Dt)):Et(()=>ct(Dt));return}if(Lt){flushSyncSafe(()=>{gt&&(pt&&pt.resolve(),gt.skipTransition()),ft({isTransitioning:!0,flushSync:!0,currentLocation:Mt.currentLocation,nextLocation:Mt.nextLocation})});let Nt=it.window.document.startViewTransition(()=>{flushSyncSafe(()=>ct(Dt))});Nt.finished.finally(()=>{flushSyncSafe(()=>{mt(void 0),xt(void 0),dt(void 0),ft({isTransitioning:!1})})}),flushSyncSafe(()=>xt(Nt));return}gt?(pt&&pt.resolve(),gt.skipTransition(),vt({state:Dt,currentLocation:Mt.currentLocation,nextLocation:Mt.nextLocation})):(dt(Dt),ft({isTransitioning:!0,flushSync:!1,currentLocation:Mt.currentLocation,nextLocation:Mt.nextLocation}))},[it.window,gt,pt,St,Et]);reactExports.useLayoutEffect(()=>it.subscribe(Rt),[it,Rt]),reactExports.useEffect(()=>{ht.isTransitioning&&!ht.flushSync&&mt(new Deferred)},[ht]),reactExports.useEffect(()=>{if(pt&&ut&&it.window){let Dt=ut,jt=pt.promise,Ft=it.window.document.startViewTransition(async()=>{Et(()=>ct(Dt)),await jt});Ft.finished.finally(()=>{mt(void 0),xt(void 0),dt(void 0),ft({isTransitioning:!1})}),xt(Ft)}},[Et,ut,pt,it.window]),reactExports.useEffect(()=>{pt&&ut&&lt.location.key===ut.location.key&&pt.resolve()},[pt,gt,lt.location,ut]),reactExports.useEffect(()=>{!ht.isTransitioning&&yt&&(dt(yt.state),ft({isTransitioning:!0,flushSync:!1,currentLocation:yt.currentLocation,nextLocation:yt.nextLocation}),vt(void 0))},[ht.isTransitioning,yt]),reactExports.useEffect(()=>{},[]);let Tt=reactExports.useMemo(()=>({createHref:it.createHref,encodeLocation:it.encodeLocation,go:Dt=>it.navigate(Dt),push:(Dt,jt,Ft)=>it.navigate(Dt,{state:jt,preventScrollReset:Ft==null?void 0:Ft.preventScrollReset}),replace:(Dt,jt,Ft)=>it.navigate(Dt,{replace:!0,state:jt,preventScrollReset:Ft==null?void 0:Ft.preventScrollReset})}),[it]),It=it.basename||"/",At=reactExports.useMemo(()=>({router:it,navigator:Tt,static:!1,basename:It}),[it,Tt,It]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:At},reactExports.createElement(DataRouterStateContext.Provider,{value:lt},reactExports.createElement(FetchersContext.Provider,{value:St.current},reactExports.createElement(ViewTransitionContext.Provider,{value:ht},reactExports.createElement(Router,{basename:It,location:lt.location,navigationType:lt.historyAction,navigator:Tt,future:{v7_relativeSplatPath:it.future.v7_relativeSplatPath}},lt.initialized||it.future.v7_partialHydration?reactExports.createElement(DataRoutes,{routes:it.routes,future:it.future,state:lt}):rt))))),null)}function DataRoutes(nt){let{routes:rt,future:it,state:st}=nt;return useRoutesImpl(rt,void 0,st,it)}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(rt,it){let{onClick:st,relative:lt,reloadDocument:ct,replace:ut,state:dt,target:ht,to:ft,preventScrollReset:pt,unstable_viewTransition:mt}=rt,gt=_objectWithoutPropertiesLoose$2(rt,_excluded$3),{basename:xt}=reactExports.useContext(NavigationContext),yt,vt=!1;if(typeof ft=="string"&&ABSOLUTE_URL_REGEX.test(ft)&&(yt=ft,isBrowser))try{let Rt=new URL(window.location.href),Tt=ft.startsWith("//")?new URL(Rt.protocol+ft):new URL(ft),It=stripBasename(Tt.pathname,xt);Tt.origin===Rt.origin&&It!=null?ft=It+Tt.search+Tt.hash:vt=!0}catch{}let St=useHref(ft,{relative:lt}),wt=useLinkClickHandler(ft,{replace:ut,state:dt,target:ht,preventScrollReset:pt,relative:lt,unstable_viewTransition:mt});function Et(Rt){st&&st(Rt),Rt.defaultPrevented||wt(Rt)}return reactExports.createElement("a",_extends$3({},gt,{href:yt||St,onClick:vt||ct?st:Et,ref:it,target:ht}))}),NavLink=reactExports.forwardRef(function(rt,it){let{"aria-current":st="page",caseSensitive:lt=!1,className:ct="",end:ut=!1,style:dt,to:ht,unstable_viewTransition:ft,children:pt}=rt,mt=_objectWithoutPropertiesLoose$2(rt,_excluded2),gt=useResolvedPath(ht,{relative:mt.relative}),xt=useLocation(),yt=reactExports.useContext(DataRouterStateContext),{navigator:vt,basename:St}=reactExports.useContext(NavigationContext),wt=yt!=null&&useViewTransitionState(gt)&&ft===!0,Et=vt.encodeLocation?vt.encodeLocation(gt).pathname:gt.pathname,Rt=xt.pathname,Tt=yt&&yt.navigation&&yt.navigation.location?yt.navigation.location.pathname:null;lt||(Rt=Rt.toLowerCase(),Tt=Tt?Tt.toLowerCase():null,Et=Et.toLowerCase()),Tt&&St&&(Tt=stripBasename(Tt,St)||Tt);const It=Et!=="/"&&Et.endsWith("/")?Et.length-1:Et.length;let At=Rt===Et||!ut&&Rt.startsWith(Et)&&Rt.charAt(It)==="/",Dt=Tt!=null&&(Tt===Et||!ut&&Tt.startsWith(Et)&&Tt.charAt(Et.length)==="/"),jt={isActive:At,isPending:Dt,isTransitioning:wt},Ft=At?st:void 0,Lt;typeof ct=="function"?Lt=ct(jt):Lt=[ct,At?"active":null,Dt?"pending":null,wt?"transitioning":null].filter(Boolean).join(" ");let Mt=typeof dt=="function"?dt(jt):dt;return reactExports.createElement(Link,_extends$3({},mt,{"aria-current":Ft,className:Lt,ref:it,style:Mt,to:ht,unstable_viewTransition:ft}),typeof pt=="function"?pt(jt):pt)});var DataRouterHook;(function(nt){nt.UseScrollRestoration="useScrollRestoration",nt.UseSubmit="useSubmit",nt.UseSubmitFetcher="useSubmitFetcher",nt.UseFetcher="useFetcher",nt.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(nt){nt.UseFetcher="useFetcher",nt.UseFetchers="useFetchers",nt.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useDataRouterContext(nt){let rt=reactExports.useContext(DataRouterContext);return rt||invariant$1(!1),rt}function useLinkClickHandler(nt,rt){let{target:it,replace:st,state:lt,preventScrollReset:ct,relative:ut,unstable_viewTransition:dt}=rt===void 0?{}:rt,ht=useNavigate(),ft=useLocation(),pt=useResolvedPath(nt,{relative:ut});return reactExports.useCallback(mt=>{if(shouldProcessLinkClick(mt,it)){mt.preventDefault();let gt=st!==void 0?st:createPath(ft)===createPath(pt);ht(nt,{replace:gt,state:lt,preventScrollReset:ct,relative:ut,unstable_viewTransition:dt})}},[ft,ht,pt,st,lt,it,nt,ct,ut,dt])}function useViewTransitionState(nt,rt){rt===void 0&&(rt={});let it=reactExports.useContext(ViewTransitionContext);it==null&&invariant$1(!1);let{basename:st}=useDataRouterContext(DataRouterHook.useViewTransitionState),lt=useResolvedPath(nt,{relative:rt.relative});if(!it.isTransitioning)return!1;let ct=stripBasename(it.currentLocation.pathname,st)||it.currentLocation.pathname,ut=stripBasename(it.nextLocation.pathname,st)||it.nextLocation.pathname;return matchPath(lt.pathname,ut)!=null||matchPath(lt.pathname,ct)!=null}function ArrowPathIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"}))}const ForwardRef$D=reactExports.forwardRef(ArrowPathIcon),ArrowPathIcon$1=ForwardRef$D;function CalendarDaysIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{d:"M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"}),reactExports.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))}const ForwardRef$C=reactExports.forwardRef(CalendarDaysIcon$2),CalendarDaysIcon$3=ForwardRef$C;function CalendarIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))}const ForwardRef$B=reactExports.forwardRef(CalendarIcon),CalendarIcon$1=ForwardRef$B;function CheckCircleIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const ForwardRef$A=reactExports.forwardRef(CheckCircleIcon),CheckCircleIcon$1=ForwardRef$A;function CheckIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"}))}const ForwardRef$z=reactExports.forwardRef(CheckIcon),CheckIcon$1=ForwardRef$z;function ChevronDownIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z",clipRule:"evenodd"}))}const ForwardRef$y=reactExports.forwardRef(ChevronDownIcon$2),ChevronDownIcon$3=ForwardRef$y;function ChevronLeftIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z",clipRule:"evenodd"}))}const ForwardRef$x=reactExports.forwardRef(ChevronLeftIcon),ChevronLeftIcon$1=ForwardRef$x;function ChevronRightIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z",clipRule:"evenodd"}))}const ForwardRef$w=reactExports.forwardRef(ChevronRightIcon$2),ChevronRightIcon$3=ForwardRef$w;function ClipboardIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M10.5 3A1.501 1.501 0 0 0 9 4.5h6A1.5 1.5 0 0 0 13.5 3h-3Zm-2.693.178A3 3 0 0 1 10.5 1.5h3a3 3 0 0 1 2.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 0 1-3 3H6.75a3 3 0 0 1-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15Z",clipRule:"evenodd"}))}const ForwardRef$v=reactExports.forwardRef(ClipboardIcon),ClipboardIcon$1=ForwardRef$v;function Cog6ToothIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 0 0-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 0 0-2.282.819l-.922 1.597a1.875 1.875 0 0 0 .432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 0 0 0 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 0 0-.432 2.385l.922 1.597a1.875 1.875 0 0 0 2.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 0 0 2.28-.819l.923-1.597a1.875 1.875 0 0 0-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 0 0 0-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 0 0-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 0 0-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 0 0-1.85-1.567h-1.843ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z",clipRule:"evenodd"}))}const ForwardRef$u=reactExports.forwardRef(Cog6ToothIcon$2),SolidCog6ToothIcon=ForwardRef$u;function EllipsisHorizontalIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M4.5 12a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm6 0a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm6 0a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z",clipRule:"evenodd"}))}const ForwardRef$t=reactExports.forwardRef(EllipsisHorizontalIcon),EllipsisHorizontalIcon$1=ForwardRef$t;function ExclamationTriangleIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const ForwardRef$s=reactExports.forwardRef(ExclamationTriangleIcon$2),ExclamationTriangleIcon$3=ForwardRef$s;function FlagIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M3 2.25a.75.75 0 0 1 .75.75v.54l1.838-.46a9.75 9.75 0 0 1 6.725.738l.108.054A8.25 8.25 0 0 0 18 4.524l3.11-.732a.75.75 0 0 1 .917.81 47.784 47.784 0 0 0 .005 10.337.75.75 0 0 1-.574.812l-3.114.733a9.75 9.75 0 0 1-6.594-.77l-.108-.054a8.25 8.25 0 0 0-5.69-.625l-2.202.55V21a.75.75 0 0 1-1.5 0V3A.75.75 0 0 1 3 2.25Z",clipRule:"evenodd"}))}const ForwardRef$r=reactExports.forwardRef(FlagIcon),FlagIcon$1=ForwardRef$r;function HomeIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),reactExports.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))}const ForwardRef$q=reactExports.forwardRef(HomeIcon$2),SolidHomeIcon=ForwardRef$q;function LockClosedIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"}))}const ForwardRef$p=reactExports.forwardRef(LockClosedIcon$2),LockClosedIcon$3=ForwardRef$p;function MagnifyingGlassIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z",clipRule:"evenodd"}))}const ForwardRef$o=reactExports.forwardRef(MagnifyingGlassIcon),MagnifyingGlassIcon$1=ForwardRef$o;function PaperAirplaneIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"}))}const ForwardRef$n=reactExports.forwardRef(PaperAirplaneIcon),PaperAirplaneIcon$1=ForwardRef$n;function PencilSquareIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"}),reactExports.createElement("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"}))}const ForwardRef$m=reactExports.forwardRef(PencilSquareIcon),PencilSquareIcon$1=ForwardRef$m;function PlusCircleIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z",clipRule:"evenodd"}))}const ForwardRef$l=reactExports.forwardRef(PlusCircleIcon),PlusCircleIcon$1=ForwardRef$l;function TrashIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))}const ForwardRef$k=reactExports.forwardRef(TrashIcon),TrashIcon$1=ForwardRef$k;function TrophyIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M5.166 2.621v.858c-1.035.148-2.059.33-3.071.543a.75.75 0 0 0-.584.859 6.753 6.753 0 0 0 6.138 5.6 6.73 6.73 0 0 0 2.743 1.346A6.707 6.707 0 0 1 9.279 15H8.54c-1.036 0-1.875.84-1.875 1.875V19.5h-.75a2.25 2.25 0 0 0-2.25 2.25c0 .414.336.75.75.75h15a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-2.25-2.25h-.75v-2.625c0-1.036-.84-1.875-1.875-1.875h-.739a6.706 6.706 0 0 1-1.112-3.173 6.73 6.73 0 0 0 2.743-1.347 6.753 6.753 0 0 0 6.139-5.6.75.75 0 0 0-.585-.858 47.077 47.077 0 0 0-3.07-.543V2.62a.75.75 0 0 0-.658-.744 49.22 49.22 0 0 0-6.093-.377c-2.063 0-4.096.128-6.093.377a.75.75 0 0 0-.657.744Zm0 2.629c0 1.196.312 2.32.857 3.294A5.266 5.266 0 0 1 3.16 5.337a45.6 45.6 0 0 1 2.006-.343v.256Zm13.5 0v-.256c.674.1 1.343.214 2.006.343a5.265 5.265 0 0 1-2.863 3.207 6.72 6.72 0 0 0 .857-3.294Z",clipRule:"evenodd"}))}const ForwardRef$j=reactExports.forwardRef(TrophyIcon$2),SolidTrophyIcon=ForwardRef$j;function UsersIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{d:"M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.233.96 10.088 10.088 0 0 0 5.06-1.01.75.75 0 0 0 .42-.643 4.875 4.875 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003Z"}))}const ForwardRef$i=reactExports.forwardRef(UsersIcon),UsersIcon$1=ForwardRef$i;function XMarkIcon$2({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const ForwardRef$h=reactExports.forwardRef(XMarkIcon$2),XMarkIcon$3=ForwardRef$h;function CalendarDaysIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const ForwardRef$g=reactExports.forwardRef(CalendarDaysIcon),CalendarDaysIcon$1=ForwardRef$g;function ChevronDownIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const ForwardRef$f=reactExports.forwardRef(ChevronDownIcon),ChevronDownIcon$1=ForwardRef$f;function ChevronRightIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const ForwardRef$e=reactExports.forwardRef(ChevronRightIcon),ChevronRightIcon$1=ForwardRef$e;function ChevronUpIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const ForwardRef$d=reactExports.forwardRef(ChevronUpIcon),ChevronUpIcon$1=ForwardRef$d;function Cog6ToothIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const ForwardRef$c=reactExports.forwardRef(Cog6ToothIcon),Cog6ToothIcon$1=ForwardRef$c;function EllipsisVerticalIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"}))}const ForwardRef$b=reactExports.forwardRef(EllipsisVerticalIcon),EllipsisVerticalIcon$1=ForwardRef$b;function ExclamationCircleIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const ForwardRef$a=reactExports.forwardRef(ExclamationCircleIcon),ExclamationCircleIcon$1=ForwardRef$a;function ExclamationTriangleIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const ForwardRef$9=reactExports.forwardRef(ExclamationTriangleIcon),ExclamationTriangleIcon$1=ForwardRef$9;function HomeIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const ForwardRef$8=reactExports.forwardRef(HomeIcon),HomeIcon$1=ForwardRef$8;function LockClosedIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const ForwardRef$7=reactExports.forwardRef(LockClosedIcon),LockClosedIcon$1=ForwardRef$7;function MegaphoneIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"}))}const ForwardRef$6=reactExports.forwardRef(MegaphoneIcon),MegaphoneIcon$1=ForwardRef$6;function MinusIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}const ForwardRef$5=reactExports.forwardRef(MinusIcon),MinusIcon$1=ForwardRef$5;function PlusIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const ForwardRef$4=reactExports.forwardRef(PlusIcon),PlusIcon$1=ForwardRef$4;function QuestionMarkCircleIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const ForwardRef$3=reactExports.forwardRef(QuestionMarkCircleIcon),QuestionMarkCircleIcon$1=ForwardRef$3;function Squares2X2Icon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}const ForwardRef$2=reactExports.forwardRef(Squares2X2Icon),Squares2X2Icon$1=ForwardRef$2;function TrophyIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const ForwardRef$1=reactExports.forwardRef(TrophyIcon),TrophyIcon$1=ForwardRef$1;function XMarkIcon({title:nt,titleId:rt,...it},st){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:st,"aria-labelledby":rt},it),nt?reactExports.createElement("title",{id:rt},nt):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const ForwardRef=reactExports.forwardRef(XMarkIcon),XMarkIcon$1=ForwardRef,BottomNavbar=()=>{const[nt,rt]=reactExports.useState("");return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed bottom-0 left-0 right-0",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between p-4 bg-white border-t-2",children:[jsxRuntimeExports.jsxs(NavLink,{to:"/",children:[jsxRuntimeExports.jsx(SolidHomeIcon,{className:`w-6 h-6 ${nt==="home"?"":"hidden"}`}),jsxRuntimeExports.jsx(HomeIcon$1,{className:`w-6 h-6 ${nt==="home"?"hidden":""}`,onClick:()=>rt("home")})]}),jsxRuntimeExports.jsxs(NavLink,{to:"/diary",children:[jsxRuntimeExports.jsx(CalendarDaysIcon$3,{className:`w-6 h-6 ${nt==="diary"?"":"hidden"}`}),jsxRuntimeExports.jsx(CalendarDaysIcon$1,{className:`w-6 h-6 ${nt==="diary"?"hidden":""}`,onClick:()=>rt("diary")})]}),jsxRuntimeExports.jsxs(NavLink,{to:"/challenge",children:[jsxRuntimeExports.jsx(SolidTrophyIcon,{className:`w-6 h-6 ${nt==="challenge"?"":"hidden"}`}),jsxRuntimeExports.jsx(TrophyIcon$1,{className:`w-6 h-6 ${nt==="challenge"?"hidden":""}`,onClick:()=>rt("challenge")})]}),jsxRuntimeExports.jsxs(NavLink,{to:"/mypage",children:[jsxRuntimeExports.jsx(SolidCog6ToothIcon,{className:`w-6 h-6 ${nt==="mypage"?"":"hidden"}`}),jsxRuntimeExports.jsx(Cog6ToothIcon$1,{className:`w-6 h-6 ${nt==="mypage"?"hidden":""}`,onClick:()=>rt("mypage")})]})]})}),jsxRuntimeExports.jsx(Outlet,{})]})};function bind(nt,rt){return function(){return nt.apply(rt,arguments)}}var define_global_default$1={};const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(nt=>rt=>{const it=toString.call(rt);return nt[it]||(nt[it]=it.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=nt=>(nt=nt.toLowerCase(),rt=>kindOf(rt)===nt),typeOfTest=nt=>rt=>typeof rt===nt,{isArray:isArray$1}=Array,isUndefined$1=typeOfTest("undefined");function isBuffer(nt){return nt!==null&&!isUndefined$1(nt)&&nt.constructor!==null&&!isUndefined$1(nt.constructor)&&isFunction$2(nt.constructor.isBuffer)&&nt.constructor.isBuffer(nt)}const isArrayBuffer$1=kindOfTest("ArrayBuffer");function isArrayBufferView(nt){let rt;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?rt=ArrayBuffer.isView(nt):rt=nt&&nt.buffer&&isArrayBuffer$1(nt.buffer),rt}const isString$1=typeOfTest("string"),isFunction$2=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$2=nt=>nt!==null&&typeof nt=="object",isBoolean$1=nt=>nt===!0||nt===!1,isPlainObject$1=nt=>{if(kindOf(nt)!=="object")return!1;const rt=getPrototypeOf(nt);return(rt===null||rt===Object.prototype||Object.getPrototypeOf(rt)===null)&&!(Symbol.toStringTag in nt)&&!(Symbol.iterator in nt)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=nt=>isObject$2(nt)&&isFunction$2(nt.pipe),isFormData=nt=>{let rt;return nt&&(typeof FormData=="function"&&nt instanceof FormData||isFunction$2(nt.append)&&((rt=kindOf(nt))==="formdata"||rt==="object"&&isFunction$2(nt.toString)&&nt.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=nt=>nt.trim?nt.trim():nt.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(nt,rt,{allOwnKeys:it=!1}={}){if(nt===null||typeof nt>"u")return;let st,lt;if(typeof nt!="object"&&(nt=[nt]),isArray$1(nt))for(st=0,lt=nt.length;st<lt;st++)rt.call(null,nt[st],st,nt);else{const ct=it?Object.getOwnPropertyNames(nt):Object.keys(nt),ut=ct.length;let dt;for(st=0;st<ut;st++)dt=ct[st],rt.call(null,nt[dt],dt,nt)}}function findKey(nt,rt){rt=rt.toLowerCase();const it=Object.keys(nt);let st=it.length,lt;for(;st-- >0;)if(lt=it[st],rt===lt.toLowerCase())return lt;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:define_global_default$1,isContextDefined=nt=>!isUndefined$1(nt)&&nt!==_global;function merge$1(){const{caseless:nt}=isContextDefined(this)&&this||{},rt={},it=(st,lt)=>{const ct=nt&&findKey(rt,lt)||lt;isPlainObject$1(rt[ct])&&isPlainObject$1(st)?rt[ct]=merge$1(rt[ct],st):isPlainObject$1(st)?rt[ct]=merge$1({},st):isArray$1(st)?rt[ct]=st.slice():rt[ct]=st};for(let st=0,lt=arguments.length;st<lt;st++)arguments[st]&&forEach(arguments[st],it);return rt}const extend$1=(nt,rt,it,{allOwnKeys:st}={})=>(forEach(rt,(lt,ct)=>{it&&isFunction$2(lt)?nt[ct]=bind(lt,it):nt[ct]=lt},{allOwnKeys:st}),nt),stripBOM=nt=>(nt.charCodeAt(0)===65279&&(nt=nt.slice(1)),nt),inherits=(nt,rt,it,st)=>{nt.prototype=Object.create(rt.prototype,st),nt.prototype.constructor=nt,Object.defineProperty(nt,"super",{value:rt.prototype}),it&&Object.assign(nt.prototype,it)},toFlatObject=(nt,rt,it,st)=>{let lt,ct,ut;const dt={};if(rt=rt||{},nt==null)return rt;do{for(lt=Object.getOwnPropertyNames(nt),ct=lt.length;ct-- >0;)ut=lt[ct],(!st||st(ut,nt,rt))&&!dt[ut]&&(rt[ut]=nt[ut],dt[ut]=!0);nt=it!==!1&&getPrototypeOf(nt)}while(nt&&(!it||it(nt,rt))&&nt!==Object.prototype);return rt},endsWith=(nt,rt,it)=>{nt=String(nt),(it===void 0||it>nt.length)&&(it=nt.length),it-=rt.length;const st=nt.indexOf(rt,it);return st!==-1&&st===it},toArray=nt=>{if(!nt)return null;if(isArray$1(nt))return nt;let rt=nt.length;if(!isNumber$1(rt))return null;const it=new Array(rt);for(;rt-- >0;)it[rt]=nt[rt];return it},isTypedArray$1=(nt=>rt=>nt&&rt instanceof nt)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(nt,rt)=>{const st=(nt&&nt[Symbol.iterator]).call(nt);let lt;for(;(lt=st.next())&&!lt.done;){const ct=lt.value;rt.call(nt,ct[0],ct[1])}},matchAll=(nt,rt)=>{let it;const st=[];for(;(it=nt.exec(rt))!==null;)st.push(it);return st},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=nt=>nt.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(it,st,lt){return st.toUpperCase()+lt}),hasOwnProperty=(({hasOwnProperty:nt})=>(rt,it)=>nt.call(rt,it))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(nt,rt)=>{const it=Object.getOwnPropertyDescriptors(nt),st={};forEach(it,(lt,ct)=>{let ut;(ut=rt(lt,ct,nt))!==!1&&(st[ct]=ut||lt)}),Object.defineProperties(nt,st)},freezeMethods=nt=>{reduceDescriptors(nt,(rt,it)=>{if(isFunction$2(nt)&&["arguments","caller","callee"].indexOf(it)!==-1)return!1;const st=nt[it];if(isFunction$2(st)){if(rt.enumerable=!1,"writable"in rt){rt.writable=!1;return}rt.set||(rt.set=()=>{throw Error("Can not rewrite read-only method '"+it+"'")})}})},toObjectSet=(nt,rt)=>{const it={},st=lt=>{lt.forEach(ct=>{it[ct]=!0})};return isArray$1(nt)?st(nt):st(String(nt).split(rt)),it},noop$2=()=>{},toFiniteNumber=(nt,rt)=>(nt=+nt,Number.isFinite(nt)?nt:rt),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(nt=16,rt=ALPHABET.ALPHA_DIGIT)=>{let it="";const{length:st}=rt;for(;nt--;)it+=rt[Math.random()*st|0];return it};function isSpecCompliantForm(nt){return!!(nt&&isFunction$2(nt.append)&&nt[Symbol.toStringTag]==="FormData"&&nt[Symbol.iterator])}const toJSONObject=nt=>{const rt=new Array(10),it=(st,lt)=>{if(isObject$2(st)){if(rt.indexOf(st)>=0)return;if(!("toJSON"in st)){rt[lt]=st;const ct=isArray$1(st)?[]:{};return forEach(st,(ut,dt)=>{const ht=it(ut,lt+1);!isUndefined$1(ht)&&(ct[dt]=ht)}),rt[lt]=void 0,ct}}return st};return it(nt,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=nt=>nt&&(isObject$2(nt)||isFunction$2(nt))&&isFunction$2(nt.then)&&isFunction$2(nt.catch),utils$2={isArray:isArray$1,isArrayBuffer:isArrayBuffer$1,isBuffer,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean:isBoolean$1,isObject:isObject$2,isPlainObject:isPlainObject$1,isUndefined:isUndefined$1,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$2,isStream,isURLSearchParams,isTypedArray:isTypedArray$1,isFileList,forEach,merge:merge$1,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$2,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(nt,rt,it,st,lt){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=nt,this.name="AxiosError",rt&&(this.code=rt),it&&(this.config=it),st&&(this.request=st),lt&&(this.response=lt)}utils$2.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$2.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors$1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(nt=>{descriptors$1[nt]={value:nt}});Object.defineProperties(AxiosError,descriptors$1);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(nt,rt,it,st,lt,ct)=>{const ut=Object.create(prototype$1);return utils$2.toFlatObject(nt,ut,function(ht){return ht!==Error.prototype},dt=>dt!=="isAxiosError"),AxiosError.call(ut,nt.message,rt,it,st,lt),ut.cause=nt,ut.name=nt.name,ct&&Object.assign(ut,ct),ut};const httpAdapter=null;function isVisitable(nt){return utils$2.isPlainObject(nt)||utils$2.isArray(nt)}function removeBrackets(nt){return utils$2.endsWith(nt,"[]")?nt.slice(0,-2):nt}function renderKey(nt,rt,it){return nt?nt.concat(rt).map(function(lt,ct){return lt=removeBrackets(lt),!it&&ct?"["+lt+"]":lt}).join(it?".":""):rt}function isFlatArray(nt){return utils$2.isArray(nt)&&!nt.some(isVisitable)}const predicates=utils$2.toFlatObject(utils$2,{},null,function(rt){return/^is[A-Z]/.test(rt)});function toFormData(nt,rt,it){if(!utils$2.isObject(nt))throw new TypeError("target must be an object");rt=rt||new FormData,it=utils$2.toFlatObject(it,{metaTokens:!0,dots:!1,indexes:!1},!1,function(vt,St){return!utils$2.isUndefined(St[vt])});const st=it.metaTokens,lt=it.visitor||pt,ct=it.dots,ut=it.indexes,ht=(it.Blob||typeof Blob<"u"&&Blob)&&utils$2.isSpecCompliantForm(rt);if(!utils$2.isFunction(lt))throw new TypeError("visitor must be a function");function ft(yt){if(yt===null)return"";if(utils$2.isDate(yt))return yt.toISOString();if(!ht&&utils$2.isBlob(yt))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$2.isArrayBuffer(yt)||utils$2.isTypedArray(yt)?ht&&typeof Blob=="function"?new Blob([yt]):Buffer.from(yt):yt}function pt(yt,vt,St){let wt=yt;if(yt&&!St&&typeof yt=="object"){if(utils$2.endsWith(vt,"{}"))vt=st?vt:vt.slice(0,-2),yt=JSON.stringify(yt);else if(utils$2.isArray(yt)&&isFlatArray(yt)||(utils$2.isFileList(yt)||utils$2.endsWith(vt,"[]"))&&(wt=utils$2.toArray(yt)))return vt=removeBrackets(vt),wt.forEach(function(Rt,Tt){!(utils$2.isUndefined(Rt)||Rt===null)&&rt.append(ut===!0?renderKey([vt],Tt,ct):ut===null?vt:vt+"[]",ft(Rt))}),!1}return isVisitable(yt)?!0:(rt.append(renderKey(St,vt,ct),ft(yt)),!1)}const mt=[],gt=Object.assign(predicates,{defaultVisitor:pt,convertValue:ft,isVisitable});function xt(yt,vt){if(!utils$2.isUndefined(yt)){if(mt.indexOf(yt)!==-1)throw Error("Circular reference detected in "+vt.join("."));mt.push(yt),utils$2.forEach(yt,function(wt,Et){(!(utils$2.isUndefined(wt)||wt===null)&&lt.call(rt,wt,utils$2.isString(Et)?Et.trim():Et,vt,gt))===!0&&xt(wt,vt?vt.concat(Et):[Et])}),mt.pop()}}if(!utils$2.isObject(nt))throw new TypeError("data must be an object");return xt(nt),rt}function encode$1(nt){const rt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(nt).replace(/[!'()~]|%20|%00/g,function(st){return rt[st]})}function AxiosURLSearchParams(nt,rt){this._pairs=[],nt&&toFormData(nt,this,rt)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(rt,it){this._pairs.push([rt,it])};prototype.toString=function(rt){const it=rt?function(st){return rt.call(this,st,encode$1)}:encode$1;return this._pairs.map(function(lt){return it(lt[0])+"="+it(lt[1])},"").join("&")};function encode(nt){return encodeURIComponent(nt).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(nt,rt,it){if(!rt)return nt;const st=it&&it.encode||encode,lt=it&&it.serialize;let ct;if(lt?ct=lt(rt,it):ct=utils$2.isURLSearchParams(rt)?rt.toString():new AxiosURLSearchParams(rt,it).toString(st),ct){const ut=nt.indexOf("#");ut!==-1&&(nt=nt.slice(0,ut)),nt+=(nt.indexOf("?")===-1?"?":"&")+ct}return nt}class InterceptorManager{constructor(){this.handlers=[]}use(rt,it,st){return this.handlers.push({fulfilled:rt,rejected:it,synchronous:st?st.synchronous:!1,runWhen:st?st.runWhen:null}),this.handlers.length-1}eject(rt){this.handlers[rt]&&(this.handlers[rt]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(rt){utils$2.forEach(this.handlers,function(st){st!==null&&rt(st)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(nt=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(nt)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",utils$1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv},Symbol.toStringTag,{value:"Module"})),platform={...utils$1,...platform$1};function toURLEncodedForm(nt,rt){return toFormData(nt,new platform.classes.URLSearchParams,Object.assign({visitor:function(it,st,lt,ct){return platform.isNode&&utils$2.isBuffer(it)?(this.append(st,it.toString("base64")),!1):ct.defaultVisitor.apply(this,arguments)}},rt))}function parsePropPath(nt){return utils$2.matchAll(/\w+|\[(\w*)]/g,nt).map(rt=>rt[0]==="[]"?"":rt[1]||rt[0])}function arrayToObject(nt){const rt={},it=Object.keys(nt);let st;const lt=it.length;let ct;for(st=0;st<lt;st++)ct=it[st],rt[ct]=nt[ct];return rt}function formDataToJSON(nt){function rt(it,st,lt,ct){let ut=it[ct++];if(ut==="__proto__")return!0;const dt=Number.isFinite(+ut),ht=ct>=it.length;return ut=!ut&&utils$2.isArray(lt)?lt.length:ut,ht?(utils$2.hasOwnProp(lt,ut)?lt[ut]=[lt[ut],st]:lt[ut]=st,!dt):((!lt[ut]||!utils$2.isObject(lt[ut]))&&(lt[ut]=[]),rt(it,st,lt[ut],ct)&&utils$2.isArray(lt[ut])&&(lt[ut]=arrayToObject(lt[ut])),!dt)}if(utils$2.isFormData(nt)&&utils$2.isFunction(nt.entries)){const it={};return utils$2.forEachEntry(nt,(st,lt)=>{rt(parsePropPath(st),lt,it,0)}),it}return null}function stringifySafely(nt,rt,it){if(utils$2.isString(nt))try{return(rt||JSON.parse)(nt),utils$2.trim(nt)}catch(st){if(st.name!=="SyntaxError")throw st}return(it||JSON.stringify)(nt)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(rt,it){const st=it.getContentType()||"",lt=st.indexOf("application/json")>-1,ct=utils$2.isObject(rt);if(ct&&utils$2.isHTMLForm(rt)&&(rt=new FormData(rt)),utils$2.isFormData(rt))return lt?JSON.stringify(formDataToJSON(rt)):rt;if(utils$2.isArrayBuffer(rt)||utils$2.isBuffer(rt)||utils$2.isStream(rt)||utils$2.isFile(rt)||utils$2.isBlob(rt))return rt;if(utils$2.isArrayBufferView(rt))return rt.buffer;if(utils$2.isURLSearchParams(rt))return it.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),rt.toString();let dt;if(ct){if(st.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(rt,this.formSerializer).toString();if((dt=utils$2.isFileList(rt))||st.indexOf("multipart/form-data")>-1){const ht=this.env&&this.env.FormData;return toFormData(dt?{"files[]":rt}:rt,ht&&new ht,this.formSerializer)}}return ct||lt?(it.setContentType("application/json",!1),stringifySafely(rt)):rt}],transformResponse:[function(rt){const it=this.transitional||defaults$1.transitional,st=it&&it.forcedJSONParsing,lt=this.responseType==="json";if(rt&&utils$2.isString(rt)&&(st&&!this.responseType||lt)){const ut=!(it&&it.silentJSONParsing)&&lt;try{return JSON.parse(rt)}catch(dt){if(ut)throw dt.name==="SyntaxError"?AxiosError.from(dt,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):dt}}return rt}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(rt){return rt>=200&&rt<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$2.forEach(["delete","get","head","post","put","patch"],nt=>{defaults$1.headers[nt]={}});const defaults$2=defaults$1,ignoreDuplicateOf=utils$2.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=nt=>{const rt={};let it,st,lt;return nt&&nt.split(`
`).forEach(function(ut){lt=ut.indexOf(":"),it=ut.substring(0,lt).trim().toLowerCase(),st=ut.substring(lt+1).trim(),!(!it||rt[it]&&ignoreDuplicateOf[it])&&(it==="set-cookie"?rt[it]?rt[it].push(st):rt[it]=[st]:rt[it]=rt[it]?rt[it]+", "+st:st)}),rt},$internals=Symbol("internals");function normalizeHeader(nt){return nt&&String(nt).trim().toLowerCase()}function normalizeValue(nt){return nt===!1||nt==null?nt:utils$2.isArray(nt)?nt.map(normalizeValue):String(nt)}function parseTokens(nt){const rt=Object.create(null),it=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let st;for(;st=it.exec(nt);)rt[st[1]]=st[2];return rt}const isValidHeaderName=nt=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(nt.trim());function matchHeaderValue(nt,rt,it,st,lt){if(utils$2.isFunction(st))return st.call(this,rt,it);if(lt&&(rt=it),!!utils$2.isString(rt)){if(utils$2.isString(st))return rt.indexOf(st)!==-1;if(utils$2.isRegExp(st))return st.test(rt)}}function formatHeader(nt){return nt.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(rt,it,st)=>it.toUpperCase()+st)}function buildAccessors(nt,rt){const it=utils$2.toCamelCase(" "+rt);["get","set","has"].forEach(st=>{Object.defineProperty(nt,st+it,{value:function(lt,ct,ut){return this[st].call(this,rt,lt,ct,ut)},configurable:!0})})}class AxiosHeaders{constructor(rt){rt&&this.set(rt)}set(rt,it,st){const lt=this;function ct(dt,ht,ft){const pt=normalizeHeader(ht);if(!pt)throw new Error("header name must be a non-empty string");const mt=utils$2.findKey(lt,pt);(!mt||lt[mt]===void 0||ft===!0||ft===void 0&&lt[mt]!==!1)&&(lt[mt||ht]=normalizeValue(dt))}const ut=(dt,ht)=>utils$2.forEach(dt,(ft,pt)=>ct(ft,pt,ht));return utils$2.isPlainObject(rt)||rt instanceof this.constructor?ut(rt,it):utils$2.isString(rt)&&(rt=rt.trim())&&!isValidHeaderName(rt)?ut(parseHeaders(rt),it):rt!=null&&ct(it,rt,st),this}get(rt,it){if(rt=normalizeHeader(rt),rt){const st=utils$2.findKey(this,rt);if(st){const lt=this[st];if(!it)return lt;if(it===!0)return parseTokens(lt);if(utils$2.isFunction(it))return it.call(this,lt,st);if(utils$2.isRegExp(it))return it.exec(lt);throw new TypeError("parser must be boolean|regexp|function")}}}has(rt,it){if(rt=normalizeHeader(rt),rt){const st=utils$2.findKey(this,rt);return!!(st&&this[st]!==void 0&&(!it||matchHeaderValue(this,this[st],st,it)))}return!1}delete(rt,it){const st=this;let lt=!1;function ct(ut){if(ut=normalizeHeader(ut),ut){const dt=utils$2.findKey(st,ut);dt&&(!it||matchHeaderValue(st,st[dt],dt,it))&&(delete st[dt],lt=!0)}}return utils$2.isArray(rt)?rt.forEach(ct):ct(rt),lt}clear(rt){const it=Object.keys(this);let st=it.length,lt=!1;for(;st--;){const ct=it[st];(!rt||matchHeaderValue(this,this[ct],ct,rt,!0))&&(delete this[ct],lt=!0)}return lt}normalize(rt){const it=this,st={};return utils$2.forEach(this,(lt,ct)=>{const ut=utils$2.findKey(st,ct);if(ut){it[ut]=normalizeValue(lt),delete it[ct];return}const dt=rt?formatHeader(ct):String(ct).trim();dt!==ct&&delete it[ct],it[dt]=normalizeValue(lt),st[dt]=!0}),this}concat(...rt){return this.constructor.concat(this,...rt)}toJSON(rt){const it=Object.create(null);return utils$2.forEach(this,(st,lt)=>{st!=null&&st!==!1&&(it[lt]=rt&&utils$2.isArray(st)?st.join(", "):st)}),it}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([rt,it])=>rt+": "+it).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(rt){return rt instanceof this?rt:new this(rt)}static concat(rt,...it){const st=new this(rt);return it.forEach(lt=>st.set(lt)),st}static accessor(rt){const st=(this[$internals]=this[$internals]={accessors:{}}).accessors,lt=this.prototype;function ct(ut){const dt=normalizeHeader(ut);st[dt]||(buildAccessors(lt,ut),st[dt]=!0)}return utils$2.isArray(rt)?rt.forEach(ct):ct(rt),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$2.reduceDescriptors(AxiosHeaders.prototype,({value:nt},rt)=>{let it=rt[0].toUpperCase()+rt.slice(1);return{get:()=>nt,set(st){this[it]=st}}});utils$2.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(nt,rt){const it=this||defaults$2,st=rt||it,lt=AxiosHeaders$1.from(st.headers);let ct=st.data;return utils$2.forEach(nt,function(dt){ct=dt.call(it,ct,lt.normalize(),rt?rt.status:void 0)}),lt.normalize(),ct}function isCancel(nt){return!!(nt&&nt.__CANCEL__)}function CanceledError(nt,rt,it){AxiosError.call(this,nt??"canceled",AxiosError.ERR_CANCELED,rt,it),this.name="CanceledError"}utils$2.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(nt,rt,it){const st=it.config.validateStatus;!it.status||!st||st(it.status)?nt(it):rt(new AxiosError("Request failed with status code "+it.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(it.status/100)-4],it.config,it.request,it))}const cookies=platform.hasStandardBrowserEnv?{write(nt,rt,it,st,lt,ct){const ut=[nt+"="+encodeURIComponent(rt)];utils$2.isNumber(it)&&ut.push("expires="+new Date(it).toGMTString()),utils$2.isString(st)&&ut.push("path="+st),utils$2.isString(lt)&&ut.push("domain="+lt),ct===!0&&ut.push("secure"),document.cookie=ut.join("; ")},read(nt){const rt=document.cookie.match(new RegExp("(^|;\\s*)("+nt+")=([^;]*)"));return rt?decodeURIComponent(rt[3]):null},remove(nt){this.write(nt,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(nt){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(nt)}function combineURLs(nt,rt){return rt?nt.replace(/\/?\/$/,"")+"/"+rt.replace(/^\/+/,""):nt}function buildFullPath(nt,rt){return nt&&!isAbsoluteURL(rt)?combineURLs(nt,rt):rt}const isURLSameOrigin=platform.hasStandardBrowserEnv?function(){const rt=/(msie|trident)/i.test(navigator.userAgent),it=document.createElement("a");let st;function lt(ct){let ut=ct;return rt&&(it.setAttribute("href",ut),ut=it.href),it.setAttribute("href",ut),{href:it.href,protocol:it.protocol?it.protocol.replace(/:$/,""):"",host:it.host,search:it.search?it.search.replace(/^\?/,""):"",hash:it.hash?it.hash.replace(/^#/,""):"",hostname:it.hostname,port:it.port,pathname:it.pathname.charAt(0)==="/"?it.pathname:"/"+it.pathname}}return st=lt(window.location.href),function(ut){const dt=utils$2.isString(ut)?lt(ut):ut;return dt.protocol===st.protocol&&dt.host===st.host}}():function(){return function(){return!0}}();function parseProtocol(nt){const rt=/^([-+\w]{1,25})(:?\/\/|:)/.exec(nt);return rt&&rt[1]||""}function speedometer(nt,rt){nt=nt||10;const it=new Array(nt),st=new Array(nt);let lt=0,ct=0,ut;return rt=rt!==void 0?rt:1e3,function(ht){const ft=Date.now(),pt=st[ct];ut||(ut=ft),it[lt]=ht,st[lt]=ft;let mt=ct,gt=0;for(;mt!==lt;)gt+=it[mt++],mt=mt%nt;if(lt=(lt+1)%nt,lt===ct&&(ct=(ct+1)%nt),ft-ut<rt)return;const xt=pt&&ft-pt;return xt?Math.round(gt*1e3/xt):void 0}}function progressEventReducer(nt,rt){let it=0;const st=speedometer(50,250);return lt=>{const ct=lt.loaded,ut=lt.lengthComputable?lt.total:void 0,dt=ct-it,ht=st(dt),ft=ct<=ut;it=ct;const pt={loaded:ct,total:ut,progress:ut?ct/ut:void 0,bytes:dt,rate:ht||void 0,estimated:ht&&ut&&ft?(ut-ct)/ht:void 0,event:lt};pt[rt?"download":"upload"]=!0,nt(pt)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(nt){return new Promise(function(it,st){let lt=nt.data;const ct=AxiosHeaders$1.from(nt.headers).normalize();let{responseType:ut,withXSRFToken:dt}=nt,ht;function ft(){nt.cancelToken&&nt.cancelToken.unsubscribe(ht),nt.signal&&nt.signal.removeEventListener("abort",ht)}let pt;if(utils$2.isFormData(lt)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)ct.setContentType(!1);else if((pt=ct.getContentType())!==!1){const[vt,...St]=pt?pt.split(";").map(wt=>wt.trim()).filter(Boolean):[];ct.setContentType([vt||"multipart/form-data",...St].join("; "))}}let mt=new XMLHttpRequest;if(nt.auth){const vt=nt.auth.username||"",St=nt.auth.password?unescape(encodeURIComponent(nt.auth.password)):"";ct.set("Authorization","Basic "+btoa(vt+":"+St))}const gt=buildFullPath(nt.baseURL,nt.url);mt.open(nt.method.toUpperCase(),buildURL(gt,nt.params,nt.paramsSerializer),!0),mt.timeout=nt.timeout;function xt(){if(!mt)return;const vt=AxiosHeaders$1.from("getAllResponseHeaders"in mt&&mt.getAllResponseHeaders()),wt={data:!ut||ut==="text"||ut==="json"?mt.responseText:mt.response,status:mt.status,statusText:mt.statusText,headers:vt,config:nt,request:mt};settle(function(Rt){it(Rt),ft()},function(Rt){st(Rt),ft()},wt),mt=null}if("onloadend"in mt?mt.onloadend=xt:mt.onreadystatechange=function(){!mt||mt.readyState!==4||mt.status===0&&!(mt.responseURL&&mt.responseURL.indexOf("file:")===0)||setTimeout(xt)},mt.onabort=function(){mt&&(st(new AxiosError("Request aborted",AxiosError.ECONNABORTED,nt,mt)),mt=null)},mt.onerror=function(){st(new AxiosError("Network Error",AxiosError.ERR_NETWORK,nt,mt)),mt=null},mt.ontimeout=function(){let St=nt.timeout?"timeout of "+nt.timeout+"ms exceeded":"timeout exceeded";const wt=nt.transitional||transitionalDefaults;nt.timeoutErrorMessage&&(St=nt.timeoutErrorMessage),st(new AxiosError(St,wt.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,nt,mt)),mt=null},platform.hasStandardBrowserEnv&&(dt&&utils$2.isFunction(dt)&&(dt=dt(nt)),dt||dt!==!1&&isURLSameOrigin(gt))){const vt=nt.xsrfHeaderName&&nt.xsrfCookieName&&cookies.read(nt.xsrfCookieName);vt&&ct.set(nt.xsrfHeaderName,vt)}lt===void 0&&ct.setContentType(null),"setRequestHeader"in mt&&utils$2.forEach(ct.toJSON(),function(St,wt){mt.setRequestHeader(wt,St)}),utils$2.isUndefined(nt.withCredentials)||(mt.withCredentials=!!nt.withCredentials),ut&&ut!=="json"&&(mt.responseType=nt.responseType),typeof nt.onDownloadProgress=="function"&&mt.addEventListener("progress",progressEventReducer(nt.onDownloadProgress,!0)),typeof nt.onUploadProgress=="function"&&mt.upload&&mt.upload.addEventListener("progress",progressEventReducer(nt.onUploadProgress)),(nt.cancelToken||nt.signal)&&(ht=vt=>{mt&&(st(!vt||vt.type?new CanceledError(null,nt,mt):vt),mt.abort(),mt=null)},nt.cancelToken&&nt.cancelToken.subscribe(ht),nt.signal&&(nt.signal.aborted?ht():nt.signal.addEventListener("abort",ht)));const yt=parseProtocol(gt);if(yt&&platform.protocols.indexOf(yt)===-1){st(new AxiosError("Unsupported protocol "+yt+":",AxiosError.ERR_BAD_REQUEST,nt));return}mt.send(lt||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$2.forEach(knownAdapters,(nt,rt)=>{if(nt){try{Object.defineProperty(nt,"name",{value:rt})}catch{}Object.defineProperty(nt,"adapterName",{value:rt})}});const renderReason=nt=>`- ${nt}`,isResolvedHandle=nt=>utils$2.isFunction(nt)||nt===null||nt===!1,adapters$1={getAdapter:nt=>{nt=utils$2.isArray(nt)?nt:[nt];const{length:rt}=nt;let it,st;const lt={};for(let ct=0;ct<rt;ct++){it=nt[ct];let ut;if(st=it,!isResolvedHandle(it)&&(st=knownAdapters[(ut=String(it)).toLowerCase()],st===void 0))throw new AxiosError(`Unknown adapter '${ut}'`);if(st)break;lt[ut||"#"+ct]=st}if(!st){const ct=Object.entries(lt).map(([dt,ht])=>`adapter ${dt} `+(ht===!1?"is not supported by the environment":"is not available in the build"));let ut=rt?ct.length>1?`since :
`+ct.map(renderReason).join(`
`):" "+renderReason(ct[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+ut,"ERR_NOT_SUPPORT")}return st},adapters:knownAdapters};function throwIfCancellationRequested(nt){if(nt.cancelToken&&nt.cancelToken.throwIfRequested(),nt.signal&&nt.signal.aborted)throw new CanceledError(null,nt)}function dispatchRequest(nt){return throwIfCancellationRequested(nt),nt.headers=AxiosHeaders$1.from(nt.headers),nt.data=transformData.call(nt,nt.transformRequest),["post","put","patch"].indexOf(nt.method)!==-1&&nt.headers.setContentType("application/x-www-form-urlencoded",!1),adapters$1.getAdapter(nt.adapter||defaults$2.adapter)(nt).then(function(st){return throwIfCancellationRequested(nt),st.data=transformData.call(nt,nt.transformResponse,st),st.headers=AxiosHeaders$1.from(st.headers),st},function(st){return isCancel(st)||(throwIfCancellationRequested(nt),st&&st.response&&(st.response.data=transformData.call(nt,nt.transformResponse,st.response),st.response.headers=AxiosHeaders$1.from(st.response.headers))),Promise.reject(st)})}const headersToObject=nt=>nt instanceof AxiosHeaders$1?nt.toJSON():nt;function mergeConfig(nt,rt){rt=rt||{};const it={};function st(ft,pt,mt){return utils$2.isPlainObject(ft)&&utils$2.isPlainObject(pt)?utils$2.merge.call({caseless:mt},ft,pt):utils$2.isPlainObject(pt)?utils$2.merge({},pt):utils$2.isArray(pt)?pt.slice():pt}function lt(ft,pt,mt){if(utils$2.isUndefined(pt)){if(!utils$2.isUndefined(ft))return st(void 0,ft,mt)}else return st(ft,pt,mt)}function ct(ft,pt){if(!utils$2.isUndefined(pt))return st(void 0,pt)}function ut(ft,pt){if(utils$2.isUndefined(pt)){if(!utils$2.isUndefined(ft))return st(void 0,ft)}else return st(void 0,pt)}function dt(ft,pt,mt){if(mt in rt)return st(ft,pt);if(mt in nt)return st(void 0,ft)}const ht={url:ct,method:ct,data:ct,baseURL:ut,transformRequest:ut,transformResponse:ut,paramsSerializer:ut,timeout:ut,timeoutMessage:ut,withCredentials:ut,withXSRFToken:ut,adapter:ut,responseType:ut,xsrfCookieName:ut,xsrfHeaderName:ut,onUploadProgress:ut,onDownloadProgress:ut,decompress:ut,maxContentLength:ut,maxBodyLength:ut,beforeRedirect:ut,transport:ut,httpAgent:ut,httpsAgent:ut,cancelToken:ut,socketPath:ut,responseEncoding:ut,validateStatus:dt,headers:(ft,pt)=>lt(headersToObject(ft),headersToObject(pt),!0)};return utils$2.forEach(Object.keys(Object.assign({},nt,rt)),function(pt){const mt=ht[pt]||lt,gt=mt(nt[pt],rt[pt],pt);utils$2.isUndefined(gt)&&mt!==dt||(it[pt]=gt)}),it}const VERSION="1.6.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach((nt,rt)=>{validators$1[nt]=function(st){return typeof st===nt||"a"+(rt<1?"n ":" ")+nt}});const deprecatedWarnings={};validators$1.transitional=function(rt,it,st){function lt(ct,ut){return"[Axios v"+VERSION+"] Transitional option '"+ct+"'"+ut+(st?". "+st:"")}return(ct,ut,dt)=>{if(rt===!1)throw new AxiosError(lt(ut," has been removed"+(it?" in "+it:"")),AxiosError.ERR_DEPRECATED);return it&&!deprecatedWarnings[ut]&&(deprecatedWarnings[ut]=!0,console.warn(lt(ut," has been deprecated since v"+it+" and will be removed in the near future"))),rt?rt(ct,ut,dt):!0}};function assertOptions(nt,rt,it){if(typeof nt!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const st=Object.keys(nt);let lt=st.length;for(;lt-- >0;){const ct=st[lt],ut=rt[ct];if(ut){const dt=nt[ct],ht=dt===void 0||ut(dt,ct,nt);if(ht!==!0)throw new AxiosError("option "+ct+" must be "+ht,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(it!==!0)throw new AxiosError("Unknown option "+ct,AxiosError.ERR_BAD_OPTION)}}const validator$3={assertOptions,validators:validators$1},validators=validator$3.validators;class Axios{constructor(rt){this.defaults=rt,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(rt,it){try{return await this._request(rt,it)}catch(st){if(st instanceof Error){let lt;Error.captureStackTrace?Error.captureStackTrace(lt={}):lt=new Error;const ct=lt.stack?lt.stack.replace(/^.+\n/,""):"";st.stack?ct&&!String(st.stack).endsWith(ct.replace(/^.+\n.+\n/,""))&&(st.stack+=`
`+ct):st.stack=ct}throw st}}_request(rt,it){typeof rt=="string"?(it=it||{},it.url=rt):it=rt||{},it=mergeConfig(this.defaults,it);const{transitional:st,paramsSerializer:lt,headers:ct}=it;st!==void 0&&validator$3.assertOptions(st,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),lt!=null&&(utils$2.isFunction(lt)?it.paramsSerializer={serialize:lt}:validator$3.assertOptions(lt,{encode:validators.function,serialize:validators.function},!0)),it.method=(it.method||this.defaults.method||"get").toLowerCase();let ut=ct&&utils$2.merge(ct.common,ct[it.method]);ct&&utils$2.forEach(["delete","get","head","post","put","patch","common"],yt=>{delete ct[yt]}),it.headers=AxiosHeaders$1.concat(ut,ct);const dt=[];let ht=!0;this.interceptors.request.forEach(function(vt){typeof vt.runWhen=="function"&&vt.runWhen(it)===!1||(ht=ht&&vt.synchronous,dt.unshift(vt.fulfilled,vt.rejected))});const ft=[];this.interceptors.response.forEach(function(vt){ft.push(vt.fulfilled,vt.rejected)});let pt,mt=0,gt;if(!ht){const yt=[dispatchRequest.bind(this),void 0];for(yt.unshift.apply(yt,dt),yt.push.apply(yt,ft),gt=yt.length,pt=Promise.resolve(it);mt<gt;)pt=pt.then(yt[mt++],yt[mt++]);return pt}gt=dt.length;let xt=it;for(mt=0;mt<gt;){const yt=dt[mt++],vt=dt[mt++];try{xt=yt(xt)}catch(St){vt.call(this,St);break}}try{pt=dispatchRequest.call(this,xt)}catch(yt){return Promise.reject(yt)}for(mt=0,gt=ft.length;mt<gt;)pt=pt.then(ft[mt++],ft[mt++]);return pt}getUri(rt){rt=mergeConfig(this.defaults,rt);const it=buildFullPath(rt.baseURL,rt.url);return buildURL(it,rt.params,rt.paramsSerializer)}}utils$2.forEach(["delete","get","head","options"],function(rt){Axios.prototype[rt]=function(it,st){return this.request(mergeConfig(st||{},{method:rt,url:it,data:(st||{}).data}))}});utils$2.forEach(["post","put","patch"],function(rt){function it(st){return function(ct,ut,dt){return this.request(mergeConfig(dt||{},{method:rt,headers:st?{"Content-Type":"multipart/form-data"}:{},url:ct,data:ut}))}}Axios.prototype[rt]=it(),Axios.prototype[rt+"Form"]=it(!0)});const Axios$1=Axios;class CancelToken{constructor(rt){if(typeof rt!="function")throw new TypeError("executor must be a function.");let it;this.promise=new Promise(function(ct){it=ct});const st=this;this.promise.then(lt=>{if(!st._listeners)return;let ct=st._listeners.length;for(;ct-- >0;)st._listeners[ct](lt);st._listeners=null}),this.promise.then=lt=>{let ct;const ut=new Promise(dt=>{st.subscribe(dt),ct=dt}).then(lt);return ut.cancel=function(){st.unsubscribe(ct)},ut},rt(function(ct,ut,dt){st.reason||(st.reason=new CanceledError(ct,ut,dt),it(st.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(rt){if(this.reason){rt(this.reason);return}this._listeners?this._listeners.push(rt):this._listeners=[rt]}unsubscribe(rt){if(!this._listeners)return;const it=this._listeners.indexOf(rt);it!==-1&&this._listeners.splice(it,1)}static source(){let rt;return{token:new CancelToken(function(lt){rt=lt}),cancel:rt}}}const CancelToken$1=CancelToken;function spread(nt){return function(it){return nt.apply(null,it)}}function isAxiosError(nt){return utils$2.isObject(nt)&&nt.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([nt,rt])=>{HttpStatusCode[rt]=nt});const HttpStatusCode$1=HttpStatusCode;function createInstance(nt){const rt=new Axios$1(nt),it=bind(Axios$1.prototype.request,rt);return utils$2.extend(it,Axios$1.prototype,rt,{allOwnKeys:!0}),utils$2.extend(it,rt,null,{allOwnKeys:!0}),it.create=function(lt){return createInstance(mergeConfig(nt,lt))},it}const axios=createInstance(defaults$2);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(rt){return Promise.all(rt)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=nt=>formDataToJSON(utils$2.isHTMLForm(nt)?new FormData(nt):nt);axios.getAdapter=adapters$1.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;var define_process_env_default$1={};function err(nt){const rt=new Error(nt);if(rt.stack===void 0)try{throw rt}catch{}return rt}var err_1=err,Recoil_err=err_1;function isPromise$1(nt){return!!nt&&typeof nt.then=="function"}var Recoil_isPromise=isPromise$1;function nullthrows(nt,rt){if(nt!=null)return nt;throw Recoil_err(rt??"Got unexpected null or undefined")}var Recoil_nullthrows=nullthrows;function _defineProperty$2(nt,rt,it){return rt in nt?Object.defineProperty(nt,rt,{value:it,enumerable:!0,configurable:!0,writable:!0}):nt[rt]=it,nt}class BaseLoadable{getValue(){throw Recoil_err("BaseLoadable")}toPromise(){throw Recoil_err("BaseLoadable")}valueMaybe(){throw Recoil_err("BaseLoadable")}valueOrThrow(){throw Recoil_err(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Recoil_err("BaseLoadable")}promiseOrThrow(){throw Recoil_err(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Recoil_err("BaseLoadable")}errorOrThrow(){throw Recoil_err(`Loadable expected error, but in "${this.state}" state`)}is(rt){return rt.state===this.state&&rt.contents===this.contents}map(rt){throw Recoil_err("BaseLoadable")}}class ValueLoadable extends BaseLoadable{constructor(rt){super(),_defineProperty$2(this,"state","hasValue"),_defineProperty$2(this,"contents",void 0),this.contents=rt}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(rt){try{const it=rt(this.contents);return Recoil_isPromise(it)?loadableWithPromise(it):isLoadable(it)?it:loadableWithValue(it)}catch(it){return Recoil_isPromise(it)?loadableWithPromise(it.next(()=>this.map(rt))):loadableWithError(it)}}}class ErrorLoadable extends BaseLoadable{constructor(rt){super(),_defineProperty$2(this,"state","hasError"),_defineProperty$2(this,"contents",void 0),this.contents=rt}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(rt){return this}}class LoadingLoadable extends BaseLoadable{constructor(rt){super(),_defineProperty$2(this,"state","loading"),_defineProperty$2(this,"contents",void 0),this.contents=rt}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(rt){return loadableWithPromise(this.contents.then(it=>{const st=rt(it);if(isLoadable(st)){const lt=st;switch(lt.state){case"hasValue":return lt.contents;case"hasError":throw lt.contents;case"loading":return lt.contents}}return st}).catch(it=>{if(Recoil_isPromise(it))return it.then(()=>this.map(rt).contents);throw it}))}}function loadableWithValue(nt){return Object.freeze(new ValueLoadable(nt))}function loadableWithError(nt){return Object.freeze(new ErrorLoadable(nt))}function loadableWithPromise(nt){return Object.freeze(new LoadingLoadable(nt))}function loadableLoading(){return Object.freeze(new LoadingLoadable(new Promise(()=>{})))}function loadableAllArray(nt){return nt.every(rt=>rt.state==="hasValue")?loadableWithValue(nt.map(rt=>rt.contents)):nt.some(rt=>rt.state==="hasError")?loadableWithError(Recoil_nullthrows(nt.find(rt=>rt.state==="hasError"),"Invalid loadable passed to loadableAll").contents):loadableWithPromise(Promise.all(nt.map(rt=>rt.contents)))}function loadableAll(nt){const it=(Array.isArray(nt)?nt:Object.getOwnPropertyNames(nt).map(lt=>nt[lt])).map(lt=>isLoadable(lt)?lt:Recoil_isPromise(lt)?loadableWithPromise(lt):loadableWithValue(lt)),st=loadableAllArray(it);return Array.isArray(nt)?st:st.map(lt=>Object.getOwnPropertyNames(nt).reduce((ct,ut,dt)=>({...ct,[ut]:lt[dt]}),{}))}function isLoadable(nt){return nt instanceof BaseLoadable}const LoadableStaticInterface={of:nt=>Recoil_isPromise(nt)?loadableWithPromise(nt):isLoadable(nt)?nt:loadableWithValue(nt),error:nt=>loadableWithError(nt),loading:()=>loadableLoading(),all:loadableAll,isLoadable};var Recoil_Loadable={loadableWithValue,loadableWithError,loadableWithPromise,loadableLoading,loadableAll,isLoadable,RecoilLoadable:LoadableStaticInterface},Recoil_Loadable_1=Recoil_Loadable.loadableWithValue,Recoil_Loadable_2=Recoil_Loadable.loadableWithError,Recoil_Loadable_3=Recoil_Loadable.loadableWithPromise,Recoil_Loadable_4=Recoil_Loadable.loadableLoading,Recoil_Loadable_5=Recoil_Loadable.loadableAll,Recoil_Loadable_6=Recoil_Loadable.isLoadable,Recoil_Loadable_7=Recoil_Loadable.RecoilLoadable,Recoil_Loadable$1=Object.freeze({__proto__:null,loadableWithValue:Recoil_Loadable_1,loadableWithError:Recoil_Loadable_2,loadableWithPromise:Recoil_Loadable_3,loadableLoading:Recoil_Loadable_4,loadableAll:Recoil_Loadable_5,isLoadable:Recoil_Loadable_6,RecoilLoadable:Recoil_Loadable_7});const env={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function readProcessEnvBooleanFlag(nt,rt){var it,st;const lt=(it=define_process_env_default$1[nt])===null||it===void 0||(st=it.toLowerCase())===null||st===void 0?void 0:st.trim();if(lt==null||lt==="")return;if(!["true","false"].includes(lt))throw Recoil_err(`process.env.${nt} value must be 'true', 'false', or empty: ${lt}`);rt(lt==="true")}function readProcessEnvStringArrayFlag(nt,rt){var it;const st=(it=define_process_env_default$1[nt])===null||it===void 0?void 0:it.trim();st==null||st===""||rt(st.split(/\s*,\s*|\s+/))}function applyProcessEnvFlagOverrides(){var nt;typeof process>"u"||((nt=process)===null||nt===void 0?void 0:nt.env)!=null&&(readProcessEnvBooleanFlag("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",rt=>{env.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=rt}),readProcessEnvStringArrayFlag("RECOIL_GKS_ENABLED",rt=>{rt.forEach(it=>{env.RECOIL_GKS_ENABLED.add(it)})}))}applyProcessEnvFlagOverrides();var Recoil_RecoilEnv=env;function Recoil_gkx_OSS(nt){return Recoil_RecoilEnv.RECOIL_GKS_ENABLED.has(nt)}Recoil_gkx_OSS.setPass=nt=>{Recoil_RecoilEnv.RECOIL_GKS_ENABLED.add(nt)};Recoil_gkx_OSS.setFail=nt=>{Recoil_RecoilEnv.RECOIL_GKS_ENABLED.delete(nt)};Recoil_gkx_OSS.clear=()=>{Recoil_RecoilEnv.RECOIL_GKS_ENABLED.clear()};var Recoil_gkx=Recoil_gkx_OSS;function recoverableViolation(nt,rt,{error:it}={}){return null}var recoverableViolation_1=recoverableViolation,Recoil_recoverableViolation=recoverableViolation_1,_createMutableSource,_useMutableSource,_useSyncExternalStore;const createMutableSource=(_createMutableSource=e$2.createMutableSource)!==null&&_createMutableSource!==void 0?_createMutableSource:e$2.unstable_createMutableSource,useMutableSource=(_useMutableSource=e$2.useMutableSource)!==null&&_useMutableSource!==void 0?_useMutableSource:e$2.unstable_useMutableSource,useSyncExternalStore=(_useSyncExternalStore=e$2.useSyncExternalStore)!==null&&_useSyncExternalStore!==void 0?_useSyncExternalStore:e$2.unstable_useSyncExternalStore;function currentRendererSupportsUseSyncExternalStore(){var nt;const{ReactCurrentDispatcher:rt,ReactCurrentOwner:it}=e$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((nt=rt==null?void 0:rt.current)!==null&&nt!==void 0?nt:it.currentDispatcher).useSyncExternalStore!=null}function reactMode(){return Recoil_gkx("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:Recoil_gkx("recoil_sync_external_store")&&useSyncExternalStore!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:Recoil_gkx("recoil_mutable_source")&&useMutableSource!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?Recoil_gkx("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:Recoil_gkx("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function isFastRefreshEnabled(){return!1}var Recoil_ReactMode={createMutableSource,useMutableSource,useSyncExternalStore,currentRendererSupportsUseSyncExternalStore,reactMode,isFastRefreshEnabled};class AbstractRecoilValue{constructor(rt){_defineProperty$2(this,"key",void 0),this.key=rt}toJSON(){return{key:this.key}}}class RecoilState extends AbstractRecoilValue{}class RecoilValueReadOnly extends AbstractRecoilValue{}function isRecoilValue(nt){return nt instanceof RecoilState||nt instanceof RecoilValueReadOnly}var Recoil_RecoilValue={AbstractRecoilValue,RecoilState,RecoilValueReadOnly,isRecoilValue},Recoil_RecoilValue_1=Recoil_RecoilValue.AbstractRecoilValue,Recoil_RecoilValue_2=Recoil_RecoilValue.RecoilState,Recoil_RecoilValue_3=Recoil_RecoilValue.RecoilValueReadOnly,Recoil_RecoilValue_4=Recoil_RecoilValue.isRecoilValue,Recoil_RecoilValue$1=Object.freeze({__proto__:null,AbstractRecoilValue:Recoil_RecoilValue_1,RecoilState:Recoil_RecoilValue_2,RecoilValueReadOnly:Recoil_RecoilValue_3,isRecoilValue:Recoil_RecoilValue_4});function mapIterable(nt,rt){return function*(){let it=0;for(const st of nt)yield rt(st,it++)}()}var Recoil_mapIterable=mapIterable;class DefaultValue{}const DEFAULT_VALUE=new DefaultValue,nodes=new Map,recoilValues=new Map;function recoilValuesForKeys(nt){return Recoil_mapIterable(nt,rt=>Recoil_nullthrows(recoilValues.get(rt)))}function checkForDuplicateAtomKey(nt){if(nodes.has(nt)){const rt=`Duplicate atom key "${nt}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(rt)}}function registerNode(nt){Recoil_RecoilEnv.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&checkForDuplicateAtomKey(nt.key),nodes.set(nt.key,nt);const rt=nt.set==null?new Recoil_RecoilValue$1.RecoilValueReadOnly(nt.key):new Recoil_RecoilValue$1.RecoilState(nt.key);return recoilValues.set(nt.key,rt),rt}class NodeMissingError extends Error{}function getNode(nt){const rt=nodes.get(nt);if(rt==null)throw new NodeMissingError(`Missing definition for RecoilValue: "${nt}""`);return rt}function getNodeMaybe(nt){return nodes.get(nt)}const configDeletionHandlers=new Map;function deleteNodeConfigIfPossible(nt){var rt;if(!Recoil_gkx("recoil_memory_managament_2020"))return;const it=nodes.get(nt);if(it!=null&&(rt=it.shouldDeleteConfigOnRelease)!==null&&rt!==void 0&&rt.call(it)){var st;nodes.delete(nt),(st=getConfigDeletionHandler(nt))===null||st===void 0||st(),configDeletionHandlers.delete(nt)}}function setConfigDeletionHandler(nt,rt){Recoil_gkx("recoil_memory_managament_2020")&&(rt===void 0?configDeletionHandlers.delete(nt):configDeletionHandlers.set(nt,rt))}function getConfigDeletionHandler(nt){return configDeletionHandlers.get(nt)}var Recoil_Node={nodes,recoilValues,registerNode,getNode,getNodeMaybe,deleteNodeConfigIfPossible,setConfigDeletionHandler,getConfigDeletionHandler,recoilValuesForKeys,NodeMissingError,DefaultValue,DEFAULT_VALUE};function enqueueExecution(nt,rt){rt()}var Recoil_Queue={enqueueExecution};function createCommonjsModule(nt,rt){return rt={exports:{}},nt(rt,rt.exports),rt.exports}var hamt_1=createCommonjsModule(function(nt){var rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ar){return typeof Ar}:function(Ar){return Ar&&typeof Symbol=="function"&&Ar.constructor===Symbol&&Ar!==Symbol.prototype?"symbol":typeof Ar},it={},st=5,lt=Math.pow(2,st),ct=lt-1,ut=lt/2,dt=lt/4,ht={},ft=function(or){return function(){return or}},pt=it.hash=function(Ar){var or=typeof Ar>"u"?"undefined":rt(Ar);if(or==="number")return Ar;or!=="string"&&(Ar+="");for(var Wr=0,Ir=0,dn=Ar.length;Ir<dn;++Ir){var kn=Ar.charCodeAt(Ir);Wr=(Wr<<5)-Wr+kn|0}return Wr},mt=function(or){return or-=or>>1&1431655765,or=(or&858993459)+(or>>2&858993459),or=or+(or>>4)&252645135,or+=or>>8,or+=or>>16,or&127},gt=function(or,Wr){return Wr>>>or&ct},xt=function(or){return 1<<or},yt=function(or,Wr){return mt(or&Wr-1)},vt=function(or,Wr,Ir,dn){var kn=dn;if(!or){var Mr=dn.length;kn=new Array(Mr);for(var vn=0;vn<Mr;++vn)kn[vn]=dn[vn]}return kn[Wr]=Ir,kn},St=function(or,Wr,Ir){var dn=Ir.length-1,kn=0,Mr=0,vn=Ir;if(or)kn=Mr=Wr;else for(vn=new Array(dn);kn<Wr;)vn[Mr++]=Ir[kn++];for(++kn;kn<=dn;)vn[Mr++]=Ir[kn++];return or&&(vn.length=dn),vn},wt=function(or,Wr,Ir,dn){var kn=dn.length;if(or){for(var Mr=kn;Mr>=Wr;)dn[Mr--]=dn[Mr];return dn[Wr]=Ir,dn}for(var vn=0,kr=0,Er=new Array(kn+1);vn<Wr;)Er[kr++]=dn[vn++];for(Er[Wr]=Ir;vn<kn;)Er[++kr]=dn[vn++];return Er},Et=1,Rt=2,Tt=3,It=4,At={__hamt_isEmpty:!0},Dt=function(or){return or===At||or&&or.__hamt_isEmpty},jt=function(or,Wr,Ir,dn){return{type:Et,edit:or,hash:Wr,key:Ir,value:dn,_modify:Bt}},Ft=function(or,Wr,Ir){return{type:Rt,edit:or,hash:Wr,children:Ir,_modify:Ht}},Lt=function(or,Wr,Ir){return{type:Tt,edit:or,mask:Wr,children:Ir,_modify:Gt}},Mt=function(or,Wr,Ir){return{type:It,edit:or,size:Wr,children:Ir,_modify:Xt}},Ot=function(or){return or===At||or.type===Et||or.type===Rt},Nt=function(or,Wr,Ir,dn,kn){for(var Mr=[],vn=dn,kr=0,Er=0;vn;++Er)vn&1&&(Mr[Er]=kn[kr++]),vn>>>=1;return Mr[Wr]=Ir,Mt(or,kr+1,Mr)},$t=function(or,Wr,Ir,dn){for(var kn=new Array(Wr-1),Mr=0,vn=0,kr=0,Er=dn.length;kr<Er;++kr)if(kr!==Ir){var Ur=dn[kr];Ur&&!Dt(Ur)&&(kn[Mr++]=Ur,vn|=1<<kr)}return Lt(or,vn,kn)},Vt=function Ar(or,Wr,Ir,dn,kn,Mr){if(Ir===kn)return Ft(or,Ir,[Mr,dn]);var vn=gt(Wr,Ir),kr=gt(Wr,kn);return Lt(or,xt(vn)|xt(kr),vn===kr?[Ar(or,Wr+st,Ir,dn,kn,Mr)]:vn<kr?[dn,Mr]:[Mr,dn])},Ut=function(or,Wr,Ir,dn,kn,Mr,vn,kr){for(var Er=kn.length,Ur=0;Ur<Er;++Ur){var on=kn[Ur];if(Ir(vn,on.key)){var fn=on.value,Kn=Mr(fn);return Kn===fn?kn:Kn===ht?(--kr.value,St(or,Ur,kn)):vt(or,Ur,jt(Wr,dn,vn,Kn),kn)}}var es=Mr();return es===ht?kn:(++kr.value,vt(or,Er,jt(Wr,dn,vn,es),kn))},zt=function(or,Wr){return or===Wr.edit},Bt=function(or,Wr,Ir,dn,kn,Mr,vn){if(Wr(Mr,this.key)){var kr=dn(this.value);return kr===this.value?this:kr===ht?(--vn.value,At):zt(or,this)?(this.value=kr,this):jt(or,kn,Mr,kr)}var Er=dn();return Er===ht?this:(++vn.value,Vt(or,Ir,this.hash,this,kn,jt(or,kn,Mr,Er)))},Ht=function(or,Wr,Ir,dn,kn,Mr,vn){if(kn===this.hash){var kr=zt(or,this),Er=Ut(kr,or,Wr,this.hash,this.children,dn,Mr,vn);return Er===this.children?this:Er.length>1?Ft(or,this.hash,Er):Er[0]}var Ur=dn();return Ur===ht?this:(++vn.value,Vt(or,Ir,this.hash,this,kn,jt(or,kn,Mr,Ur)))},Gt=function(or,Wr,Ir,dn,kn,Mr,vn){var kr=this.mask,Er=this.children,Ur=gt(Ir,kn),on=xt(Ur),fn=yt(kr,on),Kn=kr&on,es=Kn?Er[fn]:At,Zn=es._modify(or,Wr,Ir+st,dn,kn,Mr,vn);if(es===Zn)return this;var Dn=zt(or,this),ss=kr,$s=void 0;if(Kn&&Dt(Zn)){if(ss&=~on,!ss)return At;if(Er.length<=2&&Ot(Er[fn^1]))return Er[fn^1];$s=St(Dn,fn,Er)}else if(!Kn&&!Dt(Zn)){if(Er.length>=ut)return Nt(or,Ur,Zn,kr,Er);ss|=on,$s=wt(Dn,fn,Zn,Er)}else $s=vt(Dn,fn,Zn,Er);return Dn?(this.mask=ss,this.children=$s,this):Lt(or,ss,$s)},Xt=function(or,Wr,Ir,dn,kn,Mr,vn){var kr=this.size,Er=this.children,Ur=gt(Ir,kn),on=Er[Ur],fn=(on||At)._modify(or,Wr,Ir+st,dn,kn,Mr,vn);if(on===fn)return this;var Kn=zt(or,this),es=void 0;if(Dt(on)&&!Dt(fn))++kr,es=vt(Kn,Ur,fn,Er);else if(!Dt(on)&&Dt(fn)){if(--kr,kr<=dt)return $t(or,kr,Ur,Er);es=vt(Kn,Ur,At,Er)}else es=vt(Kn,Ur,fn,Er);return Kn?(this.size=kr,this.children=es,this):Mt(or,kr,es)};At._modify=function(Ar,or,Wr,Ir,dn,kn,Mr){var vn=Ir();return vn===ht?At:(++Mr.value,jt(Ar,dn,kn,vn))};function Zt(Ar,or,Wr,Ir,dn){this._editable=Ar,this._edit=or,this._config=Wr,this._root=Ir,this._size=dn}Zt.prototype.setTree=function(Ar,or){return this._editable?(this._root=Ar,this._size=or,this):Ar===this._root?this:new Zt(this._editable,this._edit,this._config,Ar,or)};var hr=it.tryGetHash=function(Ar,or,Wr,Ir){for(var dn=Ir._root,kn=0,Mr=Ir._config.keyEq;;)switch(dn.type){case Et:return Mr(Wr,dn.key)?dn.value:Ar;case Rt:{if(or===dn.hash)for(var vn=dn.children,kr=0,Er=vn.length;kr<Er;++kr){var Ur=vn[kr];if(Mr(Wr,Ur.key))return Ur.value}return Ar}case Tt:{var on=gt(kn,or),fn=xt(on);if(dn.mask&fn){dn=dn.children[yt(dn.mask,fn)],kn+=st;break}return Ar}case It:{if(dn=dn.children[gt(kn,or)],dn){kn+=st;break}return Ar}default:return Ar}};Zt.prototype.tryGetHash=function(Ar,or,Wr){return hr(Ar,or,Wr,this)};var nr=it.tryGet=function(Ar,or,Wr){return hr(Ar,Wr._config.hash(or),or,Wr)};Zt.prototype.tryGet=function(Ar,or){return nr(Ar,or,this)};var ir=it.getHash=function(Ar,or,Wr){return hr(void 0,Ar,or,Wr)};Zt.prototype.getHash=function(Ar,or){return ir(Ar,or,this)},it.get=function(Ar,or){return hr(void 0,or._config.hash(Ar),Ar,or)},Zt.prototype.get=function(Ar,or){return nr(or,Ar,this)};var yr=it.has=function(Ar,or,Wr){return hr(ht,Ar,or,Wr)!==ht};Zt.prototype.hasHash=function(Ar,or){return yr(Ar,or,this)};var Cr=it.has=function(Ar,or){return yr(or._config.hash(Ar),Ar,or)};Zt.prototype.has=function(Ar){return Cr(Ar,this)};var Sr=function(or,Wr){return or===Wr};it.make=function(Ar){return new Zt(0,0,{keyEq:Ar&&Ar.keyEq||Sr,hash:Ar&&Ar.hash||pt},At,0)},it.empty=it.make();var xr=it.isEmpty=function(Ar){return Ar&&!!Dt(Ar._root)};Zt.prototype.isEmpty=function(){return xr(this)};var gr=it.modifyHash=function(Ar,or,Wr,Ir){var dn={value:Ir._size},kn=Ir._root._modify(Ir._editable?Ir._edit:NaN,Ir._config.keyEq,0,Ar,or,Wr,dn);return Ir.setTree(kn,dn.value)};Zt.prototype.modifyHash=function(Ar,or,Wr){return gr(Wr,Ar,or,this)};var _r=it.modify=function(Ar,or,Wr){return gr(Ar,Wr._config.hash(or),or,Wr)};Zt.prototype.modify=function(Ar,or){return _r(or,Ar,this)};var fr=it.setHash=function(Ar,or,Wr,Ir){return gr(ft(Wr),Ar,or,Ir)};Zt.prototype.setHash=function(Ar,or,Wr){return fr(Ar,or,Wr,this)};var Nr=it.set=function(Ar,or,Wr){return fr(Wr._config.hash(Ar),Ar,or,Wr)};Zt.prototype.set=function(Ar,or){return Nr(Ar,or,this)};var Tr=ft(ht),Hr=it.removeHash=function(Ar,or,Wr){return gr(Tr,Ar,or,Wr)};Zt.prototype.removeHash=Zt.prototype.deleteHash=function(Ar,or){return Hr(Ar,or,this)};var Vr=it.remove=function(Ar,or){return Hr(or._config.hash(Ar),Ar,or)};Zt.prototype.remove=Zt.prototype.delete=function(Ar){return Vr(Ar,this)};var mn=it.beginMutation=function(Ar){return new Zt(Ar._editable+1,Ar._edit+1,Ar._config,Ar._root,Ar._size)};Zt.prototype.beginMutation=function(){return mn(this)};var tn=it.endMutation=function(Ar){return Ar._editable=Ar._editable&&Ar._editable-1,Ar};Zt.prototype.endMutation=function(){return tn(this)};var er=it.mutate=function(Ar,or){var Wr=mn(or);return Ar(Wr),tn(Wr)};Zt.prototype.mutate=function(Ar){return er(Ar,this)};var tr=function(or){return or&&vr(or[0],or[1],or[2],or[3],or[4])},vr=function(or,Wr,Ir,dn,kn){for(;Ir<or;){var Mr=Wr[Ir++];if(Mr&&!Dt(Mr))return Fr(Mr,dn,[or,Wr,Ir,dn,kn])}return tr(kn)},Fr=function(or,Wr,Ir){switch(or.type){case Et:return{value:Wr(or),rest:Ir};case Rt:case It:case Tt:var dn=or.children;return vr(dn.length,dn,0,Wr,Ir);default:return tr(Ir)}},Kr={done:!0};function qr(Ar){this.v=Ar}qr.prototype.next=function(){if(!this.v)return Kr;var Ar=this.v;return this.v=tr(Ar.rest),Ar},qr.prototype[Symbol.iterator]=function(){return this};var pn=function(or,Wr){return new qr(Fr(or._root,Wr))},En=function(or){return[or.key,or.value]},Rn=it.entries=function(Ar){return pn(Ar,En)};Zt.prototype.entries=Zt.prototype[Symbol.iterator]=function(){return Rn(this)};var Qn=function(or){return or.key},Ln=it.keys=function(Ar){return pn(Ar,Qn)};Zt.prototype.keys=function(){return Ln(this)};var ln=function(or){return or.value},Xn=it.values=Zt.prototype.values=function(Ar){return pn(Ar,ln)};Zt.prototype.values=function(){return Xn(this)};var Yr=it.fold=function(Ar,or,Wr){var Ir=Wr._root;if(Ir.type===Et)return Ar(or,Ir.value,Ir.key);for(var dn=[Ir.children],kn=void 0;kn=dn.pop();)for(var Mr=0,vn=kn.length;Mr<vn;){var kr=kn[Mr++];kr&&kr.type&&(kr.type===Et?or=Ar(or,kr.value,kr.key):dn.push(kr.children))}return or};Zt.prototype.fold=function(Ar,or){return Yr(Ar,or,this)};var Qr=it.forEach=function(Ar,or){return Yr(function(Wr,Ir,dn){return Ar(Ir,dn,or)},null,or)};Zt.prototype.forEach=function(Ar){return Qr(Ar,this)};var Mn=it.count=function(Ar){return Ar._size};Zt.prototype.count=function(){return Mn(this)},Object.defineProperty(Zt.prototype,"size",{get:Zt.prototype.count}),nt.exports?nt.exports=it:(void 0).hamt=it});class BuiltInMap{constructor(rt){_defineProperty$2(this,"_map",void 0),this._map=new Map(rt==null?void 0:rt.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(rt){return this._map.get(rt)}has(rt){return this._map.has(rt)}set(rt,it){return this._map.set(rt,it),this}delete(rt){return this._map.delete(rt),this}clone(){return persistentMap(this)}toMap(){return new Map(this._map)}}class HashArrayMappedTrieMap{constructor(rt){if(_defineProperty$2(this,"_hamt",hamt_1.empty.beginMutation()),rt instanceof HashArrayMappedTrieMap){const it=rt._hamt.endMutation();rt._hamt=it.beginMutation(),this._hamt=it.beginMutation()}else if(rt)for(const[it,st]of rt.entries())this._hamt.set(it,st)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(rt){return this._hamt.get(rt)}has(rt){return this._hamt.has(rt)}set(rt,it){return this._hamt.set(rt,it),this}delete(rt){return this._hamt.delete(rt),this}clone(){return persistentMap(this)}toMap(){return new Map(this._hamt)}}function persistentMap(nt){return Recoil_gkx("recoil_hamt_2020")?new HashArrayMappedTrieMap(nt):new BuiltInMap(nt)}var Recoil_PersistentMap={persistentMap},Recoil_PersistentMap_1=Recoil_PersistentMap.persistentMap,Recoil_PersistentMap$1=Object.freeze({__proto__:null,persistentMap:Recoil_PersistentMap_1});function differenceSets(nt,...rt){const it=new Set;e:for(const st of nt){for(const lt of rt)if(lt.has(st))continue e;it.add(st)}return it}var Recoil_differenceSets=differenceSets;function mapMap(nt,rt){const it=new Map;return nt.forEach((st,lt)=>{it.set(lt,rt(st,lt))}),it}var Recoil_mapMap=mapMap;function makeGraph(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function cloneGraph(nt){return{nodeDeps:Recoil_mapMap(nt.nodeDeps,rt=>new Set(rt)),nodeToNodeSubscriptions:Recoil_mapMap(nt.nodeToNodeSubscriptions,rt=>new Set(rt))}}function mergeDepsIntoGraph(nt,rt,it,st){const{nodeDeps:lt,nodeToNodeSubscriptions:ct}=it,ut=lt.get(nt);if(ut&&st&&ut!==st.nodeDeps.get(nt))return;lt.set(nt,rt);const dt=ut==null?rt:Recoil_differenceSets(rt,ut);for(const ht of dt)ct.has(ht)||ct.set(ht,new Set),Recoil_nullthrows(ct.get(ht)).add(nt);if(ut){const ht=Recoil_differenceSets(ut,rt);for(const ft of ht){if(!ct.has(ft))return;const pt=Recoil_nullthrows(ct.get(ft));pt.delete(nt),pt.size===0&&ct.delete(ft)}}}function saveDepsToStore(nt,rt,it,st){var lt,ct,ut,dt;const ht=it.getState();st===ht.currentTree.version||st===((lt=ht.nextTree)===null||lt===void 0?void 0:lt.version)||((ct=ht.previousTree)===null||ct===void 0||ct.version);const ft=it.getGraph(st);if(mergeDepsIntoGraph(nt,rt,ft),st===((ut=ht.previousTree)===null||ut===void 0?void 0:ut.version)){const mt=it.getGraph(ht.currentTree.version);mergeDepsIntoGraph(nt,rt,mt,ft)}if(st===((dt=ht.previousTree)===null||dt===void 0?void 0:dt.version)||st===ht.currentTree.version){var pt;const mt=(pt=ht.nextTree)===null||pt===void 0?void 0:pt.version;if(mt!==void 0){const gt=it.getGraph(mt);mergeDepsIntoGraph(nt,rt,gt,ft)}}}var Recoil_Graph={cloneGraph,graph:makeGraph,saveDepsToStore};let nextTreeStateVersion=0;const getNextTreeStateVersion=()=>nextTreeStateVersion++;let nextStoreID=0;const getNextStoreID=()=>nextStoreID++;let nextComponentID=0;const getNextComponentID=()=>nextComponentID++;var Recoil_Keys={getNextTreeStateVersion,getNextStoreID,getNextComponentID};const{persistentMap:persistentMap$1}=Recoil_PersistentMap$1,{graph}=Recoil_Graph,{getNextTreeStateVersion:getNextTreeStateVersion$1}=Recoil_Keys;function makeEmptyTreeState(){const nt=getNextTreeStateVersion$1();return{version:nt,stateID:nt,transactionMetadata:{},dirtyAtoms:new Set,atomValues:persistentMap$1(),nonvalidatedAtoms:persistentMap$1()}}function makeEmptyStoreState(){const nt=makeEmptyTreeState();return{currentTree:nt,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(nt.version,graph()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var Recoil_State={makeEmptyTreeState,makeEmptyStoreState,getNextTreeStateVersion:getNextTreeStateVersion$1};class RetentionZone{}function retentionZone(){return new RetentionZone}var Recoil_RetentionZone={RetentionZone,retentionZone};function setByAddingToSet(nt,rt){const it=new Set(nt);return it.add(rt),it}function setByDeletingFromSet(nt,rt){const it=new Set(nt);return it.delete(rt),it}function mapBySettingInMap(nt,rt,it){const st=new Map(nt);return st.set(rt,it),st}function mapByUpdatingInMap(nt,rt,it){const st=new Map(nt);return st.set(rt,it(st.get(rt))),st}function mapByDeletingFromMap(nt,rt){const it=new Map(nt);return it.delete(rt),it}function mapByDeletingMultipleFromMap(nt,rt){const it=new Map(nt);return rt.forEach(st=>it.delete(st)),it}var Recoil_CopyOnWrite={setByAddingToSet,setByDeletingFromSet,mapBySettingInMap,mapByUpdatingInMap,mapByDeletingFromMap,mapByDeletingMultipleFromMap};function*filterIterable(nt,rt){let it=0;for(const st of nt)rt(st,it++)&&(yield st)}var Recoil_filterIterable=filterIterable;function lazyProxy(nt,rt){return new Proxy(nt,{get:(st,lt)=>(!(lt in st)&&lt in rt&&(st[lt]=rt[lt]()),st[lt]),ownKeys:st=>Object.keys(st)})}var Recoil_lazyProxy=lazyProxy;const{getNode:getNode$1,getNodeMaybe:getNodeMaybe$1,recoilValuesForKeys:recoilValuesForKeys$1}=Recoil_Node,{RetentionZone:RetentionZone$1}=Recoil_RetentionZone,{setByAddingToSet:setByAddingToSet$1}=Recoil_CopyOnWrite,emptySet=Object.freeze(new Set);class ReadOnlyRecoilValueError extends Error{}function initializeRetentionForNode(nt,rt,it){if(!Recoil_gkx("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:st}=nt.getState().retention;function lt(ct){let ut=st.get(ct);ut||st.set(ct,ut=new Set),ut.add(rt)}if(it instanceof RetentionZone$1)lt(it);else if(Array.isArray(it))for(const ct of it)lt(ct);return()=>{if(!Recoil_gkx("recoil_memory_managament_2020"))return;const{retention:ct}=nt.getState();function ut(dt){const ht=ct.nodesRetainedByZone.get(dt);ht==null||ht.delete(rt),ht&&ht.size===0&&ct.nodesRetainedByZone.delete(dt)}if(it instanceof RetentionZone$1)ut(it);else if(Array.isArray(it))for(const dt of it)ut(dt)}}function initializeNodeIfNewToStore(nt,rt,it,st){const lt=nt.getState();if(lt.nodeCleanupFunctions.has(it))return;const ct=getNode$1(it),ut=initializeRetentionForNode(nt,it,ct.retainedBy),dt=ct.init(nt,rt,st);lt.nodeCleanupFunctions.set(it,()=>{dt(),ut()})}function initializeNode(nt,rt,it){initializeNodeIfNewToStore(nt,nt.getState().currentTree,rt,it)}function cleanUpNode(nt,rt){var it;const st=nt.getState();(it=st.nodeCleanupFunctions.get(rt))===null||it===void 0||it(),st.nodeCleanupFunctions.delete(rt)}function getNodeLoadable(nt,rt,it){return initializeNodeIfNewToStore(nt,rt,it,"get"),getNode$1(it).get(nt,rt)}function peekNodeLoadable(nt,rt,it){return getNode$1(it).peek(nt,rt)}function setUnvalidatedAtomValue_DEPRECATED(nt,rt,it){var st;const lt=getNodeMaybe$1(rt);return lt==null||(st=lt.invalidate)===null||st===void 0||st.call(lt,nt),{...nt,atomValues:nt.atomValues.clone().delete(rt),nonvalidatedAtoms:nt.nonvalidatedAtoms.clone().set(rt,it),dirtyAtoms:setByAddingToSet$1(nt.dirtyAtoms,rt)}}function setNodeValue(nt,rt,it,st){const lt=getNode$1(it);if(lt.set==null)throw new ReadOnlyRecoilValueError(`Attempt to set read-only RecoilValue: ${it}`);const ct=lt.set;return initializeNodeIfNewToStore(nt,rt,it,"set"),ct(nt,rt,st)}function peekNodeInfo(nt,rt,it){const st=nt.getState(),lt=nt.getGraph(rt.version),ct=getNode$1(it).nodeType;return Recoil_lazyProxy({type:ct},{loadable:()=>peekNodeLoadable(nt,rt,it),isActive:()=>st.knownAtoms.has(it)||st.knownSelectors.has(it),isSet:()=>ct==="selector"?!1:rt.atomValues.has(it),isModified:()=>rt.dirtyAtoms.has(it),deps:()=>{var ut;return recoilValuesForKeys$1((ut=lt.nodeDeps.get(it))!==null&&ut!==void 0?ut:[])},subscribers:()=>{var ut,dt;return{nodes:recoilValuesForKeys$1(Recoil_filterIterable(getDownstreamNodes(nt,rt,new Set([it])),ht=>ht!==it)),components:Recoil_mapIterable((ut=(dt=st.nodeToComponentSubscriptions.get(it))===null||dt===void 0?void 0:dt.values())!==null&&ut!==void 0?ut:[],([ht])=>({name:ht}))}}})}function getDownstreamNodes(nt,rt,it){const st=new Set,lt=Array.from(it),ct=nt.getGraph(rt.version);for(let dt=lt.pop();dt;dt=lt.pop()){var ut;st.add(dt);const ht=(ut=ct.nodeToNodeSubscriptions.get(dt))!==null&&ut!==void 0?ut:emptySet;for(const ft of ht)st.has(ft)||lt.push(ft)}return st}var Recoil_FunctionalCore={getNodeLoadable,peekNodeLoadable,setNodeValue,initializeNode,cleanUpNode,setUnvalidatedAtomValue_DEPRECATED,peekNodeInfo,getDownstreamNodes};let _invalidateMemoizedSnapshot=null;function setInvalidateMemoizedSnapshot(nt){_invalidateMemoizedSnapshot=nt}function invalidateMemoizedSnapshot(){var nt;(nt=_invalidateMemoizedSnapshot)===null||nt===void 0||nt()}var Recoil_SnapshotCache={setInvalidateMemoizedSnapshot,invalidateMemoizedSnapshot};const{getDownstreamNodes:getDownstreamNodes$1,getNodeLoadable:getNodeLoadable$1,setNodeValue:setNodeValue$1}=Recoil_FunctionalCore,{getNextComponentID:getNextComponentID$1}=Recoil_Keys,{getNode:getNode$2,getNodeMaybe:getNodeMaybe$2}=Recoil_Node,{DefaultValue:DefaultValue$1}=Recoil_Node,{reactMode:reactMode$1}=Recoil_ReactMode,{AbstractRecoilValue:AbstractRecoilValue$1,RecoilState:RecoilState$1,RecoilValueReadOnly:RecoilValueReadOnly$1,isRecoilValue:isRecoilValue$1}=Recoil_RecoilValue$1,{invalidateMemoizedSnapshot:invalidateMemoizedSnapshot$1}=Recoil_SnapshotCache;function getRecoilValueAsLoadable(nt,{key:rt},it=nt.getState().currentTree){var st,lt;const ct=nt.getState();it.version===ct.currentTree.version||it.version===((st=ct.nextTree)===null||st===void 0?void 0:st.version)||(it.version,(lt=ct.previousTree)===null||lt===void 0||lt.version);const ut=getNodeLoadable$1(nt,it,rt);return ut.state==="loading"&&ut.contents.catch(()=>{}),ut}function applyAtomValueWrites(nt,rt){const it=nt.clone();return rt.forEach((st,lt)=>{st.state==="hasValue"&&st.contents instanceof DefaultValue$1?it.delete(lt):it.set(lt,st)}),it}function valueFromValueOrUpdater(nt,rt,{key:it},st){if(typeof st=="function"){const lt=getNodeLoadable$1(nt,rt,it);if(lt.state==="loading"){const ct=`Tried to set atom or selector "${it}" using an updater function while the current state is pending, this is not currently supported.`;throw Recoil_err(ct)}else if(lt.state==="hasError")throw lt.contents;return st(lt.contents)}else return st}function applyAction(nt,rt,it){if(it.type==="set"){const{recoilValue:lt,valueOrUpdater:ct}=it,ut=valueFromValueOrUpdater(nt,rt,lt,ct),dt=setNodeValue$1(nt,rt,lt.key,ut);for(const[ht,ft]of dt.entries())writeLoadableToTreeState(rt,ht,ft)}else if(it.type==="setLoadable"){const{recoilValue:{key:lt},loadable:ct}=it;writeLoadableToTreeState(rt,lt,ct)}else if(it.type==="markModified"){const{recoilValue:{key:lt}}=it;rt.dirtyAtoms.add(lt)}else if(it.type==="setUnvalidated"){var st;const{recoilValue:{key:lt},unvalidatedValue:ct}=it,ut=getNodeMaybe$2(lt);ut==null||(st=ut.invalidate)===null||st===void 0||st.call(ut,rt),rt.atomValues.delete(lt),rt.nonvalidatedAtoms.set(lt,ct),rt.dirtyAtoms.add(lt)}else Recoil_recoverableViolation(`Unknown action ${it.type}`)}function writeLoadableToTreeState(nt,rt,it){it.state==="hasValue"&&it.contents instanceof DefaultValue$1?nt.atomValues.delete(rt):nt.atomValues.set(rt,it),nt.dirtyAtoms.add(rt),nt.nonvalidatedAtoms.delete(rt)}function applyActionsToStore(nt,rt){nt.replaceState(it=>{const st=copyTreeState(it);for(const lt of rt)applyAction(nt,st,lt);return invalidateDownstreams(nt,st),invalidateMemoizedSnapshot$1(),st})}function queueOrPerformStateUpdate(nt,rt){if(batchStack.length){const it=batchStack[batchStack.length-1];let st=it.get(nt);st||it.set(nt,st=[]),st.push(rt)}else applyActionsToStore(nt,[rt])}const batchStack=[];function batchStart(){const nt=new Map;return batchStack.push(nt),()=>{for(const[rt,it]of nt)applyActionsToStore(rt,it);batchStack.pop()}}function copyTreeState(nt){return{...nt,atomValues:nt.atomValues.clone(),nonvalidatedAtoms:nt.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(nt.dirtyAtoms)}}function invalidateDownstreams(nt,rt){const it=getDownstreamNodes$1(nt,rt,rt.dirtyAtoms);for(const ct of it){var st,lt;(st=getNodeMaybe$2(ct))===null||st===void 0||(lt=st.invalidate)===null||lt===void 0||lt.call(st,rt)}}function setRecoilValue(nt,rt,it){queueOrPerformStateUpdate(nt,{type:"set",recoilValue:rt,valueOrUpdater:it})}function setRecoilValueLoadable(nt,rt,it){if(it instanceof DefaultValue$1)return setRecoilValue(nt,rt,it);queueOrPerformStateUpdate(nt,{type:"setLoadable",recoilValue:rt,loadable:it})}function markRecoilValueModified(nt,rt){queueOrPerformStateUpdate(nt,{type:"markModified",recoilValue:rt})}function setUnvalidatedRecoilValue(nt,rt,it){queueOrPerformStateUpdate(nt,{type:"setUnvalidated",recoilValue:rt,unvalidatedValue:it})}function subscribeToRecoilValue(nt,{key:rt},it,st=null){const lt=getNextComponentID$1(),ct=nt.getState();ct.nodeToComponentSubscriptions.has(rt)||ct.nodeToComponentSubscriptions.set(rt,new Map),Recoil_nullthrows(ct.nodeToComponentSubscriptions.get(rt)).set(lt,[st??"<not captured>",it]);const ut=reactMode$1();if(ut.early&&(ut.mode==="LEGACY"||ut.mode==="MUTABLE_SOURCE")){const dt=nt.getState().nextTree;dt&&dt.dirtyAtoms.has(rt)&&it(dt)}return{release:()=>{const dt=nt.getState(),ht=dt.nodeToComponentSubscriptions.get(rt);ht===void 0||!ht.has(lt)||(ht.delete(lt),ht.size===0&&dt.nodeToComponentSubscriptions.delete(rt))}}}function refreshRecoilValue(nt,rt){var it;const{currentTree:st}=nt.getState(),lt=getNode$2(rt.key);(it=lt.clearCache)===null||it===void 0||it.call(lt,nt,st)}var Recoil_RecoilValueInterface={RecoilValueReadOnly:RecoilValueReadOnly$1,AbstractRecoilValue:AbstractRecoilValue$1,RecoilState:RecoilState$1,getRecoilValueAsLoadable,setRecoilValue,setRecoilValueLoadable,markRecoilValueModified,setUnvalidatedRecoilValue,subscribeToRecoilValue,isRecoilValue:isRecoilValue$1,applyAtomValueWrites,batchStart,writeLoadableToTreeState,invalidateDownstreams,copyTreeState,refreshRecoilValue};function someSet(nt,rt,it){const st=nt.entries();let lt=st.next();for(;!lt.done;){const ct=lt.value;if(rt.call(it,ct[1],ct[0],nt))return!0;lt=st.next()}return!1}var Recoil_someSet=someSet;const{cleanUpNode:cleanUpNode$1}=Recoil_FunctionalCore,{deleteNodeConfigIfPossible:deleteNodeConfigIfPossible$1,getNode:getNode$3}=Recoil_Node,{RetentionZone:RetentionZone$2}=Recoil_RetentionZone,SUSPENSE_TIMEOUT_MS=12e4,emptySet$1=new Set;function releaseRetainablesNowOnCurrentTree(nt,rt){const it=nt.getState(),st=it.currentTree;if(it.nextTree)return;const lt=new Set;for(const ut of rt)if(ut instanceof RetentionZone$2)for(const dt of nodesRetainedByZone(it,ut))lt.add(dt);else lt.add(ut);const ct=findReleasableNodes(nt,lt);for(const ut of ct)releaseNode(nt,st,ut)}function findReleasableNodes(nt,rt){const it=nt.getState(),st=it.currentTree,lt=nt.getGraph(st.version),ct=new Set,ut=new Set;return dt(rt),ct;function dt(ht){const ft=new Set,pt=getDownstreamNodesInTopologicalOrder(nt,st,ht,ct,ut);for(const yt of pt){var mt;if(getNode$3(yt).retainedBy==="recoilRoot"){ut.add(yt);continue}if(((mt=it.retention.referenceCounts.get(yt))!==null&&mt!==void 0?mt:0)>0){ut.add(yt);continue}if(zonesThatCouldRetainNode(yt).some(St=>it.retention.referenceCounts.get(St))){ut.add(yt);continue}const vt=lt.nodeToNodeSubscriptions.get(yt);if(vt&&Recoil_someSet(vt,St=>ut.has(St))){ut.add(yt);continue}ct.add(yt),ft.add(yt)}const gt=new Set;for(const yt of ft)for(const vt of(xt=lt.nodeDeps.get(yt))!==null&&xt!==void 0?xt:emptySet$1){var xt;ct.has(vt)||gt.add(vt)}gt.size&&dt(gt)}}function getDownstreamNodesInTopologicalOrder(nt,rt,it,st,lt){const ct=nt.getGraph(rt.version),ut=[],dt=new Set;for(;it.size>0;)ht(Recoil_nullthrows(it.values().next().value));return ut;function ht(ft){if(st.has(ft)||lt.has(ft)){it.delete(ft);return}if(dt.has(ft))return;const pt=ct.nodeToNodeSubscriptions.get(ft);if(pt)for(const mt of pt)ht(mt);dt.add(ft),it.delete(ft),ut.push(ft)}}function releaseNode(nt,rt,it){if(!Recoil_gkx("recoil_memory_managament_2020"))return;cleanUpNode$1(nt,it);const st=nt.getState();st.knownAtoms.delete(it),st.knownSelectors.delete(it),st.nodeTransactionSubscriptions.delete(it),st.retention.referenceCounts.delete(it);const lt=zonesThatCouldRetainNode(it);for(const ht of lt){var ct;(ct=st.retention.nodesRetainedByZone.get(ht))===null||ct===void 0||ct.delete(it)}rt.atomValues.delete(it),rt.dirtyAtoms.delete(it),rt.nonvalidatedAtoms.delete(it);const ut=st.graphsByVersion.get(rt.version);if(ut){const ht=ut.nodeDeps.get(it);if(ht!==void 0){ut.nodeDeps.delete(it);for(const ft of ht){var dt;(dt=ut.nodeToNodeSubscriptions.get(ft))===null||dt===void 0||dt.delete(it)}}ut.nodeToNodeSubscriptions.delete(it)}deleteNodeConfigIfPossible$1(it)}function nodesRetainedByZone(nt,rt){var it;return(it=nt.retention.nodesRetainedByZone.get(rt))!==null&&it!==void 0?it:emptySet$1}function zonesThatCouldRetainNode(nt){const rt=getNode$3(nt).retainedBy;return rt===void 0||rt==="components"||rt==="recoilRoot"?[]:rt instanceof RetentionZone$2?[rt]:rt}function scheduleOrPerformPossibleReleaseOfRetainable(nt,rt){const it=nt.getState();it.nextTree?it.retention.retainablesToCheckForRelease.add(rt):releaseRetainablesNowOnCurrentTree(nt,new Set([rt]))}function updateRetainCount(nt,rt,it){var st;if(!Recoil_gkx("recoil_memory_managament_2020"))return;const lt=nt.getState().retention.referenceCounts,ct=((st=lt.get(rt))!==null&&st!==void 0?st:0)+it;ct===0?updateRetainCountToZero(nt,rt):lt.set(rt,ct)}function updateRetainCountToZero(nt,rt){if(!Recoil_gkx("recoil_memory_managament_2020"))return;nt.getState().retention.referenceCounts.delete(rt),scheduleOrPerformPossibleReleaseOfRetainable(nt,rt)}function releaseScheduledRetainablesNow(nt){if(!Recoil_gkx("recoil_memory_managament_2020"))return;const rt=nt.getState();releaseRetainablesNowOnCurrentTree(nt,rt.retention.retainablesToCheckForRelease),rt.retention.retainablesToCheckForRelease.clear()}function retainedByOptionWithDefault(nt){return nt===void 0?"recoilRoot":nt}var Recoil_Retention={SUSPENSE_TIMEOUT_MS,updateRetainCount,updateRetainCountToZero,releaseScheduledRetainablesNow,retainedByOptionWithDefault};const{unstable_batchedUpdates}=reactDom;var ReactBatchedUpdates={unstable_batchedUpdates};const{unstable_batchedUpdates:unstable_batchedUpdates$1}=ReactBatchedUpdates;var Recoil_ReactBatchedUpdates={unstable_batchedUpdates:unstable_batchedUpdates$1};const{batchStart:batchStart$1}=Recoil_RecoilValueInterface,{unstable_batchedUpdates:unstable_batchedUpdates$2}=Recoil_ReactBatchedUpdates;let batcher=unstable_batchedUpdates$2||(nt=>nt());const setBatcher=nt=>{batcher=nt},getBatcher=()=>batcher,batchUpdates=nt=>{batcher(()=>{let rt=()=>{};try{rt=batchStart$1(),nt()}finally{rt()}})};var Recoil_Batching={getBatcher,setBatcher,batchUpdates};function*concatIterables(nt){for(const rt of nt)for(const it of rt)yield it}var Recoil_concatIterables=concatIterables;const isSSR$1=typeof Window>"u"||typeof window>"u",isWindow=nt=>!isSSR$1&&(nt===window||nt instanceof Window),isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative";var Recoil_Environment={isSSR:isSSR$1,isReactNative,isWindow};function memoizeWithArgsHash(nt,rt){let it;return(...st)=>{it||(it={});const lt=rt(...st);return Object.hasOwnProperty.call(it,lt)||(it[lt]=nt(...st)),it[lt]}}function memoizeOneWithArgsHash(nt,rt){let it,st;return(...lt)=>{const ct=rt(...lt);return it===ct||(it=ct,st=nt(...lt)),st}}function memoizeOneWithArgsHashAndInvalidation(nt,rt){let it,st;return[(...ut)=>{const dt=rt(...ut);return it===dt||(it=dt,st=nt(...ut)),st},()=>{it=null}]}var Recoil_Memoize={memoizeWithArgsHash,memoizeOneWithArgsHash,memoizeOneWithArgsHashAndInvalidation};const{batchUpdates:batchUpdates$1}=Recoil_Batching,{initializeNode:initializeNode$1,peekNodeInfo:peekNodeInfo$1}=Recoil_FunctionalCore,{graph:graph$1}=Recoil_Graph,{getNextStoreID:getNextStoreID$1}=Recoil_Keys,{DEFAULT_VALUE:DEFAULT_VALUE$1,recoilValues:recoilValues$1,recoilValuesForKeys:recoilValuesForKeys$2}=Recoil_Node,{AbstractRecoilValue:AbstractRecoilValue$2,getRecoilValueAsLoadable:getRecoilValueAsLoadable$1,setRecoilValue:setRecoilValue$1,setUnvalidatedRecoilValue:setUnvalidatedRecoilValue$1}=Recoil_RecoilValueInterface,{updateRetainCount:updateRetainCount$1}=Recoil_Retention,{setInvalidateMemoizedSnapshot:setInvalidateMemoizedSnapshot$1}=Recoil_SnapshotCache,{getNextTreeStateVersion:getNextTreeStateVersion$2,makeEmptyStoreState:makeEmptyStoreState$1}=Recoil_State,{isSSR:isSSR$1$1}=Recoil_Environment,{memoizeOneWithArgsHashAndInvalidation:memoizeOneWithArgsHashAndInvalidation$1}=Recoil_Memoize;class Snapshot{constructor(rt,it){_defineProperty$2(this,"_store",void 0),_defineProperty$2(this,"_refCount",1),_defineProperty$2(this,"getLoadable",st=>(this.checkRefCount_INTERNAL(),getRecoilValueAsLoadable$1(this._store,st))),_defineProperty$2(this,"getPromise",st=>(this.checkRefCount_INTERNAL(),this.getLoadable(st).toPromise())),_defineProperty$2(this,"getNodes_UNSTABLE",st=>{if(this.checkRefCount_INTERNAL(),(st==null?void 0:st.isModified)===!0){if((st==null?void 0:st.isInitialized)===!1)return[];const ut=this._store.getState().currentTree;return recoilValuesForKeys$2(ut.dirtyAtoms)}const lt=this._store.getState().knownAtoms,ct=this._store.getState().knownSelectors;return(st==null?void 0:st.isInitialized)==null?recoilValues$1.values():st.isInitialized===!0?recoilValuesForKeys$2(Recoil_concatIterables([lt,ct])):Recoil_filterIterable(recoilValues$1.values(),({key:ut})=>!lt.has(ut)&&!ct.has(ut))}),_defineProperty$2(this,"getInfo_UNSTABLE",({key:st})=>(this.checkRefCount_INTERNAL(),peekNodeInfo$1(this._store,this._store.getState().currentTree,st))),_defineProperty$2(this,"map",st=>{this.checkRefCount_INTERNAL();const lt=new MutableSnapshot(this,batchUpdates$1);return st(lt),lt}),_defineProperty$2(this,"asyncMap",async st=>{this.checkRefCount_INTERNAL();const lt=new MutableSnapshot(this,batchUpdates$1);return lt.retain(),await st(lt),lt.autoRelease_INTERNAL(),lt}),this._store={storeID:getNextStoreID$1(),parentStoreID:it,getState:()=>rt,replaceState:st=>{rt.currentTree=st(rt.currentTree)},getGraph:st=>{const lt=rt.graphsByVersion;if(lt.has(st))return Recoil_nullthrows(lt.get(st));const ct=graph$1();return lt.set(st,ct),ct},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Recoil_err("Cannot subscribe to Snapshots")}};for(const st of this._store.getState().knownAtoms)initializeNode$1(this._store,st,"get"),updateRetainCount$1(this._store,st,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let rt=!1;return()=>{rt||(rt=!0,this._release())}}autoRelease_INTERNAL(){isSSR$1$1||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(rt=>rt()),this._store.getState().nodeCleanupFunctions.clear(),!Recoil_gkx("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){Recoil_gkx("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function cloneStoreState(nt,rt,it=!1){const st=nt.getState(),lt=it?getNextTreeStateVersion$2():rt.version;return{currentTree:{version:it?lt:rt.version,stateID:it?lt:rt.stateID,transactionMetadata:{...rt.transactionMetadata},dirtyAtoms:new Set(rt.dirtyAtoms),atomValues:rt.atomValues.clone(),nonvalidatedAtoms:rt.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(st.knownAtoms),knownSelectors:new Set(st.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(lt,nt.getGraph(rt.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(Recoil_mapIterable(st.nodeCleanupFunctions.entries(),([ct])=>[ct,()=>{}]))}}function freshSnapshot(nt){const rt=new Snapshot(makeEmptyStoreState$1());return nt!=null?rt.map(nt):rt}const[memoizedCloneSnapshot,invalidateMemoizedSnapshot$2]=memoizeOneWithArgsHashAndInvalidation$1((nt,rt)=>{var it;const st=nt.getState(),lt=rt==="latest"?(it=st.nextTree)!==null&&it!==void 0?it:st.currentTree:Recoil_nullthrows(st.previousTree);return new Snapshot(cloneStoreState(nt,lt),nt.storeID)},(nt,rt)=>{var it,st;return String(rt)+String(nt.storeID)+String((it=nt.getState().nextTree)===null||it===void 0?void 0:it.version)+String(nt.getState().currentTree.version)+String((st=nt.getState().previousTree)===null||st===void 0?void 0:st.version)});setInvalidateMemoizedSnapshot$1(invalidateMemoizedSnapshot$2);function cloneSnapshot(nt,rt="latest"){const it=memoizedCloneSnapshot(nt,rt);return it.isRetained()?it:(invalidateMemoizedSnapshot$2(),memoizedCloneSnapshot(nt,rt))}class MutableSnapshot extends Snapshot{constructor(rt,it){super(cloneStoreState(rt.getStore_INTERNAL(),rt.getStore_INTERNAL().getState().currentTree,!0),rt.getStoreID()),_defineProperty$2(this,"_batch",void 0),_defineProperty$2(this,"set",(st,lt)=>{this.checkRefCount_INTERNAL();const ct=this.getStore_INTERNAL();this._batch(()=>{updateRetainCount$1(ct,st.key,1),setRecoilValue$1(this.getStore_INTERNAL(),st,lt)})}),_defineProperty$2(this,"reset",st=>{this.checkRefCount_INTERNAL();const lt=this.getStore_INTERNAL();this._batch(()=>{updateRetainCount$1(lt,st.key,1),setRecoilValue$1(this.getStore_INTERNAL(),st,DEFAULT_VALUE$1)})}),_defineProperty$2(this,"setUnvalidatedAtomValues_DEPRECATED",st=>{this.checkRefCount_INTERNAL();const lt=this.getStore_INTERNAL();batchUpdates$1(()=>{for(const[ct,ut]of st.entries())updateRetainCount$1(lt,ct,1),setUnvalidatedRecoilValue$1(lt,new AbstractRecoilValue$2(ct),ut)})}),this._batch=it}}var Recoil_Snapshot={Snapshot,MutableSnapshot,freshSnapshot,cloneSnapshot},Recoil_Snapshot_1=Recoil_Snapshot.Snapshot,Recoil_Snapshot_2=Recoil_Snapshot.MutableSnapshot,Recoil_Snapshot_3=Recoil_Snapshot.freshSnapshot,Recoil_Snapshot_4=Recoil_Snapshot.cloneSnapshot,Recoil_Snapshot$1=Object.freeze({__proto__:null,Snapshot:Recoil_Snapshot_1,MutableSnapshot:Recoil_Snapshot_2,freshSnapshot:Recoil_Snapshot_3,cloneSnapshot:Recoil_Snapshot_4});function unionSets(...nt){const rt=new Set;for(const it of nt)for(const st of it)rt.add(st);return rt}var Recoil_unionSets=unionSets;const{useRef}=e$2;function useRefInitOnce(nt){const rt=useRef(nt);return rt.current===nt&&typeof nt=="function"&&(rt.current=nt()),rt}var Recoil_useRefInitOnce=useRefInitOnce;const{getNextTreeStateVersion:getNextTreeStateVersion$3,makeEmptyStoreState:makeEmptyStoreState$2}=Recoil_State,{cleanUpNode:cleanUpNode$2,getDownstreamNodes:getDownstreamNodes$2,initializeNode:initializeNode$2,setNodeValue:setNodeValue$2,setUnvalidatedAtomValue_DEPRECATED:setUnvalidatedAtomValue_DEPRECATED$1}=Recoil_FunctionalCore,{graph:graph$2}=Recoil_Graph,{cloneGraph:cloneGraph$1}=Recoil_Graph,{getNextStoreID:getNextStoreID$2}=Recoil_Keys,{createMutableSource:createMutableSource$1,reactMode:reactMode$2}=Recoil_ReactMode,{applyAtomValueWrites:applyAtomValueWrites$1}=Recoil_RecoilValueInterface,{releaseScheduledRetainablesNow:releaseScheduledRetainablesNow$1}=Recoil_Retention,{freshSnapshot:freshSnapshot$1}=Recoil_Snapshot$1,{useCallback,useContext,useEffect,useMemo,useRef:useRef$1,useState}=e$2;function notInAContext(){throw Recoil_err("This component must be used inside a <RecoilRoot> component.")}const defaultStore=Object.freeze({storeID:getNextStoreID$2(),getState:notInAContext,replaceState:notInAContext,getGraph:notInAContext,subscribeToTransactions:notInAContext,addTransactionMetadata:notInAContext});let stateReplacerIsBeingExecuted=!1;function startNextTreeIfNeeded(nt){if(stateReplacerIsBeingExecuted)throw Recoil_err("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const rt=nt.getState();if(rt.nextTree===null){Recoil_gkx("recoil_memory_managament_2020")&&Recoil_gkx("recoil_release_on_cascading_update_killswitch_2021")&&rt.commitDepth>0&&releaseScheduledRetainablesNow$1(nt);const it=rt.currentTree.version,st=getNextTreeStateVersion$3();rt.nextTree={...rt.currentTree,version:st,stateID:st,dirtyAtoms:new Set,transactionMetadata:{}},rt.graphsByVersion.set(st,cloneGraph$1(Recoil_nullthrows(rt.graphsByVersion.get(it))))}}const AppContext=e$2.createContext({current:defaultStore}),useStoreRef=()=>useContext(AppContext),MutableSourceContext=e$2.createContext(null);function useRecoilMutableSource(){return useContext(MutableSourceContext)}function notifyComponents(nt,rt,it){const st=getDownstreamNodes$2(nt,it,it.dirtyAtoms);for(const lt of st){const ct=rt.nodeToComponentSubscriptions.get(lt);if(ct)for(const[ut,[dt,ht]]of ct)ht(it)}}function sendEndOfBatchNotifications(nt){const rt=nt.getState(),it=rt.currentTree,st=it.dirtyAtoms;if(st.size){for(const[lt,ct]of rt.nodeTransactionSubscriptions)if(st.has(lt))for(const[ut,dt]of ct)dt(nt);for(const[lt,ct]of rt.transactionSubscriptions)ct(nt);(!reactMode$2().early||rt.suspendedComponentResolvers.size>0)&&(notifyComponents(nt,rt,it),rt.suspendedComponentResolvers.forEach(lt=>lt()),rt.suspendedComponentResolvers.clear())}rt.queuedComponentCallbacks_DEPRECATED.forEach(lt=>lt(it)),rt.queuedComponentCallbacks_DEPRECATED.splice(0,rt.queuedComponentCallbacks_DEPRECATED.length)}function endBatch(nt){const rt=nt.getState();rt.commitDepth++;try{const{nextTree:it}=rt;if(it==null)return;rt.previousTree=rt.currentTree,rt.currentTree=it,rt.nextTree=null,sendEndOfBatchNotifications(nt),rt.previousTree!=null?rt.graphsByVersion.delete(rt.previousTree.version):Recoil_recoverableViolation("Ended batch with no previous state, which is unexpected","recoil"),rt.previousTree=null,Recoil_gkx("recoil_memory_managament_2020")&&it==null&&releaseScheduledRetainablesNow$1(nt)}finally{rt.commitDepth--}}function Batcher({setNotifyBatcherOfChange:nt}){const rt=useStoreRef(),[,it]=useState([]);return nt(()=>it({})),useEffect(()=>(nt(()=>it({})),()=>{nt(()=>{})}),[nt]),useEffect(()=>{Recoil_Queue.enqueueExecution("Batcher",()=>{endBatch(rt.current)})}),null}function initialStoreState_DEPRECATED(nt,rt){const it=makeEmptyStoreState$2();return rt({set:(st,lt)=>{const ct=it.currentTree,ut=setNodeValue$2(nt,ct,st.key,lt),dt=new Set(ut.keys()),ht=ct.nonvalidatedAtoms.clone();for(const ft of dt)ht.delete(ft);it.currentTree={...ct,dirtyAtoms:Recoil_unionSets(ct.dirtyAtoms,dt),atomValues:applyAtomValueWrites$1(ct.atomValues,ut),nonvalidatedAtoms:ht}},setUnvalidatedAtomValues:st=>{st.forEach((lt,ct)=>{it.currentTree=setUnvalidatedAtomValue_DEPRECATED$1(it.currentTree,ct,lt)})}}),it}function initialStoreState(nt){const rt=freshSnapshot$1(nt),it=rt.getStore_INTERNAL().getState();return rt.retain(),it.nodeCleanupFunctions.forEach(st=>st()),it.nodeCleanupFunctions.clear(),it}let nextID=0;function RecoilRoot_INTERNAL({initializeState_DEPRECATED:nt,initializeState:rt,store_INTERNAL:it,children:st}){let lt;const ct=xt=>{const yt=lt.current.graphsByVersion;if(yt.has(xt))return Recoil_nullthrows(yt.get(xt));const vt=graph$2();return yt.set(xt,vt),vt},ut=(xt,yt)=>{if(yt==null){const{transactionSubscriptions:vt}=mt.current.getState(),St=nextID++;return vt.set(St,xt),{release:()=>{vt.delete(St)}}}else{const{nodeTransactionSubscriptions:vt}=mt.current.getState();vt.has(yt)||vt.set(yt,new Map);const St=nextID++;return Recoil_nullthrows(vt.get(yt)).set(St,xt),{release:()=>{const wt=vt.get(yt);wt&&(wt.delete(St),wt.size===0&&vt.delete(yt))}}}},dt=xt=>{startNextTreeIfNeeded(mt.current);for(const yt of Object.keys(xt))Recoil_nullthrows(mt.current.getState().nextTree).transactionMetadata[yt]=xt[yt]},ht=xt=>{startNextTreeIfNeeded(mt.current);const yt=Recoil_nullthrows(lt.current.nextTree);let vt;try{stateReplacerIsBeingExecuted=!0,vt=xt(yt)}finally{stateReplacerIsBeingExecuted=!1}vt!==yt&&(lt.current.nextTree=vt,reactMode$2().early&&notifyComponents(mt.current,lt.current,vt),Recoil_nullthrows(ft.current)())},ft=useRef$1(null),pt=useCallback(xt=>{ft.current=xt},[ft]),mt=Recoil_useRefInitOnce(()=>it??{storeID:getNextStoreID$2(),getState:()=>lt.current,replaceState:ht,getGraph:ct,subscribeToTransactions:ut,addTransactionMetadata:dt});it!=null&&(mt.current=it),lt=Recoil_useRefInitOnce(()=>nt!=null?initialStoreState_DEPRECATED(mt.current,nt):rt!=null?initialStoreState(rt):makeEmptyStoreState$2());const gt=useMemo(()=>createMutableSource$1==null?void 0:createMutableSource$1(lt,()=>lt.current.currentTree.version),[lt]);return useEffect(()=>{const xt=mt.current;for(const yt of new Set(xt.getState().knownAtoms))initializeNode$2(xt,yt,"get");return()=>{for(const yt of xt.getState().knownAtoms)cleanUpNode$2(xt,yt)}},[mt]),e$2.createElement(AppContext.Provider,{value:mt},e$2.createElement(MutableSourceContext.Provider,{value:gt},e$2.createElement(Batcher,{setNotifyBatcherOfChange:pt}),st))}function RecoilRoot(nt){const{override:rt,...it}=nt,st=useStoreRef();return rt===!1&&st.current!==defaultStore?nt.children:e$2.createElement(RecoilRoot_INTERNAL,it)}function useRecoilStoreID(){return useStoreRef().current.storeID}var Recoil_RecoilRoot={RecoilRoot,useStoreRef,useRecoilMutableSource,useRecoilStoreID,notifyComponents_FOR_TESTING:notifyComponents,sendEndOfBatchNotifications_FOR_TESTING:sendEndOfBatchNotifications};function shallowArrayEqual(nt,rt){if(nt===rt)return!0;if(nt.length!==rt.length)return!1;for(let it=0,st=nt.length;it<st;it++)if(nt[it]!==rt[it])return!1;return!0}var Recoil_shallowArrayEqual=shallowArrayEqual;const{useEffect:useEffect$1,useRef:useRef$2}=e$2;function usePrevious(nt){const rt=useRef$2();return useEffect$1(()=>{rt.current=nt}),rt.current}var Recoil_usePrevious=usePrevious;const{useStoreRef:useStoreRef$1}=Recoil_RecoilRoot,{SUSPENSE_TIMEOUT_MS:SUSPENSE_TIMEOUT_MS$1}=Recoil_Retention,{updateRetainCount:updateRetainCount$2}=Recoil_Retention,{RetentionZone:RetentionZone$3}=Recoil_RetentionZone,{useEffect:useEffect$2,useRef:useRef$3}=e$2,{isSSR:isSSR$2}=Recoil_Environment;function useRetain(nt){if(Recoil_gkx("recoil_memory_managament_2020"))return useRetain_ACTUAL(nt)}function useRetain_ACTUAL(nt){const it=(Array.isArray(nt)?nt:[nt]).map(ut=>ut instanceof RetentionZone$3?ut:ut.key),st=useStoreRef$1();useEffect$2(()=>{if(!Recoil_gkx("recoil_memory_managament_2020"))return;const ut=st.current;if(lt.current&&!isSSR$2)window.clearTimeout(lt.current),lt.current=null;else for(const dt of it)updateRetainCount$2(ut,dt,1);return()=>{for(const dt of it)updateRetainCount$2(ut,dt,-1)}},[st,...it]);const lt=useRef$3(),ct=Recoil_usePrevious(it);if(!isSSR$2&&(ct===void 0||!Recoil_shallowArrayEqual(ct,it))){const ut=st.current;for(const dt of it)updateRetainCount$2(ut,dt,1);if(ct)for(const dt of ct)updateRetainCount$2(ut,dt,-1);lt.current&&window.clearTimeout(lt.current),lt.current=window.setTimeout(()=>{lt.current=null;for(const dt of it)updateRetainCount$2(ut,dt,-1)},SUSPENSE_TIMEOUT_MS$1)}}var Recoil_useRetain=useRetain;function useComponentName(){return"<component name not available>"}var Recoil_useComponentName=useComponentName;const{batchUpdates:batchUpdates$2}=Recoil_Batching,{DEFAULT_VALUE:DEFAULT_VALUE$2}=Recoil_Node,{currentRendererSupportsUseSyncExternalStore:currentRendererSupportsUseSyncExternalStore$1,reactMode:reactMode$3,useMutableSource:useMutableSource$1,useSyncExternalStore:useSyncExternalStore$1}=Recoil_ReactMode,{useRecoilMutableSource:useRecoilMutableSource$1,useStoreRef:useStoreRef$2}=Recoil_RecoilRoot,{AbstractRecoilValue:AbstractRecoilValue$3,getRecoilValueAsLoadable:getRecoilValueAsLoadable$2,setRecoilValue:setRecoilValue$2,setUnvalidatedRecoilValue:setUnvalidatedRecoilValue$2,subscribeToRecoilValue:subscribeToRecoilValue$1}=Recoil_RecoilValueInterface,{useCallback:useCallback$1,useEffect:useEffect$3,useMemo:useMemo$1,useRef:useRef$4,useState:useState$1}=e$2,{setByAddingToSet:setByAddingToSet$2}=Recoil_CopyOnWrite,{isSSR:isSSR$3}=Recoil_Environment;function handleLoadable(nt,rt,it){if(nt.state==="hasValue")return nt.contents;throw nt.state==="loading"?new Promise(lt=>{const ct=it.current.getState().suspendedComponentResolvers;ct.add(lt),isSSR$3&&Recoil_isPromise(nt.contents)&&nt.contents.finally(()=>{ct.delete(lt)})}):nt.state==="hasError"?nt.contents:Recoil_err(`Invalid value of loadable atom "${rt.key}"`)}function useRecoilInterface_DEPRECATED(){const nt=Recoil_useComponentName(),rt=useStoreRef$2(),[,it]=useState$1([]),st=useRef$4(new Set);st.current=new Set;const lt=useRef$4(new Set),ct=useRef$4(new Map),ut=useCallback$1(ht=>{const ft=ct.current.get(ht);ft&&(ft.release(),ct.current.delete(ht))},[ct]),dt=useCallback$1((ht,ft)=>{ct.current.has(ft)&&it([])},[]);return useEffect$3(()=>{const ht=rt.current;Recoil_differenceSets(st.current,lt.current).forEach(ft=>{if(ct.current.has(ft))return;const pt=subscribeToRecoilValue$1(ht,new AbstractRecoilValue$3(ft),gt=>dt(gt,ft),nt);ct.current.set(ft,pt),ht.getState().nextTree?ht.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{dt(ht.getState(),ft)}):dt(ht.getState(),ft)}),Recoil_differenceSets(lt.current,st.current).forEach(ft=>{ut(ft)}),lt.current=st.current}),useEffect$3(()=>{const ht=ct.current;return Recoil_differenceSets(st.current,new Set(ht.keys())).forEach(ft=>{const pt=subscribeToRecoilValue$1(rt.current,new AbstractRecoilValue$3(ft),mt=>dt(mt,ft),nt);ht.set(ft,pt)}),()=>ht.forEach((ft,pt)=>ut(pt))},[nt,rt,ut,dt]),useMemo$1(()=>{function ht(yt){return vt=>{setRecoilValue$2(rt.current,yt,vt)}}function ft(yt){return()=>setRecoilValue$2(rt.current,yt,DEFAULT_VALUE$2)}function pt(yt){var vt;st.current.has(yt.key)||(st.current=setByAddingToSet$2(st.current,yt.key));const St=rt.current.getState();return getRecoilValueAsLoadable$2(rt.current,yt,reactMode$3().early&&(vt=St.nextTree)!==null&&vt!==void 0?vt:St.currentTree)}function mt(yt){const vt=pt(yt);return handleLoadable(vt,yt,rt)}function gt(yt){return[mt(yt),ht(yt)]}function xt(yt){return[pt(yt),ht(yt)]}return{getRecoilValue:mt,getRecoilValueLoadable:pt,getRecoilState:gt,getRecoilStateLoadable:xt,getSetRecoilState:ht,getResetRecoilState:ft}},[st,rt])}const recoilComponentGetRecoilValueCount_FOR_TESTING={current:0};function useRecoilValueLoadable_SYNC_EXTERNAL_STORE(nt){const rt=useStoreRef$2(),it=Recoil_useComponentName(),st=useCallback$1(()=>{var dt;const ht=rt.current,ft=ht.getState(),pt=reactMode$3().early&&(dt=ft.nextTree)!==null&&dt!==void 0?dt:ft.currentTree;return{loadable:getRecoilValueAsLoadable$2(ht,nt,pt),key:nt.key}},[rt,nt]),lt=useCallback$1(dt=>{let ht;return()=>{var ft,pt;const mt=dt();return(ft=ht)!==null&&ft!==void 0&&ft.loadable.is(mt.loadable)&&((pt=ht)===null||pt===void 0?void 0:pt.key)===mt.key?ht:(ht=mt,mt)}},[]),ct=useMemo$1(()=>lt(st),[st,lt]),ut=useCallback$1(dt=>{const ht=rt.current;return subscribeToRecoilValue$1(ht,nt,dt,it).release},[rt,nt,it]);return useSyncExternalStore$1(ut,ct,ct).loadable}function useRecoilValueLoadable_MUTABLE_SOURCE(nt){const rt=useStoreRef$2(),it=useCallback$1(()=>{var ft;const pt=rt.current,mt=pt.getState(),gt=reactMode$3().early&&(ft=mt.nextTree)!==null&&ft!==void 0?ft:mt.currentTree;return getRecoilValueAsLoadable$2(pt,nt,gt)},[rt,nt]),st=useCallback$1(()=>it(),[it]),lt=Recoil_useComponentName(),ct=useCallback$1((ft,pt)=>{const mt=rt.current;return subscribeToRecoilValue$1(mt,nt,()=>{if(!Recoil_gkx("recoil_suppress_rerender_in_callback"))return pt();const xt=it();ht.current.is(xt)||pt(),ht.current=xt},lt).release},[rt,nt,lt,it]),ut=useRecoilMutableSource$1();if(ut==null)throw Recoil_err("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const dt=useMutableSource$1(ut,st,ct),ht=useRef$4(dt);return useEffect$3(()=>{ht.current=dt}),dt}function useRecoilValueLoadable_TRANSITION_SUPPORT(nt){const rt=useStoreRef$2(),it=Recoil_useComponentName(),st=useCallback$1(()=>{var ht;const ft=rt.current,pt=ft.getState(),mt=reactMode$3().early&&(ht=pt.nextTree)!==null&&ht!==void 0?ht:pt.currentTree;return getRecoilValueAsLoadable$2(ft,nt,mt)},[rt,nt]),lt=useCallback$1(()=>({loadable:st(),key:nt.key}),[st,nt.key]),ct=useCallback$1(ht=>{const ft=lt();return ht.loadable.is(ft.loadable)&&ht.key===ft.key?ht:ft},[lt]);useEffect$3(()=>{const ht=subscribeToRecoilValue$1(rt.current,nt,ft=>{dt(ct)},it);return dt(ct),ht.release},[it,nt,rt,ct]);const[ut,dt]=useState$1(lt);return ut.key!==nt.key?lt().loadable:ut.loadable}function useRecoilValueLoadable_LEGACY(nt){const rt=useStoreRef$2(),[,it]=useState$1([]),st=Recoil_useComponentName(),lt=useCallback$1(()=>{var dt;const ht=rt.current,ft=ht.getState(),pt=reactMode$3().early&&(dt=ft.nextTree)!==null&&dt!==void 0?dt:ft.currentTree;return getRecoilValueAsLoadable$2(ht,nt,pt)},[rt,nt]),ct=lt(),ut=useRef$4(ct);return useEffect$3(()=>{ut.current=ct}),useEffect$3(()=>{const dt=rt.current,ht=dt.getState(),ft=subscribeToRecoilValue$1(dt,nt,mt=>{var gt;if(!Recoil_gkx("recoil_suppress_rerender_in_callback"))return it([]);const xt=lt();(gt=ut.current)!==null&&gt!==void 0&&gt.is(xt)||it(xt),ut.current=xt},st);if(ht.nextTree)dt.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{ut.current=null,it([])});else{var pt;if(!Recoil_gkx("recoil_suppress_rerender_in_callback"))return it([]);const mt=lt();(pt=ut.current)!==null&&pt!==void 0&&pt.is(mt)||it(mt),ut.current=mt}return ft.release},[st,lt,nt,rt]),ct}function useRecoilValueLoadable(nt){return Recoil_gkx("recoil_memory_managament_2020")&&Recoil_useRetain(nt),{TRANSITION_SUPPORT:useRecoilValueLoadable_TRANSITION_SUPPORT,SYNC_EXTERNAL_STORE:currentRendererSupportsUseSyncExternalStore$1()?useRecoilValueLoadable_SYNC_EXTERNAL_STORE:useRecoilValueLoadable_TRANSITION_SUPPORT,MUTABLE_SOURCE:useRecoilValueLoadable_MUTABLE_SOURCE,LEGACY:useRecoilValueLoadable_LEGACY}[reactMode$3().mode](nt)}function useRecoilValue(nt){const rt=useStoreRef$2(),it=useRecoilValueLoadable(nt);return handleLoadable(it,nt,rt)}function useSetRecoilState(nt){const rt=useStoreRef$2();return useCallback$1(it=>{setRecoilValue$2(rt.current,nt,it)},[rt,nt])}function useResetRecoilState(nt){const rt=useStoreRef$2();return useCallback$1(()=>{setRecoilValue$2(rt.current,nt,DEFAULT_VALUE$2)},[rt,nt])}function useRecoilState(nt){return[useRecoilValue(nt),useSetRecoilState(nt)]}function useRecoilStateLoadable(nt){return[useRecoilValueLoadable(nt),useSetRecoilState(nt)]}function useSetUnvalidatedAtomValues(){const nt=useStoreRef$2();return(rt,it={})=>{batchUpdates$2(()=>{nt.current.addTransactionMetadata(it),rt.forEach((st,lt)=>setUnvalidatedRecoilValue$2(nt.current,new AbstractRecoilValue$3(lt),st))})}}function useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE(nt){return Recoil_gkx("recoil_memory_managament_2020")&&Recoil_useRetain(nt),useRecoilValueLoadable_TRANSITION_SUPPORT(nt)}function useRecoilValue_TRANSITION_SUPPORT_UNSTABLE(nt){const rt=useStoreRef$2(),it=useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE(nt);return handleLoadable(it,nt,rt)}function useRecoilState_TRANSITION_SUPPORT_UNSTABLE(nt){return[useRecoilValue_TRANSITION_SUPPORT_UNSTABLE(nt),useSetRecoilState(nt)]}var Recoil_Hooks={recoilComponentGetRecoilValueCount_FOR_TESTING,useRecoilInterface:useRecoilInterface_DEPRECATED,useRecoilState,useRecoilStateLoadable,useRecoilValue,useRecoilValueLoadable,useResetRecoilState,useSetRecoilState,useSetUnvalidatedAtomValues,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE,useRecoilState_TRANSITION_SUPPORT_UNSTABLE};function filterMap(nt,rt){const it=new Map;for(const[st,lt]of nt)rt(lt,st)&&it.set(st,lt);return it}var Recoil_filterMap=filterMap;function filterSet(nt,rt){const it=new Set;for(const st of nt)rt(st)&&it.add(st);return it}var Recoil_filterSet=filterSet;function mergeMaps(...nt){const rt=new Map;for(let it=0;it<nt.length;it++){const st=nt[it].keys();let lt;for(;!(lt=st.next()).done;)rt.set(lt.value,nt[it].get(lt.value))}return rt}var Recoil_mergeMaps=mergeMaps;const{batchUpdates:batchUpdates$3}=Recoil_Batching,{DEFAULT_VALUE:DEFAULT_VALUE$3,getNode:getNode$4,nodes:nodes$1}=Recoil_Node,{useStoreRef:useStoreRef$3}=Recoil_RecoilRoot,{AbstractRecoilValue:AbstractRecoilValue$4,setRecoilValueLoadable:setRecoilValueLoadable$1}=Recoil_RecoilValueInterface,{SUSPENSE_TIMEOUT_MS:SUSPENSE_TIMEOUT_MS$2}=Recoil_Retention,{cloneSnapshot:cloneSnapshot$1}=Recoil_Snapshot$1,{useCallback:useCallback$2,useEffect:useEffect$4,useRef:useRef$5,useState:useState$2}=e$2,{isSSR:isSSR$4}=Recoil_Environment;function useTransactionSubscription(nt){const rt=useStoreRef$3();useEffect$4(()=>rt.current.subscribeToTransactions(nt).release,[nt,rt])}function externallyVisibleAtomValuesInState(nt){const rt=nt.atomValues.toMap(),it=Recoil_mapMap(Recoil_filterMap(rt,(st,lt)=>{const ut=getNode$4(lt).persistence_UNSTABLE;return ut!=null&&ut.type!=="none"&&st.state==="hasValue"}),st=>st.contents);return Recoil_mergeMaps(nt.nonvalidatedAtoms.toMap(),it)}function useTransactionObservation_DEPRECATED(nt){useTransactionSubscription(useCallback$2(rt=>{let it=rt.getState().previousTree;const st=rt.getState().currentTree;it||(it=rt.getState().currentTree);const lt=externallyVisibleAtomValuesInState(st),ct=externallyVisibleAtomValuesInState(it),ut=Recoil_mapMap(nodes$1,ht=>{var ft,pt,mt,gt;return{persistence_UNSTABLE:{type:(ft=(pt=ht.persistence_UNSTABLE)===null||pt===void 0?void 0:pt.type)!==null&&ft!==void 0?ft:"none",backButton:(mt=(gt=ht.persistence_UNSTABLE)===null||gt===void 0?void 0:gt.backButton)!==null&&mt!==void 0?mt:!1}}}),dt=Recoil_filterSet(st.dirtyAtoms,ht=>lt.has(ht)||ct.has(ht));nt({atomValues:lt,previousAtomValues:ct,atomInfo:ut,modifiedAtoms:dt,transactionMetadata:{...st.transactionMetadata}})},[nt]))}function useRecoilTransactionObserver(nt){useTransactionSubscription(useCallback$2(rt=>{const it=cloneSnapshot$1(rt,"latest"),st=cloneSnapshot$1(rt,"previous");nt({snapshot:it,previousSnapshot:st})},[nt]))}function useRecoilSnapshot(){const nt=useStoreRef$3(),[rt,it]=useState$2(()=>cloneSnapshot$1(nt.current)),st=Recoil_usePrevious(rt),lt=useRef$5(),ct=useRef$5();if(useTransactionSubscription(useCallback$2(dt=>it(cloneSnapshot$1(dt)),[])),useEffect$4(()=>{const dt=rt.retain();if(lt.current&&!isSSR$4){var ht;window.clearTimeout(lt.current),lt.current=null,(ht=ct.current)===null||ht===void 0||ht.call(ct),ct.current=null}return()=>{window.setTimeout(dt,10)}},[rt]),st!==rt&&!isSSR$4){if(lt.current){var ut;window.clearTimeout(lt.current),lt.current=null,(ut=ct.current)===null||ut===void 0||ut.call(ct),ct.current=null}ct.current=rt.retain(),lt.current=window.setTimeout(()=>{var dt;lt.current=null,(dt=ct.current)===null||dt===void 0||dt.call(ct),ct.current=null},SUSPENSE_TIMEOUT_MS$2)}return rt}function gotoSnapshot(nt,rt){var it;const st=nt.getState(),lt=(it=st.nextTree)!==null&&it!==void 0?it:st.currentTree,ct=rt.getStore_INTERNAL().getState().currentTree;batchUpdates$3(()=>{const ut=new Set;for(const ft of[lt.atomValues.keys(),ct.atomValues.keys()])for(const pt of ft){var dt,ht;((dt=lt.atomValues.get(pt))===null||dt===void 0?void 0:dt.contents)!==((ht=ct.atomValues.get(pt))===null||ht===void 0?void 0:ht.contents)&&getNode$4(pt).shouldRestoreFromSnapshots&&ut.add(pt)}ut.forEach(ft=>{setRecoilValueLoadable$1(nt,new AbstractRecoilValue$4(ft),ct.atomValues.has(ft)?Recoil_nullthrows(ct.atomValues.get(ft)):DEFAULT_VALUE$3)}),nt.replaceState(ft=>({...ft,stateID:rt.getID()}))})}function useGotoRecoilSnapshot(){const nt=useStoreRef$3();return useCallback$2(rt=>gotoSnapshot(nt.current,rt),[nt])}var Recoil_SnapshotHooks={useRecoilSnapshot,gotoSnapshot,useGotoRecoilSnapshot,useRecoilTransactionObserver,useTransactionObservation_DEPRECATED,useTransactionSubscription_DEPRECATED:useTransactionSubscription};const{peekNodeInfo:peekNodeInfo$2}=Recoil_FunctionalCore,{useStoreRef:useStoreRef$4}=Recoil_RecoilRoot;function useGetRecoilValueInfo(){const nt=useStoreRef$4();return({key:rt})=>peekNodeInfo$2(nt.current,nt.current.getState().currentTree,rt)}var Recoil_useGetRecoilValueInfo=useGetRecoilValueInfo;const{reactMode:reactMode$4}=Recoil_ReactMode,{RecoilRoot:RecoilRoot$1,useStoreRef:useStoreRef$5}=Recoil_RecoilRoot,{useMemo:useMemo$2}=e$2;function useRecoilBridgeAcrossReactRoots(){reactMode$4().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const nt=useStoreRef$5().current;return useMemo$2(()=>{function rt({children:it}){return e$2.createElement(RecoilRoot$1,{store_INTERNAL:nt},it)}return rt},[nt])}var Recoil_useRecoilBridgeAcrossReactRoots=useRecoilBridgeAcrossReactRoots;const{loadableWithValue:loadableWithValue$1}=Recoil_Loadable$1,{initializeNode:initializeNode$3}=Recoil_FunctionalCore,{DEFAULT_VALUE:DEFAULT_VALUE$4,getNode:getNode$5}=Recoil_Node,{copyTreeState:copyTreeState$1,getRecoilValueAsLoadable:getRecoilValueAsLoadable$3,invalidateDownstreams:invalidateDownstreams$1,writeLoadableToTreeState:writeLoadableToTreeState$1}=Recoil_RecoilValueInterface;function isAtom(nt){return getNode$5(nt.key).nodeType==="atom"}class TransactionInterfaceImpl{constructor(rt,it){_defineProperty$2(this,"_store",void 0),_defineProperty$2(this,"_treeState",void 0),_defineProperty$2(this,"_changes",void 0),_defineProperty$2(this,"get",st=>{if(this._changes.has(st.key))return this._changes.get(st.key);if(!isAtom(st))throw Recoil_err("Reading selectors within atomicUpdate is not supported");const lt=getRecoilValueAsLoadable$3(this._store,st,this._treeState);if(lt.state==="hasValue")return lt.contents;throw lt.state==="hasError"?lt.contents:Recoil_err(`Expected Recoil atom ${st.key} to have a value, but it is in a loading state.`)}),_defineProperty$2(this,"set",(st,lt)=>{if(!isAtom(st))throw Recoil_err("Setting selectors within atomicUpdate is not supported");if(typeof lt=="function"){const ct=this.get(st);this._changes.set(st.key,lt(ct))}else initializeNode$3(this._store,st.key,"set"),this._changes.set(st.key,lt)}),_defineProperty$2(this,"reset",st=>{this.set(st,DEFAULT_VALUE$4)}),this._store=rt,this._treeState=it,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const rt=copyTreeState$1(this._treeState);for(const[it,st]of this._changes)writeLoadableToTreeState$1(rt,it,loadableWithValue$1(st));return invalidateDownstreams$1(this._store,rt),rt}}function atomicUpdater(nt){return rt=>{nt.replaceState(it=>{const st=new TransactionInterfaceImpl(nt,it);return rt(st),st.newTreeState_INTERNAL()})}}var Recoil_AtomicUpdates={atomicUpdater},Recoil_AtomicUpdates_1=Recoil_AtomicUpdates.atomicUpdater,Recoil_AtomicUpdates$1=Object.freeze({__proto__:null,atomicUpdater:Recoil_AtomicUpdates_1});function invariant(nt,rt){if(!nt)throw new Error(rt)}var invariant_1=invariant,Recoil_invariant=invariant_1;const{atomicUpdater:atomicUpdater$1}=Recoil_AtomicUpdates$1,{batchUpdates:batchUpdates$4}=Recoil_Batching,{DEFAULT_VALUE:DEFAULT_VALUE$5}=Recoil_Node,{useStoreRef:useStoreRef$6}=Recoil_RecoilRoot,{refreshRecoilValue:refreshRecoilValue$1,setRecoilValue:setRecoilValue$3}=Recoil_RecoilValueInterface,{cloneSnapshot:cloneSnapshot$2}=Recoil_Snapshot$1,{gotoSnapshot:gotoSnapshot$1}=Recoil_SnapshotHooks,{useCallback:useCallback$3}=e$2;class Sentinel{}const SENTINEL=new Sentinel;function recoilCallback(nt,rt,it,st){let lt=SENTINEL,ct;if(batchUpdates$4(()=>{const dt="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof rt!="function")throw Recoil_err(dt);const ht=Recoil_lazyProxy({...st??{},set:(pt,mt)=>setRecoilValue$3(nt,pt,mt),reset:pt=>setRecoilValue$3(nt,pt,DEFAULT_VALUE$5),refresh:pt=>refreshRecoilValue$1(nt,pt),gotoSnapshot:pt=>gotoSnapshot$1(nt,pt),transact_UNSTABLE:pt=>atomicUpdater$1(nt)(pt)},{snapshot:()=>{const pt=cloneSnapshot$2(nt);return ct=pt.retain(),pt}}),ft=rt(ht);if(typeof ft!="function")throw Recoil_err(dt);lt=ft(...it)}),lt instanceof Sentinel&&Recoil_invariant(!1),Recoil_isPromise(lt))lt=lt.finally(()=>{var dt;(dt=ct)===null||dt===void 0||dt()});else{var ut;(ut=ct)===null||ut===void 0||ut()}return lt}function useRecoilCallback(nt,rt){const it=useStoreRef$6();return useCallback$3((...st)=>recoilCallback(it.current,nt,st),rt!=null?[...rt,it]:void 0)}var Recoil_useRecoilCallback={recoilCallback,useRecoilCallback};const{useStoreRef:useStoreRef$7}=Recoil_RecoilRoot,{refreshRecoilValue:refreshRecoilValue$2}=Recoil_RecoilValueInterface,{useCallback:useCallback$4}=e$2;function useRecoilRefresher(nt){const rt=useStoreRef$7();return useCallback$4(()=>{const it=rt.current;refreshRecoilValue$2(it,nt)},[nt,rt])}var Recoil_useRecoilRefresher=useRecoilRefresher;const{atomicUpdater:atomicUpdater$2}=Recoil_AtomicUpdates$1,{useStoreRef:useStoreRef$8}=Recoil_RecoilRoot,{useMemo:useMemo$3}=e$2;function useRecoilTransaction(nt,rt){const it=useStoreRef$8();return useMemo$3(()=>(...st)=>{atomicUpdater$2(it.current)(ct=>{nt(ct)(...st)})},rt!=null?[...rt,it]:void 0)}var Recoil_useRecoilTransaction=useRecoilTransaction;class WrappedValue{constructor(rt){_defineProperty$2(this,"value",void 0),this.value=rt}}var Recoil_Wrapper={WrappedValue},Recoil_Wrapper_1=Recoil_Wrapper.WrappedValue,Recoil_Wrapper$1=Object.freeze({__proto__:null,WrappedValue:Recoil_Wrapper_1});const{isFastRefreshEnabled:isFastRefreshEnabled$2}=Recoil_ReactMode;class ChangedPathError extends Error{}class TreeCache{constructor(rt){var it,st,lt;_defineProperty$2(this,"_name",void 0),_defineProperty$2(this,"_numLeafs",void 0),_defineProperty$2(this,"_root",void 0),_defineProperty$2(this,"_onHit",void 0),_defineProperty$2(this,"_onSet",void 0),_defineProperty$2(this,"_mapNodeValue",void 0),this._name=rt==null?void 0:rt.name,this._numLeafs=0,this._root=null,this._onHit=(it=rt==null?void 0:rt.onHit)!==null&&it!==void 0?it:()=>{},this._onSet=(st=rt==null?void 0:rt.onSet)!==null&&st!==void 0?st:()=>{},this._mapNodeValue=(lt=rt==null?void 0:rt.mapNodeValue)!==null&&lt!==void 0?lt:ct=>ct}size(){return this._numLeafs}root(){return this._root}get(rt,it){var st;return(st=this.getLeafNode(rt,it))===null||st===void 0?void 0:st.value}getLeafNode(rt,it){if(this._root==null)return;let st=this._root;for(;st;){if(it==null||it.onNodeVisit(st),st.type==="leaf")return this._onHit(st),st;const lt=this._mapNodeValue(rt(st.nodeKey));st=st.branches.get(lt)}}set(rt,it,st){const lt=()=>{var ct,ut,dt,ht;let ft,pt;for(const[St,wt]of rt){var mt,gt,xt;const Et=this._root;if((Et==null?void 0:Et.type)==="leaf")throw this.invalidCacheError();const Rt=ft;if(ft=Rt?Rt.branches.get(pt):Et,ft=(mt=ft)!==null&&mt!==void 0?mt:{type:"branch",nodeKey:St,parent:Rt,branches:new Map,branchKey:pt},ft.type!=="branch"||ft.nodeKey!==St)throw this.invalidCacheError();Rt==null||Rt.branches.set(pt,ft),st==null||(gt=st.onNodeVisit)===null||gt===void 0||gt.call(st,ft),pt=this._mapNodeValue(wt),this._root=(xt=this._root)!==null&&xt!==void 0?xt:ft}const yt=ft?(ct=ft)===null||ct===void 0?void 0:ct.branches.get(pt):this._root;if(yt!=null&&(yt.type!=="leaf"||yt.branchKey!==pt))throw this.invalidCacheError();const vt={type:"leaf",value:it,parent:ft,branchKey:pt};(ut=ft)===null||ut===void 0||ut.branches.set(pt,vt),this._root=(dt=this._root)!==null&&dt!==void 0?dt:vt,this._numLeafs++,this._onSet(vt),st==null||(ht=st.onNodeVisit)===null||ht===void 0||ht.call(st,vt)};try{lt()}catch(ct){if(ct instanceof ChangedPathError)this.clear(),lt();else throw ct}}delete(rt){const it=this.root();if(!it)return!1;if(rt===it)return this._root=null,this._numLeafs=0,!0;let st=rt.parent,lt=rt.branchKey;for(;st;){var ct;if(st.branches.delete(lt),st===it)return st.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(st.branches.size>0)break;lt=(ct=st)===null||ct===void 0?void 0:ct.branchKey,st=st.parent}for(;st!==it;st=st.parent)if(st==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const rt=isFastRefreshEnabled$2()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw Recoil_recoverableViolation(rt+(this._name!=null?` - ${this._name}`:"")),new ChangedPathError}}var Recoil_TreeCache={TreeCache},Recoil_TreeCache_1=Recoil_TreeCache.TreeCache,Recoil_TreeCache$1=Object.freeze({__proto__:null,TreeCache:Recoil_TreeCache_1});class LRUCache{constructor(rt){var it;_defineProperty$2(this,"_maxSize",void 0),_defineProperty$2(this,"_size",void 0),_defineProperty$2(this,"_head",void 0),_defineProperty$2(this,"_tail",void 0),_defineProperty$2(this,"_map",void 0),_defineProperty$2(this,"_keyMapper",void 0),this._maxSize=rt.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(it=rt.mapKey)!==null&&it!==void 0?it:st=>st}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(rt){return this._map.has(this._keyMapper(rt))}get(rt){const it=this._keyMapper(rt),st=this._map.get(it);if(st)return this.set(rt,st.value),st.value}set(rt,it){const st=this._keyMapper(rt);this._map.get(st)&&this.delete(rt);const ct=this.head(),ut={key:rt,right:ct,left:null,value:it};ct?ct.left=ut:this._tail=ut,this._map.set(st,ut),this._head=ut,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const rt=this.tail();rt&&this.delete(rt.key)}delete(rt){const it=this._keyMapper(rt);if(!this._size||!this._map.has(it))return;const st=Recoil_nullthrows(this._map.get(it)),lt=st.right,ct=st.left;lt&&(lt.left=st.left),ct&&(ct.right=st.right),st===this.head()&&(this._head=lt),st===this.tail()&&(this._tail=ct),this._map.delete(it),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var Recoil_LRUCache={LRUCache},Recoil_LRUCache_1=Recoil_LRUCache.LRUCache,Recoil_LRUCache$1=Object.freeze({__proto__:null,LRUCache:Recoil_LRUCache_1});const{LRUCache:LRUCache$1}=Recoil_LRUCache$1,{TreeCache:TreeCache$1}=Recoil_TreeCache$1;function treeCacheLRU({name:nt,maxSize:rt,mapNodeValue:it=st=>st}){const st=new LRUCache$1({maxSize:rt}),lt=new TreeCache$1({name:nt,mapNodeValue:it,onHit:ct=>{st.set(ct,!0)},onSet:ct=>{const ut=st.tail();st.set(ct,!0),ut&&lt.size()>rt&&lt.delete(ut.key)}});return lt}var Recoil_treeCacheLRU=treeCacheLRU;function stringify$1(nt,rt,it){if(typeof nt=="string"&&!nt.includes('"')&&!nt.includes("\\"))return`"${nt}"`;switch(typeof nt){case"undefined":return"";case"boolean":return nt?"true":"false";case"number":case"symbol":return String(nt);case"string":return JSON.stringify(nt);case"function":if((rt==null?void 0:rt.allowFunctions)!==!0)throw Recoil_err("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${nt.name})__`}if(nt===null)return"null";if(typeof nt!="object"){var st;return(st=JSON.stringify(nt))!==null&&st!==void 0?st:""}if(Recoil_isPromise(nt))return"__PROMISE__";if(Array.isArray(nt))return`[${nt.map((lt,ct)=>stringify$1(lt,rt,ct.toString()))}]`;if(typeof nt.toJSON=="function")return stringify$1(nt.toJSON(it),rt,it);if(nt instanceof Map){const lt={};for(const[ct,ut]of nt)lt[typeof ct=="string"?ct:stringify$1(ct,rt)]=ut;return stringify$1(lt,rt,it)}return nt instanceof Set?stringify$1(Array.from(nt).sort((lt,ct)=>stringify$1(lt,rt).localeCompare(stringify$1(ct,rt))),rt,it):Symbol!==void 0&&nt[Symbol.iterator]!=null&&typeof nt[Symbol.iterator]=="function"?stringify$1(Array.from(nt),rt,it):`{${Object.keys(nt).filter(lt=>nt[lt]!==void 0).sort().map(lt=>`${stringify$1(lt,rt)}:${stringify$1(nt[lt],rt,lt)}`).join(",")}}`}function stableStringify(nt,rt={allowFunctions:!1}){return stringify$1(nt,rt)}var Recoil_stableStringify=stableStringify;const{TreeCache:TreeCache$2}=Recoil_TreeCache$1,defaultPolicy={equality:"reference",eviction:"keep-all",maxSize:1/0};function treeCacheFromPolicy({equality:nt=defaultPolicy.equality,eviction:rt=defaultPolicy.eviction,maxSize:it=defaultPolicy.maxSize}=defaultPolicy,st){const lt=getValueMapper(nt);return getTreeCache(rt,it,lt,st)}function getValueMapper(nt){switch(nt){case"reference":return rt=>rt;case"value":return rt=>Recoil_stableStringify(rt)}throw Recoil_err(`Unrecognized equality policy ${nt}`)}function getTreeCache(nt,rt,it,st){switch(nt){case"keep-all":return new TreeCache$2({name:st,mapNodeValue:it});case"lru":return Recoil_treeCacheLRU({name:st,maxSize:Recoil_nullthrows(rt),mapNodeValue:it});case"most-recent":return Recoil_treeCacheLRU({name:st,maxSize:1,mapNodeValue:it})}throw Recoil_err(`Unrecognized eviction policy ${nt}`)}var Recoil_treeCacheFromPolicy=treeCacheFromPolicy;function startPerfBlock(nt){return()=>null}var Recoil_PerformanceTimings={startPerfBlock};const{isLoadable:isLoadable$1,loadableWithError:loadableWithError$1,loadableWithPromise:loadableWithPromise$1,loadableWithValue:loadableWithValue$2}=Recoil_Loadable$1,{WrappedValue:WrappedValue$1}=Recoil_Wrapper$1,{getNodeLoadable:getNodeLoadable$2,peekNodeLoadable:peekNodeLoadable$1,setNodeValue:setNodeValue$3}=Recoil_FunctionalCore,{saveDepsToStore:saveDepsToStore$1}=Recoil_Graph,{DEFAULT_VALUE:DEFAULT_VALUE$6,getConfigDeletionHandler:getConfigDeletionHandler$1,getNode:getNode$6,registerNode:registerNode$1}=Recoil_Node,{isRecoilValue:isRecoilValue$3}=Recoil_RecoilValue$1,{markRecoilValueModified:markRecoilValueModified$1}=Recoil_RecoilValueInterface,{retainedByOptionWithDefault:retainedByOptionWithDefault$1}=Recoil_Retention,{recoilCallback:recoilCallback$1}=Recoil_useRecoilCallback,{startPerfBlock:startPerfBlock$1}=Recoil_PerformanceTimings;class Canceled{}const CANCELED=new Canceled,dependencyStack=[],waitingStores=new Map,getNewExecutionID=(()=>{let nt=0;return()=>nt++})();function selector(nt){let rt=null;const{key:it,get:st,cachePolicy_UNSTABLE:lt}=nt,ct=nt.set!=null?nt.set:void 0,ut=new Set,dt=Recoil_treeCacheFromPolicy(lt??{equality:"reference",eviction:"keep-all"},it),ht=retainedByOptionWithDefault$1(nt.retainedBy_UNSTABLE),ft=new Map;let pt=0;function mt(){return!Recoil_gkx("recoil_memory_managament_2020")||pt>0}function gt(Zt){return Zt.getState().knownSelectors.add(it),pt++,()=>{pt--}}function xt(){return getConfigDeletionHandler$1(it)!==void 0&&!mt()}function yt(Zt,hr,nr,ir,yr){Ut(hr,ir,yr),vt(Zt,nr)}function vt(Zt,hr){$t(Zt,hr)&&Nt(Zt),wt(hr,!0)}function St(Zt,hr){$t(Zt,hr)&&(Recoil_nullthrows(Lt(Zt)).stateVersions.clear(),wt(hr,!1))}function wt(Zt,hr){const nr=waitingStores.get(Zt);if(nr!=null){for(const ir of nr)markRecoilValueModified$1(ir,Recoil_nullthrows(rt));hr&&waitingStores.delete(Zt)}}function Et(Zt,hr){let nr=waitingStores.get(hr);nr==null&&waitingStores.set(hr,nr=new Set),nr.add(Zt)}function Rt(Zt,hr,nr,ir,yr,Cr){return hr.then(Sr=>{if(!mt())throw Nt(Zt),CANCELED;const xr=loadableWithValue$2(Sr);return yt(Zt,nr,yr,xr,ir),Sr}).catch(Sr=>{if(!mt())throw Nt(Zt),CANCELED;if(Recoil_isPromise(Sr))return Tt(Zt,Sr,nr,ir,yr,Cr);const xr=loadableWithError$1(Sr);throw yt(Zt,nr,yr,xr,ir),Sr})}function Tt(Zt,hr,nr,ir,yr,Cr){return hr.then(Sr=>{if(!mt())throw Nt(Zt),CANCELED;Cr.loadingDepKey!=null&&Cr.loadingDepPromise===hr?nr.atomValues.set(Cr.loadingDepKey,loadableWithValue$2(Sr)):Zt.getState().knownSelectors.forEach(fr=>{nr.atomValues.delete(fr)});const xr=Dt(Zt,nr);if(xr&&xr.state!=="loading"){if(($t(Zt,yr)||Lt(Zt)==null)&&vt(Zt,yr),xr.state==="hasValue")return xr.contents;throw xr.contents}if(!$t(Zt,yr)){const fr=Ft(Zt,nr);if(fr!=null)return fr.loadingLoadable.contents}const[gr,_r]=At(Zt,nr,yr);if(gr.state!=="loading"&&yt(Zt,nr,yr,gr,_r),gr.state==="hasError")throw gr.contents;return gr.contents}).catch(Sr=>{if(Sr instanceof Canceled)throw CANCELED;if(!mt())throw Nt(Zt),CANCELED;const xr=loadableWithError$1(Sr);throw yt(Zt,nr,yr,xr,ir),Sr})}function It(Zt,hr,nr,ir){var yr,Cr,Sr,xr;if($t(Zt,ir)||hr.version===((yr=Zt.getState())===null||yr===void 0||(Cr=yr.currentTree)===null||Cr===void 0?void 0:Cr.version)||hr.version===((Sr=Zt.getState())===null||Sr===void 0||(xr=Sr.nextTree)===null||xr===void 0?void 0:xr.version)){var gr,_r,fr;saveDepsToStore$1(it,nr,Zt,(gr=(_r=Zt.getState())===null||_r===void 0||(fr=_r.nextTree)===null||fr===void 0?void 0:fr.version)!==null&&gr!==void 0?gr:Zt.getState().currentTree.version)}for(const Nr of nr)ut.add(Nr)}function At(Zt,hr,nr){const ir=startPerfBlock$1(it);let yr=!0,Cr=!0;const Sr=()=>{ir(),Cr=!1};let xr,gr=!1,_r;const fr={loadingDepKey:null,loadingDepPromise:null},Nr=new Map;function Tr({key:Vr}){const mn=getNodeLoadable$2(Zt,hr,Vr);switch(Nr.set(Vr,mn),yr||(It(Zt,hr,new Set(Nr.keys()),nr),St(Zt,nr)),mn.state){case"hasValue":return mn.contents;case"hasError":throw mn.contents;case"loading":throw fr.loadingDepKey=Vr,fr.loadingDepPromise=mn.contents,mn.contents}throw Recoil_err("Invalid Loadable state")}const Hr=Vr=>(...mn)=>{if(Cr)throw Recoil_err("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return rt==null&&Recoil_invariant(!1),recoilCallback$1(Zt,Vr,mn,{node:rt})};try{xr=st({get:Tr,getCallback:Hr}),xr=isRecoilValue$3(xr)?Tr(xr):xr,isLoadable$1(xr)&&(xr.state==="hasError"&&(gr=!0),xr=xr.contents),Recoil_isPromise(xr)?xr=Rt(Zt,xr,hr,Nr,nr,fr).finally(Sr):Sr(),xr=xr instanceof WrappedValue$1?xr.value:xr}catch(Vr){xr=Vr,Recoil_isPromise(xr)?xr=Tt(Zt,xr,hr,Nr,nr,fr).finally(Sr):(gr=!0,Sr())}return gr?_r=loadableWithError$1(xr):Recoil_isPromise(xr)?_r=loadableWithPromise$1(xr):_r=loadableWithValue$2(xr),yr=!1,Ot(Zt,nr,Nr),It(Zt,hr,new Set(Nr.keys()),nr),[_r,Nr]}function Dt(Zt,hr){let nr=hr.atomValues.get(it);if(nr!=null)return nr;const ir=new Set;try{nr=dt.get(Cr=>(typeof Cr!="string"&&Recoil_invariant(!1),getNodeLoadable$2(Zt,hr,Cr).contents),{onNodeVisit:Cr=>{Cr.type==="branch"&&Cr.nodeKey!==it&&ir.add(Cr.nodeKey)}})}catch(Cr){throw Recoil_err(`Problem with cache lookup for selector "${it}": ${Cr.message}`)}if(nr){var yr;hr.atomValues.set(it,nr),It(Zt,hr,ir,(yr=Lt(Zt))===null||yr===void 0?void 0:yr.executionID)}return nr}function jt(Zt,hr){const nr=Dt(Zt,hr);if(nr!=null)return Nt(Zt),nr;const ir=Ft(Zt,hr);if(ir!=null){var yr;return((yr=ir.loadingLoadable)===null||yr===void 0?void 0:yr.state)==="loading"&&Et(Zt,ir.executionID),ir.loadingLoadable}const Cr=getNewExecutionID(),[Sr,xr]=At(Zt,hr,Cr);return Sr.state==="loading"?(Mt(Zt,Cr,Sr,xr,hr),Et(Zt,Cr)):(Nt(Zt),Ut(hr,Sr,xr)),Sr}function Ft(Zt,hr){const nr=Recoil_concatIterables([ft.has(Zt)?[Recoil_nullthrows(ft.get(Zt))]:[],Recoil_mapIterable(Recoil_filterIterable(ft,([yr])=>yr!==Zt),([,yr])=>yr)]);function ir(yr){for(const[Cr,Sr]of yr)if(!getNodeLoadable$2(Zt,hr,Cr).is(Sr))return!0;return!1}for(const yr of nr){if(yr.stateVersions.get(hr.version)||!ir(yr.depValuesDiscoveredSoFarDuringAsyncWork))return yr.stateVersions.set(hr.version,!0),yr;yr.stateVersions.set(hr.version,!1)}}function Lt(Zt){return ft.get(Zt)}function Mt(Zt,hr,nr,ir,yr){ft.set(Zt,{depValuesDiscoveredSoFarDuringAsyncWork:ir,executionID:hr,loadingLoadable:nr,stateVersions:new Map([[yr.version,!0]])})}function Ot(Zt,hr,nr){if($t(Zt,hr)){const ir=Lt(Zt);ir!=null&&(ir.depValuesDiscoveredSoFarDuringAsyncWork=nr)}}function Nt(Zt){ft.delete(Zt)}function $t(Zt,hr){var nr;return hr===((nr=Lt(Zt))===null||nr===void 0?void 0:nr.executionID)}function Vt(Zt){return Array.from(Zt.entries()).map(([hr,nr])=>[hr,nr.contents])}function Ut(Zt,hr,nr){Zt.atomValues.set(it,hr);try{dt.set(Vt(nr),hr)}catch(ir){throw Recoil_err(`Problem with setting cache for selector "${it}": ${ir.message}`)}}function zt(Zt){if(dependencyStack.includes(it)){const hr=`Recoil selector has circular dependencies: ${dependencyStack.slice(dependencyStack.indexOf(it)).join(" → ")}`;return loadableWithError$1(Recoil_err(hr))}dependencyStack.push(it);try{return Zt()}finally{dependencyStack.pop()}}function Bt(Zt,hr){const nr=hr.atomValues.get(it);return nr??dt.get(ir=>{var yr;return typeof ir!="string"&&Recoil_invariant(!1),(yr=peekNodeLoadable$1(Zt,hr,ir))===null||yr===void 0?void 0:yr.contents})}function Ht(Zt,hr){return zt(()=>jt(Zt,hr))}function Gt(Zt){Zt.atomValues.delete(it)}function Xt(Zt,hr){rt==null&&Recoil_invariant(!1);for(const ir of ut){var nr;const yr=getNode$6(ir);(nr=yr.clearCache)===null||nr===void 0||nr.call(yr,Zt,hr)}ut.clear(),Gt(hr),dt.clear(),markRecoilValueModified$1(Zt,rt)}return ct!=null?rt=registerNode$1({key:it,nodeType:"selector",peek:Bt,get:Ht,set:(hr,nr,ir)=>{let yr=!1;const Cr=new Map;function Sr({key:fr}){if(yr)throw Recoil_err("Recoil: Async selector sets are not currently supported.");const Nr=getNodeLoadable$2(hr,nr,fr);if(Nr.state==="hasValue")return Nr.contents;if(Nr.state==="loading"){const Tr=`Getting value of asynchronous atom or selector "${fr}" in a pending state while setting selector "${it}" is not yet supported.`;throw Recoil_err(Tr)}else throw Nr.contents}function xr(fr,Nr){if(yr)throw Recoil_err("Recoil: Async selector sets are not currently supported.");const Tr=typeof Nr=="function"?Nr(Sr(fr)):Nr;setNodeValue$3(hr,nr,fr.key,Tr).forEach((Vr,mn)=>Cr.set(mn,Vr))}function gr(fr){xr(fr,DEFAULT_VALUE$6)}const _r=ct({set:xr,get:Sr,reset:gr},ir);if(_r!==void 0)throw Recoil_isPromise(_r)?Recoil_err("Recoil: Async selector sets are not currently supported."):Recoil_err("Recoil: selector set should be a void function.");return yr=!0,Cr},init:gt,invalidate:Gt,clearCache:Xt,shouldDeleteConfigOnRelease:xt,dangerouslyAllowMutability:nt.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:ht}):rt=registerNode$1({key:it,nodeType:"selector",peek:Bt,get:Ht,init:gt,invalidate:Gt,clearCache:Xt,shouldDeleteConfigOnRelease:xt,dangerouslyAllowMutability:nt.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:ht})}selector.value=nt=>new WrappedValue$1(nt);var Recoil_selector=selector;const{isLoadable:isLoadable$2,loadableWithError:loadableWithError$2,loadableWithPromise:loadableWithPromise$2,loadableWithValue:loadableWithValue$3}=Recoil_Loadable$1,{WrappedValue:WrappedValue$2}=Recoil_Wrapper$1,{peekNodeInfo:peekNodeInfo$3}=Recoil_FunctionalCore,{DEFAULT_VALUE:DEFAULT_VALUE$7,DefaultValue:DefaultValue$2,getConfigDeletionHandler:getConfigDeletionHandler$2,registerNode:registerNode$2,setConfigDeletionHandler:setConfigDeletionHandler$1}=Recoil_Node,{isRecoilValue:isRecoilValue$4}=Recoil_RecoilValue$1,{getRecoilValueAsLoadable:getRecoilValueAsLoadable$4,markRecoilValueModified:markRecoilValueModified$2,setRecoilValue:setRecoilValue$4,setRecoilValueLoadable:setRecoilValueLoadable$2}=Recoil_RecoilValueInterface,{retainedByOptionWithDefault:retainedByOptionWithDefault$2}=Recoil_Retention,unwrap=nt=>nt instanceof WrappedValue$2?nt.value:nt;function baseAtom(nt){const{key:rt,persistence_UNSTABLE:it}=nt,st=retainedByOptionWithDefault$2(nt.retainedBy_UNSTABLE);let lt=0;function ct(Et){return loadableWithPromise$2(Et.then(Rt=>(ut=loadableWithValue$3(Rt),Rt)).catch(Rt=>{throw ut=loadableWithError$2(Rt),Rt}))}let ut=Recoil_isPromise(nt.default)?ct(nt.default):isLoadable$2(nt.default)?nt.default.state==="loading"?ct(nt.default.contents):nt.default:loadableWithValue$3(unwrap(nt.default));ut.contents;let dt;const ht=new Map;function ft(Et){return Et}function pt(Et,Rt){const Tt=Rt.then(It=>{var At,Dt;return((Dt=((At=Et.getState().nextTree)!==null&&At!==void 0?At:Et.getState().currentTree).atomValues.get(rt))===null||Dt===void 0?void 0:Dt.contents)===Tt&&setRecoilValue$4(Et,wt,It),It}).catch(It=>{var At,Dt;throw((Dt=((At=Et.getState().nextTree)!==null&&At!==void 0?At:Et.getState().currentTree).atomValues.get(rt))===null||Dt===void 0?void 0:Dt.contents)===Tt&&setRecoilValueLoadable$2(Et,wt,loadableWithError$2(It)),It});return Tt}function mt(Et,Rt,Tt){var It;lt++;const At=()=>{var Lt;lt--,(Lt=ht.get(Et))===null||Lt===void 0||Lt.forEach(Mt=>Mt()),ht.delete(Et)};if(Et.getState().knownAtoms.add(rt),ut.state==="loading"){const Lt=()=>{var Mt;((Mt=Et.getState().nextTree)!==null&&Mt!==void 0?Mt:Et.getState().currentTree).atomValues.has(rt)||markRecoilValueModified$2(Et,wt)};ut.contents.finally(Lt)}const Dt=(It=nt.effects)!==null&&It!==void 0?It:nt.effects_UNSTABLE;if(Dt!=null){let Lt=function(Gt){if($t&&Gt.key===rt){const Xt=Nt;return Xt instanceof DefaultValue$2?gt(Et,Rt):Recoil_isPromise(Xt)?loadableWithPromise$2(Xt.then(Zt=>Zt instanceof DefaultValue$2?ut.toPromise():Zt)):loadableWithValue$3(Xt)}return getRecoilValueAsLoadable$4(Et,Gt)},Mt=function(Gt){return Lt(Gt).toPromise()},Ot=function(Gt){var Xt;const Zt=peekNodeInfo$3(Et,(Xt=Et.getState().nextTree)!==null&&Xt!==void 0?Xt:Et.getState().currentTree,Gt.key);return $t&&Gt.key===rt&&!(Nt instanceof DefaultValue$2)?{...Zt,isSet:!0,loadable:Lt(Gt)}:Zt},Nt=DEFAULT_VALUE$7,$t=!0,Vt=!1,Ut=null;const zt=Gt=>Xt=>{if($t){const Zt=Lt(wt),hr=Zt.state==="hasValue"?Zt.contents:DEFAULT_VALUE$7;Nt=typeof Xt=="function"?Xt(hr):Xt,Recoil_isPromise(Nt)&&(Nt=Nt.then(nr=>(Ut={effect:Gt,value:nr},nr)))}else{if(Recoil_isPromise(Xt))throw Recoil_err("Setting atoms to async values is not implemented.");typeof Xt!="function"&&(Ut={effect:Gt,value:unwrap(Xt)}),setRecoilValue$4(Et,wt,typeof Xt=="function"?Zt=>{const hr=unwrap(Xt(Zt));return Ut={effect:Gt,value:hr},hr}:unwrap(Xt))}},Bt=Gt=>()=>zt(Gt)(DEFAULT_VALUE$7),Ht=Gt=>Xt=>{var Zt;const{release:hr}=Et.subscribeToTransactions(nr=>{var ir;let{currentTree:yr,previousTree:Cr}=nr.getState();Cr||(Cr=yr);const Sr=(ir=yr.atomValues.get(rt))!==null&&ir!==void 0?ir:ut;if(Sr.state==="hasValue"){var xr,gr,_r,fr;const Nr=Sr.contents,Tr=(xr=Cr.atomValues.get(rt))!==null&&xr!==void 0?xr:ut,Hr=Tr.state==="hasValue"?Tr.contents:DEFAULT_VALUE$7;((gr=Ut)===null||gr===void 0?void 0:gr.effect)!==Gt||((_r=Ut)===null||_r===void 0?void 0:_r.value)!==Nr?Xt(Nr,Hr,!yr.atomValues.has(rt)):((fr=Ut)===null||fr===void 0?void 0:fr.effect)===Gt&&(Ut=null)}},rt);ht.set(Et,[...(Zt=ht.get(Et))!==null&&Zt!==void 0?Zt:[],hr])};for(const Gt of Dt)try{const Xt=Gt({node:wt,storeID:Et.storeID,parentStoreID_UNSTABLE:Et.parentStoreID,trigger:Tt,setSelf:zt(Gt),resetSelf:Bt(Gt),onSet:Ht(Gt),getPromise:Mt,getLoadable:Lt,getInfo_UNSTABLE:Ot});if(Xt!=null){var jt;ht.set(Et,[...(jt=ht.get(Et))!==null&&jt!==void 0?jt:[],Xt])}}catch(Xt){Nt=Xt,Vt=!0}if($t=!1,!(Nt instanceof DefaultValue$2)){var Ft;const Gt=Vt?loadableWithError$2(Nt):Recoil_isPromise(Nt)?loadableWithPromise$2(pt(Et,Nt)):loadableWithValue$3(unwrap(Nt));Gt.contents,Rt.atomValues.set(rt,Gt),(Ft=Et.getState().nextTree)===null||Ft===void 0||Ft.atomValues.set(rt,Gt)}}return At}function gt(Et,Rt){var Tt,It;return(Tt=(It=Rt.atomValues.get(rt))!==null&&It!==void 0?It:dt)!==null&&Tt!==void 0?Tt:ut}function xt(Et,Rt){if(Rt.atomValues.has(rt))return Recoil_nullthrows(Rt.atomValues.get(rt));if(Rt.nonvalidatedAtoms.has(rt)){if(dt!=null)return dt;if(it==null)return ut;const Tt=Rt.nonvalidatedAtoms.get(rt),It=it.validator(Tt,DEFAULT_VALUE$7);return dt=It instanceof DefaultValue$2?ut:loadableWithValue$3(It),dt}else return ut}function yt(){dt=void 0}function vt(Et,Rt,Tt){if(Rt.atomValues.has(rt)){const It=Recoil_nullthrows(Rt.atomValues.get(rt));if(It.state==="hasValue"&&Tt===It.contents)return new Map}else if(!Rt.nonvalidatedAtoms.has(rt)&&Tt instanceof DefaultValue$2)return new Map;return dt=void 0,new Map().set(rt,loadableWithValue$3(Tt))}function St(){return getConfigDeletionHandler$2(rt)!==void 0&&lt<=0}const wt=registerNode$2({key:rt,nodeType:"atom",peek:gt,get:xt,set:vt,init:mt,invalidate:yt,shouldDeleteConfigOnRelease:St,dangerouslyAllowMutability:nt.dangerouslyAllowMutability,persistence_UNSTABLE:nt.persistence_UNSTABLE?{type:nt.persistence_UNSTABLE.type,backButton:nt.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:st});return wt}function atom(nt){const{...rt}=nt,it="default"in nt?nt.default:new Promise(()=>{});return isRecoilValue$4(it)?atomWithFallback({...rt,default:it}):baseAtom({...rt,default:it})}function atomWithFallback(nt){const rt=atom({...nt,default:DEFAULT_VALUE$7,persistence_UNSTABLE:nt.persistence_UNSTABLE===void 0?void 0:{...nt.persistence_UNSTABLE,validator:st=>st instanceof DefaultValue$2?st:Recoil_nullthrows(nt.persistence_UNSTABLE).validator(st,DEFAULT_VALUE$7)},effects:nt.effects,effects_UNSTABLE:nt.effects_UNSTABLE}),it=Recoil_selector({key:`${nt.key}__withFallback`,get:({get:st})=>{const lt=st(rt);return lt instanceof DefaultValue$2?nt.default:lt},set:({set:st},lt)=>st(rt,lt),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:nt.dangerouslyAllowMutability});return setConfigDeletionHandler$1(it.key,getConfigDeletionHandler$2(nt.key)),it}atom.value=nt=>new WrappedValue$2(nt);var Recoil_atom=atom;class MapCache{constructor(rt){var it;_defineProperty$2(this,"_map",void 0),_defineProperty$2(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(it=rt==null?void 0:rt.mapKey)!==null&&it!==void 0?it:st=>st}size(){return this._map.size}has(rt){return this._map.has(this._keyMapper(rt))}get(rt){return this._map.get(this._keyMapper(rt))}set(rt,it){this._map.set(this._keyMapper(rt),it)}delete(rt){this._map.delete(this._keyMapper(rt))}clear(){this._map.clear()}}var Recoil_MapCache={MapCache},Recoil_MapCache_1=Recoil_MapCache.MapCache,Recoil_MapCache$1=Object.freeze({__proto__:null,MapCache:Recoil_MapCache_1});const{LRUCache:LRUCache$2}=Recoil_LRUCache$1,{MapCache:MapCache$1}=Recoil_MapCache$1,defaultPolicy$1={equality:"reference",eviction:"none",maxSize:1/0};function cacheFromPolicy({equality:nt=defaultPolicy$1.equality,eviction:rt=defaultPolicy$1.eviction,maxSize:it=defaultPolicy$1.maxSize}=defaultPolicy$1){const st=getValueMapper$1(nt);return getCache(rt,it,st)}function getValueMapper$1(nt){switch(nt){case"reference":return rt=>rt;case"value":return rt=>Recoil_stableStringify(rt)}throw Recoil_err(`Unrecognized equality policy ${nt}`)}function getCache(nt,rt,it){switch(nt){case"keep-all":return new MapCache$1({mapKey:it});case"lru":return new LRUCache$2({mapKey:it,maxSize:Recoil_nullthrows(rt)});case"most-recent":return new LRUCache$2({mapKey:it,maxSize:1})}throw Recoil_err(`Unrecognized eviction policy ${nt}`)}var Recoil_cacheFromPolicy=cacheFromPolicy;const{setConfigDeletionHandler:setConfigDeletionHandler$2}=Recoil_Node;function atomFamily(nt){var rt,it;const st=Recoil_cacheFromPolicy({equality:(rt=(it=nt.cachePolicyForParams_UNSTABLE)===null||it===void 0?void 0:it.equality)!==null&&rt!==void 0?rt:"value",eviction:"keep-all"});return lt=>{var ct,ut;const dt=st.get(lt);if(dt!=null)return dt;const{cachePolicyForParams_UNSTABLE:ht,...ft}=nt,pt="default"in nt?nt.default:new Promise(()=>{}),mt=Recoil_atom({...ft,key:`${nt.key}__${(ct=Recoil_stableStringify(lt))!==null&&ct!==void 0?ct:"void"}`,default:typeof pt=="function"?pt(lt):pt,retainedBy_UNSTABLE:typeof nt.retainedBy_UNSTABLE=="function"?nt.retainedBy_UNSTABLE(lt):nt.retainedBy_UNSTABLE,effects:typeof nt.effects=="function"?nt.effects(lt):typeof nt.effects_UNSTABLE=="function"?nt.effects_UNSTABLE(lt):(ut=nt.effects)!==null&&ut!==void 0?ut:nt.effects_UNSTABLE});return st.set(lt,mt),setConfigDeletionHandler$2(mt.key,()=>{st.delete(lt)}),mt}}var Recoil_atomFamily=atomFamily;const{setConfigDeletionHandler:setConfigDeletionHandler$3}=Recoil_Node;let nextIndex=0;function selectorFamily(nt){var rt,it;const st=Recoil_cacheFromPolicy({equality:(rt=(it=nt.cachePolicyForParams_UNSTABLE)===null||it===void 0?void 0:it.equality)!==null&&rt!==void 0?rt:"value",eviction:"keep-all"});return lt=>{var ct;let ut;try{ut=st.get(lt)}catch(gt){throw Recoil_err(`Problem with cache lookup for selector ${nt.key}: ${gt.message}`)}if(ut!=null)return ut;const dt=`${nt.key}__selectorFamily/${(ct=Recoil_stableStringify(lt,{allowFunctions:!0}))!==null&&ct!==void 0?ct:"void"}/${nextIndex++}`,ht=gt=>nt.get(lt)(gt),ft=nt.cachePolicy_UNSTABLE,pt=typeof nt.retainedBy_UNSTABLE=="function"?nt.retainedBy_UNSTABLE(lt):nt.retainedBy_UNSTABLE;let mt;if(nt.set!=null){const gt=nt.set;mt=Recoil_selector({key:dt,get:ht,set:(yt,vt)=>gt(lt)(yt,vt),cachePolicy_UNSTABLE:ft,dangerouslyAllowMutability:nt.dangerouslyAllowMutability,retainedBy_UNSTABLE:pt})}else mt=Recoil_selector({key:dt,get:ht,cachePolicy_UNSTABLE:ft,dangerouslyAllowMutability:nt.dangerouslyAllowMutability,retainedBy_UNSTABLE:pt});return st.set(lt,mt),setConfigDeletionHandler$3(mt.key,()=>{st.delete(lt)}),mt}}var Recoil_selectorFamily=selectorFamily;const constantSelector=Recoil_selectorFamily({key:"__constant",get:nt=>()=>nt,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function constSelector(nt){return constantSelector(nt)}var Recoil_constSelector=constSelector;const throwingSelector=Recoil_selectorFamily({key:"__error",get:nt=>()=>{throw Recoil_err(nt)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function errorSelector(nt){return throwingSelector(nt)}var Recoil_errorSelector=errorSelector;function readOnlySelector(nt){return nt}var Recoil_readOnlySelector=readOnlySelector;const{loadableWithError:loadableWithError$3,loadableWithPromise:loadableWithPromise$3,loadableWithValue:loadableWithValue$4}=Recoil_Loadable$1;function concurrentRequests(nt,rt){const it=Array(rt.length).fill(void 0),st=Array(rt.length).fill(void 0);for(const[lt,ct]of rt.entries())try{it[lt]=nt(ct)}catch(ut){st[lt]=ut}return[it,st]}function isError(nt){return nt!=null&&!Recoil_isPromise(nt)}function unwrapDependencies(nt){return Array.isArray(nt)?nt:Object.getOwnPropertyNames(nt).map(rt=>nt[rt])}function wrapResults(nt,rt){return Array.isArray(nt)?rt:Object.getOwnPropertyNames(nt).reduce((it,st,lt)=>({...it,[st]:rt[lt]}),{})}function wrapLoadables(nt,rt,it){const st=it.map((lt,ct)=>lt==null?loadableWithValue$4(rt[ct]):Recoil_isPromise(lt)?loadableWithPromise$3(lt):loadableWithError$3(lt));return wrapResults(nt,st)}function combineAsyncResultsWithSyncResults(nt,rt){return rt.map((it,st)=>it===void 0?nt[st]:it)}const waitForNone=Recoil_selectorFamily({key:"__waitForNone",get:nt=>({get:rt})=>{const it=unwrapDependencies(nt),[st,lt]=concurrentRequests(rt,it);return wrapLoadables(nt,st,lt)},dangerouslyAllowMutability:!0}),waitForAny=Recoil_selectorFamily({key:"__waitForAny",get:nt=>({get:rt})=>{const it=unwrapDependencies(nt),[st,lt]=concurrentRequests(rt,it);return lt.some(ct=>!Recoil_isPromise(ct))?wrapLoadables(nt,st,lt):new Promise(ct=>{for(const[ut,dt]of lt.entries())Recoil_isPromise(dt)&&dt.then(ht=>{st[ut]=ht,lt[ut]=void 0,ct(wrapLoadables(nt,st,lt))}).catch(ht=>{lt[ut]=ht,ct(wrapLoadables(nt,st,lt))})})},dangerouslyAllowMutability:!0}),waitForAll=Recoil_selectorFamily({key:"__waitForAll",get:nt=>({get:rt})=>{const it=unwrapDependencies(nt),[st,lt]=concurrentRequests(rt,it);if(lt.every(ut=>ut==null))return wrapResults(nt,st);const ct=lt.find(isError);if(ct!=null)throw ct;return Promise.all(lt).then(ut=>wrapResults(nt,combineAsyncResultsWithSyncResults(st,ut)))},dangerouslyAllowMutability:!0}),waitForAllSettled=Recoil_selectorFamily({key:"__waitForAllSettled",get:nt=>({get:rt})=>{const it=unwrapDependencies(nt),[st,lt]=concurrentRequests(rt,it);return lt.every(ct=>!Recoil_isPromise(ct))?wrapLoadables(nt,st,lt):Promise.all(lt.map((ct,ut)=>Recoil_isPromise(ct)?ct.then(dt=>{st[ut]=dt,lt[ut]=void 0}).catch(dt=>{st[ut]=void 0,lt[ut]=dt}):null)).then(()=>wrapLoadables(nt,st,lt))},dangerouslyAllowMutability:!0}),noWait=Recoil_selectorFamily({key:"__noWait",get:nt=>({get:rt})=>{try{return Recoil_selector.value(loadableWithValue$4(rt(nt)))}catch(it){return Recoil_selector.value(Recoil_isPromise(it)?loadableWithPromise$3(it):loadableWithError$3(it))}},dangerouslyAllowMutability:!0});var Recoil_WaitFor={waitForNone,waitForAny,waitForAll,waitForAllSettled,noWait};const{RecoilLoadable}=Recoil_Loadable$1,{DefaultValue:DefaultValue$3}=Recoil_Node,{RecoilRoot:RecoilRoot$2,useRecoilStoreID:useRecoilStoreID$1}=Recoil_RecoilRoot,{isRecoilValue:isRecoilValue$5}=Recoil_RecoilValue$1,{retentionZone:retentionZone$1}=Recoil_RetentionZone,{freshSnapshot:freshSnapshot$2}=Recoil_Snapshot$1,{useRecoilState:useRecoilState$1,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:useRecoilState_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilStateLoadable:useRecoilStateLoadable$1,useRecoilValue:useRecoilValue$1,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:useRecoilValue_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilValueLoadable:useRecoilValueLoadable$1,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE$1,useResetRecoilState:useResetRecoilState$1,useSetRecoilState:useSetRecoilState$1}=Recoil_Hooks,{useGotoRecoilSnapshot:useGotoRecoilSnapshot$1,useRecoilSnapshot:useRecoilSnapshot$1,useRecoilTransactionObserver:useRecoilTransactionObserver$1}=Recoil_SnapshotHooks,{useRecoilCallback:useRecoilCallback$1}=Recoil_useRecoilCallback,{noWait:noWait$1,waitForAll:waitForAll$1,waitForAllSettled:waitForAllSettled$1,waitForAny:waitForAny$1,waitForNone:waitForNone$1}=Recoil_WaitFor;var Recoil_index={DefaultValue:DefaultValue$3,isRecoilValue:isRecoilValue$5,RecoilLoadable,RecoilEnv:Recoil_RecoilEnv,RecoilRoot:RecoilRoot$2,useRecoilStoreID:useRecoilStoreID$1,useRecoilBridgeAcrossReactRoots_UNSTABLE:Recoil_useRecoilBridgeAcrossReactRoots,atom:Recoil_atom,selector:Recoil_selector,atomFamily:Recoil_atomFamily,selectorFamily:Recoil_selectorFamily,constSelector:Recoil_constSelector,errorSelector:Recoil_errorSelector,readOnlySelector:Recoil_readOnlySelector,noWait:noWait$1,waitForNone:waitForNone$1,waitForAny:waitForAny$1,waitForAll:waitForAll$1,waitForAllSettled:waitForAllSettled$1,useRecoilValue:useRecoilValue$1,useRecoilValueLoadable:useRecoilValueLoadable$1,useRecoilState:useRecoilState$1,useRecoilStateLoadable:useRecoilStateLoadable$1,useSetRecoilState:useSetRecoilState$1,useResetRecoilState:useResetRecoilState$1,useGetRecoilValueInfo_UNSTABLE:Recoil_useGetRecoilValueInfo,useRecoilRefresher_UNSTABLE:Recoil_useRecoilRefresher,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:useRecoilValue_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:useRecoilState_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilCallback:useRecoilCallback$1,useRecoilTransaction_UNSTABLE:Recoil_useRecoilTransaction,useGotoRecoilSnapshot:useGotoRecoilSnapshot$1,useRecoilSnapshot:useRecoilSnapshot$1,useRecoilTransactionObserver_UNSTABLE:useRecoilTransactionObserver$1,snapshot_UNSTABLE:freshSnapshot$2,useRetain:Recoil_useRetain,retentionZone:retentionZone$1},Recoil_index_5=Recoil_index.RecoilRoot,Recoil_index_8=Recoil_index.atom,Recoil_index_20=Recoil_index.useRecoilValue,Recoil_index_22=Recoil_index.useRecoilState,Recoil_index_24=Recoil_index.useSetRecoilState,Recoil_index_25=Recoil_index.useResetRecoilState,propTypes$1={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function nt(st,lt,ct,ut,dt,ht){if(ht!==ReactPropTypesSecret){var ft=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw ft.name="Invariant Violation",ft}}nt.isRequired=nt;function rt(){return nt}var it={array:nt,bigint:nt,bool:nt,func:nt,number:nt,object:nt,string:nt,symbol:nt,any:nt,arrayOf:rt,element:nt,elementType:nt,instanceOf:rt,node:nt,objectOf:rt,oneOf:rt,oneOfType:rt,shape:rt,exact:rt,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return it.PropTypes=it,it};propTypes$1.exports=factoryWithThrowingShims();var propTypesExports=propTypes$1.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports),Button=({btnCss:nt,onClick:rt,buttonName:it,type:st})=>jsxRuntimeExports.jsx("button",{className:nt,onClick:rt,type:st,children:it});Button.propTypes={btnCss:PropTypes.string,onClick:PropTypes.func,buttonName:PropTypes.string,type:PropTypes.string};const baseUrlState=Recoil_index_8({key:"baseUrlState",default:"https://i10c204.p.ssafy.io/"});var dist={};Object.defineProperty(dist,"__esModule",{value:!0});var recoilPersist_1=dist.recoilPersist=void 0;const recoilPersist=(nt={})=>{if(typeof window>"u")return{persistAtom:()=>{}};const{key:rt="recoil-persist",storage:it=localStorage,converter:st=JSON}=nt,lt=({onSet:ft,node:pt,trigger:mt,setSelf:gt})=>{if(mt==="get"){const xt=ut();typeof xt.then=="function"&&xt.then(yt=>{yt.hasOwnProperty(pt.key)&&gt(yt[pt.key])}),xt.hasOwnProperty(pt.key)&&gt(xt[pt.key])}ft(async(xt,yt,vt)=>{const St=ut();typeof St.then=="function"?St.then(wt=>ct(xt,wt,pt.key,vt)):ct(xt,St,pt.key,vt)})},ct=(ft,pt,mt,gt)=>{gt?delete pt[mt]:pt[mt]=ft,ht(pt)},ut=()=>{const ft=it.getItem(rt);return ft==null?{}:typeof ft=="string"?dt(ft):typeof ft.then=="function"?ft.then(dt):{}},dt=ft=>{if(ft===void 0)return{};try{return st.parse(ft)}catch(pt){return console.error(pt),{}}},ht=ft=>{try{typeof it.mergeItem=="function"?it.mergeItem(rt,st.stringify(ft)):it.setItem(rt,st.stringify(ft))}catch(pt){console.error(pt)}};return{persistAtom:lt}};recoilPersist_1=dist.recoilPersist=recoilPersist;const{persistAtom:persistAtom$1}=recoilPersist_1({key:"userInfo",storage:localStorage}),userState=Recoil_index_8({key:"userInfo",default:{},effects_UNSTABLE:[persistAtom$1]}),modalState=Recoil_index_8({key:"modalState",default:{type:null,data:null}}),LoginPage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_24(userState),it=Recoil_index_24(modalState),[st,lt]=reactExports.useState(""),[ct,ut]=reactExports.useState(""),dt=()=>{it({type:"signup",data:""})},ht=mt=>{lt(mt.currentTarget.value)},ft=mt=>{ut(mt.currentTarget.value)},pt=async mt=>{mt.preventDefault(),await axios.post(`${nt}api/auth/login`,{email:st,password:ct}).then(gt=>{localStorage.clear(),localStorage.setItem("isLogin",!0),rt({token:gt.data.data_body.token.access_token,info:gt.data.data_body.user_info}),window.location.replace("/")})};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-screen gap-24",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center font-mono text-3xl text-teal-700",children:jsxRuntimeExports.jsx("img",{src:"/fullLogo.png",alt:"",className:"w-3/5"})}),jsxRuntimeExports.jsxs("form",{className:"flex flex-col gap-4 p-4 border border-teal-700 rounded-md",onSubmit:pt,children:[jsxRuntimeExports.jsx("label",{className:"font-mono",children:"Email"}),jsxRuntimeExports.jsx("input",{type:"email",value:st,onChange:ht,className:"px-2 py-1 border rounded-md"}),jsxRuntimeExports.jsx("label",{className:"font-mono",children:"Password"}),jsxRuntimeExports.jsx("input",{type:"password",value:ct,autoComplete:"on",onChange:ft,className:"px-2 py-1 border rounded-md"}),jsxRuntimeExports.jsx(Button,{type:"submit",buttonName:"로그인",btnCss:"py-1 text-white bg-teal-700 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"button",onClick:dt,value:"회원가입",className:"py-1 text-white bg-teal-700 rounded-md"})]})]})};var lib$1={exports:{}},Modal$2={},ModalPortal={exports:{}},focusManager={},tabbable={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=pt;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var it="none",st="contents",lt=/input|select|textarea|button|object|iframe/;function ct(mt,gt){return gt.getPropertyValue("overflow")!=="visible"||mt.scrollWidth<=0&&mt.scrollHeight<=0}function ut(mt){var gt=mt.offsetWidth<=0&&mt.offsetHeight<=0;if(gt&&!mt.innerHTML)return!0;try{var xt=window.getComputedStyle(mt),yt=xt.getPropertyValue("display");return gt?yt!==st&&ct(mt,xt):yt===it}catch{return console.warn("Failed to inspect element style"),!1}}function dt(mt){for(var gt=mt,xt=mt.getRootNode&&mt.getRootNode();gt&&gt!==document.body;){if(xt&&gt===xt&&(gt=xt.host.parentNode),ut(gt))return!1;gt=gt.parentNode}return!0}function ht(mt,gt){var xt=mt.nodeName.toLowerCase(),yt=lt.test(xt)&&!mt.disabled||xt==="a"&&mt.href||gt;return yt&&dt(mt)}function ft(mt){var gt=mt.getAttribute("tabindex");gt===null&&(gt=void 0);var xt=isNaN(gt);return(xt||gt>=0)&&ht(mt,!xt)}function pt(mt){var gt=[].slice.call(mt.querySelectorAll("*"),0).reduce(function(xt,yt){return xt.concat(yt.shadowRoot?pt(yt.shadowRoot):[yt])},[]);return gt.filter(ft)}nt.exports=rt.default})(tabbable,tabbable.exports);var tabbableExports=tabbable.exports;Object.defineProperty(focusManager,"__esModule",{value:!0});focusManager.resetState=resetState$4;focusManager.log=log$4;focusManager.handleBlur=handleBlur;focusManager.handleFocus=handleFocus;focusManager.markForFocusLater=markForFocusLater;focusManager.returnFocus=returnFocus;focusManager.popWithoutFocus=popWithoutFocus;focusManager.setupScopedFocus=setupScopedFocus;focusManager.teardownScopedFocus=teardownScopedFocus;var _tabbable=tabbableExports,_tabbable2=_interopRequireDefault$4(_tabbable);function _interopRequireDefault$4(nt){return nt&&nt.__esModule?nt:{default:nt}}var focusLaterElements=[],modalElement=null,needToFocus=!1;function resetState$4(){focusLaterElements=[]}function log$4(){}function handleBlur(){needToFocus=!0}function handleFocus(){if(needToFocus){if(needToFocus=!1,!modalElement)return;setTimeout(function(){if(!modalElement.contains(document.activeElement)){var nt=(0,_tabbable2.default)(modalElement)[0]||modalElement;nt.focus()}},0)}}function markForFocusLater(){focusLaterElements.push(document.activeElement)}function returnFocus(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,rt=null;try{focusLaterElements.length!==0&&(rt=focusLaterElements.pop(),rt.focus({preventScroll:nt}));return}catch{console.warn(["You tried to return focus to",rt,"but it is not in the DOM anymore"].join(" "))}}function popWithoutFocus(){focusLaterElements.length>0&&focusLaterElements.pop()}function setupScopedFocus(nt){modalElement=nt,window.addEventListener?(window.addEventListener("blur",handleBlur,!1),document.addEventListener("focus",handleFocus,!0)):(window.attachEvent("onBlur",handleBlur),document.attachEvent("onFocus",handleFocus))}function teardownScopedFocus(){modalElement=null,window.addEventListener?(window.removeEventListener("blur",handleBlur),document.removeEventListener("focus",handleFocus)):(window.detachEvent("onBlur",handleBlur),document.detachEvent("onFocus",handleFocus))}var scopeTab={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=ut;var it=tabbableExports,st=lt(it);function lt(dt){return dt&&dt.__esModule?dt:{default:dt}}function ct(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return dt.activeElement.shadowRoot?ct(dt.activeElement.shadowRoot):dt.activeElement}function ut(dt,ht){var ft=(0,st.default)(dt);if(!ft.length){ht.preventDefault();return}var pt=void 0,mt=ht.shiftKey,gt=ft[0],xt=ft[ft.length-1],yt=ct();if(dt===yt){if(!mt)return;pt=xt}if(xt===yt&&!mt&&(pt=gt),gt===yt&&mt&&(pt=xt),pt){ht.preventDefault(),pt.focus();return}var vt=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),St=vt!=null&&vt[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(St){var wt=ft.indexOf(yt);if(wt>-1&&(wt+=mt?-1:1),pt=ft[wt],typeof pt>"u"){ht.preventDefault(),pt=mt?xt:gt,pt.focus();return}ht.preventDefault(),pt.focus()}}nt.exports=rt.default})(scopeTab,scopeTab.exports);var scopeTabExports=scopeTab.exports,ariaAppHider$1={},warning=function(){},warning_1=warning,safeHTMLElement={},exenv={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(nt){(function(){var rt=!!(typeof window<"u"&&window.document&&window.document.createElement),it={canUseDOM:rt,canUseWorkers:typeof Worker<"u",canUseEventListeners:rt&&!!(window.addEventListener||window.attachEvent),canUseViewport:rt&&!!window.screen};nt.exports?nt.exports=it:window.ExecutionEnvironment=it})()})(exenv);var exenvExports=exenv.exports;Object.defineProperty(safeHTMLElement,"__esModule",{value:!0});safeHTMLElement.canUseDOM=safeHTMLElement.SafeNodeList=safeHTMLElement.SafeHTMLCollection=void 0;var _exenv=exenvExports,_exenv2=_interopRequireDefault$3(_exenv);function _interopRequireDefault$3(nt){return nt&&nt.__esModule?nt:{default:nt}}var EE=_exenv2.default,SafeHTMLElement=EE.canUseDOM?window.HTMLElement:{};safeHTMLElement.SafeHTMLCollection=EE.canUseDOM?window.HTMLCollection:{};safeHTMLElement.SafeNodeList=EE.canUseDOM?window.NodeList:{};safeHTMLElement.canUseDOM=EE.canUseDOM;safeHTMLElement.default=SafeHTMLElement;Object.defineProperty(ariaAppHider$1,"__esModule",{value:!0});ariaAppHider$1.resetState=resetState$3;ariaAppHider$1.log=log$3;ariaAppHider$1.assertNodeList=assertNodeList;ariaAppHider$1.setElement=setElement;ariaAppHider$1.validateElement=validateElement;ariaAppHider$1.hide=hide$2;ariaAppHider$1.show=show;ariaAppHider$1.documentNotReadyOrSSRTesting=documentNotReadyOrSSRTesting;var _warning=warning_1,_warning2=_interopRequireDefault$2(_warning),_safeHTMLElement$1=safeHTMLElement;function _interopRequireDefault$2(nt){return nt&&nt.__esModule?nt:{default:nt}}var globalElement=null;function resetState$3(){globalElement&&(globalElement.removeAttribute?globalElement.removeAttribute("aria-hidden"):globalElement.length!=null?globalElement.forEach(function(nt){return nt.removeAttribute("aria-hidden")}):document.querySelectorAll(globalElement).forEach(function(nt){return nt.removeAttribute("aria-hidden")})),globalElement=null}function log$3(){}function assertNodeList(nt,rt){if(!nt||!nt.length)throw new Error("react-modal: No elements were found for selector "+rt+".")}function setElement(nt){var rt=nt;if(typeof rt=="string"&&_safeHTMLElement$1.canUseDOM){var it=document.querySelectorAll(rt);assertNodeList(it,rt),rt=it}return globalElement=rt||globalElement,globalElement}function validateElement(nt){var rt=nt||globalElement;return rt?Array.isArray(rt)||rt instanceof HTMLCollection||rt instanceof NodeList?rt:[rt]:((0,_warning2.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function hide$2(nt){var rt=!0,it=!1,st=void 0;try{for(var lt=validateElement(nt)[Symbol.iterator](),ct;!(rt=(ct=lt.next()).done);rt=!0){var ut=ct.value;ut.setAttribute("aria-hidden","true")}}catch(dt){it=!0,st=dt}finally{try{!rt&&lt.return&&lt.return()}finally{if(it)throw st}}}function show(nt){var rt=!0,it=!1,st=void 0;try{for(var lt=validateElement(nt)[Symbol.iterator](),ct;!(rt=(ct=lt.next()).done);rt=!0){var ut=ct.value;ut.removeAttribute("aria-hidden")}}catch(dt){it=!0,st=dt}finally{try{!rt&&lt.return&&lt.return()}finally{if(it)throw st}}}function documentNotReadyOrSSRTesting(){globalElement=null}var classList={};Object.defineProperty(classList,"__esModule",{value:!0});classList.resetState=resetState$2;classList.log=log$2;var htmlClassList={},docBodyClassList={};function removeClass(nt,rt){nt.classList.remove(rt)}function resetState$2(){var nt=document.getElementsByTagName("html")[0];for(var rt in htmlClassList)removeClass(nt,htmlClassList[rt]);var it=document.body;for(var st in docBodyClassList)removeClass(it,docBodyClassList[st]);htmlClassList={},docBodyClassList={}}function log$2(){}var incrementReference=function(rt,it){return rt[it]||(rt[it]=0),rt[it]+=1,it},decrementReference=function(rt,it){return rt[it]&&(rt[it]-=1),it},trackClass=function(rt,it,st){st.forEach(function(lt){incrementReference(it,lt),rt.add(lt)})},untrackClass=function(rt,it,st){st.forEach(function(lt){decrementReference(it,lt),it[lt]===0&&rt.remove(lt)})};classList.add=function(rt,it){return trackClass(rt.classList,rt.nodeName.toLowerCase()=="html"?htmlClassList:docBodyClassList,it.split(" "))};classList.remove=function(rt,it){return untrackClass(rt.classList,rt.nodeName.toLowerCase()=="html"?htmlClassList:docBodyClassList,it.split(" "))};var portalOpenInstances$1={};Object.defineProperty(portalOpenInstances$1,"__esModule",{value:!0});portalOpenInstances$1.log=log$1;portalOpenInstances$1.resetState=resetState$1;function _classCallCheck$1(nt,rt){if(!(nt instanceof rt))throw new TypeError("Cannot call a class as a function")}var PortalOpenInstances=function nt(){var rt=this;_classCallCheck$1(this,nt),this.register=function(it){rt.openInstances.indexOf(it)===-1&&(rt.openInstances.push(it),rt.emit("register"))},this.deregister=function(it){var st=rt.openInstances.indexOf(it);st!==-1&&(rt.openInstances.splice(st,1),rt.emit("deregister"))},this.subscribe=function(it){rt.subscribers.push(it)},this.emit=function(it){rt.subscribers.forEach(function(st){return st(it,rt.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},portalOpenInstances=new PortalOpenInstances;function log$1(){console.log("portalOpenInstances ----------"),console.log(portalOpenInstances.openInstances.length),portalOpenInstances.openInstances.forEach(function(nt){return console.log(nt)}),console.log("end portalOpenInstances ----------")}function resetState$1(){portalOpenInstances=new PortalOpenInstances}portalOpenInstances$1.default=portalOpenInstances;var bodyTrap$1={};Object.defineProperty(bodyTrap$1,"__esModule",{value:!0});bodyTrap$1.resetState=resetState;bodyTrap$1.log=log;var _portalOpenInstances=portalOpenInstances$1,_portalOpenInstances2=_interopRequireDefault$1(_portalOpenInstances);function _interopRequireDefault$1(nt){return nt&&nt.__esModule?nt:{default:nt}}var before=void 0,after=void 0,instances$1=[];function resetState(){for(var nt=[before,after],rt=0;rt<nt.length;rt++){var it=nt[rt];it&&it.parentNode&&it.parentNode.removeChild(it)}before=after=null,instances$1=[]}function log(){console.log("bodyTrap ----------"),console.log(instances$1.length);for(var nt=[before,after],rt=0;rt<nt.length;rt++){var it=nt[rt],st=it||{};console.log(st.nodeName,st.className,st.id)}console.log("edn bodyTrap ----------")}function focusContent(){instances$1.length!==0&&instances$1[instances$1.length-1].focusContent()}function bodyTrap(nt,rt){!before&&!after&&(before=document.createElement("div"),before.setAttribute("data-react-modal-body-trap",""),before.style.position="absolute",before.style.opacity="0",before.setAttribute("tabindex","0"),before.addEventListener("focus",focusContent),after=before.cloneNode(),after.addEventListener("focus",focusContent)),instances$1=rt,instances$1.length>0?(document.body.firstChild!==before&&document.body.insertBefore(before,document.body.firstChild),document.body.lastChild!==after&&document.body.appendChild(after)):(before.parentElement&&before.parentElement.removeChild(before),after.parentElement&&after.parentElement.removeChild(after))}_portalOpenInstances2.default.subscribe(bodyTrap);(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=Object.assign||function($t){for(var Vt=1;Vt<arguments.length;Vt++){var Ut=arguments[Vt];for(var zt in Ut)Object.prototype.hasOwnProperty.call(Ut,zt)&&($t[zt]=Ut[zt])}return $t},st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},lt=function(){function $t(Vt,Ut){for(var zt=0;zt<Ut.length;zt++){var Bt=Ut[zt];Bt.enumerable=Bt.enumerable||!1,Bt.configurable=!0,"value"in Bt&&(Bt.writable=!0),Object.defineProperty(Vt,Bt.key,Bt)}}return function(Vt,Ut,zt){return Ut&&$t(Vt.prototype,Ut),zt&&$t(Vt,zt),Vt}}(),ct=reactExports,ut=propTypesExports,dt=It(ut),ht=focusManager,ft=Tt(ht),pt=scopeTabExports,mt=It(pt),gt=ariaAppHider$1,xt=Tt(gt),yt=classList,vt=Tt(yt),St=safeHTMLElement,wt=It(St),Et=portalOpenInstances$1,Rt=It(Et);function Tt($t){if($t&&$t.__esModule)return $t;var Vt={};if($t!=null)for(var Ut in $t)Object.prototype.hasOwnProperty.call($t,Ut)&&(Vt[Ut]=$t[Ut]);return Vt.default=$t,Vt}function It($t){return $t&&$t.__esModule?$t:{default:$t}}function At($t,Vt){if(!($t instanceof Vt))throw new TypeError("Cannot call a class as a function")}function Dt($t,Vt){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Vt&&(typeof Vt=="object"||typeof Vt=="function")?Vt:$t}function jt($t,Vt){if(typeof Vt!="function"&&Vt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Vt);$t.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),Vt&&(Object.setPrototypeOf?Object.setPrototypeOf($t,Vt):$t.__proto__=Vt)}var Ft={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},Lt=function(Vt){return Vt.code==="Tab"||Vt.keyCode===9},Mt=function(Vt){return Vt.code==="Escape"||Vt.keyCode===27},Ot=0,Nt=function($t){jt(Vt,$t);function Vt(Ut){At(this,Vt);var zt=Dt(this,(Vt.__proto__||Object.getPrototypeOf(Vt)).call(this,Ut));return zt.setOverlayRef=function(Bt){zt.overlay=Bt,zt.props.overlayRef&&zt.props.overlayRef(Bt)},zt.setContentRef=function(Bt){zt.content=Bt,zt.props.contentRef&&zt.props.contentRef(Bt)},zt.afterClose=function(){var Bt=zt.props,Ht=Bt.appElement,Gt=Bt.ariaHideApp,Xt=Bt.htmlOpenClassName,Zt=Bt.bodyOpenClassName,hr=Bt.parentSelector,nr=hr&&hr().ownerDocument||document;Zt&&vt.remove(nr.body,Zt),Xt&&vt.remove(nr.getElementsByTagName("html")[0],Xt),Gt&&Ot>0&&(Ot-=1,Ot===0&&xt.show(Ht)),zt.props.shouldFocusAfterRender&&(zt.props.shouldReturnFocusAfterClose?(ft.returnFocus(zt.props.preventScroll),ft.teardownScopedFocus()):ft.popWithoutFocus()),zt.props.onAfterClose&&zt.props.onAfterClose(),Rt.default.deregister(zt)},zt.open=function(){zt.beforeOpen(),zt.state.afterOpen&&zt.state.beforeClose?(clearTimeout(zt.closeTimer),zt.setState({beforeClose:!1})):(zt.props.shouldFocusAfterRender&&(ft.setupScopedFocus(zt.node),ft.markForFocusLater()),zt.setState({isOpen:!0},function(){zt.openAnimationFrame=requestAnimationFrame(function(){zt.setState({afterOpen:!0}),zt.props.isOpen&&zt.props.onAfterOpen&&zt.props.onAfterOpen({overlayEl:zt.overlay,contentEl:zt.content})})}))},zt.close=function(){zt.props.closeTimeoutMS>0?zt.closeWithTimeout():zt.closeWithoutTimeout()},zt.focusContent=function(){return zt.content&&!zt.contentHasFocus()&&zt.content.focus({preventScroll:!0})},zt.closeWithTimeout=function(){var Bt=Date.now()+zt.props.closeTimeoutMS;zt.setState({beforeClose:!0,closesAt:Bt},function(){zt.closeTimer=setTimeout(zt.closeWithoutTimeout,zt.state.closesAt-Date.now())})},zt.closeWithoutTimeout=function(){zt.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},zt.afterClose)},zt.handleKeyDown=function(Bt){Lt(Bt)&&(0,mt.default)(zt.content,Bt),zt.props.shouldCloseOnEsc&&Mt(Bt)&&(Bt.stopPropagation(),zt.requestClose(Bt))},zt.handleOverlayOnClick=function(Bt){zt.shouldClose===null&&(zt.shouldClose=!0),zt.shouldClose&&zt.props.shouldCloseOnOverlayClick&&(zt.ownerHandlesClose()?zt.requestClose(Bt):zt.focusContent()),zt.shouldClose=null},zt.handleContentOnMouseUp=function(){zt.shouldClose=!1},zt.handleOverlayOnMouseDown=function(Bt){!zt.props.shouldCloseOnOverlayClick&&Bt.target==zt.overlay&&Bt.preventDefault()},zt.handleContentOnClick=function(){zt.shouldClose=!1},zt.handleContentOnMouseDown=function(){zt.shouldClose=!1},zt.requestClose=function(Bt){return zt.ownerHandlesClose()&&zt.props.onRequestClose(Bt)},zt.ownerHandlesClose=function(){return zt.props.onRequestClose},zt.shouldBeClosed=function(){return!zt.state.isOpen&&!zt.state.beforeClose},zt.contentHasFocus=function(){return document.activeElement===zt.content||zt.content.contains(document.activeElement)},zt.buildClassName=function(Bt,Ht){var Gt=(typeof Ht>"u"?"undefined":st(Ht))==="object"?Ht:{base:Ft[Bt],afterOpen:Ft[Bt]+"--after-open",beforeClose:Ft[Bt]+"--before-close"},Xt=Gt.base;return zt.state.afterOpen&&(Xt=Xt+" "+Gt.afterOpen),zt.state.beforeClose&&(Xt=Xt+" "+Gt.beforeClose),typeof Ht=="string"&&Ht?Xt+" "+Ht:Xt},zt.attributesFromObject=function(Bt,Ht){return Object.keys(Ht).reduce(function(Gt,Xt){return Gt[Bt+"-"+Xt]=Ht[Xt],Gt},{})},zt.state={afterOpen:!1,beforeClose:!1},zt.shouldClose=null,zt.moveFromContentToOverlay=null,zt}return lt(Vt,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(zt,Bt){this.props.isOpen&&!zt.isOpen?this.open():!this.props.isOpen&&zt.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!Bt.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var zt=this.props,Bt=zt.appElement,Ht=zt.ariaHideApp,Gt=zt.htmlOpenClassName,Xt=zt.bodyOpenClassName,Zt=zt.parentSelector,hr=Zt&&Zt().ownerDocument||document;Xt&&vt.add(hr.body,Xt),Gt&&vt.add(hr.getElementsByTagName("html")[0],Gt),Ht&&(Ot+=1,xt.hide(Bt)),Rt.default.register(this)}},{key:"render",value:function(){var zt=this.props,Bt=zt.id,Ht=zt.className,Gt=zt.overlayClassName,Xt=zt.defaultStyles,Zt=zt.children,hr=Ht?{}:Xt.content,nr=Gt?{}:Xt.overlay;if(this.shouldBeClosed())return null;var ir={ref:this.setOverlayRef,className:this.buildClassName("overlay",Gt),style:it({},nr,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},yr=it({id:Bt,ref:this.setContentRef,style:it({},hr,this.props.style.content),className:this.buildClassName("content",Ht),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",it({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),Cr=this.props.contentElement(yr,Zt);return this.props.overlayElement(ir,Cr)}}]),Vt}(ct.Component);Nt.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},Nt.propTypes={isOpen:dt.default.bool.isRequired,defaultStyles:dt.default.shape({content:dt.default.object,overlay:dt.default.object}),style:dt.default.shape({content:dt.default.object,overlay:dt.default.object}),className:dt.default.oneOfType([dt.default.string,dt.default.object]),overlayClassName:dt.default.oneOfType([dt.default.string,dt.default.object]),parentSelector:dt.default.func,bodyOpenClassName:dt.default.string,htmlOpenClassName:dt.default.string,ariaHideApp:dt.default.bool,appElement:dt.default.oneOfType([dt.default.instanceOf(wt.default),dt.default.instanceOf(St.SafeHTMLCollection),dt.default.instanceOf(St.SafeNodeList),dt.default.arrayOf(dt.default.instanceOf(wt.default))]),onAfterOpen:dt.default.func,onAfterClose:dt.default.func,onRequestClose:dt.default.func,closeTimeoutMS:dt.default.number,shouldFocusAfterRender:dt.default.bool,shouldCloseOnOverlayClick:dt.default.bool,shouldReturnFocusAfterClose:dt.default.bool,preventScroll:dt.default.bool,role:dt.default.string,contentLabel:dt.default.string,aria:dt.default.object,data:dt.default.object,children:dt.default.node,shouldCloseOnEsc:dt.default.bool,overlayRef:dt.default.func,contentRef:dt.default.func,id:dt.default.string,overlayElement:dt.default.func,contentElement:dt.default.func,testId:dt.default.string},rt.default=Nt,nt.exports=rt.default})(ModalPortal,ModalPortal.exports);var ModalPortalExports=ModalPortal.exports;function componentWillMount(){var nt=this.constructor.getDerivedStateFromProps(this.props,this.state);nt!=null&&this.setState(nt)}function componentWillReceiveProps(nt){function rt(it){var st=this.constructor.getDerivedStateFromProps(nt,it);return st??null}this.setState(rt.bind(this))}function componentWillUpdate(nt,rt){try{var it=this.props,st=this.state;this.props=nt,this.state=rt,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(it,st)}finally{this.props=it,this.state=st}}componentWillMount.__suppressDeprecationWarning=!0;componentWillReceiveProps.__suppressDeprecationWarning=!0;componentWillUpdate.__suppressDeprecationWarning=!0;function polyfill(nt){var rt=nt.prototype;if(!rt||!rt.isReactComponent)throw new Error("Can only polyfill class components");if(typeof nt.getDerivedStateFromProps!="function"&&typeof rt.getSnapshotBeforeUpdate!="function")return nt;var it=null,st=null,lt=null;if(typeof rt.componentWillMount=="function"?it="componentWillMount":typeof rt.UNSAFE_componentWillMount=="function"&&(it="UNSAFE_componentWillMount"),typeof rt.componentWillReceiveProps=="function"?st="componentWillReceiveProps":typeof rt.UNSAFE_componentWillReceiveProps=="function"&&(st="UNSAFE_componentWillReceiveProps"),typeof rt.componentWillUpdate=="function"?lt="componentWillUpdate":typeof rt.UNSAFE_componentWillUpdate=="function"&&(lt="UNSAFE_componentWillUpdate"),it!==null||st!==null||lt!==null){var ct=nt.displayName||nt.name,ut=typeof nt.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+ct+" uses "+ut+" but also contains the following legacy lifecycles:"+(it!==null?`
  `+it:"")+(st!==null?`
  `+st:"")+(lt!==null?`
  `+lt:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof nt.getDerivedStateFromProps=="function"&&(rt.componentWillMount=componentWillMount,rt.componentWillReceiveProps=componentWillReceiveProps),typeof rt.getSnapshotBeforeUpdate=="function"){if(typeof rt.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");rt.componentWillUpdate=componentWillUpdate;var dt=rt.componentDidUpdate;rt.componentDidUpdate=function(ft,pt,mt){var gt=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:mt;dt.call(this,ft,pt,gt)}}return nt}const reactLifecyclesCompat_es=Object.freeze(Object.defineProperty({__proto__:null,polyfill},Symbol.toStringTag,{value:"Module"})),require$$6=getAugmentedNamespace(reactLifecyclesCompat_es);Object.defineProperty(Modal$2,"__esModule",{value:!0});Modal$2.bodyOpenClassName=Modal$2.portalClassName=void 0;var _extends$2=Object.assign||function(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt];for(var st in it)Object.prototype.hasOwnProperty.call(it,st)&&(nt[st]=it[st])}return nt},_createClass=function(){function nt(rt,it){for(var st=0;st<it.length;st++){var lt=it[st];lt.enumerable=lt.enumerable||!1,lt.configurable=!0,"value"in lt&&(lt.writable=!0),Object.defineProperty(rt,lt.key,lt)}}return function(rt,it,st){return it&&nt(rt.prototype,it),st&&nt(rt,st),rt}}(),_react=reactExports,_react2=_interopRequireDefault(_react),_reactDom=reactDomExports,_reactDom2=_interopRequireDefault(_reactDom),_propTypes=propTypesExports,_propTypes2=_interopRequireDefault(_propTypes),_ModalPortal=ModalPortalExports,_ModalPortal2=_interopRequireDefault(_ModalPortal),_ariaAppHider=ariaAppHider$1,ariaAppHider=_interopRequireWildcard(_ariaAppHider),_safeHTMLElement=safeHTMLElement,_safeHTMLElement2=_interopRequireDefault(_safeHTMLElement),_reactLifecyclesCompat=require$$6;function _interopRequireWildcard(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.prototype.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function _interopRequireDefault(nt){return nt&&nt.__esModule?nt:{default:nt}}function _classCallCheck(nt,rt){if(!(nt instanceof rt))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(nt,rt){if(!nt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rt&&(typeof rt=="object"||typeof rt=="function")?rt:nt}function _inherits(nt,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof rt);nt.prototype=Object.create(rt&&rt.prototype,{constructor:{value:nt,enumerable:!1,writable:!0,configurable:!0}}),rt&&(Object.setPrototypeOf?Object.setPrototypeOf(nt,rt):nt.__proto__=rt)}var portalClassName=Modal$2.portalClassName="ReactModalPortal",bodyOpenClassName=Modal$2.bodyOpenClassName="ReactModal__Body--open",isReact16=_safeHTMLElement.canUseDOM&&_reactDom2.default.createPortal!==void 0,createHTMLElement=function(rt){return document.createElement(rt)},getCreatePortal=function(){return isReact16?_reactDom2.default.createPortal:_reactDom2.default.unstable_renderSubtreeIntoContainer};function getParentElement(nt){return nt()}var Modal$1=function(nt){_inherits(rt,nt);function rt(){var it,st,lt,ct;_classCallCheck(this,rt);for(var ut=arguments.length,dt=Array(ut),ht=0;ht<ut;ht++)dt[ht]=arguments[ht];return ct=(st=(lt=_possibleConstructorReturn(this,(it=rt.__proto__||Object.getPrototypeOf(rt)).call.apply(it,[this].concat(dt))),lt),lt.removePortal=function(){!isReact16&&_reactDom2.default.unmountComponentAtNode(lt.node);var ft=getParentElement(lt.props.parentSelector);ft&&ft.contains(lt.node)?ft.removeChild(lt.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},lt.portalRef=function(ft){lt.portal=ft},lt.renderPortal=function(ft){var pt=getCreatePortal(),mt=pt(lt,_react2.default.createElement(_ModalPortal2.default,_extends$2({defaultStyles:rt.defaultStyles},ft)),lt.node);lt.portalRef(mt)},st),_possibleConstructorReturn(lt,ct)}return _createClass(rt,[{key:"componentDidMount",value:function(){if(_safeHTMLElement.canUseDOM){isReact16||(this.node=createHTMLElement("div")),this.node.className=this.props.portalClassName;var st=getParentElement(this.props.parentSelector);st.appendChild(this.node),!isReact16&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(st){var lt=getParentElement(st.parentSelector),ct=getParentElement(this.props.parentSelector);return{prevParent:lt,nextParent:ct}}},{key:"componentDidUpdate",value:function(st,lt,ct){if(_safeHTMLElement.canUseDOM){var ut=this.props,dt=ut.isOpen,ht=ut.portalClassName;st.portalClassName!==ht&&(this.node.className=ht);var ft=ct.prevParent,pt=ct.nextParent;pt!==ft&&(ft.removeChild(this.node),pt.appendChild(this.node)),!(!st.isOpen&&!dt)&&!isReact16&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!_safeHTMLElement.canUseDOM||!this.node||!this.portal)){var st=this.portal.state,lt=Date.now(),ct=st.isOpen&&this.props.closeTimeoutMS&&(st.closesAt||lt+this.props.closeTimeoutMS);ct?(st.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,ct-lt)):this.removePortal()}}},{key:"render",value:function(){if(!_safeHTMLElement.canUseDOM||!isReact16)return null;!this.node&&isReact16&&(this.node=createHTMLElement("div"));var st=getCreatePortal();return st(_react2.default.createElement(_ModalPortal2.default,_extends$2({ref:this.portalRef,defaultStyles:rt.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(st){ariaAppHider.setElement(st)}}]),rt}(_react.Component);Modal$1.propTypes={isOpen:_propTypes2.default.bool.isRequired,style:_propTypes2.default.shape({content:_propTypes2.default.object,overlay:_propTypes2.default.object}),portalClassName:_propTypes2.default.string,bodyOpenClassName:_propTypes2.default.string,htmlOpenClassName:_propTypes2.default.string,className:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.shape({base:_propTypes2.default.string.isRequired,afterOpen:_propTypes2.default.string.isRequired,beforeClose:_propTypes2.default.string.isRequired})]),overlayClassName:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.shape({base:_propTypes2.default.string.isRequired,afterOpen:_propTypes2.default.string.isRequired,beforeClose:_propTypes2.default.string.isRequired})]),appElement:_propTypes2.default.oneOfType([_propTypes2.default.instanceOf(_safeHTMLElement2.default),_propTypes2.default.instanceOf(_safeHTMLElement.SafeHTMLCollection),_propTypes2.default.instanceOf(_safeHTMLElement.SafeNodeList),_propTypes2.default.arrayOf(_propTypes2.default.instanceOf(_safeHTMLElement2.default))]),onAfterOpen:_propTypes2.default.func,onRequestClose:_propTypes2.default.func,closeTimeoutMS:_propTypes2.default.number,ariaHideApp:_propTypes2.default.bool,shouldFocusAfterRender:_propTypes2.default.bool,shouldCloseOnOverlayClick:_propTypes2.default.bool,shouldReturnFocusAfterClose:_propTypes2.default.bool,preventScroll:_propTypes2.default.bool,parentSelector:_propTypes2.default.func,aria:_propTypes2.default.object,data:_propTypes2.default.object,role:_propTypes2.default.string,contentLabel:_propTypes2.default.string,shouldCloseOnEsc:_propTypes2.default.bool,overlayRef:_propTypes2.default.func,contentRef:_propTypes2.default.func,id:_propTypes2.default.string,overlayElement:_propTypes2.default.func,contentElement:_propTypes2.default.func};Modal$1.defaultProps={isOpen:!1,portalClassName,bodyOpenClassName,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(rt,it){return _react2.default.createElement("div",rt,it)},contentElement:function(rt,it){return _react2.default.createElement("div",rt,it)}};Modal$1.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,_reactLifecyclesCompat.polyfill)(Modal$1);Modal$2.default=Modal$1;(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=Modal$2,st=lt(it);function lt(ct){return ct&&ct.__esModule?ct:{default:ct}}rt.default=st.default,nt.exports=rt.default})(lib$1,lib$1.exports);var libExports=lib$1.exports;const Modal=getDefaultExportFromCjs(libExports);var isCheckBoxInput=nt=>nt.type==="checkbox",isDateObject=nt=>nt instanceof Date,isNullOrUndefined=nt=>nt==null;const isObjectType=nt=>typeof nt=="object";var isObject$1=nt=>!isNullOrUndefined(nt)&&!Array.isArray(nt)&&isObjectType(nt)&&!isDateObject(nt),getEventValue=nt=>isObject$1(nt)&&nt.target?isCheckBoxInput(nt.target)?nt.target.checked:nt.target.value:nt,getNodeParentName=nt=>nt.substring(0,nt.search(/\.\d+(\.|$)/))||nt,isNameInFieldArray=(nt,rt)=>nt.has(getNodeParentName(rt)),isPlainObject=nt=>{const rt=nt.constructor&&nt.constructor.prototype;return isObject$1(rt)&&rt.hasOwnProperty("isPrototypeOf")},isWeb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cloneObject(nt){let rt;const it=Array.isArray(nt);if(nt instanceof Date)rt=new Date(nt);else if(nt instanceof Set)rt=new Set(nt);else if(!(isWeb&&(nt instanceof Blob||nt instanceof FileList))&&(it||isObject$1(nt)))if(rt=it?[]:{},!it&&!isPlainObject(nt))rt=nt;else for(const st in nt)nt.hasOwnProperty(st)&&(rt[st]=cloneObject(nt[st]));else return nt;return rt}var compact=nt=>Array.isArray(nt)?nt.filter(Boolean):[],isUndefined=nt=>nt===void 0,get=(nt,rt,it)=>{if(!rt||!isObject$1(nt))return it;const st=compact(rt.split(/[,[\].]+?/)).reduce((lt,ct)=>isNullOrUndefined(lt)?lt:lt[ct],nt);return isUndefined(st)||st===nt?isUndefined(nt[rt])?it:nt[rt]:st},isBoolean=nt=>typeof nt=="boolean";const EVENTS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},VALIDATION_MODE={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},INPUT_VALIDATION_RULES={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};e$2.createContext(null);var getProxyFormState=(nt,rt,it,st=!0)=>{const lt={defaultValues:rt._defaultValues};for(const ct in nt)Object.defineProperty(lt,ct,{get:()=>{const ut=ct;return rt._proxyFormState[ut]!==VALIDATION_MODE.all&&(rt._proxyFormState[ut]=!st||VALIDATION_MODE.all),it&&(it[ut]=!0),nt[ut]}});return lt},isEmptyObject=nt=>isObject$1(nt)&&!Object.keys(nt).length,shouldRenderFormState=(nt,rt,it,st)=>{it(nt);const{name:lt,...ct}=nt;return isEmptyObject(ct)||Object.keys(ct).length>=Object.keys(rt).length||Object.keys(ct).find(ut=>rt[ut]===(!st||VALIDATION_MODE.all))},convertToArrayPayload=nt=>Array.isArray(nt)?nt:[nt];function useSubscribe(nt){const rt=e$2.useRef(nt);rt.current=nt,e$2.useEffect(()=>{const it=!nt.disabled&&rt.current.subject&&rt.current.subject.subscribe({next:rt.current.next});return()=>{it&&it.unsubscribe()}},[nt.disabled])}var isString=nt=>typeof nt=="string",generateWatchOutput=(nt,rt,it,st,lt)=>isString(nt)?(st&&rt.watch.add(nt),get(it,nt,lt)):Array.isArray(nt)?nt.map(ct=>(st&&rt.watch.add(ct),get(it,ct))):(st&&(rt.watchAll=!0),it),isKey=nt=>/^\w*$/.test(nt),stringToPath=nt=>compact(nt.replace(/["|']|\]/g,"").split(/\.|\[/)),set$1=(nt,rt,it)=>{let st=-1;const lt=isKey(rt)?[rt]:stringToPath(rt),ct=lt.length,ut=ct-1;for(;++st<ct;){const dt=lt[st];let ht=it;if(st!==ut){const ft=nt[dt];ht=isObject$1(ft)||Array.isArray(ft)?ft:isNaN(+lt[st+1])?{}:[]}nt[dt]=ht,nt=nt[dt]}return nt},appendErrors=(nt,rt,it,st,lt)=>rt?{...it[nt],types:{...it[nt]&&it[nt].types?it[nt].types:{},[st]:lt||!0}}:{},getValidationModes=nt=>({isOnSubmit:!nt||nt===VALIDATION_MODE.onSubmit,isOnBlur:nt===VALIDATION_MODE.onBlur,isOnChange:nt===VALIDATION_MODE.onChange,isOnAll:nt===VALIDATION_MODE.all,isOnTouch:nt===VALIDATION_MODE.onTouched}),isWatched=(nt,rt,it)=>!it&&(rt.watchAll||rt.watch.has(nt)||[...rt.watch].some(st=>nt.startsWith(st)&&/^\.\w+/.test(nt.slice(st.length))));const iterateFieldsByAction=(nt,rt,it,st)=>{for(const lt of it||Object.keys(nt)){const ct=get(nt,lt);if(ct){const{_f:ut,...dt}=ct;if(ut){if(ut.refs&&ut.refs[0]&&rt(ut.refs[0],lt)&&!st)break;if(ut.ref&&rt(ut.ref,ut.name)&&!st)break;iterateFieldsByAction(dt,rt)}else isObject$1(dt)&&iterateFieldsByAction(dt,rt)}}};var updateFieldArrayRootError=(nt,rt,it)=>{const st=compact(get(nt,it));return set$1(st,"root",rt[it]),set$1(nt,it,st),nt},isFileInput=nt=>nt.type==="file",isFunction$1=nt=>typeof nt=="function",isHTMLElement$1=nt=>{if(!isWeb)return!1;const rt=nt?nt.ownerDocument:0;return nt instanceof(rt&&rt.defaultView?rt.defaultView.HTMLElement:HTMLElement)},isMessage=nt=>isString(nt),isRadioInput=nt=>nt.type==="radio",isRegex=nt=>nt instanceof RegExp;const defaultResult={value:!1,isValid:!1},validResult={value:!0,isValid:!0};var getCheckboxValue=nt=>{if(Array.isArray(nt)){if(nt.length>1){const rt=nt.filter(it=>it&&it.checked&&!it.disabled).map(it=>it.value);return{value:rt,isValid:!!rt.length}}return nt[0].checked&&!nt[0].disabled?nt[0].attributes&&!isUndefined(nt[0].attributes.value)?isUndefined(nt[0].value)||nt[0].value===""?validResult:{value:nt[0].value,isValid:!0}:validResult:defaultResult}return defaultResult};const defaultReturn={isValid:!1,value:null};var getRadioValue=nt=>Array.isArray(nt)?nt.reduce((rt,it)=>it&&it.checked&&!it.disabled?{isValid:!0,value:it.value}:rt,defaultReturn):defaultReturn;function getValidateError(nt,rt,it="validate"){if(isMessage(nt)||Array.isArray(nt)&&nt.every(isMessage)||isBoolean(nt)&&!nt)return{type:it,message:isMessage(nt)?nt:"",ref:rt}}var getValueAndMessage=nt=>isObject$1(nt)&&!isRegex(nt)?nt:{value:nt,message:""},validateField=async(nt,rt,it,st,lt)=>{const{ref:ct,refs:ut,required:dt,maxLength:ht,minLength:ft,min:pt,max:mt,pattern:gt,validate:xt,name:yt,valueAsNumber:vt,mount:St,disabled:wt}=nt._f,Et=get(rt,yt);if(!St||wt)return{};const Rt=ut?ut[0]:ct,Tt=Ot=>{st&&Rt.reportValidity&&(Rt.setCustomValidity(isBoolean(Ot)?"":Ot||""),Rt.reportValidity())},It={},At=isRadioInput(ct),Dt=isCheckBoxInput(ct),jt=At||Dt,Ft=(vt||isFileInput(ct))&&isUndefined(ct.value)&&isUndefined(Et)||isHTMLElement$1(ct)&&ct.value===""||Et===""||Array.isArray(Et)&&!Et.length,Lt=appendErrors.bind(null,yt,it,It),Mt=(Ot,Nt,$t,Vt=INPUT_VALIDATION_RULES.maxLength,Ut=INPUT_VALIDATION_RULES.minLength)=>{const zt=Ot?Nt:$t;It[yt]={type:Ot?Vt:Ut,message:zt,ref:ct,...Lt(Ot?Vt:Ut,zt)}};if(lt?!Array.isArray(Et)||!Et.length:dt&&(!jt&&(Ft||isNullOrUndefined(Et))||isBoolean(Et)&&!Et||Dt&&!getCheckboxValue(ut).isValid||At&&!getRadioValue(ut).isValid)){const{value:Ot,message:Nt}=isMessage(dt)?{value:!!dt,message:dt}:getValueAndMessage(dt);if(Ot&&(It[yt]={type:INPUT_VALIDATION_RULES.required,message:Nt,ref:Rt,...Lt(INPUT_VALIDATION_RULES.required,Nt)},!it))return Tt(Nt),It}if(!Ft&&(!isNullOrUndefined(pt)||!isNullOrUndefined(mt))){let Ot,Nt;const $t=getValueAndMessage(mt),Vt=getValueAndMessage(pt);if(!isNullOrUndefined(Et)&&!isNaN(Et)){const Ut=ct.valueAsNumber||Et&&+Et;isNullOrUndefined($t.value)||(Ot=Ut>$t.value),isNullOrUndefined(Vt.value)||(Nt=Ut<Vt.value)}else{const Ut=ct.valueAsDate||new Date(Et),zt=Gt=>new Date(new Date().toDateString()+" "+Gt),Bt=ct.type=="time",Ht=ct.type=="week";isString($t.value)&&Et&&(Ot=Bt?zt(Et)>zt($t.value):Ht?Et>$t.value:Ut>new Date($t.value)),isString(Vt.value)&&Et&&(Nt=Bt?zt(Et)<zt(Vt.value):Ht?Et<Vt.value:Ut<new Date(Vt.value))}if((Ot||Nt)&&(Mt(!!Ot,$t.message,Vt.message,INPUT_VALIDATION_RULES.max,INPUT_VALIDATION_RULES.min),!it))return Tt(It[yt].message),It}if((ht||ft)&&!Ft&&(isString(Et)||lt&&Array.isArray(Et))){const Ot=getValueAndMessage(ht),Nt=getValueAndMessage(ft),$t=!isNullOrUndefined(Ot.value)&&Et.length>+Ot.value,Vt=!isNullOrUndefined(Nt.value)&&Et.length<+Nt.value;if(($t||Vt)&&(Mt($t,Ot.message,Nt.message),!it))return Tt(It[yt].message),It}if(gt&&!Ft&&isString(Et)){const{value:Ot,message:Nt}=getValueAndMessage(gt);if(isRegex(Ot)&&!Et.match(Ot)&&(It[yt]={type:INPUT_VALIDATION_RULES.pattern,message:Nt,ref:ct,...Lt(INPUT_VALIDATION_RULES.pattern,Nt)},!it))return Tt(Nt),It}if(xt){if(isFunction$1(xt)){const Ot=await xt(Et,rt),Nt=getValidateError(Ot,Rt);if(Nt&&(It[yt]={...Nt,...Lt(INPUT_VALIDATION_RULES.validate,Nt.message)},!it))return Tt(Nt.message),It}else if(isObject$1(xt)){let Ot={};for(const Nt in xt){if(!isEmptyObject(Ot)&&!it)break;const $t=getValidateError(await xt[Nt](Et,rt),Rt,Nt);$t&&(Ot={...$t,...Lt(Nt,$t.message)},Tt($t.message),it&&(It[yt]=Ot))}if(!isEmptyObject(Ot)&&(It[yt]={ref:Rt,...Ot},!it))return It}}return Tt(!0),It};function baseGet(nt,rt){const it=rt.slice(0,-1).length;let st=0;for(;st<it;)nt=isUndefined(nt)?st++:nt[rt[st++]];return nt}function isEmptyArray(nt){for(const rt in nt)if(nt.hasOwnProperty(rt)&&!isUndefined(nt[rt]))return!1;return!0}function unset(nt,rt){const it=Array.isArray(rt)?rt:isKey(rt)?[rt]:stringToPath(rt),st=it.length===1?nt:baseGet(nt,it),lt=it.length-1,ct=it[lt];return st&&delete st[ct],lt!==0&&(isObject$1(st)&&isEmptyObject(st)||Array.isArray(st)&&isEmptyArray(st))&&unset(nt,it.slice(0,-1)),nt}var createSubject=()=>{let nt=[];return{get observers(){return nt},next:lt=>{for(const ct of nt)ct.next&&ct.next(lt)},subscribe:lt=>(nt.push(lt),{unsubscribe:()=>{nt=nt.filter(ct=>ct!==lt)}}),unsubscribe:()=>{nt=[]}}},isPrimitive=nt=>isNullOrUndefined(nt)||!isObjectType(nt);function deepEqual(nt,rt){if(isPrimitive(nt)||isPrimitive(rt))return nt===rt;if(isDateObject(nt)&&isDateObject(rt))return nt.getTime()===rt.getTime();const it=Object.keys(nt),st=Object.keys(rt);if(it.length!==st.length)return!1;for(const lt of it){const ct=nt[lt];if(!st.includes(lt))return!1;if(lt!=="ref"){const ut=rt[lt];if(isDateObject(ct)&&isDateObject(ut)||isObject$1(ct)&&isObject$1(ut)||Array.isArray(ct)&&Array.isArray(ut)?!deepEqual(ct,ut):ct!==ut)return!1}}return!0}var isMultipleSelect=nt=>nt.type==="select-multiple",isRadioOrCheckbox=nt=>isRadioInput(nt)||isCheckBoxInput(nt),live=nt=>isHTMLElement$1(nt)&&nt.isConnected,objectHasFunction=nt=>{for(const rt in nt)if(isFunction$1(nt[rt]))return!0;return!1};function markFieldsDirty(nt,rt={}){const it=Array.isArray(nt);if(isObject$1(nt)||it)for(const st in nt)Array.isArray(nt[st])||isObject$1(nt[st])&&!objectHasFunction(nt[st])?(rt[st]=Array.isArray(nt[st])?[]:{},markFieldsDirty(nt[st],rt[st])):isNullOrUndefined(nt[st])||(rt[st]=!0);return rt}function getDirtyFieldsFromDefaultValues(nt,rt,it){const st=Array.isArray(nt);if(isObject$1(nt)||st)for(const lt in nt)Array.isArray(nt[lt])||isObject$1(nt[lt])&&!objectHasFunction(nt[lt])?isUndefined(rt)||isPrimitive(it[lt])?it[lt]=Array.isArray(nt[lt])?markFieldsDirty(nt[lt],[]):{...markFieldsDirty(nt[lt])}:getDirtyFieldsFromDefaultValues(nt[lt],isNullOrUndefined(rt)?{}:rt[lt],it[lt]):it[lt]=!deepEqual(nt[lt],rt[lt]);return it}var getDirtyFields=(nt,rt)=>getDirtyFieldsFromDefaultValues(nt,rt,markFieldsDirty(rt)),getFieldValueAs=(nt,{valueAsNumber:rt,valueAsDate:it,setValueAs:st})=>isUndefined(nt)?nt:rt?nt===""?NaN:nt&&+nt:it&&isString(nt)?new Date(nt):st?st(nt):nt;function getFieldValue(nt){const rt=nt.ref;if(!(nt.refs?nt.refs.every(it=>it.disabled):rt.disabled))return isFileInput(rt)?rt.files:isRadioInput(rt)?getRadioValue(nt.refs).value:isMultipleSelect(rt)?[...rt.selectedOptions].map(({value:it})=>it):isCheckBoxInput(rt)?getCheckboxValue(nt.refs).value:getFieldValueAs(isUndefined(rt.value)?nt.ref.value:rt.value,nt)}var getResolverOptions=(nt,rt,it,st)=>{const lt={};for(const ct of nt){const ut=get(rt,ct);ut&&set$1(lt,ct,ut._f)}return{criteriaMode:it,names:[...nt],fields:lt,shouldUseNativeValidation:st}},getRuleValue=nt=>isUndefined(nt)?nt:isRegex(nt)?nt.source:isObject$1(nt)?isRegex(nt.value)?nt.value.source:nt.value:nt,hasValidation=nt=>nt.mount&&(nt.required||nt.min||nt.max||nt.maxLength||nt.minLength||nt.pattern||nt.validate);function schemaErrorLookup(nt,rt,it){const st=get(nt,it);if(st||isKey(it))return{error:st,name:it};const lt=it.split(".");for(;lt.length;){const ct=lt.join("."),ut=get(rt,ct),dt=get(nt,ct);if(ut&&!Array.isArray(ut)&&it!==ct)return{name:it};if(dt&&dt.type)return{name:ct,error:dt};lt.pop()}return{name:it}}var skipValidation=(nt,rt,it,st,lt)=>lt.isOnAll?!1:!it&&lt.isOnTouch?!(rt||nt):(it?st.isOnBlur:lt.isOnBlur)?!nt:(it?st.isOnChange:lt.isOnChange)?nt:!0,unsetEmptyArray=(nt,rt)=>!compact(get(nt,rt)).length&&unset(nt,rt);const defaultOptions$3={mode:VALIDATION_MODE.onSubmit,reValidateMode:VALIDATION_MODE.onChange,shouldFocusError:!0};function createFormControl(nt={},rt){let it={...defaultOptions$3,...nt},st={submitCount:0,isDirty:!1,isLoading:isFunction$1(it.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:it.errors||{},disabled:it.disabled||!1},lt={},ct=isObject$1(it.defaultValues)||isObject$1(it.values)?cloneObject(it.defaultValues||it.values)||{}:{},ut=it.shouldUnregister?{}:cloneObject(ct),dt={action:!1,mount:!1,watch:!1},ht={mount:new Set,unMount:new Set,array:new Set,watch:new Set},ft,pt=0;const mt={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},gt={values:createSubject(),array:createSubject(),state:createSubject()},xt=getValidationModes(it.mode),yt=getValidationModes(it.reValidateMode),vt=it.criteriaMode===VALIDATION_MODE.all,St=er=>tr=>{clearTimeout(pt),pt=setTimeout(er,tr)},wt=async er=>{if(mt.isValid||er){const tr=it.resolver?isEmptyObject((await Ft()).errors):await Mt(lt,!0);tr!==st.isValid&&gt.state.next({isValid:tr})}},Et=er=>mt.isValidating&&gt.state.next({isValidating:er}),Rt=(er,tr=[],vr,Fr,Kr=!0,qr=!0)=>{if(Fr&&vr){if(dt.action=!0,qr&&Array.isArray(get(lt,er))){const pn=vr(get(lt,er),Fr.argA,Fr.argB);Kr&&set$1(lt,er,pn)}if(qr&&Array.isArray(get(st.errors,er))){const pn=vr(get(st.errors,er),Fr.argA,Fr.argB);Kr&&set$1(st.errors,er,pn),unsetEmptyArray(st.errors,er)}if(mt.touchedFields&&qr&&Array.isArray(get(st.touchedFields,er))){const pn=vr(get(st.touchedFields,er),Fr.argA,Fr.argB);Kr&&set$1(st.touchedFields,er,pn)}mt.dirtyFields&&(st.dirtyFields=getDirtyFields(ct,ut)),gt.state.next({name:er,isDirty:Nt(er,tr),dirtyFields:st.dirtyFields,errors:st.errors,isValid:st.isValid})}else set$1(ut,er,tr)},Tt=(er,tr)=>{set$1(st.errors,er,tr),gt.state.next({errors:st.errors})},It=er=>{st.errors=er,gt.state.next({errors:st.errors,isValid:!1})},At=(er,tr,vr,Fr)=>{const Kr=get(lt,er);if(Kr){const qr=get(ut,er,isUndefined(vr)?get(ct,er):vr);isUndefined(qr)||Fr&&Fr.defaultChecked||tr?set$1(ut,er,tr?qr:getFieldValue(Kr._f)):Ut(er,qr),dt.mount&&wt()}},Dt=(er,tr,vr,Fr,Kr)=>{let qr=!1,pn=!1;const En={name:er},Rn=!!(get(lt,er)&&get(lt,er)._f.disabled);if(!vr||Fr){mt.isDirty&&(pn=st.isDirty,st.isDirty=En.isDirty=Nt(),qr=pn!==En.isDirty);const Qn=Rn||deepEqual(get(ct,er),tr);pn=!!(!Rn&&get(st.dirtyFields,er)),Qn||Rn?unset(st.dirtyFields,er):set$1(st.dirtyFields,er,!0),En.dirtyFields=st.dirtyFields,qr=qr||mt.dirtyFields&&pn!==!Qn}if(vr){const Qn=get(st.touchedFields,er);Qn||(set$1(st.touchedFields,er,vr),En.touchedFields=st.touchedFields,qr=qr||mt.touchedFields&&Qn!==vr)}return qr&&Kr&&gt.state.next(En),qr?En:{}},jt=(er,tr,vr,Fr)=>{const Kr=get(st.errors,er),qr=mt.isValid&&isBoolean(tr)&&st.isValid!==tr;if(nt.delayError&&vr?(ft=St(()=>Tt(er,vr)),ft(nt.delayError)):(clearTimeout(pt),ft=null,vr?set$1(st.errors,er,vr):unset(st.errors,er)),(vr?!deepEqual(Kr,vr):Kr)||!isEmptyObject(Fr)||qr){const pn={...Fr,...qr&&isBoolean(tr)?{isValid:tr}:{},errors:st.errors,name:er};st={...st,...pn},gt.state.next(pn)}Et(!1)},Ft=async er=>it.resolver(ut,it.context,getResolverOptions(er||ht.mount,lt,it.criteriaMode,it.shouldUseNativeValidation)),Lt=async er=>{const{errors:tr}=await Ft(er);if(er)for(const vr of er){const Fr=get(tr,vr);Fr?set$1(st.errors,vr,Fr):unset(st.errors,vr)}else st.errors=tr;return tr},Mt=async(er,tr,vr={valid:!0})=>{for(const Fr in er){const Kr=er[Fr];if(Kr){const{_f:qr,...pn}=Kr;if(qr){const En=ht.array.has(qr.name),Rn=await validateField(Kr,ut,vt,it.shouldUseNativeValidation&&!tr,En);if(Rn[qr.name]&&(vr.valid=!1,tr))break;!tr&&(get(Rn,qr.name)?En?updateFieldArrayRootError(st.errors,Rn,qr.name):set$1(st.errors,qr.name,Rn[qr.name]):unset(st.errors,qr.name))}pn&&await Mt(pn,tr,vr)}}return vr.valid},Ot=()=>{for(const er of ht.unMount){const tr=get(lt,er);tr&&(tr._f.refs?tr._f.refs.every(vr=>!live(vr)):!live(tr._f.ref))&&Cr(er)}ht.unMount=new Set},Nt=(er,tr)=>(er&&tr&&set$1(ut,er,tr),!deepEqual(Zt(),ct)),$t=(er,tr,vr)=>generateWatchOutput(er,ht,{...dt.mount?ut:isUndefined(tr)?ct:isString(er)?{[er]:tr}:tr},vr,tr),Vt=er=>compact(get(dt.mount?ut:ct,er,nt.shouldUnregister?get(ct,er,[]):[])),Ut=(er,tr,vr={})=>{const Fr=get(lt,er);let Kr=tr;if(Fr){const qr=Fr._f;qr&&(!qr.disabled&&set$1(ut,er,getFieldValueAs(tr,qr)),Kr=isHTMLElement$1(qr.ref)&&isNullOrUndefined(tr)?"":tr,isMultipleSelect(qr.ref)?[...qr.ref.options].forEach(pn=>pn.selected=Kr.includes(pn.value)):qr.refs?isCheckBoxInput(qr.ref)?qr.refs.length>1?qr.refs.forEach(pn=>(!pn.defaultChecked||!pn.disabled)&&(pn.checked=Array.isArray(Kr)?!!Kr.find(En=>En===pn.value):Kr===pn.value)):qr.refs[0]&&(qr.refs[0].checked=!!Kr):qr.refs.forEach(pn=>pn.checked=pn.value===Kr):isFileInput(qr.ref)?qr.ref.value="":(qr.ref.value=Kr,qr.ref.type||gt.values.next({name:er,values:{...ut}})))}(vr.shouldDirty||vr.shouldTouch)&&Dt(er,Kr,vr.shouldTouch,vr.shouldDirty,!0),vr.shouldValidate&&Xt(er)},zt=(er,tr,vr)=>{for(const Fr in tr){const Kr=tr[Fr],qr=`${er}.${Fr}`,pn=get(lt,qr);(ht.array.has(er)||!isPrimitive(Kr)||pn&&!pn._f)&&!isDateObject(Kr)?zt(qr,Kr,vr):Ut(qr,Kr,vr)}},Bt=(er,tr,vr={})=>{const Fr=get(lt,er),Kr=ht.array.has(er),qr=cloneObject(tr);set$1(ut,er,qr),Kr?(gt.array.next({name:er,values:{...ut}}),(mt.isDirty||mt.dirtyFields)&&vr.shouldDirty&&gt.state.next({name:er,dirtyFields:getDirtyFields(ct,ut),isDirty:Nt(er,qr)})):Fr&&!Fr._f&&!isNullOrUndefined(qr)?zt(er,qr,vr):Ut(er,qr,vr),isWatched(er,ht)&&gt.state.next({...st}),gt.values.next({name:er,values:{...ut}}),!dt.mount&&rt()},Ht=async er=>{const tr=er.target;let vr=tr.name,Fr=!0;const Kr=get(lt,vr),qr=()=>tr.type?getFieldValue(Kr._f):getEventValue(er),pn=En=>{Fr=Number.isNaN(En)||En===get(ut,vr,En)};if(Kr){let En,Rn;const Qn=qr(),Ln=er.type===EVENTS.BLUR||er.type===EVENTS.FOCUS_OUT,ln=!hasValidation(Kr._f)&&!it.resolver&&!get(st.errors,vr)&&!Kr._f.deps||skipValidation(Ln,get(st.touchedFields,vr),st.isSubmitted,yt,xt),Xn=isWatched(vr,ht,Ln);set$1(ut,vr,Qn),Ln?(Kr._f.onBlur&&Kr._f.onBlur(er),ft&&ft(0)):Kr._f.onChange&&Kr._f.onChange(er);const Yr=Dt(vr,Qn,Ln,!1),Qr=!isEmptyObject(Yr)||Xn;if(!Ln&&gt.values.next({name:vr,type:er.type,values:{...ut}}),ln)return mt.isValid&&wt(),Qr&&gt.state.next({name:vr,...Xn?{}:Yr});if(!Ln&&Xn&&gt.state.next({...st}),Et(!0),it.resolver){const{errors:Mn}=await Ft([vr]);if(pn(Qn),Fr){const Ar=schemaErrorLookup(st.errors,lt,vr),or=schemaErrorLookup(Mn,lt,Ar.name||vr);En=or.error,vr=or.name,Rn=isEmptyObject(Mn)}}else En=(await validateField(Kr,ut,vt,it.shouldUseNativeValidation))[vr],pn(Qn),Fr&&(En?Rn=!1:mt.isValid&&(Rn=await Mt(lt,!0)));Fr&&(Kr._f.deps&&Xt(Kr._f.deps),jt(vr,Rn,En,Yr))}},Gt=(er,tr)=>{if(get(st.errors,tr)&&er.focus)return er.focus(),1},Xt=async(er,tr={})=>{let vr,Fr;const Kr=convertToArrayPayload(er);if(Et(!0),it.resolver){const qr=await Lt(isUndefined(er)?er:Kr);vr=isEmptyObject(qr),Fr=er?!Kr.some(pn=>get(qr,pn)):vr}else er?(Fr=(await Promise.all(Kr.map(async qr=>{const pn=get(lt,qr);return await Mt(pn&&pn._f?{[qr]:pn}:pn)}))).every(Boolean),!(!Fr&&!st.isValid)&&wt()):Fr=vr=await Mt(lt);return gt.state.next({...!isString(er)||mt.isValid&&vr!==st.isValid?{}:{name:er},...it.resolver||!er?{isValid:vr}:{},errors:st.errors,isValidating:!1}),tr.shouldFocus&&!Fr&&iterateFieldsByAction(lt,Gt,er?Kr:ht.mount),Fr},Zt=er=>{const tr={...ct,...dt.mount?ut:{}};return isUndefined(er)?tr:isString(er)?get(tr,er):er.map(vr=>get(tr,vr))},hr=(er,tr)=>({invalid:!!get((tr||st).errors,er),isDirty:!!get((tr||st).dirtyFields,er),isTouched:!!get((tr||st).touchedFields,er),error:get((tr||st).errors,er)}),nr=er=>{er&&convertToArrayPayload(er).forEach(tr=>unset(st.errors,tr)),gt.state.next({errors:er?st.errors:{}})},ir=(er,tr,vr)=>{const Fr=(get(lt,er,{_f:{}})._f||{}).ref;set$1(st.errors,er,{...tr,ref:Fr}),gt.state.next({name:er,errors:st.errors,isValid:!1}),vr&&vr.shouldFocus&&Fr&&Fr.focus&&Fr.focus()},yr=(er,tr)=>isFunction$1(er)?gt.values.subscribe({next:vr=>er($t(void 0,tr),vr)}):$t(er,tr,!0),Cr=(er,tr={})=>{for(const vr of er?convertToArrayPayload(er):ht.mount)ht.mount.delete(vr),ht.array.delete(vr),tr.keepValue||(unset(lt,vr),unset(ut,vr)),!tr.keepError&&unset(st.errors,vr),!tr.keepDirty&&unset(st.dirtyFields,vr),!tr.keepTouched&&unset(st.touchedFields,vr),!it.shouldUnregister&&!tr.keepDefaultValue&&unset(ct,vr);gt.values.next({values:{...ut}}),gt.state.next({...st,...tr.keepDirty?{isDirty:Nt()}:{}}),!tr.keepIsValid&&wt()},Sr=({disabled:er,name:tr,field:vr,fields:Fr,value:Kr})=>{if(isBoolean(er)){const qr=er?void 0:isUndefined(Kr)?getFieldValue(vr?vr._f:get(Fr,tr)._f):Kr;set$1(ut,tr,qr),Dt(tr,qr,!1,!1,!0)}},xr=(er,tr={})=>{let vr=get(lt,er);const Fr=isBoolean(tr.disabled);return set$1(lt,er,{...vr||{},_f:{...vr&&vr._f?vr._f:{ref:{name:er}},name:er,mount:!0,...tr}}),ht.mount.add(er),vr?Sr({field:vr,disabled:tr.disabled,name:er,value:tr.value}):At(er,!0,tr.value),{...Fr?{disabled:tr.disabled}:{},...it.progressive?{required:!!tr.required,min:getRuleValue(tr.min),max:getRuleValue(tr.max),minLength:getRuleValue(tr.minLength),maxLength:getRuleValue(tr.maxLength),pattern:getRuleValue(tr.pattern)}:{},name:er,onChange:Ht,onBlur:Ht,ref:Kr=>{if(Kr){xr(er,tr),vr=get(lt,er);const qr=isUndefined(Kr.value)&&Kr.querySelectorAll&&Kr.querySelectorAll("input,select,textarea")[0]||Kr,pn=isRadioOrCheckbox(qr),En=vr._f.refs||[];if(pn?En.find(Rn=>Rn===qr):qr===vr._f.ref)return;set$1(lt,er,{_f:{...vr._f,...pn?{refs:[...En.filter(live),qr,...Array.isArray(get(ct,er))?[{}]:[]],ref:{type:qr.type,name:er}}:{ref:qr}}}),At(er,!1,void 0,qr)}else vr=get(lt,er,{}),vr._f&&(vr._f.mount=!1),(it.shouldUnregister||tr.shouldUnregister)&&!(isNameInFieldArray(ht.array,er)&&dt.action)&&ht.unMount.add(er)}}},gr=()=>it.shouldFocusError&&iterateFieldsByAction(lt,Gt,ht.mount),_r=er=>{isBoolean(er)&&(gt.state.next({disabled:er}),iterateFieldsByAction(lt,(tr,vr)=>{let Fr=er;const Kr=get(lt,vr);Kr&&isBoolean(Kr._f.disabled)&&(Fr||(Fr=Kr._f.disabled)),tr.disabled=Fr},0,!1))},fr=(er,tr)=>async vr=>{vr&&(vr.preventDefault&&vr.preventDefault(),vr.persist&&vr.persist());let Fr=cloneObject(ut);if(gt.state.next({isSubmitting:!0}),it.resolver){const{errors:Kr,values:qr}=await Ft();st.errors=Kr,Fr=qr}else await Mt(lt);unset(st.errors,"root"),isEmptyObject(st.errors)?(gt.state.next({errors:{}}),await er(Fr,vr)):(tr&&await tr({...st.errors},vr),gr(),setTimeout(gr)),gt.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(st.errors),submitCount:st.submitCount+1,errors:st.errors})},Nr=(er,tr={})=>{get(lt,er)&&(isUndefined(tr.defaultValue)?Bt(er,cloneObject(get(ct,er))):(Bt(er,tr.defaultValue),set$1(ct,er,cloneObject(tr.defaultValue))),tr.keepTouched||unset(st.touchedFields,er),tr.keepDirty||(unset(st.dirtyFields,er),st.isDirty=tr.defaultValue?Nt(er,cloneObject(get(ct,er))):Nt()),tr.keepError||(unset(st.errors,er),mt.isValid&&wt()),gt.state.next({...st}))},Tr=(er,tr={})=>{const vr=er?cloneObject(er):ct,Fr=cloneObject(vr),Kr=er&&!isEmptyObject(er)?Fr:ct;if(tr.keepDefaultValues||(ct=vr),!tr.keepValues){if(tr.keepDirtyValues)for(const qr of ht.mount)get(st.dirtyFields,qr)?set$1(Kr,qr,get(ut,qr)):Bt(qr,get(Kr,qr));else{if(isWeb&&isUndefined(er))for(const qr of ht.mount){const pn=get(lt,qr);if(pn&&pn._f){const En=Array.isArray(pn._f.refs)?pn._f.refs[0]:pn._f.ref;if(isHTMLElement$1(En)){const Rn=En.closest("form");if(Rn){Rn.reset();break}}}}lt={}}ut=nt.shouldUnregister?tr.keepDefaultValues?cloneObject(ct):{}:cloneObject(Kr),gt.array.next({values:{...Kr}}),gt.values.next({values:{...Kr}})}ht={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!dt.mount&&rt(),dt.mount=!mt.isValid||!!tr.keepIsValid,dt.watch=!!nt.shouldUnregister,gt.state.next({submitCount:tr.keepSubmitCount?st.submitCount:0,isDirty:tr.keepDirty?st.isDirty:!!(tr.keepDefaultValues&&!deepEqual(er,ct)),isSubmitted:tr.keepIsSubmitted?st.isSubmitted:!1,dirtyFields:tr.keepDirtyValues?st.dirtyFields:tr.keepDefaultValues&&er?getDirtyFields(ct,er):{},touchedFields:tr.keepTouched?st.touchedFields:{},errors:tr.keepErrors?st.errors:{},isSubmitSuccessful:tr.keepIsSubmitSuccessful?st.isSubmitSuccessful:!1,isSubmitting:!1})},Hr=(er,tr)=>Tr(isFunction$1(er)?er(ut):er,tr);return{control:{register:xr,unregister:Cr,getFieldState:hr,handleSubmit:fr,setError:ir,_executeSchema:Ft,_getWatch:$t,_getDirty:Nt,_updateValid:wt,_removeUnmounted:Ot,_updateFieldArray:Rt,_updateDisabledField:Sr,_getFieldArray:Vt,_reset:Tr,_resetDefaultValues:()=>isFunction$1(it.defaultValues)&&it.defaultValues().then(er=>{Hr(er,it.resetOptions),gt.state.next({isLoading:!1})}),_updateFormState:er=>{st={...st,...er}},_disableForm:_r,_subjects:gt,_proxyFormState:mt,_setErrors:It,get _fields(){return lt},get _formValues(){return ut},get _state(){return dt},set _state(er){dt=er},get _defaultValues(){return ct},get _names(){return ht},set _names(er){ht=er},get _formState(){return st},set _formState(er){st=er},get _options(){return it},set _options(er){it={...it,...er}}},trigger:Xt,register:xr,handleSubmit:fr,watch:yr,setValue:Bt,getValues:Zt,reset:Hr,resetField:Nr,clearErrors:nr,unregister:Cr,setError:ir,setFocus:(er,tr={})=>{const vr=get(lt,er),Fr=vr&&vr._f;if(Fr){const Kr=Fr.refs?Fr.refs[0]:Fr.ref;Kr.focus&&(Kr.focus(),tr.shouldSelect&&Kr.select())}},getFieldState:hr}}function useForm(nt={}){const rt=e$2.useRef(),it=e$2.useRef(),[st,lt]=e$2.useState({isDirty:!1,isValidating:!1,isLoading:isFunction$1(nt.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:nt.errors||{},disabled:nt.disabled||!1,defaultValues:isFunction$1(nt.defaultValues)?void 0:nt.defaultValues});rt.current||(rt.current={...createFormControl(nt,()=>lt(ut=>({...ut}))),formState:st});const ct=rt.current.control;return ct._options=nt,useSubscribe({subject:ct._subjects.state,next:ut=>{shouldRenderFormState(ut,ct._proxyFormState,ct._updateFormState,!0)&&lt({...ct._formState})}}),e$2.useEffect(()=>ct._disableForm(nt.disabled),[ct,nt.disabled]),e$2.useEffect(()=>{if(ct._proxyFormState.isDirty){const ut=ct._getDirty();ut!==st.isDirty&&ct._subjects.state.next({isDirty:ut})}},[ct,st.isDirty]),e$2.useEffect(()=>{nt.values&&!deepEqual(nt.values,it.current)?(ct._reset(nt.values,ct._options.resetOptions),it.current=nt.values,lt(ut=>({...ut}))):ct._resetDefaultValues()},[nt.values,ct]),e$2.useEffect(()=>{nt.errors&&ct._setErrors(nt.errors)},[nt.errors,ct]),e$2.useEffect(()=>{ct._state.mount||(ct._updateValid(),ct._state.mount=!0),ct._state.watch&&(ct._state.watch=!1,ct._subjects.state.next({...ct._formState})),ct._removeUnmounted()}),rt.current.formState=getProxyFormState(st,ct),rt.current}const ChangeNicknameModal=({onClose:nt,data:rt})=>{const[it,st]=Recoil_index_22(modalState),lt=Recoil_index_20(baseUrlState),[ct,ut]=Recoil_index_22(userState),{register:dt,handleSubmit:ht,watch:ft}=useForm({mode:"onSubmit"}),pt=ft("nickname"),mt=()=>{axios({method:"get",url:`${lt}api/users/${ct.info.userId}/nickname?nickname=${pt}`,headers:{Authorization:`Bearer ${ct.token}`}}).then(xt=>{xt.data.data_header.success_code===0?alert("변경 가능합니다."):alert("닉네임이 중복됩니다")})},gt=xt=>{axios({method:"patch",url:`${lt}api/users/${ct.info.userId}/nickname`,headers:{Authorization:`Bearer ${ct.token}`},data:{nickname:xt.nickname}}).then(()=>{ut({token:ct.token,info:{...ct.info,nickname:xt.nickname}}),st({type:null,data:null})})};return jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-y-1/2 top-1/2 inset-x-12",isOpen:it.type==="changeNickname",ariaHideApp:!1,onRequestClose:()=>st({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"p-4 bg-white border-2 border-gray-400 rounded-xl",children:[jsxRuntimeExports.jsx("h1",{className:"mb-4 font-semibold text-center",children:"닉네임 변경"}),jsxRuntimeExports.jsxs("form",{onSubmit:ht(gt),className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 m-2",children:[jsxRuntimeExports.jsx("input",{placeholder:"닉네임을 변경해주세요",...dt("nickname"),type:"text",defaultValue:rt,className:"p-2 text-sm text-center border border-gray-400 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"button",onClick:mt,value:"중복검사",className:"w-1/3 p-1 bg-gray-400 rounded-md"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 m-2",children:[jsxRuntimeExports.jsx("input",{type:"button",onClick:nt,value:"취소",className:"p-1 border border-teal-700 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"submit",value:"확인",className:"p-1 text-white bg-teal-700 rounded-md"})]})]})]})})};ChangeNicknameModal.propTypes={onClose:propTypesExports.PropTypes.func,data:propTypesExports.PropTypes.string};const ChangeGenderModal=({onClose:nt,data:rt})=>{const[it,st]=Recoil_index_22(modalState);Recoil_index_22(baseUrlState);const{register:lt,handleSubmit:ct}=useForm({mode:"onSubmit"});return jsxRuntimeExports.jsx(Modal,{className:"fixed transform  -translate-y-1/2 top-1/2 inset-x-12",isOpen:it.type==="changeGender",ariaHideApp:!1,onRequestClose:()=>st({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"p-4 bg-white border-2 border-gray-400 rounded-xl",children:[jsxRuntimeExports.jsx("h1",{className:"mb-4 font-semibold text-center",children:"성별을 알려주세요"}),jsxRuntimeExports.jsxs("form",{onSubmit:ct,children:[jsxRuntimeExports.jsx("div",{className:"mb-4 text-center",children:jsxRuntimeExports.jsxs("select",{...lt("gender"),className:"p-2 text-center border border-gray-400 rounded-md",children:[jsxRuntimeExports.jsx("option",{value:"now",children:rt}),jsxRuntimeExports.jsx("option",{value:"another",children:rt==="남자"?"여자":"남자"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 m-2",children:[jsxRuntimeExports.jsx("input",{type:"button",onClick:nt,value:"취소",className:"p-1 border border-teal-700 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"submit",value:"확인",className:"p-1 text-white bg-teal-700 rounded-md"})]})]})]})})};ChangeGenderModal.propTypes={onClose:propTypesExports.PropTypes.func,data:propTypesExports.PropTypes.string};const today=new Date,selectedDateState=Recoil_index_8({key:"selectedDateState",default:[today.getFullYear(),today.getMonth()+1,today.getDate()]}),selectedDayState=Recoil_index_8({key:"selectedDayState",default:""}),SelfInputFoodModal=({onClose:nt})=>{const[rt,it]=Recoil_index_22(modalState),st=Recoil_index_20(baseUrlState),lt=Recoil_index_20(selectedDateState),[ct,ut]=reactExports.useState(""),[dt,ht]=reactExports.useState(""),[ft,pt]=reactExports.useState(""),[mt,gt]=reactExports.useState(""),[xt,yt]=reactExports.useState(""),[vt,St]=reactExports.useState(""),wt=new Date(lt[0],lt[1]-1,lt[2]),Et=9*60*60*1e3,Rt=new Date(wt.getTime()+Et),Tt=async()=>{console.log(ct),console.log(rt.data),console.log(dt),console.log(ft),console.log(mt),console.log(xt),console.log(vt),await axios.post(`${st}api/management/food/add`,{name:ct,category:rt.data,servingSize:dt,calorie:ft,carbohydrate:mt,protein:xt,lipid:vt,date:Rt}).then(Mt=>{console.log("음식 직접 추가하기 성공")}).catch(Mt=>{console.log(Mt)}),it({type:null,data:null})},It=()=>{const Mt=Ot=>{ut(Ot.target.value)};return jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-1 text-base text-white bg-teal-700 border rounded-md basis-1/3",children:"식품 명"}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full px-2 border-2 border-teal-700 rounded-md",onChange:Mt})]})},At=()=>{const Mt=Ot=>{ht(Ot.target.value)};return jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-1 text-base text-white bg-teal-700 border rounded-md basis-1/3",children:"식품 양"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"g 단위로 입력해주세요.",className:"w-full px-2 border-2 border-teal-700 rounded-md",onChange:Mt})]})},Dt=()=>{const Mt=Ot=>{pt(Ot.target.value)};return jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-1 text-base text-white bg-teal-700 border rounded-md basis-1/3",children:"칼로리"}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full px-2 border-2 border-teal-700 rounded-md",onChange:Mt})]})},jt=()=>{const Mt=Ot=>{gt(Ot.target.value)};return jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-1 text-base text-white bg-teal-700 border rounded-md basis-1/3",children:"탄수화물"}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full px-2 border-2 border-teal-700 rounded-md",onChange:Mt})]})},Ft=()=>{const Mt=Ot=>{yt(Ot.target.value)};return jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-1 text-base text-white bg-teal-700 border rounded-md basis-1/3",children:"단백질"}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full px-2 border-2 border-teal-700 rounded-md",onChange:Mt})]})},Lt=()=>{const Mt=Ot=>{St(Ot.target.value)};return jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-1 text-base text-white bg-teal-700 border rounded-md basis-1/3",children:"지방"}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full px-2 border-2 border-teal-700 rounded-md",onChange:Mt})]})};return jsxRuntimeExports.jsx(Modal,{className:"fixed bottom-0 bg-white rounded-2xl border-t border-t-black overflow-auto inset-x-0",isOpen:rt.type==="selfInputFood",ariaHideApp:!1,onRequestClose:()=>it({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 m-4",children:[jsxRuntimeExports.jsx("p",{className:"pb-2 font-semibold",children:"음식 직접입력"}),It(),At(),Dt(),jt(),Ft(),Lt(),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mt-2",children:[jsxRuntimeExports.jsx("button",{onClick:nt,className:"py-1 bg-white border border-teal-700 rounded-md basis-1/2",children:"취소"}),jsxRuntimeExports.jsx("button",{onClick:()=>Tt(),className:"py-1 text-white bg-teal-700 border rounded-md basis-1/2",children:"추가하기"})]})]})})};SelfInputFoodModal.propTypes={onClose:propTypesExports.PropTypes.func};const SignUpModal=({onClose:nt})=>{const[rt,it]=Recoil_index_22(modalState),st=Recoil_index_20(baseUrlState),{register:lt,handleSubmit:ct,watch:ut,getValues:dt,setError:ht,clearErrors:ft,formState:{errors:pt}}=useForm({mode:"onChange"}),mt=xt=>{axios({method:"post",url:`${st}api/auth/signup`,data:{email:xt.email,password:xt.password,name:xt.name,gender:xt.gender,birth_date:xt.birth_date}}).then(()=>{alert("회원가입이 완료되었습니다."),it({type:null,data:null})})},gt=()=>{const xt=ut("email");axios({method:"get",url:`${st}api/auth?email=${xt}`}).then(yt=>{yt.data.data_header.success_code?alert("이미 가입한 이메일입니다."):alert("가입 가능한 이메일입니다.")})};return reactExports.useEffect(()=>{ut("password")!==ut("passwordCheck")&&ut("passwordCheck")?ht("passwordCheck",{type:"password-mismatch",message:"비밀번호가 일치하지 않습니다"}):ft("passwordCheck")},[ut("password"),ut("passwordCheck")]),jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-y-1/2 top-1/2 overflow-auto inset-x-12",isOpen:rt.type==="signup",ariaHideApp:!1,onRequestClose:()=>it({type:null,data:null}),children:jsxRuntimeExports.jsxs("form",{onSubmit:ct(mt),className:"flex flex-col gap-2 p-4 bg-white border border-teal-700 rounded-md",children:[jsxRuntimeExports.jsx("h1",{className:"pb-2 text-lg text-center text-teal-700 underline underline-offset-4",children:"회원가입"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",children:"이메일"}),jsxRuntimeExports.jsx("input",{id:"email",type:"email",...lt("email",{required:!0}),className:"px-2 border rounded-md"}),jsxRuntimeExports.jsx("input",{type:"button",onClick:gt,value:"중복확인",className:"w-1/2 mx-auto text-white bg-teal-700 border rounded-md"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"name",children:"이름"}),jsxRuntimeExports.jsx("input",{type:"text",id:"name",...lt("name"),className:"px-2 border rounded-md"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",children:"비밀번호"}),jsxRuntimeExports.jsx("input",{id:"password",type:"password",autoComplete:"on",...lt("password",{required:!0,pattern:{value:/^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,20}$/,message:"영문, 숫자, 특수문자 포함 8 ~ 20자로 입력해주세요"}}),className:"px-2 border rounded-md"}),pt.password&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500",children:pt.password.message})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"passwordCheck",children:"비밀번호 확인"}),jsxRuntimeExports.jsx("input",{id:"passwordCheck",type:"password",autoComplete:"on",...lt("passwordCheck",{required:!0,validate:{matchPassword:xt=>{const{password:yt}=dt();return console.log(yt,xt),yt===xt||"비밀번호가 일치하지 않습니다"}}}),className:"px-2 border rounded-md"}),pt.passwordCheck&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500",children:pt.passwordCheck.message})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("p",{children:"성별"}),jsxRuntimeExports.jsxs("select",{name:"gender",...lt("gender"),className:"text-center border rounded-md",children:[jsxRuntimeExports.jsx("option",{value:"MALE",className:"text-xs",children:"남자"}),jsxRuntimeExports.jsx("option",{value:"FEMALE",className:"text-xs",children:"여자"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("p",{children:"생년월일"}),jsxRuntimeExports.jsx("input",{type:"date",...lt("birth_date",{required:!0}),className:"text-center border rounded-md"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mt-4 mb-2",children:[jsxRuntimeExports.jsx("input",{type:"button",onClick:nt,value:"취소",className:"border border-teal-700 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"submit",className:"text-white bg-teal-700 rounded-md"})]})]})})};SignUpModal.propTypes={onClose:propTypesExports.PropTypes.func};const Input=({type:nt,value:rt,placeholder:it,onChange:st})=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("input",{type:nt,value:rt,placeholder:it,onChange:st,className:"p-2 border border-gray-500 rounded-md"})});Input.propTypes={type:PropTypes.string,value:PropTypes.string,placeholder:PropTypes.string,onChange:PropTypes.func};Input.defaultProps={placeholder:"입력해 주세요."};const RoutineCreateModal=({onClose:nt})=>{const rt=Recoil_index_20(baseUrlState),it=Recoil_index_20(userState),[st,lt]=Recoil_index_22(modalState),[ct,ut]=reactExports.useState(""),dt=pt=>{ut(pt.target.value)},ht=async()=>{await axios.post(`${rt}api/management/routine/addroutine`,{userId:it.info.userId,title:ct}).then(pt=>{console.log("루틴 생성 성공")}).catch(pt=>{console.log(pt)})},ft=()=>{ht()};return jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-y-1/2 top-1/2 inset-x-8",isOpen:st.type==="routineCreate",ariaHideApp:!1,onRequestClose:()=>lt({type:null,data:null}),children:jsxRuntimeExports.jsxs("form",{className:"flex flex-col gap-4 p-4 bg-white border-2 border-gray-400 rounded-xl",onSubmit:ft,children:[jsxRuntimeExports.jsx("p",{className:"mx-auto font-semibold",children:"새로운 루틴 만들기"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("p",{children:"나만의 루틴을 만들어보세요!"}),jsxRuntimeExports.jsx(Input,{value:ct,onChange:dt,placeholder:"루틴 이름을 입력하세요"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"button",onClick:nt,value:"취소",className:"bg-white border border-teal-700 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"submit",value:"루틴 생성",className:"p-2 text-white bg-teal-700 rounded-md"})]})]})})};RoutineCreateModal.propTypes={onClose:propTypesExports.PropTypes.func};var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=e$2.createContext&&e$2.createContext(DefaultContext),_excluded$2=["attr","size","title"];function _objectWithoutProperties$1(nt,rt){if(nt==null)return{};var it=_objectWithoutPropertiesLoose$1(nt,rt),st,lt;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(nt);for(lt=0;lt<ct.length;lt++)st=ct[lt],!(rt.indexOf(st)>=0)&&Object.prototype.propertyIsEnumerable.call(nt,st)&&(it[st]=nt[st])}return it}function _objectWithoutPropertiesLoose$1(nt,rt){if(nt==null)return{};var it={},st=Object.keys(nt),lt,ct;for(ct=0;ct<st.length;ct++)lt=st[ct],!(rt.indexOf(lt)>=0)&&(it[lt]=nt[lt]);return it}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt];for(var st in it)Object.prototype.hasOwnProperty.call(it,st)&&(nt[st]=it[st])}return nt},_extends$1.apply(this,arguments)}function ownKeys$1(nt,rt){var it=Object.keys(nt);if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(nt);rt&&(st=st.filter(function(lt){return Object.getOwnPropertyDescriptor(nt,lt).enumerable})),it.push.apply(it,st)}return it}function _objectSpread(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt]!=null?arguments[rt]:{};rt%2?ownKeys$1(Object(it),!0).forEach(function(st){_defineProperty$1(nt,st,it[st])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(it)):ownKeys$1(Object(it)).forEach(function(st){Object.defineProperty(nt,st,Object.getOwnPropertyDescriptor(it,st))})}return nt}function _defineProperty$1(nt,rt,it){return rt=_toPropertyKey$1(rt),rt in nt?Object.defineProperty(nt,rt,{value:it,enumerable:!0,configurable:!0,writable:!0}):nt[rt]=it,nt}function _toPropertyKey$1(nt){var rt=_toPrimitive$1(nt,"string");return typeof rt=="symbol"?rt:String(rt)}function _toPrimitive$1(nt,rt){if(typeof nt!="object"||nt===null)return nt;var it=nt[Symbol.toPrimitive];if(it!==void 0){var st=it.call(nt,rt||"default");if(typeof st!="object")return st;throw new TypeError("@@toPrimitive must return a primitive value.")}return(rt==="string"?String:Number)(nt)}function Tree2Element(nt){return nt&&nt.map((rt,it)=>e$2.createElement(rt.tag,_objectSpread({key:it},rt.attr),Tree2Element(rt.child)))}function GenIcon(nt){return rt=>e$2.createElement(IconBase,_extends$1({attr:_objectSpread({},nt.attr)},rt),Tree2Element(nt.child))}function IconBase(nt){var rt=it=>{var{attr:st,size:lt,title:ct}=nt,ut=_objectWithoutProperties$1(nt,_excluded$2),dt=lt||it.size||"1em",ht;return it.className&&(ht=it.className),nt.className&&(ht=(ht?ht+" ":"")+nt.className),e$2.createElement("svg",_extends$1({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},it.attr,st,ut,{className:ht,style:_objectSpread(_objectSpread({color:nt.color||it.color},it.style),nt.style),height:dt,width:dt,xmlns:"http://www.w3.org/2000/svg"}),ct&&e$2.createElement("title",null,ct),nt.children)};return IconContext!==void 0?e$2.createElement(IconContext.Consumer,null,it=>rt(it)):rt(DefaultContext)}function BsFillTrash3Fill(nt){return GenIcon({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z"},child:[]}]})(nt)}function BsAlarm(nt){return GenIcon({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8.5 5.5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9V5.5z"},child:[]},{tag:"path",attr:{d:"M6.5 0a.5.5 0 0 0 0 1H7v1.07a7.001 7.001 0 0 0-3.273 12.474l-.602.602a.5.5 0 0 0 .707.708l.746-.746A6.97 6.97 0 0 0 8 16a6.97 6.97 0 0 0 3.422-.892l.746.746a.5.5 0 0 0 .707-.708l-.601-.602A7.001 7.001 0 0 0 9 2.07V1h.5a.5.5 0 0 0 0-1h-3zm1.038 3.018a6.093 6.093 0 0 1 .924 0 6 6 0 1 1-.924 0zM0 3.5c0 .753.333 1.429.86 1.887A8.035 8.035 0 0 1 4.387 1.86 2.5 2.5 0 0 0 0 3.5zM13.5 1c-.753 0-1.429.333-1.887.86a8.035 8.035 0 0 1 3.527 3.527A2.5 2.5 0 0 0 13.5 1z"},child:[]}]})(nt)}function FaRegCopy(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"},child:[]}]})(nt)}function FaRegEdit(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"},child:[]}]})(nt)}const NextButton=()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("button",{children:jsxRuntimeExports.jsx(ChevronRightIcon$1,{className:"w-6 h-6"})})}),selectedRoutineState=Recoil_index_8({key:"selectedRoutineState",default:[]}),selectedRoutineInfoState=Recoil_index_8({key:"selectedRoutineInfoState",default:[]}),RoutineEditMenuModal=({onClose:nt})=>{const rt=Recoil_index_20(baseUrlState),[it,st]=Recoil_index_22(modalState),[lt,ct]=Recoil_index_22(selectedRoutineState),ut=Recoil_index_20(selectedRoutineInfoState),dt=()=>{const ht=async()=>{await axios.delete(`${rt}api/management/routine/delete/${ut.routineId}`).then(ft=>{console.log(lt.title+" 루틴 삭제 성공"),st({type:null,data:null}),ct([])}).catch(ft=>{console.log(ft)})};confirm("해당 루틴을 삭제하시겠습니까?")&&ht()};return jsxRuntimeExports.jsx(Modal,{className:"fixed bottom-0 bg-white rounded-2xl border-t border-t-black overflow-auto inset-x-0",isOpen:it.type==="routineEditMenu",ariaHideApp:!1,onRequestClose:()=>st({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 m-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 mb-4",children:[jsxRuntimeExports.jsx("p",{className:"col-start-2 font-semibold text-center",children:"설정"}),jsxRuntimeExports.jsx("div",{className:"flex flex-row-reverse",children:jsxRuntimeExports.jsx(XMarkIcon$1,{className:"w-6 h-6",onClick:nt})})]}),jsxRuntimeExports.jsx(Link,{to:"/diary/training/myroutine/edit",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between",onClick:nt,children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(FaRegEdit,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("p",{children:"편집"})]}),jsxRuntimeExports.jsx(NextButton,{})]})}),jsxRuntimeExports.jsx("hr",{}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(FaRegCopy,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("p",{children:"복제"})]}),jsxRuntimeExports.jsx(NextButton,{})]}),jsxRuntimeExports.jsx("hr",{}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 text-red-500",onClick:()=>dt(),children:[jsxRuntimeExports.jsx(BsFillTrash3Fill,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("p",{children:"삭제"})]})]})})};RoutineEditMenuModal.propTypes={onClose:propTypesExports.PropTypes.func};const ChallengeMenuModal=({onClose:nt,data:rt})=>{const[it,st]=Recoil_index_22(modalState),lt=Recoil_index_20(baseUrlState),ct=Recoil_index_20(userState),{challengeId:ut}=useParams(),dt=async ht=>{ht.preventDefault(),await axios.delete(`${lt}api/challenge/${ut}`).then(()=>{window.location.replace("/challenge")})};return jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2",isOpen:it.type==="challengeMenu",ariaHideApp:!1,onRequestClose:()=>st({type:null,data:null}),children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap h-40 bg-white border-2 border-gray-400 w-60 rounded-xl",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full",onClick:()=>st({type:null,data:null}),children:ct.info.role==="ROLE_ADMIN"?jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center justify-center w-full gap-6",onClick:()=>st({type:null,data:null}),children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full",children:jsxRuntimeExports.jsx(Link,{to:`/challenge/${ut}/update`,state:{value:rt},className:"flex items-center justify-center w-10/12 h-10 text-white bg-teal-700 border-2 rounded-md",children:"수정하기"})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full",children:jsxRuntimeExports.jsx("button",{onClick:dt,className:"w-10/12 h-10 text-white border-2 rounded-md bg-rose-600",children:"삭제하기"})})]}):jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("p",{children:"권한이 없습니다."})})})})})};ChallengeMenuModal.propTypes={onClose:propTypesExports.PropTypes.func};const ChangeHeightModal=({onClose:nt,data:rt})=>{const{register:it,handleSubmit:st,watch:lt}=useForm({mode:"onSubmit"}),ct=Recoil_index_20(baseUrlState),[ut,dt]=Recoil_index_22(modalState),[ht,ft]=Recoil_index_22(userState),pt=lt("height"),mt=()=>{axios({method:"patch",url:`${ct}api/users/${ht.info.userId}/height`,headers:{Authorization:`Bearer ${ht.token}`},data:{height:pt}}).then(gt=>{gt.data.data_header.success_code===0&&(ft({token:ht.token,info:{...ht.info,height:pt}}),dt({type:null,data:null}))})};return jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-y-1/2 top-1/2 inset-x-12",isOpen:ut.type==="changeHeight",ariaHideApp:!1,onRequestClose:()=>dt({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"p-4 bg-white border-2 border-gray-400 rounded-xl",children:[jsxRuntimeExports.jsx("p",{className:"mb-4 font-semibold text-center",children:"신장"}),jsxRuntimeExports.jsxs("form",{onSubmit:st(mt),className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4",children:[jsxRuntimeExports.jsx("input",{type:"text",...it("height"),defaultValue:rt,className:"w-1/3 p-1 text-center border border-gray-400 rounded-md"}),jsxRuntimeExports.jsx("p",{children:"cm"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 m-2",children:[jsxRuntimeExports.jsx("input",{type:"button",onClick:nt,value:"취소",className:"p-1 border border-teal-700 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"submit",value:"확인",className:"p-1 text-white bg-teal-700 rounded-md"})]})]})]})})};ChangeHeightModal.propTypes={onClose:propTypesExports.PropTypes.func,data:propTypesExports.PropTypes.string};const ChangeWeightModal=({onClose:nt,data:rt})=>{const{register:it,handleSubmit:st,watch:lt}=useForm({mode:"onSubmit"}),ct=Recoil_index_20(baseUrlState),[ut,dt]=Recoil_index_22(modalState),[ht,ft]=Recoil_index_22(userState),pt=lt("weight"),mt=()=>{axios({method:"patch",url:`${ct}api/users/${ht.info.userId}/weight`,headers:{Authorization:`Bearer ${ht.token}`},data:{weight:pt}}).then(gt=>{gt.data.data_header.success_code===0?(ft({token:ht.token,info:{...ht.info,weight:pt}}),dt({type:null,data:null})):dt({type:null,data:null})})};return jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-y-1/2 top-1/2 inset-x-12",isOpen:ut.type==="changeWeight",ariaHideApp:!1,onRequestClose:()=>dt({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"p-4 bg-white border-2 border-gray-400 rounded-xl",children:[jsxRuntimeExports.jsx("p",{className:"mb-4 font-semibold text-center",children:"체중"}),jsxRuntimeExports.jsxs("form",{onSubmit:st(mt),className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4",children:[jsxRuntimeExports.jsx("input",{type:"text",...it("weight"),defaultValue:rt,className:"w-1/3 p-1 text-center border border-gray-400 rounded-md"}),jsxRuntimeExports.jsx("p",{children:"kg"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 m-2",children:[jsxRuntimeExports.jsx("input",{type:"button",onClick:nt,value:"취소",className:"p-1 border border-teal-700 rounded-md"}),jsxRuntimeExports.jsx("input",{type:"submit",value:"확인",className:"p-1 text-white bg-teal-700 rounded-md"})]})]})]})})};ChangeWeightModal.propTypes={onClose:propTypesExports.PropTypes.func,data:propTypesExports.PropTypes.string};const RoutineDetailModal=({onClose:nt})=>{var pt;const rt=Recoil_index_20(baseUrlState),it=Recoil_index_20(userState),st=Recoil_index_20(selectedDateState),[lt,ct]=Recoil_index_22(modalState),ut=Recoil_index_20(selectedRoutineState),dt=Recoil_index_20(selectedRoutineInfoState),ht=useNavigate(),ft=async mt=>{mt.preventDefault(),await axios.get(`${rt}api/management/routine/addTrainings?user_id=${it.info.userId}&routine_id=${ut.routineId}&year=${st[0]}&month=${st[1]}&day=${st[2]}`).then(gt=>{console.log("루틴 -> 오늘 운동에 등록"),ct({type:null,data:null}),ht(`/diary/training/${st[0]}/${st[1]}/${st[2]}`)}).catch(gt=>{console.log(gt)})};return jsxRuntimeExports.jsxs(Modal,{className:"fixed bottom-0 bg-white rounded-2xl border-t border-t-black overflow-auto inset-x-0 max-h-[600px]",isOpen:lt.type==="routineDetail",ariaHideApp:!1,onRequestClose:()=>ct({type:null,data:null}),children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 m-4 bottom-16",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-5 mb-4",children:[jsxRuntimeExports.jsx("p",{className:"col-start-2 col-end-5 font-semibold text-center",children:dt.title}),jsxRuntimeExports.jsx("div",{className:"flex flex-row-reverse",children:jsxRuntimeExports.jsx(Link,{to:"/diary/training/myroutine/edit",children:jsxRuntimeExports.jsx("p",{onClick:nt,className:"text-gray-500",children:"편집"})})})]}),jsxRuntimeExports.jsx("div",{className:"mb-16",children:(pt=ut.routine_training_list)==null?void 0:pt.map((mt,gt)=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 my-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("img",{src:mt.image,alt:"img",className:"w-16 h-16"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 pl-4",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-teal-700",children:gt+1})," ",mt.name]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:[mt.category," | ",mt.sets.length,"세트 |"," ",mt.sets.reduce((xt,yt)=>xt+yt.count*yt.kg,0),"kg"]})]})]}),jsxRuntimeExports.jsx("hr",{})]},gt))})]}),jsxRuntimeExports.jsx("form",{onSubmit:ft,className:"fixed bottom-0 w-full bg-white",children:jsxRuntimeExports.jsx("div",{className:"p-2 m-4 text-center text-white bg-teal-700 border rounded-md",children:jsxRuntimeExports.jsx("button",{type:"submit",className:"",children:"운동 시작하기"})})})]})};RoutineDetailModal.propTypes={onClose:propTypesExports.PropTypes.func};const ModelDetail=({name:nt,value:rt,onChange:it,disabled:st,css:lt})=>jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[jsxRuntimeExports.jsx("div",{className:`col-span-3 p-1 text-center text-white ${lt} rounded-xl`,children:nt}),jsxRuntimeExports.jsx("input",{type:"text",value:rt,onChange:it,disabled:st,className:`col-span-4 p-1 text-center border border-teal-700 rounded-xl ${st?"text-gray-500":""}`})]});ModelDetail.propTypes={name:propTypesExports.PropTypes.string,value:propTypesExports.PropTypes.string,onChange:propTypesExports.PropTypes.func,disabled:propTypesExports.PropTypes.bool,css:propTypesExports.PropTypes.string};const toggleDiaryState=Recoil_index_8({key:"toggleDiaryState",default:"left"}),toggleState=Recoil_index_8({key:"toggleState",default:"left"}),toggleModelState=Recoil_index_8({key:"toggleModelState",default:"left"}),inbodyListState=Recoil_index_8({key:"inbodyListState",default:[]}),selectedInbodyState=Recoil_index_8({key:"selectedInbodyState",default:[]}),targetInbodyState=Recoil_index_8({key:"targetInbodyState",default:[]}),loadingState=Recoil_index_8({key:"loadingState",default:!1}),muscleRoundState=Recoil_index_8({key:"muscleRoundState",default:{20:25,21:25,22:25,23:25,24:25,25:25,26:25,27:25,28:30,29:30,30:30,31:30,32:30,33:35,34:35,35:35,36:35,37:35,38:40,39:40,40:40,41:40,42:40,43:45,44:45,45:45,46:45,47:45,48:50,49:50,50:50,51:50,52:50,53:55,54:55,55:55,56:55,57:55,58:60,59:60,60:60,61:60,62:60,63:60,64:60,65:60}}),isValidMuscleState=Recoil_index_8({key:"isValidMuscleState",default:{60:[25,28,30,33,35],70:[25,30,35,40],80:[25,30,35,40,45],90:[25,30,35,40,45,50],100:[30,35,40,45,50,55],110:[30,35,40,45,50,55,60]}});var sweetalert2_all={exports:{}};/*!
* sweetalert2 v11.10.5
* Released under the MIT License.
*/(function(nt,rt){(function(it,st){nt.exports=st()})(commonjsGlobal,function(){function it(cr,qt,Yt){return qt=xt(qt),St(cr,lt()?Reflect.construct(qt,Yt||[],xt(cr).constructor):qt.apply(cr,Yt))}function st(cr,qt,Yt){if(lt())return Reflect.construct.apply(null,arguments);var ur=[null];ur.push.apply(ur,qt);var Xr=new(cr.bind.apply(cr,ur));return Yt&&yt(Xr,Yt.prototype),Xr}function lt(){try{var cr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lt=function(){return!!cr})()}function ct(cr,qt){var Yt=cr==null?null:typeof Symbol<"u"&&cr[Symbol.iterator]||cr["@@iterator"];if(Yt!=null){var ur,Xr,Nn,Ts,Ro=[],oo=!0,Io=!1;try{if(Nn=(Yt=Yt.call(cr)).next,qt===0){if(Object(Yt)!==Yt)return;oo=!1}else for(;!(oo=(ur=Nn.call(Yt)).done)&&(Ro.push(ur.value),Ro.length!==qt);oo=!0);}catch(mp){Io=!0,Xr=mp}finally{try{if(!oo&&Yt.return!=null&&(Ts=Yt.return(),Object(Ts)!==Ts))return}finally{if(Io)throw Xr}}return Ro}}function ut(cr,qt){if(typeof cr!="object"||!cr)return cr;var Yt=cr[Symbol.toPrimitive];if(Yt!==void 0){var ur=Yt.call(cr,qt||"default");if(typeof ur!="object")return ur;throw new TypeError("@@toPrimitive must return a primitive value.")}return(qt==="string"?String:Number)(cr)}function dt(cr){var qt=ut(cr,"string");return typeof qt=="symbol"?qt:String(qt)}function ht(cr){"@babel/helpers - typeof";return ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(qt){return typeof qt}:function(qt){return qt&&typeof Symbol=="function"&&qt.constructor===Symbol&&qt!==Symbol.prototype?"symbol":typeof qt},ht(cr)}function ft(cr,qt){if(!(cr instanceof qt))throw new TypeError("Cannot call a class as a function")}function pt(cr,qt){for(var Yt=0;Yt<qt.length;Yt++){var ur=qt[Yt];ur.enumerable=ur.enumerable||!1,ur.configurable=!0,"value"in ur&&(ur.writable=!0),Object.defineProperty(cr,dt(ur.key),ur)}}function mt(cr,qt,Yt){return qt&&pt(cr.prototype,qt),Yt&&pt(cr,Yt),Object.defineProperty(cr,"prototype",{writable:!1}),cr}function gt(cr,qt){if(typeof qt!="function"&&qt!==null)throw new TypeError("Super expression must either be null or a function");cr.prototype=Object.create(qt&&qt.prototype,{constructor:{value:cr,writable:!0,configurable:!0}}),Object.defineProperty(cr,"prototype",{writable:!1}),qt&&yt(cr,qt)}function xt(cr){return xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Yt){return Yt.__proto__||Object.getPrototypeOf(Yt)},xt(cr)}function yt(cr,qt){return yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ur,Xr){return ur.__proto__=Xr,ur},yt(cr,qt)}function vt(cr){if(cr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return cr}function St(cr,qt){if(qt&&(typeof qt=="object"||typeof qt=="function"))return qt;if(qt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vt(cr)}function wt(cr,qt){for(;!Object.prototype.hasOwnProperty.call(cr,qt)&&(cr=xt(cr),cr!==null););return cr}function Et(){return typeof Reflect<"u"&&Reflect.get?Et=Reflect.get.bind():Et=function(qt,Yt,ur){var Xr=wt(qt,Yt);if(Xr){var Nn=Object.getOwnPropertyDescriptor(Xr,Yt);return Nn.get?Nn.get.call(arguments.length<3?qt:ur):Nn.value}},Et.apply(this,arguments)}function Rt(cr,qt){return At(cr)||ct(cr,qt)||jt(cr,qt)||Mt()}function Tt(cr){return It(cr)||Dt(cr)||jt(cr)||Lt()}function It(cr){if(Array.isArray(cr))return Ft(cr)}function At(cr){if(Array.isArray(cr))return cr}function Dt(cr){if(typeof Symbol<"u"&&cr[Symbol.iterator]!=null||cr["@@iterator"]!=null)return Array.from(cr)}function jt(cr,qt){if(cr){if(typeof cr=="string")return Ft(cr,qt);var Yt=Object.prototype.toString.call(cr).slice(8,-1);if(Yt==="Object"&&cr.constructor&&(Yt=cr.constructor.name),Yt==="Map"||Yt==="Set")return Array.from(cr);if(Yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Yt))return Ft(cr,qt)}}function Ft(cr,qt){(qt==null||qt>cr.length)&&(qt=cr.length);for(var Yt=0,ur=new Array(qt);Yt<qt;Yt++)ur[Yt]=cr[Yt];return ur}function Lt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ot(cr,qt){var Yt=$t(cr,qt,"get");return Vt(cr,Yt)}function Nt(cr,qt,Yt){var ur=$t(cr,qt,"set");return Ut(cr,ur,Yt),Yt}function $t(cr,qt,Yt){if(!qt.has(cr))throw new TypeError("attempted to "+Yt+" private field on non-instance");return qt.get(cr)}function Vt(cr,qt){return qt.get?qt.get.call(cr):qt.value}function Ut(cr,qt,Yt){if(qt.set)qt.set.call(cr,Yt);else{if(!qt.writable)throw new TypeError("attempted to set read only private field");qt.value=Yt}}function zt(cr,qt){if(qt.has(cr))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Bt(cr,qt,Yt){zt(cr,qt),qt.set(cr,Yt)}var Ht=100,Gt={},Xt=function(){Gt.previousActiveElement instanceof HTMLElement?(Gt.previousActiveElement.focus(),Gt.previousActiveElement=null):document.body&&document.body.focus()},Zt=function(qt){return new Promise(function(Yt){if(!qt)return Yt();var ur=window.scrollX,Xr=window.scrollY;Gt.restoreFocusTimeout=setTimeout(function(){Xt(),Yt()},Ht),window.scrollTo(ur,Xr)})},hr="swal2-",nr=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],ir=nr.reduce(function(cr,qt){return cr[qt]=hr+qt,cr},{}),yr=["success","warning","info","question","error"],Cr=yr.reduce(function(cr,qt){return cr[qt]=hr+qt,cr},{}),Sr="SweetAlert2:",xr=function(qt){return qt.charAt(0).toUpperCase()+qt.slice(1)},gr=function(qt){console.warn("".concat(Sr," ").concat(ht(qt)==="object"?qt.join(" "):qt))},_r=function(qt){console.error("".concat(Sr," ").concat(qt))},fr=[],Nr=function(qt){fr.includes(qt)||(fr.push(qt),gr(qt))},Tr=function(qt,Yt){Nr('"'.concat(qt,'" is deprecated and will be removed in the next major release. Please use "').concat(Yt,'" instead.'))},Hr=function(qt){return typeof qt=="function"?qt():qt},Vr=function(qt){return qt&&typeof qt.toPromise=="function"},mn=function(qt){return Vr(qt)?qt.toPromise():Promise.resolve(qt)},tn=function(qt){return qt&&Promise.resolve(qt)===qt},er=function(){return document.body.querySelector(".".concat(ir.container))},tr=function(qt){var Yt=er();return Yt?Yt.querySelector(qt):null},vr=function(qt){return tr(".".concat(qt))},Fr=function(){return vr(ir.popup)},Kr=function(){return vr(ir.icon)},qr=function(){return vr(ir["icon-content"])},pn=function(){return vr(ir.title)},En=function(){return vr(ir["html-container"])},Rn=function(){return vr(ir.image)},Qn=function(){return vr(ir["progress-steps"])},Ln=function(){return vr(ir["validation-message"])},ln=function(){return tr(".".concat(ir.actions," .").concat(ir.confirm))},Xn=function(){return tr(".".concat(ir.actions," .").concat(ir.cancel))},Yr=function(){return tr(".".concat(ir.actions," .").concat(ir.deny))},Qr=function(){return vr(ir["input-label"])},Mn=function(){return tr(".".concat(ir.loader))},Ar=function(){return vr(ir.actions)},or=function(){return vr(ir.footer)},Wr=function(){return vr(ir["timer-progress-bar"])},Ir=function(){return vr(ir.close)},dn=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,kn=function(){var qt=Fr();if(!qt)return[];var Yt=qt.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),ur=Array.from(Yt).sort(function(Ts,Ro){var oo=parseInt(Ts.getAttribute("tabindex")||"0"),Io=parseInt(Ro.getAttribute("tabindex")||"0");return oo>Io?1:oo<Io?-1:0}),Xr=qt.querySelectorAll(dn),Nn=Array.from(Xr).filter(function(Ts){return Ts.getAttribute("tabindex")!=="-1"});return Tt(new Set(ur.concat(Nn))).filter(function(Ts){return Bo(Ts)})},Mr=function(){return Ur(document.body,ir.shown)&&!Ur(document.body,ir["toast-shown"])&&!Ur(document.body,ir["no-backdrop"])},vn=function(){var qt=Fr();return qt?Ur(qt,ir.toast):!1},kr=function(){var qt=Fr();return qt?qt.hasAttribute("data-loading"):!1},Er=function(qt,Yt){if(qt.textContent="",Yt){var ur=new DOMParser,Xr=ur.parseFromString(Yt,"text/html"),Nn=Xr.querySelector("head");Nn&&Array.from(Nn.childNodes).forEach(function(Ro){qt.appendChild(Ro)});var Ts=Xr.querySelector("body");Ts&&Array.from(Ts.childNodes).forEach(function(Ro){Ro instanceof HTMLVideoElement||Ro instanceof HTMLAudioElement?qt.appendChild(Ro.cloneNode(!0)):qt.appendChild(Ro)})}},Ur=function(qt,Yt){if(!Yt)return!1;for(var ur=Yt.split(/\s+/),Xr=0;Xr<ur.length;Xr++)if(!qt.classList.contains(ur[Xr]))return!1;return!0},on=function(qt,Yt){Array.from(qt.classList).forEach(function(ur){!Object.values(ir).includes(ur)&&!Object.values(Cr).includes(ur)&&!Object.values(Yt.showClass||{}).includes(ur)&&qt.classList.remove(ur)})},fn=function(qt,Yt,ur){if(on(qt,Yt),Yt.customClass&&Yt.customClass[ur]){if(typeof Yt.customClass[ur]!="string"&&!Yt.customClass[ur].forEach){gr("Invalid type of customClass.".concat(ur,'! Expected string or iterable object, got "').concat(ht(Yt.customClass[ur]),'"'));return}Dn(qt,Yt.customClass[ur])}},Kn=function(qt,Yt){if(!Yt)return null;switch(Yt){case"select":case"textarea":case"file":return qt.querySelector(".".concat(ir.popup," > .").concat(ir[Yt]));case"checkbox":return qt.querySelector(".".concat(ir.popup," > .").concat(ir.checkbox," input"));case"radio":return qt.querySelector(".".concat(ir.popup," > .").concat(ir.radio," input:checked"))||qt.querySelector(".".concat(ir.popup," > .").concat(ir.radio," input:first-child"));case"range":return qt.querySelector(".".concat(ir.popup," > .").concat(ir.range," input"));default:return qt.querySelector(".".concat(ir.popup," > .").concat(ir.input))}},es=function(qt){if(qt.focus(),qt.type!=="file"){var Yt=qt.value;qt.value="",qt.value=Yt}},Zn=function(qt,Yt,ur){!qt||!Yt||(typeof Yt=="string"&&(Yt=Yt.split(/\s+/).filter(Boolean)),Yt.forEach(function(Xr){Array.isArray(qt)?qt.forEach(function(Nn){ur?Nn.classList.add(Xr):Nn.classList.remove(Xr)}):ur?qt.classList.add(Xr):qt.classList.remove(Xr)}))},Dn=function(qt,Yt){Zn(qt,Yt,!0)},ss=function(qt,Yt){Zn(qt,Yt,!1)},$s=function(qt,Yt){for(var ur=Array.from(qt.children),Xr=0;Xr<ur.length;Xr++){var Nn=ur[Xr];if(Nn instanceof HTMLElement&&Ur(Nn,Yt))return Nn}},ws=function(qt,Yt,ur){ur==="".concat(parseInt(ur))&&(ur=parseInt(ur)),ur||parseInt(ur)===0?qt.style.setProperty(Yt,typeof ur=="number"?"".concat(ur,"px"):ur):qt.style.removeProperty(Yt)},As=function(qt){var Yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";qt&&(qt.style.display=Yt)},Vs=function(qt){qt&&(qt.style.display="none")},Fo=function(qt){var Yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";qt&&new MutationObserver(function(){Ho(qt,qt.innerHTML,Yt)}).observe(qt,{childList:!0,subtree:!0})},Lo=function(qt,Yt,ur,Xr){var Nn=qt.querySelector(Yt);Nn&&Nn.style.setProperty(ur,Xr)},Ho=function(qt,Yt){var ur=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";Yt?As(qt,ur):Vs(qt)},Bo=function(qt){return!!(qt&&(qt.offsetWidth||qt.offsetHeight||qt.getClientRects().length))},Kl=function(){return!Bo(ln())&&!Bo(Yr())&&!Bo(Xn())},Nl=function(qt){return qt.scrollHeight>qt.clientHeight},Lr=function(qt){var Yt=window.getComputedStyle(qt),ur=parseFloat(Yt.getPropertyValue("animation-duration")||"0"),Xr=parseFloat(Yt.getPropertyValue("transition-duration")||"0");return ur>0||Xr>0},wn=function(qt){var Yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ur=Wr();ur&&Bo(ur)&&(Yt&&(ur.style.transition="none",ur.style.width="100%"),setTimeout(function(){ur.style.transition="width ".concat(qt/1e3,"s linear"),ur.style.width="0%"},10))},On=function(){var qt=Wr();if(qt){var Yt=parseInt(window.getComputedStyle(qt).width);qt.style.removeProperty("transition"),qt.style.width="100%";var ur=parseInt(window.getComputedStyle(qt).width),Xr=Yt/ur*100;qt.style.width="".concat(Xr,"%")}},In=function(){return typeof window>"u"||typeof document>"u"},Br=`
 <div aria-labelledby="`.concat(ir.title,'" aria-describedby="').concat(ir["html-container"],'" class="').concat(ir.popup,`" tabindex="-1">
   <button type="button" class="`).concat(ir.close,`"></button>
   <ul class="`).concat(ir["progress-steps"],`"></ul>
   <div class="`).concat(ir.icon,`"></div>
   <img class="`).concat(ir.image,`" />
   <h2 class="`).concat(ir.title,'" id="').concat(ir.title,`"></h2>
   <div class="`).concat(ir["html-container"],'" id="').concat(ir["html-container"],`"></div>
   <input class="`).concat(ir.input,'" id="').concat(ir.input,`" />
   <input type="file" class="`).concat(ir.file,`" />
   <div class="`).concat(ir.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(ir.select,'" id="').concat(ir.select,`"></select>
   <div class="`).concat(ir.radio,`"></div>
   <label class="`).concat(ir.checkbox,`">
     <input type="checkbox" id="`).concat(ir.checkbox,`" />
     <span class="`).concat(ir.label,`"></span>
   </label>
   <textarea class="`).concat(ir.textarea,'" id="').concat(ir.textarea,`"></textarea>
   <div class="`).concat(ir["validation-message"],'" id="').concat(ir["validation-message"],`"></div>
   <div class="`).concat(ir.actions,`">
     <div class="`).concat(ir.loader,`"></div>
     <button type="button" class="`).concat(ir.confirm,`"></button>
     <button type="button" class="`).concat(ir.deny,`"></button>
     <button type="button" class="`).concat(ir.cancel,`"></button>
   </div>
   <div class="`).concat(ir.footer,`"></div>
   <div class="`).concat(ir["timer-progress-bar-container"],`">
     <div class="`).concat(ir["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),gs=function(){var qt=er();return qt?(qt.remove(),ss([document.documentElement,document.body],[ir["no-backdrop"],ir["toast-shown"],ir["has-column"]]),!0):!1},os=function(){Gt.currentInstance.resetValidationMessage()},ys=function(){var qt=Fr(),Yt=$s(qt,ir.input),ur=$s(qt,ir.file),Xr=qt.querySelector(".".concat(ir.range," input")),Nn=qt.querySelector(".".concat(ir.range," output")),Ts=$s(qt,ir.select),Ro=qt.querySelector(".".concat(ir.checkbox," input")),oo=$s(qt,ir.textarea);Yt.oninput=os,ur.onchange=os,Ts.onchange=os,Ro.onchange=os,oo.oninput=os,Xr.oninput=function(){os(),Nn.value=Xr.value},Xr.onchange=function(){os(),Nn.value=Xr.value}},Os=function(qt){return typeof qt=="string"?document.querySelector(qt):qt},Zs=function(qt){var Yt=Fr();Yt.setAttribute("role",qt.toast?"alert":"dialog"),Yt.setAttribute("aria-live",qt.toast?"polite":"assertive"),qt.toast||Yt.setAttribute("aria-modal","true")},Ys=function(qt){window.getComputedStyle(qt).direction==="rtl"&&Dn(er(),ir.rtl)},un=function(qt){var Yt=gs();if(In()){_r("SweetAlert2 requires document to initialize");return}var ur=document.createElement("div");ur.className=ir.container,Yt&&Dn(ur,ir["no-transition"]),Er(ur,Br);var Xr=Os(qt.target);Xr.appendChild(ur),Zs(qt),Ys(Xr),ys()},Vo=function(qt,Yt){qt instanceof HTMLElement?Yt.appendChild(qt):ht(qt)==="object"?xn(qt,Yt):qt&&Er(Yt,qt)},xn=function(qt,Yt){qt.jquery?An(Yt,qt):Er(Yt,qt.toString())},An=function(qt,Yt){if(qt.textContent="",0 in Yt)for(var ur=0;ur in Yt;ur++)qt.appendChild(Yt[ur].cloneNode(!0));else qt.appendChild(Yt.cloneNode(!0))},Hn=function(){if(In())return!1;var cr=document.createElement("div");return typeof cr.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof cr.style.animation<"u"?"animationend":!1}(),Un=function(qt,Yt){var ur=Ar(),Xr=Mn();!ur||!Xr||(!Yt.showConfirmButton&&!Yt.showDenyButton&&!Yt.showCancelButton?Vs(ur):As(ur),fn(ur,Yt,"actions"),Gn(ur,Xr,Yt),Er(Xr,Yt.loaderHtml||""),fn(Xr,Yt,"loader"))};function Gn(cr,qt,Yt){var ur=ln(),Xr=Yr(),Nn=Xn();!ur||!Xr||!Nn||(ps(ur,"confirm",Yt),ps(Xr,"deny",Yt),ps(Nn,"cancel",Yt),Hs(ur,Xr,Nn,Yt),Yt.reverseButtons&&(Yt.toast?(cr.insertBefore(Nn,ur),cr.insertBefore(Xr,ur)):(cr.insertBefore(Nn,qt),cr.insertBefore(Xr,qt),cr.insertBefore(ur,qt))))}function Hs(cr,qt,Yt,ur){if(!ur.buttonsStyling){ss([cr,qt,Yt],ir.styled);return}Dn([cr,qt,Yt],ir.styled),ur.confirmButtonColor&&(cr.style.backgroundColor=ur.confirmButtonColor,Dn(cr,ir["default-outline"])),ur.denyButtonColor&&(qt.style.backgroundColor=ur.denyButtonColor,Dn(qt,ir["default-outline"])),ur.cancelButtonColor&&(Yt.style.backgroundColor=ur.cancelButtonColor,Dn(Yt,ir["default-outline"]))}function ps(cr,qt,Yt){var ur=xr(qt);Ho(cr,Yt["show".concat(ur,"Button")],"inline-block"),Er(cr,Yt["".concat(qt,"ButtonText")]||""),cr.setAttribute("aria-label",Yt["".concat(qt,"ButtonAriaLabel")]||""),cr.className=ir[qt],fn(cr,Yt,"".concat(qt,"Button"))}var Us=function(qt,Yt){var ur=Ir();ur&&(Er(ur,Yt.closeButtonHtml||""),fn(ur,Yt,"closeButton"),Ho(ur,Yt.showCloseButton),ur.setAttribute("aria-label",Yt.closeButtonAriaLabel||""))},js=function(qt,Yt){var ur=er();ur&&(yo(ur,Yt.backdrop),Bs(ur,Yt.position),Ws(ur,Yt.grow),fn(ur,Yt,"container"))};function yo(cr,qt){typeof qt=="string"?cr.style.background=qt:qt||Dn([document.documentElement,document.body],ir["no-backdrop"])}function Bs(cr,qt){qt&&(qt in ir?Dn(cr,ir[qt]):(gr('The "position" parameter is not valid, defaulting to "center"'),Dn(cr,ir.center)))}function Ws(cr,qt){qt&&Dn(cr,ir["grow-".concat(qt)])}var io={innerParams:new WeakMap,domCache:new WeakMap},na=["input","file","range","select","radio","checkbox","textarea"],To=function(qt,Yt){var ur=Fr();if(ur){var Xr=io.innerParams.get(qt),Nn=!Xr||Yt.input!==Xr.input;na.forEach(function(Ts){var Ro=$s(ur,ir[Ts]);Ro&&(zl(Ts,Yt.inputAttributes),Ro.className=ir[Ts],Nn&&Vs(Ro))}),Yt.input&&(Nn&&_l(Yt),Yl(Yt))}},_l=function(qt){if(qt.input){if(!zo[qt.input]){_r("Unexpected type of input! Expected ".concat(Object.keys(zo).join(" | "),', got "').concat(qt.input,'"'));return}var Yt=Hl(qt.input),ur=zo[qt.input](Yt,qt);As(Yt),qt.inputAutoFocus&&setTimeout(function(){es(ur)})}},Go=function(qt){for(var Yt=0;Yt<qt.attributes.length;Yt++){var ur=qt.attributes[Yt].name;["id","type","value","style"].includes(ur)||qt.removeAttribute(ur)}},zl=function(qt,Yt){var ur=Kn(Fr(),qt);if(ur){Go(ur);for(var Xr in Yt)ur.setAttribute(Xr,Yt[Xr])}},Yl=function(qt){var Yt=Hl(qt.input);ht(qt.customClass)==="object"&&Dn(Yt,qt.customClass.input)},$l=function(qt,Yt){(!qt.placeholder||Yt.inputPlaceholder)&&(qt.placeholder=Yt.inputPlaceholder)},Ml=function(qt,Yt,ur){if(ur.inputLabel){var Xr=document.createElement("label"),Nn=ir["input-label"];Xr.setAttribute("for",qt.id),Xr.className=Nn,ht(ur.customClass)==="object"&&Dn(Xr,ur.customClass.inputLabel),Xr.innerText=ur.inputLabel,Yt.insertAdjacentElement("beforebegin",Xr)}},Hl=function(qt){return $s(Fr(),ir[qt]||ir.input)},Fl=function(qt,Yt){["string","number"].includes(ht(Yt))?qt.value="".concat(Yt):tn(Yt)||gr('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(ht(Yt),'"'))},zo={};zo.text=zo.email=zo.password=zo.number=zo.tel=zo.url=zo.search=zo.date=zo["datetime-local"]=zo.time=zo.week=zo.month=function(cr,qt){return Fl(cr,qt.inputValue),Ml(cr,cr,qt),$l(cr,qt),cr.type=qt.input,cr},zo.file=function(cr,qt){return Ml(cr,cr,qt),$l(cr,qt),cr},zo.range=function(cr,qt){var Yt=cr.querySelector("input"),ur=cr.querySelector("output");return Fl(Yt,qt.inputValue),Yt.type=qt.input,Fl(ur,qt.inputValue),Ml(Yt,cr,qt),cr},zo.select=function(cr,qt){if(cr.textContent="",qt.inputPlaceholder){var Yt=document.createElement("option");Er(Yt,qt.inputPlaceholder),Yt.value="",Yt.disabled=!0,Yt.selected=!0,cr.appendChild(Yt)}return Ml(cr,cr,qt),cr},zo.radio=function(cr){return cr.textContent="",cr},zo.checkbox=function(cr,qt){var Yt=Kn(Fr(),"checkbox");Yt.value="1",Yt.checked=!!qt.inputValue;var ur=cr.querySelector("span");return Er(ur,qt.inputPlaceholder),Yt},zo.textarea=function(cr,qt){Fl(cr,qt.inputValue),$l(cr,qt),Ml(cr,cr,qt);var Yt=function(Xr){return parseInt(window.getComputedStyle(Xr).marginLeft)+parseInt(window.getComputedStyle(Xr).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var ur=parseInt(window.getComputedStyle(Fr()).width),Xr=function(){if(document.body.contains(cr)){var Ts=cr.offsetWidth+Yt(cr);Ts>ur?Fr().style.width="".concat(Ts,"px"):ws(Fr(),"width",qt.width)}};new MutationObserver(Xr).observe(cr,{attributes:!0,attributeFilter:["style"]})}}),cr};var _p=function(qt,Yt){var ur=En();ur&&(Fo(ur),fn(ur,Yt,"htmlContainer"),Yt.html?(Vo(Yt.html,ur),As(ur,"block")):Yt.text?(ur.textContent=Yt.text,As(ur,"block")):Vs(ur),To(qt,Yt))},Ap=function(qt,Yt){var ur=or();ur&&(Fo(ur),Ho(ur,Yt.footer,"block"),Yt.footer&&Vo(Yt.footer,ur),fn(ur,Yt,"footer"))},Qu=function(qt,Yt){var ur=io.innerParams.get(qt),Xr=Kr();if(Xr){if(ur&&Yt.icon===ur.icon){Mo(Xr,Yt),$u(Xr,Yt);return}if(!Yt.icon&&!Yt.iconHtml){Vs(Xr);return}if(Yt.icon&&Object.keys(Cr).indexOf(Yt.icon)===-1){_r('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(Yt.icon,'"')),Vs(Xr);return}As(Xr),Mo(Xr,Yt),$u(Xr,Yt),Dn(Xr,Yt.showClass&&Yt.showClass.icon)}},$u=function(qt,Yt){for(var ur=0,Xr=Object.entries(Cr);ur<Xr.length;ur++){var Nn=Rt(Xr[ur],2),Ts=Nn[0],Ro=Nn[1];Yt.icon!==Ts&&ss(qt,Ro)}Dn(qt,Yt.icon&&Cr[Yt.icon]),Is(qt,Yt),Ju(),fn(qt,Yt,"icon")},Ju=function(){var qt=Fr();if(qt)for(var Yt=window.getComputedStyle(qt).getPropertyValue("background-color"),ur=qt.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),Xr=0;Xr<ur.length;Xr++)ur[Xr].style.backgroundColor=Yt},xp=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,kp=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Mo=function(qt,Yt){if(!(!Yt.icon&&!Yt.iconHtml)){var ur=qt.innerHTML,Xr="";if(Yt.iconHtml)Xr=jr(Yt.iconHtml);else if(Yt.icon==="success")Xr=xp,ur=ur.replace(/ style=".*?"/g,"");else if(Yt.icon==="error")Xr=kp;else if(Yt.icon){var Nn={question:"?",warning:"!",info:"i"};Xr=jr(Nn[Yt.icon])}ur.trim()!==Xr.trim()&&Er(qt,Xr)}},Is=function(qt,Yt){if(Yt.iconColor){qt.style.color=Yt.iconColor,qt.style.borderColor=Yt.iconColor;for(var ur=0,Xr=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];ur<Xr.length;ur++){var Nn=Xr[ur];Lo(qt,Nn,"background-color",Yt.iconColor)}Lo(qt,".swal2-success-ring","border-color",Yt.iconColor)}},jr=function(qt){return'<div class="'.concat(ir["icon-content"],'">').concat(qt,"</div>")},cs=function(qt,Yt){var ur=Rn();if(ur){if(!Yt.imageUrl){Vs(ur);return}As(ur,""),ur.setAttribute("src",Yt.imageUrl),ur.setAttribute("alt",Yt.imageAlt||""),ws(ur,"width",Yt.imageWidth),ws(ur,"height",Yt.imageHeight),ur.className=ir.image,fn(ur,Yt,"image")}},uo=function(qt,Yt){var ur=er(),Xr=Fr();if(!(!ur||!Xr)){if(Yt.toast){ws(ur,"width",Yt.width),Xr.style.width="100%";var Nn=Mn();Nn&&Xr.insertBefore(Nn,Kr())}else ws(Xr,"width",Yt.width);ws(Xr,"padding",Yt.padding),Yt.color&&(Xr.style.color=Yt.color),Yt.background&&(Xr.style.background=Yt.background),Vs(Ln()),Wl(Xr,Yt)}},Wl=function(qt,Yt){var ur=Yt.showClass||{};qt.className="".concat(ir.popup," ").concat(Bo(qt)?ur.popup:""),Yt.toast?(Dn([document.documentElement,document.body],ir["toast-shown"]),Dn(qt,ir.toast)):Dn(qt,ir.modal),fn(qt,Yt,"popup"),typeof Yt.customClass=="string"&&Dn(qt,Yt.customClass),Yt.icon&&Dn(qt,ir["icon-".concat(Yt.icon)])},Uo=function(qt,Yt){var ur=Qn();if(ur){var Xr=Yt.progressSteps,Nn=Yt.currentProgressStep;if(!Xr||Xr.length===0||Nn===void 0){Vs(ur);return}As(ur),ur.textContent="",Nn>=Xr.length&&gr("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),Xr.forEach(function(Ts,Ro){var oo=ju(Ts);if(ur.appendChild(oo),Ro===Nn&&Dn(oo,ir["active-progress-step"]),Ro!==Xr.length-1){var Io=sm(Yt);ur.appendChild(Io)}})}},ju=function(qt){var Yt=document.createElement("li");return Dn(Yt,ir["progress-step"]),Er(Yt,qt),Yt},sm=function(qt){var Yt=document.createElement("li");return Dn(Yt,ir["progress-step-line"]),qt.progressStepsDistance&&ws(Yt,"width",qt.progressStepsDistance),Yt},Wp=function(qt,Yt){var ur=pn();ur&&(Fo(ur),Ho(ur,Yt.title||Yt.titleText,"block"),Yt.title&&Vo(Yt.title,ur),Yt.titleText&&(ur.innerText=Yt.titleText),fn(ur,Yt,"title"))},Jp=function(qt,Yt){uo(qt,Yt),js(qt,Yt),Uo(qt,Yt),Qu(qt,Yt),cs(qt,Yt),Wp(qt,Yt),Us(qt,Yt),_p(qt,Yt),Un(qt,Yt),Ap(qt,Yt);var ur=Fr();typeof Yt.didRender=="function"&&ur&&Yt.didRender(ur)},Fp=function(){return Bo(Fr())},Ll=function(){var qt;return(qt=ln())===null||qt===void 0?void 0:qt.click()},em=function(){var qt;return(qt=Yr())===null||qt===void 0?void 0:qt.click()},mu=function(){var qt;return(qt=Xn())===null||qt===void 0?void 0:qt.click()},Wo=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),gu=function(qt){qt.keydownTarget&&qt.keydownHandlerAdded&&(qt.keydownTarget.removeEventListener("keydown",qt.keydownHandler,{capture:qt.keydownListenerCapture}),qt.keydownHandlerAdded=!1)},Bl=function(qt,Yt,ur){gu(qt),Yt.toast||(qt.keydownHandler=function(Xr){return iu(Yt,Xr,ur)},qt.keydownTarget=Yt.keydownListenerCapture?window:Fr(),qt.keydownListenerCapture=Yt.keydownListenerCapture,qt.keydownTarget.addEventListener("keydown",qt.keydownHandler,{capture:qt.keydownListenerCapture}),qt.keydownHandlerAdded=!0)},Qs=function(qt,Yt){var ur,Xr=kn();if(Xr.length){qt=qt+Yt,qt===Xr.length?qt=0:qt===-1&&(qt=Xr.length-1),Xr[qt].focus();return}(ur=Fr())===null||ur===void 0||ur.focus()},Sp=["ArrowRight","ArrowDown"],ga=["ArrowLeft","ArrowUp"],iu=function(qt,Yt,ur){qt&&(Yt.isComposing||Yt.keyCode===229||(qt.stopKeydownPropagation&&Yt.stopPropagation(),Yt.key==="Enter"?_d(Yt,qt):Yt.key==="Tab"?_o(Yt):[].concat(Sp,ga).includes(Yt.key)?Bp(Yt.key):Yt.key==="Escape"&&su(Yt,qt,ur)))},_d=function(qt,Yt){if(Hr(Yt.allowEnterKey)){var ur=Kn(Fr(),Yt.input);if(qt.target&&ur&&qt.target instanceof HTMLElement&&qt.target.outerHTML===ur.outerHTML){if(["textarea","file"].includes(Yt.input))return;Ll(),qt.preventDefault()}}},_o=function(qt){for(var Yt=qt.target,ur=kn(),Xr=-1,Nn=0;Nn<ur.length;Nn++)if(Yt===ur[Nn]){Xr=Nn;break}qt.shiftKey?Qs(Xr,-1):Qs(Xr,1),qt.stopPropagation(),qt.preventDefault()},Bp=function(qt){var Yt=Ar(),ur=ln(),Xr=Yr(),Nn=Xn();if(!(!Yt||!ur||!Xr||!Nn)){var Ts=[ur,Xr,Nn];if(!(document.activeElement instanceof HTMLElement&&!Ts.includes(document.activeElement))){var Ro=Sp.includes(qt)?"nextElementSibling":"previousElementSibling",oo=document.activeElement;if(oo){for(var Io=0;Io<Yt.children.length;Io++){if(oo=oo[Ro],!oo)return;if(oo instanceof HTMLButtonElement&&Bo(oo))break}oo instanceof HTMLButtonElement&&oo.focus()}}}},su=function(qt,Yt,ur){Hr(Yt.allowEscapeKey)&&(qt.preventDefault(),ur(Wo.esc))},vu={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},wp=function(){var qt=Array.from(document.body.children);qt.forEach(function(Yt){Yt===er()||Yt.contains(er())||(Yt.hasAttribute("aria-hidden")&&Yt.setAttribute("data-previous-aria-hidden",Yt.getAttribute("aria-hidden")||""),Yt.setAttribute("aria-hidden","true"))})},_a=function(){var qt=Array.from(document.body.children);qt.forEach(function(Yt){Yt.hasAttribute("data-previous-aria-hidden")?(Yt.setAttribute("aria-hidden",Yt.getAttribute("data-previous-aria-hidden")||""),Yt.removeAttribute("data-previous-aria-hidden")):Yt.removeAttribute("aria-hidden")})},Ul=typeof window<"u"&&!!window.GestureEvent,Au=function(){if(Ul&&!Ur(document.body,ir.iosfix)){var qt=document.body.scrollTop;document.body.style.top="".concat(qt*-1,"px"),Dn(document.body,ir.iosfix),Gp()}},Gp=function(){var qt=er();if(qt){var Yt;qt.ontouchstart=function(ur){Yt=Ip(ur)},qt.ontouchmove=function(ur){Yt&&(ur.preventDefault(),ur.stopPropagation())}}},Ip=function(qt){var Yt=qt.target,ur=er(),Xr=En();return!ur||!Xr||Up(qt)||nn(qt)?!1:Yt===ur||!Nl(ur)&&Yt instanceof HTMLElement&&Yt.tagName!=="INPUT"&&Yt.tagName!=="TEXTAREA"&&!(Nl(Xr)&&Xr.contains(Yt))},Up=function(qt){return qt.touches&&qt.touches.length&&qt.touches[0].touchType==="stylus"},nn=function(qt){return qt.touches&&qt.touches.length>1},xs=function(){if(Ur(document.body,ir.iosfix)){var qt=parseInt(document.body.style.top,10);ss(document.body,ir.iosfix),document.body.style.top="",document.body.scrollTop=qt*-1}},yu=function(){var qt=document.createElement("div");qt.className=ir["scrollbar-measure"],document.body.appendChild(qt);var Yt=qt.getBoundingClientRect().width-qt.clientWidth;return document.body.removeChild(qt),Yt},Fs=null,Vp=function(qt){Fs===null&&(document.body.scrollHeight>window.innerHeight||qt==="scroll")&&(Fs=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Fs+yu(),"px"))},Ds=function(){Fs!==null&&(document.body.style.paddingRight="".concat(Fs,"px"),Fs=null)};function Yo(cr,qt,Yt,ur){vn()?Xp(cr,ur):(Zt(Yt).then(function(){return Xp(cr,ur)}),gu(Gt)),Ul?(qt.setAttribute("style","display:none !important"),qt.removeAttribute("class"),qt.innerHTML=""):qt.remove(),Mr()&&(Ds(),xs(),_a()),_u()}function _u(){ss([document.documentElement,document.body],[ir.shown,ir["height-auto"],ir["no-backdrop"],ir["toast-shown"]])}function ou(cr){cr=tm(cr);var qt=vu.swalPromiseResolve.get(this),Yt=qp(this);this.isAwaitingPromise?cr.isDismissed||(Ep(this),qt(cr)):Yt&&qt(cr)}var qp=function(qt){var Yt=Fr();if(!Yt)return!1;var ur=io.innerParams.get(qt);if(!ur||Ur(Yt,ur.hideClass.popup))return!1;ss(Yt,ur.showClass.popup),Dn(Yt,ur.hideClass.popup);var Xr=er();return ss(Xr,ur.showClass.backdrop),Dn(Xr,ur.hideClass.backdrop),Kp(qt,Yt,ur),!0};function Lp(cr){var qt=vu.swalPromiseReject.get(this);Ep(this),qt&&qt(cr)}var Ep=function(qt){qt.isAwaitingPromise&&(delete qt.isAwaitingPromise,io.innerParams.get(qt)||qt._destroy())},tm=function(qt){return typeof qt>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},qt)},Kp=function(qt,Yt,ur){var Xr=er(),Nn=Hn&&Lr(Yt);typeof ur.willClose=="function"&&ur.willClose(Yt),Nn?zp(qt,Yt,Xr,ur.returnFocus,ur.didClose):Yo(qt,Xr,ur.returnFocus,ur.didClose)},zp=function(qt,Yt,ur,Xr,Nn){Hn&&(Gt.swalCloseEventFinishedCallback=Yo.bind(null,qt,ur,Xr,Nn),Yt.addEventListener(Hn,function(Ts){Ts.target===Yt&&(Gt.swalCloseEventFinishedCallback(),delete Gt.swalCloseEventFinishedCallback)}))},Xp=function(qt,Yt){setTimeout(function(){typeof Yt=="function"&&Yt.bind(qt.params)(),qt._destroy&&qt._destroy()})},ip=function(qt){var Yt=Fr();if(Yt||new Yn,Yt=Fr(),!!Yt){var ur=Mn();vn()?Vs(Kr()):rm(Yt,qt),As(ur),Yt.setAttribute("data-loading","true"),Yt.setAttribute("aria-busy","true"),Yt.focus()}},rm=function(qt,Yt){var ur=Ar(),Xr=Mn();!ur||!Xr||(!Yt&&Bo(ln())&&(Yt=ln()),As(ur),Yt&&(Vs(Yt),Xr.setAttribute("data-button-to-replace",Yt.className),ur.insertBefore(Xr,Yt)),Dn([qt,ur],ir.loading))},Rp=function(qt,Yt){Yt.input==="select"||Yt.input==="radio"?Ql(qt,Yt):["text","email","number","tel","textarea"].some(function(ur){return ur===Yt.input})&&(Vr(Yt.inputValue)||tn(Yt.inputValue))&&(ip(ln()),Xl(qt,Yt))},Fu=function(qt,Yt){var ur=qt.getInput();if(!ur)return null;switch(Yt.input){case"checkbox":return Bu(ur);case"radio":return Cp(ur);case"file":return Tp(ur);default:return Yt.inputAutoTrim?ur.value.trim():ur.value}},Bu=function(qt){return qt.checked?1:0},Cp=function(qt){return qt.checked?qt.value:null},Tp=function(qt){return qt.files&&qt.files.length?qt.getAttribute("multiple")!==null?qt.files:qt.files[0]:null},Ql=function(qt,Yt){var ur=Fr();if(ur){var Xr=function(Ts){Yt.input==="select"?Uu(ur,lu(Ts),Yt):Yt.input==="radio"&&Jl(ur,lu(Ts),Yt)};Vr(Yt.inputOptions)||tn(Yt.inputOptions)?(ip(ln()),mn(Yt.inputOptions).then(function(Nn){qt.hideLoading(),Xr(Nn)})):ht(Yt.inputOptions)==="object"?Xr(Yt.inputOptions):_r("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(ht(Yt.inputOptions)))}},Xl=function(qt,Yt){var ur=qt.getInput();ur&&(Vs(ur),mn(Yt.inputValue).then(function(Xr){ur.value=Yt.input==="number"?"".concat(parseFloat(Xr)||0):"".concat(Xr),As(ur),ur.focus(),qt.hideLoading()}).catch(function(Xr){_r("Error in inputValue promise: ".concat(Xr)),ur.value="",As(ur),ur.focus(),qt.hideLoading()}))};function Uu(cr,qt,Yt){var ur=$s(cr,ir.select);if(ur){var Xr=function(Ts,Ro,oo){var Io=document.createElement("option");Io.value=oo,Er(Io,Ro),Io.selected=ku(oo,Yt.inputValue),Ts.appendChild(Io)};qt.forEach(function(Nn){var Ts=Nn[0],Ro=Nn[1];if(Array.isArray(Ro)){var oo=document.createElement("optgroup");oo.label=Ts,oo.disabled=!1,ur.appendChild(oo),Ro.forEach(function(Io){return Xr(oo,Io[1],Io[0])})}else Xr(ur,Ro,Ts)}),ur.focus()}}function Jl(cr,qt,Yt){var ur=$s(cr,ir.radio);if(ur){qt.forEach(function(Nn){var Ts=Nn[0],Ro=Nn[1],oo=document.createElement("input"),Io=document.createElement("label");oo.type="radio",oo.name=ir.radio,oo.value=Ts,ku(Ts,Yt.inputValue)&&(oo.checked=!0);var mp=document.createElement("span");Er(mp,Ro),mp.className=ir.label,Io.appendChild(oo),Io.appendChild(mp),ur.appendChild(Io)});var Xr=ur.querySelectorAll("input");Xr.length&&Xr[0].focus()}}var lu=function cr(qt){var Yt=[];return qt instanceof Map?qt.forEach(function(ur,Xr){var Nn=ur;ht(Nn)==="object"&&(Nn=cr(Nn)),Yt.push([Xr,Nn])}):Object.keys(qt).forEach(function(ur){var Xr=qt[ur];ht(Xr)==="object"&&(Xr=cr(Xr)),Yt.push([ur,Xr])}),Yt},ku=function(qt,Yt){return!!Yt&&Yt.toString()===qt.toString()},Vu=void 0,sp=function(qt){var Yt=io.innerParams.get(qt);qt.disableButtons(),Yt.input?Il(qt,"confirm"):wr(qt,!0)},op=function(qt){var Yt=io.innerParams.get(qt);qt.disableButtons(),Yt.returnInputValueOnDeny?Il(qt,"deny"):pr(qt,!1)},Rl=function(qt,Yt){qt.disableButtons(),Yt(Wo.cancel)},Il=function(qt,Yt){var ur=io.innerParams.get(qt);if(!ur.input){_r('The "input" parameter is needed to be set when using returnInputValueOn'.concat(xr(Yt)));return}var Xr=qt.getInput(),Nn=Fu(qt,ur);ur.inputValidator?Dr(qt,Nn,Yt):Xr&&!Xr.checkValidity()?(qt.enableButtons(),qt.showValidationMessage(ur.validationMessage||Xr.validationMessage)):Yt==="deny"?pr(qt,Nn):wr(qt,Nn)},Dr=function(qt,Yt,ur){var Xr=io.innerParams.get(qt);qt.disableInput();var Nn=Promise.resolve().then(function(){return mn(Xr.inputValidator(Yt,Xr.validationMessage))});Nn.then(function(Ts){qt.enableButtons(),qt.enableInput(),Ts?qt.showValidationMessage(Ts):ur==="deny"?pr(qt,Yt):wr(qt,Yt)})},pr=function(qt,Yt){var ur=io.innerParams.get(qt||Vu);if(ur.showLoaderOnDeny&&ip(Yr()),ur.preDeny){qt.isAwaitingPromise=!0;var Xr=Promise.resolve().then(function(){return mn(ur.preDeny(Yt,ur.validationMessage))});Xr.then(function(Nn){Nn===!1?(qt.hideLoading(),Ep(qt)):qt.close({isDenied:!0,value:typeof Nn>"u"?Yt:Nn})}).catch(function(Nn){return mr(qt||Vu,Nn)})}else qt.close({isDenied:!0,value:Yt})},dr=function(qt,Yt){qt.close({isConfirmed:!0,value:Yt})},mr=function(qt,Yt){qt.rejectPromise(Yt)},wr=function(qt,Yt){var ur=io.innerParams.get(qt||Vu);if(ur.showLoaderOnConfirm&&ip(),ur.preConfirm){qt.resetValidationMessage(),qt.isAwaitingPromise=!0;var Xr=Promise.resolve().then(function(){return mn(ur.preConfirm(Yt,ur.validationMessage))});Xr.then(function(Nn){Bo(Ln())||Nn===!1?(qt.hideLoading(),Ep(qt)):dr(qt,typeof Nn>"u"?Yt:Nn)}).catch(function(Nn){return mr(qt||Vu,Nn)})}else dr(qt,Yt)};function rn(){var cr=io.innerParams.get(this);if(cr){var qt=io.domCache.get(this);Vs(qt.loader),vn()?cr.icon&&As(Kr()):hn(qt),ss([qt.popup,qt.actions],ir.loading),qt.popup.removeAttribute("aria-busy"),qt.popup.removeAttribute("data-loading"),qt.confirmButton.disabled=!1,qt.denyButton.disabled=!1,qt.cancelButton.disabled=!1}}var hn=function(qt){var Yt=qt.popup.getElementsByClassName(qt.loader.getAttribute("data-button-to-replace"));Yt.length?As(Yt[0],"inline-block"):Kl()&&Vs(qt.actions)};function zn(){var cr=io.innerParams.get(this),qt=io.domCache.get(this);return qt?Kn(qt.popup,cr.input):null}function Wn(cr,qt,Yt){var ur=io.domCache.get(cr);qt.forEach(function(Xr){ur[Xr].disabled=Yt})}function us(cr,qt){var Yt=Fr();if(!(!Yt||!cr))if(cr.type==="radio")for(var ur=Yt.querySelectorAll('[name="'.concat(ir.radio,'"]')),Xr=0;Xr<ur.length;Xr++)ur[Xr].disabled=qt;else cr.disabled=qt}function ds(){Wn(this,["confirmButton","denyButton","cancelButton"],!1)}function hs(){Wn(this,["confirmButton","denyButton","cancelButton"],!0)}function Jr(){us(this.getInput(),!1)}function yn(){us(this.getInput(),!0)}function Rs(cr){var qt=io.domCache.get(this),Yt=io.innerParams.get(this);Er(qt.validationMessage,cr),qt.validationMessage.className=ir["validation-message"],Yt.customClass&&Yt.customClass.validationMessage&&Dn(qt.validationMessage,Yt.customClass.validationMessage),As(qt.validationMessage);var ur=this.getInput();ur&&(ur.setAttribute("aria-invalid","true"),ur.setAttribute("aria-describedby",ir["validation-message"]),es(ur),Dn(ur,ir.inputerror))}function Ls(){var cr=io.domCache.get(this);cr.validationMessage&&Vs(cr.validationMessage);var qt=this.getInput();qt&&(qt.removeAttribute("aria-invalid"),qt.removeAttribute("aria-describedby"),ss(qt,ir.inputerror))}var Sn={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Ss=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],fs={},Ks=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Js=function(qt){return Object.prototype.hasOwnProperty.call(Sn,qt)},Ms=function(qt){return Ss.indexOf(qt)!==-1},Cs=function(qt){return fs[qt]},Xs=function(qt){Js(qt)||gr('Unknown parameter "'.concat(qt,'"'))},so=function(qt){Ks.includes(qt)&&gr('The parameter "'.concat(qt,'" is incompatible with toasts'))},po=function(qt){var Yt=Cs(qt);Yt&&Tr(qt,Yt)},Es=function(qt){qt.backdrop===!1&&qt.allowOutsideClick&&gr('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var Yt in qt)Xs(Yt),qt.toast&&so(Yt),po(Yt)};function zs(cr){var qt=Fr(),Yt=io.innerParams.get(this);if(!qt||Ur(qt,Yt.hideClass.popup)){gr("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var ur=Qo(cr),Xr=Object.assign({},Yt,ur);Jp(this,Xr),io.innerParams.set(this,Xr),Object.defineProperties(this,{params:{value:Object.assign({},this.params,cr),writable:!1,enumerable:!0}})}var Qo=function(qt){var Yt={};return Object.keys(qt).forEach(function(ur){Ms(ur)?Yt[ur]=qt[ur]:gr("Invalid parameter to update: ".concat(ur))}),Yt};function qo(){var cr=io.domCache.get(this),qt=io.innerParams.get(this);if(!qt){Po(this);return}cr.popup&&Gt.swalCloseEventFinishedCallback&&(Gt.swalCloseEventFinishedCallback(),delete Gt.swalCloseEventFinishedCallback),typeof qt.didDestroy=="function"&&qt.didDestroy(),ro(this)}var ro=function(qt){Po(qt),delete qt.params,delete Gt.keydownHandler,delete Gt.keydownTarget,delete Gt.currentInstance},Po=function(qt){qt.isAwaitingPromise?(Do(io,qt),qt.isAwaitingPromise=!0):(Do(vu,qt),Do(io,qt),delete qt.isAwaitingPromise,delete qt.disableButtons,delete qt.enableButtons,delete qt.getInput,delete qt.disableInput,delete qt.enableInput,delete qt.hideLoading,delete qt.disableLoading,delete qt.showValidationMessage,delete qt.resetValidationMessage,delete qt.close,delete qt.closePopup,delete qt.closeModal,delete qt.closeToast,delete qt.rejectPromise,delete qt.update,delete qt._destroy)},Do=function(qt,Yt){for(var ur in qt)qt[ur].delete(Yt)},mo=Object.freeze({__proto__:null,_destroy:qo,close:ou,closeModal:ou,closePopup:ou,closeToast:ou,disableButtons:hs,disableInput:yn,disableLoading:rn,enableButtons:ds,enableInput:Jr,getInput:zn,handleAwaitingPromise:Ep,hideLoading:rn,rejectPromise:Lp,resetValidationMessage:Ls,showValidationMessage:Rs,update:zs}),xo=function(qt,Yt,ur){qt.toast?ho(qt,Yt,ur):(vo(Yt),Ko(Yt),wo(qt,Yt,ur))},ho=function(qt,Yt,ur){Yt.popup.onclick=function(){qt&&(Cl(qt)||qt.timer||qt.input)||ur(Wo.close)}},Cl=function(qt){return!!(qt.showConfirmButton||qt.showDenyButton||qt.showCancelButton||qt.showCloseButton)},ls=!1,vo=function(qt){qt.popup.onmousedown=function(){qt.container.onmouseup=function(Yt){qt.container.onmouseup=function(){},Yt.target===qt.container&&(ls=!0)}}},Ko=function(qt){qt.container.onmousedown=function(){qt.popup.onmouseup=function(Yt){qt.popup.onmouseup=function(){},(Yt.target===qt.popup||Yt.target instanceof HTMLElement&&qt.popup.contains(Yt.target))&&(ls=!0)}}},wo=function(qt,Yt,ur){Yt.container.onclick=function(Xr){if(ls){ls=!1;return}Xr.target===Yt.container&&Hr(qt.allowOutsideClick)&&ur(Wo.backdrop)}},Pl=function(qt){return ht(qt)==="object"&&qt.jquery},qs=function(qt){return qt instanceof Element||Pl(qt)},Oo=function(qt){var Yt={};return ht(qt[0])==="object"&&!qs(qt[0])?Object.assign(Yt,qt[0]):["title","html","icon"].forEach(function(ur,Xr){var Nn=qt[Xr];typeof Nn=="string"||qs(Nn)?Yt[ur]=Nn:Nn!==void 0&&_r("Unexpected type of ".concat(ur,'! Expected "string" or "Element", got ').concat(ht(Nn)))}),Yt};function ks(){for(var cr=this,qt=arguments.length,Yt=new Array(qt),ur=0;ur<qt;ur++)Yt[ur]=arguments[ur];return st(cr,Yt)}function Eo(cr){var qt=function(Yt){gt(ur,Yt);function ur(){return ft(this,ur),it(this,ur,arguments)}return mt(ur,[{key:"_main",value:function(Nn,Ts){return Et(xt(ur.prototype),"_main",this).call(this,Nn,Object.assign({},cr,Ts))}}]),ur}(this);return qt}var xa=function(){return Gt.timeout&&Gt.timeout.getTimerLeft()},tu=function(){if(Gt.timeout)return On(),Gt.timeout.stop()},zu=function(){if(Gt.timeout){var qt=Gt.timeout.start();return wn(qt),qt}},Hu=function(){var qt=Gt.timeout;return qt&&(qt.running?tu():zu())},Iu=function(qt){if(Gt.timeout){var Yt=Gt.timeout.increase(qt);return wn(Yt,!0),Yt}},lp=function(){return!!(Gt.timeout&&Gt.timeout.isRunning())},cu=!1,_h={};function xl(){var cr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";_h[cr]=this,cu||(document.body.addEventListener("click",Lu),cu=!0)}var Lu=function(qt){for(var Yt=qt.target;Yt&&Yt!==document;Yt=Yt.parentNode)for(var ur in _h){var Xr=Yt.getAttribute(ur);if(Xr){_h[ur].fire({template:Xr});return}}},xu=Object.freeze({__proto__:null,argsToParams:Oo,bindClickHandler:xl,clickCancel:mu,clickConfirm:Ll,clickDeny:em,enableLoading:ip,fire:ks,getActions:Ar,getCancelButton:Xn,getCloseButton:Ir,getConfirmButton:ln,getContainer:er,getDenyButton:Yr,getFocusableElements:kn,getFooter:or,getHtmlContainer:En,getIcon:Kr,getIconContent:qr,getImage:Rn,getInputLabel:Qr,getLoader:Mn,getPopup:Fr,getProgressSteps:Qn,getTimerLeft:xa,getTimerProgressBar:Wr,getTitle:pn,getValidationMessage:Ln,increaseTimer:Iu,isDeprecatedParameter:Cs,isLoading:kr,isTimerRunning:lp,isUpdatableParameter:Ms,isValidParameter:Js,isVisible:Fp,mixin:Eo,resumeTimer:zu,showLoading:ip,stopTimer:tu,toggleTimer:Hu}),Dl=function(){function cr(qt,Yt){ft(this,cr),this.callback=qt,this.remaining=Yt,this.running=!1,this.start()}return mt(cr,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(Yt){var ur=this.running;return ur&&this.stop(),this.remaining+=Yt,ur&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),cr}(),uu=["swal-title","swal-html","swal-footer"],Wu=function(qt){var Yt=typeof qt.template=="string"?document.querySelector(qt.template):qt.template;if(!Yt)return{};var ur=Yt.content;Xo(ur);var Xr=Object.assign(Gu(ur),Su(ur),du(ur),wu(ur),qu(ur),hu(ur),Eu(ur,uu));return Xr},Gu=function(qt){var Yt={},ur=Array.from(qt.querySelectorAll("swal-param"));return ur.forEach(function(Xr){Gl(Xr,["name","value"]);var Nn=Xr.getAttribute("name"),Ts=Xr.getAttribute("value");typeof Sn[Nn]=="boolean"?Yt[Nn]=Ts!=="false":ht(Sn[Nn])==="object"?Yt[Nn]=JSON.parse(Ts):Yt[Nn]=Ts}),Yt},Su=function(qt){var Yt={},ur=Array.from(qt.querySelectorAll("swal-function-param"));return ur.forEach(function(Xr){var Nn=Xr.getAttribute("name"),Ts=Xr.getAttribute("value");Yt[Nn]=new Function("return ".concat(Ts))()}),Yt},du=function(qt){var Yt={},ur=Array.from(qt.querySelectorAll("swal-button"));return ur.forEach(function(Xr){Gl(Xr,["type","color","aria-label"]);var Nn=Xr.getAttribute("type");Yt["".concat(Nn,"ButtonText")]=Xr.innerHTML,Yt["show".concat(xr(Nn),"Button")]=!0,Xr.hasAttribute("color")&&(Yt["".concat(Nn,"ButtonColor")]=Xr.getAttribute("color")),Xr.hasAttribute("aria-label")&&(Yt["".concat(Nn,"ButtonAriaLabel")]=Xr.getAttribute("aria-label"))}),Yt},wu=function(qt){var Yt={},ur=qt.querySelector("swal-image");return ur&&(Gl(ur,["src","width","height","alt"]),ur.hasAttribute("src")&&(Yt.imageUrl=ur.getAttribute("src")),ur.hasAttribute("width")&&(Yt.imageWidth=ur.getAttribute("width")),ur.hasAttribute("height")&&(Yt.imageHeight=ur.getAttribute("height")),ur.hasAttribute("alt")&&(Yt.imageAlt=ur.getAttribute("alt"))),Yt},qu=function(qt){var Yt={},ur=qt.querySelector("swal-icon");return ur&&(Gl(ur,["type","color"]),ur.hasAttribute("type")&&(Yt.icon=ur.getAttribute("type")),ur.hasAttribute("color")&&(Yt.iconColor=ur.getAttribute("color")),Yt.iconHtml=ur.innerHTML),Yt},hu=function(qt){var Yt={},ur=qt.querySelector("swal-input");ur&&(Gl(ur,["type","label","placeholder","value"]),Yt.input=ur.getAttribute("type")||"text",ur.hasAttribute("label")&&(Yt.inputLabel=ur.getAttribute("label")),ur.hasAttribute("placeholder")&&(Yt.inputPlaceholder=ur.getAttribute("placeholder")),ur.hasAttribute("value")&&(Yt.inputValue=ur.getAttribute("value")));var Xr=Array.from(qt.querySelectorAll("swal-input-option"));return Xr.length&&(Yt.inputOptions={},Xr.forEach(function(Nn){Gl(Nn,["value"]);var Ts=Nn.getAttribute("value"),Ro=Nn.innerHTML;Yt.inputOptions[Ts]=Ro})),Yt},Eu=function(qt,Yt){var ur={};for(var Xr in Yt){var Nn=Yt[Xr],Ts=qt.querySelector(Nn);Ts&&(Gl(Ts,[]),ur[Nn.replace(/^swal-/,"")]=Ts.innerHTML.trim())}return ur},Xo=function(qt){var Yt=uu.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(qt.children).forEach(function(ur){var Xr=ur.tagName.toLowerCase();Yt.includes(Xr)||gr("Unrecognized element <".concat(Xr,">"))})},Gl=function(qt,Yt){Array.from(qt.attributes).forEach(function(ur){Yt.indexOf(ur.name)===-1&&gr(['Unrecognized attribute "'.concat(ur.name,'" on <').concat(qt.tagName.toLowerCase(),">."),"".concat(Yt.length?"Allowed attributes are: ".concat(Yt.join(", ")):"To set the value, use HTML within the element.")])})},up=10,Ru=function(qt){var Yt=er(),ur=Fr();typeof qt.willOpen=="function"&&qt.willOpen(ur);var Xr=window.getComputedStyle(document.body),Nn=Xr.overflowY;Ku(Yt,ur,qt),setTimeout(function(){hp(Yt,ur)},up),Mr()&&(Zo(Yt,qt.scrollbarPadding,Nn),wp()),!vn()&&!Gt.previousActiveElement&&(Gt.previousActiveElement=document.activeElement),typeof qt.didOpen=="function"&&setTimeout(function(){return qt.didOpen(ur)}),ss(Yt,ir["no-transition"])},dp=function cr(qt){var Yt=Fr();if(!(qt.target!==Yt||!Hn)){var ur=er();Yt.removeEventListener(Hn,cr),ur.style.overflowY="auto"}},hp=function(qt,Yt){Hn&&Lr(Yt)?(qt.style.overflowY="hidden",Yt.addEventListener(Hn,dp)):qt.style.overflowY="auto"},Zo=function(qt,Yt,ur){Au(),Yt&&ur!=="hidden"&&Vp(ur),setTimeout(function(){qt.scrollTop=0})},Ku=function(qt,Yt,ur){Dn(qt,ur.showClass.backdrop),ur.animation?(Yt.style.setProperty("opacity","0","important"),As(Yt,"grid"),setTimeout(function(){Dn(Yt,ur.showClass.popup),Yt.style.removeProperty("opacity")},up)):As(Yt,"grid"),Dn([document.documentElement,document.body],ir.shown),ur.heightAuto&&ur.backdrop&&!ur.toast&&Dn([document.documentElement,document.body],ir["height-auto"])},fu={email:function(qt,Yt){return/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(qt)?Promise.resolve():Promise.resolve(Yt||"Invalid email address")},url:function(qt,Yt){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(qt)?Promise.resolve():Promise.resolve(Yt||"Invalid URL")}};function Cu(cr){cr.inputValidator||(cr.input==="email"&&(cr.inputValidator=fu.email),cr.input==="url"&&(cr.inputValidator=fu.url))}function Du(cr){(!cr.target||typeof cr.target=="string"&&!document.querySelector(cr.target)||typeof cr.target!="string"&&!cr.target.appendChild)&&(gr('Target parameter is not valid, defaulting to "body"'),cr.target="body")}function Xu(cr){Cu(cr),cr.showLoaderOnConfirm&&!cr.preConfirm&&gr(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Du(cr),typeof cr.title=="string"&&(cr.title=cr.title.split(`
`).join("<br />")),un(cr)}var Vl,Tu=new WeakMap,ns=function(){function cr(){if(ft(this,cr),Bt(this,Tu,{writable:!0,value:void 0}),!(typeof window>"u")){Vl=this;for(var qt=arguments.length,Yt=new Array(qt),ur=0;ur<qt;ur++)Yt[ur]=arguments[ur];var Xr=Object.freeze(this.constructor.argsToParams(Yt));this.params=Xr,this.isAwaitingPromise=!1,Nt(this,Tu,this._main(Vl.params))}}return mt(cr,[{key:"_main",value:function(Yt){var ur=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Es(Object.assign({},ur,Yt)),Gt.currentInstance){var Xr=vu.swalPromiseResolve.get(Gt.currentInstance),Nn=Gt.currentInstance.isAwaitingPromise;Gt.currentInstance._destroy(),Nn||Xr({isDismissed:!0}),Mr()&&_a()}Gt.currentInstance=Vl;var Ts=Mp(Yt,ur);Xu(Ts),Object.freeze(Ts),Gt.timeout&&(Gt.timeout.stop(),delete Gt.timeout),clearTimeout(Gt.restoreFocusTimeout);var Ro=Dp(Vl);return Jp(Vl,Ts),io.innerParams.set(Vl,Ts),Jo(Vl,Ro,Ts)}},{key:"then",value:function(Yt){return Ot(this,Tu).then(Yt)}},{key:"finally",value:function(Yt){return Ot(this,Tu).finally(Yt)}}]),cr}(),Jo=function(qt,Yt,ur){return new Promise(function(Xr,Nn){var Ts=function(oo){qt.close({isDismissed:!0,dismiss:oo})};vu.swalPromiseResolve.set(qt,Xr),vu.swalPromiseReject.set(qt,Nn),Yt.confirmButton.onclick=function(){sp(qt)},Yt.denyButton.onclick=function(){op(qt)},Yt.cancelButton.onclick=function(){Rl(qt,Ts)},Yt.closeButton.onclick=function(){Ts(Wo.close)},xo(ur,Yt,Ts),Bl(Gt,ur,Ts),Rp(qt,ur),Ru(ur),fp(Gt,ur,Ts),pp(Yt,ur),setTimeout(function(){Yt.container.scrollTop=0})})},Mp=function(qt,Yt){var ur=Wu(qt),Xr=Object.assign({},Sn,Yt,ur,qt);return Xr.showClass=Object.assign({},Sn.showClass,Xr.showClass),Xr.hideClass=Object.assign({},Sn.hideClass,Xr.hideClass),Xr.animation===!1&&(Xr.showClass={backdrop:"swal2-noanimation"},Xr.hideClass={}),Xr},Dp=function(qt){var Yt={popup:Fr(),container:er(),actions:Ar(),confirmButton:ln(),denyButton:Yr(),cancelButton:Xn(),loader:Mn(),closeButton:Ir(),validationMessage:Ln(),progressSteps:Qn()};return io.domCache.set(qt,Yt),Yt},fp=function(qt,Yt,ur){var Xr=Wr();Vs(Xr),Yt.timer&&(qt.timeout=new Dl(function(){ur("timer"),delete qt.timeout},Yt.timer),Yt.timerProgressBar&&(As(Xr),fn(Xr,Yt,"timerProgressBar"),setTimeout(function(){qt.timeout&&qt.timeout.running&&wn(Yt.timer)})))},pp=function(qt,Yt){if(!Yt.toast){if(!Hr(Yt.allowEnterKey)){Hp();return}Op(qt,Yt)||Qs(-1,1)}},Op=function(qt,Yt){return Yt.focusDeny&&Bo(qt.denyButton)?(qt.denyButton.focus(),!0):Yt.focusCancel&&Bo(qt.cancelButton)?(qt.cancelButton.focus(),!0):Yt.focusConfirm&&Bo(qt.confirmButton)?(qt.confirmButton.focus(),!0):!1},Hp=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var _c=new Date,_f=localStorage.getItem("swal-initiation");_f?(_c.getTime()-Date.parse(_f))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var cr=document.createElement("audio");cr.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",cr.loop=!0,document.body.appendChild(cr),setTimeout(function(){cr.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(_c))}ns.prototype.disableButtons=hs,ns.prototype.enableButtons=ds,ns.prototype.getInput=zn,ns.prototype.disableInput=yn,ns.prototype.enableInput=Jr,ns.prototype.hideLoading=rn,ns.prototype.disableLoading=rn,ns.prototype.showValidationMessage=Rs,ns.prototype.resetValidationMessage=Ls,ns.prototype.close=ou,ns.prototype.closePopup=ou,ns.prototype.closeModal=ou,ns.prototype.closeToast=ou,ns.prototype.rejectPromise=Lp,ns.prototype.update=zs,ns.prototype._destroy=qo,Object.assign(ns,xu),Object.keys(mo).forEach(function(cr){ns[cr]=function(){if(Vl&&Vl[cr]){var qt;return(qt=Vl)[cr].apply(qt,arguments)}return null}}),ns.DismissReason=Wo,ns.version="11.10.5";var Yn=ns;return Yn.default=Yn,Yn}),typeof commonjsGlobal<"u"&&commonjsGlobal.Sweetalert2&&(commonjsGlobal.swal=commonjsGlobal.sweetAlert=commonjsGlobal.Swal=commonjsGlobal.SweetAlert=commonjsGlobal.Sweetalert2),typeof document<"u"&&function(it,st){var lt=it.createElement("style");if(it.getElementsByTagName("head")[0].appendChild(lt),lt.styleSheet)lt.styleSheet.disabled||(lt.styleSheet.cssText=st);else try{lt.innerHTML=st}catch{lt.innerText=st}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')})(sweetalert2_all);var sweetalert2_allExports=sweetalert2_all.exports;const Swal=getDefaultExportFromCjs(sweetalert2_allExports),ModelDetailModal=({onClose:nt,data:rt})=>{const[it,st]=Recoil_index_22(modalState),lt=Recoil_index_20(baseUrlState),ct=Recoil_index_20(userState),ut=Recoil_index_20(toggleModelState),dt=Recoil_index_24(inbodyListState),[ht,ft]=Recoil_index_22(selectedInbodyState),[pt,mt]=Recoil_index_22(targetInbodyState),gt=Recoil_index_24(loadingState),[xt,yt]=reactExports.useState(ht!=null&&ht.inbody_id?ht.height+" cm":"0 cm"),[vt,St]=reactExports.useState(ut==="left"?ht!=null&&ht.inbody_id?ht.weight+" kg":"0 kg":pt!=null&&pt.weight?pt.weight+" kg":ht!=null&&ht.inbody_id?ht.weight+" kg":"0 kg"),[wt,Et]=reactExports.useState(ut==="left"?ht!=null&&ht.inbody_id?ht.muscle+" kg":"0 kg":pt!=null&&pt.muscle?pt.muscle+" kg":ht!=null&&ht.inbody_id?ht.muscle+" kg":"0 kg"),[Rt,Tt]=reactExports.useState(ut==="left"?ht!=null&&ht.inbody_id?ht.fat_mass+" kg":"0 kg":pt!=null&&pt.fat_mass?pt.fat_mass+" kg":ht!=null&&ht.inbody_id?ht.fat_mass+" kg":"0 kg"),[It,At]=reactExports.useState(ut==="left"?ht!=null&&ht.inbody_id?Math.round(ht.fat_mass/ht.weight*100)+" %":"0 %":pt!=null&&pt.fat_mass?Math.round(pt.fat_mass/pt.weight*100)+" %":ht!=null&&ht.inbody_id?Math.round(ht.fat_mass/ht.weight*100)+" %":"0 %"),[Dt,jt]=reactExports.useState(ht!=null&&ht.inbody_id?ht.tbw+" kg":"0 kg"),[Ft,Lt]=reactExports.useState(ht!=null&&ht.inbody_id?ht.bmi:0),[Mt,Ot]=reactExports.useState(ht!=null&&ht.inbody_id?ht.bmr+" kcal":"0 kcal"),Nt=Sr=>{yt(Sr.target.value)},$t=Sr=>{St(Sr.target.value),parseFloat(Sr.target.value,10)&&At(Math.round(parseFloat(Rt,10)/parseFloat(Sr.target.value,10)*100)+" %")},Vt=Sr=>{Et(Sr.target.value)},Ut=Sr=>{Tt(Sr.target.value),parseFloat(Sr.target.value,10)&&At(Math.round(parseFloat(Sr.target.value,10)/parseFloat(vt,10)*100)+" %")},zt=Sr=>{jt(Sr.target.value)},Bt=Sr=>{Lt(Sr.target.value)},Ht=Sr=>{Ot(Sr.target.value)},Gt=Sr=>{var gr;Sr.preventDefault();let xr=Math.round(parseFloat(vt,10)/10)*10;(gr=nr(xr))!=null&&gr.includes(hr(parseFloat(wt,10)))?axios({method:"post",url:`${lt}api/inbody/${ct.info.userId}`,headers:{Authorization:`Bearer ${ct.token}`},data:{height:parseFloat(xt,10),weight:parseFloat(vt,10),bmr:parseInt(Mt,10),muscle:parseFloat(wt,10),tbw:parseFloat(Dt,10),whr:0,bmi:parseFloat(Ft,10),score:0,date:new Date,fat_mass:parseFloat(Rt,10),fat_per:parseFloat(It,10)}}).then(_r=>{axios({method:"get",url:`${lt}api/inbody/${ct.info.userId}`,headers:{Authorization:`Bearer ${ct.token}`}}).then(fr=>{dt(fr.data.data_body);const Nr=fr.data.data_body[fr.data.data_body.length-1].inbody_id;axios({method:"get",url:`${lt}api/inbody/${ct.info.userId}/${Nr}`,headers:{Authorization:`Bearer ${ct.token}`}}).then(Tr=>{ft(Tr.data.data_body),gt(!0),st({type:null,data:null}),setTimeout(()=>{gt(!1)},2e3)}).catch(Tr=>{console.log(Tr)})}).catch(fr=>{console.log(fr)})}).catch(_r=>{console.log(_r)}):Swal.fire({text:"정확한 데이터를 입력해 주시길 바랍니다.",icon:"error",showConfirmButton:!1,timer:3e3})},Xt=Recoil_index_20(muscleRoundState),Zt=Recoil_index_20(isValidMuscleState),hr=Sr=>Xt[Sr],nr=Sr=>Zt[Sr],ir=()=>{var xr;gt(!0);let Sr=Math.round(parseFloat(vt,10)/10)*10;(xr=nr(Sr))!=null&&xr.includes(hr(parseFloat(wt,10)))?(st({type:null,data:null}),setTimeout(()=>{mt({weight:parseFloat(vt,10),muscle:parseFloat(wt,10),fat_mass:parseFloat(Rt,10)}),gt(!1)},3e3)):(Swal.fire({text:"정확한 데이터를 입력해 주시길 바랍니다.",icon:"error",showConfirmButton:!1,timer:3e3}),gt(!1))},yr=()=>{st({type:"modelHistory",data:""})},Cr=()=>{Swal.fire({title:"주의사항",text:"체중, 골격근량, 체지방량을 입력해주세요.",icon:"error",showConfirmButton:!1,timer:3e3})};return jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-y-1/2 top-1/2 inset-x-8",isOpen:it.type==="modelDetail",ariaHideApp:!1,onRequestClose:()=>st({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 p-4 bg-white border-2 border-teal-700 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between pt-2 pb-4 text-center",children:[jsxRuntimeExports.jsx("div",{className:"ml-2 text-2xl font-semibold text-teal-700 underline underline-offset-4",children:"인바디 정보"}),ut==="left"?jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-500",children:jsxRuntimeExports.jsx("button",{onClick:yr,className:"p-1 border-4 rounded-full",children:"히스토리"})}):jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsx(ExclamationTriangleIcon$3,{onClick:Cr,className:"w-6 h-6 mr-2 text-rose-500"})})]}),jsxRuntimeExports.jsx(ModelDetail,{name:"키",value:xt,onChange:Nt,disabled:ut==="right",css:"bg-teal-700"}),jsxRuntimeExports.jsx(ModelDetail,{name:"체중",value:vt,onChange:$t,css:`
            ${ut==="right"?"bg-red-300":"bg-teal-700"}
          `}),jsxRuntimeExports.jsx(ModelDetail,{name:"골격근량",value:wt,onChange:Vt,css:`
            ${ut==="right"?"bg-red-300":"bg-teal-700"}
          `}),jsxRuntimeExports.jsx(ModelDetail,{name:"체지방량",value:Rt,onChange:Ut,css:`
            ${ut==="right"?"bg-red-300":"bg-teal-700"}
          `}),jsxRuntimeExports.jsx(ModelDetail,{name:"체지방율",value:It,disabled:!0,css:"bg-teal-700"}),jsxRuntimeExports.jsx(ModelDetail,{name:"체수분",value:Dt,onChange:zt,disabled:ut==="right",css:"bg-teal-700"}),jsxRuntimeExports.jsx(ModelDetail,{name:"BMI",value:String(Ft),onChange:Bt,disabled:ut==="right",css:"bg-teal-700"}),jsxRuntimeExports.jsx(ModelDetail,{name:"기초대사량",value:Mt,onChange:Ht,disabled:ut==="right",css:"bg-teal-700"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 pt-4 pb-2",children:[jsxRuntimeExports.jsx("input",{type:"button",value:"나가기",onClick:nt,className:"p-1 text-teal-700 border border-teal-700 rounded-xl"}),jsxRuntimeExports.jsx("input",{type:"button",value:ut==="left"?"등록하기":"예측하기",onClick:ut==="left"?Gt:ir,className:"p-1 text-white bg-teal-700 border rounded-xl"})]})]})})};ModelDetailModal.propTypes={onClose:propTypesExports.PropTypes.func,data:propTypesExports.PropTypes.string};const{persistAtom}=recoilPersist_1({key:"pinNumber",storage:sessionStorage}),pinNumberState=Recoil_index_8({key:"pinNumber",default:!1,effects_UNSTABLE:[persistAtom]}),PinNumberModal=({onClose:nt,data:rt})=>{const[it,st]=Recoil_index_22(modalState),lt=Recoil_index_20(baseUrlState),[ct,ut]=Recoil_index_22(userState),[dt,ht]=reactExports.useState(""),[ft,pt]=reactExports.useState(""),[mt,gt]=reactExports.useState(""),xt=Recoil_index_24(pinNumberState),yt=Rt=>{ht(Rt.currentTarget.value)},vt=Rt=>{pt(Rt.currentTarget.value)},St=Rt=>{Rt.preventDefault(),dt!==ft?Swal.fire({text:"PIN 번호가 일치하지 않습니다.",icon:"error",timer:2e3,showConfirmButton:!1}):axios({method:"post",url:`${lt}api/users/${ct.info.userId}/pin`,headers:{Authorization:`Bearer ${ct.token}`},data:{new_pin:dt,new_pin_check:ft}}).then(()=>{ut({token:ct.token,info:{...ct.info,pin:dt}}),Swal.fire({text:"PIN 번호가 등록되었습니다.",icon:"success",timer:2e3,showConfirmButton:!1})})},wt=Rt=>{gt(Rt.currentTarget.value)},Et=Rt=>{Rt.preventDefault(),axios({method:"post",url:`${lt}api/users/${ct.info.userId}/pin/check`,headers:{Authorization:`Bearer ${ct.token}`},data:{current_pin:mt}}).then(Tt=>{Tt.data.data_header.success_code===1?Swal.fire({text:"PIN 번호가 일치하지 않습니다.",icon:"error",timer:2e3,showConfirmButton:!1}):(xt(!0),st({type:null,data:null}))})};return jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2",isOpen:it.type==="pinNumber",ariaHideApp:!1,onRequestClose:()=>st({type:null,data:null}),children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap h-40 bg-white border-2 border-gray-400 w-60 rounded-xl",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full",children:ct.info.pin?jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center",children:[jsxRuntimeExports.jsx("div",{children:"핀번호를 입력하세요"}),jsxRuntimeExports.jsxs("form",{className:"flex flex-wrap justify-center",onSubmit:Et,children:[jsxRuntimeExports.jsx("input",{type:"password",value:mt,onChange:wt,className:"w-10/12 p-1 mt-1 bg-gray-200 rounded-md",placeholder:"핀 번호를 입력해주세요",maxLength:"6",minLength:"6"}),jsxRuntimeExports.jsx("button",{type:"submit",className:"w-1/3 p-1 mt-2 text-white bg-teal-700 rounded-md",children:"입력"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center",children:[jsxRuntimeExports.jsx("div",{children:"핀번호를 생성하세요"}),jsxRuntimeExports.jsxs("form",{className:"flex flex-wrap justify-center",onSubmit:St,children:[jsxRuntimeExports.jsx("input",{type:"password",value:dt,onChange:yt,className:"w-10/12 p-1 mt-1 bg-gray-200 rounded-md",placeholder:"핀 번호를 입력해주세요",maxLength:"6",minLength:"6"}),jsxRuntimeExports.jsx("input",{type:"password",value:ft,onChange:vt,className:"w-10/12 p-1 mt-1 bg-gray-200 rounded-md",placeholder:"다시 한번 입력해주세요",maxLength:"6",minLength:"6"}),jsxRuntimeExports.jsx("button",{type:"submit",className:"w-1/2 p-1 mt-2 text-white bg-teal-700 rounded-md",children:"생성하기"})]})]})})})})};PinNumberModal.propTypes={onClose:propTypesExports.PropTypes.func};const ModelHistoryModal=({onClose:nt,data:rt})=>{const[it,st]=Recoil_index_22(modalState),lt=Recoil_index_20(baseUrlState),ct=Recoil_index_20(userState),[ut,dt]=Recoil_index_22(inbodyListState),ht=Recoil_index_24(selectedInbodyState),ft=mt=>{axios({method:"delete",url:`${lt}api/inbody/${ct.info.userId}/${mt.inbody_id}`,headers:{Authorization:`Bearer ${ct.token}`}}).then(gt=>{axios({method:"get",url:`${lt}api/inbody/${ct.info.userId}`,headers:{Authorization:`Bearer ${ct.token}`}}).then(xt=>{dt(xt.data.data_body)})}).catch(gt=>{console.log(gt)})},pt=mt=>{axios({method:"get",url:`${lt}api/inbody/${ct.info.userId}/${mt.inbody_id}`,headers:{Authorization:`Bearer ${ct.token}`}}).then(gt=>{ht(gt.data.data_body)}).catch(gt=>{console.log(gt)})};return reactExports.useEffect(()=>{ut.length||ht([])},[ut]),jsxRuntimeExports.jsx(Modal,{className:"fixed transform -translate-y-1/2 top-1/2 inset-x-8 overflow-auto bg-white border-2 border-teal-700 rounded-xl p-4",isOpen:it.type==="modelHistory",ariaHideApp:!1,onRequestClose:()=>st({type:null,data:null}),children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between pt-2 pb-4 text-center",children:[jsxRuntimeExports.jsx("div",{className:"ml-2 text-2xl font-semibold text-teal-700 underline underline-offset-4",children:"인바디 정보"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-500",children:jsxRuntimeExports.jsx("button",{onClick:()=>st({type:"modelDetail",data:null}),className:"p-1 border-4 rounded-full",children:"돌아가기"})})]}),ut.length?jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2 h-[400px] mb-4",children:ut.map((mt,gt)=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("p",{onClick:()=>pt(mt),className:"text-lg font-semibold",children:mt.date.substring(0,10)}),jsxRuntimeExports.jsx(BsFillTrash3Fill,{onClick:()=>ft(mt),className:"w-5 h-5"})]}),jsxRuntimeExports.jsxs("div",{className:"flex text-sm",children:[jsxRuntimeExports.jsxs("p",{children:["키 : ",mt.height,"cm / "]}),jsxRuntimeExports.jsxs("p",{children:["골격근량 : ",mt.muscle,"kg"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex text-sm",children:[jsxRuntimeExports.jsxs("p",{children:["체중 : ",mt.weight,"kg / "]}),jsxRuntimeExports.jsxs("p",{children:["체지방량 : ",mt.fat_mass,"kg"]})]}),jsxRuntimeExports.jsx("hr",{className:"mt-2"})]},gt))}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 h-[400px] mb-4 items-center justify-center",children:[jsxRuntimeExports.jsx("p",{children:"등록된 인바디 정보가 없습니다."}),jsxRuntimeExports.jsx("p",{onClick:()=>st({type:"modelDetail",data:null}),className:"font-semibold text-teal-700",children:"등록하러 가기"})]})]})})};ModelHistoryModal.propTypes={onClose:propTypesExports.PropTypes.func,data:propTypesExports.PropTypes.string};const ModalManager=()=>{const[nt,rt]=Recoil_index_22(modalState),it=()=>{rt({type:null,data:null})};switch(nt.type){case"signup":return jsxRuntimeExports.jsx(SignUpModal,{onClose:it});case"changeNickname":return jsxRuntimeExports.jsx(ChangeNicknameModal,{onClose:it,data:nt.data});case"changeGender":return jsxRuntimeExports.jsx(ChangeGenderModal,{onClose:it,data:nt.data});case"changeHeight":return jsxRuntimeExports.jsx(ChangeHeightModal,{onClose:it,data:nt.data});case"changeWeight":return jsxRuntimeExports.jsx(ChangeWeightModal,{onClose:it,data:nt.data});case"selfInputFood":return jsxRuntimeExports.jsx(SelfInputFoodModal,{onClose:it,data:nt.data});case"routineCreate":return jsxRuntimeExports.jsx(RoutineCreateModal,{onClose:it,data:nt.data});case"routineEditMenu":return jsxRuntimeExports.jsx(RoutineEditMenuModal,{onClose:it,data:nt.data});case"challengeMenu":return jsxRuntimeExports.jsx(ChallengeMenuModal,{onClose:it,data:nt.data});case"routineDetail":return jsxRuntimeExports.jsx(RoutineDetailModal,{onClose:it,data:nt.data});case"modelDetail":return jsxRuntimeExports.jsx(ModelDetailModal,{onClose:it,data:nt.data});case"pinNumber":return jsxRuntimeExports.jsx(PinNumberModal,{onClose:it,data:nt.data});case"modelHistory":return jsxRuntimeExports.jsx(ModelHistoryModal,{onClose:it,data:nt.data});default:return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}};function App(){return jsxRuntimeExports.jsxs("div",{children:[localStorage.getItem("isLogin")==="true"?jsxRuntimeExports.jsx(BottomNavbar,{}):jsxRuntimeExports.jsx(LoginPage,{}),ModalManager()]})}const Menu=({menus:nt})=>jsxRuntimeExports.jsx("div",{children:nt.map(rt=>jsxRuntimeExports.jsxs("div",{className:"flex gap-2 m-2",children:[rt.menuicon,jsxRuntimeExports.jsx("p",{children:rt.menutitle}),jsxRuntimeExports.jsx(Link,{to:rt.menuurl,children:jsxRuntimeExports.jsx(ChevronRightIcon$1,{className:"w-6 h-6"})})]},rt.menutitle))});Menu.propTypes={id:propTypesExports.PropTypes.string,menus:propTypesExports.PropTypes.array};const Menus=()=>{const nt=[{category:"비밀번호",list:[{menuicon:jsxRuntimeExports.jsx(LockClosedIcon$1,{className:"w-6 h-6"}),menutitle:"비밀번호 변경",menuurl:"/mypage/passwordchange"},{menuicon:jsxRuntimeExports.jsx(Squares2X2Icon$1,{className:"w-6 h-6"}),menutitle:"PIN 번호 변경",menuurl:"/mypage/pinchange"}]},{category:"서비스",list:[{menuicon:jsxRuntimeExports.jsx(MegaphoneIcon$1,{className:"w-6 h-6"}),menutitle:"공지사항",menuurl:"/mypage/notice"},{menuicon:jsxRuntimeExports.jsx(QuestionMarkCircleIcon$1,{className:"w-6 h-6"}),menutitle:"자주 묻는 질문",menuurl:"/mypage/FAQ"}]},{category:"탈퇴",list:[{menuicon:jsxRuntimeExports.jsx(ExclamationCircleIcon$1,{className:"w-6 h-6"}),menutitle:"회원 탈퇴",menuurl:"/mypage/delete"}]}];return jsxRuntimeExports.jsx("div",{className:"flex flex-col divide-y-2 divide-gray-300",children:nt.map(rt=>jsxRuntimeExports.jsxs("div",{className:"px-4 py-6",children:[jsxRuntimeExports.jsx("div",{className:"m-2 font-semibold",children:rt.category}),jsxRuntimeExports.jsx(Menu,{menus:rt.list})]},rt.category))})};function uuid(){const nt=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"];let rt=[];for(let it=0;it<36;it++)it===8||it===13||it===18||it===23?rt[it]="-":rt[it]=nt[Math.ceil(Math.random()*nt.length-1)];return rt.join("")}var uuid_1=uuid;const uuid$1=getDefaultExportFromCjs(uuid_1),getHttpHandlerExtensionConfiguration=nt=>{let rt=nt.httpHandler;return{setHttpHandler(it){rt=it},httpHandler(){return rt},updateHttpClientConfig(it,st){rt.updateHttpClientConfig(it,st)},httpHandlerConfigs(){return rt.httpHandlerConfigs()}}},resolveHttpHandlerRuntimeConfig=nt=>({httpHandler:nt.httpHandler()});var HttpAuthLocation;(function(nt){nt.HEADER="header",nt.QUERY="query"})(HttpAuthLocation||(HttpAuthLocation={}));var HttpApiKeyAuthLocation;(function(nt){nt.HEADER="header",nt.QUERY="query"})(HttpApiKeyAuthLocation||(HttpApiKeyAuthLocation={}));var EndpointURLScheme;(function(nt){nt.HTTP="http",nt.HTTPS="https"})(EndpointURLScheme||(EndpointURLScheme={}));var AlgorithmId;(function(nt){nt.MD5="md5",nt.CRC32="crc32",nt.CRC32C="crc32c",nt.SHA1="sha1",nt.SHA256="sha256"})(AlgorithmId||(AlgorithmId={}));var FieldPosition;(function(nt){nt[nt.HEADER=0]="HEADER",nt[nt.TRAILER=1]="TRAILER"})(FieldPosition||(FieldPosition={}));const SMITHY_CONTEXT_KEY="__smithy_context";var IniSectionType;(function(nt){nt.PROFILE="profile",nt.SSO_SESSION="sso-session",nt.SERVICES="services"})(IniSectionType||(IniSectionType={}));var RequestHandlerProtocol;(function(nt){nt.HTTP_0_9="http/0.9",nt.HTTP_1_0="http/1.0",nt.TDS_8_0="tds/8.0"})(RequestHandlerProtocol||(RequestHandlerProtocol={}));class HttpRequest{constructor(rt){this.method=rt.method||"GET",this.hostname=rt.hostname||"localhost",this.port=rt.port,this.query=rt.query||{},this.headers=rt.headers||{},this.body=rt.body,this.protocol=rt.protocol?rt.protocol.slice(-1)!==":"?`${rt.protocol}:`:rt.protocol:"https:",this.path=rt.path?rt.path.charAt(0)!=="/"?`/${rt.path}`:rt.path:"/",this.username=rt.username,this.password=rt.password,this.fragment=rt.fragment}static isInstance(rt){if(!rt)return!1;const it=rt;return"method"in it&&"protocol"in it&&"hostname"in it&&"path"in it&&typeof it.query=="object"&&typeof it.headers=="object"}clone(){const rt=new HttpRequest({...this,headers:{...this.headers}});return rt.query&&(rt.query=cloneQuery$1(rt.query)),rt}}function cloneQuery$1(nt){return Object.keys(nt).reduce((rt,it)=>{const st=nt[it];return{...rt,[it]:Array.isArray(st)?[...st]:st}},{})}class HttpResponse{constructor(rt){this.statusCode=rt.statusCode,this.reason=rt.reason,this.headers=rt.headers||{},this.body=rt.body}static isInstance(rt){if(!rt)return!1;const it=rt;return typeof it.statusCode=="number"&&typeof it.headers=="object"}}function addExpectContinueMiddleware(nt){return rt=>async it=>{const{request:st}=it;return HttpRequest.isInstance(st)&&st.body&&nt.runtime==="node"&&(st.headers={...st.headers,Expect:"100-continue"}),rt({...it,request:st})}}const addExpectContinueMiddlewareOptions={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},getAddExpectContinuePlugin=nt=>({applyToStack:rt=>{rt.add(addExpectContinueMiddleware(nt),addExpectContinueMiddlewareOptions)}});function resolveHostHeaderConfig(nt){return nt}const hostHeaderMiddleware=nt=>rt=>async it=>{if(!HttpRequest.isInstance(it.request))return rt(it);const{request:st}=it,{handlerProtocol:lt=""}=nt.requestHandler.metadata||{};if(lt.indexOf("h2")>=0&&!st.headers[":authority"])delete st.headers.host,st.headers[":authority"]=st.hostname+(st.port?":"+st.port:"");else if(!st.headers.host){let ct=st.hostname;st.port!=null&&(ct+=`:${st.port}`),st.headers.host=ct}return rt(it)},hostHeaderMiddlewareOptions={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},getHostHeaderPlugin=nt=>({applyToStack:rt=>{rt.add(hostHeaderMiddleware(nt),hostHeaderMiddlewareOptions)}}),loggerMiddleware=()=>(nt,rt)=>async it=>{var st,lt;try{const ct=await nt(it),{clientName:ut,commandName:dt,logger:ht,dynamoDbDocumentClientOptions:ft={}}=rt,{overrideInputFilterSensitiveLog:pt,overrideOutputFilterSensitiveLog:mt}=ft,gt=pt??rt.inputFilterSensitiveLog,xt=mt??rt.outputFilterSensitiveLog,{$metadata:yt,...vt}=ct.output;return(st=ht==null?void 0:ht.info)==null||st.call(ht,{clientName:ut,commandName:dt,input:gt(it.input),output:xt(vt),metadata:yt}),ct}catch(ct){const{clientName:ut,commandName:dt,logger:ht,dynamoDbDocumentClientOptions:ft={}}=rt,{overrideInputFilterSensitiveLog:pt}=ft,mt=pt??rt.inputFilterSensitiveLog;throw(lt=ht==null?void 0:ht.error)==null||lt.call(ht,{clientName:ut,commandName:dt,input:mt(it.input),error:ct,metadata:ct.$metadata}),ct}},loggerMiddlewareOptions={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},getLoggerPlugin=nt=>({applyToStack:rt=>{rt.add(loggerMiddleware(),loggerMiddlewareOptions)}});var define_process_env_default={};const TRACE_ID_HEADER_NAME="X-Amzn-Trace-Id",ENV_LAMBDA_FUNCTION_NAME="AWS_LAMBDA_FUNCTION_NAME",ENV_TRACE_ID="_X_AMZN_TRACE_ID",recursionDetectionMiddleware=nt=>rt=>async it=>{const{request:st}=it;if(!HttpRequest.isInstance(st)||nt.runtime!=="node"||st.headers.hasOwnProperty(TRACE_ID_HEADER_NAME))return rt(it);const lt=define_process_env_default[ENV_LAMBDA_FUNCTION_NAME],ct=define_process_env_default[ENV_TRACE_ID],ut=dt=>typeof dt=="string"&&dt.length>0;return ut(lt)&&ut(ct)&&(st.headers[TRACE_ID_HEADER_NAME]=ct),rt({...it,request:st})},addRecursionDetectionMiddlewareOptions={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},getRecursionDetectionPlugin=nt=>({applyToStack:rt=>{rt.add(recursionDetectionMiddleware(nt),addRecursionDetectionMiddlewareOptions)}});class NoOpLogger{trace(){}debug(){}info(){}warn(){}error(){}}const getAllAliases=(nt,rt)=>{const it=[];if(nt&&it.push(nt),rt)for(const st of rt)it.push(st);return it},getMiddlewareNameWithAliases=(nt,rt)=>`${nt||"anonymous"}${rt&&rt.length>0?` (a.k.a. ${rt.join(",")})`:""}`,constructStack=()=>{let nt=[],rt=[],it=!1;const st=new Set,lt=mt=>mt.sort((gt,xt)=>stepWeights[xt.step]-stepWeights[gt.step]||priorityWeights[xt.priority||"normal"]-priorityWeights[gt.priority||"normal"]),ct=mt=>{let gt=!1;const xt=yt=>{const vt=getAllAliases(yt.name,yt.aliases);if(vt.includes(mt)){gt=!0;for(const St of vt)st.delete(St);return!1}return!0};return nt=nt.filter(xt),rt=rt.filter(xt),gt},ut=mt=>{let gt=!1;const xt=yt=>{if(yt.middleware===mt){gt=!0;for(const vt of getAllAliases(yt.name,yt.aliases))st.delete(vt);return!1}return!0};return nt=nt.filter(xt),rt=rt.filter(xt),gt},dt=mt=>{var gt;return nt.forEach(xt=>{mt.add(xt.middleware,{...xt})}),rt.forEach(xt=>{mt.addRelativeTo(xt.middleware,{...xt})}),(gt=mt.identifyOnResolve)==null||gt.call(mt,pt.identifyOnResolve()),mt},ht=mt=>{const gt=[];return mt.before.forEach(xt=>{xt.before.length===0&&xt.after.length===0?gt.push(xt):gt.push(...ht(xt))}),gt.push(mt),mt.after.reverse().forEach(xt=>{xt.before.length===0&&xt.after.length===0?gt.push(xt):gt.push(...ht(xt))}),gt},ft=(mt=!1)=>{const gt=[],xt=[],yt={};return nt.forEach(St=>{const wt={...St,before:[],after:[]};for(const Et of getAllAliases(wt.name,wt.aliases))yt[Et]=wt;gt.push(wt)}),rt.forEach(St=>{const wt={...St,before:[],after:[]};for(const Et of getAllAliases(wt.name,wt.aliases))yt[Et]=wt;xt.push(wt)}),xt.forEach(St=>{if(St.toMiddleware){const wt=yt[St.toMiddleware];if(wt===void 0){if(mt)return;throw new Error(`${St.toMiddleware} is not found when adding ${getMiddlewareNameWithAliases(St.name,St.aliases)} middleware ${St.relation} ${St.toMiddleware}`)}St.relation==="after"&&wt.after.push(St),St.relation==="before"&&wt.before.push(St)}}),lt(gt).map(ht).reduce((St,wt)=>(St.push(...wt),St),[])},pt={add:(mt,gt={})=>{const{name:xt,override:yt,aliases:vt}=gt,St={step:"initialize",priority:"normal",middleware:mt,...gt},wt=getAllAliases(xt,vt);if(wt.length>0){if(wt.some(Et=>st.has(Et))){if(!yt)throw new Error(`Duplicate middleware name '${getMiddlewareNameWithAliases(xt,vt)}'`);for(const Et of wt){const Rt=nt.findIndex(It=>{var At;return It.name===Et||((At=It.aliases)==null?void 0:At.some(Dt=>Dt===Et))});if(Rt===-1)continue;const Tt=nt[Rt];if(Tt.step!==St.step||St.priority!==Tt.priority)throw new Error(`"${getMiddlewareNameWithAliases(Tt.name,Tt.aliases)}" middleware with ${Tt.priority} priority in ${Tt.step} step cannot be overridden by "${getMiddlewareNameWithAliases(xt,vt)}" middleware with ${St.priority} priority in ${St.step} step.`);nt.splice(Rt,1)}}for(const Et of wt)st.add(Et)}nt.push(St)},addRelativeTo:(mt,gt)=>{const{name:xt,override:yt,aliases:vt}=gt,St={middleware:mt,...gt},wt=getAllAliases(xt,vt);if(wt.length>0){if(wt.some(Et=>st.has(Et))){if(!yt)throw new Error(`Duplicate middleware name '${getMiddlewareNameWithAliases(xt,vt)}'`);for(const Et of wt){const Rt=rt.findIndex(It=>{var At;return It.name===Et||((At=It.aliases)==null?void 0:At.some(Dt=>Dt===Et))});if(Rt===-1)continue;const Tt=rt[Rt];if(Tt.toMiddleware!==St.toMiddleware||Tt.relation!==St.relation)throw new Error(`"${getMiddlewareNameWithAliases(Tt.name,Tt.aliases)}" middleware ${Tt.relation} "${Tt.toMiddleware}" middleware cannot be overridden by "${getMiddlewareNameWithAliases(xt,vt)}" middleware ${St.relation} "${St.toMiddleware}" middleware.`);rt.splice(Rt,1)}}for(const Et of wt)st.add(Et)}rt.push(St)},clone:()=>dt(constructStack()),use:mt=>{mt.applyToStack(pt)},remove:mt=>typeof mt=="string"?ct(mt):ut(mt),removeByTag:mt=>{let gt=!1;const xt=yt=>{const{tags:vt,name:St,aliases:wt}=yt;if(vt&&vt.includes(mt)){const Et=getAllAliases(St,wt);for(const Rt of Et)st.delete(Rt);return gt=!0,!1}return!0};return nt=nt.filter(xt),rt=rt.filter(xt),gt},concat:mt=>{var xt;const gt=dt(constructStack());return gt.use(mt),gt.identifyOnResolve(it||gt.identifyOnResolve()||(((xt=mt.identifyOnResolve)==null?void 0:xt.call(mt))??!1)),gt},applyToStack:dt,identify:()=>ft(!0).map(mt=>{const gt=mt.step??mt.relation+" "+mt.toMiddleware;return getMiddlewareNameWithAliases(mt.name,mt.aliases)+" - "+gt}),identifyOnResolve(mt){return typeof mt=="boolean"&&(it=mt),it},resolve:(mt,gt)=>{for(const xt of ft().map(yt=>yt.middleware).reverse())mt=xt(mt,gt);return it&&console.log(pt.identify()),mt}};return pt},stepWeights={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},priorityWeights={high:3,normal:2,low:1};class Client{constructor(rt){this.middlewareStack=constructStack(),this.config=rt}send(rt,it,st){const lt=typeof it!="function"?it:void 0,ct=typeof it=="function"?it:st,ut=rt.resolveMiddleware(this.middlewareStack,this.config,lt);if(ct)ut(rt).then(dt=>ct(null,dt.output),dt=>ct(dt)).catch(()=>{});else return ut(rt).then(dt=>dt.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}const alphabetByEncoding={},alphabetByValue=new Array(64);for(let nt=0,rt=65,it=90;nt+rt<=it;nt++){const st=String.fromCharCode(nt+rt);alphabetByEncoding[st]=nt,alphabetByValue[nt]=st}for(let nt=0,rt=97,it=122;nt+rt<=it;nt++){const st=String.fromCharCode(nt+rt),lt=nt+26;alphabetByEncoding[st]=lt,alphabetByValue[lt]=st}for(let nt=0;nt<10;nt++){alphabetByEncoding[nt.toString(10)]=nt+52;const rt=nt.toString(10),it=nt+52;alphabetByEncoding[rt]=it,alphabetByValue[it]=rt}alphabetByEncoding["+"]=62;alphabetByValue[62]="+";alphabetByEncoding["/"]=63;alphabetByValue[63]="/";const bitsPerLetter=6,bitsPerByte=8,maxLetterValue=63,fromBase64=nt=>{let rt=nt.length/4*3;nt.slice(-2)==="=="?rt-=2:nt.slice(-1)==="="&&rt--;const it=new ArrayBuffer(rt),st=new DataView(it);for(let lt=0;lt<nt.length;lt+=4){let ct=0,ut=0;for(let ft=lt,pt=lt+3;ft<=pt;ft++)if(nt[ft]!=="="){if(!(nt[ft]in alphabetByEncoding))throw new TypeError(`Invalid character ${nt[ft]} in base64 string.`);ct|=alphabetByEncoding[nt[ft]]<<(pt-ft)*bitsPerLetter,ut+=bitsPerLetter}else ct>>=bitsPerLetter;const dt=lt/4*3;ct>>=ut%bitsPerByte;const ht=Math.floor(ut/bitsPerByte);for(let ft=0;ft<ht;ft++){const pt=(ht-ft-1)*bitsPerByte;st.setUint8(dt+ft,(ct&255<<pt)>>pt)}}return new Uint8Array(it)};function toBase64(nt){let rt="";for(let it=0;it<nt.length;it+=3){let st=0,lt=0;for(let ut=it,dt=Math.min(it+3,nt.length);ut<dt;ut++)st|=nt[ut]<<(dt-ut-1)*bitsPerByte,lt+=bitsPerByte;const ct=Math.ceil(lt/bitsPerLetter);st<<=ct*bitsPerLetter-lt;for(let ut=1;ut<=ct;ut++){const dt=(ct-ut)*bitsPerLetter;rt+=alphabetByValue[(st&maxLetterValue<<dt)>>dt]}rt+="==".slice(0,4-ct)}return rt}const fromUtf8$3=nt=>new TextEncoder().encode(nt),toUint8Array=nt=>typeof nt=="string"?fromUtf8$3(nt):ArrayBuffer.isView(nt)?new Uint8Array(nt.buffer,nt.byteOffset,nt.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(nt),toUtf8$3=nt=>new TextDecoder("utf-8").decode(nt);function transformToString(nt,rt="utf-8"){return rt==="base64"?toBase64(nt):toUtf8$3(nt)}function transformFromString(nt,rt){return rt==="base64"?Uint8ArrayBlobAdapter.mutate(fromBase64(nt)):Uint8ArrayBlobAdapter.mutate(fromUtf8$3(nt))}class Uint8ArrayBlobAdapter extends Uint8Array{static fromString(rt,it="utf-8"){switch(typeof rt){case"string":return transformFromString(rt,it);default:throw new Error(`Unsupported conversion from ${typeof rt} to Uint8ArrayBlobAdapter.`)}}static mutate(rt){return Object.setPrototypeOf(rt,Uint8ArrayBlobAdapter.prototype),rt}transformToString(rt="utf-8"){return transformToString(this,rt)}}const getAwsChunkedEncodingStream=(nt,rt)=>{const{base64Encoder:it,bodyLengthChecker:st,checksumAlgorithmFn:lt,checksumLocationName:ct,streamHasher:ut}=rt,dt=it!==void 0&&st!==void 0&&lt!==void 0&&ct!==void 0&&ut!==void 0,ht=dt?ut(lt,nt):void 0,ft=nt.getReader();return new ReadableStream({async pull(pt){const{value:mt,done:gt}=await ft.read();if(gt){if(pt.enqueue(`0\r
`),dt){const xt=it(await ht);pt.enqueue(`${ct}:${xt}\r
`),pt.enqueue(`\r
`)}pt.close()}else pt.enqueue(`${(st(mt)||0).toString(16)}\r
${mt}\r
`)}})},escapeUri=nt=>encodeURIComponent(nt).replace(/[!'()*]/g,hexEncode),hexEncode=nt=>`%${nt.charCodeAt(0).toString(16).toUpperCase()}`;function buildQueryString(nt){const rt=[];for(let it of Object.keys(nt).sort()){const st=nt[it];if(it=escapeUri(it),Array.isArray(st))for(let lt=0,ct=st.length;lt<ct;lt++)rt.push(`${it}=${escapeUri(st[lt])}`);else{let lt=it;(st||typeof st=="string")&&(lt+=`=${escapeUri(st)}`),rt.push(lt)}}return rt.join("&")}function requestTimeout(nt=0){return new Promise((rt,it)=>{nt&&setTimeout(()=>{const st=new Error(`Request did not complete within ${nt} ms`);st.name="TimeoutError",it(st)},nt)})}const keepAliveSupport={supported:typeof Request<"u"&&"keepalive"in new Request("https://[::1]")};class FetchHttpHandler{static create(rt){return typeof(rt==null?void 0:rt.handle)=="function"?rt:new FetchHttpHandler(rt)}constructor(rt){typeof rt=="function"?this.configProvider=rt().then(it=>it||{}):(this.config=rt??{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(rt,{abortSignal:it}={}){this.config||(this.config=await this.configProvider);const st=this.config.requestTimeout,lt=this.config.keepAlive===!0;if(it!=null&&it.aborted){const vt=new Error("Request aborted");return vt.name="AbortError",Promise.reject(vt)}let ct=rt.path;const ut=buildQueryString(rt.query||{});ut&&(ct+=`?${ut}`),rt.fragment&&(ct+=`#${rt.fragment}`);let dt="";if(rt.username!=null||rt.password!=null){const vt=rt.username??"",St=rt.password??"";dt=`${vt}:${St}@`}const{port:ht,method:ft}=rt,pt=`${rt.protocol}//${dt}${rt.hostname}${ht?`:${ht}`:""}${ct}`,gt={body:ft==="GET"||ft==="HEAD"?void 0:rt.body,headers:new Headers(rt.headers),method:ft};typeof AbortController<"u"&&(gt.signal=it),keepAliveSupport.supported&&(gt.keepalive=lt);const xt=new Request(pt,gt),yt=[fetch(xt).then(vt=>{const St=vt.headers,wt={};for(const Rt of St.entries())wt[Rt[0]]=Rt[1];return vt.body!=null?{response:new HttpResponse({headers:wt,reason:vt.statusText,statusCode:vt.status,body:vt.body})}:vt.blob().then(Rt=>({response:new HttpResponse({headers:wt,reason:vt.statusText,statusCode:vt.status,body:Rt})}))}),requestTimeout(st)];return it&&yt.push(new Promise((vt,St)=>{it.onabort=()=>{const wt=new Error("Request aborted");wt.name="AbortError",St(wt)}})),Promise.race(yt)}updateHttpClientConfig(rt,it){this.config=void 0,this.configProvider=this.configProvider.then(st=>(st[rt]=it,st))}httpHandlerConfigs(){return this.config??{}}}const streamCollector=nt=>typeof Blob=="function"&&nt instanceof Blob?collectBlob(nt):collectStream(nt);async function collectBlob(nt){const rt=await readToBase64(nt),it=fromBase64(rt);return new Uint8Array(it)}async function collectStream(nt){let rt=new Uint8Array(0);const it=nt.getReader();let st=!1;for(;!st;){const{done:lt,value:ct}=await it.read();if(ct){const ut=rt;rt=new Uint8Array(ut.length+ct.length),rt.set(ut),rt.set(ct,ut.length)}st=lt}return rt}function readToBase64(nt){return new Promise((rt,it)=>{const st=new FileReader;st.onloadend=()=>{if(st.readyState!==2)return it(new Error("Reader aborted too early"));const lt=st.result??"",ct=lt.indexOf(","),ut=ct>-1?ct+1:lt.length;rt(lt.substring(ut))},st.onabort=()=>it(new Error("Read aborted")),st.onerror=()=>it(st.error),st.readAsDataURL(nt)})}const SHORT_TO_HEX={},HEX_TO_SHORT={};for(let nt=0;nt<256;nt++){let rt=nt.toString(16).toLowerCase();rt.length===1&&(rt=`0${rt}`),SHORT_TO_HEX[nt]=rt,HEX_TO_SHORT[rt]=nt}function fromHex(nt){if(nt.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const rt=new Uint8Array(nt.length/2);for(let it=0;it<nt.length;it+=2){const st=nt.slice(it,it+2).toLowerCase();if(st in HEX_TO_SHORT)rt[it/2]=HEX_TO_SHORT[st];else throw new Error(`Cannot decode unrecognized sequence ${st} as hexadecimal`)}return rt}function toHex(nt){let rt="";for(let it=0;it<nt.byteLength;it++)rt+=SHORT_TO_HEX[nt[it]];return rt}const ERR_MSG_STREAM_HAS_BEEN_TRANSFORMED="The stream has already been transformed.",sdkStreamMixin=nt=>{var lt,ct;if(!isBlobInstance(nt)&&!isReadableStreamInstance(nt)){const ut=((ct=(lt=nt==null?void 0:nt.__proto__)==null?void 0:lt.constructor)==null?void 0:ct.name)||nt;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${ut}`)}let rt=!1;const it=async()=>{if(rt)throw new Error(ERR_MSG_STREAM_HAS_BEEN_TRANSFORMED);return rt=!0,await streamCollector(nt)},st=ut=>{if(typeof ut.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return ut.stream()};return Object.assign(nt,{transformToByteArray:it,transformToString:async ut=>{const dt=await it();if(ut==="base64")return toBase64(dt);if(ut==="hex")return toHex(dt);if(ut===void 0||ut==="utf8"||ut==="utf-8")return toUtf8$3(dt);if(typeof TextDecoder=="function")return new TextDecoder(ut).decode(dt);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(rt)throw new Error(ERR_MSG_STREAM_HAS_BEEN_TRANSFORMED);if(rt=!0,isBlobInstance(nt))return st(nt);if(isReadableStreamInstance(nt))return nt;throw new Error(`Cannot transform payload to web stream, got ${nt}`)}})},isBlobInstance=nt=>typeof Blob=="function"&&nt instanceof Blob,isReadableStreamInstance=nt=>typeof ReadableStream=="function"&&nt instanceof ReadableStream,collectBody=async(nt=new Uint8Array,rt)=>{if(nt instanceof Uint8Array)return Uint8ArrayBlobAdapter.mutate(nt);if(!nt)return Uint8ArrayBlobAdapter.mutate(new Uint8Array);const it=rt.streamCollector(nt);return Uint8ArrayBlobAdapter.mutate(await it)};class Command{constructor(){this.middlewareStack=constructStack()}static classBuilder(){return new ClassBuilder}resolveMiddlewareWithContext(rt,it,st,{middlewareFn:lt,clientName:ct,commandName:ut,inputFilterSensitiveLog:dt,outputFilterSensitiveLog:ht,smithyContext:ft,additionalContext:pt,CommandCtor:mt}){for(const St of lt.bind(this)(mt,rt,it,st))this.middlewareStack.use(St);const gt=rt.concat(this.middlewareStack),{logger:xt}=it,yt={logger:xt,clientName:ct,commandName:ut,inputFilterSensitiveLog:dt,outputFilterSensitiveLog:ht,[SMITHY_CONTEXT_KEY]:{...ft},...pt},{requestHandler:vt}=it;return gt.resolve(St=>vt.handle(St.request,st||{}),yt)}}class ClassBuilder{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=rt=>rt,this._outputFilterSensitiveLog=rt=>rt,this._serializer=null,this._deserializer=null}init(rt){this._init=rt}ep(rt){return this._ep=rt,this}m(rt){return this._middlewareFn=rt,this}s(rt,it,st={}){return this._smithyContext={service:rt,operation:it,...st},this}c(rt={}){return this._additionalContext=rt,this}n(rt,it){return this._clientName=rt,this._commandName=it,this}f(rt=st=>st,it=st=>st){return this._inputFilterSensitiveLog=rt,this._outputFilterSensitiveLog=it,this}ser(rt){return this._serializer=rt,this}de(rt){return this._deserializer=rt,this}build(){const rt=this;let it;return it=class extends Command{static getEndpointParameterInstructions(){return rt._ep}constructor(st){super(),this.input=st,this.serialize=rt._serializer,this.deserialize=rt._deserializer,rt._init(this)}resolveMiddleware(st,lt,ct){return this.resolveMiddlewareWithContext(st,lt,ct,{CommandCtor:it,middlewareFn:rt._middlewareFn,clientName:rt._clientName,commandName:rt._commandName,inputFilterSensitiveLog:rt._inputFilterSensitiveLog,outputFilterSensitiveLog:rt._outputFilterSensitiveLog,smithyContext:rt._smithyContext,additionalContext:rt._additionalContext})}}}}const SENSITIVE_STRING="***SensitiveInformation***",parseBoolean=nt=>{switch(nt){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${nt}"`)}},expectNumber=nt=>{if(nt!=null){if(typeof nt=="string"){const rt=parseFloat(nt);if(!Number.isNaN(rt))return String(rt)!==String(nt)&&logger.warn(stackTraceWarning(`Expected number but observed string: ${nt}`)),rt}if(typeof nt=="number")return nt;throw new TypeError(`Expected number, got ${typeof nt}: ${nt}`)}},MAX_FLOAT=Math.ceil(2**127*(2-2**-23)),expectFloat32=nt=>{const rt=expectNumber(nt);if(rt!==void 0&&!Number.isNaN(rt)&&rt!==1/0&&rt!==-1/0&&Math.abs(rt)>MAX_FLOAT)throw new TypeError(`Expected 32-bit float, got ${nt}`);return rt},expectLong=nt=>{if(nt!=null){if(Number.isInteger(nt)&&!Number.isNaN(nt))return nt;throw new TypeError(`Expected integer, got ${typeof nt}: ${nt}`)}},expectShort=nt=>expectSizedInt(nt,16),expectByte=nt=>expectSizedInt(nt,8),expectSizedInt=(nt,rt)=>{const it=expectLong(nt);if(it!==void 0&&castInt(it,rt)!==it)throw new TypeError(`Expected ${rt}-bit integer, got ${nt}`);return it},castInt=(nt,rt)=>{switch(rt){case 32:return Int32Array.of(nt)[0];case 16:return Int16Array.of(nt)[0];case 8:return Int8Array.of(nt)[0]}},expectNonNull=(nt,rt)=>{if(nt==null)throw rt?new TypeError(`Expected a non-null value for ${rt}`):new TypeError("Expected a non-null value");return nt},expectObject=nt=>{if(nt==null)return;if(typeof nt=="object"&&!Array.isArray(nt))return nt;const rt=Array.isArray(nt)?"array":typeof nt;throw new TypeError(`Expected object, got ${rt}: ${nt}`)},expectString=nt=>{if(nt!=null){if(typeof nt=="string")return nt;if(["boolean","number","bigint"].includes(typeof nt))return logger.warn(stackTraceWarning(`Expected string, got ${typeof nt}: ${nt}`)),String(nt);throw new TypeError(`Expected string, got ${typeof nt}: ${nt}`)}},strictParseFloat32=nt=>expectFloat32(typeof nt=="string"?parseNumber(nt):nt),NUMBER_REGEX=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,parseNumber=nt=>{const rt=nt.match(NUMBER_REGEX);if(rt===null||rt[0].length!==nt.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(nt)},strictParseShort=nt=>expectShort(typeof nt=="string"?parseNumber(nt):nt),strictParseByte=nt=>expectByte(typeof nt=="string"?parseNumber(nt):nt),stackTraceWarning=nt=>String(new TypeError(nt).stack||nt).split(`
`).slice(0,5).filter(rt=>!rt.includes("stackTraceWarning")).join(`
`),logger={warn:console.warn},DAYS=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],MONTHS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function dateToUtcString(nt){const rt=nt.getUTCFullYear(),it=nt.getUTCMonth(),st=nt.getUTCDay(),lt=nt.getUTCDate(),ct=nt.getUTCHours(),ut=nt.getUTCMinutes(),dt=nt.getUTCSeconds(),ht=lt<10?`0${lt}`:`${lt}`,ft=ct<10?`0${ct}`:`${ct}`,pt=ut<10?`0${ut}`:`${ut}`,mt=dt<10?`0${dt}`:`${dt}`;return`${DAYS[st]}, ${ht} ${MONTHS[it]} ${rt} ${ft}:${pt}:${mt} GMT`}const RFC3339_WITH_OFFSET=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),parseRfc3339DateTimeWithOffset=nt=>{if(nt==null)return;if(typeof nt!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const rt=RFC3339_WITH_OFFSET.exec(nt);if(!rt)throw new TypeError("Invalid RFC-3339 date-time value");const[it,st,lt,ct,ut,dt,ht,ft,pt]=rt,mt=strictParseShort(stripLeadingZeroes(st)),gt=parseDateValue(lt,"month",1,12),xt=parseDateValue(ct,"day",1,31),yt=buildDate(mt,gt,xt,{hours:ut,minutes:dt,seconds:ht,fractionalMilliseconds:ft});return pt.toUpperCase()!="Z"&&yt.setTime(yt.getTime()-parseOffsetToMilliseconds(pt)),yt},buildDate=(nt,rt,it,st)=>{const lt=rt-1;return validateDayOfMonth(nt,lt,it),new Date(Date.UTC(nt,lt,it,parseDateValue(st.hours,"hour",0,23),parseDateValue(st.minutes,"minute",0,59),parseDateValue(st.seconds,"seconds",0,60),parseMilliseconds(st.fractionalMilliseconds)))},DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],validateDayOfMonth=(nt,rt,it)=>{let st=DAYS_IN_MONTH[rt];if(rt===1&&isLeapYear(nt)&&(st=29),it>st)throw new TypeError(`Invalid day for ${MONTHS[rt]} in ${nt}: ${it}`)},isLeapYear=nt=>nt%4===0&&(nt%100!==0||nt%400===0),parseDateValue=(nt,rt,it,st)=>{const lt=strictParseByte(stripLeadingZeroes(nt));if(lt<it||lt>st)throw new TypeError(`${rt} must be between ${it} and ${st}, inclusive`);return lt},parseMilliseconds=nt=>nt==null?0:strictParseFloat32("0."+nt)*1e3,parseOffsetToMilliseconds=nt=>{const rt=nt[0];let it=1;if(rt=="+")it=1;else if(rt=="-")it=-1;else throw new TypeError(`Offset direction, ${rt}, must be "+" or "-"`);const st=Number(nt.substring(1,3)),lt=Number(nt.substring(4,6));return it*(st*60+lt)*60*1e3},stripLeadingZeroes=nt=>{let rt=0;for(;rt<nt.length-1&&nt.charAt(rt)==="0";)rt++;return rt===0?nt:nt.slice(rt)};class ServiceException extends Error{constructor(rt){super(rt.message),Object.setPrototypeOf(this,ServiceException.prototype),this.name=rt.name,this.$fault=rt.$fault,this.$metadata=rt.$metadata}}const decorateServiceException=(nt,rt={})=>{Object.entries(rt).filter(([,st])=>st!==void 0).forEach(([st,lt])=>{(nt[st]==null||nt[st]==="")&&(nt[st]=lt)});const it=nt.message||nt.Message||"UnknownError";return nt.message=it,delete nt.Message,nt},throwDefaultError$1=({output:nt,parsedBody:rt,exceptionCtor:it,errorCode:st})=>{const lt=deserializeMetadata$1(nt),ct=lt.httpStatusCode?lt.httpStatusCode+"":void 0,ut=new it({name:(rt==null?void 0:rt.code)||(rt==null?void 0:rt.Code)||st||ct||"UnknownError",$fault:"client",$metadata:lt});throw decorateServiceException(ut,rt)},withBaseException=nt=>({output:rt,parsedBody:it,errorCode:st})=>{throwDefaultError$1({output:rt,parsedBody:it,exceptionCtor:nt,errorCode:st})},deserializeMetadata$1=nt=>({httpStatusCode:nt.statusCode,requestId:nt.headers["x-amzn-requestid"]??nt.headers["x-amzn-request-id"]??nt.headers["x-amz-request-id"],extendedRequestId:nt.headers["x-amz-id-2"],cfId:nt.headers["x-amz-cf-id"]}),loadConfigsForDefaultMode=nt=>{switch(nt){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},getChecksumConfiguration=nt=>{const rt=[];for(const it in AlgorithmId){const st=AlgorithmId[it];nt[st]!==void 0&&rt.push({algorithmId:()=>st,checksumConstructor:()=>nt[st]})}return{_checksumAlgorithms:rt,addChecksumAlgorithm(it){this._checksumAlgorithms.push(it)},checksumAlgorithms(){return this._checksumAlgorithms}}},resolveChecksumRuntimeConfig=nt=>{const rt={};return nt.checksumAlgorithms().forEach(it=>{rt[it.algorithmId()]=it.checksumConstructor()}),rt},getRetryConfiguration=nt=>{let rt=nt.retryStrategy;return{setRetryStrategy(it){rt=it},retryStrategy(){return rt}}},resolveRetryRuntimeConfig=nt=>{const rt={};return rt.retryStrategy=nt.retryStrategy(),rt},getDefaultExtensionConfiguration=nt=>({...getChecksumConfiguration(nt),...getRetryConfiguration(nt)}),resolveDefaultRuntimeConfig=nt=>({...resolveChecksumRuntimeConfig(nt),...resolveRetryRuntimeConfig(nt)});function extendedEncodeURIComponent(nt){return encodeURIComponent(nt).replace(/[!'()*]/g,function(rt){return"%"+rt.charCodeAt(0).toString(16).toUpperCase()})}const getValueFromTextNode=nt=>{const rt="#text";for(const it in nt)nt.hasOwnProperty(it)&&nt[it][rt]!==void 0?nt[it]=nt[it][rt]:typeof nt[it]=="object"&&nt[it]!==null&&(nt[it]=getValueFromTextNode(nt[it]));return nt},StringWrapper=function(){const nt=Object.getPrototypeOf(this).constructor,rt=Function.bind.apply(String,[null,...arguments]),it=new rt;return Object.setPrototypeOf(it,nt.prototype),it};StringWrapper.prototype=Object.create(String.prototype,{constructor:{value:StringWrapper,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(StringWrapper,String);function map$2(nt,rt,it){let st,lt,ct;if(typeof rt>"u"&&typeof it>"u")st={},ct=nt;else{if(st=nt,typeof rt=="function")return lt=rt,ct=it,mapWithFilter(st,lt,ct);ct=rt}for(const ut of Object.keys(ct)){if(!Array.isArray(ct[ut])){st[ut]=ct[ut];continue}applyInstruction(st,null,ct,ut)}return st}const mapWithFilter=(nt,rt,it)=>map$2(nt,Object.entries(it).reduce((st,[lt,ct])=>(Array.isArray(ct)?st[lt]=ct:typeof ct=="function"?st[lt]=[rt,ct()]:st[lt]=[rt,ct],st),{})),applyInstruction=(nt,rt,it,st)=>{if(rt!==null){let ut=it[st];typeof ut=="function"&&(ut=[,ut]);const[dt=nonNullish,ht=pass,ft=st]=ut;(typeof dt=="function"&&dt(rt[ft])||typeof dt!="function"&&dt)&&(nt[st]=ht(rt[ft]));return}let[lt,ct]=it[st];if(typeof ct=="function"){let ut;const dt=lt===void 0&&(ut=ct())!=null,ht=typeof lt=="function"&&!!lt(void 0)||typeof lt!="function"&&!!lt;dt?nt[st]=ut:ht&&(nt[st]=ct())}else{const ut=lt===void 0&&ct!=null,dt=typeof lt=="function"&&!!lt(ct)||typeof lt!="function"&&!!lt;(ut||dt)&&(nt[st]=ct)}},nonNullish=nt=>nt!=null,pass=nt=>nt,resolvedPath=(nt,rt,it,st,lt,ct)=>{if(rt!=null&&rt[it]!==void 0){const ut=st();if(ut.length<=0)throw new Error("Empty value provided for input HTTP label: "+it+".");nt=nt.replace(lt,ct?ut.split("/").map(dt=>extendedEncodeURIComponent(dt)).join("/"):extendedEncodeURIComponent(ut))}else throw new Error("No value provided for input HTTP label: "+it+".");return nt},CONTENT_LENGTH_HEADER$1="content-length";function checkContentLengthHeader(){return(nt,rt)=>async it=>{var lt;const{request:st}=it;if(HttpRequest.isInstance(st)&&!(CONTENT_LENGTH_HEADER$1 in st.headers)){const ct="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof((lt=rt==null?void 0:rt.logger)==null?void 0:lt.warn)=="function"&&!(rt.logger instanceof NoOpLogger)?rt.logger.warn(ct):console.warn(ct)}return nt({...it})}}const checkContentLengthHeaderMiddlewareOptions={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},getCheckContentLengthHeaderPlugin=nt=>({applyToStack:rt=>{rt.add(checkContentLengthHeader(),checkContentLengthHeaderMiddlewareOptions)}}),regionRedirectEndpointMiddleware=nt=>(rt,it)=>async st=>{const lt=await nt.region(),ct=nt.region;it.__s3RegionRedirect&&(nt.region=async()=>(nt.region=ct,it.__s3RegionRedirect));const ut=await rt(st);if(it.__s3RegionRedirect){const dt=await nt.region();if(lt!==dt)throw new Error("Region was not restored following S3 region redirect.")}return ut},regionRedirectEndpointMiddlewareOptions={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function regionRedirectMiddleware(nt){return(rt,it)=>async st=>{var lt,ct;try{return await rt(st)}catch(ut){if(nt.followRegionRedirects&&((lt=ut==null?void 0:ut.$metadata)==null?void 0:lt.httpStatusCode)===301){try{const dt=ut.$response.headers["x-amz-bucket-region"];(ct=it.logger)==null||ct.debug(`Redirecting from ${await nt.region()} to ${dt}`),it.__s3RegionRedirect=dt}catch(dt){throw new Error("Region redirect failed: "+dt)}return rt(st)}else throw ut}}}const regionRedirectMiddlewareOptions={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},getRegionRedirectMiddlewarePlugin=nt=>({applyToStack:rt=>{rt.add(regionRedirectMiddleware(nt),regionRedirectMiddlewareOptions),rt.addRelativeTo(regionRedirectEndpointMiddleware(nt),regionRedirectEndpointMiddlewareOptions)}});class S3ExpressIdentityCache{constructor(rt={}){this.data=rt,this.lastPurgeTime=Date.now()}get(rt){const it=this.data[rt];if(it)return it}set(rt,it){return this.data[rt]=it,it}delete(rt){delete this.data[rt]}async purgeExpired(){const rt=Date.now();if(!(this.lastPurgeTime+S3ExpressIdentityCache.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>rt))for(const it in this.data){const st=this.data[it];if(!st.isRefreshing){const lt=await st.identity;lt.expiration&&lt.expiration.getTime()<rt&&delete this.data[it]}}}}S3ExpressIdentityCache.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=3e4;class S3ExpressIdentityCacheEntry{constructor(rt,it=!1,st=Date.now()){this._identity=rt,this.isRefreshing=it,this.accessed=st}get identity(){return this.accessed=Date.now(),this._identity}}class S3ExpressIdentityProviderImpl{constructor(rt,it=new S3ExpressIdentityCache){this.createSessionFn=rt,this.cache=it}async getS3ExpressIdentity(rt,it){const st=it.Bucket,{cache:lt}=this,ct=lt.get(st);return ct?ct.identity.then(ut=>{var ft,pt;return(((ft=ut.expiration)==null?void 0:ft.getTime())??0)<Date.now()?lt.set(st,new S3ExpressIdentityCacheEntry(this.getIdentity(st))).identity:((((pt=ut.expiration)==null?void 0:pt.getTime())??0)<Date.now()+S3ExpressIdentityProviderImpl.REFRESH_WINDOW_MS&&!ct.isRefreshing&&(ct.isRefreshing=!0,this.getIdentity(st).then(mt=>{lt.set(st,new S3ExpressIdentityCacheEntry(Promise.resolve(mt)))})),ut)}):lt.set(st,new S3ExpressIdentityCacheEntry(this.getIdentity(st))).identity}async getIdentity(rt){var lt,ct;await this.cache.purgeExpired().catch(ut=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+ut)});const it=await this.createSessionFn(rt);if(!((lt=it.Credentials)!=null&&lt.AccessKeyId)||!((ct=it.Credentials)!=null&&ct.SecretAccessKey))throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:it.Credentials.AccessKeyId,secretAccessKey:it.Credentials.SecretAccessKey,sessionToken:it.Credentials.SessionToken,expiration:it.Credentials.Expiration?new Date(it.Credentials.Expiration):void 0}}}S3ExpressIdentityProviderImpl.REFRESH_WINDOW_MS=6e4;var build$7={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$6=function(nt,rt){return extendStatics$6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,st){it.__proto__=st}||function(it,st){for(var lt in st)st.hasOwnProperty(lt)&&(it[lt]=st[lt])},extendStatics$6(nt,rt)};function __extends$6(nt,rt){extendStatics$6(nt,rt);function it(){this.constructor=nt}nt.prototype=rt===null?Object.create(rt):(it.prototype=rt.prototype,new it)}var __assign$6=function(){return __assign$6=Object.assign||function(rt){for(var it,st=1,lt=arguments.length;st<lt;st++){it=arguments[st];for(var ct in it)Object.prototype.hasOwnProperty.call(it,ct)&&(rt[ct]=it[ct])}return rt},__assign$6.apply(this,arguments)};function __rest$6(nt,rt){var it={};for(var st in nt)Object.prototype.hasOwnProperty.call(nt,st)&&rt.indexOf(st)<0&&(it[st]=nt[st]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,st=Object.getOwnPropertySymbols(nt);lt<st.length;lt++)rt.indexOf(st[lt])<0&&Object.prototype.propertyIsEnumerable.call(nt,st[lt])&&(it[st[lt]]=nt[st[lt]]);return it}function __decorate$6(nt,rt,it,st){var lt=arguments.length,ct=lt<3?rt:st===null?st=Object.getOwnPropertyDescriptor(rt,it):st,ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ct=Reflect.decorate(nt,rt,it,st);else for(var dt=nt.length-1;dt>=0;dt--)(ut=nt[dt])&&(ct=(lt<3?ut(ct):lt>3?ut(rt,it,ct):ut(rt,it))||ct);return lt>3&&ct&&Object.defineProperty(rt,it,ct),ct}function __param$6(nt,rt){return function(it,st){rt(it,st,nt)}}function __metadata$6(nt,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,rt)}function __awaiter$6(nt,rt,it,st){function lt(ct){return ct instanceof it?ct:new it(function(ut){ut(ct)})}return new(it||(it=Promise))(function(ct,ut){function dt(pt){try{ft(st.next(pt))}catch(mt){ut(mt)}}function ht(pt){try{ft(st.throw(pt))}catch(mt){ut(mt)}}function ft(pt){pt.done?ct(pt.value):lt(pt.value).then(dt,ht)}ft((st=st.apply(nt,rt||[])).next())})}function __generator$6(nt,rt){var it={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},st,lt,ct,ut;return ut={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function dt(ft){return function(pt){return ht([ft,pt])}}function ht(ft){if(st)throw new TypeError("Generator is already executing.");for(;it;)try{if(st=1,lt&&(ct=ft[0]&2?lt.return:ft[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,ft[1])).done)return ct;switch(lt=0,ct&&(ft=[ft[0]&2,ct.value]),ft[0]){case 0:case 1:ct=ft;break;case 4:return it.label++,{value:ft[1],done:!1};case 5:it.label++,lt=ft[1],ft=[0];continue;case 7:ft=it.ops.pop(),it.trys.pop();continue;default:if(ct=it.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(ft[0]===6||ft[0]===2)){it=0;continue}if(ft[0]===3&&(!ct||ft[1]>ct[0]&&ft[1]<ct[3])){it.label=ft[1];break}if(ft[0]===6&&it.label<ct[1]){it.label=ct[1],ct=ft;break}if(ct&&it.label<ct[2]){it.label=ct[2],it.ops.push(ft);break}ct[2]&&it.ops.pop(),it.trys.pop();continue}ft=rt.call(nt,it)}catch(pt){ft=[6,pt],lt=0}finally{st=ct=0}if(ft[0]&5)throw ft[1];return{value:ft[0]?ft[1]:void 0,done:!0}}}function __createBinding$6(nt,rt,it,st){st===void 0&&(st=it),nt[st]=rt[it]}function __exportStar$6(nt,rt){for(var it in nt)it!=="default"&&!rt.hasOwnProperty(it)&&(rt[it]=nt[it])}function __values$6(nt){var rt=typeof Symbol=="function"&&Symbol.iterator,it=rt&&nt[rt],st=0;if(it)return it.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&st>=nt.length&&(nt=void 0),{value:nt&&nt[st++],done:!nt}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$6(nt,rt){var it=typeof Symbol=="function"&&nt[Symbol.iterator];if(!it)return nt;var st=it.call(nt),lt,ct=[],ut;try{for(;(rt===void 0||rt-- >0)&&!(lt=st.next()).done;)ct.push(lt.value)}catch(dt){ut={error:dt}}finally{try{lt&&!lt.done&&(it=st.return)&&it.call(st)}finally{if(ut)throw ut.error}}return ct}function __spread$6(){for(var nt=[],rt=0;rt<arguments.length;rt++)nt=nt.concat(__read$6(arguments[rt]));return nt}function __spreadArrays$6(){for(var nt=0,rt=0,it=arguments.length;rt<it;rt++)nt+=arguments[rt].length;for(var st=Array(nt),lt=0,rt=0;rt<it;rt++)for(var ct=arguments[rt],ut=0,dt=ct.length;ut<dt;ut++,lt++)st[lt]=ct[ut];return st}function __await$6(nt){return this instanceof __await$6?(this.v=nt,this):new __await$6(nt)}function __asyncGenerator$6(nt,rt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=it.apply(nt,rt||[]),lt,ct=[];return lt={},ut("next"),ut("throw"),ut("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function ut(gt){st[gt]&&(lt[gt]=function(xt){return new Promise(function(yt,vt){ct.push([gt,xt,yt,vt])>1||dt(gt,xt)})})}function dt(gt,xt){try{ht(st[gt](xt))}catch(yt){mt(ct[0][3],yt)}}function ht(gt){gt.value instanceof __await$6?Promise.resolve(gt.value.v).then(ft,pt):mt(ct[0][2],gt)}function ft(gt){dt("next",gt)}function pt(gt){dt("throw",gt)}function mt(gt,xt){gt(xt),ct.shift(),ct.length&&dt(ct[0][0],ct[0][1])}}function __asyncDelegator$6(nt){var rt,it;return rt={},st("next"),st("throw",function(lt){throw lt}),st("return"),rt[Symbol.iterator]=function(){return this},rt;function st(lt,ct){rt[lt]=nt[lt]?function(ut){return(it=!it)?{value:__await$6(nt[lt](ut)),done:lt==="return"}:ct?ct(ut):ut}:ct}}function __asyncValues$6(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=nt[Symbol.asyncIterator],it;return rt?rt.call(nt):(nt=typeof __values$6=="function"?__values$6(nt):nt[Symbol.iterator](),it={},st("next"),st("throw"),st("return"),it[Symbol.asyncIterator]=function(){return this},it);function st(ct){it[ct]=nt[ct]&&function(ut){return new Promise(function(dt,ht){ut=nt[ct](ut),lt(dt,ht,ut.done,ut.value)})}}function lt(ct,ut,dt,ht){Promise.resolve(ht).then(function(ft){ct({value:ft,done:dt})},ut)}}function __makeTemplateObject$6(nt,rt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:rt}):nt.raw=rt,nt}function __importStar$6(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function __importDefault$6(nt){return nt&&nt.__esModule?nt:{default:nt}}function __classPrivateFieldGet$6(nt,rt){if(!rt.has(nt))throw new TypeError("attempted to get private field on non-instance");return rt.get(nt)}function __classPrivateFieldSet$6(nt,rt,it){if(!rt.has(nt))throw new TypeError("attempted to set private field on non-instance");return rt.set(nt,it),it}const tslib_es6$6=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign$6},__asyncDelegator:__asyncDelegator$6,__asyncGenerator:__asyncGenerator$6,__asyncValues:__asyncValues$6,__await:__await$6,__awaiter:__awaiter$6,__classPrivateFieldGet:__classPrivateFieldGet$6,__classPrivateFieldSet:__classPrivateFieldSet$6,__createBinding:__createBinding$6,__decorate:__decorate$6,__exportStar:__exportStar$6,__extends:__extends$6,__generator:__generator$6,__importDefault:__importDefault$6,__importStar:__importStar$6,__makeTemplateObject:__makeTemplateObject$6,__metadata:__metadata$6,__param:__param$6,__read:__read$6,__rest:__rest$6,__spread:__spread$6,__spreadArrays:__spreadArrays$6,__values:__values$6},Symbol.toStringTag,{value:"Module"})),require$$0$6=getAugmentedNamespace(tslib_es6$6);var build$6={},convertToBuffer$1={};const fromUtf8$2=nt=>{const rt=[];for(let it=0,st=nt.length;it<st;it++){const lt=nt.charCodeAt(it);if(lt<128)rt.push(lt);else if(lt<2048)rt.push(lt>>6|192,lt&63|128);else if(it+1<nt.length&&(lt&64512)===55296&&(nt.charCodeAt(it+1)&64512)===56320){const ct=65536+((lt&1023)<<10)+(nt.charCodeAt(++it)&1023);rt.push(ct>>18|240,ct>>12&63|128,ct>>6&63|128,ct&63|128)}else rt.push(lt>>12|224,lt>>6&63|128,lt&63|128)}return Uint8Array.from(rt)},toUtf8$2=nt=>{let rt="";for(let it=0,st=nt.length;it<st;it++){const lt=nt[it];if(lt<128)rt+=String.fromCharCode(lt);else if(192<=lt&&lt<224){const ct=nt[++it];rt+=String.fromCharCode((lt&31)<<6|ct&63)}else if(240<=lt&&lt<365){const ut="%"+[lt,nt[++it],nt[++it],nt[++it]].map(dt=>dt.toString(16)).join("%");rt+=decodeURIComponent(ut)}else rt+=String.fromCharCode((lt&15)<<12|(nt[++it]&63)<<6|nt[++it]&63)}return rt};function fromUtf8$1(nt){return new TextEncoder().encode(nt)}function toUtf8$1(nt){return new TextDecoder("utf-8").decode(nt)}const fromUtf8=nt=>typeof TextEncoder=="function"?fromUtf8$1(nt):fromUtf8$2(nt),toUtf8=nt=>typeof TextDecoder=="function"?toUtf8$1(nt):toUtf8$2(nt),distEs$1=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8,toUtf8},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(distEs$1);var hasRequiredConvertToBuffer;function requireConvertToBuffer(){if(hasRequiredConvertToBuffer)return convertToBuffer$1;hasRequiredConvertToBuffer=1,Object.defineProperty(convertToBuffer$1,"__esModule",{value:!0}),convertToBuffer$1.convertToBuffer=void 0;var nt=require$$2$1,rt=typeof Buffer<"u"&&Buffer.from?function(st){return Buffer.from(st,"utf8")}:nt.fromUtf8;function it(st){return st instanceof Uint8Array?st:typeof st=="string"?rt(st):ArrayBuffer.isView(st)?new Uint8Array(st.buffer,st.byteOffset,st.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(st)}return convertToBuffer$1.convertToBuffer=it,convertToBuffer$1}var isEmptyData$3={},hasRequiredIsEmptyData$2;function requireIsEmptyData$2(){if(hasRequiredIsEmptyData$2)return isEmptyData$3;hasRequiredIsEmptyData$2=1,Object.defineProperty(isEmptyData$3,"__esModule",{value:!0}),isEmptyData$3.isEmptyData=void 0;function nt(rt){return typeof rt=="string"?rt.length===0:rt.byteLength===0}return isEmptyData$3.isEmptyData=nt,isEmptyData$3}var numToUint8={},hasRequiredNumToUint8;function requireNumToUint8(){if(hasRequiredNumToUint8)return numToUint8;hasRequiredNumToUint8=1,Object.defineProperty(numToUint8,"__esModule",{value:!0}),numToUint8.numToUint8=void 0;function nt(rt){return new Uint8Array([(rt&4278190080)>>24,(rt&16711680)>>16,(rt&65280)>>8,rt&255])}return numToUint8.numToUint8=nt,numToUint8}var uint32ArrayFrom={},hasRequiredUint32ArrayFrom;function requireUint32ArrayFrom(){if(hasRequiredUint32ArrayFrom)return uint32ArrayFrom;hasRequiredUint32ArrayFrom=1,Object.defineProperty(uint32ArrayFrom,"__esModule",{value:!0}),uint32ArrayFrom.uint32ArrayFrom=void 0;function nt(rt){if(!Uint32Array.from){for(var it=new Uint32Array(rt.length),st=0;st<rt.length;)it[st]=rt[st],st+=1;return it}return Uint32Array.from(rt)}return uint32ArrayFrom.uint32ArrayFrom=nt,uint32ArrayFrom}var hasRequiredBuild$5;function requireBuild$5(){return hasRequiredBuild$5||(hasRequiredBuild$5=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.uint32ArrayFrom=nt.numToUint8=nt.isEmptyData=nt.convertToBuffer=void 0;var rt=requireConvertToBuffer();Object.defineProperty(nt,"convertToBuffer",{enumerable:!0,get:function(){return rt.convertToBuffer}});var it=requireIsEmptyData$2();Object.defineProperty(nt,"isEmptyData",{enumerable:!0,get:function(){return it.isEmptyData}});var st=requireNumToUint8();Object.defineProperty(nt,"numToUint8",{enumerable:!0,get:function(){return st.numToUint8}});var lt=requireUint32ArrayFrom();Object.defineProperty(nt,"uint32ArrayFrom",{enumerable:!0,get:function(){return lt.uint32ArrayFrom}})}(build$6)),build$6}var aws_crc32={},hasRequiredAws_crc32;function requireAws_crc32(){if(hasRequiredAws_crc32)return aws_crc32;hasRequiredAws_crc32=1,Object.defineProperty(aws_crc32,"__esModule",{value:!0}),aws_crc32.AwsCrc32=void 0;var nt=require$$0$6,rt=requireBuild$5(),it=requireBuild$4(),st=function(){function lt(){this.crc32=new it.Crc32}return lt.prototype.update=function(ct){(0,rt.isEmptyData)(ct)||this.crc32.update((0,rt.convertToBuffer)(ct))},lt.prototype.digest=function(){return nt.__awaiter(this,void 0,void 0,function(){return nt.__generator(this,function(ct){return[2,(0,rt.numToUint8)(this.crc32.digest())]})})},lt.prototype.reset=function(){this.crc32=new it.Crc32},lt}();return aws_crc32.AwsCrc32=st,aws_crc32}var hasRequiredBuild$4;function requireBuild$4(){return hasRequiredBuild$4||(hasRequiredBuild$4=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.AwsCrc32=nt.Crc32=nt.crc32=void 0;var rt=require$$0$6,it=requireBuild$5();function st(ht){return new lt().update(ht).digest()}nt.crc32=st;var lt=function(){function ht(){this.checksum=4294967295}return ht.prototype.update=function(ft){var pt,mt;try{for(var gt=rt.__values(ft),xt=gt.next();!xt.done;xt=gt.next()){var yt=xt.value;this.checksum=this.checksum>>>8^ut[(this.checksum^yt)&255]}}catch(vt){pt={error:vt}}finally{try{xt&&!xt.done&&(mt=gt.return)&&mt.call(gt)}finally{if(pt)throw pt.error}}return this},ht.prototype.digest=function(){return(this.checksum^4294967295)>>>0},ht}();nt.Crc32=lt;var ct=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],ut=(0,it.uint32ArrayFrom)(ct),dt=requireAws_crc32();Object.defineProperty(nt,"AwsCrc32",{enumerable:!0,get:function(){return dt.AwsCrc32}})}(build$7)),build$7}var buildExports$1=requireBuild$4();class Int64{constructor(rt){if(this.bytes=rt,rt.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(rt){if(rt>9223372036854776e3||rt<-9223372036854776e3)throw new Error(`${rt} is too large (or, if negative, too small) to represent as an Int64`);const it=new Uint8Array(8);for(let st=7,lt=Math.abs(Math.round(rt));st>-1&&lt>0;st--,lt/=256)it[st]=lt;return rt<0&&negate(it),new Int64(it)}valueOf(){const rt=this.bytes.slice(0),it=rt[0]&128;return it&&negate(rt),parseInt(toHex(rt),16)*(it?-1:1)}toString(){return String(this.valueOf())}}function negate(nt){for(let rt=0;rt<8;rt++)nt[rt]^=255;for(let rt=7;rt>-1&&(nt[rt]++,nt[rt]===0);rt--);}class HeaderMarshaller{constructor(rt,it){this.toUtf8=rt,this.fromUtf8=it}format(rt){const it=[];for(const ct of Object.keys(rt)){const ut=this.fromUtf8(ct);it.push(Uint8Array.from([ut.byteLength]),ut,this.formatHeaderValue(rt[ct]))}const st=new Uint8Array(it.reduce((ct,ut)=>ct+ut.byteLength,0));let lt=0;for(const ct of it)st.set(ct,lt),lt+=ct.byteLength;return st}formatHeaderValue(rt){switch(rt.type){case"boolean":return Uint8Array.from([rt.value?0:1]);case"byte":return Uint8Array.from([2,rt.value]);case"short":const it=new DataView(new ArrayBuffer(3));return it.setUint8(0,3),it.setInt16(1,rt.value,!1),new Uint8Array(it.buffer);case"integer":const st=new DataView(new ArrayBuffer(5));return st.setUint8(0,4),st.setInt32(1,rt.value,!1),new Uint8Array(st.buffer);case"long":const lt=new Uint8Array(9);return lt[0]=5,lt.set(rt.value.bytes,1),lt;case"binary":const ct=new DataView(new ArrayBuffer(3+rt.value.byteLength));ct.setUint8(0,6),ct.setUint16(1,rt.value.byteLength,!1);const ut=new Uint8Array(ct.buffer);return ut.set(rt.value,3),ut;case"string":const dt=this.fromUtf8(rt.value),ht=new DataView(new ArrayBuffer(3+dt.byteLength));ht.setUint8(0,7),ht.setUint16(1,dt.byteLength,!1);const ft=new Uint8Array(ht.buffer);return ft.set(dt,3),ft;case"timestamp":const pt=new Uint8Array(9);return pt[0]=8,pt.set(Int64.fromNumber(rt.value.valueOf()).bytes,1),pt;case"uuid":if(!UUID_PATTERN.test(rt.value))throw new Error(`Invalid UUID received: ${rt.value}`);const mt=new Uint8Array(17);return mt[0]=9,mt.set(fromHex(rt.value.replace(/\-/g,"")),1),mt}}parse(rt){const it={};let st=0;for(;st<rt.byteLength;){const lt=rt.getUint8(st++),ct=this.toUtf8(new Uint8Array(rt.buffer,rt.byteOffset+st,lt));switch(st+=lt,rt.getUint8(st++)){case 0:it[ct]={type:BOOLEAN_TAG,value:!0};break;case 1:it[ct]={type:BOOLEAN_TAG,value:!1};break;case 2:it[ct]={type:BYTE_TAG,value:rt.getInt8(st++)};break;case 3:it[ct]={type:SHORT_TAG,value:rt.getInt16(st,!1)},st+=2;break;case 4:it[ct]={type:INT_TAG,value:rt.getInt32(st,!1)},st+=4;break;case 5:it[ct]={type:LONG_TAG,value:new Int64(new Uint8Array(rt.buffer,rt.byteOffset+st,8))},st+=8;break;case 6:const ut=rt.getUint16(st,!1);st+=2,it[ct]={type:BINARY_TAG,value:new Uint8Array(rt.buffer,rt.byteOffset+st,ut)},st+=ut;break;case 7:const dt=rt.getUint16(st,!1);st+=2,it[ct]={type:STRING_TAG,value:this.toUtf8(new Uint8Array(rt.buffer,rt.byteOffset+st,dt))},st+=dt;break;case 8:it[ct]={type:TIMESTAMP_TAG,value:new Date(new Int64(new Uint8Array(rt.buffer,rt.byteOffset+st,8)).valueOf())},st+=8;break;case 9:const ht=new Uint8Array(rt.buffer,rt.byteOffset+st,16);st+=16,it[ct]={type:UUID_TAG,value:`${toHex(ht.subarray(0,4))}-${toHex(ht.subarray(4,6))}-${toHex(ht.subarray(6,8))}-${toHex(ht.subarray(8,10))}-${toHex(ht.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return it}}var HEADER_VALUE_TYPE;(function(nt){nt[nt.boolTrue=0]="boolTrue",nt[nt.boolFalse=1]="boolFalse",nt[nt.byte=2]="byte",nt[nt.short=3]="short",nt[nt.integer=4]="integer",nt[nt.long=5]="long",nt[nt.byteArray=6]="byteArray",nt[nt.string=7]="string",nt[nt.timestamp=8]="timestamp",nt[nt.uuid=9]="uuid"})(HEADER_VALUE_TYPE||(HEADER_VALUE_TYPE={}));const BOOLEAN_TAG="boolean",BYTE_TAG="byte",SHORT_TAG="short",INT_TAG="integer",LONG_TAG="long",BINARY_TAG="binary",STRING_TAG="string",TIMESTAMP_TAG="timestamp",UUID_TAG="uuid",UUID_PATTERN=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,PRELUDE_MEMBER_LENGTH=4,PRELUDE_LENGTH=PRELUDE_MEMBER_LENGTH*2,CHECKSUM_LENGTH=4,MINIMUM_MESSAGE_LENGTH=PRELUDE_LENGTH+CHECKSUM_LENGTH*2;function splitMessage({byteLength:nt,byteOffset:rt,buffer:it}){if(nt<MINIMUM_MESSAGE_LENGTH)throw new Error("Provided message too short to accommodate event stream message overhead");const st=new DataView(it,rt,nt),lt=st.getUint32(0,!1);if(nt!==lt)throw new Error("Reported message length does not match received message length");const ct=st.getUint32(PRELUDE_MEMBER_LENGTH,!1),ut=st.getUint32(PRELUDE_LENGTH,!1),dt=st.getUint32(nt-CHECKSUM_LENGTH,!1),ht=new buildExports$1.Crc32().update(new Uint8Array(it,rt,PRELUDE_LENGTH));if(ut!==ht.digest())throw new Error(`The prelude checksum specified in the message (${ut}) does not match the calculated CRC32 checksum (${ht.digest()})`);if(ht.update(new Uint8Array(it,rt+PRELUDE_LENGTH,nt-(PRELUDE_LENGTH+CHECKSUM_LENGTH))),dt!==ht.digest())throw new Error(`The message checksum (${ht.digest()}) did not match the expected value of ${dt}`);return{headers:new DataView(it,rt+PRELUDE_LENGTH+CHECKSUM_LENGTH,ct),body:new Uint8Array(it,rt+PRELUDE_LENGTH+CHECKSUM_LENGTH+ct,lt-ct-(PRELUDE_LENGTH+CHECKSUM_LENGTH+CHECKSUM_LENGTH))}}class EventStreamCodec{constructor(rt,it){this.headerMarshaller=new HeaderMarshaller(rt,it),this.messageBuffer=[],this.isEndOfStream=!1}feed(rt){this.messageBuffer.push(this.decode(rt))}endOfStream(){this.isEndOfStream=!0}getMessage(){const rt=this.messageBuffer.pop(),it=this.isEndOfStream;return{getMessage(){return rt},isEndOfStream(){return it}}}getAvailableMessages(){const rt=this.messageBuffer;this.messageBuffer=[];const it=this.isEndOfStream;return{getMessages(){return rt},isEndOfStream(){return it}}}encode({headers:rt,body:it}){const st=this.headerMarshaller.format(rt),lt=st.byteLength+it.byteLength+16,ct=new Uint8Array(lt),ut=new DataView(ct.buffer,ct.byteOffset,ct.byteLength),dt=new buildExports$1.Crc32;return ut.setUint32(0,lt,!1),ut.setUint32(4,st.byteLength,!1),ut.setUint32(8,dt.update(ct.subarray(0,8)).digest(),!1),ct.set(st,12),ct.set(it,st.byteLength+12),ut.setUint32(lt-4,dt.update(ct.subarray(8,lt-4)).digest(),!1),ct}decode(rt){const{headers:it,body:st}=splitMessage(rt);return{headers:this.headerMarshaller.parse(it),body:st}}formatHeaders(rt){return this.headerMarshaller.format(rt)}}class MessageDecoderStream{constructor(rt){this.options=rt}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const rt of this.options.inputStream)yield this.options.decoder.decode(rt)}}class MessageEncoderStream{constructor(rt){this.options=rt}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const rt of this.options.messageStream)yield this.options.encoder.encode(rt);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class SmithyMessageDecoderStream{constructor(rt){this.options=rt}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const rt of this.options.messageStream){const it=await this.options.deserializer(rt);it!==void 0&&(yield it)}}}class SmithyMessageEncoderStream{constructor(rt){this.options=rt}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const rt of this.options.inputStream)yield this.options.serializer(rt)}}const getSmithyContext=nt=>nt[SMITHY_CONTEXT_KEY]||(nt[SMITHY_CONTEXT_KEY]={}),normalizeProvider=nt=>{if(typeof nt=="function")return nt;const rt=Promise.resolve(nt);return()=>rt},ALGORITHM_QUERY_PARAM="X-Amz-Algorithm",CREDENTIAL_QUERY_PARAM="X-Amz-Credential",AMZ_DATE_QUERY_PARAM="X-Amz-Date",SIGNED_HEADERS_QUERY_PARAM="X-Amz-SignedHeaders",EXPIRES_QUERY_PARAM="X-Amz-Expires",SIGNATURE_QUERY_PARAM="X-Amz-Signature",TOKEN_QUERY_PARAM="X-Amz-Security-Token",AUTH_HEADER="authorization",AMZ_DATE_HEADER=AMZ_DATE_QUERY_PARAM.toLowerCase(),DATE_HEADER="date",GENERATED_HEADERS=[AUTH_HEADER,AMZ_DATE_HEADER,DATE_HEADER],SIGNATURE_HEADER=SIGNATURE_QUERY_PARAM.toLowerCase(),SHA256_HEADER="x-amz-content-sha256",TOKEN_HEADER=TOKEN_QUERY_PARAM.toLowerCase(),ALWAYS_UNSIGNABLE_HEADERS={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},PROXY_HEADER_PATTERN=/^proxy-/,SEC_HEADER_PATTERN=/^sec-/,ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256",EVENT_ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256-PAYLOAD",UNSIGNED_PAYLOAD="UNSIGNED-PAYLOAD",MAX_CACHE_SIZE=50,KEY_TYPE_IDENTIFIER="aws4_request",MAX_PRESIGNED_TTL=60*60*24*7,signingKeyCache={},cacheQueue=[],createScope=(nt,rt,it)=>`${nt}/${rt}/${it}/${KEY_TYPE_IDENTIFIER}`,getSigningKey=async(nt,rt,it,st,lt)=>{const ct=await hmac(nt,rt.secretAccessKey,rt.accessKeyId),ut=`${it}:${st}:${lt}:${toHex(ct)}:${rt.sessionToken}`;if(ut in signingKeyCache)return signingKeyCache[ut];for(cacheQueue.push(ut);cacheQueue.length>MAX_CACHE_SIZE;)delete signingKeyCache[cacheQueue.shift()];let dt=`AWS4${rt.secretAccessKey}`;for(const ht of[it,st,lt,KEY_TYPE_IDENTIFIER])dt=await hmac(nt,dt,ht);return signingKeyCache[ut]=dt},hmac=(nt,rt,it)=>{const st=new nt(rt);return st.update(toUint8Array(it)),st.digest()},getCanonicalHeaders=({headers:nt},rt,it)=>{const st={};for(const lt of Object.keys(nt).sort()){if(nt[lt]==null)continue;const ct=lt.toLowerCase();(ct in ALWAYS_UNSIGNABLE_HEADERS||rt!=null&&rt.has(ct)||PROXY_HEADER_PATTERN.test(ct)||SEC_HEADER_PATTERN.test(ct))&&(!it||it&&!it.has(ct))||(st[ct]=nt[lt].trim().replace(/\s+/g," "))}return st},getCanonicalQuery=({query:nt={}})=>{const rt=[],it={};for(const st of Object.keys(nt).sort()){if(st.toLowerCase()===SIGNATURE_HEADER)continue;rt.push(st);const lt=nt[st];typeof lt=="string"?it[st]=`${escapeUri(st)}=${escapeUri(lt)}`:Array.isArray(lt)&&(it[st]=lt.slice(0).reduce((ct,ut)=>ct.concat([`${escapeUri(st)}=${escapeUri(ut)}`]),[]).sort().join("&"))}return rt.map(st=>it[st]).filter(st=>st).join("&")},isArrayBuffer=nt=>typeof ArrayBuffer=="function"&&nt instanceof ArrayBuffer||Object.prototype.toString.call(nt)==="[object ArrayBuffer]",getPayloadHash=async({headers:nt,body:rt},it)=>{for(const st of Object.keys(nt))if(st.toLowerCase()===SHA256_HEADER)return nt[st];if(rt==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof rt=="string"||ArrayBuffer.isView(rt)||isArrayBuffer(rt)){const st=new it;return st.update(toUint8Array(rt)),toHex(await st.digest())}return UNSIGNED_PAYLOAD},hasHeader$1=(nt,rt)=>{nt=nt.toLowerCase();for(const it of Object.keys(rt))if(nt===it.toLowerCase())return!0;return!1},cloneRequest=({headers:nt,query:rt,...it})=>({...it,headers:{...nt},query:rt?cloneQuery(rt):void 0}),cloneQuery=nt=>Object.keys(nt).reduce((rt,it)=>{const st=nt[it];return{...rt,[it]:Array.isArray(st)?[...st]:st}},{}),moveHeadersToQuery=(nt,rt={})=>{var lt;const{headers:it,query:st={}}=typeof nt.clone=="function"?nt.clone():cloneRequest(nt);for(const ct of Object.keys(it)){const ut=ct.toLowerCase();ut.slice(0,6)==="x-amz-"&&!((lt=rt.unhoistableHeaders)!=null&&lt.has(ut))&&(st[ct]=it[ct],delete it[ct])}return{...nt,headers:it,query:st}},prepareRequest=nt=>{nt=typeof nt.clone=="function"?nt.clone():cloneRequest(nt);for(const rt of Object.keys(nt.headers))GENERATED_HEADERS.indexOf(rt.toLowerCase())>-1&&delete nt.headers[rt];return nt},iso8601=nt=>toDate(nt).toISOString().replace(/\.\d{3}Z$/,"Z"),toDate=nt=>typeof nt=="number"?new Date(nt*1e3):typeof nt=="string"?Number(nt)?new Date(Number(nt)*1e3):new Date(nt):nt;class SignatureV4{constructor({applyChecksum:rt,credentials:it,region:st,service:lt,sha256:ct,uriEscapePath:ut=!0}){this.headerMarshaller=new HeaderMarshaller(toUtf8$3,fromUtf8$3),this.service=lt,this.sha256=ct,this.uriEscapePath=ut,this.applyChecksum=typeof rt=="boolean"?rt:!0,this.regionProvider=normalizeProvider(st),this.credentialProvider=normalizeProvider(it)}async presign(rt,it={}){const{signingDate:st=new Date,expiresIn:lt=3600,unsignableHeaders:ct,unhoistableHeaders:ut,signableHeaders:dt,signingRegion:ht,signingService:ft}=it,pt=await this.credentialProvider();this.validateResolvedCredentials(pt);const mt=ht??await this.regionProvider(),{longDate:gt,shortDate:xt}=formatDate(st);if(lt>MAX_PRESIGNED_TTL)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const yt=createScope(xt,mt,ft??this.service),vt=moveHeadersToQuery(prepareRequest(rt),{unhoistableHeaders:ut});pt.sessionToken&&(vt.query[TOKEN_QUERY_PARAM]=pt.sessionToken),vt.query[ALGORITHM_QUERY_PARAM]=ALGORITHM_IDENTIFIER,vt.query[CREDENTIAL_QUERY_PARAM]=`${pt.accessKeyId}/${yt}`,vt.query[AMZ_DATE_QUERY_PARAM]=gt,vt.query[EXPIRES_QUERY_PARAM]=lt.toString(10);const St=getCanonicalHeaders(vt,ct,dt);return vt.query[SIGNED_HEADERS_QUERY_PARAM]=getCanonicalHeaderList(St),vt.query[SIGNATURE_QUERY_PARAM]=await this.getSignature(gt,yt,this.getSigningKey(pt,mt,xt,ft),this.createCanonicalRequest(vt,St,await getPayloadHash(rt,this.sha256))),vt}async sign(rt,it){return typeof rt=="string"?this.signString(rt,it):rt.headers&&rt.payload?this.signEvent(rt,it):rt.message?this.signMessage(rt,it):this.signRequest(rt,it)}async signEvent({headers:rt,payload:it},{signingDate:st=new Date,priorSignature:lt,signingRegion:ct,signingService:ut}){const dt=ct??await this.regionProvider(),{shortDate:ht,longDate:ft}=formatDate(st),pt=createScope(ht,dt,ut??this.service),mt=await getPayloadHash({headers:{},body:it},this.sha256),gt=new this.sha256;gt.update(rt);const xt=toHex(await gt.digest()),yt=[EVENT_ALGORITHM_IDENTIFIER,ft,pt,lt,xt,mt].join(`
`);return this.signString(yt,{signingDate:st,signingRegion:dt,signingService:ut})}async signMessage(rt,{signingDate:it=new Date,signingRegion:st,signingService:lt}){return this.signEvent({headers:this.headerMarshaller.format(rt.message.headers),payload:rt.message.body},{signingDate:it,signingRegion:st,signingService:lt,priorSignature:rt.priorSignature}).then(ut=>({message:rt.message,signature:ut}))}async signString(rt,{signingDate:it=new Date,signingRegion:st,signingService:lt}={}){const ct=await this.credentialProvider();this.validateResolvedCredentials(ct);const ut=st??await this.regionProvider(),{shortDate:dt}=formatDate(it),ht=new this.sha256(await this.getSigningKey(ct,ut,dt,lt));return ht.update(toUint8Array(rt)),toHex(await ht.digest())}async signRequest(rt,{signingDate:it=new Date,signableHeaders:st,unsignableHeaders:lt,signingRegion:ct,signingService:ut}={}){const dt=await this.credentialProvider();this.validateResolvedCredentials(dt);const ht=ct??await this.regionProvider(),ft=prepareRequest(rt),{longDate:pt,shortDate:mt}=formatDate(it),gt=createScope(mt,ht,ut??this.service);ft.headers[AMZ_DATE_HEADER]=pt,dt.sessionToken&&(ft.headers[TOKEN_HEADER]=dt.sessionToken);const xt=await getPayloadHash(ft,this.sha256);!hasHeader$1(SHA256_HEADER,ft.headers)&&this.applyChecksum&&(ft.headers[SHA256_HEADER]=xt);const yt=getCanonicalHeaders(ft,lt,st),vt=await this.getSignature(pt,gt,this.getSigningKey(dt,ht,mt,ut),this.createCanonicalRequest(ft,yt,xt));return ft.headers[AUTH_HEADER]=`${ALGORITHM_IDENTIFIER} Credential=${dt.accessKeyId}/${gt}, SignedHeaders=${getCanonicalHeaderList(yt)}, Signature=${vt}`,ft}createCanonicalRequest(rt,it,st){const lt=Object.keys(it).sort();return`${rt.method}
${this.getCanonicalPath(rt)}
${getCanonicalQuery(rt)}
${lt.map(ct=>`${ct}:${it[ct]}`).join(`
`)}

${lt.join(";")}
${st}`}async createStringToSign(rt,it,st){const lt=new this.sha256;lt.update(toUint8Array(st));const ct=await lt.digest();return`${ALGORITHM_IDENTIFIER}
${rt}
${it}
${toHex(ct)}`}getCanonicalPath({path:rt}){if(this.uriEscapePath){const it=[];for(const ct of rt.split("/"))(ct==null?void 0:ct.length)!==0&&ct!=="."&&(ct===".."?it.pop():it.push(ct));const st=`${rt!=null&&rt.startsWith("/")?"/":""}${it.join("/")}${it.length>0&&(rt!=null&&rt.endsWith("/"))?"/":""}`;return encodeURIComponent(st).replace(/%2F/g,"/")}return rt}async getSignature(rt,it,st,lt){const ct=await this.createStringToSign(rt,it,lt),ut=new this.sha256(await st);return ut.update(toUint8Array(ct)),toHex(await ut.digest())}getSigningKey(rt,it,st,lt){return getSigningKey(this.sha256,rt,st,it,lt||this.service)}validateResolvedCredentials(rt){if(typeof rt!="object"||typeof rt.accessKeyId!="string"||typeof rt.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const formatDate=nt=>{const rt=iso8601(nt).replace(/[\-:]/g,"");return{longDate:rt,shortDate:rt.slice(0,8)}},getCanonicalHeaderList=nt=>Object.keys(nt).sort().join(";");var SelectorType;(function(nt){nt.ENV="env",nt.CONFIG="shared config entry"})(SelectorType||(SelectorType={}));const S3_EXPRESS_BUCKET_TYPE="Directory",S3_EXPRESS_BACKEND="S3Express",S3_EXPRESS_AUTH_SCHEME="sigv4-s3express",SESSION_TOKEN_QUERY_PARAM="X-Amz-S3session-Token",SESSION_TOKEN_HEADER=SESSION_TOKEN_QUERY_PARAM.toLowerCase();class SignatureV4S3Express extends SignatureV4{async signWithCredentials(rt,it,st){const lt=getCredentialsWithoutSessionToken(it);rt.headers[SESSION_TOKEN_HEADER]=it.sessionToken;const ct=this;return setSingleOverride(ct,lt),ct.signRequest(rt,st??{})}async presignWithCredentials(rt,it,st){const lt=getCredentialsWithoutSessionToken(it);return delete rt.headers[SESSION_TOKEN_HEADER],rt.headers[SESSION_TOKEN_QUERY_PARAM]=it.sessionToken,rt.query=rt.query??{},rt.query[SESSION_TOKEN_QUERY_PARAM]=it.sessionToken,setSingleOverride(this,lt),this.presign(rt,st)}}function getCredentialsWithoutSessionToken(nt){return{accessKeyId:nt.accessKeyId,secretAccessKey:nt.secretAccessKey,expiration:nt.expiration}}function setSingleOverride(nt,rt){const it=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),st=nt.credentialProvider,lt=()=>(clearTimeout(it),nt.credentialProvider=st,Promise.resolve(rt));nt.credentialProvider=lt}const s3ExpressMiddleware=nt=>(rt,it)=>async st=>{var lt,ct,ut,dt,ht;if(it.endpointV2){const ft=it.endpointV2,pt=((ut=(ct=(lt=ft.properties)==null?void 0:lt.authSchemes)==null?void 0:ct[0])==null?void 0:ut.name)===S3_EXPRESS_AUTH_SCHEME;if((((dt=ft.properties)==null?void 0:dt.backend)===S3_EXPRESS_BACKEND||((ht=ft.properties)==null?void 0:ht.bucketType)===S3_EXPRESS_BUCKET_TYPE)&&(it.isS3ExpressBucket=!0),pt){const gt=st.input.Bucket;if(gt){const xt=await nt.s3ExpressIdentityProvider.getS3ExpressIdentity(await nt.credentials(),{Bucket:gt});it.s3ExpressIdentity=xt,HttpRequest.isInstance(st.request)&&xt.sessionToken&&(st.request.headers[SESSION_TOKEN_HEADER]=xt.sessionToken)}}}return rt(st)},s3ExpressMiddlewareOptions={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},getS3ExpressPlugin=nt=>({applyToStack:rt=>{rt.add(s3ExpressMiddleware(nt),s3ExpressMiddlewareOptions)}}),resolveS3Config=(nt,{session:rt})=>{const[it,st]=rt;return{...nt,forcePathStyle:nt.forcePathStyle??!1,useAccelerateEndpoint:nt.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:nt.disableMultiregionAccessPoints??!1,followRegionRedirects:nt.followRegionRedirects??!1,s3ExpressIdentityProvider:nt.s3ExpressIdentityProvider??new S3ExpressIdentityProviderImpl(async lt=>it().send(new st({Bucket:lt,SessionMode:"ReadWrite"})))}},validate$1=nt=>typeof nt=="string"&&nt.indexOf("arn:")===0&&nt.split(":").length>=6;function validateBucketNameMiddleware(){return nt=>async rt=>{const{input:{Bucket:it}}=rt;if(typeof it=="string"&&!validate$1(it)&&it.indexOf("/")>=0){const st=new Error(`Bucket name shouldn't contain '/', received '${it}'`);throw st.name="InvalidBucketName",st}return nt({...rt})}}const validateBucketNameMiddlewareOptions={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},getValidateBucketNamePlugin=nt=>({applyToStack:rt=>{rt.add(validateBucketNameMiddleware(),validateBucketNameMiddlewareOptions)}}),memoize=(nt,rt,it)=>{let st,lt,ct,ut=!1;const dt=async()=>{lt||(lt=nt());try{st=await lt,ct=!0,ut=!1}finally{lt=void 0}return st};return rt===void 0?async ht=>((!ct||ht!=null&&ht.forceRefresh)&&(st=await dt()),st):async ht=>((!ct||ht!=null&&ht.forceRefresh)&&(st=await dt()),ut?st:it&&!it(st)?(ut=!0,st):(rt(st)&&await dt(),st))},CREDENTIAL_EXPIRE_WINDOW=3e5,resolveAwsAuthConfig=nt=>{const rt=nt.credentials?normalizeCredentialProvider(nt.credentials):nt.credentialDefaultProvider(Object.assign({},nt,{parentClientConfig:nt})),{signingEscapePath:it=!0,systemClockOffset:st=nt.systemClockOffset||0,sha256:lt}=nt;let ct;return nt.signer?ct=normalizeProvider(nt.signer):nt.regionInfoProvider?ct=()=>normalizeProvider(nt.region)().then(async ut=>[await nt.regionInfoProvider(ut,{useFipsEndpoint:await nt.useFipsEndpoint(),useDualstackEndpoint:await nt.useDualstackEndpoint()})||{},ut]).then(([ut,dt])=>{const{signingRegion:ht,signingService:ft}=ut;nt.signingRegion=nt.signingRegion||ht||dt,nt.signingName=nt.signingName||ft||nt.serviceId;const pt={...nt,credentials:rt,region:nt.signingRegion,service:nt.signingName,sha256:lt,uriEscapePath:it},mt=nt.signerConstructor||SignatureV4;return new mt(pt)}):ct=async ut=>{ut=Object.assign({},{name:"sigv4",signingName:nt.signingName||nt.defaultSigningName,signingRegion:await normalizeProvider(nt.region)(),properties:{}},ut);const dt=ut.signingRegion,ht=ut.signingName;nt.signingRegion=nt.signingRegion||dt,nt.signingName=nt.signingName||ht||nt.serviceId;const ft={...nt,credentials:rt,region:nt.signingRegion,service:nt.signingName,sha256:lt,uriEscapePath:it},pt=nt.signerConstructor||SignatureV4;return new pt(ft)},{...nt,systemClockOffset:st,signingEscapePath:it,credentials:rt,signer:ct}},normalizeCredentialProvider=nt=>typeof nt=="function"?memoize(nt,rt=>rt.expiration!==void 0&&rt.expiration.getTime()-Date.now()<CREDENTIAL_EXPIRE_WINDOW,rt=>rt.expiration!==void 0):normalizeProvider(nt),getSkewCorrectedDate=nt=>new Date(Date.now()+nt),isClockSkewed=(nt,rt)=>Math.abs(getSkewCorrectedDate(rt).getTime()-nt)>=3e5,getUpdatedSystemClockOffset=(nt,rt)=>{const it=Date.parse(nt);return isClockSkewed(it,rt)?it-Date.now():rt},awsAuthMiddleware=nt=>(rt,it)=>async function(st){var mt,gt,xt,yt;if(!HttpRequest.isInstance(st.request))return rt(st);const lt=(xt=(gt=(mt=it.endpointV2)==null?void 0:mt.properties)==null?void 0:gt.authSchemes)==null?void 0:xt[0],ct=(lt==null?void 0:lt.name)==="sigv4a"?(yt=lt==null?void 0:lt.signingRegionSet)==null?void 0:yt.join(","):void 0,ut=await nt.signer(lt);let dt;const ht={signingDate:getSkewCorrectedDate(nt.systemClockOffset),signingRegion:ct||it.signing_region,signingService:it.signing_service};if(it.s3ExpressIdentity){if(dt=await ut.signWithCredentials(st.request,it.s3ExpressIdentity,ht),dt.headers["X-Amz-Security-Token"]||dt.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.")}else dt=await ut.sign(st.request,ht);const ft=await rt({...st,request:dt}).catch(vt=>{const St=vt.ServerTime??getDateHeader(vt.$response);throw St&&(nt.systemClockOffset=getUpdatedSystemClockOffset(St,nt.systemClockOffset)),vt}),pt=getDateHeader(ft.response);return pt&&(nt.systemClockOffset=getUpdatedSystemClockOffset(pt,nt.systemClockOffset)),ft},getDateHeader=nt=>{var rt,it;return HttpResponse.isInstance(nt)?((rt=nt.headers)==null?void 0:rt.date)??((it=nt.headers)==null?void 0:it.Date):void 0},awsAuthMiddlewareOptions={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},getAwsAuthPlugin=nt=>({applyToStack:rt=>{rt.addRelativeTo(awsAuthMiddleware(nt),awsAuthMiddlewareOptions)}});function resolveUserAgentConfig(nt){return{...nt,customUserAgent:typeof nt.customUserAgent=="string"?[[nt.customUserAgent]]:nt.customUserAgent}}const IP_V4_REGEX=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),isIpAddress=nt=>IP_V4_REGEX.test(nt)||nt.startsWith("[")&&nt.endsWith("]"),VALID_HOST_LABEL_REGEX=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),isValidHostLabel=(nt,rt=!1)=>{if(!rt)return VALID_HOST_LABEL_REGEX.test(nt);const it=nt.split(".");for(const st of it)if(!isValidHostLabel(st))return!1;return!0},customEndpointFunctions={},debugId="endpoints";function toDebugString(nt){return typeof nt!="object"||nt==null?nt:"ref"in nt?`$${toDebugString(nt.ref)}`:"fn"in nt?`${nt.fn}(${(nt.argv||[]).map(toDebugString).join(", ")})`:JSON.stringify(nt,null,2)}class EndpointError extends Error{constructor(rt){super(rt),this.name="EndpointError"}}const booleanEquals=(nt,rt)=>nt===rt,getAttrPathList=nt=>{const rt=nt.split("."),it=[];for(const st of rt){const lt=st.indexOf("[");if(lt!==-1){if(st.indexOf("]")!==st.length-1)throw new EndpointError(`Path: '${nt}' does not end with ']'`);const ct=st.slice(lt+1,-1);if(Number.isNaN(parseInt(ct)))throw new EndpointError(`Invalid array index: '${ct}' in path: '${nt}'`);lt!==0&&it.push(st.slice(0,lt)),it.push(ct)}else it.push(st)}return it},getAttr=(nt,rt)=>getAttrPathList(rt).reduce((it,st)=>{if(typeof it!="object")throw new EndpointError(`Index '${st}' in '${rt}' not found in '${JSON.stringify(nt)}'`);return Array.isArray(it)?it[parseInt(st)]:it[st]},nt),isSet=nt=>nt!=null,not=nt=>!nt,DEFAULT_PORTS={[EndpointURLScheme.HTTP]:80,[EndpointURLScheme.HTTPS]:443},parseURL=nt=>{const rt=(()=>{try{if(nt instanceof URL)return nt;if(typeof nt=="object"&&"hostname"in nt){const{hostname:gt,port:xt,protocol:yt="",path:vt="",query:St={}}=nt,wt=new URL(`${yt}//${gt}${xt?`:${xt}`:""}${vt}`);return wt.search=Object.entries(St).map(([Et,Rt])=>`${Et}=${Rt}`).join("&"),wt}return new URL(nt)}catch{return null}})();if(!rt)return console.error(`Unable to parse ${JSON.stringify(nt)} as a whatwg URL.`),null;const it=rt.href,{host:st,hostname:lt,pathname:ct,protocol:ut,search:dt}=rt;if(dt)return null;const ht=ut.slice(0,-1);if(!Object.values(EndpointURLScheme).includes(ht))return null;const ft=isIpAddress(lt),pt=it.includes(`${st}:${DEFAULT_PORTS[ht]}`)||typeof nt=="string"&&nt.includes(`${st}:${DEFAULT_PORTS[ht]}`),mt=`${st}${pt?`:${DEFAULT_PORTS[ht]}`:""}`;return{scheme:ht,authority:mt,path:ct,normalizedPath:ct.endsWith("/")?ct:`${ct}/`,isIp:ft}},stringEquals=(nt,rt)=>nt===rt,substring=(nt,rt,it,st)=>rt>=it||nt.length<it?null:st?nt.substring(nt.length-it,nt.length-rt):nt.substring(rt,it),uriEncode=nt=>encodeURIComponent(nt).replace(/[!*'()]/g,rt=>`%${rt.charCodeAt(0).toString(16).toUpperCase()}`),endpointFunctions={booleanEquals,getAttr,isSet,isValidHostLabel,not,parseURL,stringEquals,substring,uriEncode},evaluateTemplate=(nt,rt)=>{const it=[],st={...rt.endpointParams,...rt.referenceRecord};let lt=0;for(;lt<nt.length;){const ct=nt.indexOf("{",lt);if(ct===-1){it.push(nt.slice(lt));break}it.push(nt.slice(lt,ct));const ut=nt.indexOf("}",ct);if(ut===-1){it.push(nt.slice(ct));break}nt[ct+1]==="{"&&nt[ut+1]==="}"&&(it.push(nt.slice(ct+1,ut)),lt=ut+2);const dt=nt.substring(ct+1,ut);if(dt.includes("#")){const[ht,ft]=dt.split("#");it.push(getAttr(st[ht],ft))}else it.push(st[dt]);lt=ut+1}return it.join("")},getReferenceValue=({ref:nt},rt)=>({...rt.endpointParams,...rt.referenceRecord})[nt],evaluateExpression=(nt,rt,it)=>{if(typeof nt=="string")return evaluateTemplate(nt,it);if(nt.fn)return callFunction(nt,it);if(nt.ref)return getReferenceValue(nt,it);throw new EndpointError(`'${rt}': ${String(nt)} is not a string, function or reference.`)},callFunction=({fn:nt,argv:rt},it)=>{const st=rt.map(ct=>["boolean","number"].includes(typeof ct)?ct:evaluateExpression(ct,"arg",it)),lt=nt.split(".");return lt[0]in customEndpointFunctions&&lt[1]!=null?customEndpointFunctions[lt[0]][lt[1]](...st):endpointFunctions[nt](...st)},evaluateCondition=({assign:nt,...rt},it)=>{var lt,ct;if(nt&&nt in it.referenceRecord)throw new EndpointError(`'${nt}' is already defined in Reference Record.`);const st=callFunction(rt,it);return(ct=(lt=it.logger)==null?void 0:lt.debug)==null||ct.call(lt,debugId,`evaluateCondition: ${toDebugString(rt)} = ${toDebugString(st)}`),{result:st===""?!0:!!st,...nt!=null&&{toAssign:{name:nt,value:st}}}},evaluateConditions=(nt=[],rt)=>{var st,lt;const it={};for(const ct of nt){const{result:ut,toAssign:dt}=evaluateCondition(ct,{...rt,referenceRecord:{...rt.referenceRecord,...it}});if(!ut)return{result:ut};dt&&(it[dt.name]=dt.value,(lt=(st=rt.logger)==null?void 0:st.debug)==null||lt.call(st,debugId,`assign: ${dt.name} := ${toDebugString(dt.value)}`))}return{result:!0,referenceRecord:it}},getEndpointHeaders=(nt,rt)=>Object.entries(nt).reduce((it,[st,lt])=>({...it,[st]:lt.map(ct=>{const ut=evaluateExpression(ct,"Header value entry",rt);if(typeof ut!="string")throw new EndpointError(`Header '${st}' value '${ut}' is not a string`);return ut})}),{}),getEndpointProperty=(nt,rt)=>{if(Array.isArray(nt))return nt.map(it=>getEndpointProperty(it,rt));switch(typeof nt){case"string":return evaluateTemplate(nt,rt);case"object":if(nt===null)throw new EndpointError(`Unexpected endpoint property: ${nt}`);return getEndpointProperties(nt,rt);case"boolean":return nt;default:throw new EndpointError(`Unexpected endpoint property type: ${typeof nt}`)}},getEndpointProperties=(nt,rt)=>Object.entries(nt).reduce((it,[st,lt])=>({...it,[st]:getEndpointProperty(lt,rt)}),{}),getEndpointUrl=(nt,rt)=>{const it=evaluateExpression(nt,"Endpoint URL",rt);if(typeof it=="string")try{return new URL(it)}catch(st){throw console.error(`Failed to construct URL with ${it}`,st),st}throw new EndpointError(`Endpoint URL must be a string, got ${typeof it}`)},evaluateEndpointRule=(nt,rt)=>{var pt,mt;const{conditions:it,endpoint:st}=nt,{result:lt,referenceRecord:ct}=evaluateConditions(it,rt);if(!lt)return;const ut={...rt,referenceRecord:{...rt.referenceRecord,...ct}},{url:dt,properties:ht,headers:ft}=st;return(mt=(pt=rt.logger)==null?void 0:pt.debug)==null||mt.call(pt,debugId,`Resolving endpoint from template: ${toDebugString(st)}`),{...ft!=null&&{headers:getEndpointHeaders(ft,ut)},...ht!=null&&{properties:getEndpointProperties(ht,ut)},url:getEndpointUrl(dt,ut)}},evaluateErrorRule=(nt,rt)=>{const{conditions:it,error:st}=nt,{result:lt,referenceRecord:ct}=evaluateConditions(it,rt);if(lt)throw new EndpointError(evaluateExpression(st,"Error",{...rt,referenceRecord:{...rt.referenceRecord,...ct}}))},evaluateTreeRule=(nt,rt)=>{const{conditions:it,rules:st}=nt,{result:lt,referenceRecord:ct}=evaluateConditions(it,rt);if(lt)return evaluateRules(st,{...rt,referenceRecord:{...rt.referenceRecord,...ct}})},evaluateRules=(nt,rt)=>{for(const it of nt)if(it.type==="endpoint"){const st=evaluateEndpointRule(it,rt);if(st)return st}else if(it.type==="error")evaluateErrorRule(it,rt);else if(it.type==="tree"){const st=evaluateTreeRule(it,rt);if(st)return st}else throw new EndpointError(`Unknown endpoint rule: ${it}`);throw new EndpointError("Rules evaluation failed")},resolveEndpoint=(nt,rt)=>{var ft,pt,mt,gt,xt;const{endpointParams:it,logger:st}=rt,{parameters:lt,rules:ct}=nt;(pt=(ft=rt.logger)==null?void 0:ft.debug)==null||pt.call(ft,`${debugId} Initial EndpointParams: ${toDebugString(it)}`);const ut=Object.entries(lt).filter(([,yt])=>yt.default!=null).map(([yt,vt])=>[yt,vt.default]);if(ut.length>0)for(const[yt,vt]of ut)it[yt]=it[yt]??vt;const dt=Object.entries(lt).filter(([,yt])=>yt.required).map(([yt])=>yt);for(const yt of dt)if(it[yt]==null)throw new EndpointError(`Missing required parameter: '${yt}'`);const ht=evaluateRules(ct,{endpointParams:it,logger:st,referenceRecord:{}});if((mt=rt.endpointParams)!=null&&mt.Endpoint)try{const yt=new URL(rt.endpointParams.Endpoint),{protocol:vt,port:St}=yt;ht.url.protocol=vt,ht.url.port=St}catch{}return(xt=(gt=rt.logger)==null?void 0:gt.debug)==null||xt.call(gt,`${debugId} Resolved endpoint: ${toDebugString(ht)}`),ht},isVirtualHostableS3Bucket=(nt,rt=!1)=>{if(rt){for(const it of nt.split("."))if(!isVirtualHostableS3Bucket(it))return!1;return!0}return!(!isValidHostLabel(nt)||nt.length<3||nt.length>63||nt!==nt.toLowerCase()||isIpAddress(nt))},parseArn=nt=>{const rt=nt.split(":");if(rt.length<6)return null;const[it,st,lt,ct,ut,...dt]=rt;return it!=="arn"||st===""||lt===""||dt[0]===""?null:{partition:st,service:lt,region:ct,accountId:ut,resourceId:dt[0].includes("/")?dt[0].split("/"):dt}},partitions=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version$4="1.1",partitionsInfo={partitions,version:version$4};let selectedPartitionsInfo=partitionsInfo;const partition=nt=>{const{partitions:rt}=selectedPartitionsInfo;for(const st of rt){const{regions:lt,outputs:ct}=st;for(const[ut,dt]of Object.entries(lt))if(ut===nt)return{...ct,...dt}}for(const st of rt){const{regionRegex:lt,outputs:ct}=st;if(new RegExp(lt).test(nt))return{...ct}}const it=rt.find(st=>st.id==="aws");if(!it)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...it.outputs}},awsEndpointFunctions={isVirtualHostableS3Bucket,parseArn,partition};customEndpointFunctions.aws=awsEndpointFunctions;const USER_AGENT="user-agent",X_AMZ_USER_AGENT="x-amz-user-agent",SPACE=" ",UA_NAME_SEPARATOR="/",UA_NAME_ESCAPE_REGEX=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,UA_VALUE_ESCAPE_REGEX=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,UA_ESCAPE_CHAR="-",userAgentMiddleware=nt=>(rt,it)=>async st=>{var mt,gt;const{request:lt}=st;if(!HttpRequest.isInstance(lt))return rt(st);const{headers:ct}=lt,ut=((mt=it==null?void 0:it.userAgent)==null?void 0:mt.map(escapeUserAgent))||[],dt=(await nt.defaultUserAgentProvider()).map(escapeUserAgent),ht=((gt=nt==null?void 0:nt.customUserAgent)==null?void 0:gt.map(escapeUserAgent))||[],ft=[].concat([...dt,...ut,...ht]).join(SPACE),pt=[...dt.filter(xt=>xt.startsWith("aws-sdk-")),...ht].join(SPACE);return nt.runtime!=="browser"?(pt&&(ct[X_AMZ_USER_AGENT]=ct[X_AMZ_USER_AGENT]?`${ct[USER_AGENT]} ${pt}`:pt),ct[USER_AGENT]=ft):ct[X_AMZ_USER_AGENT]=ft,rt({...st,request:lt})},escapeUserAgent=nt=>{var ut;const rt=nt[0].split(UA_NAME_SEPARATOR).map(dt=>dt.replace(UA_NAME_ESCAPE_REGEX,UA_ESCAPE_CHAR)).join(UA_NAME_SEPARATOR),it=(ut=nt[1])==null?void 0:ut.replace(UA_VALUE_ESCAPE_REGEX,UA_ESCAPE_CHAR),st=rt.indexOf(UA_NAME_SEPARATOR),lt=rt.substring(0,st);let ct=rt.substring(st+1);return lt==="api"&&(ct=ct.toLowerCase()),[lt,ct,it].filter(dt=>dt&&dt.length>0).reduce((dt,ht,ft)=>{switch(ft){case 0:return ht;case 1:return`${dt}/${ht}`;default:return`${dt}#${ht}`}},"")},getUserAgentMiddlewareOptions={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},getUserAgentPlugin=nt=>({applyToStack:rt=>{rt.add(userAgentMiddleware(nt),getUserAgentMiddlewareOptions)}}),DEFAULT_USE_DUALSTACK_ENDPOINT=!1,DEFAULT_USE_FIPS_ENDPOINT=!1,isFipsRegion=nt=>typeof nt=="string"&&(nt.startsWith("fips-")||nt.endsWith("-fips")),getRealRegion=nt=>isFipsRegion(nt)?["fips-aws-global","aws-fips"].includes(nt)?"us-east-1":nt.replace(/fips-(dkr-|prod-)?|-fips/,""):nt,resolveRegionConfig=nt=>{const{region:rt,useFipsEndpoint:it}=nt;if(!rt)throw new Error("Region is missing");return{...nt,region:async()=>{if(typeof rt=="string")return getRealRegion(rt);const st=await rt();return getRealRegion(st)},useFipsEndpoint:async()=>{const st=typeof rt=="string"?rt:await rt();return isFipsRegion(st)?!0:typeof it!="function"?Promise.resolve(!!it):it()}}},resolveEventStreamSerdeConfig=nt=>({...nt,eventStreamMarshaller:nt.eventStreamSerdeProvider(nt)}),CONTENT_LENGTH_HEADER="content-length";function contentLengthMiddleware(nt){return rt=>async it=>{const st=it.request;if(HttpRequest.isInstance(st)){const{body:lt,headers:ct}=st;if(lt&&Object.keys(ct).map(ut=>ut.toLowerCase()).indexOf(CONTENT_LENGTH_HEADER)===-1)try{const ut=nt(lt);st.headers={...st.headers,[CONTENT_LENGTH_HEADER]:String(ut)}}catch{}}return rt({...it,request:st})}}const contentLengthMiddlewareOptions={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},getContentLengthPlugin=nt=>({applyToStack:rt=>{rt.add(contentLengthMiddleware(nt.bodyLengthChecker),contentLengthMiddlewareOptions)}}),resolveParamsForS3=async nt=>{const rt=(nt==null?void 0:nt.Bucket)||"";if(typeof nt.Bucket=="string"&&(nt.Bucket=rt.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),isArnBucketName(rt)){if(nt.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!isDnsCompatibleBucketName(rt)||rt.indexOf(".")!==-1&&!String(nt.Endpoint).startsWith("http:")||rt.toLowerCase()!==rt||rt.length<3)&&(nt.ForcePathStyle=!0);return nt.DisableMultiRegionAccessPoints&&(nt.disableMultiRegionAccessPoints=!0,nt.DisableMRAP=!0),nt},DOMAIN_PATTERN=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,IP_ADDRESS_PATTERN=/(\d+\.){3}\d+/,DOTS_PATTERN=/\.\./,isDnsCompatibleBucketName=nt=>DOMAIN_PATTERN.test(nt)&&!IP_ADDRESS_PATTERN.test(nt)&&!DOTS_PATTERN.test(nt),isArnBucketName=nt=>{const[rt,it,st,lt,ct,ut]=nt.split(":"),dt=rt==="arn"&&nt.split(":").length>=6,ht=[rt,it,st,ct,ut].filter(Boolean).length===5;if(dt&&!ht)throw new Error(`Invalid ARN: ${nt} was an invalid ARN.`);return rt==="arn"&&!!it&&!!st&&!!ct&&!!ut},createConfigValueProvider=(nt,rt,it)=>{const st=async()=>{const lt=it[nt]??it[rt];return typeof lt=="function"?lt():lt};return nt==="credentialScope"||rt==="CredentialScope"?async()=>{const lt=typeof it.credentials=="function"?await it.credentials():it.credentials;return(lt==null?void 0:lt.credentialScope)??(lt==null?void 0:lt.CredentialScope)}:nt==="endpoint"||rt==="endpoint"?async()=>{const lt=await st();if(lt&&typeof lt=="object"){if("url"in lt)return lt.url.href;if("hostname"in lt){const{protocol:ct,hostname:ut,port:dt,path:ht}=lt;return`${ct}//${ut}${dt?":"+dt:""}${ht}`}}return lt}:st},getEndpointFromConfig=async nt=>{};function parseQueryString(nt){const rt={};if(nt=nt.replace(/^\?/,""),nt)for(const it of nt.split("&")){let[st,lt=null]=it.split("=");st=decodeURIComponent(st),lt&&(lt=decodeURIComponent(lt)),st in rt?Array.isArray(rt[st])?rt[st].push(lt):rt[st]=[rt[st],lt]:rt[st]=lt}return rt}const parseUrl=nt=>{if(typeof nt=="string")return parseUrl(new URL(nt));const{hostname:rt,pathname:it,port:st,protocol:lt,search:ct}=nt;let ut;return ct&&(ut=parseQueryString(ct)),{hostname:rt,port:st?parseInt(st):void 0,protocol:lt,path:it,query:ut}},toEndpointV1=nt=>typeof nt=="object"?"url"in nt?parseUrl(nt.url):nt:parseUrl(nt),getEndpointFromInstructions=async(nt,rt,it,st)=>{if(!it.endpoint){const ut=await getEndpointFromConfig(it.serviceId||"");ut&&(it.endpoint=()=>Promise.resolve(toEndpointV1(ut)))}const lt=await resolveParams(nt,rt,it);if(typeof it.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return it.endpointProvider(lt,st)},resolveParams=async(nt,rt,it)=>{var ct;const st={},lt=((ct=rt==null?void 0:rt.getEndpointParameterInstructions)==null?void 0:ct.call(rt))||{};for(const[ut,dt]of Object.entries(lt))switch(dt.type){case"staticContextParams":st[ut]=dt.value;break;case"contextParams":st[ut]=nt[dt.name];break;case"clientContextParams":case"builtInParams":st[ut]=await createConfigValueProvider(dt.name,ut,it)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(dt))}return Object.keys(lt).length===0&&Object.assign(st,it),String(it.serviceId).toLowerCase()==="s3"&&await resolveParamsForS3(st),st},endpointMiddleware=({config:nt,instructions:rt})=>(it,st)=>async lt=>{var dt,ht,ft;const ct=await getEndpointFromInstructions(lt.input,{getEndpointParameterInstructions(){return rt}},{...nt},st);st.endpointV2=ct,st.authSchemes=(dt=ct.properties)==null?void 0:dt.authSchemes;const ut=(ht=st.authSchemes)==null?void 0:ht[0];if(ut){st.signing_region=ut.signingRegion,st.signing_service=ut.signingName;const pt=getSmithyContext(st),mt=(ft=pt==null?void 0:pt.selectedHttpAuthScheme)==null?void 0:ft.httpAuthOption;mt&&(mt.signingProperties=Object.assign(mt.signingProperties||{},{signing_region:ut.signingRegion,signingRegion:ut.signingRegion,signing_service:ut.signingName,signingName:ut.signingName,signingRegionSet:ut.signingRegionSet},ut.properties))}return it({...lt})},deserializerMiddleware=(nt,rt)=>(it,st)=>async lt=>{const{response:ct}=await it(lt);try{const ut=await rt(ct,nt);return{response:ct,output:ut}}catch(ut){if(Object.defineProperty(ut,"$response",{value:ct}),!("$metadata"in ut)){const dt="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";ut.message+=`
  `+dt}throw ut}},serializerMiddleware=(nt,rt)=>(it,st)=>async lt=>{var dt;const ct=(dt=st.endpointV2)!=null&&dt.url&&nt.urlParser?async()=>nt.urlParser(st.endpointV2.url):nt.endpoint;if(!ct)throw new Error("No valid endpoint provider available.");const ut=await rt(lt.input,{...nt,endpoint:ct});return it({...lt,request:ut})},deserializerMiddlewareOption={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},serializerMiddlewareOption={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function getSerdePlugin(nt,rt,it){return{applyToStack:st=>{st.add(deserializerMiddleware(nt,it),deserializerMiddlewareOption),st.add(serializerMiddleware(nt,rt),serializerMiddlewareOption)}}}const endpointMiddlewareOptions={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:serializerMiddlewareOption.name},getEndpointPlugin=(nt,rt)=>({applyToStack:it=>{it.addRelativeTo(endpointMiddleware({config:nt,instructions:rt}),endpointMiddlewareOptions)}}),resolveEndpointConfig=nt=>{const rt=nt.tls??!0,{endpoint:it}=nt,st=it!=null?async()=>toEndpointV1(await normalizeProvider(it)()):void 0;return{...nt,endpoint:st,tls:rt,isCustomEndpoint:!!it,useDualstackEndpoint:normalizeProvider(nt.useDualstackEndpoint??!1),useFipsEndpoint:normalizeProvider(nt.useFipsEndpoint??!1)}};var RETRY_MODES;(function(nt){nt.STANDARD="standard",nt.ADAPTIVE="adaptive"})(RETRY_MODES||(RETRY_MODES={}));const DEFAULT_MAX_ATTEMPTS=3,DEFAULT_RETRY_MODE=RETRY_MODES.STANDARD,THROTTLING_ERROR_CODES=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],TRANSIENT_ERROR_CODES=["TimeoutError","RequestTimeout","RequestTimeoutException"],TRANSIENT_ERROR_STATUS_CODES=[500,502,503,504],NODEJS_TIMEOUT_ERROR_CODES=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],isThrottlingError=nt=>{var rt,it;return((rt=nt.$metadata)==null?void 0:rt.httpStatusCode)===429||THROTTLING_ERROR_CODES.includes(nt.name)||((it=nt.$retryable)==null?void 0:it.throttling)==!0},isTransientError=nt=>{var rt;return TRANSIENT_ERROR_CODES.includes(nt.name)||NODEJS_TIMEOUT_ERROR_CODES.includes((nt==null?void 0:nt.code)||"")||TRANSIENT_ERROR_STATUS_CODES.includes(((rt=nt.$metadata)==null?void 0:rt.httpStatusCode)||0)},isServerError=nt=>{var rt;if(((rt=nt.$metadata)==null?void 0:rt.httpStatusCode)!==void 0){const it=nt.$metadata.httpStatusCode;return 500<=it&&it<=599&&!isTransientError(nt)}return!1};class DefaultRateLimiter{constructor(rt){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(rt==null?void 0:rt.beta)??.7,this.minCapacity=(rt==null?void 0:rt.minCapacity)??1,this.minFillRate=(rt==null?void 0:rt.minFillRate)??.5,this.scaleConstant=(rt==null?void 0:rt.scaleConstant)??.4,this.smooth=(rt==null?void 0:rt.smooth)??.8;const it=this.getCurrentTimeInSeconds();this.lastThrottleTime=it,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(rt){if(this.enabled){if(this.refillTokenBucket(),rt>this.currentCapacity){const it=(rt-this.currentCapacity)/this.fillRate*1e3;await new Promise(st=>setTimeout(st,it))}this.currentCapacity=this.currentCapacity-rt}}refillTokenBucket(){const rt=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=rt;return}const it=(rt-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+it),this.lastTimestamp=rt}updateClientSendingRate(rt){let it;if(this.updateMeasuredRate(),isThrottlingError(rt)){const lt=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=lt,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),it=this.cubicThrottle(lt),this.enableTokenBucket()}else this.calculateTimeWindow(),it=this.cubicSuccess(this.getCurrentTimeInSeconds());const st=Math.min(it,2*this.measuredTxRate);this.updateTokenBucketRate(st)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(rt){return this.getPrecise(rt*this.beta)}cubicSuccess(rt){return this.getPrecise(this.scaleConstant*Math.pow(rt-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(rt){this.refillTokenBucket(),this.fillRate=Math.max(rt,this.minFillRate),this.maxCapacity=Math.max(rt,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const rt=this.getCurrentTimeInSeconds(),it=Math.floor(rt*2)/2;if(this.requestCount++,it>this.lastTxRateBucket){const st=this.requestCount/(it-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(st*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=it}}getPrecise(rt){return parseFloat(rt.toFixed(8))}}const DEFAULT_RETRY_DELAY_BASE=100,MAXIMUM_RETRY_DELAY=20*1e3,THROTTLING_RETRY_DELAY_BASE=500,INITIAL_RETRY_TOKENS=500,RETRY_COST=5,TIMEOUT_RETRY_COST=10,NO_RETRY_INCREMENT=1,INVOCATION_ID_HEADER="amz-sdk-invocation-id",REQUEST_HEADER="amz-sdk-request",getDefaultRetryBackoffStrategy=()=>{let nt=DEFAULT_RETRY_DELAY_BASE;return{computeNextBackoffDelay:st=>Math.floor(Math.min(MAXIMUM_RETRY_DELAY,Math.random()*2**st*nt)),setDelayBase:st=>{nt=st}}},createDefaultRetryToken=({retryDelay:nt,retryCount:rt,retryCost:it})=>({getRetryCount:()=>rt,getRetryDelay:()=>Math.min(MAXIMUM_RETRY_DELAY,nt),getRetryCost:()=>it});class StandardRetryStrategy{constructor(rt){this.maxAttempts=rt,this.mode=RETRY_MODES.STANDARD,this.capacity=INITIAL_RETRY_TOKENS,this.retryBackoffStrategy=getDefaultRetryBackoffStrategy(),this.maxAttemptsProvider=typeof rt=="function"?rt:async()=>rt}async acquireInitialRetryToken(rt){return createDefaultRetryToken({retryDelay:DEFAULT_RETRY_DELAY_BASE,retryCount:0})}async refreshRetryTokenForRetry(rt,it){const st=await this.getMaxAttempts();if(this.shouldRetry(rt,it,st)){const lt=it.errorType;this.retryBackoffStrategy.setDelayBase(lt==="THROTTLING"?THROTTLING_RETRY_DELAY_BASE:DEFAULT_RETRY_DELAY_BASE);const ct=this.retryBackoffStrategy.computeNextBackoffDelay(rt.getRetryCount()),ut=it.retryAfterHint?Math.max(it.retryAfterHint.getTime()-Date.now()||0,ct):ct,dt=this.getCapacityCost(lt);return this.capacity-=dt,createDefaultRetryToken({retryDelay:ut,retryCount:rt.getRetryCount()+1,retryCost:dt})}throw new Error("No retry token available")}recordSuccess(rt){this.capacity=Math.max(INITIAL_RETRY_TOKENS,this.capacity+(rt.getRetryCost()??NO_RETRY_INCREMENT))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${DEFAULT_MAX_ATTEMPTS}`),DEFAULT_MAX_ATTEMPTS}}shouldRetry(rt,it,st){return rt.getRetryCount()+1<st&&this.capacity>=this.getCapacityCost(it.errorType)&&this.isRetryableError(it.errorType)}getCapacityCost(rt){return rt==="TRANSIENT"?TIMEOUT_RETRY_COST:RETRY_COST}isRetryableError(rt){return rt==="THROTTLING"||rt==="TRANSIENT"}}class AdaptiveRetryStrategy{constructor(rt,it){this.maxAttemptsProvider=rt,this.mode=RETRY_MODES.ADAPTIVE;const{rateLimiter:st}=it??{};this.rateLimiter=st??new DefaultRateLimiter,this.standardRetryStrategy=new StandardRetryStrategy(rt)}async acquireInitialRetryToken(rt){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(rt)}async refreshRetryTokenForRetry(rt,it){return this.rateLimiter.updateClientSendingRate(it),this.standardRetryStrategy.refreshRetryTokenForRetry(rt,it)}recordSuccess(rt){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(rt)}}var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(nt){return typeof nt=="string"&&REGEX.test(nt)}var byteToHex=[];for(var i$7=0;i$7<256;++i$7)byteToHex.push((i$7+256).toString(16).substr(1));function stringify(nt){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,it=(byteToHex[nt[rt+0]]+byteToHex[nt[rt+1]]+byteToHex[nt[rt+2]]+byteToHex[nt[rt+3]]+"-"+byteToHex[nt[rt+4]]+byteToHex[nt[rt+5]]+"-"+byteToHex[nt[rt+6]]+byteToHex[nt[rt+7]]+"-"+byteToHex[nt[rt+8]]+byteToHex[nt[rt+9]]+"-"+byteToHex[nt[rt+10]]+byteToHex[nt[rt+11]]+byteToHex[nt[rt+12]]+byteToHex[nt[rt+13]]+byteToHex[nt[rt+14]]+byteToHex[nt[rt+15]]).toLowerCase();if(!validate(it))throw TypeError("Stringified UUID is invalid");return it}function v4(nt,rt,it){nt=nt||{};var st=nt.random||(nt.rng||rng)();if(st[6]=st[6]&15|64,st[8]=st[8]&63|128,rt){it=it||0;for(var lt=0;lt<16;++lt)rt[it+lt]=st[lt];return rt}return stringify(st)}const asSdkError=nt=>nt instanceof Error?nt:nt instanceof Object?Object.assign(new Error,nt):typeof nt=="string"?new Error(nt):new Error(`AWS SDK error wrapper for ${nt}`),resolveRetryConfig=nt=>{const{retryStrategy:rt}=nt,it=normalizeProvider(nt.maxAttempts??DEFAULT_MAX_ATTEMPTS);return{...nt,maxAttempts:it,retryStrategy:async()=>rt||(await normalizeProvider(nt.retryMode)()===RETRY_MODES.ADAPTIVE?new AdaptiveRetryStrategy(it):new StandardRetryStrategy(it))}},isStreamingPayload=nt=>(nt==null?void 0:nt.body)instanceof ReadableStream,retryMiddleware=nt=>(rt,it)=>async st=>{var ut;let lt=await nt.retryStrategy();const ct=await nt.maxAttempts();if(isRetryStrategyV2(lt)){lt=lt;let dt=await lt.acquireInitialRetryToken(it.partition_id),ht=new Error,ft=0,pt=0;const{request:mt}=st,gt=HttpRequest.isInstance(mt);for(gt&&(mt.headers[INVOCATION_ID_HEADER]=v4());;)try{gt&&(mt.headers[REQUEST_HEADER]=`attempt=${ft+1}; max=${ct}`);const{response:xt,output:yt}=await rt(st);return lt.recordSuccess(dt),yt.$metadata.attempts=ft+1,yt.$metadata.totalRetryDelay=pt,{response:xt,output:yt}}catch(xt){const yt=getRetryErrorInfo(xt);if(ht=asSdkError(xt),gt&&isStreamingPayload(mt))throw(ut=it.logger instanceof NoOpLogger?console:it.logger)==null||ut.warn("An error was encountered in a non-retryable streaming request."),ht;try{dt=await lt.refreshRetryTokenForRetry(dt,yt)}catch{throw ht.$metadata||(ht.$metadata={}),ht.$metadata.attempts=ft+1,ht.$metadata.totalRetryDelay=pt,ht}ft=dt.getRetryCount();const vt=dt.getRetryDelay();pt+=vt,await new Promise(St=>setTimeout(St,vt))}}else return lt=lt,lt!=null&&lt.mode&&(it.userAgent=[...it.userAgent||[],["cfg/retry-mode",lt.mode]]),lt.retry(rt,st)},isRetryStrategyV2=nt=>typeof nt.acquireInitialRetryToken<"u"&&typeof nt.refreshRetryTokenForRetry<"u"&&typeof nt.recordSuccess<"u",getRetryErrorInfo=nt=>{const rt={errorType:getRetryErrorType(nt)},it=getRetryAfterHint(nt.$response);return it&&(rt.retryAfterHint=it),rt},getRetryErrorType=nt=>isThrottlingError(nt)?"THROTTLING":isTransientError(nt)?"TRANSIENT":isServerError(nt)?"SERVER_ERROR":"CLIENT_ERROR",retryMiddlewareOptions={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},getRetryPlugin=nt=>({applyToStack:rt=>{rt.add(retryMiddleware(nt),retryMiddlewareOptions)}}),getRetryAfterHint=nt=>{if(!HttpResponse.isInstance(nt))return;const rt=Object.keys(nt.headers).find(ct=>ct.toLowerCase()==="retry-after");if(!rt)return;const it=nt.headers[rt],st=Number(it);return Number.isNaN(st)?new Date(it):new Date(st*1e3)},resolveClientEndpointParameters=nt=>({...nt,useFipsEndpoint:nt.useFipsEndpoint??!1,useDualstackEndpoint:nt.useDualstackEndpoint??!1,forcePathStyle:nt.forcePathStyle??!1,useAccelerateEndpoint:nt.useAccelerateEndpoint??!1,useGlobalEndpoint:nt.useGlobalEndpoint??!1,disableMultiregionAccessPoints:nt.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),commonParams={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class S3ServiceException extends ServiceException{constructor(rt){super(rt),Object.setPrototypeOf(this,S3ServiceException.prototype)}}class NoSuchUpload extends S3ServiceException{constructor(rt){super({name:"NoSuchUpload",$fault:"client",...rt}),this.name="NoSuchUpload",this.$fault="client",Object.setPrototypeOf(this,NoSuchUpload.prototype)}}class ObjectNotInActiveTierError extends S3ServiceException{constructor(rt){super({name:"ObjectNotInActiveTierError",$fault:"client",...rt}),this.name="ObjectNotInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,ObjectNotInActiveTierError.prototype)}}class BucketAlreadyExists extends S3ServiceException{constructor(rt){super({name:"BucketAlreadyExists",$fault:"client",...rt}),this.name="BucketAlreadyExists",this.$fault="client",Object.setPrototypeOf(this,BucketAlreadyExists.prototype)}}class BucketAlreadyOwnedByYou extends S3ServiceException{constructor(rt){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...rt}),this.name="BucketAlreadyOwnedByYou",this.$fault="client",Object.setPrototypeOf(this,BucketAlreadyOwnedByYou.prototype)}}class NoSuchBucket extends S3ServiceException{constructor(rt){super({name:"NoSuchBucket",$fault:"client",...rt}),this.name="NoSuchBucket",this.$fault="client",Object.setPrototypeOf(this,NoSuchBucket.prototype)}}var AnalyticsFilter;(function(nt){nt.visit=(rt,it)=>rt.Prefix!==void 0?it.Prefix(rt.Prefix):rt.Tag!==void 0?it.Tag(rt.Tag):rt.And!==void 0?it.And(rt.And):it._(rt.$unknown[0],rt.$unknown[1])})(AnalyticsFilter||(AnalyticsFilter={}));var LifecycleRuleFilter;(function(nt){nt.visit=(rt,it)=>rt.Prefix!==void 0?it.Prefix(rt.Prefix):rt.Tag!==void 0?it.Tag(rt.Tag):rt.ObjectSizeGreaterThan!==void 0?it.ObjectSizeGreaterThan(rt.ObjectSizeGreaterThan):rt.ObjectSizeLessThan!==void 0?it.ObjectSizeLessThan(rt.ObjectSizeLessThan):rt.And!==void 0?it.And(rt.And):it._(rt.$unknown[0],rt.$unknown[1])})(LifecycleRuleFilter||(LifecycleRuleFilter={}));var MetricsFilter;(function(nt){nt.visit=(rt,it)=>rt.Prefix!==void 0?it.Prefix(rt.Prefix):rt.Tag!==void 0?it.Tag(rt.Tag):rt.AccessPointArn!==void 0?it.AccessPointArn(rt.AccessPointArn):rt.And!==void 0?it.And(rt.And):it._(rt.$unknown[0],rt.$unknown[1])})(MetricsFilter||(MetricsFilter={}));var ReplicationRuleFilter;(function(nt){nt.visit=(rt,it)=>rt.Prefix!==void 0?it.Prefix(rt.Prefix):rt.Tag!==void 0?it.Tag(rt.Tag):rt.And!==void 0?it.And(rt.And):it._(rt.$unknown[0],rt.$unknown[1])})(ReplicationRuleFilter||(ReplicationRuleFilter={}));class InvalidObjectState extends S3ServiceException{constructor(rt){super({name:"InvalidObjectState",$fault:"client",...rt}),this.name="InvalidObjectState",this.$fault="client",Object.setPrototypeOf(this,InvalidObjectState.prototype),this.StorageClass=rt.StorageClass,this.AccessTier=rt.AccessTier}}class NoSuchKey extends S3ServiceException{constructor(rt){super({name:"NoSuchKey",$fault:"client",...rt}),this.name="NoSuchKey",this.$fault="client",Object.setPrototypeOf(this,NoSuchKey.prototype)}}class NotFound extends S3ServiceException{constructor(rt){super({name:"NotFound",$fault:"client",...rt}),this.name="NotFound",this.$fault="client",Object.setPrototypeOf(this,NotFound.prototype)}}const SessionCredentialsFilterSensitiveLog=nt=>({...nt,...nt.SecretAccessKey&&{SecretAccessKey:SENSITIVE_STRING},...nt.SessionToken&&{SessionToken:SENSITIVE_STRING}}),CreateSessionOutputFilterSensitiveLog=nt=>({...nt,...nt.Credentials&&{Credentials:SessionCredentialsFilterSensitiveLog(nt.Credentials)}});endpointMiddlewareOptions.name;serializerMiddlewareOption.name;retryMiddlewareOptions.name;function requestBuilder(nt,rt){return new RequestBuilder(nt,rt)}class RequestBuilder{constructor(rt,it){this.input=rt,this.context=it,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:rt,protocol:it="https",port:st,path:lt}=await this.context.endpoint();this.path=lt;for(const ct of this.resolvePathStack)ct(this.path);return new HttpRequest({protocol:it,hostname:this.hostname||rt,port:st,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(rt){return this.hostname=rt,this}bp(rt){return this.resolvePathStack.push(it=>{this.path=`${it!=null&&it.endsWith("/")?it.slice(0,-1):it||""}`+rt}),this}p(rt,it,st,lt){return this.resolvePathStack.push(ct=>{this.path=resolvedPath(ct,this.input,rt,it,st,lt)}),this}h(rt){return this.headers=rt,this}q(rt){return this.query=rt,this}b(rt){return this.body=rt,this}m(rt){return this.method=rt,this}}var validator$2={},util$3={};(function(nt){const rt=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",it=rt+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",st="["+rt+"]["+it+"]*",lt=new RegExp("^"+st+"$"),ct=function(dt,ht){const ft=[];let pt=ht.exec(dt);for(;pt;){const mt=[];mt.startIndex=ht.lastIndex-pt[0].length;const gt=pt.length;for(let xt=0;xt<gt;xt++)mt.push(pt[xt]);ft.push(mt),pt=ht.exec(dt)}return ft},ut=function(dt){const ht=lt.exec(dt);return!(ht===null||typeof ht>"u")};nt.isExist=function(dt){return typeof dt<"u"},nt.isEmptyObject=function(dt){return Object.keys(dt).length===0},nt.merge=function(dt,ht,ft){if(ht){const pt=Object.keys(ht),mt=pt.length;for(let gt=0;gt<mt;gt++)ft==="strict"?dt[pt[gt]]=[ht[pt[gt]]]:dt[pt[gt]]=ht[pt[gt]]}},nt.getValue=function(dt){return nt.isExist(dt)?dt:""},nt.isName=ut,nt.getAllMatches=ct,nt.nameRegexp=st})(util$3);const util$2=util$3,defaultOptions$2={allowBooleanAttributes:!1,unpairedTags:[]};validator$2.validate=function(nt,rt){rt=Object.assign({},defaultOptions$2,rt);const it=[];let st=!1,lt=!1;nt[0]==="\uFEFF"&&(nt=nt.substr(1));for(let ct=0;ct<nt.length;ct++)if(nt[ct]==="<"&&nt[ct+1]==="?"){if(ct+=2,ct=readPI(nt,ct),ct.err)return ct}else if(nt[ct]==="<"){let ut=ct;if(ct++,nt[ct]==="!"){ct=readCommentAndCDATA(nt,ct);continue}else{let dt=!1;nt[ct]==="/"&&(dt=!0,ct++);let ht="";for(;ct<nt.length&&nt[ct]!==">"&&nt[ct]!==" "&&nt[ct]!=="	"&&nt[ct]!==`
`&&nt[ct]!=="\r";ct++)ht+=nt[ct];if(ht=ht.trim(),ht[ht.length-1]==="/"&&(ht=ht.substring(0,ht.length-1),ct--),!validateTagName(ht)){let mt;return ht.trim().length===0?mt="Invalid space after '<'.":mt="Tag '"+ht+"' is an invalid name.",getErrorObject("InvalidTag",mt,getLineNumberForPosition(nt,ct))}const ft=readAttributeStr(nt,ct);if(ft===!1)return getErrorObject("InvalidAttr","Attributes for '"+ht+"' have open quote.",getLineNumberForPosition(nt,ct));let pt=ft.value;if(ct=ft.index,pt[pt.length-1]==="/"){const mt=ct-pt.length;pt=pt.substring(0,pt.length-1);const gt=validateAttributeString(pt,rt);if(gt===!0)st=!0;else return getErrorObject(gt.err.code,gt.err.msg,getLineNumberForPosition(nt,mt+gt.err.line))}else if(dt)if(ft.tagClosed){if(pt.trim().length>0)return getErrorObject("InvalidTag","Closing tag '"+ht+"' can't have attributes or invalid starting.",getLineNumberForPosition(nt,ut));{const mt=it.pop();if(ht!==mt.tagName){let gt=getLineNumberForPosition(nt,mt.tagStartPos);return getErrorObject("InvalidTag","Expected closing tag '"+mt.tagName+"' (opened in line "+gt.line+", col "+gt.col+") instead of closing tag '"+ht+"'.",getLineNumberForPosition(nt,ut))}it.length==0&&(lt=!0)}}else return getErrorObject("InvalidTag","Closing tag '"+ht+"' doesn't have proper closing.",getLineNumberForPosition(nt,ct));else{const mt=validateAttributeString(pt,rt);if(mt!==!0)return getErrorObject(mt.err.code,mt.err.msg,getLineNumberForPosition(nt,ct-pt.length+mt.err.line));if(lt===!0)return getErrorObject("InvalidXml","Multiple possible root nodes found.",getLineNumberForPosition(nt,ct));rt.unpairedTags.indexOf(ht)!==-1||it.push({tagName:ht,tagStartPos:ut}),st=!0}for(ct++;ct<nt.length;ct++)if(nt[ct]==="<")if(nt[ct+1]==="!"){ct++,ct=readCommentAndCDATA(nt,ct);continue}else if(nt[ct+1]==="?"){if(ct=readPI(nt,++ct),ct.err)return ct}else break;else if(nt[ct]==="&"){const mt=validateAmpersand(nt,ct);if(mt==-1)return getErrorObject("InvalidChar","char '&' is not expected.",getLineNumberForPosition(nt,ct));ct=mt}else if(lt===!0&&!isWhiteSpace(nt[ct]))return getErrorObject("InvalidXml","Extra text at the end",getLineNumberForPosition(nt,ct));nt[ct]==="<"&&ct--}}else{if(isWhiteSpace(nt[ct]))continue;return getErrorObject("InvalidChar","char '"+nt[ct]+"' is not expected.",getLineNumberForPosition(nt,ct))}if(st){if(it.length==1)return getErrorObject("InvalidTag","Unclosed tag '"+it[0].tagName+"'.",getLineNumberForPosition(nt,it[0].tagStartPos));if(it.length>0)return getErrorObject("InvalidXml","Invalid '"+JSON.stringify(it.map(ct=>ct.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return getErrorObject("InvalidXml","Start tag expected.",1);return!0};function isWhiteSpace(nt){return nt===" "||nt==="	"||nt===`
`||nt==="\r"}function readPI(nt,rt){const it=rt;for(;rt<nt.length;rt++)if(nt[rt]=="?"||nt[rt]==" "){const st=nt.substr(it,rt-it);if(rt>5&&st==="xml")return getErrorObject("InvalidXml","XML declaration allowed only at the start of the document.",getLineNumberForPosition(nt,rt));if(nt[rt]=="?"&&nt[rt+1]==">"){rt++;break}else continue}return rt}function readCommentAndCDATA(nt,rt){if(nt.length>rt+5&&nt[rt+1]==="-"&&nt[rt+2]==="-"){for(rt+=3;rt<nt.length;rt++)if(nt[rt]==="-"&&nt[rt+1]==="-"&&nt[rt+2]===">"){rt+=2;break}}else if(nt.length>rt+8&&nt[rt+1]==="D"&&nt[rt+2]==="O"&&nt[rt+3]==="C"&&nt[rt+4]==="T"&&nt[rt+5]==="Y"&&nt[rt+6]==="P"&&nt[rt+7]==="E"){let it=1;for(rt+=8;rt<nt.length;rt++)if(nt[rt]==="<")it++;else if(nt[rt]===">"&&(it--,it===0))break}else if(nt.length>rt+9&&nt[rt+1]==="["&&nt[rt+2]==="C"&&nt[rt+3]==="D"&&nt[rt+4]==="A"&&nt[rt+5]==="T"&&nt[rt+6]==="A"&&nt[rt+7]==="["){for(rt+=8;rt<nt.length;rt++)if(nt[rt]==="]"&&nt[rt+1]==="]"&&nt[rt+2]===">"){rt+=2;break}}return rt}const doubleQuote='"',singleQuote="'";function readAttributeStr(nt,rt){let it="",st="",lt=!1;for(;rt<nt.length;rt++){if(nt[rt]===doubleQuote||nt[rt]===singleQuote)st===""?st=nt[rt]:st!==nt[rt]||(st="");else if(nt[rt]===">"&&st===""){lt=!0;break}it+=nt[rt]}return st!==""?!1:{value:it,index:rt,tagClosed:lt}}const validAttrStrRegxp=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function validateAttributeString(nt,rt){const it=util$2.getAllMatches(nt,validAttrStrRegxp),st={};for(let lt=0;lt<it.length;lt++){if(it[lt][1].length===0)return getErrorObject("InvalidAttr","Attribute '"+it[lt][2]+"' has no space in starting.",getPositionFromMatch(it[lt]));if(it[lt][3]!==void 0&&it[lt][4]===void 0)return getErrorObject("InvalidAttr","Attribute '"+it[lt][2]+"' is without value.",getPositionFromMatch(it[lt]));if(it[lt][3]===void 0&&!rt.allowBooleanAttributes)return getErrorObject("InvalidAttr","boolean attribute '"+it[lt][2]+"' is not allowed.",getPositionFromMatch(it[lt]));const ct=it[lt][2];if(!validateAttrName(ct))return getErrorObject("InvalidAttr","Attribute '"+ct+"' is an invalid name.",getPositionFromMatch(it[lt]));if(!st.hasOwnProperty(ct))st[ct]=1;else return getErrorObject("InvalidAttr","Attribute '"+ct+"' is repeated.",getPositionFromMatch(it[lt]))}return!0}function validateNumberAmpersand(nt,rt){let it=/\d/;for(nt[rt]==="x"&&(rt++,it=/[\da-fA-F]/);rt<nt.length;rt++){if(nt[rt]===";")return rt;if(!nt[rt].match(it))break}return-1}function validateAmpersand(nt,rt){if(rt++,nt[rt]===";")return-1;if(nt[rt]==="#")return rt++,validateNumberAmpersand(nt,rt);let it=0;for(;rt<nt.length;rt++,it++)if(!(nt[rt].match(/\w/)&&it<20)){if(nt[rt]===";")break;return-1}return rt}function getErrorObject(nt,rt,it){return{err:{code:nt,msg:rt,line:it.line||it,col:it.col}}}function validateAttrName(nt){return util$2.isName(nt)}function validateTagName(nt){return util$2.isName(nt)}function getLineNumberForPosition(nt,rt){const it=nt.substring(0,rt).split(/\r?\n/);return{line:it.length,col:it[it.length-1].length+1}}function getPositionFromMatch(nt){return nt.startIndex+nt[1].length}var OptionsBuilder={};const defaultOptions$1={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(nt,rt){return rt},attributeValueProcessor:function(nt,rt){return rt},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(nt,rt,it){return nt}},buildOptions$1=function(nt){return Object.assign({},defaultOptions$1,nt)};OptionsBuilder.buildOptions=buildOptions$1;OptionsBuilder.defaultOptions=defaultOptions$1;class XmlNode{constructor(rt){this.tagname=rt,this.child=[],this[":@"]={}}add(rt,it){rt==="__proto__"&&(rt="#__proto__"),this.child.push({[rt]:it})}addChild(rt){rt.tagname==="__proto__"&&(rt.tagname="#__proto__"),rt[":@"]&&Object.keys(rt[":@"]).length>0?this.child.push({[rt.tagname]:rt.child,":@":rt[":@"]}):this.child.push({[rt.tagname]:rt.child})}}var xmlNode$1=XmlNode;const util$1=util$3;function readDocType$1(nt,rt){const it={};if(nt[rt+3]==="O"&&nt[rt+4]==="C"&&nt[rt+5]==="T"&&nt[rt+6]==="Y"&&nt[rt+7]==="P"&&nt[rt+8]==="E"){rt=rt+9;let st=1,lt=!1,ct=!1,ut="";for(;rt<nt.length;rt++)if(nt[rt]==="<"&&!ct){if(lt&&isEntity(nt,rt))rt+=7,[entityName,val,rt]=readEntityExp(nt,rt+1),val.indexOf("&")===-1&&(it[validateEntityName(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(lt&&isElement$1(nt,rt))rt+=8;else if(lt&&isAttlist(nt,rt))rt+=8;else if(lt&&isNotation(nt,rt))rt+=9;else if(isComment)ct=!0;else throw new Error("Invalid DOCTYPE");st++,ut=""}else if(nt[rt]===">"){if(ct?nt[rt-1]==="-"&&nt[rt-2]==="-"&&(ct=!1,st--):st--,st===0)break}else nt[rt]==="["?lt=!0:ut+=nt[rt];if(st!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:it,i:rt}}function readEntityExp(nt,rt){let it="";for(;rt<nt.length&&nt[rt]!=="'"&&nt[rt]!=='"';rt++)it+=nt[rt];if(it=it.trim(),it.indexOf(" ")!==-1)throw new Error("External entites are not supported");const st=nt[rt++];let lt="";for(;rt<nt.length&&nt[rt]!==st;rt++)lt+=nt[rt];return[it,lt,rt]}function isComment(nt,rt){return nt[rt+1]==="!"&&nt[rt+2]==="-"&&nt[rt+3]==="-"}function isEntity(nt,rt){return nt[rt+1]==="!"&&nt[rt+2]==="E"&&nt[rt+3]==="N"&&nt[rt+4]==="T"&&nt[rt+5]==="I"&&nt[rt+6]==="T"&&nt[rt+7]==="Y"}function isElement$1(nt,rt){return nt[rt+1]==="!"&&nt[rt+2]==="E"&&nt[rt+3]==="L"&&nt[rt+4]==="E"&&nt[rt+5]==="M"&&nt[rt+6]==="E"&&nt[rt+7]==="N"&&nt[rt+8]==="T"}function isAttlist(nt,rt){return nt[rt+1]==="!"&&nt[rt+2]==="A"&&nt[rt+3]==="T"&&nt[rt+4]==="T"&&nt[rt+5]==="L"&&nt[rt+6]==="I"&&nt[rt+7]==="S"&&nt[rt+8]==="T"}function isNotation(nt,rt){return nt[rt+1]==="!"&&nt[rt+2]==="N"&&nt[rt+3]==="O"&&nt[rt+4]==="T"&&nt[rt+5]==="A"&&nt[rt+6]==="T"&&nt[rt+7]==="I"&&nt[rt+8]==="O"&&nt[rt+9]==="N"}function validateEntityName(nt){if(util$1.isName(nt))return nt;throw new Error(`Invalid entity name ${nt}`)}var DocTypeReader=readDocType$1;const hexRegex=/^[-+]?0x[a-fA-F0-9]+$/,numRegex=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const consider={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function toNumber$1(nt,rt={}){if(rt=Object.assign({},consider,rt),!nt||typeof nt!="string")return nt;let it=nt.trim();if(rt.skipLike!==void 0&&rt.skipLike.test(it))return nt;if(rt.hex&&hexRegex.test(it))return Number.parseInt(it,16);{const st=numRegex.exec(it);if(st){const lt=st[1],ct=st[2];let ut=trimZeros(st[3]);const dt=st[4]||st[6];if(!rt.leadingZeros&&ct.length>0&&lt&&it[2]!==".")return nt;if(!rt.leadingZeros&&ct.length>0&&!lt&&it[1]!==".")return nt;{const ht=Number(it),ft=""+ht;return ft.search(/[eE]/)!==-1||dt?rt.eNotation?ht:nt:it.indexOf(".")!==-1?ft==="0"&&ut===""||ft===ut||lt&&ft==="-"+ut?ht:nt:ct?ut===ft||lt+ut===ft?ht:nt:it===ft||it===lt+ft?ht:nt}}else return nt}}function trimZeros(nt){return nt&&nt.indexOf(".")!==-1&&(nt=nt.replace(/0+$/,""),nt==="."?nt="0":nt[0]==="."?nt="0"+nt:nt[nt.length-1]==="."&&(nt=nt.substr(0,nt.length-1))),nt}var strnum=toNumber$1;const util=util$3,xmlNode=xmlNode$1,readDocType=DocTypeReader,toNumber=strnum;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,util.nameRegexp);let OrderedObjParser$1=class{constructor(rt){this.options=rt,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=addExternalEntities,this.parseXml=parseXml,this.parseTextData=parseTextData,this.resolveNameSpace=resolveNameSpace,this.buildAttributesMap=buildAttributesMap,this.isItStopNode=isItStopNode,this.replaceEntitiesValue=replaceEntitiesValue$1,this.readStopNodeData=readStopNodeData,this.saveTextToParentTag=saveTextToParentTag,this.addChild=addChild}};function addExternalEntities(nt){const rt=Object.keys(nt);for(let it=0;it<rt.length;it++){const st=rt[it];this.lastEntities[st]={regex:new RegExp("&"+st+";","g"),val:nt[st]}}}function parseTextData(nt,rt,it,st,lt,ct,ut){if(nt!==void 0&&(this.options.trimValues&&!st&&(nt=nt.trim()),nt.length>0)){ut||(nt=this.replaceEntitiesValue(nt));const dt=this.options.tagValueProcessor(rt,nt,it,lt,ct);return dt==null?nt:typeof dt!=typeof nt||dt!==nt?dt:this.options.trimValues?parseValue(nt,this.options.parseTagValue,this.options.numberParseOptions):nt.trim()===nt?parseValue(nt,this.options.parseTagValue,this.options.numberParseOptions):nt}}function resolveNameSpace(nt){if(this.options.removeNSPrefix){const rt=nt.split(":"),it=nt.charAt(0)==="/"?"/":"";if(rt[0]==="xmlns")return"";rt.length===2&&(nt=it+rt[1])}return nt}const attrsRegx=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function buildAttributesMap(nt,rt,it){if(!this.options.ignoreAttributes&&typeof nt=="string"){const st=util.getAllMatches(nt,attrsRegx),lt=st.length,ct={};for(let ut=0;ut<lt;ut++){const dt=this.resolveNameSpace(st[ut][1]);let ht=st[ut][4],ft=this.options.attributeNamePrefix+dt;if(dt.length)if(this.options.transformAttributeName&&(ft=this.options.transformAttributeName(ft)),ft==="__proto__"&&(ft="#__proto__"),ht!==void 0){this.options.trimValues&&(ht=ht.trim()),ht=this.replaceEntitiesValue(ht);const pt=this.options.attributeValueProcessor(dt,ht,rt);pt==null?ct[ft]=ht:typeof pt!=typeof ht||pt!==ht?ct[ft]=pt:ct[ft]=parseValue(ht,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(ct[ft]=!0)}if(!Object.keys(ct).length)return;if(this.options.attributesGroupName){const ut={};return ut[this.options.attributesGroupName]=ct,ut}return ct}}const parseXml=function(nt){nt=nt.replace(/\r\n?/g,`
`);const rt=new xmlNode("!xml");let it=rt,st="",lt="";for(let ct=0;ct<nt.length;ct++)if(nt[ct]==="<")if(nt[ct+1]==="/"){const dt=findClosingIndex(nt,">",ct,"Closing Tag is not closed.");let ht=nt.substring(ct+2,dt).trim();if(this.options.removeNSPrefix){const mt=ht.indexOf(":");mt!==-1&&(ht=ht.substr(mt+1))}this.options.transformTagName&&(ht=this.options.transformTagName(ht)),it&&(st=this.saveTextToParentTag(st,it,lt));const ft=lt.substring(lt.lastIndexOf(".")+1);if(ht&&this.options.unpairedTags.indexOf(ht)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${ht}>`);let pt=0;ft&&this.options.unpairedTags.indexOf(ft)!==-1?(pt=lt.lastIndexOf(".",lt.lastIndexOf(".")-1),this.tagsNodeStack.pop()):pt=lt.lastIndexOf("."),lt=lt.substring(0,pt),it=this.tagsNodeStack.pop(),st="",ct=dt}else if(nt[ct+1]==="?"){let dt=readTagExp(nt,ct,!1,"?>");if(!dt)throw new Error("Pi Tag is not closed.");if(st=this.saveTextToParentTag(st,it,lt),!(this.options.ignoreDeclaration&&dt.tagName==="?xml"||this.options.ignorePiTags)){const ht=new xmlNode(dt.tagName);ht.add(this.options.textNodeName,""),dt.tagName!==dt.tagExp&&dt.attrExpPresent&&(ht[":@"]=this.buildAttributesMap(dt.tagExp,lt,dt.tagName)),this.addChild(it,ht,lt)}ct=dt.closeIndex+1}else if(nt.substr(ct+1,3)==="!--"){const dt=findClosingIndex(nt,"-->",ct+4,"Comment is not closed.");if(this.options.commentPropName){const ht=nt.substring(ct+4,dt-2);st=this.saveTextToParentTag(st,it,lt),it.add(this.options.commentPropName,[{[this.options.textNodeName]:ht}])}ct=dt}else if(nt.substr(ct+1,2)==="!D"){const dt=readDocType(nt,ct);this.docTypeEntities=dt.entities,ct=dt.i}else if(nt.substr(ct+1,2)==="!["){const dt=findClosingIndex(nt,"]]>",ct,"CDATA is not closed.")-2,ht=nt.substring(ct+9,dt);if(st=this.saveTextToParentTag(st,it,lt),this.options.cdataPropName)it.add(this.options.cdataPropName,[{[this.options.textNodeName]:ht}]);else{let ft=this.parseTextData(ht,it.tagname,lt,!0,!1,!0);ft==null&&(ft=""),it.add(this.options.textNodeName,ft)}ct=dt+2}else{let dt=readTagExp(nt,ct,this.options.removeNSPrefix),ht=dt.tagName,ft=dt.tagExp,pt=dt.attrExpPresent,mt=dt.closeIndex;this.options.transformTagName&&(ht=this.options.transformTagName(ht)),it&&st&&it.tagname!=="!xml"&&(st=this.saveTextToParentTag(st,it,lt,!1));const gt=it;if(gt&&this.options.unpairedTags.indexOf(gt.tagname)!==-1&&(it=this.tagsNodeStack.pop(),lt=lt.substring(0,lt.lastIndexOf("."))),ht!==rt.tagname&&(lt+=lt?"."+ht:ht),this.isItStopNode(this.options.stopNodes,lt,ht)){let xt="";if(ft.length>0&&ft.lastIndexOf("/")===ft.length-1)ct=dt.closeIndex;else if(this.options.unpairedTags.indexOf(ht)!==-1)ct=dt.closeIndex;else{const vt=this.readStopNodeData(nt,ht,mt+1);if(!vt)throw new Error(`Unexpected end of ${ht}`);ct=vt.i,xt=vt.tagContent}const yt=new xmlNode(ht);ht!==ft&&pt&&(yt[":@"]=this.buildAttributesMap(ft,lt,ht)),xt&&(xt=this.parseTextData(xt,ht,lt,!0,pt,!0,!0)),lt=lt.substr(0,lt.lastIndexOf(".")),yt.add(this.options.textNodeName,xt),this.addChild(it,yt,lt)}else{if(ft.length>0&&ft.lastIndexOf("/")===ft.length-1){ht[ht.length-1]==="/"?(ht=ht.substr(0,ht.length-1),ft=ht):ft=ft.substr(0,ft.length-1),this.options.transformTagName&&(ht=this.options.transformTagName(ht));const xt=new xmlNode(ht);ht!==ft&&pt&&(xt[":@"]=this.buildAttributesMap(ft,lt,ht)),this.addChild(it,xt,lt),lt=lt.substr(0,lt.lastIndexOf("."))}else{const xt=new xmlNode(ht);this.tagsNodeStack.push(it),ht!==ft&&pt&&(xt[":@"]=this.buildAttributesMap(ft,lt,ht)),this.addChild(it,xt,lt),it=xt}st="",ct=mt}}else st+=nt[ct];return rt.child};function addChild(nt,rt,it){const st=this.options.updateTag(rt.tagname,it,rt[":@"]);st===!1||(typeof st=="string"&&(rt.tagname=st),nt.addChild(rt))}const replaceEntitiesValue$1=function(nt){if(this.options.processEntities){for(let rt in this.docTypeEntities){const it=this.docTypeEntities[rt];nt=nt.replace(it.regx,it.val)}for(let rt in this.lastEntities){const it=this.lastEntities[rt];nt=nt.replace(it.regex,it.val)}if(this.options.htmlEntities)for(let rt in this.htmlEntities){const it=this.htmlEntities[rt];nt=nt.replace(it.regex,it.val)}nt=nt.replace(this.ampEntity.regex,this.ampEntity.val)}return nt};function saveTextToParentTag(nt,rt,it,st){return nt&&(st===void 0&&(st=Object.keys(rt.child).length===0),nt=this.parseTextData(nt,rt.tagname,it,!1,rt[":@"]?Object.keys(rt[":@"]).length!==0:!1,st),nt!==void 0&&nt!==""&&rt.add(this.options.textNodeName,nt),nt=""),nt}function isItStopNode(nt,rt,it){const st="*."+it;for(const lt in nt){const ct=nt[lt];if(st===ct||rt===ct)return!0}return!1}function tagExpWithClosingIndex(nt,rt,it=">"){let st,lt="";for(let ct=rt;ct<nt.length;ct++){let ut=nt[ct];if(st)ut===st&&(st="");else if(ut==='"'||ut==="'")st=ut;else if(ut===it[0])if(it[1]){if(nt[ct+1]===it[1])return{data:lt,index:ct}}else return{data:lt,index:ct};else ut==="	"&&(ut=" ");lt+=ut}}function findClosingIndex(nt,rt,it,st){const lt=nt.indexOf(rt,it);if(lt===-1)throw new Error(st);return lt+rt.length-1}function readTagExp(nt,rt,it,st=">"){const lt=tagExpWithClosingIndex(nt,rt+1,st);if(!lt)return;let ct=lt.data;const ut=lt.index,dt=ct.search(/\s/);let ht=ct,ft=!0;if(dt!==-1&&(ht=ct.substr(0,dt).replace(/\s\s*$/,""),ct=ct.substr(dt+1)),it){const pt=ht.indexOf(":");pt!==-1&&(ht=ht.substr(pt+1),ft=ht!==lt.data.substr(pt+1))}return{tagName:ht,tagExp:ct,closeIndex:ut,attrExpPresent:ft}}function readStopNodeData(nt,rt,it){const st=it;let lt=1;for(;it<nt.length;it++)if(nt[it]==="<")if(nt[it+1]==="/"){const ct=findClosingIndex(nt,">",it,`${rt} is not closed`);if(nt.substring(it+2,ct).trim()===rt&&(lt--,lt===0))return{tagContent:nt.substring(st,it),i:ct};it=ct}else if(nt[it+1]==="?")it=findClosingIndex(nt,"?>",it+1,"StopNode is not closed.");else if(nt.substr(it+1,3)==="!--")it=findClosingIndex(nt,"-->",it+3,"StopNode is not closed.");else if(nt.substr(it+1,2)==="![")it=findClosingIndex(nt,"]]>",it,"StopNode is not closed.")-2;else{const ct=readTagExp(nt,it,">");ct&&((ct&&ct.tagName)===rt&&ct.tagExp[ct.tagExp.length-1]!=="/"&&lt++,it=ct.closeIndex)}}function parseValue(nt,rt,it){if(rt&&typeof nt=="string"){const st=nt.trim();return st==="true"?!0:st==="false"?!1:toNumber(nt,it)}else return util.isExist(nt)?nt:""}var OrderedObjParser_1=OrderedObjParser$1,node2json={};function prettify$1(nt,rt){return compress(nt,rt)}function compress(nt,rt,it){let st;const lt={};for(let ct=0;ct<nt.length;ct++){const ut=nt[ct],dt=propName$1(ut);let ht="";if(it===void 0?ht=dt:ht=it+"."+dt,dt===rt.textNodeName)st===void 0?st=ut[dt]:st+=""+ut[dt];else{if(dt===void 0)continue;if(ut[dt]){let ft=compress(ut[dt],rt,ht);const pt=isLeafTag(ft,rt);ut[":@"]?assignAttributes(ft,ut[":@"],ht,rt):Object.keys(ft).length===1&&ft[rt.textNodeName]!==void 0&&!rt.alwaysCreateTextNode?ft=ft[rt.textNodeName]:Object.keys(ft).length===0&&(rt.alwaysCreateTextNode?ft[rt.textNodeName]="":ft=""),lt[dt]!==void 0&&lt.hasOwnProperty(dt)?(Array.isArray(lt[dt])||(lt[dt]=[lt[dt]]),lt[dt].push(ft)):rt.isArray(dt,ht,pt)?lt[dt]=[ft]:lt[dt]=ft}}}return typeof st=="string"?st.length>0&&(lt[rt.textNodeName]=st):st!==void 0&&(lt[rt.textNodeName]=st),lt}function propName$1(nt){const rt=Object.keys(nt);for(let it=0;it<rt.length;it++){const st=rt[it];if(st!==":@")return st}}function assignAttributes(nt,rt,it,st){if(rt){const lt=Object.keys(rt),ct=lt.length;for(let ut=0;ut<ct;ut++){const dt=lt[ut];st.isArray(dt,it+"."+dt,!0,!0)?nt[dt]=[rt[dt]]:nt[dt]=rt[dt]}}}function isLeafTag(nt,rt){const{textNodeName:it}=rt,st=Object.keys(nt).length;return!!(st===0||st===1&&(nt[it]||typeof nt[it]=="boolean"||nt[it]===0))}node2json.prettify=prettify$1;const{buildOptions}=OptionsBuilder,OrderedObjParser=OrderedObjParser_1,{prettify}=node2json,validator$1=validator$2;let XMLParser$1=class{constructor(rt){this.externalEntities={},this.options=buildOptions(rt)}parse(rt,it){if(typeof rt!="string")if(rt.toString)rt=rt.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(it){it===!0&&(it={});const ct=validator$1.validate(rt,it);if(ct!==!0)throw Error(`${ct.err.msg}:${ct.err.line}:${ct.err.col}`)}const st=new OrderedObjParser(this.options);st.addExternalEntities(this.externalEntities);const lt=st.parseXml(rt);return this.options.preserveOrder||lt===void 0?lt:prettify(lt,this.options)}addEntity(rt,it){if(it.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(rt.indexOf("&")!==-1||rt.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(it==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[rt]=it}};var XMLParser_1=XMLParser$1;const EOL=`
`;function toXml(nt,rt){let it="";return rt.format&&rt.indentBy.length>0&&(it=EOL),arrToStr(nt,rt,"",it)}function arrToStr(nt,rt,it,st){let lt="",ct=!1;for(let ut=0;ut<nt.length;ut++){const dt=nt[ut],ht=propName(dt);let ft="";if(it.length===0?ft=ht:ft=`${it}.${ht}`,ht===rt.textNodeName){let yt=dt[ht];isStopNode(ft,rt)||(yt=rt.tagValueProcessor(ht,yt),yt=replaceEntitiesValue(yt,rt)),ct&&(lt+=st),lt+=yt,ct=!1;continue}else if(ht===rt.cdataPropName){ct&&(lt+=st),lt+=`<![CDATA[${dt[ht][0][rt.textNodeName]}]]>`,ct=!1;continue}else if(ht===rt.commentPropName){lt+=st+`<!--${dt[ht][0][rt.textNodeName]}-->`,ct=!0;continue}else if(ht[0]==="?"){const yt=attr_to_str(dt[":@"],rt),vt=ht==="?xml"?"":st;let St=dt[ht][0][rt.textNodeName];St=St.length!==0?" "+St:"",lt+=vt+`<${ht}${St}${yt}?>`,ct=!0;continue}let pt=st;pt!==""&&(pt+=rt.indentBy);const mt=attr_to_str(dt[":@"],rt),gt=st+`<${ht}${mt}`,xt=arrToStr(dt[ht],rt,ft,pt);rt.unpairedTags.indexOf(ht)!==-1?rt.suppressUnpairedNode?lt+=gt+">":lt+=gt+"/>":(!xt||xt.length===0)&&rt.suppressEmptyNode?lt+=gt+"/>":xt&&xt.endsWith(">")?lt+=gt+`>${xt}${st}</${ht}>`:(lt+=gt+">",xt&&st!==""&&(xt.includes("/>")||xt.includes("</"))?lt+=st+rt.indentBy+xt+st:lt+=xt,lt+=`</${ht}>`),ct=!0}return lt}function propName(nt){const rt=Object.keys(nt);for(let it=0;it<rt.length;it++){const st=rt[it];if(st!==":@")return st}}function attr_to_str(nt,rt){let it="";if(nt&&!rt.ignoreAttributes)for(let st in nt){let lt=rt.attributeValueProcessor(st,nt[st]);lt=replaceEntitiesValue(lt,rt),lt===!0&&rt.suppressBooleanAttributes?it+=` ${st.substr(rt.attributeNamePrefix.length)}`:it+=` ${st.substr(rt.attributeNamePrefix.length)}="${lt}"`}return it}function isStopNode(nt,rt){nt=nt.substr(0,nt.length-rt.textNodeName.length-1);let it=nt.substr(nt.lastIndexOf(".")+1);for(let st in rt.stopNodes)if(rt.stopNodes[st]===nt||rt.stopNodes[st]==="*."+it)return!0;return!1}function replaceEntitiesValue(nt,rt){if(nt&&nt.length>0&&rt.processEntities)for(let it=0;it<rt.entities.length;it++){const st=rt.entities[it];nt=nt.replace(st.regex,st.val)}return nt}var orderedJs2Xml=toXml;const buildFromOrderedJs=orderedJs2Xml,defaultOptions={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(nt,rt){return rt},attributeValueProcessor:function(nt,rt){return rt},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Builder(nt){this.options=Object.assign({},defaultOptions,nt),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=isAttribute),this.processTextOrObjNode=processTextOrObjNode,this.options.format?(this.indentate=indentate,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Builder.prototype.build=function(nt){return this.options.preserveOrder?buildFromOrderedJs(nt,this.options):(Array.isArray(nt)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(nt={[this.options.arrayNodeName]:nt}),this.j2x(nt,0).val)};Builder.prototype.j2x=function(nt,rt){let it="",st="";for(let lt in nt)if(!(typeof nt[lt]>"u"))if(nt[lt]===null)lt[0]==="?"?st+=this.indentate(rt)+"<"+lt+"?"+this.tagEndChar:st+=this.indentate(rt)+"<"+lt+"/"+this.tagEndChar;else if(nt[lt]instanceof Date)st+=this.buildTextValNode(nt[lt],lt,"",rt);else if(typeof nt[lt]!="object"){const ct=this.isAttribute(lt);if(ct)it+=this.buildAttrPairStr(ct,""+nt[lt]);else if(lt===this.options.textNodeName){let ut=this.options.tagValueProcessor(lt,""+nt[lt]);st+=this.replaceEntitiesValue(ut)}else st+=this.buildTextValNode(nt[lt],lt,"",rt)}else if(Array.isArray(nt[lt])){const ct=nt[lt].length;let ut="";for(let dt=0;dt<ct;dt++){const ht=nt[lt][dt];typeof ht>"u"||(ht===null?lt[0]==="?"?st+=this.indentate(rt)+"<"+lt+"?"+this.tagEndChar:st+=this.indentate(rt)+"<"+lt+"/"+this.tagEndChar:typeof ht=="object"?this.options.oneListGroup?ut+=this.j2x(ht,rt+1).val:ut+=this.processTextOrObjNode(ht,lt,rt):ut+=this.buildTextValNode(ht,lt,"",rt))}this.options.oneListGroup&&(ut=this.buildObjectNode(ut,lt,"",rt)),st+=ut}else if(this.options.attributesGroupName&&lt===this.options.attributesGroupName){const ct=Object.keys(nt[lt]),ut=ct.length;for(let dt=0;dt<ut;dt++)it+=this.buildAttrPairStr(ct[dt],""+nt[lt][ct[dt]])}else st+=this.processTextOrObjNode(nt[lt],lt,rt);return{attrStr:it,val:st}};Builder.prototype.buildAttrPairStr=function(nt,rt){return rt=this.options.attributeValueProcessor(nt,""+rt),rt=this.replaceEntitiesValue(rt),this.options.suppressBooleanAttributes&&rt==="true"?" "+nt:" "+nt+'="'+rt+'"'};function processTextOrObjNode(nt,rt,it){const st=this.j2x(nt,it+1);return nt[this.options.textNodeName]!==void 0&&Object.keys(nt).length===1?this.buildTextValNode(nt[this.options.textNodeName],rt,st.attrStr,it):this.buildObjectNode(st.val,rt,st.attrStr,it)}Builder.prototype.buildObjectNode=function(nt,rt,it,st){if(nt==="")return rt[0]==="?"?this.indentate(st)+"<"+rt+it+"?"+this.tagEndChar:this.indentate(st)+"<"+rt+it+this.closeTag(rt)+this.tagEndChar;{let lt="</"+rt+this.tagEndChar,ct="";return rt[0]==="?"&&(ct="?",lt=""),it&&nt.indexOf("<")===-1?this.indentate(st)+"<"+rt+it+ct+">"+nt+lt:this.options.commentPropName!==!1&&rt===this.options.commentPropName&&ct.length===0?this.indentate(st)+`<!--${nt}-->`+this.newLine:this.indentate(st)+"<"+rt+it+ct+this.tagEndChar+nt+this.indentate(st)+lt}};Builder.prototype.closeTag=function(nt){let rt="";return this.options.unpairedTags.indexOf(nt)!==-1?this.options.suppressUnpairedNode||(rt="/"):this.options.suppressEmptyNode?rt="/":rt=`></${nt}`,rt};Builder.prototype.buildTextValNode=function(nt,rt,it,st){if(this.options.cdataPropName!==!1&&rt===this.options.cdataPropName)return this.indentate(st)+`<![CDATA[${nt}]]>`+this.newLine;if(this.options.commentPropName!==!1&&rt===this.options.commentPropName)return this.indentate(st)+`<!--${nt}-->`+this.newLine;if(rt[0]==="?")return this.indentate(st)+"<"+rt+it+"?"+this.tagEndChar;{let lt=this.options.tagValueProcessor(rt,nt);return lt=this.replaceEntitiesValue(lt),lt===""?this.indentate(st)+"<"+rt+it+this.closeTag(rt)+this.tagEndChar:this.indentate(st)+"<"+rt+it+">"+lt+"</"+rt+this.tagEndChar}};Builder.prototype.replaceEntitiesValue=function(nt){if(nt&&nt.length>0&&this.options.processEntities)for(let rt=0;rt<this.options.entities.length;rt++){const it=this.options.entities[rt];nt=nt.replace(it.regex,it.val)}return nt};function indentate(nt){return this.options.indentBy.repeat(nt)}function isAttribute(nt){return nt.startsWith(this.options.attributeNamePrefix)?nt.substr(this.attrPrefixLen):!1}var json2xml=Builder;const validator=validator$2,XMLParser=XMLParser_1,XMLBuilder=json2xml;var fxp={XMLParser,XMLValidator:validator,XMLBuilder};class ObjectAlreadyInActiveTierError extends S3ServiceException{constructor(rt){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...rt}),this.name="ObjectAlreadyInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,ObjectAlreadyInActiveTierError.prototype)}}var SelectObjectContentEventStream;(function(nt){nt.visit=(rt,it)=>rt.Records!==void 0?it.Records(rt.Records):rt.Stats!==void 0?it.Stats(rt.Stats):rt.Progress!==void 0?it.Progress(rt.Progress):rt.Cont!==void 0?it.Cont(rt.Cont):rt.End!==void 0?it.End(rt.End):it._(rt.$unknown[0],rt.$unknown[1])})(SelectObjectContentEventStream||(SelectObjectContentEventStream={}));const PutObjectOutputFilterSensitiveLog=nt=>({...nt,...nt.SSEKMSKeyId&&{SSEKMSKeyId:SENSITIVE_STRING},...nt.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:SENSITIVE_STRING}}),PutObjectRequestFilterSensitiveLog=nt=>({...nt,...nt.SSECustomerKey&&{SSECustomerKey:SENSITIVE_STRING},...nt.SSEKMSKeyId&&{SSEKMSKeyId:SENSITIVE_STRING},...nt.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:SENSITIVE_STRING}}),se_CreateSessionCommand=async(nt,rt)=>{const it=requestBuilder(nt,rt),st=map$2({},isSerializableHeaderValue,{[_xacsm]:nt[_SM]});it.bp("/"),it.p("Bucket",()=>nt.Bucket,"{Bucket}",!1);const lt=map$2({[_s]:[,""]});return it.m("GET").h(st).q(lt).b(void 0),it.build()},se_PutObjectCommand=async(nt,rt)=>{const it=requestBuilder(nt,rt),st=map$2({},isSerializableHeaderValue,{[_ct]:nt[_CT]||"application/octet-stream",[_xaa]:nt[_ACL],[_cc]:nt[_CC],[_cd]:nt[_CD],[_ce]:nt[_CE],[_cl]:nt[_CL],[_cl_]:[()=>isSerializableHeaderValue(nt[_CLo]),()=>nt[_CLo].toString()],[_cm]:nt[_CMD],[_xasca]:nt[_CA],[_xacc]:nt[_CCRC],[_xacc_]:nt[_CCRCC],[_xacs]:nt[_CSHA],[_xacs_]:nt[_CSHAh],[_e$1]:[()=>isSerializableHeaderValue(nt[_E]),()=>dateToUtcString(nt[_E]).toString()],[_xagfc]:nt[_GFC],[_xagr]:nt[_GR],[_xagra]:nt[_GRACP],[_xagwa]:nt[_GWACP],[_xasse]:nt[_SSE],[_xasc]:nt[_SC],[_xawrl]:nt[_WRL],[_xasseca]:nt[_SSECA],[_xasseck]:nt[_SSECK],[_xasseckm]:nt[_SSECKMD],[_xasseakki]:nt[_SSEKMSKI],[_xassec]:nt[_SSEKMSEC],[_xassebke]:[()=>isSerializableHeaderValue(nt[_BKE]),()=>nt[_BKE].toString()],[_xarp]:nt[_RP],[_xat]:nt[_T],[_xaolm]:nt[_OLM],[_xaolrud]:[()=>isSerializableHeaderValue(nt[_OLRUD]),()=>(nt[_OLRUD].toISOString().split(".")[0]+"Z").toString()],[_xaollh]:nt[_OLLHS],[_xaebo]:nt[_EBO],...nt.Metadata!==void 0&&Object.keys(nt.Metadata).reduce((dt,ht)=>(dt[`x-amz-meta-${ht.toLowerCase()}`]=nt.Metadata[ht],dt),{})});it.bp("/{Key+}"),it.p("Bucket",()=>nt.Bucket,"{Bucket}",!1),it.p("Key",()=>nt.Key,"{Key+}",!0);const lt=map$2({[_xi]:[,"PutObject"]});let ct,ut;return nt.Body!==void 0&&(ut=nt.Body,ct=ut),it.m("PUT").h(st).q(lt).b(ct),it.build()},de_CreateSessionCommand=async(nt,rt)=>{if(nt.statusCode!==200&&nt.statusCode>=300)return de_CommandError(nt,rt);const it=map$2({$metadata:deserializeMetadata(nt)}),st=expectNonNull(expectObject(await parseBody(nt.body,rt)),"body");return st[_C]!=null&&(it[_C]=de_SessionCredentials(st[_C])),it},de_PutObjectCommand=async(nt,rt)=>{if(nt.statusCode!==200&&nt.statusCode>=300)return de_CommandError(nt,rt);const it=map$2({$metadata:deserializeMetadata(nt),[_Exp]:[,nt.headers[_xae]],[_ETa]:[,nt.headers[_eta]],[_CCRC]:[,nt.headers[_xacc]],[_CCRCC]:[,nt.headers[_xacc_]],[_CSHA]:[,nt.headers[_xacs]],[_CSHAh]:[,nt.headers[_xacs_]],[_SSE]:[,nt.headers[_xasse]],[_VI]:[,nt.headers[_xavi]],[_SSECA]:[,nt.headers[_xasseca]],[_SSECKMD]:[,nt.headers[_xasseckm]],[_SSEKMSKI]:[,nt.headers[_xasseakki]],[_SSEKMSEC]:[,nt.headers[_xassec]],[_BKE]:[()=>nt.headers[_xassebke]!==void 0,()=>parseBoolean(nt.headers[_xassebke])],[_RC]:[,nt.headers[_xarc]]});return await collectBody(nt.body,rt),it},de_CommandError=async(nt,rt)=>{const it={...nt,body:await parseErrorBody(nt.body,rt)},st=loadRestXmlErrorCode(nt,it.body);switch(st){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await de_NoSuchUploadRes(it);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await de_ObjectNotInActiveTierErrorRes(it);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await de_BucketAlreadyExistsRes(it);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await de_BucketAlreadyOwnedByYouRes(it);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await de_NoSuchBucketRes(it);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await de_InvalidObjectStateRes(it);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await de_NoSuchKeyRes(it);case"NotFound":case"com.amazonaws.s3#NotFound":throw await de_NotFoundRes(it);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await de_ObjectAlreadyInActiveTierErrorRes(it);default:const lt=it.body;return throwDefaultError({output:nt,parsedBody:lt,errorCode:st})}},throwDefaultError=withBaseException(S3ServiceException),de_BucketAlreadyExistsRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new BucketAlreadyExists({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_BucketAlreadyOwnedByYouRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new BucketAlreadyOwnedByYou({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_InvalidObjectStateRes=async(nt,rt)=>{const it=map$2({}),st=nt.body;st[_AT]!=null&&(it[_AT]=expectString(st[_AT])),st[_SC]!=null&&(it[_SC]=expectString(st[_SC]));const lt=new InvalidObjectState({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(lt,nt.body)},de_NoSuchBucketRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new NoSuchBucket({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_NoSuchKeyRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new NoSuchKey({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_NoSuchUploadRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new NoSuchUpload({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_NotFoundRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new NotFound({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_ObjectAlreadyInActiveTierErrorRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new ObjectAlreadyInActiveTierError({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_ObjectNotInActiveTierErrorRes=async(nt,rt)=>{const it=map$2({});nt.body;const st=new ObjectNotInActiveTierError({$metadata:deserializeMetadata(nt),...it});return decorateServiceException(st,nt.body)},de_SessionCredentials=(nt,rt)=>{const it={};return nt[_AKI]!=null&&(it[_AKI]=expectString(nt[_AKI])),nt[_SAK]!=null&&(it[_SAK]=expectString(nt[_SAK])),nt[_ST]!=null&&(it[_ST]=expectString(nt[_ST])),nt[_Exp]!=null&&(it[_Exp]=expectNonNull(parseRfc3339DateTimeWithOffset(nt[_Exp]))),it},deserializeMetadata=nt=>({httpStatusCode:nt.statusCode,requestId:nt.headers["x-amzn-requestid"]??nt.headers["x-amzn-request-id"]??nt.headers["x-amz-request-id"],extendedRequestId:nt.headers["x-amz-id-2"],cfId:nt.headers["x-amz-cf-id"]}),collectBodyString=(nt,rt)=>collectBody(nt,rt).then(it=>rt.utf8Encoder(it)),isSerializableHeaderValue=nt=>nt!=null&&nt!==""&&(!Object.getOwnPropertyNames(nt).includes("length")||nt.length!=0)&&(!Object.getOwnPropertyNames(nt).includes("size")||nt.size!=0),_ACL="ACL",_AKI="AccessKeyId",_AT="AccessTier",_BKE="BucketKeyEnabled",_C="Credentials",_CA="ChecksumAlgorithm",_CC="CacheControl",_CCRC="ChecksumCRC32",_CCRCC="ChecksumCRC32C",_CD="ContentDisposition",_CE="ContentEncoding",_CL="ContentLanguage",_CLo="ContentLength",_CMD="ContentMD5",_CSHA="ChecksumSHA1",_CSHAh="ChecksumSHA256",_CT="ContentType",_E="Expires",_EBO="ExpectedBucketOwner",_ETa="ETag",_Exp="Expiration",_GFC="GrantFullControl",_GR="GrantRead",_GRACP="GrantReadACP",_GWACP="GrantWriteACP",_OLLHS="ObjectLockLegalHoldStatus",_OLM="ObjectLockMode",_OLRUD="ObjectLockRetainUntilDate",_RC="RequestCharged",_RP="RequestPayer",_SAK="SecretAccessKey",_SC="StorageClass",_SM="SessionMode",_SSE="ServerSideEncryption",_SSECA="SSECustomerAlgorithm",_SSECK="SSECustomerKey",_SSECKMD="SSECustomerKeyMD5",_SSEKMSEC="SSEKMSEncryptionContext",_SSEKMSKI="SSEKMSKeyId",_ST="SessionToken",_T="Tagging",_VI="VersionId",_WRL="WebsiteRedirectLocation",_cc="cache-control",_cd="content-disposition",_ce="content-encoding",_cl="content-language",_cl_="content-length",_cm="content-md5",_ct="content-type",_e$1="expires",_eta="etag",_s="session",_xaa="x-amz-acl",_xacc="x-amz-checksum-crc32",_xacc_="x-amz-checksum-crc32c",_xacs="x-amz-checksum-sha1",_xacs_="x-amz-checksum-sha256",_xacsm="x-amz-create-session-mode",_xae="x-amz-expiration",_xaebo="x-amz-expected-bucket-owner",_xagfc="x-amz-grant-full-control",_xagr="x-amz-grant-read",_xagra="x-amz-grant-read-acp",_xagwa="x-amz-grant-write-acp",_xaollh="x-amz-object-lock-legal-hold",_xaolm="x-amz-object-lock-mode",_xaolrud="x-amz-object-lock-retain-until-date",_xarc="x-amz-request-charged",_xarp="x-amz-request-payer",_xasc="x-amz-storage-class",_xasca="x-amz-sdk-checksum-algorithm",_xasse="x-amz-server-side-encryption",_xasseakki="x-amz-server-side-encryption-aws-kms-key-id",_xassebke="x-amz-server-side-encryption-bucket-key-enabled",_xassec="x-amz-server-side-encryption-context",_xasseca="x-amz-server-side-encryption-customer-algorithm",_xasseck="x-amz-server-side-encryption-customer-key",_xasseckm="x-amz-server-side-encryption-customer-key-md5",_xat="x-amz-tagging",_xavi="x-amz-version-id",_xawrl="x-amz-website-redirect-location",_xi="x-id",parseBody=(nt,rt)=>collectBodyString(nt,rt).then(it=>{if(it.length){const st=new fxp.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(ht,ft)=>ft.trim()===""&&ft.includes(`
`)?"":void 0});st.addEntity("#xD","\r"),st.addEntity("#10",`
`);const lt=st.parse(it),ct="#text",ut=Object.keys(lt)[0],dt=lt[ut];return dt[ct]&&(dt[ut]=dt[ct],delete dt[ct]),getValueFromTextNode(dt)}return{}}),parseErrorBody=async(nt,rt)=>{const it=await parseBody(nt,rt);return it.Error&&(it.Error.message=it.Error.message??it.Error.Message),it},loadRestXmlErrorCode=(nt,rt)=>{if((rt==null?void 0:rt.Code)!==void 0)return rt.Code;if(nt.statusCode==404)return"NotFound"};class CreateSessionCommand extends Command.classBuilder().ep({...commonParams,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(rt,it,st,lt){return[getSerdePlugin(st,this.serialize,this.deserialize),getEndpointPlugin(st,rt.getEndpointParameterInstructions())]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(void 0,CreateSessionOutputFilterSensitiveLog).ser(se_CreateSessionCommand).de(de_CreateSessionCommand).build(){}const name="@aws-sdk/client-s3",description="AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version$3="3.511.0",scripts={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-s3","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn test:unit","test:e2e":"yarn test:e2e:node && yarn test:e2e:browser","test:e2e:browser":"ts-mocha test/**/*.browser.ispec.ts && karma start karma.conf.js","test:e2e:node":"jest --c jest.config.e2e.js","test:unit":"ts-mocha test/unit/**/*.spec.ts"},main$1="./dist-cjs/index.js",types="./dist-types/index.d.ts",module="./dist-es/index.js",sideEffects=!1,dependencies={"@aws-crypto/sha1-browser":"3.0.0","@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.511.0","@aws-sdk/core":"3.511.0","@aws-sdk/credential-provider-node":"3.511.0","@aws-sdk/middleware-bucket-endpoint":"3.511.0","@aws-sdk/middleware-expect-continue":"3.511.0","@aws-sdk/middleware-flexible-checksums":"3.511.0","@aws-sdk/middleware-host-header":"3.511.0","@aws-sdk/middleware-location-constraint":"3.511.0","@aws-sdk/middleware-logger":"3.511.0","@aws-sdk/middleware-recursion-detection":"3.511.0","@aws-sdk/middleware-sdk-s3":"3.511.0","@aws-sdk/middleware-signing":"3.511.0","@aws-sdk/middleware-ssec":"3.511.0","@aws-sdk/middleware-user-agent":"3.511.0","@aws-sdk/region-config-resolver":"3.511.0","@aws-sdk/signature-v4-multi-region":"3.511.0","@aws-sdk/types":"3.511.0","@aws-sdk/util-endpoints":"3.511.0","@aws-sdk/util-user-agent-browser":"3.511.0","@aws-sdk/util-user-agent-node":"3.511.0","@aws-sdk/xml-builder":"3.496.0","@smithy/config-resolver":"^2.1.1","@smithy/core":"^1.3.1","@smithy/eventstream-serde-browser":"^2.1.1","@smithy/eventstream-serde-config-resolver":"^2.1.1","@smithy/eventstream-serde-node":"^2.1.1","@smithy/fetch-http-handler":"^2.4.1","@smithy/hash-blob-browser":"^2.1.1","@smithy/hash-node":"^2.1.1","@smithy/hash-stream-node":"^2.1.1","@smithy/invalid-dependency":"^2.1.1","@smithy/md5-js":"^2.1.1","@smithy/middleware-content-length":"^2.1.1","@smithy/middleware-endpoint":"^2.4.1","@smithy/middleware-retry":"^2.1.1","@smithy/middleware-serde":"^2.1.1","@smithy/middleware-stack":"^2.1.1","@smithy/node-config-provider":"^2.2.1","@smithy/node-http-handler":"^2.3.1","@smithy/protocol-http":"^3.1.1","@smithy/smithy-client":"^2.3.1","@smithy/types":"^2.9.1","@smithy/url-parser":"^2.1.1","@smithy/util-base64":"^2.1.1","@smithy/util-body-length-browser":"^2.1.1","@smithy/util-body-length-node":"^2.2.1","@smithy/util-defaults-mode-browser":"^2.1.1","@smithy/util-defaults-mode-node":"^2.1.1","@smithy/util-endpoints":"^1.1.1","@smithy/util-retry":"^2.1.1","@smithy/util-stream":"^2.1.1","@smithy/util-utf8":"^2.1.1","@smithy/util-waiter":"^2.1.1","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},devDependencies={"@aws-sdk/signature-v4-crt":"3.511.0","@smithy/service-client-documentation-generator":"^2.1.1","@tsconfig/node14":"1.0.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines={node:">=14.0.0"},typesVersions={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files=["dist-*/**"],author={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license="Apache-2.0",browser={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},homepage="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"},packageInfo={name,description,version:version$3,scripts,main:main$1,types,module,sideEffects,dependencies,devDependencies,engines,typesVersions,files,author,license,browser,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage,repository};var build$5={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$5=function(nt,rt){return extendStatics$5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,st){it.__proto__=st}||function(it,st){for(var lt in st)st.hasOwnProperty(lt)&&(it[lt]=st[lt])},extendStatics$5(nt,rt)};function __extends$5(nt,rt){extendStatics$5(nt,rt);function it(){this.constructor=nt}nt.prototype=rt===null?Object.create(rt):(it.prototype=rt.prototype,new it)}var __assign$5=function(){return __assign$5=Object.assign||function(rt){for(var it,st=1,lt=arguments.length;st<lt;st++){it=arguments[st];for(var ct in it)Object.prototype.hasOwnProperty.call(it,ct)&&(rt[ct]=it[ct])}return rt},__assign$5.apply(this,arguments)};function __rest$5(nt,rt){var it={};for(var st in nt)Object.prototype.hasOwnProperty.call(nt,st)&&rt.indexOf(st)<0&&(it[st]=nt[st]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,st=Object.getOwnPropertySymbols(nt);lt<st.length;lt++)rt.indexOf(st[lt])<0&&Object.prototype.propertyIsEnumerable.call(nt,st[lt])&&(it[st[lt]]=nt[st[lt]]);return it}function __decorate$5(nt,rt,it,st){var lt=arguments.length,ct=lt<3?rt:st===null?st=Object.getOwnPropertyDescriptor(rt,it):st,ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ct=Reflect.decorate(nt,rt,it,st);else for(var dt=nt.length-1;dt>=0;dt--)(ut=nt[dt])&&(ct=(lt<3?ut(ct):lt>3?ut(rt,it,ct):ut(rt,it))||ct);return lt>3&&ct&&Object.defineProperty(rt,it,ct),ct}function __param$5(nt,rt){return function(it,st){rt(it,st,nt)}}function __metadata$5(nt,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,rt)}function __awaiter$5(nt,rt,it,st){function lt(ct){return ct instanceof it?ct:new it(function(ut){ut(ct)})}return new(it||(it=Promise))(function(ct,ut){function dt(pt){try{ft(st.next(pt))}catch(mt){ut(mt)}}function ht(pt){try{ft(st.throw(pt))}catch(mt){ut(mt)}}function ft(pt){pt.done?ct(pt.value):lt(pt.value).then(dt,ht)}ft((st=st.apply(nt,rt||[])).next())})}function __generator$5(nt,rt){var it={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},st,lt,ct,ut;return ut={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function dt(ft){return function(pt){return ht([ft,pt])}}function ht(ft){if(st)throw new TypeError("Generator is already executing.");for(;it;)try{if(st=1,lt&&(ct=ft[0]&2?lt.return:ft[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,ft[1])).done)return ct;switch(lt=0,ct&&(ft=[ft[0]&2,ct.value]),ft[0]){case 0:case 1:ct=ft;break;case 4:return it.label++,{value:ft[1],done:!1};case 5:it.label++,lt=ft[1],ft=[0];continue;case 7:ft=it.ops.pop(),it.trys.pop();continue;default:if(ct=it.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(ft[0]===6||ft[0]===2)){it=0;continue}if(ft[0]===3&&(!ct||ft[1]>ct[0]&&ft[1]<ct[3])){it.label=ft[1];break}if(ft[0]===6&&it.label<ct[1]){it.label=ct[1],ct=ft;break}if(ct&&it.label<ct[2]){it.label=ct[2],it.ops.push(ft);break}ct[2]&&it.ops.pop(),it.trys.pop();continue}ft=rt.call(nt,it)}catch(pt){ft=[6,pt],lt=0}finally{st=ct=0}if(ft[0]&5)throw ft[1];return{value:ft[0]?ft[1]:void 0,done:!0}}}function __createBinding$5(nt,rt,it,st){st===void 0&&(st=it),nt[st]=rt[it]}function __exportStar$5(nt,rt){for(var it in nt)it!=="default"&&!rt.hasOwnProperty(it)&&(rt[it]=nt[it])}function __values$5(nt){var rt=typeof Symbol=="function"&&Symbol.iterator,it=rt&&nt[rt],st=0;if(it)return it.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&st>=nt.length&&(nt=void 0),{value:nt&&nt[st++],done:!nt}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$5(nt,rt){var it=typeof Symbol=="function"&&nt[Symbol.iterator];if(!it)return nt;var st=it.call(nt),lt,ct=[],ut;try{for(;(rt===void 0||rt-- >0)&&!(lt=st.next()).done;)ct.push(lt.value)}catch(dt){ut={error:dt}}finally{try{lt&&!lt.done&&(it=st.return)&&it.call(st)}finally{if(ut)throw ut.error}}return ct}function __spread$5(){for(var nt=[],rt=0;rt<arguments.length;rt++)nt=nt.concat(__read$5(arguments[rt]));return nt}function __spreadArrays$5(){for(var nt=0,rt=0,it=arguments.length;rt<it;rt++)nt+=arguments[rt].length;for(var st=Array(nt),lt=0,rt=0;rt<it;rt++)for(var ct=arguments[rt],ut=0,dt=ct.length;ut<dt;ut++,lt++)st[lt]=ct[ut];return st}function __await$5(nt){return this instanceof __await$5?(this.v=nt,this):new __await$5(nt)}function __asyncGenerator$5(nt,rt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=it.apply(nt,rt||[]),lt,ct=[];return lt={},ut("next"),ut("throw"),ut("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function ut(gt){st[gt]&&(lt[gt]=function(xt){return new Promise(function(yt,vt){ct.push([gt,xt,yt,vt])>1||dt(gt,xt)})})}function dt(gt,xt){try{ht(st[gt](xt))}catch(yt){mt(ct[0][3],yt)}}function ht(gt){gt.value instanceof __await$5?Promise.resolve(gt.value.v).then(ft,pt):mt(ct[0][2],gt)}function ft(gt){dt("next",gt)}function pt(gt){dt("throw",gt)}function mt(gt,xt){gt(xt),ct.shift(),ct.length&&dt(ct[0][0],ct[0][1])}}function __asyncDelegator$5(nt){var rt,it;return rt={},st("next"),st("throw",function(lt){throw lt}),st("return"),rt[Symbol.iterator]=function(){return this},rt;function st(lt,ct){rt[lt]=nt[lt]?function(ut){return(it=!it)?{value:__await$5(nt[lt](ut)),done:lt==="return"}:ct?ct(ut):ut}:ct}}function __asyncValues$5(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=nt[Symbol.asyncIterator],it;return rt?rt.call(nt):(nt=typeof __values$5=="function"?__values$5(nt):nt[Symbol.iterator](),it={},st("next"),st("throw"),st("return"),it[Symbol.asyncIterator]=function(){return this},it);function st(ct){it[ct]=nt[ct]&&function(ut){return new Promise(function(dt,ht){ut=nt[ct](ut),lt(dt,ht,ut.done,ut.value)})}}function lt(ct,ut,dt,ht){Promise.resolve(ht).then(function(ft){ct({value:ft,done:dt})},ut)}}function __makeTemplateObject$5(nt,rt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:rt}):nt.raw=rt,nt}function __importStar$5(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function __importDefault$5(nt){return nt&&nt.__esModule?nt:{default:nt}}function __classPrivateFieldGet$5(nt,rt){if(!rt.has(nt))throw new TypeError("attempted to get private field on non-instance");return rt.get(nt)}function __classPrivateFieldSet$5(nt,rt,it){if(!rt.has(nt))throw new TypeError("attempted to set private field on non-instance");return rt.set(nt,it),it}const tslib_es6$5=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign$5},__asyncDelegator:__asyncDelegator$5,__asyncGenerator:__asyncGenerator$5,__asyncValues:__asyncValues$5,__await:__await$5,__awaiter:__awaiter$5,__classPrivateFieldGet:__classPrivateFieldGet$5,__classPrivateFieldSet:__classPrivateFieldSet$5,__createBinding:__createBinding$5,__decorate:__decorate$5,__exportStar:__exportStar$5,__extends:__extends$5,__generator:__generator$5,__importDefault:__importDefault$5,__importStar:__importStar$5,__makeTemplateObject:__makeTemplateObject$5,__metadata:__metadata$5,__param:__param$5,__read:__read$5,__rest:__rest$5,__spread:__spread$5,__spreadArrays:__spreadArrays$5,__values:__values$5},Symbol.toStringTag,{value:"Module"})),require$$0$5=getAugmentedNamespace(tslib_es6$5);var crossPlatformSha1={},ie11Sha1={},isEmptyData$2={},hasRequiredIsEmptyData$1;function requireIsEmptyData$1(){if(hasRequiredIsEmptyData$1)return isEmptyData$2;hasRequiredIsEmptyData$1=1,Object.defineProperty(isEmptyData$2,"__esModule",{value:!0}),isEmptyData$2.isEmptyData=void 0;function nt(rt){return typeof rt=="string"?rt.length===0:rt.byteLength===0}return isEmptyData$2.isEmptyData=nt,isEmptyData$2}var constants$3={},hasRequiredConstants$2;function requireConstants$2(){return hasRequiredConstants$2||(hasRequiredConstants$2=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.EMPTY_DATA_SHA_1=nt.SHA_1_HMAC_ALGO=nt.SHA_1_HASH=void 0,nt.SHA_1_HASH={name:"SHA-1"},nt.SHA_1_HMAC_ALGO={name:"HMAC",hash:nt.SHA_1_HASH},nt.EMPTY_DATA_SHA_1=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9])}(constants$3)),constants$3}const fallbackWindow={};function locateWindow(){return typeof window<"u"?window:typeof self<"u"?self:fallbackWindow}const distEs=Object.freeze(Object.defineProperty({__proto__:null,locateWindow},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(distEs);var hasRequiredIe11Sha1;function requireIe11Sha1(){if(hasRequiredIe11Sha1)return ie11Sha1;hasRequiredIe11Sha1=1,Object.defineProperty(ie11Sha1,"__esModule",{value:!0}),ie11Sha1.Sha1=void 0;var nt=requireIsEmptyData$1(),rt=requireConstants$2(),it=require$$2$1,st=require$$5,lt=function(){function dt(ht){this.secret=ht,this.reset()}return dt.prototype.update=function(ht){var ft=this;(0,nt.isEmptyData)(ht)||(this.operation=this.operation.then(function(pt){return pt.onerror=function(){ft.operation=Promise.reject(new Error("Error encountered updating hash"))},pt.process(ut(ht)),pt}),this.operation.catch(function(){}))},dt.prototype.digest=function(){return this.operation.then(function(ht){return new Promise(function(ft,pt){ht.onerror=function(){pt(new Error("Error encountered finalizing hash"))},ht.oncomplete=function(){ht.result&&ft(new Uint8Array(ht.result)),pt(new Error("Error encountered finalizing hash"))},ht.finish()})})},dt.prototype.reset=function(){this.secret?(this.operation=ct(this.secret).then(function(ht){return(0,st.locateWindow)().msCrypto.subtle.sign(rt.SHA_1_HMAC_ALGO,ht)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,st.locateWindow)().msCrypto.subtle.digest("SHA-1"))},dt}();ie11Sha1.Sha1=lt;function ct(dt){return new Promise(function(ht,ft){var pt=(0,st.locateWindow)().msCrypto.subtle.importKey("raw",ut(dt),rt.SHA_1_HMAC_ALGO,!1,["sign"]);pt.oncomplete=function(){pt.result&&ht(pt.result),ft(new Error("ImportKey completed without importing key."))},pt.onerror=function(){ft(new Error("ImportKey failed to import key."))}})}function ut(dt){return typeof dt=="string"?(0,it.fromUtf8)(dt):ArrayBuffer.isView(dt)?new Uint8Array(dt.buffer,dt.byteOffset,dt.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(dt)}return ie11Sha1}var webCryptoSha1={},hasRequiredWebCryptoSha1;function requireWebCryptoSha1(){if(hasRequiredWebCryptoSha1)return webCryptoSha1;hasRequiredWebCryptoSha1=1,Object.defineProperty(webCryptoSha1,"__esModule",{value:!0}),webCryptoSha1.Sha1=void 0;var nt=require$$2$1,rt=requireIsEmptyData$1(),it=requireConstants$2(),st=require$$5,lt=function(){function ut(dt){this.toHash=new Uint8Array(0),dt!==void 0&&(this.key=new Promise(function(ht,ft){(0,st.locateWindow)().crypto.subtle.importKey("raw",ct(dt),it.SHA_1_HMAC_ALGO,!1,["sign"]).then(ht,ft)}),this.key.catch(function(){}))}return ut.prototype.update=function(dt){if(!(0,rt.isEmptyData)(dt)){var ht=ct(dt),ft=new Uint8Array(this.toHash.byteLength+ht.byteLength);ft.set(this.toHash,0),ft.set(ht,this.toHash.byteLength),this.toHash=ft}},ut.prototype.digest=function(){var dt=this;return this.key?this.key.then(function(ht){return(0,st.locateWindow)().crypto.subtle.sign(it.SHA_1_HMAC_ALGO,ht,dt.toHash).then(function(ft){return new Uint8Array(ft)})}):(0,rt.isEmptyData)(this.toHash)?Promise.resolve(it.EMPTY_DATA_SHA_1):Promise.resolve().then(function(){return(0,st.locateWindow)().crypto.subtle.digest(it.SHA_1_HASH,dt.toHash)}).then(function(ht){return Promise.resolve(new Uint8Array(ht))})},ut.prototype.reset=function(){this.toHash=new Uint8Array(0)},ut}();webCryptoSha1.Sha1=lt;function ct(ut){return typeof ut=="string"?(0,nt.fromUtf8)(ut):ArrayBuffer.isView(ut)?new Uint8Array(ut.buffer,ut.byteOffset,ut.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(ut)}return webCryptoSha1}var build$4={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$4=function(nt,rt){return extendStatics$4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,st){it.__proto__=st}||function(it,st){for(var lt in st)st.hasOwnProperty(lt)&&(it[lt]=st[lt])},extendStatics$4(nt,rt)};function __extends$4(nt,rt){extendStatics$4(nt,rt);function it(){this.constructor=nt}nt.prototype=rt===null?Object.create(rt):(it.prototype=rt.prototype,new it)}var __assign$4=function(){return __assign$4=Object.assign||function(rt){for(var it,st=1,lt=arguments.length;st<lt;st++){it=arguments[st];for(var ct in it)Object.prototype.hasOwnProperty.call(it,ct)&&(rt[ct]=it[ct])}return rt},__assign$4.apply(this,arguments)};function __rest$4(nt,rt){var it={};for(var st in nt)Object.prototype.hasOwnProperty.call(nt,st)&&rt.indexOf(st)<0&&(it[st]=nt[st]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,st=Object.getOwnPropertySymbols(nt);lt<st.length;lt++)rt.indexOf(st[lt])<0&&Object.prototype.propertyIsEnumerable.call(nt,st[lt])&&(it[st[lt]]=nt[st[lt]]);return it}function __decorate$4(nt,rt,it,st){var lt=arguments.length,ct=lt<3?rt:st===null?st=Object.getOwnPropertyDescriptor(rt,it):st,ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ct=Reflect.decorate(nt,rt,it,st);else for(var dt=nt.length-1;dt>=0;dt--)(ut=nt[dt])&&(ct=(lt<3?ut(ct):lt>3?ut(rt,it,ct):ut(rt,it))||ct);return lt>3&&ct&&Object.defineProperty(rt,it,ct),ct}function __param$4(nt,rt){return function(it,st){rt(it,st,nt)}}function __metadata$4(nt,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,rt)}function __awaiter$4(nt,rt,it,st){function lt(ct){return ct instanceof it?ct:new it(function(ut){ut(ct)})}return new(it||(it=Promise))(function(ct,ut){function dt(pt){try{ft(st.next(pt))}catch(mt){ut(mt)}}function ht(pt){try{ft(st.throw(pt))}catch(mt){ut(mt)}}function ft(pt){pt.done?ct(pt.value):lt(pt.value).then(dt,ht)}ft((st=st.apply(nt,rt||[])).next())})}function __generator$4(nt,rt){var it={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},st,lt,ct,ut;return ut={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function dt(ft){return function(pt){return ht([ft,pt])}}function ht(ft){if(st)throw new TypeError("Generator is already executing.");for(;it;)try{if(st=1,lt&&(ct=ft[0]&2?lt.return:ft[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,ft[1])).done)return ct;switch(lt=0,ct&&(ft=[ft[0]&2,ct.value]),ft[0]){case 0:case 1:ct=ft;break;case 4:return it.label++,{value:ft[1],done:!1};case 5:it.label++,lt=ft[1],ft=[0];continue;case 7:ft=it.ops.pop(),it.trys.pop();continue;default:if(ct=it.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(ft[0]===6||ft[0]===2)){it=0;continue}if(ft[0]===3&&(!ct||ft[1]>ct[0]&&ft[1]<ct[3])){it.label=ft[1];break}if(ft[0]===6&&it.label<ct[1]){it.label=ct[1],ct=ft;break}if(ct&&it.label<ct[2]){it.label=ct[2],it.ops.push(ft);break}ct[2]&&it.ops.pop(),it.trys.pop();continue}ft=rt.call(nt,it)}catch(pt){ft=[6,pt],lt=0}finally{st=ct=0}if(ft[0]&5)throw ft[1];return{value:ft[0]?ft[1]:void 0,done:!0}}}function __createBinding$4(nt,rt,it,st){st===void 0&&(st=it),nt[st]=rt[it]}function __exportStar$4(nt,rt){for(var it in nt)it!=="default"&&!rt.hasOwnProperty(it)&&(rt[it]=nt[it])}function __values$4(nt){var rt=typeof Symbol=="function"&&Symbol.iterator,it=rt&&nt[rt],st=0;if(it)return it.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&st>=nt.length&&(nt=void 0),{value:nt&&nt[st++],done:!nt}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$4(nt,rt){var it=typeof Symbol=="function"&&nt[Symbol.iterator];if(!it)return nt;var st=it.call(nt),lt,ct=[],ut;try{for(;(rt===void 0||rt-- >0)&&!(lt=st.next()).done;)ct.push(lt.value)}catch(dt){ut={error:dt}}finally{try{lt&&!lt.done&&(it=st.return)&&it.call(st)}finally{if(ut)throw ut.error}}return ct}function __spread$4(){for(var nt=[],rt=0;rt<arguments.length;rt++)nt=nt.concat(__read$4(arguments[rt]));return nt}function __spreadArrays$4(){for(var nt=0,rt=0,it=arguments.length;rt<it;rt++)nt+=arguments[rt].length;for(var st=Array(nt),lt=0,rt=0;rt<it;rt++)for(var ct=arguments[rt],ut=0,dt=ct.length;ut<dt;ut++,lt++)st[lt]=ct[ut];return st}function __await$4(nt){return this instanceof __await$4?(this.v=nt,this):new __await$4(nt)}function __asyncGenerator$4(nt,rt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=it.apply(nt,rt||[]),lt,ct=[];return lt={},ut("next"),ut("throw"),ut("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function ut(gt){st[gt]&&(lt[gt]=function(xt){return new Promise(function(yt,vt){ct.push([gt,xt,yt,vt])>1||dt(gt,xt)})})}function dt(gt,xt){try{ht(st[gt](xt))}catch(yt){mt(ct[0][3],yt)}}function ht(gt){gt.value instanceof __await$4?Promise.resolve(gt.value.v).then(ft,pt):mt(ct[0][2],gt)}function ft(gt){dt("next",gt)}function pt(gt){dt("throw",gt)}function mt(gt,xt){gt(xt),ct.shift(),ct.length&&dt(ct[0][0],ct[0][1])}}function __asyncDelegator$4(nt){var rt,it;return rt={},st("next"),st("throw",function(lt){throw lt}),st("return"),rt[Symbol.iterator]=function(){return this},rt;function st(lt,ct){rt[lt]=nt[lt]?function(ut){return(it=!it)?{value:__await$4(nt[lt](ut)),done:lt==="return"}:ct?ct(ut):ut}:ct}}function __asyncValues$4(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=nt[Symbol.asyncIterator],it;return rt?rt.call(nt):(nt=typeof __values$4=="function"?__values$4(nt):nt[Symbol.iterator](),it={},st("next"),st("throw"),st("return"),it[Symbol.asyncIterator]=function(){return this},it);function st(ct){it[ct]=nt[ct]&&function(ut){return new Promise(function(dt,ht){ut=nt[ct](ut),lt(dt,ht,ut.done,ut.value)})}}function lt(ct,ut,dt,ht){Promise.resolve(ht).then(function(ft){ct({value:ft,done:dt})},ut)}}function __makeTemplateObject$4(nt,rt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:rt}):nt.raw=rt,nt}function __importStar$4(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function __importDefault$4(nt){return nt&&nt.__esModule?nt:{default:nt}}function __classPrivateFieldGet$4(nt,rt){if(!rt.has(nt))throw new TypeError("attempted to get private field on non-instance");return rt.get(nt)}function __classPrivateFieldSet$4(nt,rt,it){if(!rt.has(nt))throw new TypeError("attempted to set private field on non-instance");return rt.set(nt,it),it}const tslib_es6$4=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign$4},__asyncDelegator:__asyncDelegator$4,__asyncGenerator:__asyncGenerator$4,__asyncValues:__asyncValues$4,__await:__await$4,__awaiter:__awaiter$4,__classPrivateFieldGet:__classPrivateFieldGet$4,__classPrivateFieldSet:__classPrivateFieldSet$4,__createBinding:__createBinding$4,__decorate:__decorate$4,__exportStar:__exportStar$4,__extends:__extends$4,__generator:__generator$4,__importDefault:__importDefault$4,__importStar:__importStar$4,__makeTemplateObject:__makeTemplateObject$4,__metadata:__metadata$4,__param:__param$4,__read:__read$4,__rest:__rest$4,__spread:__spread$4,__spreadArrays:__spreadArrays$4,__values:__values$4},Symbol.toStringTag,{value:"Module"})),require$$0$4=getAugmentedNamespace(tslib_es6$4);var supportsWebCrypto={},hasRequiredSupportsWebCrypto;function requireSupportsWebCrypto(){if(hasRequiredSupportsWebCrypto)return supportsWebCrypto;hasRequiredSupportsWebCrypto=1,Object.defineProperty(supportsWebCrypto,"__esModule",{value:!0}),supportsWebCrypto.supportsZeroByteGCM=supportsWebCrypto.supportsSubtleCrypto=supportsWebCrypto.supportsSecureRandom=supportsWebCrypto.supportsWebCrypto=void 0;var nt=require$$0$4,rt=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function it(ut){if(st(ut)&&typeof ut.crypto.subtle=="object"){var dt=ut.crypto.subtle;return lt(dt)}return!1}supportsWebCrypto.supportsWebCrypto=it;function st(ut){if(typeof ut=="object"&&typeof ut.crypto=="object"){var dt=ut.crypto.getRandomValues;return typeof dt=="function"}return!1}supportsWebCrypto.supportsSecureRandom=st;function lt(ut){return ut&&rt.every(function(dt){return typeof ut[dt]=="function"})}supportsWebCrypto.supportsSubtleCrypto=lt;function ct(ut){return nt.__awaiter(this,void 0,void 0,function(){var dt,ht;return nt.__generator(this,function(ft){switch(ft.label){case 0:if(!lt(ut))return[2,!1];ft.label=1;case 1:return ft.trys.push([1,4,,5]),[4,ut.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return dt=ft.sent(),[4,ut.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},dt,new Uint8Array(0))];case 3:return ht=ft.sent(),[2,ht.byteLength===16];case 4:return ft.sent(),[2,!1];case 5:return[2]}})})}return supportsWebCrypto.supportsZeroByteGCM=ct,supportsWebCrypto}var hasRequiredBuild$3;function requireBuild$3(){return hasRequiredBuild$3||(hasRequiredBuild$3=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0});var rt=require$$0$4;rt.__exportStar(requireSupportsWebCrypto(),nt)}(build$4)),build$4}var build$3={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$3=function(nt,rt){return extendStatics$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,st){it.__proto__=st}||function(it,st){for(var lt in st)st.hasOwnProperty(lt)&&(it[lt]=st[lt])},extendStatics$3(nt,rt)};function __extends$3(nt,rt){extendStatics$3(nt,rt);function it(){this.constructor=nt}nt.prototype=rt===null?Object.create(rt):(it.prototype=rt.prototype,new it)}var __assign$3=function(){return __assign$3=Object.assign||function(rt){for(var it,st=1,lt=arguments.length;st<lt;st++){it=arguments[st];for(var ct in it)Object.prototype.hasOwnProperty.call(it,ct)&&(rt[ct]=it[ct])}return rt},__assign$3.apply(this,arguments)};function __rest$3(nt,rt){var it={};for(var st in nt)Object.prototype.hasOwnProperty.call(nt,st)&&rt.indexOf(st)<0&&(it[st]=nt[st]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,st=Object.getOwnPropertySymbols(nt);lt<st.length;lt++)rt.indexOf(st[lt])<0&&Object.prototype.propertyIsEnumerable.call(nt,st[lt])&&(it[st[lt]]=nt[st[lt]]);return it}function __decorate$3(nt,rt,it,st){var lt=arguments.length,ct=lt<3?rt:st===null?st=Object.getOwnPropertyDescriptor(rt,it):st,ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ct=Reflect.decorate(nt,rt,it,st);else for(var dt=nt.length-1;dt>=0;dt--)(ut=nt[dt])&&(ct=(lt<3?ut(ct):lt>3?ut(rt,it,ct):ut(rt,it))||ct);return lt>3&&ct&&Object.defineProperty(rt,it,ct),ct}function __param$3(nt,rt){return function(it,st){rt(it,st,nt)}}function __metadata$3(nt,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,rt)}function __awaiter$3(nt,rt,it,st){function lt(ct){return ct instanceof it?ct:new it(function(ut){ut(ct)})}return new(it||(it=Promise))(function(ct,ut){function dt(pt){try{ft(st.next(pt))}catch(mt){ut(mt)}}function ht(pt){try{ft(st.throw(pt))}catch(mt){ut(mt)}}function ft(pt){pt.done?ct(pt.value):lt(pt.value).then(dt,ht)}ft((st=st.apply(nt,rt||[])).next())})}function __generator$3(nt,rt){var it={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},st,lt,ct,ut;return ut={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function dt(ft){return function(pt){return ht([ft,pt])}}function ht(ft){if(st)throw new TypeError("Generator is already executing.");for(;it;)try{if(st=1,lt&&(ct=ft[0]&2?lt.return:ft[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,ft[1])).done)return ct;switch(lt=0,ct&&(ft=[ft[0]&2,ct.value]),ft[0]){case 0:case 1:ct=ft;break;case 4:return it.label++,{value:ft[1],done:!1};case 5:it.label++,lt=ft[1],ft=[0];continue;case 7:ft=it.ops.pop(),it.trys.pop();continue;default:if(ct=it.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(ft[0]===6||ft[0]===2)){it=0;continue}if(ft[0]===3&&(!ct||ft[1]>ct[0]&&ft[1]<ct[3])){it.label=ft[1];break}if(ft[0]===6&&it.label<ct[1]){it.label=ct[1],ct=ft;break}if(ct&&it.label<ct[2]){it.label=ct[2],it.ops.push(ft);break}ct[2]&&it.ops.pop(),it.trys.pop();continue}ft=rt.call(nt,it)}catch(pt){ft=[6,pt],lt=0}finally{st=ct=0}if(ft[0]&5)throw ft[1];return{value:ft[0]?ft[1]:void 0,done:!0}}}function __createBinding$3(nt,rt,it,st){st===void 0&&(st=it),nt[st]=rt[it]}function __exportStar$3(nt,rt){for(var it in nt)it!=="default"&&!rt.hasOwnProperty(it)&&(rt[it]=nt[it])}function __values$3(nt){var rt=typeof Symbol=="function"&&Symbol.iterator,it=rt&&nt[rt],st=0;if(it)return it.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&st>=nt.length&&(nt=void 0),{value:nt&&nt[st++],done:!nt}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$3(nt,rt){var it=typeof Symbol=="function"&&nt[Symbol.iterator];if(!it)return nt;var st=it.call(nt),lt,ct=[],ut;try{for(;(rt===void 0||rt-- >0)&&!(lt=st.next()).done;)ct.push(lt.value)}catch(dt){ut={error:dt}}finally{try{lt&&!lt.done&&(it=st.return)&&it.call(st)}finally{if(ut)throw ut.error}}return ct}function __spread$3(){for(var nt=[],rt=0;rt<arguments.length;rt++)nt=nt.concat(__read$3(arguments[rt]));return nt}function __spreadArrays$3(){for(var nt=0,rt=0,it=arguments.length;rt<it;rt++)nt+=arguments[rt].length;for(var st=Array(nt),lt=0,rt=0;rt<it;rt++)for(var ct=arguments[rt],ut=0,dt=ct.length;ut<dt;ut++,lt++)st[lt]=ct[ut];return st}function __await$3(nt){return this instanceof __await$3?(this.v=nt,this):new __await$3(nt)}function __asyncGenerator$3(nt,rt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=it.apply(nt,rt||[]),lt,ct=[];return lt={},ut("next"),ut("throw"),ut("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function ut(gt){st[gt]&&(lt[gt]=function(xt){return new Promise(function(yt,vt){ct.push([gt,xt,yt,vt])>1||dt(gt,xt)})})}function dt(gt,xt){try{ht(st[gt](xt))}catch(yt){mt(ct[0][3],yt)}}function ht(gt){gt.value instanceof __await$3?Promise.resolve(gt.value.v).then(ft,pt):mt(ct[0][2],gt)}function ft(gt){dt("next",gt)}function pt(gt){dt("throw",gt)}function mt(gt,xt){gt(xt),ct.shift(),ct.length&&dt(ct[0][0],ct[0][1])}}function __asyncDelegator$3(nt){var rt,it;return rt={},st("next"),st("throw",function(lt){throw lt}),st("return"),rt[Symbol.iterator]=function(){return this},rt;function st(lt,ct){rt[lt]=nt[lt]?function(ut){return(it=!it)?{value:__await$3(nt[lt](ut)),done:lt==="return"}:ct?ct(ut):ut}:ct}}function __asyncValues$3(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=nt[Symbol.asyncIterator],it;return rt?rt.call(nt):(nt=typeof __values$3=="function"?__values$3(nt):nt[Symbol.iterator](),it={},st("next"),st("throw"),st("return"),it[Symbol.asyncIterator]=function(){return this},it);function st(ct){it[ct]=nt[ct]&&function(ut){return new Promise(function(dt,ht){ut=nt[ct](ut),lt(dt,ht,ut.done,ut.value)})}}function lt(ct,ut,dt,ht){Promise.resolve(ht).then(function(ft){ct({value:ft,done:dt})},ut)}}function __makeTemplateObject$3(nt,rt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:rt}):nt.raw=rt,nt}function __importStar$3(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function __importDefault$3(nt){return nt&&nt.__esModule?nt:{default:nt}}function __classPrivateFieldGet$3(nt,rt){if(!rt.has(nt))throw new TypeError("attempted to get private field on non-instance");return rt.get(nt)}function __classPrivateFieldSet$3(nt,rt,it){if(!rt.has(nt))throw new TypeError("attempted to set private field on non-instance");return rt.set(nt,it),it}const tslib_es6$3=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign$3},__asyncDelegator:__asyncDelegator$3,__asyncGenerator:__asyncGenerator$3,__asyncValues:__asyncValues$3,__await:__await$3,__awaiter:__awaiter$3,__classPrivateFieldGet:__classPrivateFieldGet$3,__classPrivateFieldSet:__classPrivateFieldSet$3,__createBinding:__createBinding$3,__decorate:__decorate$3,__exportStar:__exportStar$3,__extends:__extends$3,__generator:__generator$3,__importDefault:__importDefault$3,__importStar:__importStar$3,__makeTemplateObject:__makeTemplateObject$3,__metadata:__metadata$3,__param:__param$3,__read:__read$3,__rest:__rest$3,__spread:__spread$3,__spreadArrays:__spreadArrays$3,__values:__values$3},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(tslib_es6$3);var CryptoOperation={},hasRequiredCryptoOperation;function requireCryptoOperation(){return hasRequiredCryptoOperation||(hasRequiredCryptoOperation=1,Object.defineProperty(CryptoOperation,"__esModule",{value:!0})),CryptoOperation}var Key={},hasRequiredKey;function requireKey(){return hasRequiredKey||(hasRequiredKey=1,Object.defineProperty(Key,"__esModule",{value:!0})),Key}var KeyOperation={},hasRequiredKeyOperation;function requireKeyOperation(){return hasRequiredKeyOperation||(hasRequiredKeyOperation=1,Object.defineProperty(KeyOperation,"__esModule",{value:!0})),KeyOperation}var MsSubtleCrypto={},hasRequiredMsSubtleCrypto;function requireMsSubtleCrypto(){return hasRequiredMsSubtleCrypto||(hasRequiredMsSubtleCrypto=1,Object.defineProperty(MsSubtleCrypto,"__esModule",{value:!0})),MsSubtleCrypto}var MsWindow={},hasRequiredMsWindow;function requireMsWindow(){if(hasRequiredMsWindow)return MsWindow;hasRequiredMsWindow=1,Object.defineProperty(MsWindow,"__esModule",{value:!0}),MsWindow.isMsWindow=void 0;var nt=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function rt(st){return"MSInputMethodContext"in st&&"msCrypto"in st}function it(st){if(rt(st)&&st.msCrypto.subtle!==void 0){var lt=st.msCrypto,ct=lt.getRandomValues,ut=lt.subtle;return nt.map(function(dt){return ut[dt]}).concat(ct).every(function(dt){return typeof dt=="function"})}return!1}return MsWindow.isMsWindow=it,MsWindow}var hasRequiredBuild$2;function requireBuild$2(){return hasRequiredBuild$2||(hasRequiredBuild$2=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0});var rt=require$$0$3;rt.__exportStar(requireCryptoOperation(),nt),rt.__exportStar(requireKey(),nt),rt.__exportStar(requireKeyOperation(),nt),rt.__exportStar(requireMsSubtleCrypto(),nt),rt.__exportStar(requireMsWindow(),nt)}(build$3)),build$3}var hasRequiredCrossPlatformSha1;function requireCrossPlatformSha1(){if(hasRequiredCrossPlatformSha1)return crossPlatformSha1;hasRequiredCrossPlatformSha1=1,Object.defineProperty(crossPlatformSha1,"__esModule",{value:!0}),crossPlatformSha1.Sha1=void 0;var nt=requireIe11Sha1(),rt=requireWebCryptoSha1(),it=requireBuild$3(),st=requireBuild$2(),lt=require$$5,ct=requireBuild$5(),ut=function(){function dt(ht){if((0,it.supportsWebCrypto)((0,lt.locateWindow)()))this.hash=new rt.Sha1(ht);else if((0,st.isMsWindow)((0,lt.locateWindow)()))this.hash=new nt.Sha1(ht);else throw new Error("SHA1 not supported")}return dt.prototype.update=function(ht,ft){this.hash.update((0,ct.convertToBuffer)(ht))},dt.prototype.digest=function(){return this.hash.digest()},dt.prototype.reset=function(){this.hash.reset()},dt}();return crossPlatformSha1.Sha1=ut,crossPlatformSha1}(function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.WebCryptoSha1=nt.Ie11Sha1=void 0;var rt=require$$0$5;rt.__exportStar(requireCrossPlatformSha1(),nt);var it=requireIe11Sha1();Object.defineProperty(nt,"Ie11Sha1",{enumerable:!0,get:function(){return it.Sha1}});var st=requireWebCryptoSha1();Object.defineProperty(nt,"WebCryptoSha1",{enumerable:!0,get:function(){return st.Sha1}})})(build$5);var build$2={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$2=function(nt,rt){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,st){it.__proto__=st}||function(it,st){for(var lt in st)st.hasOwnProperty(lt)&&(it[lt]=st[lt])},extendStatics$2(nt,rt)};function __extends$2(nt,rt){extendStatics$2(nt,rt);function it(){this.constructor=nt}nt.prototype=rt===null?Object.create(rt):(it.prototype=rt.prototype,new it)}var __assign$2=function(){return __assign$2=Object.assign||function(rt){for(var it,st=1,lt=arguments.length;st<lt;st++){it=arguments[st];for(var ct in it)Object.prototype.hasOwnProperty.call(it,ct)&&(rt[ct]=it[ct])}return rt},__assign$2.apply(this,arguments)};function __rest$2(nt,rt){var it={};for(var st in nt)Object.prototype.hasOwnProperty.call(nt,st)&&rt.indexOf(st)<0&&(it[st]=nt[st]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,st=Object.getOwnPropertySymbols(nt);lt<st.length;lt++)rt.indexOf(st[lt])<0&&Object.prototype.propertyIsEnumerable.call(nt,st[lt])&&(it[st[lt]]=nt[st[lt]]);return it}function __decorate$2(nt,rt,it,st){var lt=arguments.length,ct=lt<3?rt:st===null?st=Object.getOwnPropertyDescriptor(rt,it):st,ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ct=Reflect.decorate(nt,rt,it,st);else for(var dt=nt.length-1;dt>=0;dt--)(ut=nt[dt])&&(ct=(lt<3?ut(ct):lt>3?ut(rt,it,ct):ut(rt,it))||ct);return lt>3&&ct&&Object.defineProperty(rt,it,ct),ct}function __param$2(nt,rt){return function(it,st){rt(it,st,nt)}}function __metadata$2(nt,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,rt)}function __awaiter$2(nt,rt,it,st){function lt(ct){return ct instanceof it?ct:new it(function(ut){ut(ct)})}return new(it||(it=Promise))(function(ct,ut){function dt(pt){try{ft(st.next(pt))}catch(mt){ut(mt)}}function ht(pt){try{ft(st.throw(pt))}catch(mt){ut(mt)}}function ft(pt){pt.done?ct(pt.value):lt(pt.value).then(dt,ht)}ft((st=st.apply(nt,rt||[])).next())})}function __generator$2(nt,rt){var it={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},st,lt,ct,ut;return ut={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function dt(ft){return function(pt){return ht([ft,pt])}}function ht(ft){if(st)throw new TypeError("Generator is already executing.");for(;it;)try{if(st=1,lt&&(ct=ft[0]&2?lt.return:ft[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,ft[1])).done)return ct;switch(lt=0,ct&&(ft=[ft[0]&2,ct.value]),ft[0]){case 0:case 1:ct=ft;break;case 4:return it.label++,{value:ft[1],done:!1};case 5:it.label++,lt=ft[1],ft=[0];continue;case 7:ft=it.ops.pop(),it.trys.pop();continue;default:if(ct=it.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(ft[0]===6||ft[0]===2)){it=0;continue}if(ft[0]===3&&(!ct||ft[1]>ct[0]&&ft[1]<ct[3])){it.label=ft[1];break}if(ft[0]===6&&it.label<ct[1]){it.label=ct[1],ct=ft;break}if(ct&&it.label<ct[2]){it.label=ct[2],it.ops.push(ft);break}ct[2]&&it.ops.pop(),it.trys.pop();continue}ft=rt.call(nt,it)}catch(pt){ft=[6,pt],lt=0}finally{st=ct=0}if(ft[0]&5)throw ft[1];return{value:ft[0]?ft[1]:void 0,done:!0}}}function __createBinding$2(nt,rt,it,st){st===void 0&&(st=it),nt[st]=rt[it]}function __exportStar$2(nt,rt){for(var it in nt)it!=="default"&&!rt.hasOwnProperty(it)&&(rt[it]=nt[it])}function __values$2(nt){var rt=typeof Symbol=="function"&&Symbol.iterator,it=rt&&nt[rt],st=0;if(it)return it.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&st>=nt.length&&(nt=void 0),{value:nt&&nt[st++],done:!nt}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$2(nt,rt){var it=typeof Symbol=="function"&&nt[Symbol.iterator];if(!it)return nt;var st=it.call(nt),lt,ct=[],ut;try{for(;(rt===void 0||rt-- >0)&&!(lt=st.next()).done;)ct.push(lt.value)}catch(dt){ut={error:dt}}finally{try{lt&&!lt.done&&(it=st.return)&&it.call(st)}finally{if(ut)throw ut.error}}return ct}function __spread$2(){for(var nt=[],rt=0;rt<arguments.length;rt++)nt=nt.concat(__read$2(arguments[rt]));return nt}function __spreadArrays$2(){for(var nt=0,rt=0,it=arguments.length;rt<it;rt++)nt+=arguments[rt].length;for(var st=Array(nt),lt=0,rt=0;rt<it;rt++)for(var ct=arguments[rt],ut=0,dt=ct.length;ut<dt;ut++,lt++)st[lt]=ct[ut];return st}function __await$2(nt){return this instanceof __await$2?(this.v=nt,this):new __await$2(nt)}function __asyncGenerator$2(nt,rt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=it.apply(nt,rt||[]),lt,ct=[];return lt={},ut("next"),ut("throw"),ut("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function ut(gt){st[gt]&&(lt[gt]=function(xt){return new Promise(function(yt,vt){ct.push([gt,xt,yt,vt])>1||dt(gt,xt)})})}function dt(gt,xt){try{ht(st[gt](xt))}catch(yt){mt(ct[0][3],yt)}}function ht(gt){gt.value instanceof __await$2?Promise.resolve(gt.value.v).then(ft,pt):mt(ct[0][2],gt)}function ft(gt){dt("next",gt)}function pt(gt){dt("throw",gt)}function mt(gt,xt){gt(xt),ct.shift(),ct.length&&dt(ct[0][0],ct[0][1])}}function __asyncDelegator$2(nt){var rt,it;return rt={},st("next"),st("throw",function(lt){throw lt}),st("return"),rt[Symbol.iterator]=function(){return this},rt;function st(lt,ct){rt[lt]=nt[lt]?function(ut){return(it=!it)?{value:__await$2(nt[lt](ut)),done:lt==="return"}:ct?ct(ut):ut}:ct}}function __asyncValues$2(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=nt[Symbol.asyncIterator],it;return rt?rt.call(nt):(nt=typeof __values$2=="function"?__values$2(nt):nt[Symbol.iterator](),it={},st("next"),st("throw"),st("return"),it[Symbol.asyncIterator]=function(){return this},it);function st(ct){it[ct]=nt[ct]&&function(ut){return new Promise(function(dt,ht){ut=nt[ct](ut),lt(dt,ht,ut.done,ut.value)})}}function lt(ct,ut,dt,ht){Promise.resolve(ht).then(function(ft){ct({value:ft,done:dt})},ut)}}function __makeTemplateObject$2(nt,rt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:rt}):nt.raw=rt,nt}function __importStar$2(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function __importDefault$2(nt){return nt&&nt.__esModule?nt:{default:nt}}function __classPrivateFieldGet$2(nt,rt){if(!rt.has(nt))throw new TypeError("attempted to get private field on non-instance");return rt.get(nt)}function __classPrivateFieldSet$2(nt,rt,it){if(!rt.has(nt))throw new TypeError("attempted to set private field on non-instance");return rt.set(nt,it),it}const tslib_es6$2=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign$2},__asyncDelegator:__asyncDelegator$2,__asyncGenerator:__asyncGenerator$2,__asyncValues:__asyncValues$2,__await:__await$2,__awaiter:__awaiter$2,__classPrivateFieldGet:__classPrivateFieldGet$2,__classPrivateFieldSet:__classPrivateFieldSet$2,__createBinding:__createBinding$2,__decorate:__decorate$2,__exportStar:__exportStar$2,__extends:__extends$2,__generator:__generator$2,__importDefault:__importDefault$2,__importStar:__importStar$2,__makeTemplateObject:__makeTemplateObject$2,__metadata:__metadata$2,__param:__param$2,__read:__read$2,__rest:__rest$2,__spread:__spread$2,__spreadArrays:__spreadArrays$2,__values:__values$2},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(tslib_es6$2);var crossPlatformSha256={},ie11Sha256={},isEmptyData$1={},hasRequiredIsEmptyData;function requireIsEmptyData(){if(hasRequiredIsEmptyData)return isEmptyData$1;hasRequiredIsEmptyData=1,Object.defineProperty(isEmptyData$1,"__esModule",{value:!0}),isEmptyData$1.isEmptyData=void 0;function nt(rt){return typeof rt=="string"?rt.length===0:rt.byteLength===0}return isEmptyData$1.isEmptyData=nt,isEmptyData$1}var constants$2={},hasRequiredConstants$1;function requireConstants$1(){return hasRequiredConstants$1||(hasRequiredConstants$1=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.EMPTY_DATA_SHA_256=nt.SHA_256_HMAC_ALGO=nt.SHA_256_HASH=void 0,nt.SHA_256_HASH={name:"SHA-256"},nt.SHA_256_HMAC_ALGO={name:"HMAC",hash:nt.SHA_256_HASH},nt.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])}(constants$2)),constants$2}var hasRequiredIe11Sha256;function requireIe11Sha256(){if(hasRequiredIe11Sha256)return ie11Sha256;hasRequiredIe11Sha256=1,Object.defineProperty(ie11Sha256,"__esModule",{value:!0}),ie11Sha256.Sha256=void 0;var nt=requireIsEmptyData(),rt=requireConstants$1(),it=require$$2$1,st=require$$5,lt=function(){function dt(ht){this.secret=ht,this.reset()}return dt.prototype.update=function(ht){var ft=this;(0,nt.isEmptyData)(ht)||(this.operation=this.operation.then(function(pt){return pt.onerror=function(){ft.operation=Promise.reject(new Error("Error encountered updating hash"))},pt.process(ut(ht)),pt}),this.operation.catch(function(){}))},dt.prototype.digest=function(){return this.operation.then(function(ht){return new Promise(function(ft,pt){ht.onerror=function(){pt(new Error("Error encountered finalizing hash"))},ht.oncomplete=function(){ht.result&&ft(new Uint8Array(ht.result)),pt(new Error("Error encountered finalizing hash"))},ht.finish()})})},dt.prototype.reset=function(){this.secret?(this.operation=ct(this.secret).then(function(ht){return(0,st.locateWindow)().msCrypto.subtle.sign(rt.SHA_256_HMAC_ALGO,ht)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,st.locateWindow)().msCrypto.subtle.digest("SHA-256"))},dt}();ie11Sha256.Sha256=lt;function ct(dt){return new Promise(function(ht,ft){var pt=(0,st.locateWindow)().msCrypto.subtle.importKey("raw",ut(dt),rt.SHA_256_HMAC_ALGO,!1,["sign"]);pt.oncomplete=function(){pt.result&&ht(pt.result),ft(new Error("ImportKey completed without importing key."))},pt.onerror=function(){ft(new Error("ImportKey failed to import key."))}})}function ut(dt){return typeof dt=="string"?(0,it.fromUtf8)(dt):ArrayBuffer.isView(dt)?new Uint8Array(dt.buffer,dt.byteOffset,dt.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(dt)}return ie11Sha256}var webCryptoSha256={},hasRequiredWebCryptoSha256;function requireWebCryptoSha256(){if(hasRequiredWebCryptoSha256)return webCryptoSha256;hasRequiredWebCryptoSha256=1,Object.defineProperty(webCryptoSha256,"__esModule",{value:!0}),webCryptoSha256.Sha256=void 0;var nt=requireBuild$5(),rt=requireConstants$1(),it=require$$5,st=function(){function lt(ct){this.toHash=new Uint8Array(0),this.secret=ct,this.reset()}return lt.prototype.update=function(ct){if(!(0,nt.isEmptyData)(ct)){var ut=(0,nt.convertToBuffer)(ct),dt=new Uint8Array(this.toHash.byteLength+ut.byteLength);dt.set(this.toHash,0),dt.set(ut,this.toHash.byteLength),this.toHash=dt}},lt.prototype.digest=function(){var ct=this;return this.key?this.key.then(function(ut){return(0,it.locateWindow)().crypto.subtle.sign(rt.SHA_256_HMAC_ALGO,ut,ct.toHash).then(function(dt){return new Uint8Array(dt)})}):(0,nt.isEmptyData)(this.toHash)?Promise.resolve(rt.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,it.locateWindow)().crypto.subtle.digest(rt.SHA_256_HASH,ct.toHash)}).then(function(ut){return Promise.resolve(new Uint8Array(ut))})},lt.prototype.reset=function(){var ct=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(ut,dt){(0,it.locateWindow)().crypto.subtle.importKey("raw",(0,nt.convertToBuffer)(ct.secret),rt.SHA_256_HMAC_ALGO,!1,["sign"]).then(ut,dt)}),this.key.catch(function(){}))},lt}();return webCryptoSha256.Sha256=st,webCryptoSha256}var build$1={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$1=function(nt,rt){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,st){it.__proto__=st}||function(it,st){for(var lt in st)st.hasOwnProperty(lt)&&(it[lt]=st[lt])},extendStatics$1(nt,rt)};function __extends$1(nt,rt){extendStatics$1(nt,rt);function it(){this.constructor=nt}nt.prototype=rt===null?Object.create(rt):(it.prototype=rt.prototype,new it)}var __assign$1=function(){return __assign$1=Object.assign||function(rt){for(var it,st=1,lt=arguments.length;st<lt;st++){it=arguments[st];for(var ct in it)Object.prototype.hasOwnProperty.call(it,ct)&&(rt[ct]=it[ct])}return rt},__assign$1.apply(this,arguments)};function __rest$1(nt,rt){var it={};for(var st in nt)Object.prototype.hasOwnProperty.call(nt,st)&&rt.indexOf(st)<0&&(it[st]=nt[st]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,st=Object.getOwnPropertySymbols(nt);lt<st.length;lt++)rt.indexOf(st[lt])<0&&Object.prototype.propertyIsEnumerable.call(nt,st[lt])&&(it[st[lt]]=nt[st[lt]]);return it}function __decorate$1(nt,rt,it,st){var lt=arguments.length,ct=lt<3?rt:st===null?st=Object.getOwnPropertyDescriptor(rt,it):st,ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ct=Reflect.decorate(nt,rt,it,st);else for(var dt=nt.length-1;dt>=0;dt--)(ut=nt[dt])&&(ct=(lt<3?ut(ct):lt>3?ut(rt,it,ct):ut(rt,it))||ct);return lt>3&&ct&&Object.defineProperty(rt,it,ct),ct}function __param$1(nt,rt){return function(it,st){rt(it,st,nt)}}function __metadata$1(nt,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,rt)}function __awaiter$1(nt,rt,it,st){function lt(ct){return ct instanceof it?ct:new it(function(ut){ut(ct)})}return new(it||(it=Promise))(function(ct,ut){function dt(pt){try{ft(st.next(pt))}catch(mt){ut(mt)}}function ht(pt){try{ft(st.throw(pt))}catch(mt){ut(mt)}}function ft(pt){pt.done?ct(pt.value):lt(pt.value).then(dt,ht)}ft((st=st.apply(nt,rt||[])).next())})}function __generator$1(nt,rt){var it={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},st,lt,ct,ut;return ut={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function dt(ft){return function(pt){return ht([ft,pt])}}function ht(ft){if(st)throw new TypeError("Generator is already executing.");for(;it;)try{if(st=1,lt&&(ct=ft[0]&2?lt.return:ft[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,ft[1])).done)return ct;switch(lt=0,ct&&(ft=[ft[0]&2,ct.value]),ft[0]){case 0:case 1:ct=ft;break;case 4:return it.label++,{value:ft[1],done:!1};case 5:it.label++,lt=ft[1],ft=[0];continue;case 7:ft=it.ops.pop(),it.trys.pop();continue;default:if(ct=it.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(ft[0]===6||ft[0]===2)){it=0;continue}if(ft[0]===3&&(!ct||ft[1]>ct[0]&&ft[1]<ct[3])){it.label=ft[1];break}if(ft[0]===6&&it.label<ct[1]){it.label=ct[1],ct=ft;break}if(ct&&it.label<ct[2]){it.label=ct[2],it.ops.push(ft);break}ct[2]&&it.ops.pop(),it.trys.pop();continue}ft=rt.call(nt,it)}catch(pt){ft=[6,pt],lt=0}finally{st=ct=0}if(ft[0]&5)throw ft[1];return{value:ft[0]?ft[1]:void 0,done:!0}}}function __createBinding$1(nt,rt,it,st){st===void 0&&(st=it),nt[st]=rt[it]}function __exportStar$1(nt,rt){for(var it in nt)it!=="default"&&!rt.hasOwnProperty(it)&&(rt[it]=nt[it])}function __values$1(nt){var rt=typeof Symbol=="function"&&Symbol.iterator,it=rt&&nt[rt],st=0;if(it)return it.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&st>=nt.length&&(nt=void 0),{value:nt&&nt[st++],done:!nt}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$1(nt,rt){var it=typeof Symbol=="function"&&nt[Symbol.iterator];if(!it)return nt;var st=it.call(nt),lt,ct=[],ut;try{for(;(rt===void 0||rt-- >0)&&!(lt=st.next()).done;)ct.push(lt.value)}catch(dt){ut={error:dt}}finally{try{lt&&!lt.done&&(it=st.return)&&it.call(st)}finally{if(ut)throw ut.error}}return ct}function __spread$1(){for(var nt=[],rt=0;rt<arguments.length;rt++)nt=nt.concat(__read$1(arguments[rt]));return nt}function __spreadArrays$1(){for(var nt=0,rt=0,it=arguments.length;rt<it;rt++)nt+=arguments[rt].length;for(var st=Array(nt),lt=0,rt=0;rt<it;rt++)for(var ct=arguments[rt],ut=0,dt=ct.length;ut<dt;ut++,lt++)st[lt]=ct[ut];return st}function __await$1(nt){return this instanceof __await$1?(this.v=nt,this):new __await$1(nt)}function __asyncGenerator$1(nt,rt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=it.apply(nt,rt||[]),lt,ct=[];return lt={},ut("next"),ut("throw"),ut("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function ut(gt){st[gt]&&(lt[gt]=function(xt){return new Promise(function(yt,vt){ct.push([gt,xt,yt,vt])>1||dt(gt,xt)})})}function dt(gt,xt){try{ht(st[gt](xt))}catch(yt){mt(ct[0][3],yt)}}function ht(gt){gt.value instanceof __await$1?Promise.resolve(gt.value.v).then(ft,pt):mt(ct[0][2],gt)}function ft(gt){dt("next",gt)}function pt(gt){dt("throw",gt)}function mt(gt,xt){gt(xt),ct.shift(),ct.length&&dt(ct[0][0],ct[0][1])}}function __asyncDelegator$1(nt){var rt,it;return rt={},st("next"),st("throw",function(lt){throw lt}),st("return"),rt[Symbol.iterator]=function(){return this},rt;function st(lt,ct){rt[lt]=nt[lt]?function(ut){return(it=!it)?{value:__await$1(nt[lt](ut)),done:lt==="return"}:ct?ct(ut):ut}:ct}}function __asyncValues$1(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=nt[Symbol.asyncIterator],it;return rt?rt.call(nt):(nt=typeof __values$1=="function"?__values$1(nt):nt[Symbol.iterator](),it={},st("next"),st("throw"),st("return"),it[Symbol.asyncIterator]=function(){return this},it);function st(ct){it[ct]=nt[ct]&&function(ut){return new Promise(function(dt,ht){ut=nt[ct](ut),lt(dt,ht,ut.done,ut.value)})}}function lt(ct,ut,dt,ht){Promise.resolve(ht).then(function(ft){ct({value:ft,done:dt})},ut)}}function __makeTemplateObject$1(nt,rt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:rt}):nt.raw=rt,nt}function __importStar$1(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function __importDefault$1(nt){return nt&&nt.__esModule?nt:{default:nt}}function __classPrivateFieldGet$1(nt,rt){if(!rt.has(nt))throw new TypeError("attempted to get private field on non-instance");return rt.get(nt)}function __classPrivateFieldSet$1(nt,rt,it){if(!rt.has(nt))throw new TypeError("attempted to set private field on non-instance");return rt.set(nt,it),it}const tslib_es6$1=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign$1},__asyncDelegator:__asyncDelegator$1,__asyncGenerator:__asyncGenerator$1,__asyncValues:__asyncValues$1,__await:__await$1,__awaiter:__awaiter$1,__classPrivateFieldGet:__classPrivateFieldGet$1,__classPrivateFieldSet:__classPrivateFieldSet$1,__createBinding:__createBinding$1,__decorate:__decorate$1,__exportStar:__exportStar$1,__extends:__extends$1,__generator:__generator$1,__importDefault:__importDefault$1,__importStar:__importStar$1,__makeTemplateObject:__makeTemplateObject$1,__metadata:__metadata$1,__param:__param$1,__read:__read$1,__rest:__rest$1,__spread:__spread$1,__spreadArrays:__spreadArrays$1,__values:__values$1},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(tslib_es6$1);var jsSha256={},constants$1={},hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,Object.defineProperty(constants$1,"__esModule",{value:!0}),constants$1.MAX_HASHABLE_LENGTH=constants$1.INIT=constants$1.KEY=constants$1.DIGEST_LENGTH=constants$1.BLOCK_SIZE=void 0,constants$1.BLOCK_SIZE=64,constants$1.DIGEST_LENGTH=32,constants$1.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),constants$1.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],constants$1.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1),constants$1}var RawSha256={},hasRequiredRawSha256;function requireRawSha256(){if(hasRequiredRawSha256)return RawSha256;hasRequiredRawSha256=1,Object.defineProperty(RawSha256,"__esModule",{value:!0}),RawSha256.RawSha256=void 0;var nt=requireConstants(),rt=function(){function it(){this.state=Int32Array.from(nt.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return it.prototype.update=function(st){if(this.finished)throw new Error("Attempted to update an already finished hash.");var lt=0,ct=st.byteLength;if(this.bytesHashed+=ct,this.bytesHashed*8>nt.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;ct>0;)this.buffer[this.bufferLength++]=st[lt++],ct--,this.bufferLength===nt.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},it.prototype.digest=function(){if(!this.finished){var st=this.bytesHashed*8,lt=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),ct=this.bufferLength;if(lt.setUint8(this.bufferLength++,128),ct%nt.BLOCK_SIZE>=nt.BLOCK_SIZE-8){for(var ut=this.bufferLength;ut<nt.BLOCK_SIZE;ut++)lt.setUint8(ut,0);this.hashBuffer(),this.bufferLength=0}for(var ut=this.bufferLength;ut<nt.BLOCK_SIZE-8;ut++)lt.setUint8(ut,0);lt.setUint32(nt.BLOCK_SIZE-8,Math.floor(st/4294967296),!0),lt.setUint32(nt.BLOCK_SIZE-4,st),this.hashBuffer(),this.finished=!0}for(var dt=new Uint8Array(nt.DIGEST_LENGTH),ut=0;ut<8;ut++)dt[ut*4]=this.state[ut]>>>24&255,dt[ut*4+1]=this.state[ut]>>>16&255,dt[ut*4+2]=this.state[ut]>>>8&255,dt[ut*4+3]=this.state[ut]>>>0&255;return dt},it.prototype.hashBuffer=function(){for(var st=this,lt=st.buffer,ct=st.state,ut=ct[0],dt=ct[1],ht=ct[2],ft=ct[3],pt=ct[4],mt=ct[5],gt=ct[6],xt=ct[7],yt=0;yt<nt.BLOCK_SIZE;yt++){if(yt<16)this.temp[yt]=(lt[yt*4]&255)<<24|(lt[yt*4+1]&255)<<16|(lt[yt*4+2]&255)<<8|lt[yt*4+3]&255;else{var vt=this.temp[yt-2],St=(vt>>>17|vt<<15)^(vt>>>19|vt<<13)^vt>>>10;vt=this.temp[yt-15];var wt=(vt>>>7|vt<<25)^(vt>>>18|vt<<14)^vt>>>3;this.temp[yt]=(St+this.temp[yt-7]|0)+(wt+this.temp[yt-16]|0)}var Et=(((pt>>>6|pt<<26)^(pt>>>11|pt<<21)^(pt>>>25|pt<<7))+(pt&mt^~pt&gt)|0)+(xt+(nt.KEY[yt]+this.temp[yt]|0)|0)|0,Rt=((ut>>>2|ut<<30)^(ut>>>13|ut<<19)^(ut>>>22|ut<<10))+(ut&dt^ut&ht^dt&ht)|0;xt=gt,gt=mt,mt=pt,pt=ft+Et|0,ft=ht,ht=dt,dt=ut,ut=Et+Rt|0}ct[0]+=ut,ct[1]+=dt,ct[2]+=ht,ct[3]+=ft,ct[4]+=pt,ct[5]+=mt,ct[6]+=gt,ct[7]+=xt},it}();return RawSha256.RawSha256=rt,RawSha256}var hasRequiredJsSha256;function requireJsSha256(){if(hasRequiredJsSha256)return jsSha256;hasRequiredJsSha256=1,Object.defineProperty(jsSha256,"__esModule",{value:!0}),jsSha256.Sha256=void 0;var nt=require$$0$1,rt=requireConstants(),it=requireRawSha256(),st=requireBuild$5(),lt=function(){function ut(dt){this.secret=dt,this.hash=new it.RawSha256,this.reset()}return ut.prototype.update=function(dt){if(!((0,st.isEmptyData)(dt)||this.error))try{this.hash.update((0,st.convertToBuffer)(dt))}catch(ht){this.error=ht}},ut.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},ut.prototype.digest=function(){return nt.__awaiter(this,void 0,void 0,function(){return nt.__generator(this,function(dt){return[2,this.digestSync()]})})},ut.prototype.reset=function(){if(this.hash=new it.RawSha256,this.secret){this.outer=new it.RawSha256;var dt=ct(this.secret),ht=new Uint8Array(rt.BLOCK_SIZE);ht.set(dt);for(var ft=0;ft<rt.BLOCK_SIZE;ft++)dt[ft]^=54,ht[ft]^=92;this.hash.update(dt),this.outer.update(ht);for(var ft=0;ft<dt.byteLength;ft++)dt[ft]=0}},ut}();jsSha256.Sha256=lt;function ct(ut){var dt=(0,st.convertToBuffer)(ut);if(dt.byteLength>rt.BLOCK_SIZE){var ht=new it.RawSha256;ht.update(dt),dt=ht.digest()}var ft=new Uint8Array(rt.BLOCK_SIZE);return ft.set(dt),ft}return jsSha256}var hasRequiredBuild$1;function requireBuild$1(){return hasRequiredBuild$1||(hasRequiredBuild$1=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0});var rt=require$$0$1;rt.__exportStar(requireJsSha256(),nt)}(build$1)),build$1}var hasRequiredCrossPlatformSha256;function requireCrossPlatformSha256(){if(hasRequiredCrossPlatformSha256)return crossPlatformSha256;hasRequiredCrossPlatformSha256=1,Object.defineProperty(crossPlatformSha256,"__esModule",{value:!0}),crossPlatformSha256.Sha256=void 0;var nt=requireIe11Sha256(),rt=requireWebCryptoSha256(),it=requireBuild$1(),st=requireBuild$3(),lt=requireBuild$2(),ct=require$$5,ut=requireBuild$5(),dt=function(){function ht(ft){(0,st.supportsWebCrypto)((0,ct.locateWindow)())?this.hash=new rt.Sha256(ft):(0,lt.isMsWindow)((0,ct.locateWindow)())?this.hash=new nt.Sha256(ft):this.hash=new it.Sha256(ft)}return ht.prototype.update=function(ft,pt){this.hash.update((0,ut.convertToBuffer)(ft))},ht.prototype.digest=function(){return this.hash.digest()},ht.prototype.reset=function(){this.hash.reset()},ht}();return crossPlatformSha256.Sha256=dt,crossPlatformSha256}(function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.WebCryptoSha256=nt.Ie11Sha256=void 0;var rt=require$$0$2;rt.__exportStar(requireCrossPlatformSha256(),nt);var it=requireIe11Sha256();Object.defineProperty(nt,"Ie11Sha256",{enumerable:!0,get:function(){return it.Sha256}});var st=requireWebCryptoSha256();Object.defineProperty(nt,"WebCryptoSha256",{enumerable:!0,get:function(){return st.Sha256}})})(build$2);const BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Utils{static getFirstMatch(rt,it){const st=it.match(rt);return st&&st.length>0&&st[1]||""}static getSecondMatch(rt,it){const st=it.match(rt);return st&&st.length>1&&st[2]||""}static matchAndReturnConst(rt,it,st){if(rt.test(it))return st}static getWindowsVersionName(rt){switch(rt){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(rt){const it=rt.split(".").splice(0,2).map(st=>parseInt(st,10)||0);if(it.push(0),it[0]===10)switch(it[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(rt){const it=rt.split(".").splice(0,2).map(st=>parseInt(st,10)||0);if(it.push(0),!(it[0]===1&&it[1]<5)){if(it[0]===1&&it[1]<6)return"Cupcake";if(it[0]===1&&it[1]>=6)return"Donut";if(it[0]===2&&it[1]<2)return"Eclair";if(it[0]===2&&it[1]===2)return"Froyo";if(it[0]===2&&it[1]>2)return"Gingerbread";if(it[0]===3)return"Honeycomb";if(it[0]===4&&it[1]<1)return"Ice Cream Sandwich";if(it[0]===4&&it[1]<4)return"Jelly Bean";if(it[0]===4&&it[1]>=4)return"KitKat";if(it[0]===5)return"Lollipop";if(it[0]===6)return"Marshmallow";if(it[0]===7)return"Nougat";if(it[0]===8)return"Oreo";if(it[0]===9)return"Pie"}}static getVersionPrecision(rt){return rt.split(".").length}static compareVersions(rt,it,st=!1){const lt=Utils.getVersionPrecision(rt),ct=Utils.getVersionPrecision(it);let ut=Math.max(lt,ct),dt=0;const ht=Utils.map([rt,it],ft=>{const pt=ut-Utils.getVersionPrecision(ft),mt=ft+new Array(pt+1).join(".0");return Utils.map(mt.split("."),gt=>new Array(20-gt.length).join("0")+gt).reverse()});for(st&&(dt=ut-Math.min(lt,ct)),ut-=1;ut>=dt;){if(ht[0][ut]>ht[1][ut])return 1;if(ht[0][ut]===ht[1][ut]){if(ut===dt)return 0;ut-=1}else if(ht[0][ut]<ht[1][ut])return-1}}static map(rt,it){const st=[];let lt;if(Array.prototype.map)return Array.prototype.map.call(rt,it);for(lt=0;lt<rt.length;lt+=1)st.push(it(rt[lt]));return st}static find(rt,it){let st,lt;if(Array.prototype.find)return Array.prototype.find.call(rt,it);for(st=0,lt=rt.length;st<lt;st+=1){const ct=rt[st];if(it(ct,st))return ct}}static assign(rt,...it){const st=rt;let lt,ct;if(Object.assign)return Object.assign(rt,...it);for(lt=0,ct=it.length;lt<ct;lt+=1){const ut=it[lt];typeof ut=="object"&&ut!==null&&Object.keys(ut).forEach(ht=>{st[ht]=ut[ht]})}return rt}static getBrowserAlias(rt){return BROWSER_ALIASES_MAP[rt]}static getBrowserTypeByAlias(rt){return BROWSER_MAP[rt]||""}}const commonVersionIdentifier=/version\/(\d+(\.?_?\d+)+)/i,browsersList=[{test:[/googlebot/i],describe(nt){const rt={name:"Googlebot"},it=Utils.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/opera/i],describe(nt){const rt={name:"Opera"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/opr\/|opios/i],describe(nt){const rt={name:"Opera"},it=Utils.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/SamsungBrowser/i],describe(nt){const rt={name:"Samsung Internet for Android"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/Whale/i],describe(nt){const rt={name:"NAVER Whale Browser"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/MZBrowser/i],describe(nt){const rt={name:"MZ Browser"},it=Utils.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/focus/i],describe(nt){const rt={name:"Focus"},it=Utils.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/swing/i],describe(nt){const rt={name:"Swing"},it=Utils.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/coast/i],describe(nt){const rt={name:"Opera Coast"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(nt){const rt={name:"Opera Touch"},it=Utils.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/yabrowser/i],describe(nt){const rt={name:"Yandex Browser"},it=Utils.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/ucbrowser/i],describe(nt){const rt={name:"UC Browser"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/Maxthon|mxios/i],describe(nt){const rt={name:"Maxthon"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/epiphany/i],describe(nt){const rt={name:"Epiphany"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/puffin/i],describe(nt){const rt={name:"Puffin"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/sleipnir/i],describe(nt){const rt={name:"Sleipnir"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/k-meleon/i],describe(nt){const rt={name:"K-Meleon"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/micromessenger/i],describe(nt){const rt={name:"WeChat"},it=Utils.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/qqbrowser/i],describe(nt){const rt={name:/qqbrowserlite/i.test(nt)?"QQ Browser Lite":"QQ Browser"},it=Utils.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/msie|trident/i],describe(nt){const rt={name:"Internet Explorer"},it=Utils.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/\sedg\//i],describe(nt){const rt={name:"Microsoft Edge"},it=Utils.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/edg([ea]|ios)/i],describe(nt){const rt={name:"Microsoft Edge"},it=Utils.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/vivaldi/i],describe(nt){const rt={name:"Vivaldi"},it=Utils.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/seamonkey/i],describe(nt){const rt={name:"SeaMonkey"},it=Utils.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/sailfish/i],describe(nt){const rt={name:"Sailfish"},it=Utils.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,nt);return it&&(rt.version=it),rt}},{test:[/silk/i],describe(nt){const rt={name:"Amazon Silk"},it=Utils.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/phantom/i],describe(nt){const rt={name:"PhantomJS"},it=Utils.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/slimerjs/i],describe(nt){const rt={name:"SlimerJS"},it=Utils.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(nt){const rt={name:"BlackBerry"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/(web|hpw)[o0]s/i],describe(nt){const rt={name:"WebOS Browser"},it=Utils.getFirstMatch(commonVersionIdentifier,nt)||Utils.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/bada/i],describe(nt){const rt={name:"Bada"},it=Utils.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/tizen/i],describe(nt){const rt={name:"Tizen"},it=Utils.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/qupzilla/i],describe(nt){const rt={name:"QupZilla"},it=Utils.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/firefox|iceweasel|fxios/i],describe(nt){const rt={name:"Firefox"},it=Utils.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/electron/i],describe(nt){const rt={name:"Electron"},it=Utils.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/MiuiBrowser/i],describe(nt){const rt={name:"Miui"},it=Utils.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/chromium/i],describe(nt){const rt={name:"Chromium"},it=Utils.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,nt)||Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/chrome|crios|crmo/i],describe(nt){const rt={name:"Chrome"},it=Utils.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/GSA/i],describe(nt){const rt={name:"Google Search"},it=Utils.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test(nt){const rt=!nt.test(/like android/i),it=nt.test(/android/i);return rt&&it},describe(nt){const rt={name:"Android Browser"},it=Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/playstation 4/i],describe(nt){const rt={name:"PlayStation 4"},it=Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/safari|applewebkit/i],describe(nt){const rt={name:"Safari"},it=Utils.getFirstMatch(commonVersionIdentifier,nt);return it&&(rt.version=it),rt}},{test:[/.*/i],describe(nt){const rt=/^(.*)\/(.*) /,it=/^(.*)\/(.*)[ \t]\((.*)/,lt=nt.search("\\(")!==-1?it:rt;return{name:Utils.getFirstMatch(lt,nt),version:Utils.getSecondMatch(lt,nt)}}}],osParsersList=[{test:[/Roku\/DVP/],describe(nt){const rt=Utils.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,nt);return{name:OS_MAP.Roku,version:rt}}},{test:[/windows phone/i],describe(nt){const rt=Utils.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,nt);return{name:OS_MAP.WindowsPhone,version:rt}}},{test:[/windows /i],describe(nt){const rt=Utils.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,nt),it=Utils.getWindowsVersionName(rt);return{name:OS_MAP.Windows,version:rt,versionName:it}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(nt){const rt={name:OS_MAP.iOS},it=Utils.getSecondMatch(/(Version\/)(\d[\d.]+)/,nt);return it&&(rt.version=it),rt}},{test:[/macintosh/i],describe(nt){const rt=Utils.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,nt).replace(/[_\s]/g,"."),it=Utils.getMacOSVersionName(rt),st={name:OS_MAP.MacOS,version:rt};return it&&(st.versionName=it),st}},{test:[/(ipod|iphone|ipad)/i],describe(nt){const rt=Utils.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,nt).replace(/[_\s]/g,".");return{name:OS_MAP.iOS,version:rt}}},{test(nt){const rt=!nt.test(/like android/i),it=nt.test(/android/i);return rt&&it},describe(nt){const rt=Utils.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,nt),it=Utils.getAndroidVersionName(rt),st={name:OS_MAP.Android,version:rt};return it&&(st.versionName=it),st}},{test:[/(web|hpw)[o0]s/i],describe(nt){const rt=Utils.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,nt),it={name:OS_MAP.WebOS};return rt&&rt.length&&(it.version=rt),it}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(nt){const rt=Utils.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,nt)||Utils.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,nt)||Utils.getFirstMatch(/\bbb(\d+)/i,nt);return{name:OS_MAP.BlackBerry,version:rt}}},{test:[/bada/i],describe(nt){const rt=Utils.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,nt);return{name:OS_MAP.Bada,version:rt}}},{test:[/tizen/i],describe(nt){const rt=Utils.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,nt);return{name:OS_MAP.Tizen,version:rt}}},{test:[/linux/i],describe(){return{name:OS_MAP.Linux}}},{test:[/CrOS/],describe(){return{name:OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe(nt){const rt=Utils.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,nt);return{name:OS_MAP.PlayStation4,version:rt}}}],platformParsersList=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(nt){const rt=Utils.getFirstMatch(/(can-l01)/i,nt)&&"Nova",it={type:PLATFORMS_MAP.mobile,vendor:"Huawei"};return rt&&(it.model=rt),it}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:PLATFORMS_MAP.tablet}}},{test(nt){const rt=nt.test(/ipod|iphone/i),it=nt.test(/like (ipod|iphone)/i);return rt&&!it},describe(nt){const rt=Utils.getFirstMatch(/(ipod|iphone)/i,nt);return{type:PLATFORMS_MAP.mobile,vendor:"Apple",model:rt}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:PLATFORMS_MAP.mobile}}},{test(nt){return nt.getBrowserName(!0)==="blackberry"},describe(){return{type:PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test(nt){return nt.getBrowserName(!0)==="bada"},describe(){return{type:PLATFORMS_MAP.mobile}}},{test(nt){return nt.getBrowserName()==="windows phone"},describe(){return{type:PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test(nt){const rt=Number(String(nt.getOSVersion()).split(".")[0]);return nt.getOSName(!0)==="android"&&rt>=3},describe(){return{type:PLATFORMS_MAP.tablet}}},{test(nt){return nt.getOSName(!0)==="android"},describe(){return{type:PLATFORMS_MAP.mobile}}},{test(nt){return nt.getOSName(!0)==="macos"},describe(){return{type:PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test(nt){return nt.getOSName(!0)==="windows"},describe(){return{type:PLATFORMS_MAP.desktop}}},{test(nt){return nt.getOSName(!0)==="linux"},describe(){return{type:PLATFORMS_MAP.desktop}}},{test(nt){return nt.getOSName(!0)==="playstation 4"},describe(){return{type:PLATFORMS_MAP.tv}}},{test(nt){return nt.getOSName(!0)==="roku"},describe(){return{type:PLATFORMS_MAP.tv}}}],enginesParsersList=[{test(nt){return nt.getBrowserName(!0)==="microsoft edge"},describe(nt){if(/\sedg\//i.test(nt))return{name:ENGINE_MAP.Blink};const it=Utils.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,nt);return{name:ENGINE_MAP.EdgeHTML,version:it}}},{test:[/trident/i],describe(nt){const rt={name:ENGINE_MAP.Trident},it=Utils.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test(nt){return nt.test(/presto/i)},describe(nt){const rt={name:ENGINE_MAP.Presto},it=Utils.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test(nt){const rt=nt.test(/gecko/i),it=nt.test(/like gecko/i);return rt&&!it},describe(nt){const rt={name:ENGINE_MAP.Gecko},it=Utils.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe(nt){const rt={name:ENGINE_MAP.WebKit},it=Utils.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,nt);return it&&(rt.version=it),rt}}];class Parser{constructor(rt,it=!1){if(rt==null||rt==="")throw new Error("UserAgent parameter can't be empty");this._ua=rt,this.parsedResult={},it!==!0&&this.parse()}getUA(){return this._ua}test(rt){return rt.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const rt=Utils.find(browsersList,it=>{if(typeof it.test=="function")return it.test(this);if(it.test instanceof Array)return it.test.some(st=>this.test(st));throw new Error("Browser's test function is not valid")});return rt&&(this.parsedResult.browser=rt.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(rt){return rt?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const rt=Utils.find(osParsersList,it=>{if(typeof it.test=="function")return it.test(this);if(it.test instanceof Array)return it.test.some(st=>this.test(st));throw new Error("Browser's test function is not valid")});return rt&&(this.parsedResult.os=rt.describe(this.getUA())),this.parsedResult.os}getOSName(rt){const{name:it}=this.getOS();return rt?String(it).toLowerCase()||"":it||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(rt=!1){const{type:it}=this.getPlatform();return rt?String(it).toLowerCase()||"":it||""}parsePlatform(){this.parsedResult.platform={};const rt=Utils.find(platformParsersList,it=>{if(typeof it.test=="function")return it.test(this);if(it.test instanceof Array)return it.test.some(st=>this.test(st));throw new Error("Browser's test function is not valid")});return rt&&(this.parsedResult.platform=rt.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(rt){return rt?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const rt=Utils.find(enginesParsersList,it=>{if(typeof it.test=="function")return it.test(this);if(it.test instanceof Array)return it.test.some(st=>this.test(st));throw new Error("Browser's test function is not valid")});return rt&&(this.parsedResult.engine=rt.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Utils.assign({},this.parsedResult)}satisfies(rt){const it={};let st=0;const lt={};let ct=0;if(Object.keys(rt).forEach(dt=>{const ht=rt[dt];typeof ht=="string"?(lt[dt]=ht,ct+=1):typeof ht=="object"&&(it[dt]=ht,st+=1)}),st>0){const dt=Object.keys(it),ht=Utils.find(dt,pt=>this.isOS(pt));if(ht){const pt=this.satisfies(it[ht]);if(pt!==void 0)return pt}const ft=Utils.find(dt,pt=>this.isPlatform(pt));if(ft){const pt=this.satisfies(it[ft]);if(pt!==void 0)return pt}}if(ct>0){const dt=Object.keys(lt),ht=Utils.find(dt,ft=>this.isBrowser(ft,!0));if(ht!==void 0)return this.compareVersion(lt[ht])}}isBrowser(rt,it=!1){const st=this.getBrowserName().toLowerCase();let lt=rt.toLowerCase();const ct=Utils.getBrowserTypeByAlias(lt);return it&&ct&&(lt=ct.toLowerCase()),lt===st}compareVersion(rt){let it=[0],st=rt,lt=!1;const ct=this.getBrowserVersion();if(typeof ct=="string")return rt[0]===">"||rt[0]==="<"?(st=rt.substr(1),rt[1]==="="?(lt=!0,st=rt.substr(2)):it=[],rt[0]===">"?it.push(1):it.push(-1)):rt[0]==="="?st=rt.substr(1):rt[0]==="~"&&(lt=!0,st=rt.substr(1)),it.indexOf(Utils.compareVersions(ct,st,lt))>-1}isOS(rt){return this.getOSName(!0)===String(rt).toLowerCase()}isPlatform(rt){return this.getPlatformType(!0)===String(rt).toLowerCase()}isEngine(rt){return this.getEngineName(!0)===String(rt).toLowerCase()}is(rt,it=!1){return this.isBrowser(rt,it)||this.isOS(rt)||this.isPlatform(rt)}some(rt=[]){return rt.some(it=>this.is(it))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Bowser{static getParser(rt,it=!1){if(typeof rt!="string")throw new Error("UserAgent should be a string");return new Parser(rt,it)}static parse(rt){return new Parser(rt).getResult()}static get BROWSER_MAP(){return BROWSER_MAP}static get ENGINE_MAP(){return ENGINE_MAP}static get OS_MAP(){return OS_MAP}static get PLATFORMS_MAP(){return PLATFORMS_MAP}}const defaultUserAgent=({serviceId:nt,clientVersion:rt})=>async()=>{var lt,ct,ut,dt,ht;const it=typeof window<"u"&&((lt=window==null?void 0:window.navigator)!=null&&lt.userAgent)?Bowser.parse(window.navigator.userAgent):void 0,st=[["aws-sdk-js",rt],["ua","2.0"],[`os/${((ct=it==null?void 0:it.os)==null?void 0:ct.name)||"other"}`,(ut=it==null?void 0:it.os)==null?void 0:ut.version],["lang/js"],["md/browser",`${((dt=it==null?void 0:it.browser)==null?void 0:dt.name)??"unknown"}_${((ht=it==null?void 0:it.browser)==null?void 0:ht.version)??"unknown"}`]];return nt&&st.push([`api/${nt}`,rt]),st};function getChunkedStream(nt){let rt=0,it=0,st=null,lt=null;const ct=dt=>{if(typeof dt!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+dt);rt=dt,it=4,st=new Uint8Array(dt),new DataView(st.buffer).setUint32(0,dt,!1)},ut=async function*(){const dt=nt[Symbol.asyncIterator]();for(;;){const{value:ht,done:ft}=await dt.next();if(ft){if(rt)if(rt===it)yield st;else throw new Error("Truncated event message received.");else return;return}const pt=ht.length;let mt=0;for(;mt<pt;){if(!st){const xt=pt-mt;lt||(lt=new Uint8Array(4));const yt=Math.min(4-it,xt);if(lt.set(ht.slice(mt,mt+yt),it),it+=yt,mt+=yt,it<4)break;ct(new DataView(lt.buffer).getUint32(0,!1)),lt=null}const gt=Math.min(rt-it,pt-mt);st.set(ht.slice(mt,mt+gt),it),it+=gt,mt+=gt,rt&&rt===it&&(yield st,st=null,rt=0,it=0)}}};return{[Symbol.asyncIterator]:ut}}function getMessageUnmarshaller(nt,rt){return async function(it){const{value:st}=it.headers[":message-type"];if(st==="error"){const lt=new Error(it.headers[":error-message"].value||"UnknownError");throw lt.name=it.headers[":error-code"].value,lt}else if(st==="exception"){const lt=it.headers[":exception-type"].value,ct={[lt]:it},ut=await nt(ct);if(ut.$unknown){const dt=new Error(rt(it.body));throw dt.name=lt,dt}throw ut[lt]}else if(st==="event"){const lt={[it.headers[":event-type"].value]:it},ct=await nt(lt);return ct.$unknown?void 0:ct}else throw Error(`Unrecognizable event type: ${it.headers[":event-type"].value}`)}}let EventStreamMarshaller$1=class{constructor({utf8Encoder:rt,utf8Decoder:it}){this.eventStreamCodec=new EventStreamCodec(rt,it),this.utfEncoder=rt}deserialize(rt,it){const st=getChunkedStream(rt);return new SmithyMessageDecoderStream({messageStream:new MessageDecoderStream({inputStream:st,decoder:this.eventStreamCodec}),deserializer:getMessageUnmarshaller(it,this.utfEncoder)})}serialize(rt,it){return new MessageEncoderStream({messageStream:new SmithyMessageEncoderStream({inputStream:rt,serializer:it}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const readableStreamtoIterable=nt=>({[Symbol.asyncIterator]:async function*(){const rt=nt.getReader();try{for(;;){const{done:it,value:st}=await rt.read();if(it)return;yield st}}finally{rt.releaseLock()}}}),iterableToReadableStream=nt=>{const rt=nt[Symbol.asyncIterator]();return new ReadableStream({async pull(it){const{done:st,value:lt}=await rt.next();if(st)return it.close();it.enqueue(lt)}})};class EventStreamMarshaller{constructor({utf8Encoder:rt,utf8Decoder:it}){this.universalMarshaller=new EventStreamMarshaller$1({utf8Decoder:it,utf8Encoder:rt})}deserialize(rt,it){const st=isReadableStream(rt)?readableStreamtoIterable(rt):rt;return this.universalMarshaller.deserialize(st,it)}serialize(rt,it){const st=this.universalMarshaller.serialize(rt,it);return typeof ReadableStream=="function"?iterableToReadableStream(st):st}}const isReadableStream=nt=>typeof ReadableStream=="function"&&nt instanceof ReadableStream,eventStreamSerdeProvider=nt=>new EventStreamMarshaller(nt);function blobReader(nt,rt,it=1024*1024){return new Promise((st,lt)=>{const ct=new FileReader;ct.addEventListener("error",lt),ct.addEventListener("abort",lt);const ut=nt.size;let dt=0;function ht(){if(dt>=ut){st();return}ct.readAsArrayBuffer(nt.slice(dt,Math.min(ut,dt+it)))}ct.addEventListener("load",ft=>{const pt=ft.target.result;rt(new Uint8Array(pt)),dt+=pt.byteLength,ht()}),ht()})}const blobHasher=async function(rt,it){const st=new rt;return await blobReader(it,lt=>{st.update(lt)}),st.digest()},invalidProvider=nt=>()=>Promise.reject(nt),BLOCK_SIZE=64,DIGEST_LENGTH=16,INIT=[1732584193,4023233417,2562383102,271733878];class Md5{constructor(){this.reset()}update(rt){if(isEmptyData(rt))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const it=convertToBuffer(rt);let st=0,{byteLength:lt}=it;for(this.bytesHashed+=lt;lt>0;)this.buffer.setUint8(this.bufferLength++,it[st++]),lt--,this.bufferLength===BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:it,bufferLength:st,bytesHashed:lt}=this,ct=lt*8;if(it.setUint8(this.bufferLength++,128),st%BLOCK_SIZE>=BLOCK_SIZE-8){for(let ut=this.bufferLength;ut<BLOCK_SIZE;ut++)it.setUint8(ut,0);this.hashBuffer(),this.bufferLength=0}for(let ut=this.bufferLength;ut<BLOCK_SIZE-8;ut++)it.setUint8(ut,0);it.setUint32(BLOCK_SIZE-8,ct>>>0,!0),it.setUint32(BLOCK_SIZE-4,Math.floor(ct/4294967296),!0),this.hashBuffer(),this.finished=!0}const rt=new DataView(new ArrayBuffer(DIGEST_LENGTH));for(let it=0;it<4;it++)rt.setUint32(it*4,this.state[it],!0);return new Uint8Array(rt.buffer,rt.byteOffset,rt.byteLength)}hashBuffer(){const{buffer:rt,state:it}=this;let st=it[0],lt=it[1],ct=it[2],ut=it[3];st=ff(st,lt,ct,ut,rt.getUint32(0,!0),7,3614090360),ut=ff(ut,st,lt,ct,rt.getUint32(4,!0),12,3905402710),ct=ff(ct,ut,st,lt,rt.getUint32(8,!0),17,606105819),lt=ff(lt,ct,ut,st,rt.getUint32(12,!0),22,3250441966),st=ff(st,lt,ct,ut,rt.getUint32(16,!0),7,4118548399),ut=ff(ut,st,lt,ct,rt.getUint32(20,!0),12,1200080426),ct=ff(ct,ut,st,lt,rt.getUint32(24,!0),17,2821735955),lt=ff(lt,ct,ut,st,rt.getUint32(28,!0),22,4249261313),st=ff(st,lt,ct,ut,rt.getUint32(32,!0),7,1770035416),ut=ff(ut,st,lt,ct,rt.getUint32(36,!0),12,2336552879),ct=ff(ct,ut,st,lt,rt.getUint32(40,!0),17,4294925233),lt=ff(lt,ct,ut,st,rt.getUint32(44,!0),22,2304563134),st=ff(st,lt,ct,ut,rt.getUint32(48,!0),7,1804603682),ut=ff(ut,st,lt,ct,rt.getUint32(52,!0),12,4254626195),ct=ff(ct,ut,st,lt,rt.getUint32(56,!0),17,2792965006),lt=ff(lt,ct,ut,st,rt.getUint32(60,!0),22,1236535329),st=gg(st,lt,ct,ut,rt.getUint32(4,!0),5,4129170786),ut=gg(ut,st,lt,ct,rt.getUint32(24,!0),9,3225465664),ct=gg(ct,ut,st,lt,rt.getUint32(44,!0),14,643717713),lt=gg(lt,ct,ut,st,rt.getUint32(0,!0),20,3921069994),st=gg(st,lt,ct,ut,rt.getUint32(20,!0),5,3593408605),ut=gg(ut,st,lt,ct,rt.getUint32(40,!0),9,38016083),ct=gg(ct,ut,st,lt,rt.getUint32(60,!0),14,3634488961),lt=gg(lt,ct,ut,st,rt.getUint32(16,!0),20,3889429448),st=gg(st,lt,ct,ut,rt.getUint32(36,!0),5,568446438),ut=gg(ut,st,lt,ct,rt.getUint32(56,!0),9,3275163606),ct=gg(ct,ut,st,lt,rt.getUint32(12,!0),14,4107603335),lt=gg(lt,ct,ut,st,rt.getUint32(32,!0),20,1163531501),st=gg(st,lt,ct,ut,rt.getUint32(52,!0),5,2850285829),ut=gg(ut,st,lt,ct,rt.getUint32(8,!0),9,4243563512),ct=gg(ct,ut,st,lt,rt.getUint32(28,!0),14,1735328473),lt=gg(lt,ct,ut,st,rt.getUint32(48,!0),20,2368359562),st=hh(st,lt,ct,ut,rt.getUint32(20,!0),4,4294588738),ut=hh(ut,st,lt,ct,rt.getUint32(32,!0),11,2272392833),ct=hh(ct,ut,st,lt,rt.getUint32(44,!0),16,1839030562),lt=hh(lt,ct,ut,st,rt.getUint32(56,!0),23,4259657740),st=hh(st,lt,ct,ut,rt.getUint32(4,!0),4,2763975236),ut=hh(ut,st,lt,ct,rt.getUint32(16,!0),11,1272893353),ct=hh(ct,ut,st,lt,rt.getUint32(28,!0),16,4139469664),lt=hh(lt,ct,ut,st,rt.getUint32(40,!0),23,3200236656),st=hh(st,lt,ct,ut,rt.getUint32(52,!0),4,681279174),ut=hh(ut,st,lt,ct,rt.getUint32(0,!0),11,3936430074),ct=hh(ct,ut,st,lt,rt.getUint32(12,!0),16,3572445317),lt=hh(lt,ct,ut,st,rt.getUint32(24,!0),23,76029189),st=hh(st,lt,ct,ut,rt.getUint32(36,!0),4,3654602809),ut=hh(ut,st,lt,ct,rt.getUint32(48,!0),11,3873151461),ct=hh(ct,ut,st,lt,rt.getUint32(60,!0),16,530742520),lt=hh(lt,ct,ut,st,rt.getUint32(8,!0),23,3299628645),st=ii(st,lt,ct,ut,rt.getUint32(0,!0),6,4096336452),ut=ii(ut,st,lt,ct,rt.getUint32(28,!0),10,1126891415),ct=ii(ct,ut,st,lt,rt.getUint32(56,!0),15,2878612391),lt=ii(lt,ct,ut,st,rt.getUint32(20,!0),21,4237533241),st=ii(st,lt,ct,ut,rt.getUint32(48,!0),6,1700485571),ut=ii(ut,st,lt,ct,rt.getUint32(12,!0),10,2399980690),ct=ii(ct,ut,st,lt,rt.getUint32(40,!0),15,4293915773),lt=ii(lt,ct,ut,st,rt.getUint32(4,!0),21,2240044497),st=ii(st,lt,ct,ut,rt.getUint32(32,!0),6,1873313359),ut=ii(ut,st,lt,ct,rt.getUint32(60,!0),10,4264355552),ct=ii(ct,ut,st,lt,rt.getUint32(24,!0),15,2734768916),lt=ii(lt,ct,ut,st,rt.getUint32(52,!0),21,1309151649),st=ii(st,lt,ct,ut,rt.getUint32(16,!0),6,4149444226),ut=ii(ut,st,lt,ct,rt.getUint32(44,!0),10,3174756917),ct=ii(ct,ut,st,lt,rt.getUint32(8,!0),15,718787259),lt=ii(lt,ct,ut,st,rt.getUint32(36,!0),21,3951481745),it[0]=st+it[0]&4294967295,it[1]=lt+it[1]&4294967295,it[2]=ct+it[2]&4294967295,it[3]=ut+it[3]&4294967295}reset(){this.state=Uint32Array.from(INIT),this.buffer=new DataView(new ArrayBuffer(BLOCK_SIZE)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function cmn(nt,rt,it,st,lt,ct){return rt=(rt+nt&4294967295)+(st+ct&4294967295)&4294967295,(rt<<lt|rt>>>32-lt)+it&4294967295}function ff(nt,rt,it,st,lt,ct,ut){return cmn(rt&it|~rt&st,nt,rt,lt,ct,ut)}function gg(nt,rt,it,st,lt,ct,ut){return cmn(rt&st|it&~st,nt,rt,lt,ct,ut)}function hh(nt,rt,it,st,lt,ct,ut){return cmn(rt^it^st,nt,rt,lt,ct,ut)}function ii(nt,rt,it,st,lt,ct,ut){return cmn(it^(rt|~st),nt,rt,lt,ct,ut)}function isEmptyData(nt){return typeof nt=="string"?nt.length===0:nt.byteLength===0}function convertToBuffer(nt){return typeof nt=="string"?fromUtf8$3(nt):ArrayBuffer.isView(nt)?new Uint8Array(nt.buffer,nt.byteOffset,nt.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(nt)}const TEXT_ENCODER=typeof TextEncoder=="function"?new TextEncoder:null,calculateBodyLength=nt=>{if(typeof nt=="string"){if(TEXT_ENCODER)return TEXT_ENCODER.encode(nt).byteLength;let rt=nt.length;for(let it=rt-1;it>=0;it--){const st=nt.charCodeAt(it);st>127&&st<=2047?rt++:st>2047&&st<=65535&&(rt+=2),st>=56320&&st<=57343&&it--}return rt}else{if(typeof nt.byteLength=="number")return nt.byteLength;if(typeof nt.size=="number")return nt.size}throw new Error(`Body Length computation failed for ${nt}`)},signatureV4CrtContainer={CrtSignerV4:null};class SignatureV4MultiRegion{constructor(rt){this.sigv4Signer=new SignatureV4S3Express(rt),this.signerOptions=rt}async sign(rt,it={}){if(it.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(rt,it)}return this.sigv4Signer.sign(rt,it)}async signWithCredentials(rt,it,st={}){if(st.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().signWithCredentials(rt,it,st)}return this.sigv4Signer.signWithCredentials(rt,it,st)}async presign(rt,it={}){if(it.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(rt,it)}return this.sigv4Signer.presign(rt,it)}async presignWithCredentials(rt,it,st={}){if(st.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(rt,it,st)}getSigv4aSigner(){if(!this.sigv4aSigner){let rt=null;try{if(rt=signatureV4CrtContainer.CrtSignerV4,typeof rt!="function")throw new Error}catch(it){throw it.message=`${it.message}
Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,it}this.sigv4aSigner=new rt({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}}const cc="required",cd="type",ce="conditions",cf="fn",cg="argv",ch="ref",ci="assign",cj="url",ck="properties",cl="backend",cm="authSchemes",cn="disableDoubleEncoding",co="signingName",cp="signingRegion",cq="headers",a$5=!1,b$5=!0,c$6="isSet",d$7="booleanEquals",e$1="error",f$6="aws.partition",g$1="stringEquals",h$4="getAttr",i$6="name",j$1="substring",k$2="bucketSuffix",l$6="parseURL",m$4="{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",n$4="endpoint",o$6="tree",p$4="aws.isVirtualHostableS3Bucket",q$1="{url#scheme}://{Bucket}.{url#authority}{url#path}",r$4="not",s$9="{url#scheme}://{url#authority}{url#path}",t$7="hardwareType",u$6="regionPrefix",v$3="bucketAliasSuffix",w$3="outpostId",x$3="isValidHostLabel",y$5="s3-outposts",z$1="s3",A$1="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",B$1="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",C$2="https://{Bucket}.s3.{partitionResult#dnsSuffix}",D$3="aws.parseArn",E$1="bucketArn",F$3="arnType",G$1="",H$1="s3-object-lambda",I$8="accesspoint",J="accessPointName",K="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",L="mrapPartition",M$4="outpostType",N$3="arnPrefix",O$2="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",P$2="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",Q$1="https://s3.{partitionResult#dnsSuffix}",R$2={[cc]:!1,[cd]:"String"},S$6={[cc]:!0,default:!1,[cd]:"Boolean"},T$4={[cc]:!1,[cd]:"Boolean"},U$3={[cf]:d$7,[cg]:[{[ch]:"Accelerate"},!0]},V={[cf]:d$7,[cg]:[{[ch]:"UseFIPS"},!0]},W={[cf]:d$7,[cg]:[{[ch]:"UseDualStack"},!0]},X$1={[cf]:c$6,[cg]:[{[ch]:"Endpoint"}]},Y$1={[cf]:f$6,[cg]:[{[ch]:"Region"}],[ci]:"partitionResult"},Z$1={[cf]:g$1,[cg]:[{[cf]:h$4,[cg]:[{[ch]:"partitionResult"},i$6]},"aws-cn"]},aa={[cf]:c$6,[cg]:[{[ch]:"Bucket"}]},ab={[ch]:"Bucket"},ac={[cf]:l$6,[cg]:[{[ch]:"Endpoint"}],[ci]:"url"},ad={[cf]:d$7,[cg]:[{[cf]:h$4,[cg]:[{[ch]:"url"},"isIp"]},!0]},ae$1={[ch]:"url"},af={[cf]:"uriEncode",[cg]:[ab],[ci]:"uri_encoded_bucket"},ag={[cl]:"S3Express",[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:"s3express",[cp]:"{Region}"}]},ah={},ai={[cf]:p$4,[cg]:[ab,!1]},aj={[e$1]:"S3Express bucket name is not a valid virtual hostable name.",[cd]:e$1},ak={[cl]:"S3Express",[cm]:[{[cn]:!0,[i$6]:"sigv4-s3express",[co]:"s3express",[cp]:"{Region}"}]},al={[cf]:c$6,[cg]:[{[ch]:"UseS3ExpressControlEndpoint"}]},am={[cf]:d$7,[cg]:[{[ch]:"UseS3ExpressControlEndpoint"},!0]},an={[cf]:r$4,[cg]:[X$1]},ao={[e$1]:"Unrecognized S3Express bucket name format.",[cd]:e$1},ap={[cf]:r$4,[cg]:[aa]},aq={[ch]:t$7},ar={[ce]:[an],[e$1]:"Expected a endpoint to be specified but no endpoint was found",[cd]:e$1},as={[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:y$5,[cp]:"{Region}"}]},at={[cf]:d$7,[cg]:[{[ch]:"ForcePathStyle"},!1]},au={[ch]:"ForcePathStyle"},av={[cf]:d$7,[cg]:[{[ch]:"Accelerate"},!1]},aw={[cf]:g$1,[cg]:[{[ch]:"Region"},"aws-global"]},ax={[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:z$1,[cp]:"us-east-1"}]},ay={[cf]:r$4,[cg]:[aw]},az={[cf]:d$7,[cg]:[{[ch]:"UseGlobalEndpoint"},!0]},aA={[cj]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[ck]:{[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:z$1,[cp]:"{Region}"}]},[cq]:{}},aB={[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:z$1,[cp]:"{Region}"}]},aC={[cf]:d$7,[cg]:[{[ch]:"UseGlobalEndpoint"},!1]},aD={[cf]:d$7,[cg]:[{[ch]:"UseDualStack"},!1]},aE={[cj]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},aF={[cf]:d$7,[cg]:[{[ch]:"UseFIPS"},!1]},aG={[cj]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},aH={[cj]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},aI={[cf]:d$7,[cg]:[{[cf]:h$4,[cg]:[ae$1,"isIp"]},!1]},aJ={[cj]:A$1,[ck]:aB,[cq]:{}},aK={[cj]:q$1,[ck]:aB,[cq]:{}},aL={[n$4]:aK,[cd]:n$4},aM={[cj]:B$1,[ck]:aB,[cq]:{}},aN={[cj]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},aO={[e$1]:"Invalid region: region was not a valid DNS name.",[cd]:e$1},aP={[ch]:E$1},aQ={[ch]:F$3},aR={[cf]:h$4,[cg]:[aP,"service"]},aS={[ch]:J},aT={[ce]:[W],[e$1]:"S3 Object Lambda does not support Dual-stack",[cd]:e$1},aU={[ce]:[U$3],[e$1]:"S3 Object Lambda does not support S3 Accelerate",[cd]:e$1},aV={[ce]:[{[cf]:c$6,[cg]:[{[ch]:"DisableAccessPoints"}]},{[cf]:d$7,[cg]:[{[ch]:"DisableAccessPoints"},!0]}],[e$1]:"Access points are not supported for this operation",[cd]:e$1},aW={[ce]:[{[cf]:c$6,[cg]:[{[ch]:"UseArnRegion"}]},{[cf]:d$7,[cg]:[{[ch]:"UseArnRegion"},!1]},{[cf]:r$4,[cg]:[{[cf]:g$1,[cg]:[{[cf]:h$4,[cg]:[aP,"region"]},"{Region}"]}]}],[e$1]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[cd]:e$1},aX={[cf]:h$4,[cg]:[{[ch]:"bucketPartition"},i$6]},aY={[cf]:h$4,[cg]:[aP,"accountId"]},aZ={[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:H$1,[cp]:"{bucketArn#region}"}]},ba={[e$1]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[cd]:e$1},bb={[e$1]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[cd]:e$1},bc={[e$1]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[cd]:e$1},bd={[e$1]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[cd]:e$1},be={[e$1]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[cd]:e$1},bf={[e$1]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[cd]:e$1},bg={[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:z$1,[cp]:"{bucketArn#region}"}]},bh={[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:y$5,[cp]:"{bucketArn#region}"}]},bi={[cf]:D$3,[cg]:[ab]},bj={[cj]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ck]:aB,[cq]:{}},bk={[cj]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ck]:aB,[cq]:{}},bl={[cj]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ck]:aB,[cq]:{}},bm={[cj]:O$2,[ck]:aB,[cq]:{}},bn={[cj]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ck]:aB,[cq]:{}},bo={[ch]:"UseObjectLambdaEndpoint"},bp={[cm]:[{[cn]:!0,[i$6]:"sigv4",[co]:H$1,[cp]:"{Region}"}]},bq={[cj]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},br={[cj]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},bs={[cj]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},bt={[cj]:s$9,[ck]:aB,[cq]:{}},bu={[cj]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[ck]:aB,[cq]:{}},bv=[{[ch]:"Region"}],bw=[{[ch]:"Endpoint"}],bx=[ab],by=[W],bz=[U$3],bA=[X$1,ac],bB=[{[cf]:c$6,[cg]:[{[ch]:"DisableS3ExpressSessionAuth"}]},{[cf]:d$7,[cg]:[{[ch]:"DisableS3ExpressSessionAuth"},!0]}],bC=[ad],bD=[af],bE=[ai],bF=[V],bG=[{[cf]:j$1,[cg]:[ab,6,14,!0],[ci]:"s3expressAvailabilityZoneId"},{[cf]:j$1,[cg]:[ab,14,16,!0],[ci]:"s3expressAvailabilityZoneDelim"},{[cf]:g$1,[cg]:[{[ch]:"s3expressAvailabilityZoneDelim"},"--"]}],bH=[{[ce]:[V],[n$4]:{[cj]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[ck]:ag,[cq]:{}},[cd]:n$4},{[n$4]:{[cj]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[ck]:ag,[cq]:{}},[cd]:n$4}],bI=[{[cf]:j$1,[cg]:[ab,6,15,!0],[ci]:"s3expressAvailabilityZoneId"},{[cf]:j$1,[cg]:[ab,15,17,!0],[ci]:"s3expressAvailabilityZoneDelim"},{[cf]:g$1,[cg]:[{[ch]:"s3expressAvailabilityZoneDelim"},"--"]}],bJ=[{[ce]:[V],[n$4]:{[cj]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[ck]:ak,[cq]:{}},[cd]:n$4},{[n$4]:{[cj]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[ck]:ak,[cq]:{}},[cd]:n$4}],bK=[aa],bL=[{[cf]:x$3,[cg]:[{[ch]:w$3},!1]}],bM=[{[cf]:g$1,[cg]:[{[ch]:u$6},"beta"]}],bN=[Y$1],bO=[{[cf]:x$3,[cg]:[{[ch]:"Region"},!1]}],bP=[{[cf]:g$1,[cg]:[{[ch]:"Region"},"us-east-1"]}],bQ=[{[cf]:g$1,[cg]:[aQ,I$8]}],bR=[{[cf]:h$4,[cg]:[aP,"resourceId[1]"],[ci]:J},{[cf]:r$4,[cg]:[{[cf]:g$1,[cg]:[aS,G$1]}]}],bS=[aP,"resourceId[1]"],bT=[{[cf]:r$4,[cg]:[{[cf]:g$1,[cg]:[{[cf]:h$4,[cg]:[aP,"region"]},G$1]}]}],bU=[{[cf]:r$4,[cg]:[{[cf]:c$6,[cg]:[{[cf]:h$4,[cg]:[aP,"resourceId[2]"]}]}]}],bV=[aP,"resourceId[2]"],bW=[{[cf]:f$6,[cg]:[{[cf]:h$4,[cg]:[aP,"region"]}],[ci]:"bucketPartition"}],bX=[{[cf]:g$1,[cg]:[aX,{[cf]:h$4,[cg]:[{[ch]:"partitionResult"},i$6]}]}],bY=[{[cf]:x$3,[cg]:[{[cf]:h$4,[cg]:[aP,"region"]},!0]}],bZ=[{[cf]:x$3,[cg]:[aY,!1]}],ca=[{[cf]:x$3,[cg]:[aS,!1]}],cb=[{[cf]:x$3,[cg]:[{[ch]:"Region"},!0]}],_data={version:"1.0",parameters:{Bucket:R$2,Region:R$2,UseFIPS:S$6,UseDualStack:S$6,Endpoint:R$2,ForcePathStyle:S$6,Accelerate:S$6,UseGlobalEndpoint:S$6,UseObjectLambdaEndpoint:T$4,Key:R$2,Prefix:R$2,DisableAccessPoints:T$4,DisableMultiRegionAccessPoints:S$6,UseArnRegion:T$4,UseS3ExpressControlEndpoint:T$4,DisableS3ExpressSessionAuth:T$4},rules:[{[ce]:[{[cf]:c$6,[cg]:bv}],rules:[{[ce]:[U$3,V],error:"Accelerate cannot be used with FIPS",[cd]:e$1},{[ce]:[W,X$1],error:"Cannot set dual-stack in combination with a custom endpoint.",[cd]:e$1},{[ce]:[X$1,V],error:"A custom endpoint cannot be combined with FIPS",[cd]:e$1},{[ce]:[X$1,U$3],error:"A custom endpoint cannot be combined with S3 Accelerate",[cd]:e$1},{[ce]:[V,Y$1,Z$1],error:"Partition does not support FIPS",[cd]:e$1},{[ce]:[aa,{[cf]:j$1,[cg]:[ab,0,6,b$5],[ci]:k$2},{[cf]:g$1,[cg]:[{[ch]:k$2},"--x-s3"]}],rules:[{[ce]:by,error:"S3Express does not support Dual-stack.",[cd]:e$1},{[ce]:bz,error:"S3Express does not support S3 Accelerate.",[cd]:e$1},{[ce]:bA,rules:[{[ce]:bB,rules:[{[ce]:bC,rules:[{[ce]:bD,rules:[{endpoint:{[cj]:m$4,[ck]:ag,[cq]:ah},[cd]:n$4}],[cd]:o$6}],[cd]:o$6},{[ce]:bE,rules:[{endpoint:{[cj]:q$1,[ck]:ag,[cq]:ah},[cd]:n$4}],[cd]:o$6},aj],[cd]:o$6},{[ce]:bC,rules:[{[ce]:bD,rules:[{endpoint:{[cj]:m$4,[ck]:ak,[cq]:ah},[cd]:n$4}],[cd]:o$6}],[cd]:o$6},{[ce]:bE,rules:[{endpoint:{[cj]:q$1,[ck]:ak,[cq]:ah},[cd]:n$4}],[cd]:o$6},aj],[cd]:o$6},{[ce]:[al,am],rules:[{[ce]:[af,an],rules:[{[ce]:bF,endpoint:{[cj]:"https://s3express-control-fips.{Region}.amazonaws.com/{uri_encoded_bucket}",[ck]:ag,[cq]:ah},[cd]:n$4},{endpoint:{[cj]:"https://s3express-control.{Region}.amazonaws.com/{uri_encoded_bucket}",[ck]:ag,[cq]:ah},[cd]:n$4}],[cd]:o$6}],[cd]:o$6},{[ce]:bE,rules:[{[ce]:bB,rules:[{[ce]:bG,rules:bH,[cd]:o$6},{[ce]:bI,rules:bH,[cd]:o$6},ao],[cd]:o$6},{[ce]:bG,rules:bJ,[cd]:o$6},{[ce]:bI,rules:bJ,[cd]:o$6},ao],[cd]:o$6},aj],[cd]:o$6},{[ce]:[ap,al,am],rules:[{[ce]:bA,endpoint:{[cj]:s$9,[ck]:ag,[cq]:ah},[cd]:n$4},{[ce]:bF,endpoint:{[cj]:"https://s3express-control-fips.{Region}.amazonaws.com",[ck]:ag,[cq]:ah},[cd]:n$4},{endpoint:{[cj]:"https://s3express-control.{Region}.amazonaws.com",[ck]:ag,[cq]:ah},[cd]:n$4}],[cd]:o$6},{[ce]:[aa,{[cf]:j$1,[cg]:[ab,49,50,b$5],[ci]:t$7},{[cf]:j$1,[cg]:[ab,8,12,b$5],[ci]:u$6},{[cf]:j$1,[cg]:[ab,0,7,b$5],[ci]:v$3},{[cf]:j$1,[cg]:[ab,32,49,b$5],[ci]:w$3},{[cf]:f$6,[cg]:bv,[ci]:"regionPartition"},{[cf]:g$1,[cg]:[{[ch]:v$3},"--op-s3"]}],rules:[{[ce]:bL,rules:[{[ce]:[{[cf]:g$1,[cg]:[aq,"e"]}],rules:[{[ce]:bM,rules:[ar,{[ce]:bA,endpoint:{[cj]:"https://{Bucket}.ec2.{url#authority}",[ck]:as,[cq]:ah},[cd]:n$4}],[cd]:o$6},{endpoint:{[cj]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[ck]:as,[cq]:ah},[cd]:n$4}],[cd]:o$6},{[ce]:[{[cf]:g$1,[cg]:[aq,"o"]}],rules:[{[ce]:bM,rules:[ar,{[ce]:bA,endpoint:{[cj]:"https://{Bucket}.op-{outpostId}.{url#authority}",[ck]:as,[cq]:ah},[cd]:n$4}],[cd]:o$6},{endpoint:{[cj]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[ck]:as,[cq]:ah},[cd]:n$4}],[cd]:o$6},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[cd]:e$1}],[cd]:o$6},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[cd]:e$1}],[cd]:o$6},{[ce]:bK,rules:[{[ce]:[X$1,{[cf]:r$4,[cg]:[{[cf]:c$6,[cg]:[{[cf]:l$6,[cg]:bw}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[cd]:e$1},{[ce]:[at,ai],rules:[{[ce]:bN,rules:[{[ce]:bO,rules:[{[ce]:[U$3,Z$1],error:"S3 Accelerate cannot be used in this region",[cd]:e$1},{[ce]:[W,V,av,an,aw],endpoint:{[cj]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[W,V,av,an,ay,az],rules:[{endpoint:aA,[cd]:n$4}],[cd]:o$6},{[ce]:[W,V,av,an,ay,aC],endpoint:aA,[cd]:n$4},{[ce]:[aD,V,av,an,aw],endpoint:{[cj]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,V,av,an,ay,az],rules:[{endpoint:aE,[cd]:n$4}],[cd]:o$6},{[ce]:[aD,V,av,an,ay,aC],endpoint:aE,[cd]:n$4},{[ce]:[W,aF,U$3,an,aw],endpoint:{[cj]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[W,aF,U$3,an,ay,az],rules:[{endpoint:aG,[cd]:n$4}],[cd]:o$6},{[ce]:[W,aF,U$3,an,ay,aC],endpoint:aG,[cd]:n$4},{[ce]:[W,aF,av,an,aw],endpoint:{[cj]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[W,aF,av,an,ay,az],rules:[{endpoint:aH,[cd]:n$4}],[cd]:o$6},{[ce]:[W,aF,av,an,ay,aC],endpoint:aH,[cd]:n$4},{[ce]:[aD,aF,av,X$1,ac,ad,aw],endpoint:{[cj]:A$1,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,aF,av,X$1,ac,aI,aw],endpoint:{[cj]:q$1,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,aF,av,X$1,ac,ad,ay,az],rules:[{[ce]:bP,endpoint:aJ,[cd]:n$4},{endpoint:aJ,[cd]:n$4}],[cd]:o$6},{[ce]:[aD,aF,av,X$1,ac,aI,ay,az],rules:[{[ce]:bP,endpoint:aK,[cd]:n$4},aL],[cd]:o$6},{[ce]:[aD,aF,av,X$1,ac,ad,ay,aC],endpoint:aJ,[cd]:n$4},{[ce]:[aD,aF,av,X$1,ac,aI,ay,aC],endpoint:aK,[cd]:n$4},{[ce]:[aD,aF,U$3,an,aw],endpoint:{[cj]:B$1,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,aF,U$3,an,ay,az],rules:[{[ce]:bP,endpoint:aM,[cd]:n$4},{endpoint:aM,[cd]:n$4}],[cd]:o$6},{[ce]:[aD,aF,U$3,an,ay,aC],endpoint:aM,[cd]:n$4},{[ce]:[aD,aF,av,an,aw],endpoint:{[cj]:C$2,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,aF,av,an,ay,az],rules:[{[ce]:bP,endpoint:{[cj]:C$2,[ck]:aB,[cq]:ah},[cd]:n$4},{endpoint:aN,[cd]:n$4}],[cd]:o$6},{[ce]:[aD,aF,av,an,ay,aC],endpoint:aN,[cd]:n$4}],[cd]:o$6},aO],[cd]:o$6}],[cd]:o$6},{[ce]:[X$1,ac,{[cf]:g$1,[cg]:[{[cf]:h$4,[cg]:[ae$1,"scheme"]},"http"]},{[cf]:p$4,[cg]:[ab,b$5]},at,aF,aD,av],rules:[{[ce]:bN,rules:[{[ce]:bO,rules:[aL],[cd]:o$6},aO],[cd]:o$6}],[cd]:o$6},{[ce]:[at,{[cf]:D$3,[cg]:bx,[ci]:E$1}],rules:[{[ce]:[{[cf]:h$4,[cg]:[aP,"resourceId[0]"],[ci]:F$3},{[cf]:r$4,[cg]:[{[cf]:g$1,[cg]:[aQ,G$1]}]}],rules:[{[ce]:[{[cf]:g$1,[cg]:[aR,H$1]}],rules:[{[ce]:bQ,rules:[{[ce]:bR,rules:[aT,aU,{[ce]:bT,rules:[aV,{[ce]:bU,rules:[aW,{[ce]:bW,rules:[{[ce]:bN,rules:[{[ce]:bX,rules:[{[ce]:bY,rules:[{[ce]:[{[cf]:g$1,[cg]:[aY,G$1]}],error:"Invalid ARN: Missing account id",[cd]:e$1},{[ce]:bZ,rules:[{[ce]:ca,rules:[{[ce]:bA,endpoint:{[cj]:K,[ck]:aZ,[cq]:ah},[cd]:n$4},{[ce]:bF,endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ck]:aZ,[cq]:ah},[cd]:n$4},{endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ck]:aZ,[cq]:ah},[cd]:n$4}],[cd]:o$6},ba],[cd]:o$6},bb],[cd]:o$6},bc],[cd]:o$6},bd],[cd]:o$6}],[cd]:o$6}],[cd]:o$6},be],[cd]:o$6},{error:"Invalid ARN: bucket ARN is missing a region",[cd]:e$1}],[cd]:o$6},bf],[cd]:o$6},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[cd]:e$1}],[cd]:o$6},{[ce]:bQ,rules:[{[ce]:bR,rules:[{[ce]:bT,rules:[{[ce]:bQ,rules:[{[ce]:bT,rules:[aV,{[ce]:bU,rules:[aW,{[ce]:bW,rules:[{[ce]:bN,rules:[{[ce]:[{[cf]:g$1,[cg]:[aX,"{partitionResult#name}"]}],rules:[{[ce]:bY,rules:[{[ce]:[{[cf]:g$1,[cg]:[aR,z$1]}],rules:[{[ce]:bZ,rules:[{[ce]:ca,rules:[{[ce]:bz,error:"Access Points do not support S3 Accelerate",[cd]:e$1},{[ce]:[V,W],endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ck]:bg,[cq]:ah},[cd]:n$4},{[ce]:[V,aD],endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ck]:bg,[cq]:ah},[cd]:n$4},{[ce]:[aF,W],endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ck]:bg,[cq]:ah},[cd]:n$4},{[ce]:[aF,aD,X$1,ac],endpoint:{[cj]:K,[ck]:bg,[cq]:ah},[cd]:n$4},{[ce]:[aF,aD],endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ck]:bg,[cq]:ah},[cd]:n$4}],[cd]:o$6},ba],[cd]:o$6},bb],[cd]:o$6},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[cd]:e$1}],[cd]:o$6},bc],[cd]:o$6},bd],[cd]:o$6}],[cd]:o$6}],[cd]:o$6},be],[cd]:o$6}],[cd]:o$6}],[cd]:o$6},{[ce]:[{[cf]:x$3,[cg]:[aS,b$5]}],rules:[{[ce]:by,error:"S3 MRAP does not support dual-stack",[cd]:e$1},{[ce]:bF,error:"S3 MRAP does not support FIPS",[cd]:e$1},{[ce]:bz,error:"S3 MRAP does not support S3 Accelerate",[cd]:e$1},{[ce]:[{[cf]:d$7,[cg]:[{[ch]:"DisableMultiRegionAccessPoints"},b$5]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[cd]:e$1},{[ce]:[{[cf]:f$6,[cg]:bv,[ci]:L}],rules:[{[ce]:[{[cf]:g$1,[cg]:[{[cf]:h$4,[cg]:[{[ch]:L},i$6]},{[cf]:h$4,[cg]:[aP,"partition"]}]}],rules:[{endpoint:{[cj]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[ck]:{[cm]:[{[cn]:b$5,name:"sigv4a",[co]:z$1,signingRegionSet:["*"]}]},[cq]:ah},[cd]:n$4}],[cd]:o$6},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[cd]:e$1}],[cd]:o$6}],[cd]:o$6},{error:"Invalid Access Point Name",[cd]:e$1}],[cd]:o$6},bf],[cd]:o$6},{[ce]:[{[cf]:g$1,[cg]:[aR,y$5]}],rules:[{[ce]:by,error:"S3 Outposts does not support Dual-stack",[cd]:e$1},{[ce]:bF,error:"S3 Outposts does not support FIPS",[cd]:e$1},{[ce]:bz,error:"S3 Outposts does not support S3 Accelerate",[cd]:e$1},{[ce]:[{[cf]:c$6,[cg]:[{[cf]:h$4,[cg]:[aP,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[cd]:e$1},{[ce]:[{[cf]:h$4,[cg]:bS,[ci]:w$3}],rules:[{[ce]:bL,rules:[aW,{[ce]:bW,rules:[{[ce]:bN,rules:[{[ce]:bX,rules:[{[ce]:bY,rules:[{[ce]:bZ,rules:[{[ce]:[{[cf]:h$4,[cg]:bV,[ci]:M$4}],rules:[{[ce]:[{[cf]:h$4,[cg]:[aP,"resourceId[3]"],[ci]:J}],rules:[{[ce]:[{[cf]:g$1,[cg]:[{[ch]:M$4},I$8]}],rules:[{[ce]:bA,endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[ck]:bh,[cq]:ah},[cd]:n$4},{endpoint:{[cj]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[ck]:bh,[cq]:ah},[cd]:n$4}],[cd]:o$6},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[cd]:e$1}],[cd]:o$6},{error:"Invalid ARN: expected an access point name",[cd]:e$1}],[cd]:o$6},{error:"Invalid ARN: Expected a 4-component resource",[cd]:e$1}],[cd]:o$6},bb],[cd]:o$6},bc],[cd]:o$6},bd],[cd]:o$6}],[cd]:o$6}],[cd]:o$6},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[cd]:e$1}],[cd]:o$6},{error:"Invalid ARN: The Outpost Id was not set",[cd]:e$1}],[cd]:o$6},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[cd]:e$1}],[cd]:o$6},{error:"Invalid ARN: No ARN type specified",[cd]:e$1}],[cd]:o$6},{[ce]:[{[cf]:j$1,[cg]:[ab,0,4,a$5],[ci]:N$3},{[cf]:g$1,[cg]:[{[ch]:N$3},"arn:"]},{[cf]:r$4,[cg]:[{[cf]:c$6,[cg]:[bi]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[cd]:e$1},{[ce]:[{[cf]:d$7,[cg]:[au,b$5]},bi],error:"Path-style addressing cannot be used with ARN buckets",[cd]:e$1},{[ce]:bD,rules:[{[ce]:bN,rules:[{[ce]:[av],rules:[{[ce]:[W,an,V,aw],endpoint:{[cj]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[W,an,V,ay,az],rules:[{endpoint:bj,[cd]:n$4}],[cd]:o$6},{[ce]:[W,an,V,ay,aC],endpoint:bj,[cd]:n$4},{[ce]:[aD,an,V,aw],endpoint:{[cj]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,an,V,ay,az],rules:[{endpoint:bk,[cd]:n$4}],[cd]:o$6},{[ce]:[aD,an,V,ay,aC],endpoint:bk,[cd]:n$4},{[ce]:[W,an,aF,aw],endpoint:{[cj]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[W,an,aF,ay,az],rules:[{endpoint:bl,[cd]:n$4}],[cd]:o$6},{[ce]:[W,an,aF,ay,aC],endpoint:bl,[cd]:n$4},{[ce]:[aD,X$1,ac,aF,aw],endpoint:{[cj]:O$2,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,X$1,ac,aF,ay,az],rules:[{[ce]:bP,endpoint:bm,[cd]:n$4},{endpoint:bm,[cd]:n$4}],[cd]:o$6},{[ce]:[aD,X$1,ac,aF,ay,aC],endpoint:bm,[cd]:n$4},{[ce]:[aD,an,aF,aw],endpoint:{[cj]:P$2,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aD,an,aF,ay,az],rules:[{[ce]:bP,endpoint:{[cj]:P$2,[ck]:aB,[cq]:ah},[cd]:n$4},{endpoint:bn,[cd]:n$4}],[cd]:o$6},{[ce]:[aD,an,aF,ay,aC],endpoint:bn,[cd]:n$4}],[cd]:o$6},{error:"Path-style addressing cannot be used with S3 Accelerate",[cd]:e$1}],[cd]:o$6}],[cd]:o$6}],[cd]:o$6},{[ce]:[{[cf]:c$6,[cg]:[bo]},{[cf]:d$7,[cg]:[bo,b$5]}],rules:[{[ce]:bN,rules:[{[ce]:cb,rules:[aT,aU,{[ce]:bA,endpoint:{[cj]:s$9,[ck]:bp,[cq]:ah},[cd]:n$4},{[ce]:bF,endpoint:{[cj]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[ck]:bp,[cq]:ah},[cd]:n$4},{endpoint:{[cj]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[ck]:bp,[cq]:ah},[cd]:n$4}],[cd]:o$6},aO],[cd]:o$6}],[cd]:o$6},{[ce]:[ap],rules:[{[ce]:bN,rules:[{[ce]:cb,rules:[{[ce]:[V,W,an,aw],endpoint:{[cj]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[V,W,an,ay,az],rules:[{endpoint:bq,[cd]:n$4}],[cd]:o$6},{[ce]:[V,W,an,ay,aC],endpoint:bq,[cd]:n$4},{[ce]:[V,aD,an,aw],endpoint:{[cj]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[V,aD,an,ay,az],rules:[{endpoint:br,[cd]:n$4}],[cd]:o$6},{[ce]:[V,aD,an,ay,aC],endpoint:br,[cd]:n$4},{[ce]:[aF,W,an,aw],endpoint:{[cj]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aF,W,an,ay,az],rules:[{endpoint:bs,[cd]:n$4}],[cd]:o$6},{[ce]:[aF,W,an,ay,aC],endpoint:bs,[cd]:n$4},{[ce]:[aF,aD,X$1,ac,aw],endpoint:{[cj]:s$9,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aF,aD,X$1,ac,ay,az],rules:[{[ce]:bP,endpoint:bt,[cd]:n$4},{endpoint:bt,[cd]:n$4}],[cd]:o$6},{[ce]:[aF,aD,X$1,ac,ay,aC],endpoint:bt,[cd]:n$4},{[ce]:[aF,aD,an,aw],endpoint:{[cj]:Q$1,[ck]:ax,[cq]:ah},[cd]:n$4},{[ce]:[aF,aD,an,ay,az],rules:[{[ce]:bP,endpoint:{[cj]:Q$1,[ck]:aB,[cq]:ah},[cd]:n$4},{endpoint:bu,[cd]:n$4}],[cd]:o$6},{[ce]:[aF,aD,an,ay,aC],endpoint:bu,[cd]:n$4}],[cd]:o$6},aO],[cd]:o$6}],[cd]:o$6}],[cd]:o$6},{error:"A region must be set when sending requests to S3.",[cd]:e$1}]},ruleSet=_data,defaultEndpointResolver=(nt,rt={})=>resolveEndpoint(ruleSet,{endpointParams:nt,logger:rt.logger}),getRuntimeConfig$1=nt=>({apiVersion:"2006-03-01",base64Decoder:(nt==null?void 0:nt.base64Decoder)??fromBase64,base64Encoder:(nt==null?void 0:nt.base64Encoder)??toBase64,disableHostPrefix:(nt==null?void 0:nt.disableHostPrefix)??!1,endpointProvider:(nt==null?void 0:nt.endpointProvider)??defaultEndpointResolver,extensions:(nt==null?void 0:nt.extensions)??[],getAwsChunkedEncodingStream:(nt==null?void 0:nt.getAwsChunkedEncodingStream)??getAwsChunkedEncodingStream,logger:(nt==null?void 0:nt.logger)??new NoOpLogger,sdkStreamMixin:(nt==null?void 0:nt.sdkStreamMixin)??sdkStreamMixin,serviceId:(nt==null?void 0:nt.serviceId)??"S3",signerConstructor:(nt==null?void 0:nt.signerConstructor)??SignatureV4MultiRegion,signingEscapePath:(nt==null?void 0:nt.signingEscapePath)??!1,urlParser:(nt==null?void 0:nt.urlParser)??parseUrl,useArnRegion:(nt==null?void 0:nt.useArnRegion)??!1,utf8Decoder:(nt==null?void 0:nt.utf8Decoder)??fromUtf8$3,utf8Encoder:(nt==null?void 0:nt.utf8Encoder)??toUtf8$3}),DEFAULTS_MODE_OPTIONS=["in-region","cross-region","mobile","standard","legacy"],resolveDefaultsModeConfig=({defaultsMode:nt}={})=>memoize(async()=>{const rt=typeof nt=="function"?await nt():nt;switch(rt==null?void 0:rt.toLowerCase()){case"auto":return Promise.resolve(isMobileBrowser()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(rt==null?void 0:rt.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${DEFAULTS_MODE_OPTIONS.join(", ")}, got ${rt}`)}}),isMobileBrowser=()=>{var it,st;const nt=typeof window<"u"&&((it=window==null?void 0:window.navigator)!=null&&it.userAgent)?Bowser.parse(window.navigator.userAgent):void 0,rt=(st=nt==null?void 0:nt.platform)==null?void 0:st.type;return rt==="tablet"||rt==="mobile"},getRuntimeConfig=nt=>{const rt=resolveDefaultsModeConfig(nt),it=()=>rt().then(loadConfigsForDefaultMode),st=getRuntimeConfig$1(nt);return{...st,...nt,runtime:"browser",defaultsMode:rt,bodyLengthChecker:(nt==null?void 0:nt.bodyLengthChecker)??calculateBodyLength,credentialDefaultProvider:(nt==null?void 0:nt.credentialDefaultProvider)??(lt=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(nt==null?void 0:nt.defaultUserAgentProvider)??defaultUserAgent({serviceId:st.serviceId,clientVersion:packageInfo.version}),eventStreamSerdeProvider:(nt==null?void 0:nt.eventStreamSerdeProvider)??eventStreamSerdeProvider,maxAttempts:(nt==null?void 0:nt.maxAttempts)??DEFAULT_MAX_ATTEMPTS,md5:(nt==null?void 0:nt.md5)??Md5,region:(nt==null?void 0:nt.region)??invalidProvider("Region is missing"),requestHandler:(nt==null?void 0:nt.requestHandler)??new FetchHttpHandler(it),retryMode:(nt==null?void 0:nt.retryMode)??(async()=>(await it()).retryMode||DEFAULT_RETRY_MODE),sha1:(nt==null?void 0:nt.sha1)??build$5.Sha1,sha256:(nt==null?void 0:nt.sha256)??build$2.Sha256,streamCollector:(nt==null?void 0:nt.streamCollector)??streamCollector,streamHasher:(nt==null?void 0:nt.streamHasher)??blobHasher,useDualstackEndpoint:(nt==null?void 0:nt.useDualstackEndpoint)??(()=>Promise.resolve(DEFAULT_USE_DUALSTACK_ENDPOINT)),useFipsEndpoint:(nt==null?void 0:nt.useFipsEndpoint)??(()=>Promise.resolve(DEFAULT_USE_FIPS_ENDPOINT))}},getAwsRegionExtensionConfiguration=nt=>{let rt=async()=>{if(nt.region===void 0)throw new Error("Region is missing from runtimeConfig");const it=nt.region;return typeof it=="string"?it:it()};return{setRegion(it){rt=it},region(){return rt}}},resolveAwsRegionExtensionConfiguration=nt=>({region:nt.region()}),asPartial=nt=>nt,resolveRuntimeExtensions=(nt,rt)=>{const it={...asPartial(getAwsRegionExtensionConfiguration(nt)),...asPartial(getDefaultExtensionConfiguration(nt)),...asPartial(getHttpHandlerExtensionConfiguration(nt))};return rt.forEach(st=>st.configure(it)),{...nt,...resolveAwsRegionExtensionConfiguration(it),...resolveDefaultRuntimeConfig(it),...resolveHttpHandlerRuntimeConfig(it)}};class S3Client extends Client{constructor(...[rt]){const it=getRuntimeConfig(rt||{}),st=resolveClientEndpointParameters(it),lt=resolveRegionConfig(st),ct=resolveEndpointConfig(lt),ut=resolveRetryConfig(ct),dt=ut,ht=resolveAwsAuthConfig(dt),ft=resolveS3Config(ht,{session:[()=>this,CreateSessionCommand]}),pt=resolveUserAgentConfig(ft),mt=resolveEventStreamSerdeConfig(pt),gt=resolveRuntimeExtensions(mt,(rt==null?void 0:rt.extensions)||[]);super(gt),this.config=gt,this.middlewareStack.use(getRetryPlugin(this.config)),this.middlewareStack.use(getContentLengthPlugin(this.config)),this.middlewareStack.use(getHostHeaderPlugin(this.config)),this.middlewareStack.use(getLoggerPlugin(this.config)),this.middlewareStack.use(getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(getAwsAuthPlugin(this.config)),this.middlewareStack.use(getValidateBucketNamePlugin(this.config)),this.middlewareStack.use(getAddExpectContinuePlugin(this.config)),this.middlewareStack.use(getRegionRedirectMiddlewarePlugin(this.config)),this.middlewareStack.use(getS3ExpressPlugin(this.config)),this.middlewareStack.use(getUserAgentPlugin(this.config))}destroy(){super.destroy()}}function ssecMiddleware(nt){return rt=>async it=>{const st={...it.input},lt=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const ct of lt){const ut=st[ct.target];if(ut){let dt;typeof ut=="string"?/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(ut)?dt=nt.base64Decoder(ut):(dt=nt.utf8Decoder(ut),st[ct.target]=nt.base64Encoder(dt)):(dt=ArrayBuffer.isView(ut)?new Uint8Array(ut.buffer,ut.byteOffset,ut.byteLength):new Uint8Array(ut),st[ct.target]=nt.base64Encoder(dt));const ht=new nt.md5;ht.update(dt),st[ct.hash]=nt.base64Encoder(await ht.digest())}}return rt({...it,input:st})}}const ssecMiddlewareOptions={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},getSsecPlugin=nt=>({applyToStack:rt=>{rt.add(ssecMiddleware(nt),ssecMiddlewareOptions)}});var ChecksumAlgorithm;(function(nt){nt.MD5="MD5",nt.CRC32="CRC32",nt.CRC32C="CRC32C",nt.SHA1="SHA1",nt.SHA256="SHA256"})(ChecksumAlgorithm||(ChecksumAlgorithm={}));var ChecksumLocation;(function(nt){nt.HEADER="header",nt.TRAILER="trailer"})(ChecksumLocation||(ChecksumLocation={}));const DEFAULT_CHECKSUM_ALGORITHM=ChecksumAlgorithm.MD5,S3_EXPRESS_DEFAULT_CHECKSUM_ALGORITHM=ChecksumAlgorithm.CRC32,CLIENT_SUPPORTED_ALGORITHMS=[ChecksumAlgorithm.CRC32,ChecksumAlgorithm.CRC32C,ChecksumAlgorithm.SHA1,ChecksumAlgorithm.SHA256],PRIORITY_ORDER_ALGORITHMS=[ChecksumAlgorithm.CRC32,ChecksumAlgorithm.CRC32C,ChecksumAlgorithm.SHA1,ChecksumAlgorithm.SHA256],getChecksumAlgorithmForRequest=(nt,{requestChecksumRequired:rt,requestAlgorithmMember:it},st)=>{const lt=st?S3_EXPRESS_DEFAULT_CHECKSUM_ALGORITHM:DEFAULT_CHECKSUM_ALGORITHM;if(!it||!nt[it])return rt?lt:void 0;const ct=nt[it];if(!CLIENT_SUPPORTED_ALGORITHMS.includes(ct))throw new Error(`The checksum algorithm "${ct}" is not supported by the client. Select one of ${CLIENT_SUPPORTED_ALGORITHMS}.`);return ct},getChecksumLocationName=nt=>nt===ChecksumAlgorithm.MD5?"content-md5":`x-amz-checksum-${nt.toLowerCase()}`,hasHeader=(nt,rt)=>{const it=nt.toLowerCase();for(const st of Object.keys(rt))if(it===st.toLowerCase())return!0;return!1},isStreaming=nt=>nt!==void 0&&typeof nt!="string"&&!ArrayBuffer.isView(nt)&&!isArrayBuffer(nt);var build={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(nt,rt){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,st){it.__proto__=st}||function(it,st){for(var lt in st)st.hasOwnProperty(lt)&&(it[lt]=st[lt])},extendStatics(nt,rt)};function __extends(nt,rt){extendStatics(nt,rt);function it(){this.constructor=nt}nt.prototype=rt===null?Object.create(rt):(it.prototype=rt.prototype,new it)}var __assign=function(){return __assign=Object.assign||function(rt){for(var it,st=1,lt=arguments.length;st<lt;st++){it=arguments[st];for(var ct in it)Object.prototype.hasOwnProperty.call(it,ct)&&(rt[ct]=it[ct])}return rt},__assign.apply(this,arguments)};function __rest(nt,rt){var it={};for(var st in nt)Object.prototype.hasOwnProperty.call(nt,st)&&rt.indexOf(st)<0&&(it[st]=nt[st]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,st=Object.getOwnPropertySymbols(nt);lt<st.length;lt++)rt.indexOf(st[lt])<0&&Object.prototype.propertyIsEnumerable.call(nt,st[lt])&&(it[st[lt]]=nt[st[lt]]);return it}function __decorate(nt,rt,it,st){var lt=arguments.length,ct=lt<3?rt:st===null?st=Object.getOwnPropertyDescriptor(rt,it):st,ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ct=Reflect.decorate(nt,rt,it,st);else for(var dt=nt.length-1;dt>=0;dt--)(ut=nt[dt])&&(ct=(lt<3?ut(ct):lt>3?ut(rt,it,ct):ut(rt,it))||ct);return lt>3&&ct&&Object.defineProperty(rt,it,ct),ct}function __param(nt,rt){return function(it,st){rt(it,st,nt)}}function __metadata(nt,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(nt,rt)}function __awaiter(nt,rt,it,st){function lt(ct){return ct instanceof it?ct:new it(function(ut){ut(ct)})}return new(it||(it=Promise))(function(ct,ut){function dt(pt){try{ft(st.next(pt))}catch(mt){ut(mt)}}function ht(pt){try{ft(st.throw(pt))}catch(mt){ut(mt)}}function ft(pt){pt.done?ct(pt.value):lt(pt.value).then(dt,ht)}ft((st=st.apply(nt,rt||[])).next())})}function __generator(nt,rt){var it={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},st,lt,ct,ut;return ut={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function dt(ft){return function(pt){return ht([ft,pt])}}function ht(ft){if(st)throw new TypeError("Generator is already executing.");for(;it;)try{if(st=1,lt&&(ct=ft[0]&2?lt.return:ft[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,ft[1])).done)return ct;switch(lt=0,ct&&(ft=[ft[0]&2,ct.value]),ft[0]){case 0:case 1:ct=ft;break;case 4:return it.label++,{value:ft[1],done:!1};case 5:it.label++,lt=ft[1],ft=[0];continue;case 7:ft=it.ops.pop(),it.trys.pop();continue;default:if(ct=it.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(ft[0]===6||ft[0]===2)){it=0;continue}if(ft[0]===3&&(!ct||ft[1]>ct[0]&&ft[1]<ct[3])){it.label=ft[1];break}if(ft[0]===6&&it.label<ct[1]){it.label=ct[1],ct=ft;break}if(ct&&it.label<ct[2]){it.label=ct[2],it.ops.push(ft);break}ct[2]&&it.ops.pop(),it.trys.pop();continue}ft=rt.call(nt,it)}catch(pt){ft=[6,pt],lt=0}finally{st=ct=0}if(ft[0]&5)throw ft[1];return{value:ft[0]?ft[1]:void 0,done:!0}}}function __createBinding(nt,rt,it,st){st===void 0&&(st=it),nt[st]=rt[it]}function __exportStar(nt,rt){for(var it in nt)it!=="default"&&!rt.hasOwnProperty(it)&&(rt[it]=nt[it])}function __values(nt){var rt=typeof Symbol=="function"&&Symbol.iterator,it=rt&&nt[rt],st=0;if(it)return it.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&st>=nt.length&&(nt=void 0),{value:nt&&nt[st++],done:!nt}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(nt,rt){var it=typeof Symbol=="function"&&nt[Symbol.iterator];if(!it)return nt;var st=it.call(nt),lt,ct=[],ut;try{for(;(rt===void 0||rt-- >0)&&!(lt=st.next()).done;)ct.push(lt.value)}catch(dt){ut={error:dt}}finally{try{lt&&!lt.done&&(it=st.return)&&it.call(st)}finally{if(ut)throw ut.error}}return ct}function __spread(){for(var nt=[],rt=0;rt<arguments.length;rt++)nt=nt.concat(__read(arguments[rt]));return nt}function __spreadArrays(){for(var nt=0,rt=0,it=arguments.length;rt<it;rt++)nt+=arguments[rt].length;for(var st=Array(nt),lt=0,rt=0;rt<it;rt++)for(var ct=arguments[rt],ut=0,dt=ct.length;ut<dt;ut++,lt++)st[lt]=ct[ut];return st}function __await(nt){return this instanceof __await?(this.v=nt,this):new __await(nt)}function __asyncGenerator(nt,rt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=it.apply(nt,rt||[]),lt,ct=[];return lt={},ut("next"),ut("throw"),ut("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function ut(gt){st[gt]&&(lt[gt]=function(xt){return new Promise(function(yt,vt){ct.push([gt,xt,yt,vt])>1||dt(gt,xt)})})}function dt(gt,xt){try{ht(st[gt](xt))}catch(yt){mt(ct[0][3],yt)}}function ht(gt){gt.value instanceof __await?Promise.resolve(gt.value.v).then(ft,pt):mt(ct[0][2],gt)}function ft(gt){dt("next",gt)}function pt(gt){dt("throw",gt)}function mt(gt,xt){gt(xt),ct.shift(),ct.length&&dt(ct[0][0],ct[0][1])}}function __asyncDelegator(nt){var rt,it;return rt={},st("next"),st("throw",function(lt){throw lt}),st("return"),rt[Symbol.iterator]=function(){return this},rt;function st(lt,ct){rt[lt]=nt[lt]?function(ut){return(it=!it)?{value:__await(nt[lt](ut)),done:lt==="return"}:ct?ct(ut):ut}:ct}}function __asyncValues(nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=nt[Symbol.asyncIterator],it;return rt?rt.call(nt):(nt=typeof __values=="function"?__values(nt):nt[Symbol.iterator](),it={},st("next"),st("throw"),st("return"),it[Symbol.asyncIterator]=function(){return this},it);function st(ct){it[ct]=nt[ct]&&function(ut){return new Promise(function(dt,ht){ut=nt[ct](ut),lt(dt,ht,ut.done,ut.value)})}}function lt(ct,ut,dt,ht){Promise.resolve(ht).then(function(ft){ct({value:ft,done:dt})},ut)}}function __makeTemplateObject(nt,rt){return Object.defineProperty?Object.defineProperty(nt,"raw",{value:rt}):nt.raw=rt,nt}function __importStar(nt){if(nt&&nt.__esModule)return nt;var rt={};if(nt!=null)for(var it in nt)Object.hasOwnProperty.call(nt,it)&&(rt[it]=nt[it]);return rt.default=nt,rt}function __importDefault(nt){return nt&&nt.__esModule?nt:{default:nt}}function __classPrivateFieldGet(nt,rt){if(!rt.has(nt))throw new TypeError("attempted to get private field on non-instance");return rt.get(nt)}function __classPrivateFieldSet(nt,rt,it){if(!rt.has(nt))throw new TypeError("attempted to set private field on non-instance");return rt.set(nt,it),it}const tslib_es6=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign},__asyncDelegator,__asyncGenerator,__asyncValues,__await,__awaiter,__classPrivateFieldGet,__classPrivateFieldSet,__createBinding,__decorate,__exportStar,__extends,__generator,__importDefault,__importStar,__makeTemplateObject,__metadata,__param,__read,__rest,__spread,__spreadArrays,__values},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(tslib_es6);var aws_crc32c={},hasRequiredAws_crc32c;function requireAws_crc32c(){if(hasRequiredAws_crc32c)return aws_crc32c;hasRequiredAws_crc32c=1,Object.defineProperty(aws_crc32c,"__esModule",{value:!0}),aws_crc32c.AwsCrc32c=void 0;var nt=require$$0,rt=requireBuild$5(),it=requireBuild(),st=function(){function lt(){this.crc32c=new it.Crc32c}return lt.prototype.update=function(ct){(0,rt.isEmptyData)(ct)||this.crc32c.update((0,rt.convertToBuffer)(ct))},lt.prototype.digest=function(){return nt.__awaiter(this,void 0,void 0,function(){return nt.__generator(this,function(ct){return[2,(0,rt.numToUint8)(this.crc32c.digest())]})})},lt.prototype.reset=function(){this.crc32c=new it.Crc32c},lt}();return aws_crc32c.AwsCrc32c=st,aws_crc32c}var hasRequiredBuild;function requireBuild(){return hasRequiredBuild||(hasRequiredBuild=1,function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.AwsCrc32c=nt.Crc32c=nt.crc32c=void 0;var rt=require$$0,it=requireBuild$5();function st(ht){return new lt().update(ht).digest()}nt.crc32c=st;var lt=function(){function ht(){this.checksum=4294967295}return ht.prototype.update=function(ft){var pt,mt;try{for(var gt=rt.__values(ft),xt=gt.next();!xt.done;xt=gt.next()){var yt=xt.value;this.checksum=this.checksum>>>8^ut[(this.checksum^yt)&255]}}catch(vt){pt={error:vt}}finally{try{xt&&!xt.done&&(mt=gt.return)&&mt.call(gt)}finally{if(pt)throw pt.error}}return this},ht.prototype.digest=function(){return(this.checksum^4294967295)>>>0},ht}();nt.Crc32c=lt;var ct=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],ut=(0,it.uint32ArrayFrom)(ct),dt=requireAws_crc32c();Object.defineProperty(nt,"AwsCrc32c",{enumerable:!0,get:function(){return dt.AwsCrc32c}})}(build)),build}var buildExports=requireBuild();const selectChecksumAlgorithmFunction=(nt,rt)=>({[ChecksumAlgorithm.MD5]:rt.md5,[ChecksumAlgorithm.CRC32]:buildExports$1.AwsCrc32,[ChecksumAlgorithm.CRC32C]:buildExports.AwsCrc32c,[ChecksumAlgorithm.SHA1]:rt.sha1,[ChecksumAlgorithm.SHA256]:rt.sha256})[nt],stringHasher=(nt,rt)=>{const it=new nt;return it.update(toUint8Array(rt||"")),it.digest()},flexibleChecksumsMiddlewareOptions={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},flexibleChecksumsMiddleware=(nt,rt)=>(it,st)=>async lt=>{if(!HttpRequest.isInstance(lt.request))return it(lt);const{request:ct}=lt,{body:ut,headers:dt}=ct,{base64Encoder:ht,streamHasher:ft}=nt,{input:pt,requestChecksumRequired:mt,requestAlgorithmMember:gt}=rt,xt=getChecksumAlgorithmForRequest(pt,{requestChecksumRequired:mt,requestAlgorithmMember:gt},!!st.isS3ExpressBucket);let yt=ut,vt=dt;if(xt){const wt=getChecksumLocationName(xt),Et=selectChecksumAlgorithmFunction(xt,nt);if(isStreaming(ut)){const{getAwsChunkedEncodingStream:Rt,bodyLengthChecker:Tt}=nt;yt=Rt(ut,{base64Encoder:ht,bodyLengthChecker:Tt,checksumLocationName:wt,checksumAlgorithmFn:Et,streamHasher:ft}),vt={...dt,"content-encoding":dt["content-encoding"]?`${dt["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":dt["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":wt},delete vt["content-length"]}else if(!hasHeader(wt,dt)){const Rt=await stringHasher(Et,ut);vt={...dt,[wt]:ht(Rt)}}}return await it({...lt,request:{...ct,headers:vt,body:yt}})},getChecksumAlgorithmListForResponse=(nt=[])=>{const rt=[];for(const it of PRIORITY_ORDER_ALGORITHMS)!nt.includes(it)||!CLIENT_SUPPORTED_ALGORITHMS.includes(it)||rt.push(it);return rt},isChecksumWithPartNumber=nt=>{const rt=nt.lastIndexOf("-");if(rt!==-1){const it=nt.slice(rt+1);if(!it.startsWith("0")){const st=parseInt(it,10);if(!isNaN(st)&&st>=1&&st<=1e4)return!0}}return!1};function createReadStreamOnBuffer(nt){return new Blob([nt]).stream()}const getChecksum=async(nt,{streamHasher:rt,checksumAlgorithmFn:it,base64Encoder:st})=>{const lt=isStreaming(nt)?rt(it,nt):stringHasher(it,nt);return st(await lt)},validateChecksumFromResponse=async(nt,{config:rt,responseAlgorithms:it})=>{const st=getChecksumAlgorithmListForResponse(it),{body:lt,headers:ct}=nt;for(const ut of st){const dt=getChecksumLocationName(ut),ht=ct[dt];if(ht){const ft=selectChecksumAlgorithmFunction(ut,rt),{streamHasher:pt,base64Encoder:mt}=rt,gt=await getChecksum(lt,{streamHasher:pt,checksumAlgorithmFn:ft,base64Encoder:mt});if(gt===ht)break;throw new Error(`Checksum mismatch: expected "${gt}" but received "${ht}" in response header "${dt}".`)}}},flexibleChecksumsResponseMiddlewareOptions={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},flexibleChecksumsResponseMiddleware=(nt,rt)=>(it,st)=>async lt=>{if(!HttpRequest.isInstance(lt.request))return it(lt);const ct=lt.input,ut=await it(lt),dt=ut.response;let ht;const{requestValidationModeMember:ft,responseAlgorithms:pt}=rt;if(ft&&ct[ft]==="ENABLED"){const{clientName:mt,commandName:gt}=st;if(mt==="S3Client"&&gt==="GetObjectCommand"&&getChecksumAlgorithmListForResponse(pt).every(vt=>{const St=getChecksumLocationName(vt),wt=dt.headers[St];return!wt||isChecksumWithPartNumber(wt)}))return ut;const yt=isStreaming(dt.body);yt&&(ht=await nt.streamCollector(dt.body),dt.body=createReadStreamOnBuffer(ht)),await validateChecksumFromResponse(ut.response,{config:nt,responseAlgorithms:pt}),yt&&ht&&(dt.body=createReadStreamOnBuffer(ht))}return ut},getFlexibleChecksumsPlugin=(nt,rt)=>({applyToStack:it=>{it.add(flexibleChecksumsMiddleware(nt,rt),flexibleChecksumsMiddlewareOptions),it.addRelativeTo(flexibleChecksumsResponseMiddleware(nt,rt),flexibleChecksumsResponseMiddlewareOptions)}});class PutObjectCommand extends Command.classBuilder().ep({...commonParams,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(rt,it,st,lt){return[getSerdePlugin(st,this.serialize,this.deserialize),getEndpointPlugin(st,rt.getEndpointParameterInstructions()),getCheckContentLengthHeaderPlugin(),getSsecPlugin(st),getFlexibleChecksumsPlugin(st,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1})]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").f(PutObjectRequestFilterSensitiveLog,PutObjectOutputFilterSensitiveLog).ser(se_PutObjectCommand).de(de_PutObjectCommand).build(){}const Profile=()=>{const nt=Recoil_index_20(baseUrlState),[rt,it]=Recoil_index_22(userState),[st,lt]=reactExports.useState({}),[ct,ut]=reactExports.useState(""),[dt,ht]=reactExports.useState(!1),ft=reactExports.useRef(null),pt="ap-northeast-2",mt="3dbody-image",gt=()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload("/")},xt=new S3Client({region:pt,credentials:{accessKeyId:"AKIAQ3EGP36XU5CEUPOS",secretAccessKey:"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"}}),yt=async vt=>{if(console.log("프로필 변경"),vt.target.files[0])lt(vt.target.files[0]),ut(`${uuid$1()}_${vt.currentTarget.files[0].name}`),ht(!0);else{ht(!1);return}};return reactExports.useEffect(()=>{let vt="";if(dt){ct.includes("jpg")||ct.includes("jpeg")?vt="image/jpeg":ct.includes("png")?vt="image/png":ct.includes("gif")&&(vt="image/gif");const St={Bucket:mt,Key:ct,Body:st,ContentType:vt};xt.send(new PutObjectCommand(St)).then(()=>{axios({method:"patch",url:`${nt}api/users/${rt.info.userId}/profile-image`,headers:{Authorization:`Bearer ${rt.token}`},data:{profile_image:`https://do9nz79ez57wg.cloudfront.net/${ct}`}}).then(wt=>{wt.data.data_header.success_code===0&&it({token:rt.token,info:{...rt.info,profile_image:`https://do9nz79ez57wg.cloudfront.net/${ct}`}})})})}},[st]),jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center p-4 pb-6 bg-white",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center",children:[jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",accept:"image/jpg,image/png,image/jpeg",name:"profile_img",onChange:yt,ref:ft}),jsxRuntimeExports.jsx("img",{className:"w-1/4 m-2 border rounded-full object-fit:corver",src:rt.info.profile_image?rt.info.profile_image:"/challenge/기본이미지.jpg",alt:"기본 이미지",onClick:()=>{ft.current.click()}})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-2 m-2",children:[jsxRuntimeExports.jsxs("h3",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:rt.info.nickname}),"님"]}),jsxRuntimeExports.jsx(Link,{to:"/mypage/myinfo",children:jsxRuntimeExports.jsx(PencilSquareIcon$1,{className:"w-6 h-6"})})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center m-2",children:jsxRuntimeExports.jsx(Button,{btnCss:"px-2 py-1 border rounded-md border-teal-700",buttonName:"로그아웃",onClick:gt})})]})},MyPage=()=>jsxRuntimeExports.jsx("div",{className:"h-screen bg-gray-100",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Profile,{}),jsxRuntimeExports.jsx("hr",{className:"bg-gray-500"}),jsxRuntimeExports.jsx(Menus,{})]})}),BackButton=()=>{const nt=useNavigate(),rt=()=>{nt(-1)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("button",{children:jsxRuntimeExports.jsx(ChevronLeftIcon$1,{className:"w-6 h-6 my-4 ml-2",onClick:rt})})})},MyInfo=({category:nt,data:rt,modalname:it})=>{const[st,lt]=Recoil_index_22(modalState);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("div",{children:nt}),jsxRuntimeExports.jsx("div",{onClick:ct=>{lt({type:it,data:ct.currentTarget.innerText})},children:rt})]}),jsxRuntimeExports.jsx("hr",{})]})};MyInfo.propTypes={category:propTypesExports.PropTypes.string,data:propTypesExports.PropTypes.any,modalname:propTypesExports.PropTypes.string};const PageTitle=({pageTitle:nt})=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center p-4 font-semibold",children:nt}),jsxRuntimeExports.jsx("hr",{})]});PageTitle.propTypes={pageTitle:PropTypes.string};const MyInfoPage=()=>{const nt=Recoil_index_20(userState);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"회원 정보 수정"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 m-4 ",children:[jsxRuntimeExports.jsx(MyInfo,{category:"이메일",data:nt.info.email}),jsxRuntimeExports.jsx(MyInfo,{category:"이름",data:nt.info.name}),jsxRuntimeExports.jsx(MyInfo,{category:"닉네임",data:nt.info.nickname,modalname:"changeNickname"}),jsxRuntimeExports.jsx(MyInfo,{category:"성별",data:nt.info.gender==="MALE"?"남자":"여자",modalname:"changeGender"}),jsxRuntimeExports.jsx(MyInfo,{category:"신장",data:nt.info.height,modalname:"changeHeight"}),jsxRuntimeExports.jsx(MyInfo,{category:"체중",data:nt.info.weight,modalname:"changeWeight"}),jsxRuntimeExports.jsx(MyInfo,{category:"생년월일",data:nt.info.birth_date})]})]})},Notice=({notice:nt})=>{const rt=nt.createdAt.substring(0,10);return jsxRuntimeExports.jsxs("div",{className:"flex p-2 text-white bg-teal-700 border rounded-xl",children:[jsxRuntimeExports.jsx("p",{className:"basis-1/3",children:rt}),jsxRuntimeExports.jsx("p",{className:"basis-2/3",children:nt.title})]})};Notice.propTypes={notice:propTypesExports.PropTypes.object};const NoticePage=()=>{const[nt,rt]=reactExports.useState(null),it=Recoil_index_20(baseUrlState),st=async()=>await axios.get(`${it}api/notice/posts/list`).then(lt=>{rt(lt.data.map(ct=>jsxRuntimeExports.jsx(Notice,{notice:ct},ct.postId)))});return reactExports.useEffect(()=>{st()},[]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"공지사항"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2 m-4",children:nt})]})},NoticeDetailPage=()=>jsxRuntimeExports.jsx("div",{}),FAQ=({question:nt})=>jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("div",{className:"flex content-center justify-center w-9/12 text-white bg-teal-700 border rounded-xl",children:jsxRuntimeExports.jsx(Link,{className:"m-2",to:`/mypage/FAQ/${nt.postId}`,children:nt.title})})});FAQ.propTypes={question:propTypesExports.PropTypes.object};const FAQPage=()=>{const[nt,rt]=reactExports.useState(null),it=Recoil_index_20(baseUrlState),st=async()=>await axios.get(`${it}api/faq/posts/list`).then(lt=>{rt(lt.data.map(ct=>jsxRuntimeExports.jsx(FAQ,{question:ct},ct.postId)))});return reactExports.useEffect(()=>{st()},[]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"FAQ"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2 m-4",children:nt})]})},CalendarMonth=()=>{const[nt,rt]=Recoil_index_22(selectedDateState),[it,st]=reactExports.useState(new Date(nt[0],nt[1]-1,nt[2])),[lt,ct]=reactExports.useState([]),ut=["일","월","화","수","목","금","토"],dt=Recoil_index_24(selectedDayState);reactExports.useEffect(()=>{ht()},[it]);const ht=()=>{const yt=new Date(it.getFullYear(),it.getMonth(),1),vt=new Date(it.getFullYear(),it.getMonth()+1,0),St=yt.getDay(),wt=vt.getDate(),Et=St>0?new Array(St).fill(null).map((It,At)=>[new Date(it.getFullYear(),it.getMonth(),0).getDate()-St+At+1,"prev"]):[],Rt=new Array(wt).fill(null).map((It,At)=>[At+1,"cur"]),Tt=new Array(7-(vt.getDay()+1)).fill(null).map((It,At)=>[At+1,"next"]);ct([...Et,...Rt,...Tt])},ft=()=>{st(new Date(it.getFullYear(),it.getMonth()-1,1))},pt=()=>{st(new Date(it.getFullYear(),it.getMonth()+1,1))},mt=yt=>{const vt=new Date;return it.getFullYear()===vt.getFullYear()&&it.getMonth()===vt.getMonth()&&yt===vt.getDate()},gt=yt=>{yt[1]==="cur"?rt([it.getFullYear(),it.getMonth()+1,yt[0]]):yt[1]==="prev"?(rt([it.getMonth()===0?it.getFullYear()-1:it.getFullYear(),it.getMonth()===0?12:it.getMonth(),yt[0]]),ft()):yt[1]==="next"&&(rt([it.getMonth()===11?it.getFullYear()+1:it.getFullYear(),it.getMonth()===11?1:it.getMonth()+2,yt[0]]),pt())},xt=yt=>it.getFullYear()===nt[0]&&it.getMonth()+1===nt[1]&&yt[0]===nt[2]&&yt[1]==="cur";return reactExports.useEffect(()=>{const yt=new Date(nt[0],nt[1]-1,nt[2]);dt(ut[yt.getDay()])},[nt]),jsxRuntimeExports.jsxs("div",{className:"max-w-screen-sm mx-auto mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-4",children:[jsxRuntimeExports.jsx(ChevronLeftIcon$1,{className:"w-6 h-6",onClick:ft}),jsxRuntimeExports.jsx("span",{className:"font-bold text-gray-800",children:it.toLocaleDateString("ko-KR",{year:"numeric",month:"short"})}),jsxRuntimeExports.jsx(ChevronRightIcon$1,{className:"w-6 h-6",onClick:pt})]}),jsxRuntimeExports.jsxs("table",{className:"w-full mx-auto",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"py-2 text-center text-red-500",children:"일"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"월"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"화"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"수"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"목"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"금"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center text-blue-500",children:"토"})]})}),jsxRuntimeExports.jsx("tbody",{children:lt.reduce((yt,vt,St)=>(St%7===0?yt.push([vt]):yt[yt.length-1].push(vt),yt),[]).map((yt,vt)=>jsxRuntimeExports.jsx("tr",{children:yt.map((St,wt)=>jsxRuntimeExports.jsx("td",{onClick:()=>gt(St),className:`
                      text-center
                      ${St[1]!=="cur"?"text-gray-300":""}
                      ${mt(St[0])?"font-semibold text-teal-700":""}
                    `,children:jsxRuntimeExports.jsx("div",{className:`
                        flex justify-center items-center
                        ${xt(St)?"bg-teal-700 rounded-full text-white":""}
                        w-8 h-8
                        mx-auto
                      `,children:St[0]})},wt))},vt))})]})]})},ToggleTap=({leftTitle:nt,rightTitle:rt,state:it})=>{const[st,lt]=Recoil_index_22(it),ct=()=>{lt("left")},ut=()=>{lt("right")};return jsxRuntimeExports.jsx("div",{className:"m-4",children:jsxRuntimeExports.jsxs("div",{className:"flex w-full border border-teal-700 rounded-md",children:[jsxRuntimeExports.jsx("div",{className:`w-1/2 text-center ${st==="left"?"bg-teal-700 text-white rounded":null}`,onClick:()=>ct(),children:nt}),jsxRuntimeExports.jsx("div",{className:`w-1/2 text-center ${st==="right"?"bg-teal-700 text-white rounded":null}`,onClick:()=>ut(),children:rt})]})})};ToggleTap.propTypes={leftTitle:PropTypes.string,rightTitle:PropTypes.string,state:PropTypes.object};/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function round$1(nt){return nt+.5|0}const lim=(nt,rt,it)=>Math.max(Math.min(nt,it),rt);function p2b(nt){return lim(round$1(nt*2.55),0,255)}function n2b(nt){return lim(round$1(nt*255),0,255)}function b2n(nt){return lim(round$1(nt/2.55)/100,0,1)}function n2p(nt){return lim(round$1(nt*100),0,100)}const map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex=[..."0123456789ABCDEF"],h1=nt=>hex[nt&15],h2=nt=>hex[(nt&240)>>4]+hex[nt&15],eq=nt=>(nt&240)>>4===(nt&15),isShort=nt=>eq(nt.r)&&eq(nt.g)&&eq(nt.b)&&eq(nt.a);function hexParse(nt){var rt=nt.length,it;return nt[0]==="#"&&(rt===4||rt===5?it={r:255&map$1[nt[1]]*17,g:255&map$1[nt[2]]*17,b:255&map$1[nt[3]]*17,a:rt===5?map$1[nt[4]]*17:255}:(rt===7||rt===9)&&(it={r:map$1[nt[1]]<<4|map$1[nt[2]],g:map$1[nt[3]]<<4|map$1[nt[4]],b:map$1[nt[5]]<<4|map$1[nt[6]],a:rt===9?map$1[nt[7]]<<4|map$1[nt[8]]:255})),it}const alpha=(nt,rt)=>nt<255?rt(nt):"";function hexString(nt){var rt=isShort(nt)?h1:h2;return nt?"#"+rt(nt.r)+rt(nt.g)+rt(nt.b)+alpha(nt.a,rt):void 0}const HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(nt,rt,it){const st=rt*Math.min(it,1-it),lt=(ct,ut=(ct+nt/30)%12)=>it-st*Math.max(Math.min(ut-3,9-ut,1),-1);return[lt(0),lt(8),lt(4)]}function hsv2rgbn(nt,rt,it){const st=(lt,ct=(lt+nt/60)%6)=>it-it*rt*Math.max(Math.min(ct,4-ct,1),0);return[st(5),st(3),st(1)]}function hwb2rgbn(nt,rt,it){const st=hsl2rgbn(nt,1,.5);let lt;for(rt+it>1&&(lt=1/(rt+it),rt*=lt,it*=lt),lt=0;lt<3;lt++)st[lt]*=1-rt-it,st[lt]+=rt;return st}function hueValue(nt,rt,it,st,lt){return nt===lt?(rt-it)/st+(rt<it?6:0):rt===lt?(it-nt)/st+2:(nt-rt)/st+4}function rgb2hsl(nt){const it=nt.r/255,st=nt.g/255,lt=nt.b/255,ct=Math.max(it,st,lt),ut=Math.min(it,st,lt),dt=(ct+ut)/2;let ht,ft,pt;return ct!==ut&&(pt=ct-ut,ft=dt>.5?pt/(2-ct-ut):pt/(ct+ut),ht=hueValue(it,st,lt,pt,ct),ht=ht*60+.5),[ht|0,ft||0,dt]}function calln(nt,rt,it,st){return(Array.isArray(rt)?nt(rt[0],rt[1],rt[2]):nt(rt,it,st)).map(n2b)}function hsl2rgb(nt,rt,it){return calln(hsl2rgbn,nt,rt,it)}function hwb2rgb(nt,rt,it){return calln(hwb2rgbn,nt,rt,it)}function hsv2rgb(nt,rt,it){return calln(hsv2rgbn,nt,rt,it)}function hue(nt){return(nt%360+360)%360}function hueParse(nt){const rt=HUE_RE.exec(nt);let it=255,st;if(!rt)return;rt[5]!==st&&(it=rt[6]?p2b(+rt[5]):n2b(+rt[5]));const lt=hue(+rt[2]),ct=+rt[3]/100,ut=+rt[4]/100;return rt[1]==="hwb"?st=hwb2rgb(lt,ct,ut):rt[1]==="hsv"?st=hsv2rgb(lt,ct,ut):st=hsl2rgb(lt,ct,ut),{r:st[0],g:st[1],b:st[2],a:it}}function rotate(nt,rt){var it=rgb2hsl(nt);it[0]=hue(it[0]+rt),it=hsl2rgb(it),nt.r=it[0],nt.g=it[1],nt.b=it[2]}function hslString(nt){if(!nt)return;const rt=rgb2hsl(nt),it=rt[0],st=n2p(rt[1]),lt=n2p(rt[2]);return nt.a<255?`hsla(${it}, ${st}%, ${lt}%, ${b2n(nt.a)})`:`hsl(${it}, ${st}%, ${lt}%)`}const map={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names$1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function unpack(){const nt={},rt=Object.keys(names$1),it=Object.keys(map);let st,lt,ct,ut,dt;for(st=0;st<rt.length;st++){for(ut=dt=rt[st],lt=0;lt<it.length;lt++)ct=it[lt],dt=dt.replace(ct,map[ct]);ct=parseInt(names$1[ut],16),nt[dt]=[ct>>16&255,ct>>8&255,ct&255]}return nt}let names;function nameParse(nt){names||(names=unpack(),names.transparent=[0,0,0,0]);const rt=names[nt.toLowerCase()];return rt&&{r:rt[0],g:rt[1],b:rt[2],a:rt.length===4?rt[3]:255}}const RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rgbParse(nt){const rt=RGB_RE.exec(nt);let it=255,st,lt,ct;if(rt){if(rt[7]!==st){const ut=+rt[7];it=rt[8]?p2b(ut):lim(ut*255,0,255)}return st=+rt[1],lt=+rt[3],ct=+rt[5],st=255&(rt[2]?p2b(st):lim(st,0,255)),lt=255&(rt[4]?p2b(lt):lim(lt,0,255)),ct=255&(rt[6]?p2b(ct):lim(ct,0,255)),{r:st,g:lt,b:ct,a:it}}}function rgbString(nt){return nt&&(nt.a<255?`rgba(${nt.r}, ${nt.g}, ${nt.b}, ${b2n(nt.a)})`:`rgb(${nt.r}, ${nt.g}, ${nt.b})`)}const to=nt=>nt<=.0031308?nt*12.92:Math.pow(nt,1/2.4)*1.055-.055,from=nt=>nt<=.04045?nt/12.92:Math.pow((nt+.055)/1.055,2.4);function interpolate$1(nt,rt,it){const st=from(b2n(nt.r)),lt=from(b2n(nt.g)),ct=from(b2n(nt.b));return{r:n2b(to(st+it*(from(b2n(rt.r))-st))),g:n2b(to(lt+it*(from(b2n(rt.g))-lt))),b:n2b(to(ct+it*(from(b2n(rt.b))-ct))),a:nt.a+it*(rt.a-nt.a)}}function modHSL(nt,rt,it){if(nt){let st=rgb2hsl(nt);st[rt]=Math.max(0,Math.min(st[rt]+st[rt]*it,rt===0?360:1)),st=hsl2rgb(st),nt.r=st[0],nt.g=st[1],nt.b=st[2]}}function clone$1(nt,rt){return nt&&Object.assign(rt||{},nt)}function fromObject(nt){var rt={r:0,g:0,b:0,a:255};return Array.isArray(nt)?nt.length>=3&&(rt={r:nt[0],g:nt[1],b:nt[2],a:255},nt.length>3&&(rt.a=n2b(nt[3]))):(rt=clone$1(nt,{r:0,g:0,b:0,a:1}),rt.a=n2b(rt.a)),rt}function functionParse(nt){return nt.charAt(0)==="r"?rgbParse(nt):hueParse(nt)}let Color$1=class gv{constructor(rt){if(rt instanceof gv)return rt;const it=typeof rt;let st;it==="object"?st=fromObject(rt):it==="string"&&(st=hexParse(rt)||nameParse(rt)||functionParse(rt)),this._rgb=st,this._valid=!!st}get valid(){return this._valid}get rgb(){var rt=clone$1(this._rgb);return rt&&(rt.a=b2n(rt.a)),rt}set rgb(rt){this._rgb=fromObject(rt)}rgbString(){return this._valid?rgbString(this._rgb):void 0}hexString(){return this._valid?hexString(this._rgb):void 0}hslString(){return this._valid?hslString(this._rgb):void 0}mix(rt,it){if(rt){const st=this.rgb,lt=rt.rgb;let ct;const ut=it===ct?.5:it,dt=2*ut-1,ht=st.a-lt.a,ft=((dt*ht===-1?dt:(dt+ht)/(1+dt*ht))+1)/2;ct=1-ft,st.r=255&ft*st.r+ct*lt.r+.5,st.g=255&ft*st.g+ct*lt.g+.5,st.b=255&ft*st.b+ct*lt.b+.5,st.a=ut*st.a+(1-ut)*lt.a,this.rgb=st}return this}interpolate(rt,it){return rt&&(this._rgb=interpolate$1(this._rgb,rt._rgb,it)),this}clone(){return new gv(this.rgb)}alpha(rt){return this._rgb.a=n2b(rt),this}clearer(rt){const it=this._rgb;return it.a*=1-rt,this}greyscale(){const rt=this._rgb,it=round$1(rt.r*.3+rt.g*.59+rt.b*.11);return rt.r=rt.g=rt.b=it,this}opaquer(rt){const it=this._rgb;return it.a*=1+rt,this}negate(){const rt=this._rgb;return rt.r=255-rt.r,rt.g=255-rt.g,rt.b=255-rt.b,this}lighten(rt){return modHSL(this._rgb,2,rt),this}darken(rt){return modHSL(this._rgb,2,-rt),this}saturate(rt){return modHSL(this._rgb,1,rt),this}desaturate(rt){return modHSL(this._rgb,1,-rt),this}rotate(rt){return rotate(this._rgb,rt),this}};/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function noop$1(){}const uid=(()=>{let nt=0;return()=>nt++})();function isNullOrUndef(nt){return nt===null||typeof nt>"u"}function isArray(nt){if(Array.isArray&&Array.isArray(nt))return!0;const rt=Object.prototype.toString.call(nt);return rt.slice(0,7)==="[object"&&rt.slice(-6)==="Array]"}function isObject(nt){return nt!==null&&Object.prototype.toString.call(nt)==="[object Object]"}function isNumberFinite(nt){return(typeof nt=="number"||nt instanceof Number)&&isFinite(+nt)}function finiteOrDefault(nt,rt){return isNumberFinite(nt)?nt:rt}function valueOrDefault(nt,rt){return typeof nt>"u"?rt:nt}const toDimension=(nt,rt)=>typeof nt=="string"&&nt.endsWith("%")?parseFloat(nt)/100*rt:+nt;function callback(nt,rt,it){if(nt&&typeof nt.call=="function")return nt.apply(it,rt)}function each(nt,rt,it,st){let lt,ct,ut;if(isArray(nt))if(ct=nt.length,st)for(lt=ct-1;lt>=0;lt--)rt.call(it,nt[lt],lt);else for(lt=0;lt<ct;lt++)rt.call(it,nt[lt],lt);else if(isObject(nt))for(ut=Object.keys(nt),ct=ut.length,lt=0;lt<ct;lt++)rt.call(it,nt[ut[lt]],ut[lt])}function _elementsEqual(nt,rt){let it,st,lt,ct;if(!nt||!rt||nt.length!==rt.length)return!1;for(it=0,st=nt.length;it<st;++it)if(lt=nt[it],ct=rt[it],lt.datasetIndex!==ct.datasetIndex||lt.index!==ct.index)return!1;return!0}function clone(nt){if(isArray(nt))return nt.map(clone);if(isObject(nt)){const rt=Object.create(null),it=Object.keys(nt),st=it.length;let lt=0;for(;lt<st;++lt)rt[it[lt]]=clone(nt[it[lt]]);return rt}return nt}function isValidKey(nt){return["__proto__","prototype","constructor"].indexOf(nt)===-1}function _merger(nt,rt,it,st){if(!isValidKey(nt))return;const lt=rt[nt],ct=it[nt];isObject(lt)&&isObject(ct)?merge(lt,ct,st):rt[nt]=clone(ct)}function merge(nt,rt,it){const st=isArray(rt)?rt:[rt],lt=st.length;if(!isObject(nt))return nt;it=it||{};const ct=it.merger||_merger;let ut;for(let dt=0;dt<lt;++dt){if(ut=st[dt],!isObject(ut))continue;const ht=Object.keys(ut);for(let ft=0,pt=ht.length;ft<pt;++ft)ct(ht[ft],nt,ut,it)}return nt}function mergeIf(nt,rt){return merge(nt,rt,{merger:_mergerIf})}function _mergerIf(nt,rt,it){if(!isValidKey(nt))return;const st=rt[nt],lt=it[nt];isObject(st)&&isObject(lt)?mergeIf(st,lt):Object.prototype.hasOwnProperty.call(rt,nt)||(rt[nt]=clone(lt))}const keyResolvers={"":nt=>nt,x:nt=>nt.x,y:nt=>nt.y};function _splitKey(nt){const rt=nt.split("."),it=[];let st="";for(const lt of rt)st+=lt,st.endsWith("\\")?st=st.slice(0,-1)+".":(it.push(st),st="");return it}function _getKeyResolver(nt){const rt=_splitKey(nt);return it=>{for(const st of rt){if(st==="")break;it=it&&it[st]}return it}}function resolveObjectKey(nt,rt){return(keyResolvers[rt]||(keyResolvers[rt]=_getKeyResolver(rt)))(nt)}function _capitalize(nt){return nt.charAt(0).toUpperCase()+nt.slice(1)}const defined=nt=>typeof nt<"u",isFunction=nt=>typeof nt=="function",setsEqual=(nt,rt)=>{if(nt.size!==rt.size)return!1;for(const it of nt)if(!rt.has(it))return!1;return!0};function _isClickEvent(nt){return nt.type==="mouseup"||nt.type==="click"||nt.type==="contextmenu"}const PI=Math.PI,TAU=2*PI,PITAU=TAU+PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=PI*2/3,log10=Math.log10,sign$1=Math.sign;function almostEquals(nt,rt,it){return Math.abs(nt-rt)<it}function niceNum(nt){const rt=Math.round(nt);nt=almostEquals(nt,rt,nt/1e3)?rt:nt;const it=Math.pow(10,Math.floor(log10(nt))),st=nt/it;return(st<=1?1:st<=2?2:st<=5?5:10)*it}function _factorize(nt){const rt=[],it=Math.sqrt(nt);let st;for(st=1;st<it;st++)nt%st===0&&(rt.push(st),rt.push(nt/st));return it===(it|0)&&rt.push(it),rt.sort((lt,ct)=>lt-ct).pop(),rt}function isNumber(nt){return!isNaN(parseFloat(nt))&&isFinite(nt)}function almostWhole(nt,rt){const it=Math.round(nt);return it-rt<=nt&&it+rt>=nt}function _setMinAndMaxByKey(nt,rt,it){let st,lt,ct;for(st=0,lt=nt.length;st<lt;st++)ct=nt[st][it],isNaN(ct)||(rt.min=Math.min(rt.min,ct),rt.max=Math.max(rt.max,ct))}function toRadians(nt){return nt*(PI/180)}function toDegrees(nt){return nt*(180/PI)}function _decimalPlaces(nt){if(!isNumberFinite(nt))return;let rt=1,it=0;for(;Math.round(nt*rt)/rt!==nt;)rt*=10,it++;return it}function getAngleFromPoint(nt,rt){const it=rt.x-nt.x,st=rt.y-nt.y,lt=Math.sqrt(it*it+st*st);let ct=Math.atan2(st,it);return ct<-.5*PI&&(ct+=TAU),{angle:ct,distance:lt}}function distanceBetweenPoints(nt,rt){return Math.sqrt(Math.pow(rt.x-nt.x,2)+Math.pow(rt.y-nt.y,2))}function _angleDiff(nt,rt){return(nt-rt+PITAU)%TAU-PI}function _normalizeAngle(nt){return(nt%TAU+TAU)%TAU}function _angleBetween(nt,rt,it,st){const lt=_normalizeAngle(nt),ct=_normalizeAngle(rt),ut=_normalizeAngle(it),dt=_normalizeAngle(ct-lt),ht=_normalizeAngle(ut-lt),ft=_normalizeAngle(lt-ct),pt=_normalizeAngle(lt-ut);return lt===ct||lt===ut||st&&ct===ut||dt>ht&&ft<pt}function _limitValue(nt,rt,it){return Math.max(rt,Math.min(it,nt))}function _int16Range(nt){return _limitValue(nt,-32768,32767)}function _isBetween(nt,rt,it,st=1e-6){return nt>=Math.min(rt,it)-st&&nt<=Math.max(rt,it)+st}function _lookup(nt,rt,it){it=it||(ut=>nt[ut]<rt);let st=nt.length-1,lt=0,ct;for(;st-lt>1;)ct=lt+st>>1,it(ct)?lt=ct:st=ct;return{lo:lt,hi:st}}const _lookupByKey=(nt,rt,it,st)=>_lookup(nt,it,st?lt=>{const ct=nt[lt][rt];return ct<it||ct===it&&nt[lt+1][rt]===it}:lt=>nt[lt][rt]<it),_rlookupByKey=(nt,rt,it)=>_lookup(nt,it,st=>nt[st][rt]>=it);function _filterBetween(nt,rt,it){let st=0,lt=nt.length;for(;st<lt&&nt[st]<rt;)st++;for(;lt>st&&nt[lt-1]>it;)lt--;return st>0||lt<nt.length?nt.slice(st,lt):nt}const arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(nt,rt){if(nt._chartjs){nt._chartjs.listeners.push(rt);return}Object.defineProperty(nt,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[rt]}}),arrayEvents.forEach(it=>{const st="_onData"+_capitalize(it),lt=nt[it];Object.defineProperty(nt,it,{configurable:!0,enumerable:!1,value(...ct){const ut=lt.apply(this,ct);return nt._chartjs.listeners.forEach(dt=>{typeof dt[st]=="function"&&dt[st](...ct)}),ut}})})}function unlistenArrayEvents(nt,rt){const it=nt._chartjs;if(!it)return;const st=it.listeners,lt=st.indexOf(rt);lt!==-1&&st.splice(lt,1),!(st.length>0)&&(arrayEvents.forEach(ct=>{delete nt[ct]}),delete nt._chartjs)}function _arrayUnique(nt){const rt=new Set(nt);return rt.size===nt.length?nt:Array.from(rt)}const requestAnimFrame=function(){return typeof window>"u"?function(nt){return nt()}:window.requestAnimationFrame}();function throttled(nt,rt){let it=[],st=!1;return function(...lt){it=lt,st||(st=!0,requestAnimFrame.call(window,()=>{st=!1,nt.apply(rt,it)}))}}function debounce$2(nt,rt){let it;return function(...st){return rt?(clearTimeout(it),it=setTimeout(nt,rt,st)):nt.apply(this,st),rt}}const _toLeftRightCenter=nt=>nt==="start"?"left":nt==="end"?"right":"center",_alignStartEnd=(nt,rt,it)=>nt==="start"?rt:nt==="end"?it:(rt+it)/2,_textX=(nt,rt,it,st)=>nt===(st?"left":"right")?it:nt==="center"?(rt+it)/2:rt;function _getStartAndCountOfVisiblePoints(nt,rt,it){const st=rt.length;let lt=0,ct=st;if(nt._sorted){const{iScale:ut,_parsed:dt}=nt,ht=ut.axis,{min:ft,max:pt,minDefined:mt,maxDefined:gt}=ut.getUserBounds();mt&&(lt=_limitValue(Math.min(_lookupByKey(dt,ht,ft).lo,it?st:_lookupByKey(rt,ht,ut.getPixelForValue(ft)).lo),0,st-1)),gt?ct=_limitValue(Math.max(_lookupByKey(dt,ut.axis,pt,!0).hi+1,it?0:_lookupByKey(rt,ht,ut.getPixelForValue(pt),!0).hi+1),lt,st)-lt:ct=st-lt}return{start:lt,count:ct}}function _scaleRangesChanged(nt){const{xScale:rt,yScale:it,_scaleRanges:st}=nt,lt={xmin:rt.min,xmax:rt.max,ymin:it.min,ymax:it.max};if(!st)return nt._scaleRanges=lt,!0;const ct=st.xmin!==rt.min||st.xmax!==rt.max||st.ymin!==it.min||st.ymax!==it.max;return Object.assign(st,lt),ct}const atEdge=nt=>nt===0||nt===1,elasticIn=(nt,rt,it)=>-(Math.pow(2,10*(nt-=1))*Math.sin((nt-rt)*TAU/it)),elasticOut=(nt,rt,it)=>Math.pow(2,-10*nt)*Math.sin((nt-rt)*TAU/it)+1,effects={linear:nt=>nt,easeInQuad:nt=>nt*nt,easeOutQuad:nt=>-nt*(nt-2),easeInOutQuad:nt=>(nt/=.5)<1?.5*nt*nt:-.5*(--nt*(nt-2)-1),easeInCubic:nt=>nt*nt*nt,easeOutCubic:nt=>(nt-=1)*nt*nt+1,easeInOutCubic:nt=>(nt/=.5)<1?.5*nt*nt*nt:.5*((nt-=2)*nt*nt+2),easeInQuart:nt=>nt*nt*nt*nt,easeOutQuart:nt=>-((nt-=1)*nt*nt*nt-1),easeInOutQuart:nt=>(nt/=.5)<1?.5*nt*nt*nt*nt:-.5*((nt-=2)*nt*nt*nt-2),easeInQuint:nt=>nt*nt*nt*nt*nt,easeOutQuint:nt=>(nt-=1)*nt*nt*nt*nt+1,easeInOutQuint:nt=>(nt/=.5)<1?.5*nt*nt*nt*nt*nt:.5*((nt-=2)*nt*nt*nt*nt+2),easeInSine:nt=>-Math.cos(nt*HALF_PI)+1,easeOutSine:nt=>Math.sin(nt*HALF_PI),easeInOutSine:nt=>-.5*(Math.cos(PI*nt)-1),easeInExpo:nt=>nt===0?0:Math.pow(2,10*(nt-1)),easeOutExpo:nt=>nt===1?1:-Math.pow(2,-10*nt)+1,easeInOutExpo:nt=>atEdge(nt)?nt:nt<.5?.5*Math.pow(2,10*(nt*2-1)):.5*(-Math.pow(2,-10*(nt*2-1))+2),easeInCirc:nt=>nt>=1?nt:-(Math.sqrt(1-nt*nt)-1),easeOutCirc:nt=>Math.sqrt(1-(nt-=1)*nt),easeInOutCirc:nt=>(nt/=.5)<1?-.5*(Math.sqrt(1-nt*nt)-1):.5*(Math.sqrt(1-(nt-=2)*nt)+1),easeInElastic:nt=>atEdge(nt)?nt:elasticIn(nt,.075,.3),easeOutElastic:nt=>atEdge(nt)?nt:elasticOut(nt,.075,.3),easeInOutElastic(nt){return atEdge(nt)?nt:nt<.5?.5*elasticIn(nt*2,.1125,.45):.5+.5*elasticOut(nt*2-1,.1125,.45)},easeInBack(nt){return nt*nt*((1.70158+1)*nt-1.70158)},easeOutBack(nt){return(nt-=1)*nt*((1.70158+1)*nt+1.70158)+1},easeInOutBack(nt){let rt=1.70158;return(nt/=.5)<1?.5*(nt*nt*(((rt*=1.525)+1)*nt-rt)):.5*((nt-=2)*nt*(((rt*=1.525)+1)*nt+rt)+2)},easeInBounce:nt=>1-effects.easeOutBounce(1-nt),easeOutBounce(nt){return nt<1/2.75?7.5625*nt*nt:nt<2/2.75?7.5625*(nt-=1.5/2.75)*nt+.75:nt<2.5/2.75?7.5625*(nt-=2.25/2.75)*nt+.9375:7.5625*(nt-=2.625/2.75)*nt+.984375},easeInOutBounce:nt=>nt<.5?effects.easeInBounce(nt*2)*.5:effects.easeOutBounce(nt*2-1)*.5+.5};function isPatternOrGradient(nt){if(nt&&typeof nt=="object"){const rt=nt.toString();return rt==="[object CanvasPattern]"||rt==="[object CanvasGradient]"}return!1}function color(nt){return isPatternOrGradient(nt)?nt:new Color$1(nt)}function getHoverColor(nt){return isPatternOrGradient(nt)?nt:new Color$1(nt).saturate(.5).darken(.1).hexString()}const numbers=["x","y","borderWidth","radius","tension"],colors=["color","borderColor","backgroundColor"];function applyAnimationsDefaults(nt){nt.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),nt.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:rt=>rt!=="onProgress"&&rt!=="onComplete"&&rt!=="fn"}),nt.set("animations",{colors:{type:"color",properties:colors},numbers:{type:"number",properties:numbers}}),nt.describe("animations",{_fallback:"animation"}),nt.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:rt=>rt|0}}}})}function applyLayoutsDefaults(nt){nt.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const intlCache=new Map;function getNumberFormat(nt,rt){rt=rt||{};const it=nt+JSON.stringify(rt);let st=intlCache.get(it);return st||(st=new Intl.NumberFormat(nt,rt),intlCache.set(it,st)),st}function formatNumber(nt,rt,it){return getNumberFormat(rt,it).format(nt)}const formatters={values(nt){return isArray(nt)?nt:""+nt},numeric(nt,rt,it){if(nt===0)return"0";const st=this.chart.options.locale;let lt,ct=nt;if(it.length>1){const ft=Math.max(Math.abs(it[0].value),Math.abs(it[it.length-1].value));(ft<1e-4||ft>1e15)&&(lt="scientific"),ct=calculateDelta(nt,it)}const ut=log10(Math.abs(ct)),dt=isNaN(ut)?1:Math.max(Math.min(-1*Math.floor(ut),20),0),ht={notation:lt,minimumFractionDigits:dt,maximumFractionDigits:dt};return Object.assign(ht,this.options.ticks.format),formatNumber(nt,st,ht)},logarithmic(nt,rt,it){if(nt===0)return"0";const st=it[rt].significand||nt/Math.pow(10,Math.floor(log10(nt)));return[1,2,3,5,10,15].includes(st)||rt>.8*it.length?formatters.numeric.call(this,nt,rt,it):""}};function calculateDelta(nt,rt){let it=rt.length>3?rt[2].value-rt[1].value:rt[1].value-rt[0].value;return Math.abs(it)>=1&&nt!==Math.floor(nt)&&(it=nt-Math.floor(nt)),it}var Ticks={formatters};function applyScaleDefaults(nt){nt.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(rt,it)=>it.lineWidth,tickColor:(rt,it)=>it.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),nt.route("scale.ticks","color","","color"),nt.route("scale.grid","color","","borderColor"),nt.route("scale.border","color","","borderColor"),nt.route("scale.title","color","","color"),nt.describe("scale",{_fallback:!1,_scriptable:rt=>!rt.startsWith("before")&&!rt.startsWith("after")&&rt!=="callback"&&rt!=="parser",_indexable:rt=>rt!=="borderDash"&&rt!=="tickBorderDash"&&rt!=="dash"}),nt.describe("scales",{_fallback:"scale"}),nt.describe("scale.ticks",{_scriptable:rt=>rt!=="backdropPadding"&&rt!=="callback",_indexable:rt=>rt!=="backdropPadding"})}const overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(nt,rt){if(!rt)return nt;const it=rt.split(".");for(let st=0,lt=it.length;st<lt;++st){const ct=it[st];nt=nt[ct]||(nt[ct]=Object.create(null))}return nt}function set(nt,rt,it){return typeof rt=="string"?merge(getScope$1(nt,rt),it):merge(getScope$1(nt,""),rt)}class Defaults{constructor(rt,it){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=st=>st.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(st,lt)=>getHoverColor(lt.backgroundColor),this.hoverBorderColor=(st,lt)=>getHoverColor(lt.borderColor),this.hoverColor=(st,lt)=>getHoverColor(lt.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(rt),this.apply(it)}set(rt,it){return set(this,rt,it)}get(rt){return getScope$1(this,rt)}describe(rt,it){return set(descriptors,rt,it)}override(rt,it){return set(overrides,rt,it)}route(rt,it,st,lt){const ct=getScope$1(this,rt),ut=getScope$1(this,st),dt="_"+it;Object.defineProperties(ct,{[dt]:{value:ct[it],writable:!0},[it]:{enumerable:!0,get(){const ht=this[dt],ft=ut[lt];return isObject(ht)?Object.assign({},ft,ht):valueOrDefault(ht,ft)},set(ht){this[dt]=ht}}})}apply(rt){rt.forEach(it=>it(this))}}var defaults=new Defaults({_scriptable:nt=>!nt.startsWith("on"),_indexable:nt=>nt!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[applyAnimationsDefaults,applyLayoutsDefaults,applyScaleDefaults]);function toFontString(nt){return!nt||isNullOrUndef(nt.size)||isNullOrUndef(nt.family)?null:(nt.style?nt.style+" ":"")+(nt.weight?nt.weight+" ":"")+nt.size+"px "+nt.family}function _measureText(nt,rt,it,st,lt){let ct=rt[lt];return ct||(ct=rt[lt]=nt.measureText(lt).width,it.push(lt)),ct>st&&(st=ct),st}function _longestText(nt,rt,it,st){st=st||{};let lt=st.data=st.data||{},ct=st.garbageCollect=st.garbageCollect||[];st.font!==rt&&(lt=st.data={},ct=st.garbageCollect=[],st.font=rt),nt.save(),nt.font=rt;let ut=0;const dt=it.length;let ht,ft,pt,mt,gt;for(ht=0;ht<dt;ht++)if(mt=it[ht],mt!=null&&!isArray(mt))ut=_measureText(nt,lt,ct,ut,mt);else if(isArray(mt))for(ft=0,pt=mt.length;ft<pt;ft++)gt=mt[ft],gt!=null&&!isArray(gt)&&(ut=_measureText(nt,lt,ct,ut,gt));nt.restore();const xt=ct.length/2;if(xt>it.length){for(ht=0;ht<xt;ht++)delete lt[ct[ht]];ct.splice(0,xt)}return ut}function _alignPixel(nt,rt,it){const st=nt.currentDevicePixelRatio,lt=it!==0?Math.max(it/2,.5):0;return Math.round((rt-lt)*st)/st+lt}function clearCanvas(nt,rt){rt=rt||nt.getContext("2d"),rt.save(),rt.resetTransform(),rt.clearRect(0,0,nt.width,nt.height),rt.restore()}function drawPoint(nt,rt,it,st){drawPointLegend(nt,rt,it,st,null)}function drawPointLegend(nt,rt,it,st,lt){let ct,ut,dt,ht,ft,pt,mt,gt;const xt=rt.pointStyle,yt=rt.rotation,vt=rt.radius;let St=(yt||0)*RAD_PER_DEG;if(xt&&typeof xt=="object"&&(ct=xt.toString(),ct==="[object HTMLImageElement]"||ct==="[object HTMLCanvasElement]")){nt.save(),nt.translate(it,st),nt.rotate(St),nt.drawImage(xt,-xt.width/2,-xt.height/2,xt.width,xt.height),nt.restore();return}if(!(isNaN(vt)||vt<=0)){switch(nt.beginPath(),xt){default:lt?nt.ellipse(it,st,lt/2,vt,0,0,TAU):nt.arc(it,st,vt,0,TAU),nt.closePath();break;case"triangle":pt=lt?lt/2:vt,nt.moveTo(it+Math.sin(St)*pt,st-Math.cos(St)*vt),St+=TWO_THIRDS_PI,nt.lineTo(it+Math.sin(St)*pt,st-Math.cos(St)*vt),St+=TWO_THIRDS_PI,nt.lineTo(it+Math.sin(St)*pt,st-Math.cos(St)*vt),nt.closePath();break;case"rectRounded":ft=vt*.516,ht=vt-ft,ut=Math.cos(St+QUARTER_PI)*ht,mt=Math.cos(St+QUARTER_PI)*(lt?lt/2-ft:ht),dt=Math.sin(St+QUARTER_PI)*ht,gt=Math.sin(St+QUARTER_PI)*(lt?lt/2-ft:ht),nt.arc(it-mt,st-dt,ft,St-PI,St-HALF_PI),nt.arc(it+gt,st-ut,ft,St-HALF_PI,St),nt.arc(it+mt,st+dt,ft,St,St+HALF_PI),nt.arc(it-gt,st+ut,ft,St+HALF_PI,St+PI),nt.closePath();break;case"rect":if(!yt){ht=Math.SQRT1_2*vt,pt=lt?lt/2:ht,nt.rect(it-pt,st-ht,2*pt,2*ht);break}St+=QUARTER_PI;case"rectRot":mt=Math.cos(St)*(lt?lt/2:vt),ut=Math.cos(St)*vt,dt=Math.sin(St)*vt,gt=Math.sin(St)*(lt?lt/2:vt),nt.moveTo(it-mt,st-dt),nt.lineTo(it+gt,st-ut),nt.lineTo(it+mt,st+dt),nt.lineTo(it-gt,st+ut),nt.closePath();break;case"crossRot":St+=QUARTER_PI;case"cross":mt=Math.cos(St)*(lt?lt/2:vt),ut=Math.cos(St)*vt,dt=Math.sin(St)*vt,gt=Math.sin(St)*(lt?lt/2:vt),nt.moveTo(it-mt,st-dt),nt.lineTo(it+mt,st+dt),nt.moveTo(it+gt,st-ut),nt.lineTo(it-gt,st+ut);break;case"star":mt=Math.cos(St)*(lt?lt/2:vt),ut=Math.cos(St)*vt,dt=Math.sin(St)*vt,gt=Math.sin(St)*(lt?lt/2:vt),nt.moveTo(it-mt,st-dt),nt.lineTo(it+mt,st+dt),nt.moveTo(it+gt,st-ut),nt.lineTo(it-gt,st+ut),St+=QUARTER_PI,mt=Math.cos(St)*(lt?lt/2:vt),ut=Math.cos(St)*vt,dt=Math.sin(St)*vt,gt=Math.sin(St)*(lt?lt/2:vt),nt.moveTo(it-mt,st-dt),nt.lineTo(it+mt,st+dt),nt.moveTo(it+gt,st-ut),nt.lineTo(it-gt,st+ut);break;case"line":ut=lt?lt/2:Math.cos(St)*vt,dt=Math.sin(St)*vt,nt.moveTo(it-ut,st-dt),nt.lineTo(it+ut,st+dt);break;case"dash":nt.moveTo(it,st),nt.lineTo(it+Math.cos(St)*(lt?lt/2:vt),st+Math.sin(St)*vt);break;case!1:nt.closePath();break}nt.fill(),rt.borderWidth>0&&nt.stroke()}}function _isPointInArea(nt,rt,it){return it=it||.5,!rt||nt&&nt.x>rt.left-it&&nt.x<rt.right+it&&nt.y>rt.top-it&&nt.y<rt.bottom+it}function clipArea(nt,rt){nt.save(),nt.beginPath(),nt.rect(rt.left,rt.top,rt.right-rt.left,rt.bottom-rt.top),nt.clip()}function unclipArea(nt){nt.restore()}function _steppedLineTo(nt,rt,it,st,lt){if(!rt)return nt.lineTo(it.x,it.y);if(lt==="middle"){const ct=(rt.x+it.x)/2;nt.lineTo(ct,rt.y),nt.lineTo(ct,it.y)}else lt==="after"!=!!st?nt.lineTo(rt.x,it.y):nt.lineTo(it.x,rt.y);nt.lineTo(it.x,it.y)}function _bezierCurveTo(nt,rt,it,st){if(!rt)return nt.lineTo(it.x,it.y);nt.bezierCurveTo(st?rt.cp1x:rt.cp2x,st?rt.cp1y:rt.cp2y,st?it.cp2x:it.cp1x,st?it.cp2y:it.cp1y,it.x,it.y)}function setRenderOpts(nt,rt){rt.translation&&nt.translate(rt.translation[0],rt.translation[1]),isNullOrUndef(rt.rotation)||nt.rotate(rt.rotation),rt.color&&(nt.fillStyle=rt.color),rt.textAlign&&(nt.textAlign=rt.textAlign),rt.textBaseline&&(nt.textBaseline=rt.textBaseline)}function decorateText(nt,rt,it,st,lt){if(lt.strikethrough||lt.underline){const ct=nt.measureText(st),ut=rt-ct.actualBoundingBoxLeft,dt=rt+ct.actualBoundingBoxRight,ht=it-ct.actualBoundingBoxAscent,ft=it+ct.actualBoundingBoxDescent,pt=lt.strikethrough?(ht+ft)/2:ft;nt.strokeStyle=nt.fillStyle,nt.beginPath(),nt.lineWidth=lt.decorationWidth||2,nt.moveTo(ut,pt),nt.lineTo(dt,pt),nt.stroke()}}function drawBackdrop(nt,rt){const it=nt.fillStyle;nt.fillStyle=rt.color,nt.fillRect(rt.left,rt.top,rt.width,rt.height),nt.fillStyle=it}function renderText(nt,rt,it,st,lt,ct={}){const ut=isArray(rt)?rt:[rt],dt=ct.strokeWidth>0&&ct.strokeColor!=="";let ht,ft;for(nt.save(),nt.font=lt.string,setRenderOpts(nt,ct),ht=0;ht<ut.length;++ht)ft=ut[ht],ct.backdrop&&drawBackdrop(nt,ct.backdrop),dt&&(ct.strokeColor&&(nt.strokeStyle=ct.strokeColor),isNullOrUndef(ct.strokeWidth)||(nt.lineWidth=ct.strokeWidth),nt.strokeText(ft,it,st,ct.maxWidth)),nt.fillText(ft,it,st,ct.maxWidth),decorateText(nt,it,st,ft,ct),st+=Number(lt.lineHeight);nt.restore()}function addRoundedRectPath(nt,rt){const{x:it,y:st,w:lt,h:ct,radius:ut}=rt;nt.arc(it+ut.topLeft,st+ut.topLeft,ut.topLeft,1.5*PI,PI,!0),nt.lineTo(it,st+ct-ut.bottomLeft),nt.arc(it+ut.bottomLeft,st+ct-ut.bottomLeft,ut.bottomLeft,PI,HALF_PI,!0),nt.lineTo(it+lt-ut.bottomRight,st+ct),nt.arc(it+lt-ut.bottomRight,st+ct-ut.bottomRight,ut.bottomRight,HALF_PI,0,!0),nt.lineTo(it+lt,st+ut.topRight),nt.arc(it+lt-ut.topRight,st+ut.topRight,ut.topRight,0,-HALF_PI,!0),nt.lineTo(it+ut.topLeft,st)}const LINE_HEIGHT=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,FONT_STYLE=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function toLineHeight(nt,rt){const it=(""+nt).match(LINE_HEIGHT);if(!it||it[1]==="normal")return rt*1.2;switch(nt=+it[2],it[3]){case"px":return nt;case"%":nt/=100;break}return rt*nt}const numberOrZero=nt=>+nt||0;function _readValueToProps(nt,rt){const it={},st=isObject(rt),lt=st?Object.keys(rt):rt,ct=isObject(nt)?st?ut=>valueOrDefault(nt[ut],nt[rt[ut]]):ut=>nt[ut]:()=>nt;for(const ut of lt)it[ut]=numberOrZero(ct(ut));return it}function toTRBL(nt){return _readValueToProps(nt,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(nt){return _readValueToProps(nt,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(nt){const rt=toTRBL(nt);return rt.width=rt.left+rt.right,rt.height=rt.top+rt.bottom,rt}function toFont(nt,rt){nt=nt||{},rt=rt||defaults.font;let it=valueOrDefault(nt.size,rt.size);typeof it=="string"&&(it=parseInt(it,10));let st=valueOrDefault(nt.style,rt.style);st&&!(""+st).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+st+'"'),st=void 0);const lt={family:valueOrDefault(nt.family,rt.family),lineHeight:toLineHeight(valueOrDefault(nt.lineHeight,rt.lineHeight),it),size:it,style:st,weight:valueOrDefault(nt.weight,rt.weight),string:""};return lt.string=toFontString(lt),lt}function resolve$1(nt,rt,it,st){let lt=!0,ct,ut,dt;for(ct=0,ut=nt.length;ct<ut;++ct)if(dt=nt[ct],dt!==void 0&&(rt!==void 0&&typeof dt=="function"&&(dt=dt(rt),lt=!1),it!==void 0&&isArray(dt)&&(dt=dt[it%dt.length],lt=!1),dt!==void 0))return st&&!lt&&(st.cacheable=!1),dt}function _addGrace(nt,rt,it){const{min:st,max:lt}=nt,ct=toDimension(rt,(lt-st)/2),ut=(dt,ht)=>it&&dt===0?0:dt+ht;return{min:ut(st,-Math.abs(ct)),max:ut(lt,ct)}}function createContext(nt,rt){return Object.assign(Object.create(nt),rt)}function _createResolver(nt,rt=[""],it,st,lt=()=>nt[0]){const ct=it||nt;typeof st>"u"&&(st=_resolve("_fallback",nt));const ut={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:nt,_rootScopes:ct,_fallback:st,_getTarget:lt,override:dt=>_createResolver([dt,...nt],rt,ct,st)};return new Proxy(ut,{deleteProperty(dt,ht){return delete dt[ht],delete dt._keys,delete nt[0][ht],!0},get(dt,ht){return _cached(dt,ht,()=>_resolveWithPrefixes(ht,rt,nt,dt))},getOwnPropertyDescriptor(dt,ht){return Reflect.getOwnPropertyDescriptor(dt._scopes[0],ht)},getPrototypeOf(){return Reflect.getPrototypeOf(nt[0])},has(dt,ht){return getKeysFromAllScopes(dt).includes(ht)},ownKeys(dt){return getKeysFromAllScopes(dt)},set(dt,ht,ft){const pt=dt._storage||(dt._storage=lt());return dt[ht]=pt[ht]=ft,delete dt._keys,!0}})}function _attachContext(nt,rt,it,st){const lt={_cacheable:!1,_proxy:nt,_context:rt,_subProxy:it,_stack:new Set,_descriptors:_descriptors(nt,st),setContext:ct=>_attachContext(nt,ct,it,st),override:ct=>_attachContext(nt.override(ct),rt,it,st)};return new Proxy(lt,{deleteProperty(ct,ut){return delete ct[ut],delete nt[ut],!0},get(ct,ut,dt){return _cached(ct,ut,()=>_resolveWithContext(ct,ut,dt))},getOwnPropertyDescriptor(ct,ut){return ct._descriptors.allKeys?Reflect.has(nt,ut)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(nt,ut)},getPrototypeOf(){return Reflect.getPrototypeOf(nt)},has(ct,ut){return Reflect.has(nt,ut)},ownKeys(){return Reflect.ownKeys(nt)},set(ct,ut,dt){return nt[ut]=dt,delete ct[ut],!0}})}function _descriptors(nt,rt={scriptable:!0,indexable:!0}){const{_scriptable:it=rt.scriptable,_indexable:st=rt.indexable,_allKeys:lt=rt.allKeys}=nt;return{allKeys:lt,scriptable:it,indexable:st,isScriptable:isFunction(it)?it:()=>it,isIndexable:isFunction(st)?st:()=>st}}const readKey=(nt,rt)=>nt?nt+_capitalize(rt):rt,needsSubResolver=(nt,rt)=>isObject(rt)&&nt!=="adapters"&&(Object.getPrototypeOf(rt)===null||rt.constructor===Object);function _cached(nt,rt,it){if(Object.prototype.hasOwnProperty.call(nt,rt))return nt[rt];const st=it();return nt[rt]=st,st}function _resolveWithContext(nt,rt,it){const{_proxy:st,_context:lt,_subProxy:ct,_descriptors:ut}=nt;let dt=st[rt];return isFunction(dt)&&ut.isScriptable(rt)&&(dt=_resolveScriptable(rt,dt,nt,it)),isArray(dt)&&dt.length&&(dt=_resolveArray(rt,dt,nt,ut.isIndexable)),needsSubResolver(rt,dt)&&(dt=_attachContext(dt,lt,ct&&ct[rt],ut)),dt}function _resolveScriptable(nt,rt,it,st){const{_proxy:lt,_context:ct,_subProxy:ut,_stack:dt}=it;if(dt.has(nt))throw new Error("Recursion detected: "+Array.from(dt).join("->")+"->"+nt);dt.add(nt);let ht=rt(ct,ut||st);return dt.delete(nt),needsSubResolver(nt,ht)&&(ht=createSubResolver(lt._scopes,lt,nt,ht)),ht}function _resolveArray(nt,rt,it,st){const{_proxy:lt,_context:ct,_subProxy:ut,_descriptors:dt}=it;if(typeof ct.index<"u"&&st(nt))return rt[ct.index%rt.length];if(isObject(rt[0])){const ht=rt,ft=lt._scopes.filter(pt=>pt!==ht);rt=[];for(const pt of ht){const mt=createSubResolver(ft,lt,nt,pt);rt.push(_attachContext(mt,ct,ut&&ut[nt],dt))}}return rt}function resolveFallback(nt,rt,it){return isFunction(nt)?nt(rt,it):nt}const getScope=(nt,rt)=>nt===!0?rt:typeof nt=="string"?resolveObjectKey(rt,nt):void 0;function addScopes(nt,rt,it,st,lt){for(const ct of rt){const ut=getScope(it,ct);if(ut){nt.add(ut);const dt=resolveFallback(ut._fallback,it,lt);if(typeof dt<"u"&&dt!==it&&dt!==st)return dt}else if(ut===!1&&typeof st<"u"&&it!==st)return null}return!1}function createSubResolver(nt,rt,it,st){const lt=rt._rootScopes,ct=resolveFallback(rt._fallback,it,st),ut=[...nt,...lt],dt=new Set;dt.add(st);let ht=addScopesFromKey(dt,ut,it,ct||it,st);return ht===null||typeof ct<"u"&&ct!==it&&(ht=addScopesFromKey(dt,ut,ct,ht,st),ht===null)?!1:_createResolver(Array.from(dt),[""],lt,ct,()=>subGetTarget(rt,it,st))}function addScopesFromKey(nt,rt,it,st,lt){for(;it;)it=addScopes(nt,rt,it,st,lt);return it}function subGetTarget(nt,rt,it){const st=nt._getTarget();rt in st||(st[rt]={});const lt=st[rt];return isArray(lt)&&isObject(it)?it:lt||{}}function _resolveWithPrefixes(nt,rt,it,st){let lt;for(const ct of rt)if(lt=_resolve(readKey(ct,nt),it),typeof lt<"u")return needsSubResolver(nt,lt)?createSubResolver(it,st,nt,lt):lt}function _resolve(nt,rt){for(const it of rt){if(!it)continue;const st=it[nt];if(typeof st<"u")return st}}function getKeysFromAllScopes(nt){let rt=nt._keys;return rt||(rt=nt._keys=resolveKeysFromAllScopes(nt._scopes)),rt}function resolveKeysFromAllScopes(nt){const rt=new Set;for(const it of nt)for(const st of Object.keys(it).filter(lt=>!lt.startsWith("_")))rt.add(st);return Array.from(rt)}const EPSILON=Number.EPSILON||1e-14,getPoint=(nt,rt)=>rt<nt.length&&!nt[rt].skip&&nt[rt],getValueAxis=nt=>nt==="x"?"y":"x";function splineCurve(nt,rt,it,st){const lt=nt.skip?rt:nt,ct=rt,ut=it.skip?rt:it,dt=distanceBetweenPoints(ct,lt),ht=distanceBetweenPoints(ut,ct);let ft=dt/(dt+ht),pt=ht/(dt+ht);ft=isNaN(ft)?0:ft,pt=isNaN(pt)?0:pt;const mt=st*ft,gt=st*pt;return{previous:{x:ct.x-mt*(ut.x-lt.x),y:ct.y-mt*(ut.y-lt.y)},next:{x:ct.x+gt*(ut.x-lt.x),y:ct.y+gt*(ut.y-lt.y)}}}function monotoneAdjust(nt,rt,it){const st=nt.length;let lt,ct,ut,dt,ht,ft=getPoint(nt,0);for(let pt=0;pt<st-1;++pt)if(ht=ft,ft=getPoint(nt,pt+1),!(!ht||!ft)){if(almostEquals(rt[pt],0,EPSILON)){it[pt]=it[pt+1]=0;continue}lt=it[pt]/rt[pt],ct=it[pt+1]/rt[pt],dt=Math.pow(lt,2)+Math.pow(ct,2),!(dt<=9)&&(ut=3/Math.sqrt(dt),it[pt]=lt*ut*rt[pt],it[pt+1]=ct*ut*rt[pt])}}function monotoneCompute(nt,rt,it="x"){const st=getValueAxis(it),lt=nt.length;let ct,ut,dt,ht=getPoint(nt,0);for(let ft=0;ft<lt;++ft){if(ut=dt,dt=ht,ht=getPoint(nt,ft+1),!dt)continue;const pt=dt[it],mt=dt[st];ut&&(ct=(pt-ut[it])/3,dt[`cp1${it}`]=pt-ct,dt[`cp1${st}`]=mt-ct*rt[ft]),ht&&(ct=(ht[it]-pt)/3,dt[`cp2${it}`]=pt+ct,dt[`cp2${st}`]=mt+ct*rt[ft])}}function splineCurveMonotone(nt,rt="x"){const it=getValueAxis(rt),st=nt.length,lt=Array(st).fill(0),ct=Array(st);let ut,dt,ht,ft=getPoint(nt,0);for(ut=0;ut<st;++ut)if(dt=ht,ht=ft,ft=getPoint(nt,ut+1),!!ht){if(ft){const pt=ft[rt]-ht[rt];lt[ut]=pt!==0?(ft[it]-ht[it])/pt:0}ct[ut]=dt?ft?sign$1(lt[ut-1])!==sign$1(lt[ut])?0:(lt[ut-1]+lt[ut])/2:lt[ut-1]:lt[ut]}monotoneAdjust(nt,lt,ct),monotoneCompute(nt,ct,rt)}function capControlPoint(nt,rt,it){return Math.max(Math.min(nt,it),rt)}function capBezierPoints(nt,rt){let it,st,lt,ct,ut,dt=_isPointInArea(nt[0],rt);for(it=0,st=nt.length;it<st;++it)ut=ct,ct=dt,dt=it<st-1&&_isPointInArea(nt[it+1],rt),ct&&(lt=nt[it],ut&&(lt.cp1x=capControlPoint(lt.cp1x,rt.left,rt.right),lt.cp1y=capControlPoint(lt.cp1y,rt.top,rt.bottom)),dt&&(lt.cp2x=capControlPoint(lt.cp2x,rt.left,rt.right),lt.cp2y=capControlPoint(lt.cp2y,rt.top,rt.bottom)))}function _updateBezierControlPoints(nt,rt,it,st,lt){let ct,ut,dt,ht;if(rt.spanGaps&&(nt=nt.filter(ft=>!ft.skip)),rt.cubicInterpolationMode==="monotone")splineCurveMonotone(nt,lt);else{let ft=st?nt[nt.length-1]:nt[0];for(ct=0,ut=nt.length;ct<ut;++ct)dt=nt[ct],ht=splineCurve(ft,dt,nt[Math.min(ct+1,ut-(st?0:1))%ut],rt.tension),dt.cp1x=ht.previous.x,dt.cp1y=ht.previous.y,dt.cp2x=ht.next.x,dt.cp2y=ht.next.y,ft=dt}rt.capBezierPoints&&capBezierPoints(nt,it)}function _isDomSupported(){return typeof window<"u"&&typeof document<"u"}function _getParentNode(nt){let rt=nt.parentNode;return rt&&rt.toString()==="[object ShadowRoot]"&&(rt=rt.host),rt}function parseMaxStyle(nt,rt,it){let st;return typeof nt=="string"?(st=parseInt(nt,10),nt.indexOf("%")!==-1&&(st=st/100*rt.parentNode[it])):st=nt,st}const getComputedStyle$2=nt=>nt.ownerDocument.defaultView.getComputedStyle(nt,null);function getStyle(nt,rt){return getComputedStyle$2(nt).getPropertyValue(rt)}const positions=["top","right","bottom","left"];function getPositionedStyle(nt,rt,it){const st={};it=it?"-"+it:"";for(let lt=0;lt<4;lt++){const ct=positions[lt];st[ct]=parseFloat(nt[rt+"-"+ct+it])||0}return st.width=st.left+st.right,st.height=st.top+st.bottom,st}const useOffsetPos=(nt,rt,it)=>(nt>0||rt>0)&&(!it||!it.shadowRoot);function getCanvasPosition(nt,rt){const it=nt.touches,st=it&&it.length?it[0]:nt,{offsetX:lt,offsetY:ct}=st;let ut=!1,dt,ht;if(useOffsetPos(lt,ct,nt.target))dt=lt,ht=ct;else{const ft=rt.getBoundingClientRect();dt=st.clientX-ft.left,ht=st.clientY-ft.top,ut=!0}return{x:dt,y:ht,box:ut}}function getRelativePosition(nt,rt){if("native"in nt)return nt;const{canvas:it,currentDevicePixelRatio:st}=rt,lt=getComputedStyle$2(it),ct=lt.boxSizing==="border-box",ut=getPositionedStyle(lt,"padding"),dt=getPositionedStyle(lt,"border","width"),{x:ht,y:ft,box:pt}=getCanvasPosition(nt,it),mt=ut.left+(pt&&dt.left),gt=ut.top+(pt&&dt.top);let{width:xt,height:yt}=rt;return ct&&(xt-=ut.width+dt.width,yt-=ut.height+dt.height),{x:Math.round((ht-mt)/xt*it.width/st),y:Math.round((ft-gt)/yt*it.height/st)}}function getContainerSize(nt,rt,it){let st,lt;if(rt===void 0||it===void 0){const ct=_getParentNode(nt);if(!ct)rt=nt.clientWidth,it=nt.clientHeight;else{const ut=ct.getBoundingClientRect(),dt=getComputedStyle$2(ct),ht=getPositionedStyle(dt,"border","width"),ft=getPositionedStyle(dt,"padding");rt=ut.width-ft.width-ht.width,it=ut.height-ft.height-ht.height,st=parseMaxStyle(dt.maxWidth,ct,"clientWidth"),lt=parseMaxStyle(dt.maxHeight,ct,"clientHeight")}}return{width:rt,height:it,maxWidth:st||INFINITY,maxHeight:lt||INFINITY}}const round1=nt=>Math.round(nt*10)/10;function getMaximumSize(nt,rt,it,st){const lt=getComputedStyle$2(nt),ct=getPositionedStyle(lt,"margin"),ut=parseMaxStyle(lt.maxWidth,nt,"clientWidth")||INFINITY,dt=parseMaxStyle(lt.maxHeight,nt,"clientHeight")||INFINITY,ht=getContainerSize(nt,rt,it);let{width:ft,height:pt}=ht;if(lt.boxSizing==="content-box"){const gt=getPositionedStyle(lt,"border","width"),xt=getPositionedStyle(lt,"padding");ft-=xt.width+gt.width,pt-=xt.height+gt.height}return ft=Math.max(0,ft-ct.width),pt=Math.max(0,st?ft/st:pt-ct.height),ft=round1(Math.min(ft,ut,ht.maxWidth)),pt=round1(Math.min(pt,dt,ht.maxHeight)),ft&&!pt&&(pt=round1(ft/2)),(rt!==void 0||it!==void 0)&&st&&ht.height&&pt>ht.height&&(pt=ht.height,ft=round1(Math.floor(pt*st))),{width:ft,height:pt}}function retinaScale(nt,rt,it){const st=rt||1,lt=Math.floor(nt.height*st),ct=Math.floor(nt.width*st);nt.height=Math.floor(nt.height),nt.width=Math.floor(nt.width);const ut=nt.canvas;return ut.style&&(it||!ut.style.height&&!ut.style.width)&&(ut.style.height=`${nt.height}px`,ut.style.width=`${nt.width}px`),nt.currentDevicePixelRatio!==st||ut.height!==lt||ut.width!==ct?(nt.currentDevicePixelRatio=st,ut.height=lt,ut.width=ct,nt.ctx.setTransform(st,0,0,st,0,0),!0):!1}const supportsEventListenerOptions=function(){let nt=!1;try{const rt={get passive(){return nt=!0,!1}};_isDomSupported()&&(window.addEventListener("test",null,rt),window.removeEventListener("test",null,rt))}catch{}return nt}();function readUsedSize(nt,rt){const it=getStyle(nt,rt),st=it&&it.match(/^(\d+)(\.\d+)?px$/);return st?+st[1]:void 0}function _pointInLine(nt,rt,it,st){return{x:nt.x+it*(rt.x-nt.x),y:nt.y+it*(rt.y-nt.y)}}function _steppedInterpolation(nt,rt,it,st){return{x:nt.x+it*(rt.x-nt.x),y:st==="middle"?it<.5?nt.y:rt.y:st==="after"?it<1?nt.y:rt.y:it>0?rt.y:nt.y}}function _bezierInterpolation(nt,rt,it,st){const lt={x:nt.cp2x,y:nt.cp2y},ct={x:rt.cp1x,y:rt.cp1y},ut=_pointInLine(nt,lt,it),dt=_pointInLine(lt,ct,it),ht=_pointInLine(ct,rt,it),ft=_pointInLine(ut,dt,it),pt=_pointInLine(dt,ht,it);return _pointInLine(ft,pt,it)}const getRightToLeftAdapter=function(nt,rt){return{x(it){return nt+nt+rt-it},setWidth(it){rt=it},textAlign(it){return it==="center"?it:it==="right"?"left":"right"},xPlus(it,st){return it-st},leftForLtr(it,st){return it-st}}},getLeftToRightAdapter=function(){return{x(nt){return nt},setWidth(nt){},textAlign(nt){return nt},xPlus(nt,rt){return nt+rt},leftForLtr(nt,rt){return nt}}};function getRtlAdapter(nt,rt,it){return nt?getRightToLeftAdapter(rt,it):getLeftToRightAdapter()}function overrideTextDirection(nt,rt){let it,st;(rt==="ltr"||rt==="rtl")&&(it=nt.canvas.style,st=[it.getPropertyValue("direction"),it.getPropertyPriority("direction")],it.setProperty("direction",rt,"important"),nt.prevTextDirection=st)}function restoreTextDirection(nt,rt){rt!==void 0&&(delete nt.prevTextDirection,nt.canvas.style.setProperty("direction",rt[0],rt[1]))}function propertyFn(nt){return nt==="angle"?{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle}:{between:_isBetween,compare:(rt,it)=>rt-it,normalize:rt=>rt}}function normalizeSegment({start:nt,end:rt,count:it,loop:st,style:lt}){return{start:nt%it,end:rt%it,loop:st&&(rt-nt+1)%it===0,style:lt}}function getSegment(nt,rt,it){const{property:st,start:lt,end:ct}=it,{between:ut,normalize:dt}=propertyFn(st),ht=rt.length;let{start:ft,end:pt,loop:mt}=nt,gt,xt;if(mt){for(ft+=ht,pt+=ht,gt=0,xt=ht;gt<xt&&ut(dt(rt[ft%ht][st]),lt,ct);++gt)ft--,pt--;ft%=ht,pt%=ht}return pt<ft&&(pt+=ht),{start:ft,end:pt,loop:mt,style:nt.style}}function _boundSegment(nt,rt,it){if(!it)return[nt];const{property:st,start:lt,end:ct}=it,ut=rt.length,{compare:dt,between:ht,normalize:ft}=propertyFn(st),{start:pt,end:mt,loop:gt,style:xt}=getSegment(nt,rt,it),yt=[];let vt=!1,St=null,wt,Et,Rt;const Tt=()=>ht(lt,Rt,wt)&&dt(lt,Rt)!==0,It=()=>dt(ct,wt)===0||ht(ct,Rt,wt),At=()=>vt||Tt(),Dt=()=>!vt||It();for(let jt=pt,Ft=pt;jt<=mt;++jt)Et=rt[jt%ut],!Et.skip&&(wt=ft(Et[st]),wt!==Rt&&(vt=ht(wt,lt,ct),St===null&&At()&&(St=dt(wt,lt)===0?jt:Ft),St!==null&&Dt()&&(yt.push(normalizeSegment({start:St,end:jt,loop:gt,count:ut,style:xt})),St=null),Ft=jt,Rt=wt));return St!==null&&yt.push(normalizeSegment({start:St,end:mt,loop:gt,count:ut,style:xt})),yt}function _boundSegments(nt,rt){const it=[],st=nt.segments;for(let lt=0;lt<st.length;lt++){const ct=_boundSegment(st[lt],nt.points,rt);ct.length&&it.push(...ct)}return it}function findStartAndEnd(nt,rt,it,st){let lt=0,ct=rt-1;if(it&&!st)for(;lt<rt&&!nt[lt].skip;)lt++;for(;lt<rt&&nt[lt].skip;)lt++;for(lt%=rt,it&&(ct+=lt);ct>lt&&nt[ct%rt].skip;)ct--;return ct%=rt,{start:lt,end:ct}}function solidSegments(nt,rt,it,st){const lt=nt.length,ct=[];let ut=rt,dt=nt[rt],ht;for(ht=rt+1;ht<=it;++ht){const ft=nt[ht%lt];ft.skip||ft.stop?dt.skip||(st=!1,ct.push({start:rt%lt,end:(ht-1)%lt,loop:st}),rt=ut=ft.stop?ht:null):(ut=ht,dt.skip&&(rt=ht)),dt=ft}return ut!==null&&ct.push({start:rt%lt,end:ut%lt,loop:st}),ct}function _computeSegments(nt,rt){const it=nt.points,st=nt.options.spanGaps,lt=it.length;if(!lt)return[];const ct=!!nt._loop,{start:ut,end:dt}=findStartAndEnd(it,lt,ct,st);if(st===!0)return splitByStyles(nt,[{start:ut,end:dt,loop:ct}],it,rt);const ht=dt<ut?dt+lt:dt,ft=!!nt._fullLoop&&ut===0&&dt===lt-1;return splitByStyles(nt,solidSegments(it,ut,ht,ft),it,rt)}function splitByStyles(nt,rt,it,st){return!st||!st.setContext||!it?rt:doSplitByStyles(nt,rt,it,st)}function doSplitByStyles(nt,rt,it,st){const lt=nt._chart.getContext(),ct=readStyle(nt.options),{_datasetIndex:ut,options:{spanGaps:dt}}=nt,ht=it.length,ft=[];let pt=ct,mt=rt[0].start,gt=mt;function xt(yt,vt,St,wt){const Et=dt?-1:1;if(yt!==vt){for(yt+=ht;it[yt%ht].skip;)yt-=Et;for(;it[vt%ht].skip;)vt+=Et;yt%ht!==vt%ht&&(ft.push({start:yt%ht,end:vt%ht,loop:St,style:wt}),pt=wt,mt=vt%ht)}}for(const yt of rt){mt=dt?mt:yt.start;let vt=it[mt%ht],St;for(gt=mt+1;gt<=yt.end;gt++){const wt=it[gt%ht];St=readStyle(st.setContext(createContext(lt,{type:"segment",p0:vt,p1:wt,p0DataIndex:(gt-1)%ht,p1DataIndex:gt%ht,datasetIndex:ut}))),styleChanged(St,pt)&&xt(mt,gt-1,yt.loop,pt),vt=wt,pt=St}mt<gt-1&&xt(mt,gt-1,yt.loop,pt)}return ft}function readStyle(nt){return{backgroundColor:nt.backgroundColor,borderCapStyle:nt.borderCapStyle,borderDash:nt.borderDash,borderDashOffset:nt.borderDashOffset,borderJoinStyle:nt.borderJoinStyle,borderWidth:nt.borderWidth,borderColor:nt.borderColor}}function styleChanged(nt,rt){if(!rt)return!1;const it=[],st=function(lt,ct){return isPatternOrGradient(ct)?(it.includes(ct)||it.push(ct),it.indexOf(ct)):ct};return JSON.stringify(nt,st)!==JSON.stringify(rt,st)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(rt,it,st,lt){const ct=it.listeners[lt],ut=it.duration;ct.forEach(dt=>dt({chart:rt,initial:it.initial,numSteps:ut,currentStep:Math.min(st-it.start,ut)}))}_refresh(){this._request||(this._running=!0,this._request=requestAnimFrame.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(rt=Date.now()){let it=0;this._charts.forEach((st,lt)=>{if(!st.running||!st.items.length)return;const ct=st.items;let ut=ct.length-1,dt=!1,ht;for(;ut>=0;--ut)ht=ct[ut],ht._active?(ht._total>st.duration&&(st.duration=ht._total),ht.tick(rt),dt=!0):(ct[ut]=ct[ct.length-1],ct.pop());dt&&(lt.draw(),this._notify(lt,st,rt,"progress")),ct.length||(st.running=!1,this._notify(lt,st,rt,"complete"),st.initial=!1),it+=ct.length}),this._lastDate=rt,it===0&&(this._running=!1)}_getAnims(rt){const it=this._charts;let st=it.get(rt);return st||(st={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},it.set(rt,st)),st}listen(rt,it,st){this._getAnims(rt).listeners[it].push(st)}add(rt,it){!it||!it.length||this._getAnims(rt).items.push(...it)}has(rt){return this._getAnims(rt).items.length>0}start(rt){const it=this._charts.get(rt);it&&(it.running=!0,it.start=Date.now(),it.duration=it.items.reduce((st,lt)=>Math.max(st,lt._duration),0),this._refresh())}running(rt){if(!this._running)return!1;const it=this._charts.get(rt);return!(!it||!it.running||!it.items.length)}stop(rt){const it=this._charts.get(rt);if(!it||!it.items.length)return;const st=it.items;let lt=st.length-1;for(;lt>=0;--lt)st[lt].cancel();it.items=[],this._notify(rt,it,Date.now(),"complete")}remove(rt){return this._charts.delete(rt)}}var animator=new Animator;const transparent="transparent",interpolators={boolean(nt,rt,it){return it>.5?rt:nt},color(nt,rt,it){const st=color(nt||transparent),lt=st.valid&&color(rt||transparent);return lt&&lt.valid?lt.mix(st,it).hexString():rt},number(nt,rt,it){return nt+(rt-nt)*it}};class Animation{constructor(rt,it,st,lt){const ct=it[st];lt=resolve$1([rt.to,lt,ct,rt.from]);const ut=resolve$1([rt.from,ct,lt]);this._active=!0,this._fn=rt.fn||interpolators[rt.type||typeof ut],this._easing=effects[rt.easing]||effects.linear,this._start=Math.floor(Date.now()+(rt.delay||0)),this._duration=this._total=Math.floor(rt.duration),this._loop=!!rt.loop,this._target=it,this._prop=st,this._from=ut,this._to=lt,this._promises=void 0}active(){return this._active}update(rt,it,st){if(this._active){this._notify(!1);const lt=this._target[this._prop],ct=st-this._start,ut=this._duration-ct;this._start=st,this._duration=Math.floor(Math.max(ut,rt.duration)),this._total+=ct,this._loop=!!rt.loop,this._to=resolve$1([rt.to,it,lt,rt.from]),this._from=resolve$1([rt.from,lt,it])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(rt){const it=rt-this._start,st=this._duration,lt=this._prop,ct=this._from,ut=this._loop,dt=this._to;let ht;if(this._active=ct!==dt&&(ut||it<st),!this._active){this._target[lt]=dt,this._notify(!0);return}if(it<0){this._target[lt]=ct;return}ht=it/st%2,ht=ut&&ht>1?2-ht:ht,ht=this._easing(Math.min(1,Math.max(0,ht))),this._target[lt]=this._fn(ct,dt,ht)}wait(){const rt=this._promises||(this._promises=[]);return new Promise((it,st)=>{rt.push({res:it,rej:st})})}_notify(rt){const it=rt?"res":"rej",st=this._promises||[];for(let lt=0;lt<st.length;lt++)st[lt][it]()}}class Animations{constructor(rt,it){this._chart=rt,this._properties=new Map,this.configure(it)}configure(rt){if(!isObject(rt))return;const it=Object.keys(defaults.animation),st=this._properties;Object.getOwnPropertyNames(rt).forEach(lt=>{const ct=rt[lt];if(!isObject(ct))return;const ut={};for(const dt of it)ut[dt]=ct[dt];(isArray(ct.properties)&&ct.properties||[lt]).forEach(dt=>{(dt===lt||!st.has(dt))&&st.set(dt,ut)})})}_animateOptions(rt,it){const st=it.options,lt=resolveTargetOptions(rt,st);if(!lt)return[];const ct=this._createAnimations(lt,st);return st.$shared&&awaitAll(rt.options.$animations,st).then(()=>{rt.options=st},()=>{}),ct}_createAnimations(rt,it){const st=this._properties,lt=[],ct=rt.$animations||(rt.$animations={}),ut=Object.keys(it),dt=Date.now();let ht;for(ht=ut.length-1;ht>=0;--ht){const ft=ut[ht];if(ft.charAt(0)==="$")continue;if(ft==="options"){lt.push(...this._animateOptions(rt,it));continue}const pt=it[ft];let mt=ct[ft];const gt=st.get(ft);if(mt)if(gt&&mt.active()){mt.update(gt,pt,dt);continue}else mt.cancel();if(!gt||!gt.duration){rt[ft]=pt;continue}ct[ft]=mt=new Animation(gt,rt,ft,pt),lt.push(mt)}return lt}update(rt,it){if(this._properties.size===0){Object.assign(rt,it);return}const st=this._createAnimations(rt,it);if(st.length)return animator.add(this._chart,st),!0}}function awaitAll(nt,rt){const it=[],st=Object.keys(rt);for(let lt=0;lt<st.length;lt++){const ct=nt[st[lt]];ct&&ct.active()&&it.push(ct.wait())}return Promise.all(it)}function resolveTargetOptions(nt,rt){if(!rt)return;let it=nt.options;if(!it){nt.options=rt;return}return it.$shared&&(nt.options=it=Object.assign({},it,{$shared:!1,$animations:{}})),it}function scaleClip(nt,rt){const it=nt&&nt.options||{},st=it.reverse,lt=it.min===void 0?rt:0,ct=it.max===void 0?rt:0;return{start:st?ct:lt,end:st?lt:ct}}function defaultClip(nt,rt,it){if(it===!1)return!1;const st=scaleClip(nt,it),lt=scaleClip(rt,it);return{top:lt.end,right:st.end,bottom:lt.start,left:st.start}}function toClip(nt){let rt,it,st,lt;return isObject(nt)?(rt=nt.top,it=nt.right,st=nt.bottom,lt=nt.left):rt=it=st=lt=nt,{top:rt,right:it,bottom:st,left:lt,disabled:nt===!1}}function getSortedDatasetIndices(nt,rt){const it=[],st=nt._getSortedDatasetMetas(rt);let lt,ct;for(lt=0,ct=st.length;lt<ct;++lt)it.push(st[lt].index);return it}function applyStack(nt,rt,it,st={}){const lt=nt.keys,ct=st.mode==="single";let ut,dt,ht,ft;if(rt!==null){for(ut=0,dt=lt.length;ut<dt;++ut){if(ht=+lt[ut],ht===it){if(st.all)continue;break}ft=nt.values[ht],isNumberFinite(ft)&&(ct||rt===0||sign$1(rt)===sign$1(ft))&&(rt+=ft)}return rt}}function convertObjectDataToArray(nt){const rt=Object.keys(nt),it=new Array(rt.length);let st,lt,ct;for(st=0,lt=rt.length;st<lt;++st)ct=rt[st],it[st]={x:ct,y:nt[ct]};return it}function isStacked(nt,rt){const it=nt&&nt.options.stacked;return it||it===void 0&&rt.stack!==void 0}function getStackKey(nt,rt,it){return`${nt.id}.${rt.id}.${it.stack||it.type}`}function getUserBounds(nt){const{min:rt,max:it,minDefined:st,maxDefined:lt}=nt.getUserBounds();return{min:st?rt:Number.NEGATIVE_INFINITY,max:lt?it:Number.POSITIVE_INFINITY}}function getOrCreateStack(nt,rt,it){const st=nt[rt]||(nt[rt]={});return st[it]||(st[it]={})}function getLastIndexInStack(nt,rt,it,st){for(const lt of rt.getMatchingVisibleMetas(st).reverse()){const ct=nt[lt.index];if(it&&ct>0||!it&&ct<0)return lt.index}return null}function updateStacks(nt,rt){const{chart:it,_cachedMeta:st}=nt,lt=it._stacks||(it._stacks={}),{iScale:ct,vScale:ut,index:dt}=st,ht=ct.axis,ft=ut.axis,pt=getStackKey(ct,ut,st),mt=rt.length;let gt;for(let xt=0;xt<mt;++xt){const yt=rt[xt],{[ht]:vt,[ft]:St}=yt,wt=yt._stacks||(yt._stacks={});gt=wt[ft]=getOrCreateStack(lt,pt,vt),gt[dt]=St,gt._top=getLastIndexInStack(gt,ut,!0,st.type),gt._bottom=getLastIndexInStack(gt,ut,!1,st.type);const Et=gt._visualValues||(gt._visualValues={});Et[dt]=St}}function getFirstScaleId(nt,rt){const it=nt.scales;return Object.keys(it).filter(st=>it[st].axis===rt).shift()}function createDatasetContext(nt,rt){return createContext(nt,{active:!1,dataset:void 0,datasetIndex:rt,index:rt,mode:"default",type:"dataset"})}function createDataContext(nt,rt,it){return createContext(nt,{active:!1,dataIndex:rt,parsed:void 0,raw:void 0,element:it,index:rt,mode:"default",type:"data"})}function clearStacks(nt,rt){const it=nt.controller.index,st=nt.vScale&&nt.vScale.axis;if(st){rt=rt||nt._parsed;for(const lt of rt){const ct=lt._stacks;if(!ct||ct[st]===void 0||ct[st][it]===void 0)return;delete ct[st][it],ct[st]._visualValues!==void 0&&ct[st]._visualValues[it]!==void 0&&delete ct[st]._visualValues[it]}}}const isDirectUpdateMode=nt=>nt==="reset"||nt==="none",cloneIfNotShared=(nt,rt)=>rt?nt:Object.assign({},nt),createStack=(nt,rt,it)=>nt&&!rt.hidden&&rt._stacked&&{keys:getSortedDatasetIndices(it,!0),values:null};class DatasetController{constructor(rt,it){this.chart=rt,this._ctx=rt.ctx,this.index=it,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const rt=this._cachedMeta;this.configure(),this.linkScales(),rt._stacked=isStacked(rt.vScale,rt),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(rt){this.index!==rt&&clearStacks(this._cachedMeta),this.index=rt}linkScales(){const rt=this.chart,it=this._cachedMeta,st=this.getDataset(),lt=(mt,gt,xt,yt)=>mt==="x"?gt:mt==="r"?yt:xt,ct=it.xAxisID=valueOrDefault(st.xAxisID,getFirstScaleId(rt,"x")),ut=it.yAxisID=valueOrDefault(st.yAxisID,getFirstScaleId(rt,"y")),dt=it.rAxisID=valueOrDefault(st.rAxisID,getFirstScaleId(rt,"r")),ht=it.indexAxis,ft=it.iAxisID=lt(ht,ct,ut,dt),pt=it.vAxisID=lt(ht,ut,ct,dt);it.xScale=this.getScaleForId(ct),it.yScale=this.getScaleForId(ut),it.rScale=this.getScaleForId(dt),it.iScale=this.getScaleForId(ft),it.vScale=this.getScaleForId(pt)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(rt){return this.chart.scales[rt]}_getOtherScale(rt){const it=this._cachedMeta;return rt===it.iScale?it.vScale:it.iScale}reset(){this._update("reset")}_destroy(){const rt=this._cachedMeta;this._data&&unlistenArrayEvents(this._data,this),rt._stacked&&clearStacks(rt)}_dataCheck(){const rt=this.getDataset(),it=rt.data||(rt.data=[]),st=this._data;if(isObject(it))this._data=convertObjectDataToArray(it);else if(st!==it){if(st){unlistenArrayEvents(st,this);const lt=this._cachedMeta;clearStacks(lt),lt._parsed=[]}it&&Object.isExtensible(it)&&listenArrayEvents(it,this),this._syncList=[],this._data=it}}addElements(){const rt=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(rt.dataset=new this.datasetElementType)}buildOrUpdateElements(rt){const it=this._cachedMeta,st=this.getDataset();let lt=!1;this._dataCheck();const ct=it._stacked;it._stacked=isStacked(it.vScale,it),it.stack!==st.stack&&(lt=!0,clearStacks(it),it.stack=st.stack),this._resyncElements(rt),(lt||ct!==it._stacked)&&updateStacks(this,it._parsed)}configure(){const rt=this.chart.config,it=rt.datasetScopeKeys(this._type),st=rt.getOptionScopes(this.getDataset(),it,!0);this.options=rt.createResolver(st,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(rt,it){const{_cachedMeta:st,_data:lt}=this,{iScale:ct,_stacked:ut}=st,dt=ct.axis;let ht=rt===0&&it===lt.length?!0:st._sorted,ft=rt>0&&st._parsed[rt-1],pt,mt,gt;if(this._parsing===!1)st._parsed=lt,st._sorted=!0,gt=lt;else{isArray(lt[rt])?gt=this.parseArrayData(st,lt,rt,it):isObject(lt[rt])?gt=this.parseObjectData(st,lt,rt,it):gt=this.parsePrimitiveData(st,lt,rt,it);const xt=()=>mt[dt]===null||ft&&mt[dt]<ft[dt];for(pt=0;pt<it;++pt)st._parsed[pt+rt]=mt=gt[pt],ht&&(xt()&&(ht=!1),ft=mt);st._sorted=ht}ut&&updateStacks(this,gt)}parsePrimitiveData(rt,it,st,lt){const{iScale:ct,vScale:ut}=rt,dt=ct.axis,ht=ut.axis,ft=ct.getLabels(),pt=ct===ut,mt=new Array(lt);let gt,xt,yt;for(gt=0,xt=lt;gt<xt;++gt)yt=gt+st,mt[gt]={[dt]:pt||ct.parse(ft[yt],yt),[ht]:ut.parse(it[yt],yt)};return mt}parseArrayData(rt,it,st,lt){const{xScale:ct,yScale:ut}=rt,dt=new Array(lt);let ht,ft,pt,mt;for(ht=0,ft=lt;ht<ft;++ht)pt=ht+st,mt=it[pt],dt[ht]={x:ct.parse(mt[0],pt),y:ut.parse(mt[1],pt)};return dt}parseObjectData(rt,it,st,lt){const{xScale:ct,yScale:ut}=rt,{xAxisKey:dt="x",yAxisKey:ht="y"}=this._parsing,ft=new Array(lt);let pt,mt,gt,xt;for(pt=0,mt=lt;pt<mt;++pt)gt=pt+st,xt=it[gt],ft[pt]={x:ct.parse(resolveObjectKey(xt,dt),gt),y:ut.parse(resolveObjectKey(xt,ht),gt)};return ft}getParsed(rt){return this._cachedMeta._parsed[rt]}getDataElement(rt){return this._cachedMeta.data[rt]}applyStack(rt,it,st){const lt=this.chart,ct=this._cachedMeta,ut=it[rt.axis],dt={keys:getSortedDatasetIndices(lt,!0),values:it._stacks[rt.axis]._visualValues};return applyStack(dt,ut,ct.index,{mode:st})}updateRangeFromParsed(rt,it,st,lt){const ct=st[it.axis];let ut=ct===null?NaN:ct;const dt=lt&&st._stacks[it.axis];lt&&dt&&(lt.values=dt,ut=applyStack(lt,ct,this._cachedMeta.index)),rt.min=Math.min(rt.min,ut),rt.max=Math.max(rt.max,ut)}getMinMax(rt,it){const st=this._cachedMeta,lt=st._parsed,ct=st._sorted&&rt===st.iScale,ut=lt.length,dt=this._getOtherScale(rt),ht=createStack(it,st,this.chart),ft={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:pt,max:mt}=getUserBounds(dt);let gt,xt;function yt(){xt=lt[gt];const vt=xt[dt.axis];return!isNumberFinite(xt[rt.axis])||pt>vt||mt<vt}for(gt=0;gt<ut&&!(!yt()&&(this.updateRangeFromParsed(ft,rt,xt,ht),ct));++gt);if(ct){for(gt=ut-1;gt>=0;--gt)if(!yt()){this.updateRangeFromParsed(ft,rt,xt,ht);break}}return ft}getAllParsedValues(rt){const it=this._cachedMeta._parsed,st=[];let lt,ct,ut;for(lt=0,ct=it.length;lt<ct;++lt)ut=it[lt][rt.axis],isNumberFinite(ut)&&st.push(ut);return st}getMaxOverflow(){return!1}getLabelAndValue(rt){const it=this._cachedMeta,st=it.iScale,lt=it.vScale,ct=this.getParsed(rt);return{label:st?""+st.getLabelForValue(ct[st.axis]):"",value:lt?""+lt.getLabelForValue(ct[lt.axis]):""}}_update(rt){const it=this._cachedMeta;this.update(rt||"default"),it._clip=toClip(valueOrDefault(this.options.clip,defaultClip(it.xScale,it.yScale,this.getMaxOverflow())))}update(rt){}draw(){const rt=this._ctx,it=this.chart,st=this._cachedMeta,lt=st.data||[],ct=it.chartArea,ut=[],dt=this._drawStart||0,ht=this._drawCount||lt.length-dt,ft=this.options.drawActiveElementsOnTop;let pt;for(st.dataset&&st.dataset.draw(rt,ct,dt,ht),pt=dt;pt<dt+ht;++pt){const mt=lt[pt];mt.hidden||(mt.active&&ft?ut.push(mt):mt.draw(rt,ct))}for(pt=0;pt<ut.length;++pt)ut[pt].draw(rt,ct)}getStyle(rt,it){const st=it?"active":"default";return rt===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(st):this.resolveDataElementOptions(rt||0,st)}getContext(rt,it,st){const lt=this.getDataset();let ct;if(rt>=0&&rt<this._cachedMeta.data.length){const ut=this._cachedMeta.data[rt];ct=ut.$context||(ut.$context=createDataContext(this.getContext(),rt,ut)),ct.parsed=this.getParsed(rt),ct.raw=lt.data[rt],ct.index=ct.dataIndex=rt}else ct=this.$context||(this.$context=createDatasetContext(this.chart.getContext(),this.index)),ct.dataset=lt,ct.index=ct.datasetIndex=this.index;return ct.active=!!it,ct.mode=st,ct}resolveDatasetElementOptions(rt){return this._resolveElementOptions(this.datasetElementType.id,rt)}resolveDataElementOptions(rt,it){return this._resolveElementOptions(this.dataElementType.id,it,rt)}_resolveElementOptions(rt,it="default",st){const lt=it==="active",ct=this._cachedDataOpts,ut=rt+"-"+it,dt=ct[ut],ht=this.enableOptionSharing&&defined(st);if(dt)return cloneIfNotShared(dt,ht);const ft=this.chart.config,pt=ft.datasetElementScopeKeys(this._type,rt),mt=lt?[`${rt}Hover`,"hover",rt,""]:[rt,""],gt=ft.getOptionScopes(this.getDataset(),pt),xt=Object.keys(defaults.elements[rt]),yt=()=>this.getContext(st,lt,it),vt=ft.resolveNamedOptions(gt,xt,yt,mt);return vt.$shared&&(vt.$shared=ht,ct[ut]=Object.freeze(cloneIfNotShared(vt,ht))),vt}_resolveAnimations(rt,it,st){const lt=this.chart,ct=this._cachedDataOpts,ut=`animation-${it}`,dt=ct[ut];if(dt)return dt;let ht;if(lt.options.animation!==!1){const pt=this.chart.config,mt=pt.datasetAnimationScopeKeys(this._type,it),gt=pt.getOptionScopes(this.getDataset(),mt);ht=pt.createResolver(gt,this.getContext(rt,st,it))}const ft=new Animations(lt,ht&&ht.animations);return ht&&ht._cacheable&&(ct[ut]=Object.freeze(ft)),ft}getSharedOptions(rt){if(rt.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},rt))}includeOptions(rt,it){return!it||isDirectUpdateMode(rt)||this.chart._animationsDisabled}_getSharedOptions(rt,it){const st=this.resolveDataElementOptions(rt,it),lt=this._sharedOptions,ct=this.getSharedOptions(st),ut=this.includeOptions(it,ct)||ct!==lt;return this.updateSharedOptions(ct,it,st),{sharedOptions:ct,includeOptions:ut}}updateElement(rt,it,st,lt){isDirectUpdateMode(lt)?Object.assign(rt,st):this._resolveAnimations(it,lt).update(rt,st)}updateSharedOptions(rt,it,st){rt&&!isDirectUpdateMode(it)&&this._resolveAnimations(void 0,it).update(rt,st)}_setStyle(rt,it,st,lt){rt.active=lt;const ct=this.getStyle(it,lt);this._resolveAnimations(it,st,lt).update(rt,{options:!lt&&this.getSharedOptions(ct)||ct})}removeHoverStyle(rt,it,st){this._setStyle(rt,st,"active",!1)}setHoverStyle(rt,it,st){this._setStyle(rt,st,"active",!0)}_removeDatasetHoverStyle(){const rt=this._cachedMeta.dataset;rt&&this._setStyle(rt,void 0,"active",!1)}_setDatasetHoverStyle(){const rt=this._cachedMeta.dataset;rt&&this._setStyle(rt,void 0,"active",!0)}_resyncElements(rt){const it=this._data,st=this._cachedMeta.data;for(const[dt,ht,ft]of this._syncList)this[dt](ht,ft);this._syncList=[];const lt=st.length,ct=it.length,ut=Math.min(ct,lt);ut&&this.parse(0,ut),ct>lt?this._insertElements(lt,ct-lt,rt):ct<lt&&this._removeElements(ct,lt-ct)}_insertElements(rt,it,st=!0){const lt=this._cachedMeta,ct=lt.data,ut=rt+it;let dt;const ht=ft=>{for(ft.length+=it,dt=ft.length-1;dt>=ut;dt--)ft[dt]=ft[dt-it]};for(ht(ct),dt=rt;dt<ut;++dt)ct[dt]=new this.dataElementType;this._parsing&&ht(lt._parsed),this.parse(rt,it),st&&this.updateElements(ct,rt,it,"reset")}updateElements(rt,it,st,lt){}_removeElements(rt,it){const st=this._cachedMeta;if(this._parsing){const lt=st._parsed.splice(rt,it);st._stacked&&clearStacks(st,lt)}st.data.splice(rt,it)}_sync(rt){if(this._parsing)this._syncList.push(rt);else{const[it,st,lt]=rt;this[it](st,lt)}this.chart._dataChanges.push([this.index,...rt])}_onDataPush(){const rt=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-rt,rt])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(rt,it){it&&this._sync(["_removeElements",rt,it]);const st=arguments.length-2;st&&this._sync(["_insertElements",rt,st])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}So(DatasetController,"defaults",{}),So(DatasetController,"datasetElementType",null),So(DatasetController,"dataElementType",null);class LineController extends DatasetController{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(rt){const it=this._cachedMeta,{dataset:st,data:lt=[],_dataset:ct}=it,ut=this.chart._animationsDisabled;let{start:dt,count:ht}=_getStartAndCountOfVisiblePoints(it,lt,ut);this._drawStart=dt,this._drawCount=ht,_scaleRangesChanged(it)&&(dt=0,ht=lt.length),st._chart=this.chart,st._datasetIndex=this.index,st._decimated=!!ct._decimated,st.points=lt;const ft=this.resolveDatasetElementOptions(rt);this.options.showLine||(ft.borderWidth=0),ft.segment=this.options.segment,this.updateElement(st,void 0,{animated:!ut,options:ft},rt),this.updateElements(lt,dt,ht,rt)}updateElements(rt,it,st,lt){const ct=lt==="reset",{iScale:ut,vScale:dt,_stacked:ht,_dataset:ft}=this._cachedMeta,{sharedOptions:pt,includeOptions:mt}=this._getSharedOptions(it,lt),gt=ut.axis,xt=dt.axis,{spanGaps:yt,segment:vt}=this.options,St=isNumber(yt)?yt:Number.POSITIVE_INFINITY,wt=this.chart._animationsDisabled||ct||lt==="none",Et=it+st,Rt=rt.length;let Tt=it>0&&this.getParsed(it-1);for(let It=0;It<Rt;++It){const At=rt[It],Dt=wt?At:{};if(It<it||It>=Et){Dt.skip=!0;continue}const jt=this.getParsed(It),Ft=isNullOrUndef(jt[xt]),Lt=Dt[gt]=ut.getPixelForValue(jt[gt],It),Mt=Dt[xt]=ct||Ft?dt.getBasePixel():dt.getPixelForValue(ht?this.applyStack(dt,jt,ht):jt[xt],It);Dt.skip=isNaN(Lt)||isNaN(Mt)||Ft,Dt.stop=It>0&&Math.abs(jt[gt]-Tt[gt])>St,vt&&(Dt.parsed=jt,Dt.raw=ft.data[It]),mt&&(Dt.options=pt||this.resolveDataElementOptions(It,At.active?"active":lt)),wt||this.updateElement(At,It,Dt,lt),Tt=jt}}getMaxOverflow(){const rt=this._cachedMeta,it=rt.dataset,st=it.options&&it.options.borderWidth||0,lt=rt.data||[];if(!lt.length)return st;const ct=lt[0].size(this.resolveDataElementOptions(0)),ut=lt[lt.length-1].size(this.resolveDataElementOptions(lt.length-1));return Math.max(st,ct,ut)/2}draw(){const rt=this._cachedMeta;rt.dataset.updateControlPoints(this.chart.chartArea,rt.iScale.axis),super.draw()}}So(LineController,"id","line"),So(LineController,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),So(LineController,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapterBase{constructor(rt){So(this,"options");this.options=rt||{}}static override(rt){Object.assign(DateAdapterBase.prototype,rt)}init(){}formats(){return abstract()}parse(){return abstract()}format(){return abstract()}add(){return abstract()}diff(){return abstract()}startOf(){return abstract()}endOf(){return abstract()}}var adapters={_date:DateAdapterBase};function binarySearch(nt,rt,it,st){const{controller:lt,data:ct,_sorted:ut}=nt,dt=lt._cachedMeta.iScale;if(dt&&rt===dt.axis&&rt!=="r"&&ut&&ct.length){const ht=dt._reversePixels?_rlookupByKey:_lookupByKey;if(st){if(lt._sharedOptions){const ft=ct[0],pt=typeof ft.getRange=="function"&&ft.getRange(rt);if(pt){const mt=ht(ct,rt,it-pt),gt=ht(ct,rt,it+pt);return{lo:mt.lo,hi:gt.hi}}}}else return ht(ct,rt,it)}return{lo:0,hi:ct.length-1}}function evaluateInteractionItems(nt,rt,it,st,lt){const ct=nt.getSortedVisibleDatasetMetas(),ut=it[rt];for(let dt=0,ht=ct.length;dt<ht;++dt){const{index:ft,data:pt}=ct[dt],{lo:mt,hi:gt}=binarySearch(ct[dt],rt,ut,lt);for(let xt=mt;xt<=gt;++xt){const yt=pt[xt];yt.skip||st(yt,ft,xt)}}}function getDistanceMetricForAxis(nt){const rt=nt.indexOf("x")!==-1,it=nt.indexOf("y")!==-1;return function(st,lt){const ct=rt?Math.abs(st.x-lt.x):0,ut=it?Math.abs(st.y-lt.y):0;return Math.sqrt(Math.pow(ct,2)+Math.pow(ut,2))}}function getIntersectItems(nt,rt,it,st,lt){const ct=[];return!lt&&!nt.isPointInArea(rt)||evaluateInteractionItems(nt,it,rt,function(dt,ht,ft){!lt&&!_isPointInArea(dt,nt.chartArea,0)||dt.inRange(rt.x,rt.y,st)&&ct.push({element:dt,datasetIndex:ht,index:ft})},!0),ct}function getNearestRadialItems(nt,rt,it,st){let lt=[];function ct(ut,dt,ht){const{startAngle:ft,endAngle:pt}=ut.getProps(["startAngle","endAngle"],st),{angle:mt}=getAngleFromPoint(ut,{x:rt.x,y:rt.y});_angleBetween(mt,ft,pt)&&lt.push({element:ut,datasetIndex:dt,index:ht})}return evaluateInteractionItems(nt,it,rt,ct),lt}function getNearestCartesianItems(nt,rt,it,st,lt,ct){let ut=[];const dt=getDistanceMetricForAxis(it);let ht=Number.POSITIVE_INFINITY;function ft(pt,mt,gt){const xt=pt.inRange(rt.x,rt.y,lt);if(st&&!xt)return;const yt=pt.getCenterPoint(lt);if(!(!!ct||nt.isPointInArea(yt))&&!xt)return;const St=dt(rt,yt);St<ht?(ut=[{element:pt,datasetIndex:mt,index:gt}],ht=St):St===ht&&ut.push({element:pt,datasetIndex:mt,index:gt})}return evaluateInteractionItems(nt,it,rt,ft),ut}function getNearestItems(nt,rt,it,st,lt,ct){return!ct&&!nt.isPointInArea(rt)?[]:it==="r"&&!st?getNearestRadialItems(nt,rt,it,lt):getNearestCartesianItems(nt,rt,it,st,lt,ct)}function getAxisItems(nt,rt,it,st,lt){const ct=[],ut=it==="x"?"inXRange":"inYRange";let dt=!1;return evaluateInteractionItems(nt,it,rt,(ht,ft,pt)=>{ht[ut](rt[it],lt)&&(ct.push({element:ht,datasetIndex:ft,index:pt}),dt=dt||ht.inRange(rt.x,rt.y,lt))}),st&&!dt?[]:ct}var Interaction={evaluateInteractionItems,modes:{index(nt,rt,it,st){const lt=getRelativePosition(rt,nt),ct=it.axis||"x",ut=it.includeInvisible||!1,dt=it.intersect?getIntersectItems(nt,lt,ct,st,ut):getNearestItems(nt,lt,ct,!1,st,ut),ht=[];return dt.length?(nt.getSortedVisibleDatasetMetas().forEach(ft=>{const pt=dt[0].index,mt=ft.data[pt];mt&&!mt.skip&&ht.push({element:mt,datasetIndex:ft.index,index:pt})}),ht):[]},dataset(nt,rt,it,st){const lt=getRelativePosition(rt,nt),ct=it.axis||"xy",ut=it.includeInvisible||!1;let dt=it.intersect?getIntersectItems(nt,lt,ct,st,ut):getNearestItems(nt,lt,ct,!1,st,ut);if(dt.length>0){const ht=dt[0].datasetIndex,ft=nt.getDatasetMeta(ht).data;dt=[];for(let pt=0;pt<ft.length;++pt)dt.push({element:ft[pt],datasetIndex:ht,index:pt})}return dt},point(nt,rt,it,st){const lt=getRelativePosition(rt,nt),ct=it.axis||"xy",ut=it.includeInvisible||!1;return getIntersectItems(nt,lt,ct,st,ut)},nearest(nt,rt,it,st){const lt=getRelativePosition(rt,nt),ct=it.axis||"xy",ut=it.includeInvisible||!1;return getNearestItems(nt,lt,ct,it.intersect,st,ut)},x(nt,rt,it,st){const lt=getRelativePosition(rt,nt);return getAxisItems(nt,lt,"x",it.intersect,st)},y(nt,rt,it,st){const lt=getRelativePosition(rt,nt);return getAxisItems(nt,lt,"y",it.intersect,st)}}};const STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(nt,rt){return nt.filter(it=>it.pos===rt)}function filterDynamicPositionByAxis(nt,rt){return nt.filter(it=>STATIC_POSITIONS.indexOf(it.pos)===-1&&it.box.axis===rt)}function sortByWeight(nt,rt){return nt.sort((it,st)=>{const lt=rt?st:it,ct=rt?it:st;return lt.weight===ct.weight?lt.index-ct.index:lt.weight-ct.weight})}function wrapBoxes(nt){const rt=[];let it,st,lt,ct,ut,dt;for(it=0,st=(nt||[]).length;it<st;++it)lt=nt[it],{position:ct,options:{stack:ut,stackWeight:dt=1}}=lt,rt.push({index:it,box:lt,pos:ct,horizontal:lt.isHorizontal(),weight:lt.weight,stack:ut&&ct+ut,stackWeight:dt});return rt}function buildStacks(nt){const rt={};for(const it of nt){const{stack:st,pos:lt,stackWeight:ct}=it;if(!st||!STATIC_POSITIONS.includes(lt))continue;const ut=rt[st]||(rt[st]={count:0,placed:0,weight:0,size:0});ut.count++,ut.weight+=ct}return rt}function setLayoutDims(nt,rt){const it=buildStacks(nt),{vBoxMaxWidth:st,hBoxMaxHeight:lt}=rt;let ct,ut,dt;for(ct=0,ut=nt.length;ct<ut;++ct){dt=nt[ct];const{fullSize:ht}=dt.box,ft=it[dt.stack],pt=ft&&dt.stackWeight/ft.weight;dt.horizontal?(dt.width=pt?pt*st:ht&&rt.availableWidth,dt.height=lt):(dt.width=st,dt.height=pt?pt*lt:ht&&rt.availableHeight)}return it}function buildLayoutBoxes(nt){const rt=wrapBoxes(nt),it=sortByWeight(rt.filter(ft=>ft.box.fullSize),!0),st=sortByWeight(filterByPosition(rt,"left"),!0),lt=sortByWeight(filterByPosition(rt,"right")),ct=sortByWeight(filterByPosition(rt,"top"),!0),ut=sortByWeight(filterByPosition(rt,"bottom")),dt=filterDynamicPositionByAxis(rt,"x"),ht=filterDynamicPositionByAxis(rt,"y");return{fullSize:it,leftAndTop:st.concat(ct),rightAndBottom:lt.concat(ht).concat(ut).concat(dt),chartArea:filterByPosition(rt,"chartArea"),vertical:st.concat(lt).concat(ht),horizontal:ct.concat(ut).concat(dt)}}function getCombinedMax(nt,rt,it,st){return Math.max(nt[it],rt[it])+Math.max(nt[st],rt[st])}function updateMaxPadding(nt,rt){nt.top=Math.max(nt.top,rt.top),nt.left=Math.max(nt.left,rt.left),nt.bottom=Math.max(nt.bottom,rt.bottom),nt.right=Math.max(nt.right,rt.right)}function updateDims(nt,rt,it,st){const{pos:lt,box:ct}=it,ut=nt.maxPadding;if(!isObject(lt)){it.size&&(nt[lt]-=it.size);const mt=st[it.stack]||{size:0,count:1};mt.size=Math.max(mt.size,it.horizontal?ct.height:ct.width),it.size=mt.size/mt.count,nt[lt]+=it.size}ct.getPadding&&updateMaxPadding(ut,ct.getPadding());const dt=Math.max(0,rt.outerWidth-getCombinedMax(ut,nt,"left","right")),ht=Math.max(0,rt.outerHeight-getCombinedMax(ut,nt,"top","bottom")),ft=dt!==nt.w,pt=ht!==nt.h;return nt.w=dt,nt.h=ht,it.horizontal?{same:ft,other:pt}:{same:pt,other:ft}}function handleMaxPadding(nt){const rt=nt.maxPadding;function it(st){const lt=Math.max(rt[st]-nt[st],0);return nt[st]+=lt,lt}nt.y+=it("top"),nt.x+=it("left"),it("right"),it("bottom")}function getMargins(nt,rt){const it=rt.maxPadding;function st(lt){const ct={left:0,top:0,right:0,bottom:0};return lt.forEach(ut=>{ct[ut]=Math.max(rt[ut],it[ut])}),ct}return st(nt?["left","right"]:["top","bottom"])}function fitBoxes(nt,rt,it,st){const lt=[];let ct,ut,dt,ht,ft,pt;for(ct=0,ut=nt.length,ft=0;ct<ut;++ct){dt=nt[ct],ht=dt.box,ht.update(dt.width||rt.w,dt.height||rt.h,getMargins(dt.horizontal,rt));const{same:mt,other:gt}=updateDims(rt,it,dt,st);ft|=mt&&lt.length,pt=pt||gt,ht.fullSize||lt.push(dt)}return ft&&fitBoxes(lt,rt,it,st)||pt}function setBoxDims(nt,rt,it,st,lt){nt.top=it,nt.left=rt,nt.right=rt+st,nt.bottom=it+lt,nt.width=st,nt.height=lt}function placeBoxes(nt,rt,it,st){const lt=it.padding;let{x:ct,y:ut}=rt;for(const dt of nt){const ht=dt.box,ft=st[dt.stack]||{count:1,placed:0,weight:1},pt=dt.stackWeight/ft.weight||1;if(dt.horizontal){const mt=rt.w*pt,gt=ft.size||ht.height;defined(ft.start)&&(ut=ft.start),ht.fullSize?setBoxDims(ht,lt.left,ut,it.outerWidth-lt.right-lt.left,gt):setBoxDims(ht,rt.left+ft.placed,ut,mt,gt),ft.start=ut,ft.placed+=mt,ut=ht.bottom}else{const mt=rt.h*pt,gt=ft.size||ht.width;defined(ft.start)&&(ct=ft.start),ht.fullSize?setBoxDims(ht,ct,lt.top,gt,it.outerHeight-lt.bottom-lt.top):setBoxDims(ht,ct,rt.top+ft.placed,gt,mt),ft.start=ct,ft.placed+=mt,ct=ht.right}}rt.x=ct,rt.y=ut}var layouts={addBox(nt,rt){nt.boxes||(nt.boxes=[]),rt.fullSize=rt.fullSize||!1,rt.position=rt.position||"top",rt.weight=rt.weight||0,rt._layers=rt._layers||function(){return[{z:0,draw(it){rt.draw(it)}}]},nt.boxes.push(rt)},removeBox(nt,rt){const it=nt.boxes?nt.boxes.indexOf(rt):-1;it!==-1&&nt.boxes.splice(it,1)},configure(nt,rt,it){rt.fullSize=it.fullSize,rt.position=it.position,rt.weight=it.weight},update(nt,rt,it,st){if(!nt)return;const lt=toPadding(nt.options.layout.padding),ct=Math.max(rt-lt.width,0),ut=Math.max(it-lt.height,0),dt=buildLayoutBoxes(nt.boxes),ht=dt.vertical,ft=dt.horizontal;each(nt.boxes,vt=>{typeof vt.beforeLayout=="function"&&vt.beforeLayout()});const pt=ht.reduce((vt,St)=>St.box.options&&St.box.options.display===!1?vt:vt+1,0)||1,mt=Object.freeze({outerWidth:rt,outerHeight:it,padding:lt,availableWidth:ct,availableHeight:ut,vBoxMaxWidth:ct/2/pt,hBoxMaxHeight:ut/2}),gt=Object.assign({},lt);updateMaxPadding(gt,toPadding(st));const xt=Object.assign({maxPadding:gt,w:ct,h:ut,x:lt.left,y:lt.top},lt),yt=setLayoutDims(ht.concat(ft),mt);fitBoxes(dt.fullSize,xt,mt,yt),fitBoxes(ht,xt,mt,yt),fitBoxes(ft,xt,mt,yt)&&fitBoxes(ht,xt,mt,yt),handleMaxPadding(xt),placeBoxes(dt.leftAndTop,xt,mt,yt),xt.x+=xt.w,xt.y+=xt.h,placeBoxes(dt.rightAndBottom,xt,mt,yt),nt.chartArea={left:xt.left,top:xt.top,right:xt.left+xt.w,bottom:xt.top+xt.h,height:xt.h,width:xt.w},each(dt.chartArea,vt=>{const St=vt.box;Object.assign(St,nt.chartArea),St.update(xt.w,xt.h,{left:0,top:0,right:0,bottom:0})})}};class BasePlatform{acquireContext(rt,it){}releaseContext(rt){return!1}addEventListener(rt,it,st){}removeEventListener(rt,it,st){}getDevicePixelRatio(){return 1}getMaximumSize(rt,it,st,lt){return it=Math.max(0,it||rt.width),st=st||rt.height,{width:it,height:Math.max(0,lt?Math.floor(it/lt):st)}}isAttached(rt){return!0}updateConfig(rt){}}class BasicPlatform extends BasePlatform{acquireContext(rt){return rt&&rt.getContext&&rt.getContext("2d")||null}updateConfig(rt){rt.options.animation=!1}}const EXPANDO_KEY="$chartjs",EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=nt=>nt===null||nt==="";function initCanvas(nt,rt){const it=nt.style,st=nt.getAttribute("height"),lt=nt.getAttribute("width");if(nt[EXPANDO_KEY]={initial:{height:st,width:lt,style:{display:it.display,height:it.height,width:it.width}}},it.display=it.display||"block",it.boxSizing=it.boxSizing||"border-box",isNullOrEmpty(lt)){const ct=readUsedSize(nt,"width");ct!==void 0&&(nt.width=ct)}if(isNullOrEmpty(st))if(nt.style.height==="")nt.height=nt.width/(rt||2);else{const ct=readUsedSize(nt,"height");ct!==void 0&&(nt.height=ct)}return nt}const eventListenerOptions=supportsEventListenerOptions?{passive:!0}:!1;function addListener(nt,rt,it){nt.addEventListener(rt,it,eventListenerOptions)}function removeListener(nt,rt,it){nt.canvas.removeEventListener(rt,it,eventListenerOptions)}function fromNativeEvent(nt,rt){const it=EVENT_TYPES[nt.type]||nt.type,{x:st,y:lt}=getRelativePosition(nt,rt);return{type:it,chart:rt,native:nt,x:st!==void 0?st:null,y:lt!==void 0?lt:null}}function nodeListContains(nt,rt){for(const it of nt)if(it===rt||it.contains(rt))return!0}function createAttachObserver(nt,rt,it){const st=nt.canvas,lt=new MutationObserver(ct=>{let ut=!1;for(const dt of ct)ut=ut||nodeListContains(dt.addedNodes,st),ut=ut&&!nodeListContains(dt.removedNodes,st);ut&&it()});return lt.observe(document,{childList:!0,subtree:!0}),lt}function createDetachObserver(nt,rt,it){const st=nt.canvas,lt=new MutationObserver(ct=>{let ut=!1;for(const dt of ct)ut=ut||nodeListContains(dt.removedNodes,st),ut=ut&&!nodeListContains(dt.addedNodes,st);ut&&it()});return lt.observe(document,{childList:!0,subtree:!0}),lt}const drpListeningCharts=new Map;let oldDevicePixelRatio=0;function onWindowResize(){const nt=window.devicePixelRatio;nt!==oldDevicePixelRatio&&(oldDevicePixelRatio=nt,drpListeningCharts.forEach((rt,it)=>{it.currentDevicePixelRatio!==nt&&rt()}))}function listenDevicePixelRatioChanges(nt,rt){drpListeningCharts.size||window.addEventListener("resize",onWindowResize),drpListeningCharts.set(nt,rt)}function unlistenDevicePixelRatioChanges(nt){drpListeningCharts.delete(nt),drpListeningCharts.size||window.removeEventListener("resize",onWindowResize)}function createResizeObserver(nt,rt,it){const st=nt.canvas,lt=st&&_getParentNode(st);if(!lt)return;const ct=throttled((dt,ht)=>{const ft=lt.clientWidth;it(dt,ht),ft<lt.clientWidth&&it()},window),ut=new ResizeObserver(dt=>{const ht=dt[0],ft=ht.contentRect.width,pt=ht.contentRect.height;ft===0&&pt===0||ct(ft,pt)});return ut.observe(lt),listenDevicePixelRatioChanges(nt,ct),ut}function releaseObserver(nt,rt,it){it&&it.disconnect(),rt==="resize"&&unlistenDevicePixelRatioChanges(nt)}function createProxyAndListen(nt,rt,it){const st=nt.canvas,lt=throttled(ct=>{nt.ctx!==null&&it(fromNativeEvent(ct,nt))},nt);return addListener(st,rt,lt),lt}class DomPlatform extends BasePlatform{acquireContext(rt,it){const st=rt&&rt.getContext&&rt.getContext("2d");return st&&st.canvas===rt?(initCanvas(rt,it),st):null}releaseContext(rt){const it=rt.canvas;if(!it[EXPANDO_KEY])return!1;const st=it[EXPANDO_KEY].initial;["height","width"].forEach(ct=>{const ut=st[ct];isNullOrUndef(ut)?it.removeAttribute(ct):it.setAttribute(ct,ut)});const lt=st.style||{};return Object.keys(lt).forEach(ct=>{it.style[ct]=lt[ct]}),it.width=it.width,delete it[EXPANDO_KEY],!0}addEventListener(rt,it,st){this.removeEventListener(rt,it);const lt=rt.$proxies||(rt.$proxies={}),ut={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[it]||createProxyAndListen;lt[it]=ut(rt,it,st)}removeEventListener(rt,it){const st=rt.$proxies||(rt.$proxies={}),lt=st[it];if(!lt)return;({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[it]||removeListener)(rt,it,lt),st[it]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(rt,it,st,lt){return getMaximumSize(rt,it,st,lt)}isAttached(rt){const it=_getParentNode(rt);return!!(it&&it.isConnected)}}function _detectPlatform(nt){return!_isDomSupported()||typeof OffscreenCanvas<"u"&&nt instanceof OffscreenCanvas?BasicPlatform:DomPlatform}var _g;let Element$1=(_g=class{constructor(){So(this,"x");So(this,"y");So(this,"active",!1);So(this,"options");So(this,"$animations")}tooltipPosition(rt){const{x:it,y:st}=this.getProps(["x","y"],rt);return{x:it,y:st}}hasValue(){return isNumber(this.x)&&isNumber(this.y)}getProps(rt,it){const st=this.$animations;if(!it||!st)return this;const lt={};return rt.forEach(ct=>{lt[ct]=st[ct]&&st[ct].active()?st[ct]._to:this[ct]}),lt}},So(_g,"defaults",{}),So(_g,"defaultRoutes"),_g);function autoSkip(nt,rt){const it=nt.options.ticks,st=determineMaxTicks(nt),lt=Math.min(it.maxTicksLimit||st,st),ct=it.major.enabled?getMajorIndices(rt):[],ut=ct.length,dt=ct[0],ht=ct[ut-1],ft=[];if(ut>lt)return skipMajors(rt,ft,ct,ut/lt),ft;const pt=calculateSpacing(ct,rt,lt);if(ut>0){let mt,gt;const xt=ut>1?Math.round((ht-dt)/(ut-1)):null;for(skip(rt,ft,pt,isNullOrUndef(xt)?0:dt-xt,dt),mt=0,gt=ut-1;mt<gt;mt++)skip(rt,ft,pt,ct[mt],ct[mt+1]);return skip(rt,ft,pt,ht,isNullOrUndef(xt)?rt.length:ht+xt),ft}return skip(rt,ft,pt),ft}function determineMaxTicks(nt){const rt=nt.options.offset,it=nt._tickSize(),st=nt._length/it+(rt?0:1),lt=nt._maxLength/it;return Math.floor(Math.min(st,lt))}function calculateSpacing(nt,rt,it){const st=getEvenSpacing(nt),lt=rt.length/it;if(!st)return Math.max(lt,1);const ct=_factorize(st);for(let ut=0,dt=ct.length-1;ut<dt;ut++){const ht=ct[ut];if(ht>lt)return ht}return Math.max(lt,1)}function getMajorIndices(nt){const rt=[];let it,st;for(it=0,st=nt.length;it<st;it++)nt[it].major&&rt.push(it);return rt}function skipMajors(nt,rt,it,st){let lt=0,ct=it[0],ut;for(st=Math.ceil(st),ut=0;ut<nt.length;ut++)ut===ct&&(rt.push(nt[ut]),lt++,ct=it[lt*st])}function skip(nt,rt,it,st,lt){const ct=valueOrDefault(st,0),ut=Math.min(valueOrDefault(lt,nt.length),nt.length);let dt=0,ht,ft,pt;for(it=Math.ceil(it),lt&&(ht=lt-st,it=ht/Math.floor(ht/it)),pt=ct;pt<0;)dt++,pt=Math.round(ct+dt*it);for(ft=Math.max(ct,0);ft<ut;ft++)ft===pt&&(rt.push(nt[ft]),dt++,pt=Math.round(ct+dt*it))}function getEvenSpacing(nt){const rt=nt.length;let it,st;if(rt<2)return!1;for(st=nt[0],it=1;it<rt;++it)if(nt[it]-nt[it-1]!==st)return!1;return st}const reverseAlign=nt=>nt==="left"?"right":nt==="right"?"left":nt,offsetFromEdge=(nt,rt,it)=>rt==="top"||rt==="left"?nt[rt]+it:nt[rt]-it,getTicksLimit=(nt,rt)=>Math.min(rt||nt,nt);function sample(nt,rt){const it=[],st=nt.length/rt,lt=nt.length;let ct=0;for(;ct<lt;ct+=st)it.push(nt[Math.floor(ct)]);return it}function getPixelForGridLine(nt,rt,it){const st=nt.ticks.length,lt=Math.min(rt,st-1),ct=nt._startPixel,ut=nt._endPixel,dt=1e-6;let ht=nt.getPixelForTick(lt),ft;if(!(it&&(st===1?ft=Math.max(ht-ct,ut-ht):rt===0?ft=(nt.getPixelForTick(1)-ht)/2:ft=(ht-nt.getPixelForTick(lt-1))/2,ht+=lt<rt?ft:-ft,ht<ct-dt||ht>ut+dt)))return ht}function garbageCollect(nt,rt){each(nt,it=>{const st=it.gc,lt=st.length/2;let ct;if(lt>rt){for(ct=0;ct<lt;++ct)delete it.data[st[ct]];st.splice(0,lt)}})}function getTickMarkLength(nt){return nt.drawTicks?nt.tickLength:0}function getTitleHeight(nt,rt){if(!nt.display)return 0;const it=toFont(nt.font,rt),st=toPadding(nt.padding);return(isArray(nt.text)?nt.text.length:1)*it.lineHeight+st.height}function createScaleContext(nt,rt){return createContext(nt,{scale:rt,type:"scale"})}function createTickContext(nt,rt,it){return createContext(nt,{tick:it,index:rt,type:"tick"})}function titleAlign(nt,rt,it){let st=_toLeftRightCenter(nt);return(it&&rt!=="right"||!it&&rt==="right")&&(st=reverseAlign(st)),st}function titleArgs(nt,rt,it,st){const{top:lt,left:ct,bottom:ut,right:dt,chart:ht}=nt,{chartArea:ft,scales:pt}=ht;let mt=0,gt,xt,yt;const vt=ut-lt,St=dt-ct;if(nt.isHorizontal()){if(xt=_alignStartEnd(st,ct,dt),isObject(it)){const wt=Object.keys(it)[0],Et=it[wt];yt=pt[wt].getPixelForValue(Et)+vt-rt}else it==="center"?yt=(ft.bottom+ft.top)/2+vt-rt:yt=offsetFromEdge(nt,it,rt);gt=dt-ct}else{if(isObject(it)){const wt=Object.keys(it)[0],Et=it[wt];xt=pt[wt].getPixelForValue(Et)-St+rt}else it==="center"?xt=(ft.left+ft.right)/2-St+rt:xt=offsetFromEdge(nt,it,rt);yt=_alignStartEnd(st,ut,lt),mt=it==="left"?-HALF_PI:HALF_PI}return{titleX:xt,titleY:yt,maxWidth:gt,rotation:mt}}class Scale extends Element$1{constructor(rt){super(),this.id=rt.id,this.type=rt.type,this.options=void 0,this.ctx=rt.ctx,this.chart=rt.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(rt){this.options=rt.setContext(this.getContext()),this.axis=rt.axis,this._userMin=this.parse(rt.min),this._userMax=this.parse(rt.max),this._suggestedMin=this.parse(rt.suggestedMin),this._suggestedMax=this.parse(rt.suggestedMax)}parse(rt,it){return rt}getUserBounds(){let{_userMin:rt,_userMax:it,_suggestedMin:st,_suggestedMax:lt}=this;return rt=finiteOrDefault(rt,Number.POSITIVE_INFINITY),it=finiteOrDefault(it,Number.NEGATIVE_INFINITY),st=finiteOrDefault(st,Number.POSITIVE_INFINITY),lt=finiteOrDefault(lt,Number.NEGATIVE_INFINITY),{min:finiteOrDefault(rt,st),max:finiteOrDefault(it,lt),minDefined:isNumberFinite(rt),maxDefined:isNumberFinite(it)}}getMinMax(rt){let{min:it,max:st,minDefined:lt,maxDefined:ct}=this.getUserBounds(),ut;if(lt&&ct)return{min:it,max:st};const dt=this.getMatchingVisibleMetas();for(let ht=0,ft=dt.length;ht<ft;++ht)ut=dt[ht].controller.getMinMax(this,rt),lt||(it=Math.min(it,ut.min)),ct||(st=Math.max(st,ut.max));return it=ct&&it>st?st:it,st=lt&&it>st?it:st,{min:finiteOrDefault(it,finiteOrDefault(st,it)),max:finiteOrDefault(st,finiteOrDefault(it,st))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const rt=this.chart.data;return this.options.labels||(this.isHorizontal()?rt.xLabels:rt.yLabels)||rt.labels||[]}getLabelItems(rt=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(rt))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){callback(this.options.beforeUpdate,[this])}update(rt,it,st){const{beginAtZero:lt,grace:ct,ticks:ut}=this.options,dt=ut.sampleSize;this.beforeUpdate(),this.maxWidth=rt,this.maxHeight=it,this._margins=st=Object.assign({left:0,right:0,top:0,bottom:0},st),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+st.left+st.right:this.height+st.top+st.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_addGrace(this,ct,lt),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const ht=dt<this.ticks.length;this._convertTicksToLabels(ht?sample(this.ticks,dt):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),ut.display&&(ut.autoSkip||ut.source==="auto")&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),ht&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let rt=this.options.reverse,it,st;this.isHorizontal()?(it=this.left,st=this.right):(it=this.top,st=this.bottom,rt=!rt),this._startPixel=it,this._endPixel=st,this._reversePixels=rt,this._length=st-it,this._alignToPixels=this.options.alignToPixels}afterUpdate(){callback(this.options.afterUpdate,[this])}beforeSetDimensions(){callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){callback(this.options.afterSetDimensions,[this])}_callHooks(rt){this.chart.notifyPlugins(rt,this.getContext()),callback(this.options[rt],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(rt){const it=this.options.ticks;let st,lt,ct;for(st=0,lt=rt.length;st<lt;st++)ct=rt[st],ct.label=callback(it.callback,[ct.value,st,rt],this)}afterTickToLabelConversion(){callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const rt=this.options,it=rt.ticks,st=getTicksLimit(this.ticks.length,rt.ticks.maxTicksLimit),lt=it.minRotation||0,ct=it.maxRotation;let ut=lt,dt,ht,ft;if(!this._isVisible()||!it.display||lt>=ct||st<=1||!this.isHorizontal()){this.labelRotation=lt;return}const pt=this._getLabelSizes(),mt=pt.widest.width,gt=pt.highest.height,xt=_limitValue(this.chart.width-mt,0,this.maxWidth);dt=rt.offset?this.maxWidth/st:xt/(st-1),mt+6>dt&&(dt=xt/(st-(rt.offset?.5:1)),ht=this.maxHeight-getTickMarkLength(rt.grid)-it.padding-getTitleHeight(rt.title,this.chart.options.font),ft=Math.sqrt(mt*mt+gt*gt),ut=toDegrees(Math.min(Math.asin(_limitValue((pt.highest.height+6)/dt,-1,1)),Math.asin(_limitValue(ht/ft,-1,1))-Math.asin(_limitValue(gt/ft,-1,1)))),ut=Math.max(lt,Math.min(ct,ut))),this.labelRotation=ut}afterCalculateLabelRotation(){callback(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){callback(this.options.beforeFit,[this])}fit(){const rt={width:0,height:0},{chart:it,options:{ticks:st,title:lt,grid:ct}}=this,ut=this._isVisible(),dt=this.isHorizontal();if(ut){const ht=getTitleHeight(lt,it.options.font);if(dt?(rt.width=this.maxWidth,rt.height=getTickMarkLength(ct)+ht):(rt.height=this.maxHeight,rt.width=getTickMarkLength(ct)+ht),st.display&&this.ticks.length){const{first:ft,last:pt,widest:mt,highest:gt}=this._getLabelSizes(),xt=st.padding*2,yt=toRadians(this.labelRotation),vt=Math.cos(yt),St=Math.sin(yt);if(dt){const wt=st.mirror?0:St*mt.width+vt*gt.height;rt.height=Math.min(this.maxHeight,rt.height+wt+xt)}else{const wt=st.mirror?0:vt*mt.width+St*gt.height;rt.width=Math.min(this.maxWidth,rt.width+wt+xt)}this._calculatePadding(ft,pt,St,vt)}}this._handleMargins(),dt?(this.width=this._length=it.width-this._margins.left-this._margins.right,this.height=rt.height):(this.width=rt.width,this.height=this._length=it.height-this._margins.top-this._margins.bottom)}_calculatePadding(rt,it,st,lt){const{ticks:{align:ct,padding:ut},position:dt}=this.options,ht=this.labelRotation!==0,ft=dt!=="top"&&this.axis==="x";if(this.isHorizontal()){const pt=this.getPixelForTick(0)-this.left,mt=this.right-this.getPixelForTick(this.ticks.length-1);let gt=0,xt=0;ht?ft?(gt=lt*rt.width,xt=st*it.height):(gt=st*rt.height,xt=lt*it.width):ct==="start"?xt=it.width:ct==="end"?gt=rt.width:ct!=="inner"&&(gt=rt.width/2,xt=it.width/2),this.paddingLeft=Math.max((gt-pt+ut)*this.width/(this.width-pt),0),this.paddingRight=Math.max((xt-mt+ut)*this.width/(this.width-mt),0)}else{let pt=it.height/2,mt=rt.height/2;ct==="start"?(pt=0,mt=rt.height):ct==="end"&&(pt=it.height,mt=0),this.paddingTop=pt+ut,this.paddingBottom=mt+ut}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){callback(this.options.afterFit,[this])}isHorizontal(){const{axis:rt,position:it}=this.options;return it==="top"||it==="bottom"||rt==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(rt){this.beforeTickToLabelConversion(),this.generateTickLabels(rt);let it,st;for(it=0,st=rt.length;it<st;it++)isNullOrUndef(rt[it].label)&&(rt.splice(it,1),st--,it--);this.afterTickToLabelConversion()}_getLabelSizes(){let rt=this._labelSizes;if(!rt){const it=this.options.ticks.sampleSize;let st=this.ticks;it<st.length&&(st=sample(st,it)),this._labelSizes=rt=this._computeLabelSizes(st,st.length,this.options.ticks.maxTicksLimit)}return rt}_computeLabelSizes(rt,it,st){const{ctx:lt,_longestTextCache:ct}=this,ut=[],dt=[],ht=Math.floor(it/getTicksLimit(it,st));let ft=0,pt=0,mt,gt,xt,yt,vt,St,wt,Et,Rt,Tt,It;for(mt=0;mt<it;mt+=ht){if(yt=rt[mt].label,vt=this._resolveTickFontOptions(mt),lt.font=St=vt.string,wt=ct[St]=ct[St]||{data:{},gc:[]},Et=vt.lineHeight,Rt=Tt=0,!isNullOrUndef(yt)&&!isArray(yt))Rt=_measureText(lt,wt.data,wt.gc,Rt,yt),Tt=Et;else if(isArray(yt))for(gt=0,xt=yt.length;gt<xt;++gt)It=yt[gt],!isNullOrUndef(It)&&!isArray(It)&&(Rt=_measureText(lt,wt.data,wt.gc,Rt,It),Tt+=Et);ut.push(Rt),dt.push(Tt),ft=Math.max(Rt,ft),pt=Math.max(Tt,pt)}garbageCollect(ct,it);const At=ut.indexOf(ft),Dt=dt.indexOf(pt),jt=Ft=>({width:ut[Ft]||0,height:dt[Ft]||0});return{first:jt(0),last:jt(it-1),widest:jt(At),highest:jt(Dt),widths:ut,heights:dt}}getLabelForValue(rt){return rt}getPixelForValue(rt,it){return NaN}getValueForPixel(rt){}getPixelForTick(rt){const it=this.ticks;return rt<0||rt>it.length-1?null:this.getPixelForValue(it[rt].value)}getPixelForDecimal(rt){this._reversePixels&&(rt=1-rt);const it=this._startPixel+rt*this._length;return _int16Range(this._alignToPixels?_alignPixel(this.chart,it,0):it)}getDecimalForPixel(rt){const it=(rt-this._startPixel)/this._length;return this._reversePixels?1-it:it}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:rt,max:it}=this;return rt<0&&it<0?it:rt>0&&it>0?rt:0}getContext(rt){const it=this.ticks||[];if(rt>=0&&rt<it.length){const st=it[rt];return st.$context||(st.$context=createTickContext(this.getContext(),rt,st))}return this.$context||(this.$context=createScaleContext(this.chart.getContext(),this))}_tickSize(){const rt=this.options.ticks,it=toRadians(this.labelRotation),st=Math.abs(Math.cos(it)),lt=Math.abs(Math.sin(it)),ct=this._getLabelSizes(),ut=rt.autoSkipPadding||0,dt=ct?ct.widest.width+ut:0,ht=ct?ct.highest.height+ut:0;return this.isHorizontal()?ht*st>dt*lt?dt/st:ht/lt:ht*lt<dt*st?ht/st:dt/lt}_isVisible(){const rt=this.options.display;return rt!=="auto"?!!rt:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(rt){const it=this.axis,st=this.chart,lt=this.options,{grid:ct,position:ut,border:dt}=lt,ht=ct.offset,ft=this.isHorizontal(),mt=this.ticks.length+(ht?1:0),gt=getTickMarkLength(ct),xt=[],yt=dt.setContext(this.getContext()),vt=yt.display?yt.width:0,St=vt/2,wt=function(Ut){return _alignPixel(st,Ut,vt)};let Et,Rt,Tt,It,At,Dt,jt,Ft,Lt,Mt,Ot,Nt;if(ut==="top")Et=wt(this.bottom),Dt=this.bottom-gt,Ft=Et-St,Mt=wt(rt.top)+St,Nt=rt.bottom;else if(ut==="bottom")Et=wt(this.top),Mt=rt.top,Nt=wt(rt.bottom)-St,Dt=Et+St,Ft=this.top+gt;else if(ut==="left")Et=wt(this.right),At=this.right-gt,jt=Et-St,Lt=wt(rt.left)+St,Ot=rt.right;else if(ut==="right")Et=wt(this.left),Lt=rt.left,Ot=wt(rt.right)-St,At=Et+St,jt=this.left+gt;else if(it==="x"){if(ut==="center")Et=wt((rt.top+rt.bottom)/2+.5);else if(isObject(ut)){const Ut=Object.keys(ut)[0],zt=ut[Ut];Et=wt(this.chart.scales[Ut].getPixelForValue(zt))}Mt=rt.top,Nt=rt.bottom,Dt=Et+St,Ft=Dt+gt}else if(it==="y"){if(ut==="center")Et=wt((rt.left+rt.right)/2);else if(isObject(ut)){const Ut=Object.keys(ut)[0],zt=ut[Ut];Et=wt(this.chart.scales[Ut].getPixelForValue(zt))}At=Et-St,jt=At-gt,Lt=rt.left,Ot=rt.right}const $t=valueOrDefault(lt.ticks.maxTicksLimit,mt),Vt=Math.max(1,Math.ceil(mt/$t));for(Rt=0;Rt<mt;Rt+=Vt){const Ut=this.getContext(Rt),zt=ct.setContext(Ut),Bt=dt.setContext(Ut),Ht=zt.lineWidth,Gt=zt.color,Xt=Bt.dash||[],Zt=Bt.dashOffset,hr=zt.tickWidth,nr=zt.tickColor,ir=zt.tickBorderDash||[],yr=zt.tickBorderDashOffset;Tt=getPixelForGridLine(this,Rt,ht),Tt!==void 0&&(It=_alignPixel(st,Tt,Ht),ft?At=jt=Lt=Ot=It:Dt=Ft=Mt=Nt=It,xt.push({tx1:At,ty1:Dt,tx2:jt,ty2:Ft,x1:Lt,y1:Mt,x2:Ot,y2:Nt,width:Ht,color:Gt,borderDash:Xt,borderDashOffset:Zt,tickWidth:hr,tickColor:nr,tickBorderDash:ir,tickBorderDashOffset:yr}))}return this._ticksLength=mt,this._borderValue=Et,xt}_computeLabelItems(rt){const it=this.axis,st=this.options,{position:lt,ticks:ct}=st,ut=this.isHorizontal(),dt=this.ticks,{align:ht,crossAlign:ft,padding:pt,mirror:mt}=ct,gt=getTickMarkLength(st.grid),xt=gt+pt,yt=mt?-pt:xt,vt=-toRadians(this.labelRotation),St=[];let wt,Et,Rt,Tt,It,At,Dt,jt,Ft,Lt,Mt,Ot,Nt="middle";if(lt==="top")At=this.bottom-yt,Dt=this._getXAxisLabelAlignment();else if(lt==="bottom")At=this.top+yt,Dt=this._getXAxisLabelAlignment();else if(lt==="left"){const Vt=this._getYAxisLabelAlignment(gt);Dt=Vt.textAlign,It=Vt.x}else if(lt==="right"){const Vt=this._getYAxisLabelAlignment(gt);Dt=Vt.textAlign,It=Vt.x}else if(it==="x"){if(lt==="center")At=(rt.top+rt.bottom)/2+xt;else if(isObject(lt)){const Vt=Object.keys(lt)[0],Ut=lt[Vt];At=this.chart.scales[Vt].getPixelForValue(Ut)+xt}Dt=this._getXAxisLabelAlignment()}else if(it==="y"){if(lt==="center")It=(rt.left+rt.right)/2-xt;else if(isObject(lt)){const Vt=Object.keys(lt)[0],Ut=lt[Vt];It=this.chart.scales[Vt].getPixelForValue(Ut)}Dt=this._getYAxisLabelAlignment(gt).textAlign}it==="y"&&(ht==="start"?Nt="top":ht==="end"&&(Nt="bottom"));const $t=this._getLabelSizes();for(wt=0,Et=dt.length;wt<Et;++wt){Rt=dt[wt],Tt=Rt.label;const Vt=ct.setContext(this.getContext(wt));jt=this.getPixelForTick(wt)+ct.labelOffset,Ft=this._resolveTickFontOptions(wt),Lt=Ft.lineHeight,Mt=isArray(Tt)?Tt.length:1;const Ut=Mt/2,zt=Vt.color,Bt=Vt.textStrokeColor,Ht=Vt.textStrokeWidth;let Gt=Dt;ut?(It=jt,Dt==="inner"&&(wt===Et-1?Gt=this.options.reverse?"left":"right":wt===0?Gt=this.options.reverse?"right":"left":Gt="center"),lt==="top"?ft==="near"||vt!==0?Ot=-Mt*Lt+Lt/2:ft==="center"?Ot=-$t.highest.height/2-Ut*Lt+Lt:Ot=-$t.highest.height+Lt/2:ft==="near"||vt!==0?Ot=Lt/2:ft==="center"?Ot=$t.highest.height/2-Ut*Lt:Ot=$t.highest.height-Mt*Lt,mt&&(Ot*=-1),vt!==0&&!Vt.showLabelBackdrop&&(It+=Lt/2*Math.sin(vt))):(At=jt,Ot=(1-Mt)*Lt/2);let Xt;if(Vt.showLabelBackdrop){const Zt=toPadding(Vt.backdropPadding),hr=$t.heights[wt],nr=$t.widths[wt];let ir=Ot-Zt.top,yr=0-Zt.left;switch(Nt){case"middle":ir-=hr/2;break;case"bottom":ir-=hr;break}switch(Dt){case"center":yr-=nr/2;break;case"right":yr-=nr;break;case"inner":wt===Et-1?yr-=nr:wt>0&&(yr-=nr/2);break}Xt={left:yr,top:ir,width:nr+Zt.width,height:hr+Zt.height,color:Vt.backdropColor}}St.push({label:Tt,font:Ft,textOffset:Ot,options:{rotation:vt,color:zt,strokeColor:Bt,strokeWidth:Ht,textAlign:Gt,textBaseline:Nt,translation:[It,At],backdrop:Xt}})}return St}_getXAxisLabelAlignment(){const{position:rt,ticks:it}=this.options;if(-toRadians(this.labelRotation))return rt==="top"?"left":"right";let lt="center";return it.align==="start"?lt="left":it.align==="end"?lt="right":it.align==="inner"&&(lt="inner"),lt}_getYAxisLabelAlignment(rt){const{position:it,ticks:{crossAlign:st,mirror:lt,padding:ct}}=this.options,ut=this._getLabelSizes(),dt=rt+ct,ht=ut.widest.width;let ft,pt;return it==="left"?lt?(pt=this.right+ct,st==="near"?ft="left":st==="center"?(ft="center",pt+=ht/2):(ft="right",pt+=ht)):(pt=this.right-dt,st==="near"?ft="right":st==="center"?(ft="center",pt-=ht/2):(ft="left",pt=this.left)):it==="right"?lt?(pt=this.left+ct,st==="near"?ft="right":st==="center"?(ft="center",pt-=ht/2):(ft="left",pt-=ht)):(pt=this.left+dt,st==="near"?ft="left":st==="center"?(ft="center",pt+=ht/2):(ft="right",pt=this.right)):ft="right",{textAlign:ft,x:pt}}_computeLabelArea(){if(this.options.ticks.mirror)return;const rt=this.chart,it=this.options.position;if(it==="left"||it==="right")return{top:0,left:this.left,bottom:rt.height,right:this.right};if(it==="top"||it==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:rt.width}}drawBackground(){const{ctx:rt,options:{backgroundColor:it},left:st,top:lt,width:ct,height:ut}=this;it&&(rt.save(),rt.fillStyle=it,rt.fillRect(st,lt,ct,ut),rt.restore())}getLineWidthForValue(rt){const it=this.options.grid;if(!this._isVisible()||!it.display)return 0;const lt=this.ticks.findIndex(ct=>ct.value===rt);return lt>=0?it.setContext(this.getContext(lt)).lineWidth:0}drawGrid(rt){const it=this.options.grid,st=this.ctx,lt=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(rt));let ct,ut;const dt=(ht,ft,pt)=>{!pt.width||!pt.color||(st.save(),st.lineWidth=pt.width,st.strokeStyle=pt.color,st.setLineDash(pt.borderDash||[]),st.lineDashOffset=pt.borderDashOffset,st.beginPath(),st.moveTo(ht.x,ht.y),st.lineTo(ft.x,ft.y),st.stroke(),st.restore())};if(it.display)for(ct=0,ut=lt.length;ct<ut;++ct){const ht=lt[ct];it.drawOnChartArea&&dt({x:ht.x1,y:ht.y1},{x:ht.x2,y:ht.y2},ht),it.drawTicks&&dt({x:ht.tx1,y:ht.ty1},{x:ht.tx2,y:ht.ty2},{color:ht.tickColor,width:ht.tickWidth,borderDash:ht.tickBorderDash,borderDashOffset:ht.tickBorderDashOffset})}}drawBorder(){const{chart:rt,ctx:it,options:{border:st,grid:lt}}=this,ct=st.setContext(this.getContext()),ut=st.display?ct.width:0;if(!ut)return;const dt=lt.setContext(this.getContext(0)).lineWidth,ht=this._borderValue;let ft,pt,mt,gt;this.isHorizontal()?(ft=_alignPixel(rt,this.left,ut)-ut/2,pt=_alignPixel(rt,this.right,dt)+dt/2,mt=gt=ht):(mt=_alignPixel(rt,this.top,ut)-ut/2,gt=_alignPixel(rt,this.bottom,dt)+dt/2,ft=pt=ht),it.save(),it.lineWidth=ct.width,it.strokeStyle=ct.color,it.beginPath(),it.moveTo(ft,mt),it.lineTo(pt,gt),it.stroke(),it.restore()}drawLabels(rt){if(!this.options.ticks.display)return;const st=this.ctx,lt=this._computeLabelArea();lt&&clipArea(st,lt);const ct=this.getLabelItems(rt);for(const ut of ct){const dt=ut.options,ht=ut.font,ft=ut.label,pt=ut.textOffset;renderText(st,ft,0,pt,ht,dt)}lt&&unclipArea(st)}drawTitle(){const{ctx:rt,options:{position:it,title:st,reverse:lt}}=this;if(!st.display)return;const ct=toFont(st.font),ut=toPadding(st.padding),dt=st.align;let ht=ct.lineHeight/2;it==="bottom"||it==="center"||isObject(it)?(ht+=ut.bottom,isArray(st.text)&&(ht+=ct.lineHeight*(st.text.length-1))):ht+=ut.top;const{titleX:ft,titleY:pt,maxWidth:mt,rotation:gt}=titleArgs(this,ht,it,dt);renderText(rt,st.text,0,0,ct,{color:st.color,maxWidth:mt,rotation:gt,textAlign:titleAlign(dt,it,lt),textBaseline:"middle",translation:[ft,pt]})}draw(rt){this._isVisible()&&(this.drawBackground(),this.drawGrid(rt),this.drawBorder(),this.drawTitle(),this.drawLabels(rt))}_layers(){const rt=this.options,it=rt.ticks&&rt.ticks.z||0,st=valueOrDefault(rt.grid&&rt.grid.z,-1),lt=valueOrDefault(rt.border&&rt.border.z,0);return!this._isVisible()||this.draw!==Scale.prototype.draw?[{z:it,draw:ct=>{this.draw(ct)}}]:[{z:st,draw:ct=>{this.drawBackground(),this.drawGrid(ct),this.drawTitle()}},{z:lt,draw:()=>{this.drawBorder()}},{z:it,draw:ct=>{this.drawLabels(ct)}}]}getMatchingVisibleMetas(rt){const it=this.chart.getSortedVisibleDatasetMetas(),st=this.axis+"AxisID",lt=[];let ct,ut;for(ct=0,ut=it.length;ct<ut;++ct){const dt=it[ct];dt[st]===this.id&&(!rt||dt.type===rt)&&lt.push(dt)}return lt}_resolveTickFontOptions(rt){const it=this.options.ticks.setContext(this.getContext(rt));return toFont(it.font)}_maxDigits(){const rt=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/rt}}class TypedRegistry{constructor(rt,it,st){this.type=rt,this.scope=it,this.override=st,this.items=Object.create(null)}isForType(rt){return Object.prototype.isPrototypeOf.call(this.type.prototype,rt.prototype)}register(rt){const it=Object.getPrototypeOf(rt);let st;isIChartComponent(it)&&(st=this.register(it));const lt=this.items,ct=rt.id,ut=this.scope+"."+ct;if(!ct)throw new Error("class does not have id: "+rt);return ct in lt||(lt[ct]=rt,registerDefaults(rt,ut,st),this.override&&defaults.override(rt.id,rt.overrides)),ut}get(rt){return this.items[rt]}unregister(rt){const it=this.items,st=rt.id,lt=this.scope;st in it&&delete it[st],lt&&st in defaults[lt]&&(delete defaults[lt][st],this.override&&delete overrides[st])}}function registerDefaults(nt,rt,it){const st=merge(Object.create(null),[it?defaults.get(it):{},defaults.get(rt),nt.defaults]);defaults.set(rt,st),nt.defaultRoutes&&routeDefaults(rt,nt.defaultRoutes),nt.descriptors&&defaults.describe(rt,nt.descriptors)}function routeDefaults(nt,rt){Object.keys(rt).forEach(it=>{const st=it.split("."),lt=st.pop(),ct=[nt].concat(st).join("."),ut=rt[it].split("."),dt=ut.pop(),ht=ut.join(".");defaults.route(ct,lt,ht,dt)})}function isIChartComponent(nt){return"id"in nt&&"defaults"in nt}class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element$1,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...rt){this._each("register",rt)}remove(...rt){this._each("unregister",rt)}addControllers(...rt){this._each("register",rt,this.controllers)}addElements(...rt){this._each("register",rt,this.elements)}addPlugins(...rt){this._each("register",rt,this.plugins)}addScales(...rt){this._each("register",rt,this.scales)}getController(rt){return this._get(rt,this.controllers,"controller")}getElement(rt){return this._get(rt,this.elements,"element")}getPlugin(rt){return this._get(rt,this.plugins,"plugin")}getScale(rt){return this._get(rt,this.scales,"scale")}removeControllers(...rt){this._each("unregister",rt,this.controllers)}removeElements(...rt){this._each("unregister",rt,this.elements)}removePlugins(...rt){this._each("unregister",rt,this.plugins)}removeScales(...rt){this._each("unregister",rt,this.scales)}_each(rt,it,st){[...it].forEach(lt=>{const ct=st||this._getRegistryForType(lt);st||ct.isForType(lt)||ct===this.plugins&&lt.id?this._exec(rt,ct,lt):each(lt,ut=>{const dt=st||this._getRegistryForType(ut);this._exec(rt,dt,ut)})})}_exec(rt,it,st){const lt=_capitalize(rt);callback(st["before"+lt],[],st),it[rt](st),callback(st["after"+lt],[],st)}_getRegistryForType(rt){for(let it=0;it<this._typedRegistries.length;it++){const st=this._typedRegistries[it];if(st.isForType(rt))return st}return this.plugins}_get(rt,it,st){const lt=it.get(rt);if(lt===void 0)throw new Error('"'+rt+'" is not a registered '+st+".");return lt}}var registry=new Registry;class PluginService{constructor(){this._init=[]}notify(rt,it,st,lt){it==="beforeInit"&&(this._init=this._createDescriptors(rt,!0),this._notify(this._init,rt,"install"));const ct=lt?this._descriptors(rt).filter(lt):this._descriptors(rt),ut=this._notify(ct,rt,it,st);return it==="afterDestroy"&&(this._notify(ct,rt,"stop"),this._notify(this._init,rt,"uninstall")),ut}_notify(rt,it,st,lt){lt=lt||{};for(const ct of rt){const ut=ct.plugin,dt=ut[st],ht=[it,lt,ct.options];if(callback(dt,ht,ut)===!1&&lt.cancelable)return!1}return!0}invalidate(){isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(rt){if(this._cache)return this._cache;const it=this._cache=this._createDescriptors(rt);return this._notifyStateChanges(rt),it}_createDescriptors(rt,it){const st=rt&&rt.config,lt=valueOrDefault(st.options&&st.options.plugins,{}),ct=allPlugins(st);return lt===!1&&!it?[]:createDescriptors(rt,ct,lt,it)}_notifyStateChanges(rt){const it=this._oldCache||[],st=this._cache,lt=(ct,ut)=>ct.filter(dt=>!ut.some(ht=>dt.plugin.id===ht.plugin.id));this._notify(lt(it,st),rt,"stop"),this._notify(lt(st,it),rt,"start")}}function allPlugins(nt){const rt={},it=[],st=Object.keys(registry.plugins.items);for(let ct=0;ct<st.length;ct++)it.push(registry.getPlugin(st[ct]));const lt=nt.plugins||[];for(let ct=0;ct<lt.length;ct++){const ut=lt[ct];it.indexOf(ut)===-1&&(it.push(ut),rt[ut.id]=!0)}return{plugins:it,localIds:rt}}function getOpts(nt,rt){return!rt&&nt===!1?null:nt===!0?{}:nt}function createDescriptors(nt,{plugins:rt,localIds:it},st,lt){const ct=[],ut=nt.getContext();for(const dt of rt){const ht=dt.id,ft=getOpts(st[ht],lt);ft!==null&&ct.push({plugin:dt,options:pluginOpts(nt.config,{plugin:dt,local:it[ht]},ft,ut)})}return ct}function pluginOpts(nt,{plugin:rt,local:it},st,lt){const ct=nt.pluginScopeKeys(rt),ut=nt.getOptionScopes(st,ct);return it&&rt.defaults&&ut.push(rt.defaults),nt.createResolver(ut,lt,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(nt,rt){const it=defaults.datasets[nt]||{};return((rt.datasets||{})[nt]||{}).indexAxis||rt.indexAxis||it.indexAxis||"x"}function getAxisFromDefaultScaleID(nt,rt){let it=nt;return nt==="_index_"?it=rt:nt==="_value_"&&(it=rt==="x"?"y":"x"),it}function getDefaultScaleIDFromAxis(nt,rt){return nt===rt?"_index_":"_value_"}function idMatchesAxis(nt){if(nt==="x"||nt==="y"||nt==="r")return nt}function axisFromPosition(nt){if(nt==="top"||nt==="bottom")return"x";if(nt==="left"||nt==="right")return"y"}function determineAxis(nt,...rt){if(idMatchesAxis(nt))return nt;for(const it of rt){const st=it.axis||axisFromPosition(it.position)||nt.length>1&&idMatchesAxis(nt[0].toLowerCase());if(st)return st}throw new Error(`Cannot determine type of '${nt}' axis. Please provide 'axis' or 'position' option.`)}function getAxisFromDataset(nt,rt,it){if(it[rt+"AxisID"]===nt)return{axis:rt}}function retrieveAxisFromDatasets(nt,rt){if(rt.data&&rt.data.datasets){const it=rt.data.datasets.filter(st=>st.xAxisID===nt||st.yAxisID===nt);if(it.length)return getAxisFromDataset(nt,"x",it[0])||getAxisFromDataset(nt,"y",it[0])}return{}}function mergeScaleConfig(nt,rt){const it=overrides[nt.type]||{scales:{}},st=rt.scales||{},lt=getIndexAxis(nt.type,rt),ct=Object.create(null);return Object.keys(st).forEach(ut=>{const dt=st[ut];if(!isObject(dt))return console.error(`Invalid scale configuration for scale: ${ut}`);if(dt._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${ut}`);const ht=determineAxis(ut,dt,retrieveAxisFromDatasets(ut,nt),defaults.scales[dt.type]),ft=getDefaultScaleIDFromAxis(ht,lt),pt=it.scales||{};ct[ut]=mergeIf(Object.create(null),[{axis:ht},dt,pt[ht],pt[ft]])}),nt.data.datasets.forEach(ut=>{const dt=ut.type||nt.type,ht=ut.indexAxis||getIndexAxis(dt,rt),pt=(overrides[dt]||{}).scales||{};Object.keys(pt).forEach(mt=>{const gt=getAxisFromDefaultScaleID(mt,ht),xt=ut[gt+"AxisID"]||gt;ct[xt]=ct[xt]||Object.create(null),mergeIf(ct[xt],[{axis:gt},st[xt],pt[mt]])})}),Object.keys(ct).forEach(ut=>{const dt=ct[ut];mergeIf(dt,[defaults.scales[dt.type],defaults.scale])}),ct}function initOptions(nt){const rt=nt.options||(nt.options={});rt.plugins=valueOrDefault(rt.plugins,{}),rt.scales=mergeScaleConfig(nt,rt)}function initData(nt){return nt=nt||{},nt.datasets=nt.datasets||[],nt.labels=nt.labels||[],nt}function initConfig(nt){return nt=nt||{},nt.data=initData(nt.data),initOptions(nt),nt}const keyCache=new Map,keysCached=new Set;function cachedKeys(nt,rt){let it=keyCache.get(nt);return it||(it=rt(),keyCache.set(nt,it),keysCached.add(it)),it}const addIfFound=(nt,rt,it)=>{const st=resolveObjectKey(rt,it);st!==void 0&&nt.add(st)};class Config{constructor(rt){this._config=initConfig(rt),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(rt){this._config.type=rt}get data(){return this._config.data}set data(rt){this._config.data=initData(rt)}get options(){return this._config.options}set options(rt){this._config.options=rt}get plugins(){return this._config.plugins}update(){const rt=this._config;this.clearCache(),initOptions(rt)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(rt){return cachedKeys(rt,()=>[[`datasets.${rt}`,""]])}datasetAnimationScopeKeys(rt,it){return cachedKeys(`${rt}.transition.${it}`,()=>[[`datasets.${rt}.transitions.${it}`,`transitions.${it}`],[`datasets.${rt}`,""]])}datasetElementScopeKeys(rt,it){return cachedKeys(`${rt}-${it}`,()=>[[`datasets.${rt}.elements.${it}`,`datasets.${rt}`,`elements.${it}`,""]])}pluginScopeKeys(rt){const it=rt.id,st=this.type;return cachedKeys(`${st}-plugin-${it}`,()=>[[`plugins.${it}`,...rt.additionalOptionScopes||[]]])}_cachedScopes(rt,it){const st=this._scopeCache;let lt=st.get(rt);return(!lt||it)&&(lt=new Map,st.set(rt,lt)),lt}getOptionScopes(rt,it,st){const{options:lt,type:ct}=this,ut=this._cachedScopes(rt,st),dt=ut.get(it);if(dt)return dt;const ht=new Set;it.forEach(pt=>{rt&&(ht.add(rt),pt.forEach(mt=>addIfFound(ht,rt,mt))),pt.forEach(mt=>addIfFound(ht,lt,mt)),pt.forEach(mt=>addIfFound(ht,overrides[ct]||{},mt)),pt.forEach(mt=>addIfFound(ht,defaults,mt)),pt.forEach(mt=>addIfFound(ht,descriptors,mt))});const ft=Array.from(ht);return ft.length===0&&ft.push(Object.create(null)),keysCached.has(it)&&ut.set(it,ft),ft}chartOptionScopes(){const{options:rt,type:it}=this;return[rt,overrides[it]||{},defaults.datasets[it]||{},{type:it},defaults,descriptors]}resolveNamedOptions(rt,it,st,lt=[""]){const ct={$shared:!0},{resolver:ut,subPrefixes:dt}=getResolver(this._resolverCache,rt,lt);let ht=ut;if(needContext(ut,it)){ct.$shared=!1,st=isFunction(st)?st():st;const ft=this.createResolver(rt,st,dt);ht=_attachContext(ut,st,ft)}for(const ft of it)ct[ft]=ht[ft];return ct}createResolver(rt,it,st=[""],lt){const{resolver:ct}=getResolver(this._resolverCache,rt,st);return isObject(it)?_attachContext(ct,it,void 0,lt):ct}}function getResolver(nt,rt,it){let st=nt.get(rt);st||(st=new Map,nt.set(rt,st));const lt=it.join();let ct=st.get(lt);return ct||(ct={resolver:_createResolver(rt,it),subPrefixes:it.filter(dt=>!dt.toLowerCase().includes("hover"))},st.set(lt,ct)),ct}const hasFunction=nt=>isObject(nt)&&Object.getOwnPropertyNames(nt).some(rt=>isFunction(nt[rt]));function needContext(nt,rt){const{isScriptable:it,isIndexable:st}=_descriptors(nt);for(const lt of rt){const ct=it(lt),ut=st(lt),dt=(ut||ct)&&nt[lt];if(ct&&(isFunction(dt)||hasFunction(dt))||ut&&isArray(dt))return!0}return!1}var version$2="4.4.1";const KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(nt,rt){return nt==="top"||nt==="bottom"||KNOWN_POSITIONS.indexOf(nt)===-1&&rt==="x"}function compare2Level(nt,rt){return function(it,st){return it[nt]===st[nt]?it[rt]-st[rt]:it[nt]-st[nt]}}function onAnimationsComplete(nt){const rt=nt.chart,it=rt.options.animation;rt.notifyPlugins("afterRender"),callback(it&&it.onComplete,[nt],rt)}function onAnimationProgress(nt){const rt=nt.chart,it=rt.options.animation;callback(it&&it.onProgress,[nt],rt)}function getCanvas(nt){return _isDomSupported()&&typeof nt=="string"?nt=document.getElementById(nt):nt&&nt.length&&(nt=nt[0]),nt&&nt.canvas&&(nt=nt.canvas),nt}const instances={},getChart=nt=>{const rt=getCanvas(nt);return Object.values(instances).filter(it=>it.canvas===rt).pop()};function moveNumericKeys(nt,rt,it){const st=Object.keys(nt);for(const lt of st){const ct=+lt;if(ct>=rt){const ut=nt[lt];delete nt[lt],(it>0||ct>rt)&&(nt[ct+it]=ut)}}}function determineLastEvent(nt,rt,it,st){return!it||nt.type==="mouseout"?null:st?rt:nt}function getSizeForArea(nt,rt,it){return nt.options.clip?nt[it]:rt[it]}function getDatasetArea(nt,rt){const{xScale:it,yScale:st}=nt;return it&&st?{left:getSizeForArea(it,rt,"left"),right:getSizeForArea(it,rt,"right"),top:getSizeForArea(st,rt,"top"),bottom:getSizeForArea(st,rt,"bottom")}:rt}var mm;let Chart$1=(mm=class{static register(...rt){registry.add(...rt),invalidatePlugins()}static unregister(...rt){registry.remove(...rt),invalidatePlugins()}constructor(rt,it){const st=this.config=new Config(it),lt=getCanvas(rt),ct=getChart(lt);if(ct)throw new Error("Canvas is already in use. Chart with ID '"+ct.id+"' must be destroyed before the canvas with ID '"+ct.canvas.id+"' can be reused.");const ut=st.createResolver(st.chartOptionScopes(),this.getContext());this.platform=new(st.platform||_detectPlatform(lt)),this.platform.updateConfig(st);const dt=this.platform.acquireContext(lt,ut.aspectRatio),ht=dt&&dt.canvas,ft=ht&&ht.height,pt=ht&&ht.width;if(this.id=uid(),this.ctx=dt,this.canvas=ht,this.width=pt,this.height=ft,this._options=ut,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=debounce$2(mt=>this.update(mt),ut.resizeDelay||0),this._dataChanges=[],instances[this.id]=this,!dt||!ht){console.error("Failed to create chart: can't acquire context from the given item");return}animator.listen(this,"complete",onAnimationsComplete),animator.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:rt,maintainAspectRatio:it},width:st,height:lt,_aspectRatio:ct}=this;return isNullOrUndef(rt)?it&&ct?ct:lt?st/lt:null:rt}get data(){return this.config.data}set data(rt){this.config.data=rt}get options(){return this._options}set options(rt){this.config.options=rt}get registry(){return registry}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return clearCanvas(this.canvas,this.ctx),this}stop(){return animator.stop(this),this}resize(rt,it){animator.running(this)?this._resizeBeforeDraw={width:rt,height:it}:this._resize(rt,it)}_resize(rt,it){const st=this.options,lt=this.canvas,ct=st.maintainAspectRatio&&this.aspectRatio,ut=this.platform.getMaximumSize(lt,rt,it,ct),dt=st.devicePixelRatio||this.platform.getDevicePixelRatio(),ht=this.width?"resize":"attach";this.width=ut.width,this.height=ut.height,this._aspectRatio=this.aspectRatio,retinaScale(this,dt,!0)&&(this.notifyPlugins("resize",{size:ut}),callback(st.onResize,[this,ut],this),this.attached&&this._doResize(ht)&&this.render())}ensureScalesHaveIDs(){const it=this.options.scales||{};each(it,(st,lt)=>{st.id=lt})}buildOrUpdateScales(){const rt=this.options,it=rt.scales,st=this.scales,lt=Object.keys(st).reduce((ut,dt)=>(ut[dt]=!1,ut),{});let ct=[];it&&(ct=ct.concat(Object.keys(it).map(ut=>{const dt=it[ut],ht=determineAxis(ut,dt),ft=ht==="r",pt=ht==="x";return{options:dt,dposition:ft?"chartArea":pt?"bottom":"left",dtype:ft?"radialLinear":pt?"category":"linear"}}))),each(ct,ut=>{const dt=ut.options,ht=dt.id,ft=determineAxis(ht,dt),pt=valueOrDefault(dt.type,ut.dtype);(dt.position===void 0||positionIsHorizontal(dt.position,ft)!==positionIsHorizontal(ut.dposition))&&(dt.position=ut.dposition),lt[ht]=!0;let mt=null;if(ht in st&&st[ht].type===pt)mt=st[ht];else{const gt=registry.getScale(pt);mt=new gt({id:ht,type:pt,ctx:this.ctx,chart:this}),st[mt.id]=mt}mt.init(dt,rt)}),each(lt,(ut,dt)=>{ut||delete st[dt]}),each(st,ut=>{layouts.configure(this,ut,ut.options),layouts.addBox(this,ut)})}_updateMetasets(){const rt=this._metasets,it=this.data.datasets.length,st=rt.length;if(rt.sort((lt,ct)=>lt.index-ct.index),st>it){for(let lt=it;lt<st;++lt)this._destroyDatasetMeta(lt);rt.splice(it,st-it)}this._sortedMetasets=rt.slice(0).sort(compare2Level("order","index"))}_removeUnreferencedMetasets(){const{_metasets:rt,data:{datasets:it}}=this;rt.length>it.length&&delete this._stacks,rt.forEach((st,lt)=>{it.filter(ct=>ct===st._dataset).length===0&&this._destroyDatasetMeta(lt)})}buildOrUpdateControllers(){const rt=[],it=this.data.datasets;let st,lt;for(this._removeUnreferencedMetasets(),st=0,lt=it.length;st<lt;st++){const ct=it[st];let ut=this.getDatasetMeta(st);const dt=ct.type||this.config.type;if(ut.type&&ut.type!==dt&&(this._destroyDatasetMeta(st),ut=this.getDatasetMeta(st)),ut.type=dt,ut.indexAxis=ct.indexAxis||getIndexAxis(dt,this.options),ut.order=ct.order||0,ut.index=st,ut.label=""+ct.label,ut.visible=this.isDatasetVisible(st),ut.controller)ut.controller.updateIndex(st),ut.controller.linkScales();else{const ht=registry.getController(dt),{datasetElementType:ft,dataElementType:pt}=defaults.datasets[dt];Object.assign(ht,{dataElementType:registry.getElement(pt),datasetElementType:ft&&registry.getElement(ft)}),ut.controller=new ht(this,st),rt.push(ut.controller)}}return this._updateMetasets(),rt}_resetElements(){each(this.data.datasets,(rt,it)=>{this.getDatasetMeta(it).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(rt){const it=this.config;it.update();const st=this._options=it.createResolver(it.chartOptionScopes(),this.getContext()),lt=this._animationsDisabled=!st.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:rt,cancelable:!0})===!1)return;const ct=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let ut=0;for(let ft=0,pt=this.data.datasets.length;ft<pt;ft++){const{controller:mt}=this.getDatasetMeta(ft),gt=!lt&&ct.indexOf(mt)===-1;mt.buildOrUpdateElements(gt),ut=Math.max(+mt.getMaxOverflow(),ut)}ut=this._minPadding=st.layout.autoPadding?ut:0,this._updateLayout(ut),lt||each(ct,ft=>{ft.reset()}),this._updateDatasets(rt),this.notifyPlugins("afterUpdate",{mode:rt}),this._layers.sort(compare2Level("z","_idx"));const{_active:dt,_lastEvent:ht}=this;ht?this._eventHandler(ht,!0):dt.length&&this._updateHoverStyles(dt,dt,!0),this.render()}_updateScales(){each(this.scales,rt=>{layouts.removeBox(this,rt)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const rt=this.options,it=new Set(Object.keys(this._listeners)),st=new Set(rt.events);(!setsEqual(it,st)||!!this._responsiveListeners!==rt.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:rt}=this,it=this._getUniformDataChanges()||[];for(const{method:st,start:lt,count:ct}of it){const ut=st==="_removeElements"?-ct:ct;moveNumericKeys(rt,lt,ut)}}_getUniformDataChanges(){const rt=this._dataChanges;if(!rt||!rt.length)return;this._dataChanges=[];const it=this.data.datasets.length,st=ct=>new Set(rt.filter(ut=>ut[0]===ct).map((ut,dt)=>dt+","+ut.splice(1).join(","))),lt=st(0);for(let ct=1;ct<it;ct++)if(!setsEqual(lt,st(ct)))return;return Array.from(lt).map(ct=>ct.split(",")).map(ct=>({method:ct[1],start:+ct[2],count:+ct[3]}))}_updateLayout(rt){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;layouts.update(this,this.width,this.height,rt);const it=this.chartArea,st=it.width<=0||it.height<=0;this._layers=[],each(this.boxes,lt=>{st&&lt.position==="chartArea"||(lt.configure&&lt.configure(),this._layers.push(...lt._layers()))},this),this._layers.forEach((lt,ct)=>{lt._idx=ct}),this.notifyPlugins("afterLayout")}_updateDatasets(rt){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:rt,cancelable:!0})!==!1){for(let it=0,st=this.data.datasets.length;it<st;++it)this.getDatasetMeta(it).controller.configure();for(let it=0,st=this.data.datasets.length;it<st;++it)this._updateDataset(it,isFunction(rt)?rt({datasetIndex:it}):rt);this.notifyPlugins("afterDatasetsUpdate",{mode:rt})}}_updateDataset(rt,it){const st=this.getDatasetMeta(rt),lt={meta:st,index:rt,mode:it,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",lt)!==!1&&(st.controller._update(it),lt.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",lt))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(animator.has(this)?this.attached&&!animator.running(this)&&animator.start(this):(this.draw(),onAnimationsComplete({chart:this})))}draw(){let rt;if(this._resizeBeforeDraw){const{width:st,height:lt}=this._resizeBeforeDraw;this._resize(st,lt),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const it=this._layers;for(rt=0;rt<it.length&&it[rt].z<=0;++rt)it[rt].draw(this.chartArea);for(this._drawDatasets();rt<it.length;++rt)it[rt].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(rt){const it=this._sortedMetasets,st=[];let lt,ct;for(lt=0,ct=it.length;lt<ct;++lt){const ut=it[lt];(!rt||ut.visible)&&st.push(ut)}return st}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const rt=this.getSortedVisibleDatasetMetas();for(let it=rt.length-1;it>=0;--it)this._drawDataset(rt[it]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(rt){const it=this.ctx,st=rt._clip,lt=!st.disabled,ct=getDatasetArea(rt,this.chartArea),ut={meta:rt,index:rt.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",ut)!==!1&&(lt&&clipArea(it,{left:st.left===!1?0:ct.left-st.left,right:st.right===!1?this.width:ct.right+st.right,top:st.top===!1?0:ct.top-st.top,bottom:st.bottom===!1?this.height:ct.bottom+st.bottom}),rt.controller.draw(),lt&&unclipArea(it),ut.cancelable=!1,this.notifyPlugins("afterDatasetDraw",ut))}isPointInArea(rt){return _isPointInArea(rt,this.chartArea,this._minPadding)}getElementsAtEventForMode(rt,it,st,lt){const ct=Interaction.modes[it];return typeof ct=="function"?ct(this,rt,st,lt):[]}getDatasetMeta(rt){const it=this.data.datasets[rt],st=this._metasets;let lt=st.filter(ct=>ct&&ct._dataset===it).pop();return lt||(lt={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:it&&it.order||0,index:rt,_dataset:it,_parsed:[],_sorted:!1},st.push(lt)),lt}getContext(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(rt){const it=this.data.datasets[rt];if(!it)return!1;const st=this.getDatasetMeta(rt);return typeof st.hidden=="boolean"?!st.hidden:!it.hidden}setDatasetVisibility(rt,it){const st=this.getDatasetMeta(rt);st.hidden=!it}toggleDataVisibility(rt){this._hiddenIndices[rt]=!this._hiddenIndices[rt]}getDataVisibility(rt){return!this._hiddenIndices[rt]}_updateVisibility(rt,it,st){const lt=st?"show":"hide",ct=this.getDatasetMeta(rt),ut=ct.controller._resolveAnimations(void 0,lt);defined(it)?(ct.data[it].hidden=!st,this.update()):(this.setDatasetVisibility(rt,st),ut.update(ct,{visible:st}),this.update(dt=>dt.datasetIndex===rt?lt:void 0))}hide(rt,it){this._updateVisibility(rt,it,!1)}show(rt,it){this._updateVisibility(rt,it,!0)}_destroyDatasetMeta(rt){const it=this._metasets[rt];it&&it.controller&&it.controller._destroy(),delete this._metasets[rt]}_stop(){let rt,it;for(this.stop(),animator.remove(this),rt=0,it=this.data.datasets.length;rt<it;++rt)this._destroyDatasetMeta(rt)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:rt,ctx:it}=this;this._stop(),this.config.clearCache(),rt&&(this.unbindEvents(),clearCanvas(rt,it),this.platform.releaseContext(it),this.canvas=null,this.ctx=null),delete instances[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...rt){return this.canvas.toDataURL(...rt)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const rt=this._listeners,it=this.platform,st=(ct,ut)=>{it.addEventListener(this,ct,ut),rt[ct]=ut},lt=(ct,ut,dt)=>{ct.offsetX=ut,ct.offsetY=dt,this._eventHandler(ct)};each(this.options.events,ct=>st(ct,lt))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const rt=this._responsiveListeners,it=this.platform,st=(ht,ft)=>{it.addEventListener(this,ht,ft),rt[ht]=ft},lt=(ht,ft)=>{rt[ht]&&(it.removeEventListener(this,ht,ft),delete rt[ht])},ct=(ht,ft)=>{this.canvas&&this.resize(ht,ft)};let ut;const dt=()=>{lt("attach",dt),this.attached=!0,this.resize(),st("resize",ct),st("detach",ut)};ut=()=>{this.attached=!1,lt("resize",ct),this._stop(),this._resize(0,0),st("attach",dt)},it.isAttached(this.canvas)?dt():ut()}unbindEvents(){each(this._listeners,(rt,it)=>{this.platform.removeEventListener(this,it,rt)}),this._listeners={},each(this._responsiveListeners,(rt,it)=>{this.platform.removeEventListener(this,it,rt)}),this._responsiveListeners=void 0}updateHoverStyle(rt,it,st){const lt=st?"set":"remove";let ct,ut,dt,ht;for(it==="dataset"&&(ct=this.getDatasetMeta(rt[0].datasetIndex),ct.controller["_"+lt+"DatasetHoverStyle"]()),dt=0,ht=rt.length;dt<ht;++dt){ut=rt[dt];const ft=ut&&this.getDatasetMeta(ut.datasetIndex).controller;ft&&ft[lt+"HoverStyle"](ut.element,ut.datasetIndex,ut.index)}}getActiveElements(){return this._active||[]}setActiveElements(rt){const it=this._active||[],st=rt.map(({datasetIndex:ct,index:ut})=>{const dt=this.getDatasetMeta(ct);if(!dt)throw new Error("No dataset found at index "+ct);return{datasetIndex:ct,element:dt.data[ut],index:ut}});!_elementsEqual(st,it)&&(this._active=st,this._lastEvent=null,this._updateHoverStyles(st,it))}notifyPlugins(rt,it,st){return this._plugins.notify(this,rt,it,st)}isPluginEnabled(rt){return this._plugins._cache.filter(it=>it.plugin.id===rt).length===1}_updateHoverStyles(rt,it,st){const lt=this.options.hover,ct=(ht,ft)=>ht.filter(pt=>!ft.some(mt=>pt.datasetIndex===mt.datasetIndex&&pt.index===mt.index)),ut=ct(it,rt),dt=st?rt:ct(rt,it);ut.length&&this.updateHoverStyle(ut,lt.mode,!1),dt.length&&lt.mode&&this.updateHoverStyle(dt,lt.mode,!0)}_eventHandler(rt,it){const st={event:rt,replay:it,cancelable:!0,inChartArea:this.isPointInArea(rt)},lt=ut=>(ut.options.events||this.options.events).includes(rt.native.type);if(this.notifyPlugins("beforeEvent",st,lt)===!1)return;const ct=this._handleEvent(rt,it,st.inChartArea);return st.cancelable=!1,this.notifyPlugins("afterEvent",st,lt),(ct||st.changed)&&this.render(),this}_handleEvent(rt,it,st){const{_active:lt=[],options:ct}=this,ut=it,dt=this._getActiveElements(rt,lt,st,ut),ht=_isClickEvent(rt),ft=determineLastEvent(rt,this._lastEvent,st,ht);st&&(this._lastEvent=null,callback(ct.onHover,[rt,dt,this],this),ht&&callback(ct.onClick,[rt,dt,this],this));const pt=!_elementsEqual(dt,lt);return(pt||it)&&(this._active=dt,this._updateHoverStyles(dt,lt,it)),this._lastEvent=ft,pt}_getActiveElements(rt,it,st,lt){if(rt.type==="mouseout")return[];if(!st)return it;const ct=this.options.hover;return this.getElementsAtEventForMode(rt,ct.mode,ct,lt)}},So(mm,"defaults",defaults),So(mm,"instances",instances),So(mm,"overrides",overrides),So(mm,"registry",registry),So(mm,"version",version$2),So(mm,"getChart",getChart),mm);function invalidatePlugins(){return each(Chart$1.instances,nt=>nt._plugins.invalidate())}function setStyle(nt,rt,it=rt){nt.lineCap=valueOrDefault(it.borderCapStyle,rt.borderCapStyle),nt.setLineDash(valueOrDefault(it.borderDash,rt.borderDash)),nt.lineDashOffset=valueOrDefault(it.borderDashOffset,rt.borderDashOffset),nt.lineJoin=valueOrDefault(it.borderJoinStyle,rt.borderJoinStyle),nt.lineWidth=valueOrDefault(it.borderWidth,rt.borderWidth),nt.strokeStyle=valueOrDefault(it.borderColor,rt.borderColor)}function lineTo(nt,rt,it){nt.lineTo(it.x,it.y)}function getLineMethod(nt){return nt.stepped?_steppedLineTo:nt.tension||nt.cubicInterpolationMode==="monotone"?_bezierCurveTo:lineTo}function pathVars(nt,rt,it={}){const st=nt.length,{start:lt=0,end:ct=st-1}=it,{start:ut,end:dt}=rt,ht=Math.max(lt,ut),ft=Math.min(ct,dt),pt=lt<ut&&ct<ut||lt>dt&&ct>dt;return{count:st,start:ht,loop:rt.loop,ilen:ft<ht&&!pt?st+ft-ht:ft-ht}}function pathSegment(nt,rt,it,st){const{points:lt,options:ct}=rt,{count:ut,start:dt,loop:ht,ilen:ft}=pathVars(lt,it,st),pt=getLineMethod(ct);let{move:mt=!0,reverse:gt}=st||{},xt,yt,vt;for(xt=0;xt<=ft;++xt)yt=lt[(dt+(gt?ft-xt:xt))%ut],!yt.skip&&(mt?(nt.moveTo(yt.x,yt.y),mt=!1):pt(nt,vt,yt,gt,ct.stepped),vt=yt);return ht&&(yt=lt[(dt+(gt?ft:0))%ut],pt(nt,vt,yt,gt,ct.stepped)),!!ht}function fastPathSegment(nt,rt,it,st){const lt=rt.points,{count:ct,start:ut,ilen:dt}=pathVars(lt,it,st),{move:ht=!0,reverse:ft}=st||{};let pt=0,mt=0,gt,xt,yt,vt,St,wt;const Et=Tt=>(ut+(ft?dt-Tt:Tt))%ct,Rt=()=>{vt!==St&&(nt.lineTo(pt,St),nt.lineTo(pt,vt),nt.lineTo(pt,wt))};for(ht&&(xt=lt[Et(0)],nt.moveTo(xt.x,xt.y)),gt=0;gt<=dt;++gt){if(xt=lt[Et(gt)],xt.skip)continue;const Tt=xt.x,It=xt.y,At=Tt|0;At===yt?(It<vt?vt=It:It>St&&(St=It),pt=(mt*pt+Tt)/++mt):(Rt(),nt.lineTo(Tt,It),yt=At,mt=0,vt=St=It),wt=It}Rt()}function _getSegmentMethod(nt){const rt=nt.options,it=rt.borderDash&&rt.borderDash.length;return!nt._decimated&&!nt._loop&&!rt.tension&&rt.cubicInterpolationMode!=="monotone"&&!rt.stepped&&!it?fastPathSegment:pathSegment}function _getInterpolationMethod(nt){return nt.stepped?_steppedInterpolation:nt.tension||nt.cubicInterpolationMode==="monotone"?_bezierInterpolation:_pointInLine}function strokePathWithCache(nt,rt,it,st){let lt=rt._path;lt||(lt=rt._path=new Path2D,rt.path(lt,it,st)&&lt.closePath()),setStyle(nt,rt.options),nt.stroke(lt)}function strokePathDirect(nt,rt,it,st){const{segments:lt,options:ct}=rt,ut=_getSegmentMethod(rt);for(const dt of lt)setStyle(nt,ct,dt.style),nt.beginPath(),ut(nt,rt,dt,{start:it,end:it+st-1})&&nt.closePath(),nt.stroke()}const usePath2D=typeof Path2D=="function";function draw(nt,rt,it,st){usePath2D&&!rt.options.segment?strokePathWithCache(nt,rt,it,st):strokePathDirect(nt,rt,it,st)}class LineElement extends Element$1{constructor(rt){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,rt&&Object.assign(this,rt)}updateControlPoints(rt,it){const st=this.options;if((st.tension||st.cubicInterpolationMode==="monotone")&&!st.stepped&&!this._pointsUpdated){const lt=st.spanGaps?this._loop:this._fullLoop;_updateBezierControlPoints(this._points,st,rt,lt,it),this._pointsUpdated=!0}}set points(rt){this._points=rt,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_computeSegments(this,this.options.segment))}first(){const rt=this.segments,it=this.points;return rt.length&&it[rt[0].start]}last(){const rt=this.segments,it=this.points,st=rt.length;return st&&it[rt[st-1].end]}interpolate(rt,it){const st=this.options,lt=rt[it],ct=this.points,ut=_boundSegments(this,{property:it,start:lt,end:lt});if(!ut.length)return;const dt=[],ht=_getInterpolationMethod(st);let ft,pt;for(ft=0,pt=ut.length;ft<pt;++ft){const{start:mt,end:gt}=ut[ft],xt=ct[mt],yt=ct[gt];if(xt===yt){dt.push(xt);continue}const vt=Math.abs((lt-xt[it])/(yt[it]-xt[it])),St=ht(xt,yt,vt,st.stepped);St[it]=rt[it],dt.push(St)}return dt.length===1?dt[0]:dt}pathSegment(rt,it,st){return _getSegmentMethod(this)(rt,this,it,st)}path(rt,it,st){const lt=this.segments,ct=_getSegmentMethod(this);let ut=this._loop;it=it||0,st=st||this.points.length-it;for(const dt of lt)ut&=ct(rt,this,dt,{start:it,end:it+st-1});return!!ut}draw(rt,it,st,lt){const ct=this.options||{};(this.points||[]).length&&ct.borderWidth&&(rt.save(),draw(rt,this,st,lt),rt.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}So(LineElement,"id","line"),So(LineElement,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),So(LineElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),So(LineElement,"descriptors",{_scriptable:!0,_indexable:rt=>rt!=="borderDash"&&rt!=="fill"});function inRange$1(nt,rt,it,st){const lt=nt.options,{[it]:ct}=nt.getProps([it],st);return Math.abs(rt-ct)<lt.radius+lt.hitRadius}class PointElement extends Element$1{constructor(it){super();So(this,"parsed");So(this,"skip");So(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,it&&Object.assign(this,it)}inRange(it,st,lt){const ct=this.options,{x:ut,y:dt}=this.getProps(["x","y"],lt);return Math.pow(it-ut,2)+Math.pow(st-dt,2)<Math.pow(ct.hitRadius+ct.radius,2)}inXRange(it,st){return inRange$1(this,it,"x",st)}inYRange(it,st){return inRange$1(this,it,"y",st)}getCenterPoint(it){const{x:st,y:lt}=this.getProps(["x","y"],it);return{x:st,y:lt}}size(it){it=it||this.options||{};let st=it.radius||0;st=Math.max(st,st&&it.hoverRadius||0);const lt=st&&it.borderWidth||0;return(st+lt)*2}draw(it,st){const lt=this.options;this.skip||lt.radius<.1||!_isPointInArea(this,st,this.size(lt)/2)||(it.strokeStyle=lt.borderColor,it.lineWidth=lt.borderWidth,it.fillStyle=lt.backgroundColor,drawPoint(it,lt,this.x,this.y))}getRange(){const it=this.options||{};return it.radius+it.hitRadius}}So(PointElement,"id","point"),So(PointElement,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),So(PointElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const getBoxSize=(nt,rt)=>{let{boxHeight:it=rt,boxWidth:st=rt}=nt;return nt.usePointStyle&&(it=Math.min(it,rt),st=nt.pointStyleWidth||Math.min(st,rt)),{boxWidth:st,boxHeight:it,itemHeight:Math.max(rt,it)}},itemsEqual=(nt,rt)=>nt!==null&&rt!==null&&nt.datasetIndex===rt.datasetIndex&&nt.index===rt.index;class Legend extends Element$1{constructor(rt){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=rt.chart,this.options=rt.options,this.ctx=rt.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(rt,it,st){this.maxWidth=rt,this.maxHeight=it,this._margins=st,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const rt=this.options.labels||{};let it=callback(rt.generateLabels,[this.chart],this)||[];rt.filter&&(it=it.filter(st=>rt.filter(st,this.chart.data))),rt.sort&&(it=it.sort((st,lt)=>rt.sort(st,lt,this.chart.data))),this.options.reverse&&it.reverse(),this.legendItems=it}fit(){const{options:rt,ctx:it}=this;if(!rt.display){this.width=this.height=0;return}const st=rt.labels,lt=toFont(st.font),ct=lt.size,ut=this._computeTitleHeight(),{boxWidth:dt,itemHeight:ht}=getBoxSize(st,ct);let ft,pt;it.font=lt.string,this.isHorizontal()?(ft=this.maxWidth,pt=this._fitRows(ut,ct,dt,ht)+10):(pt=this.maxHeight,ft=this._fitCols(ut,lt,dt,ht)+10),this.width=Math.min(ft,rt.maxWidth||this.maxWidth),this.height=Math.min(pt,rt.maxHeight||this.maxHeight)}_fitRows(rt,it,st,lt){const{ctx:ct,maxWidth:ut,options:{labels:{padding:dt}}}=this,ht=this.legendHitBoxes=[],ft=this.lineWidths=[0],pt=lt+dt;let mt=rt;ct.textAlign="left",ct.textBaseline="middle";let gt=-1,xt=-pt;return this.legendItems.forEach((yt,vt)=>{const St=st+it/2+ct.measureText(yt.text).width;(vt===0||ft[ft.length-1]+St+2*dt>ut)&&(mt+=pt,ft[ft.length-(vt>0?0:1)]=0,xt+=pt,gt++),ht[vt]={left:0,top:xt,row:gt,width:St,height:lt},ft[ft.length-1]+=St+dt}),mt}_fitCols(rt,it,st,lt){const{ctx:ct,maxHeight:ut,options:{labels:{padding:dt}}}=this,ht=this.legendHitBoxes=[],ft=this.columnSizes=[],pt=ut-rt;let mt=dt,gt=0,xt=0,yt=0,vt=0;return this.legendItems.forEach((St,wt)=>{const{itemWidth:Et,itemHeight:Rt}=calculateItemSize(st,it,ct,St,lt);wt>0&&xt+Rt+2*dt>pt&&(mt+=gt+dt,ft.push({width:gt,height:xt}),yt+=gt+dt,vt++,gt=xt=0),ht[wt]={left:yt,top:xt,col:vt,width:Et,height:Rt},gt=Math.max(gt,Et),xt+=Rt+dt}),mt+=gt,ft.push({width:gt,height:xt}),mt}adjustHitBoxes(){if(!this.options.display)return;const rt=this._computeTitleHeight(),{legendHitBoxes:it,options:{align:st,labels:{padding:lt},rtl:ct}}=this,ut=getRtlAdapter(ct,this.left,this.width);if(this.isHorizontal()){let dt=0,ht=_alignStartEnd(st,this.left+lt,this.right-this.lineWidths[dt]);for(const ft of it)dt!==ft.row&&(dt=ft.row,ht=_alignStartEnd(st,this.left+lt,this.right-this.lineWidths[dt])),ft.top+=this.top+rt+lt,ft.left=ut.leftForLtr(ut.x(ht),ft.width),ht+=ft.width+lt}else{let dt=0,ht=_alignStartEnd(st,this.top+rt+lt,this.bottom-this.columnSizes[dt].height);for(const ft of it)ft.col!==dt&&(dt=ft.col,ht=_alignStartEnd(st,this.top+rt+lt,this.bottom-this.columnSizes[dt].height)),ft.top=ht,ft.left+=this.left+lt,ft.left=ut.leftForLtr(ut.x(ft.left),ft.width),ht+=ft.height+lt}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const rt=this.ctx;clipArea(rt,this),this._draw(),unclipArea(rt)}}_draw(){const{options:rt,columnSizes:it,lineWidths:st,ctx:lt}=this,{align:ct,labels:ut}=rt,dt=defaults.color,ht=getRtlAdapter(rt.rtl,this.left,this.width),ft=toFont(ut.font),{padding:pt}=ut,mt=ft.size,gt=mt/2;let xt;this.drawTitle(),lt.textAlign=ht.textAlign("left"),lt.textBaseline="middle",lt.lineWidth=.5,lt.font=ft.string;const{boxWidth:yt,boxHeight:vt,itemHeight:St}=getBoxSize(ut,mt),wt=function(At,Dt,jt){if(isNaN(yt)||yt<=0||isNaN(vt)||vt<0)return;lt.save();const Ft=valueOrDefault(jt.lineWidth,1);if(lt.fillStyle=valueOrDefault(jt.fillStyle,dt),lt.lineCap=valueOrDefault(jt.lineCap,"butt"),lt.lineDashOffset=valueOrDefault(jt.lineDashOffset,0),lt.lineJoin=valueOrDefault(jt.lineJoin,"miter"),lt.lineWidth=Ft,lt.strokeStyle=valueOrDefault(jt.strokeStyle,dt),lt.setLineDash(valueOrDefault(jt.lineDash,[])),ut.usePointStyle){const Lt={radius:vt*Math.SQRT2/2,pointStyle:jt.pointStyle,rotation:jt.rotation,borderWidth:Ft},Mt=ht.xPlus(At,yt/2),Ot=Dt+gt;drawPointLegend(lt,Lt,Mt,Ot,ut.pointStyleWidth&&yt)}else{const Lt=Dt+Math.max((mt-vt)/2,0),Mt=ht.leftForLtr(At,yt),Ot=toTRBLCorners(jt.borderRadius);lt.beginPath(),Object.values(Ot).some(Nt=>Nt!==0)?addRoundedRectPath(lt,{x:Mt,y:Lt,w:yt,h:vt,radius:Ot}):lt.rect(Mt,Lt,yt,vt),lt.fill(),Ft!==0&&lt.stroke()}lt.restore()},Et=function(At,Dt,jt){renderText(lt,jt.text,At,Dt+St/2,ft,{strikethrough:jt.hidden,textAlign:ht.textAlign(jt.textAlign)})},Rt=this.isHorizontal(),Tt=this._computeTitleHeight();Rt?xt={x:_alignStartEnd(ct,this.left+pt,this.right-st[0]),y:this.top+pt+Tt,line:0}:xt={x:this.left+pt,y:_alignStartEnd(ct,this.top+Tt+pt,this.bottom-it[0].height),line:0},overrideTextDirection(this.ctx,rt.textDirection);const It=St+pt;this.legendItems.forEach((At,Dt)=>{lt.strokeStyle=At.fontColor,lt.fillStyle=At.fontColor;const jt=lt.measureText(At.text).width,Ft=ht.textAlign(At.textAlign||(At.textAlign=ut.textAlign)),Lt=yt+gt+jt;let Mt=xt.x,Ot=xt.y;ht.setWidth(this.width),Rt?Dt>0&&Mt+Lt+pt>this.right&&(Ot=xt.y+=It,xt.line++,Mt=xt.x=_alignStartEnd(ct,this.left+pt,this.right-st[xt.line])):Dt>0&&Ot+It>this.bottom&&(Mt=xt.x=Mt+it[xt.line].width+pt,xt.line++,Ot=xt.y=_alignStartEnd(ct,this.top+Tt+pt,this.bottom-it[xt.line].height));const Nt=ht.x(Mt);if(wt(Nt,Ot,At),Mt=_textX(Ft,Mt+yt+gt,Rt?Mt+Lt:this.right,rt.rtl),Et(ht.x(Mt),Ot,At),Rt)xt.x+=Lt+pt;else if(typeof At.text!="string"){const $t=ft.lineHeight;xt.y+=calculateLegendItemHeight(At,$t)+pt}else xt.y+=It}),restoreTextDirection(this.ctx,rt.textDirection)}drawTitle(){const rt=this.options,it=rt.title,st=toFont(it.font),lt=toPadding(it.padding);if(!it.display)return;const ct=getRtlAdapter(rt.rtl,this.left,this.width),ut=this.ctx,dt=it.position,ht=st.size/2,ft=lt.top+ht;let pt,mt=this.left,gt=this.width;if(this.isHorizontal())gt=Math.max(...this.lineWidths),pt=this.top+ft,mt=_alignStartEnd(rt.align,mt,this.right-gt);else{const yt=this.columnSizes.reduce((vt,St)=>Math.max(vt,St.height),0);pt=ft+_alignStartEnd(rt.align,this.top,this.bottom-yt-rt.labels.padding-this._computeTitleHeight())}const xt=_alignStartEnd(dt,mt,mt+gt);ut.textAlign=ct.textAlign(_toLeftRightCenter(dt)),ut.textBaseline="middle",ut.strokeStyle=it.color,ut.fillStyle=it.color,ut.font=st.string,renderText(ut,it.text,xt,pt,st)}_computeTitleHeight(){const rt=this.options.title,it=toFont(rt.font),st=toPadding(rt.padding);return rt.display?it.lineHeight+st.height:0}_getLegendItemAt(rt,it){let st,lt,ct;if(_isBetween(rt,this.left,this.right)&&_isBetween(it,this.top,this.bottom)){for(ct=this.legendHitBoxes,st=0;st<ct.length;++st)if(lt=ct[st],_isBetween(rt,lt.left,lt.left+lt.width)&&_isBetween(it,lt.top,lt.top+lt.height))return this.legendItems[st]}return null}handleEvent(rt){const it=this.options;if(!isListened(rt.type,it))return;const st=this._getLegendItemAt(rt.x,rt.y);if(rt.type==="mousemove"||rt.type==="mouseout"){const lt=this._hoveredItem,ct=itemsEqual(lt,st);lt&&!ct&&callback(it.onLeave,[rt,lt,this],this),this._hoveredItem=st,st&&!ct&&callback(it.onHover,[rt,st,this],this)}else st&&callback(it.onClick,[rt,st,this],this)}}function calculateItemSize(nt,rt,it,st,lt){const ct=calculateItemWidth(st,nt,rt,it),ut=calculateItemHeight(lt,st,rt.lineHeight);return{itemWidth:ct,itemHeight:ut}}function calculateItemWidth(nt,rt,it,st){let lt=nt.text;return lt&&typeof lt!="string"&&(lt=lt.reduce((ct,ut)=>ct.length>ut.length?ct:ut)),rt+it.size/2+st.measureText(lt).width}function calculateItemHeight(nt,rt,it){let st=nt;return typeof rt.text!="string"&&(st=calculateLegendItemHeight(rt,it)),st}function calculateLegendItemHeight(nt,rt){const it=nt.text?nt.text.length:0;return rt*it}function isListened(nt,rt){return!!((nt==="mousemove"||nt==="mouseout")&&(rt.onHover||rt.onLeave)||rt.onClick&&(nt==="click"||nt==="mouseup"))}var plugin_legend={id:"legend",_element:Legend,start(nt,rt,it){const st=nt.legend=new Legend({ctx:nt.ctx,options:it,chart:nt});layouts.configure(nt,st,it),layouts.addBox(nt,st)},stop(nt){layouts.removeBox(nt,nt.legend),delete nt.legend},beforeUpdate(nt,rt,it){const st=nt.legend;layouts.configure(nt,st,it),st.options=it},afterUpdate(nt){const rt=nt.legend;rt.buildLabels(),rt.adjustHitBoxes()},afterEvent(nt,rt){rt.replay||nt.legend.handleEvent(rt.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(nt,rt,it){const st=rt.datasetIndex,lt=it.chart;lt.isDatasetVisible(st)?(lt.hide(st),rt.hidden=!0):(lt.show(st),rt.hidden=!1)},onHover:null,onLeave:null,labels:{color:nt=>nt.chart.options.color,boxWidth:40,padding:10,generateLabels(nt){const rt=nt.data.datasets,{labels:{usePointStyle:it,pointStyle:st,textAlign:lt,color:ct,useBorderRadius:ut,borderRadius:dt}}=nt.legend.options;return nt._getSortedDatasetMetas().map(ht=>{const ft=ht.controller.getStyle(it?0:void 0),pt=toPadding(ft.borderWidth);return{text:rt[ht.index].label,fillStyle:ft.backgroundColor,fontColor:ct,hidden:!ht.visible,lineCap:ft.borderCapStyle,lineDash:ft.borderDash,lineDashOffset:ft.borderDashOffset,lineJoin:ft.borderJoinStyle,lineWidth:(pt.width+pt.height)/4,strokeStyle:ft.borderColor,pointStyle:st||ft.pointStyle,rotation:ft.rotation,textAlign:lt||ft.textAlign,borderRadius:ut&&(dt||ft.borderRadius),datasetIndex:ht.index}},this)}},title:{color:nt=>nt.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:nt=>!nt.startsWith("on"),labels:{_scriptable:nt=>!["generateLabels","filter","sort"].includes(nt)}}};class Title extends Element$1{constructor(rt){super(),this.chart=rt.chart,this.options=rt.options,this.ctx=rt.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(rt,it){const st=this.options;if(this.left=0,this.top=0,!st.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=rt,this.height=this.bottom=it;const lt=isArray(st.text)?st.text.length:1;this._padding=toPadding(st.padding);const ct=lt*toFont(st.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=ct:this.width=ct}isHorizontal(){const rt=this.options.position;return rt==="top"||rt==="bottom"}_drawArgs(rt){const{top:it,left:st,bottom:lt,right:ct,options:ut}=this,dt=ut.align;let ht=0,ft,pt,mt;return this.isHorizontal()?(pt=_alignStartEnd(dt,st,ct),mt=it+rt,ft=ct-st):(ut.position==="left"?(pt=st+rt,mt=_alignStartEnd(dt,lt,it),ht=PI*-.5):(pt=ct-rt,mt=_alignStartEnd(dt,it,lt),ht=PI*.5),ft=lt-it),{titleX:pt,titleY:mt,maxWidth:ft,rotation:ht}}draw(){const rt=this.ctx,it=this.options;if(!it.display)return;const st=toFont(it.font),ct=st.lineHeight/2+this._padding.top,{titleX:ut,titleY:dt,maxWidth:ht,rotation:ft}=this._drawArgs(ct);renderText(rt,it.text,0,0,st,{color:it.color,maxWidth:ht,rotation:ft,textAlign:_toLeftRightCenter(it.align),textBaseline:"middle",translation:[ut,dt]})}}function createTitle(nt,rt){const it=new Title({ctx:nt.ctx,options:rt,chart:nt});layouts.configure(nt,it,rt),layouts.addBox(nt,it),nt.titleBlock=it}var plugin_title={id:"title",_element:Title,start(nt,rt,it){createTitle(nt,it)},stop(nt){const rt=nt.titleBlock;layouts.removeBox(nt,rt),delete nt.titleBlock},beforeUpdate(nt,rt,it){const st=nt.titleBlock;layouts.configure(nt,st,it),st.options=it},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const positioners={average(nt){if(!nt.length)return!1;let rt,it,st=0,lt=0,ct=0;for(rt=0,it=nt.length;rt<it;++rt){const ut=nt[rt].element;if(ut&&ut.hasValue()){const dt=ut.tooltipPosition();st+=dt.x,lt+=dt.y,++ct}}return{x:st/ct,y:lt/ct}},nearest(nt,rt){if(!nt.length)return!1;let it=rt.x,st=rt.y,lt=Number.POSITIVE_INFINITY,ct,ut,dt;for(ct=0,ut=nt.length;ct<ut;++ct){const ht=nt[ct].element;if(ht&&ht.hasValue()){const ft=ht.getCenterPoint(),pt=distanceBetweenPoints(rt,ft);pt<lt&&(lt=pt,dt=ht)}}if(dt){const ht=dt.tooltipPosition();it=ht.x,st=ht.y}return{x:it,y:st}}};function pushOrConcat(nt,rt){return rt&&(isArray(rt)?Array.prototype.push.apply(nt,rt):nt.push(rt)),nt}function splitNewlines(nt){return(typeof nt=="string"||nt instanceof String)&&nt.indexOf(`
`)>-1?nt.split(`
`):nt}function createTooltipItem(nt,rt){const{element:it,datasetIndex:st,index:lt}=rt,ct=nt.getDatasetMeta(st).controller,{label:ut,value:dt}=ct.getLabelAndValue(lt);return{chart:nt,label:ut,parsed:ct.getParsed(lt),raw:nt.data.datasets[st].data[lt],formattedValue:dt,dataset:ct.getDataset(),dataIndex:lt,datasetIndex:st,element:it}}function getTooltipSize(nt,rt){const it=nt.chart.ctx,{body:st,footer:lt,title:ct}=nt,{boxWidth:ut,boxHeight:dt}=rt,ht=toFont(rt.bodyFont),ft=toFont(rt.titleFont),pt=toFont(rt.footerFont),mt=ct.length,gt=lt.length,xt=st.length,yt=toPadding(rt.padding);let vt=yt.height,St=0,wt=st.reduce((Tt,It)=>Tt+It.before.length+It.lines.length+It.after.length,0);if(wt+=nt.beforeBody.length+nt.afterBody.length,mt&&(vt+=mt*ft.lineHeight+(mt-1)*rt.titleSpacing+rt.titleMarginBottom),wt){const Tt=rt.displayColors?Math.max(dt,ht.lineHeight):ht.lineHeight;vt+=xt*Tt+(wt-xt)*ht.lineHeight+(wt-1)*rt.bodySpacing}gt&&(vt+=rt.footerMarginTop+gt*pt.lineHeight+(gt-1)*rt.footerSpacing);let Et=0;const Rt=function(Tt){St=Math.max(St,it.measureText(Tt).width+Et)};return it.save(),it.font=ft.string,each(nt.title,Rt),it.font=ht.string,each(nt.beforeBody.concat(nt.afterBody),Rt),Et=rt.displayColors?ut+2+rt.boxPadding:0,each(st,Tt=>{each(Tt.before,Rt),each(Tt.lines,Rt),each(Tt.after,Rt)}),Et=0,it.font=pt.string,each(nt.footer,Rt),it.restore(),St+=yt.width,{width:St,height:vt}}function determineYAlign(nt,rt){const{y:it,height:st}=rt;return it<st/2?"top":it>nt.height-st/2?"bottom":"center"}function doesNotFitWithAlign(nt,rt,it,st){const{x:lt,width:ct}=st,ut=it.caretSize+it.caretPadding;if(nt==="left"&&lt+ct+ut>rt.width||nt==="right"&&lt-ct-ut<0)return!0}function determineXAlign(nt,rt,it,st){const{x:lt,width:ct}=it,{width:ut,chartArea:{left:dt,right:ht}}=nt;let ft="center";return st==="center"?ft=lt<=(dt+ht)/2?"left":"right":lt<=ct/2?ft="left":lt>=ut-ct/2&&(ft="right"),doesNotFitWithAlign(ft,nt,rt,it)&&(ft="center"),ft}function determineAlignment(nt,rt,it){const st=it.yAlign||rt.yAlign||determineYAlign(nt,it);return{xAlign:it.xAlign||rt.xAlign||determineXAlign(nt,rt,it,st),yAlign:st}}function alignX(nt,rt){let{x:it,width:st}=nt;return rt==="right"?it-=st:rt==="center"&&(it-=st/2),it}function alignY(nt,rt,it){let{y:st,height:lt}=nt;return rt==="top"?st+=it:rt==="bottom"?st-=lt+it:st-=lt/2,st}function getBackgroundPoint(nt,rt,it,st){const{caretSize:lt,caretPadding:ct,cornerRadius:ut}=nt,{xAlign:dt,yAlign:ht}=it,ft=lt+ct,{topLeft:pt,topRight:mt,bottomLeft:gt,bottomRight:xt}=toTRBLCorners(ut);let yt=alignX(rt,dt);const vt=alignY(rt,ht,ft);return ht==="center"?dt==="left"?yt+=ft:dt==="right"&&(yt-=ft):dt==="left"?yt-=Math.max(pt,gt)+lt:dt==="right"&&(yt+=Math.max(mt,xt)+lt),{x:_limitValue(yt,0,st.width-rt.width),y:_limitValue(vt,0,st.height-rt.height)}}function getAlignedX(nt,rt,it){const st=toPadding(it.padding);return rt==="center"?nt.x+nt.width/2:rt==="right"?nt.x+nt.width-st.right:nt.x+st.left}function getBeforeAfterBodyLines(nt){return pushOrConcat([],splitNewlines(nt))}function createTooltipContext(nt,rt,it){return createContext(nt,{tooltip:rt,tooltipItems:it,type:"tooltip"})}function overrideCallbacks(nt,rt){const it=rt&&rt.dataset&&rt.dataset.tooltip&&rt.dataset.tooltip.callbacks;return it?nt.override(it):nt}const defaultCallbacks={beforeTitle:noop$1,title(nt){if(nt.length>0){const rt=nt[0],it=rt.chart.data.labels,st=it?it.length:0;if(this&&this.options&&this.options.mode==="dataset")return rt.dataset.label||"";if(rt.label)return rt.label;if(st>0&&rt.dataIndex<st)return it[rt.dataIndex]}return""},afterTitle:noop$1,beforeBody:noop$1,beforeLabel:noop$1,label(nt){if(this&&this.options&&this.options.mode==="dataset")return nt.label+": "+nt.formattedValue||nt.formattedValue;let rt=nt.dataset.label||"";rt&&(rt+=": ");const it=nt.formattedValue;return isNullOrUndef(it)||(rt+=it),rt},labelColor(nt){const it=nt.chart.getDatasetMeta(nt.datasetIndex).controller.getStyle(nt.dataIndex);return{borderColor:it.borderColor,backgroundColor:it.backgroundColor,borderWidth:it.borderWidth,borderDash:it.borderDash,borderDashOffset:it.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(nt){const it=nt.chart.getDatasetMeta(nt.datasetIndex).controller.getStyle(nt.dataIndex);return{pointStyle:it.pointStyle,rotation:it.rotation}},afterLabel:noop$1,afterBody:noop$1,beforeFooter:noop$1,footer:noop$1,afterFooter:noop$1};function invokeCallbackWithFallback(nt,rt,it,st){const lt=nt[rt].call(it,st);return typeof lt>"u"?defaultCallbacks[rt].call(it,st):lt}class Tooltip extends Element$1{constructor(rt){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=rt.chart,this.options=rt.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(rt){this.options=rt,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const rt=this._cachedAnimations;if(rt)return rt;const it=this.chart,st=this.options.setContext(this.getContext()),lt=st.enabled&&it.options.animation&&st.animations,ct=new Animations(this.chart,lt);return lt._cacheable&&(this._cachedAnimations=Object.freeze(ct)),ct}getContext(){return this.$context||(this.$context=createTooltipContext(this.chart.getContext(),this,this._tooltipItems))}getTitle(rt,it){const{callbacks:st}=it,lt=invokeCallbackWithFallback(st,"beforeTitle",this,rt),ct=invokeCallbackWithFallback(st,"title",this,rt),ut=invokeCallbackWithFallback(st,"afterTitle",this,rt);let dt=[];return dt=pushOrConcat(dt,splitNewlines(lt)),dt=pushOrConcat(dt,splitNewlines(ct)),dt=pushOrConcat(dt,splitNewlines(ut)),dt}getBeforeBody(rt,it){return getBeforeAfterBodyLines(invokeCallbackWithFallback(it.callbacks,"beforeBody",this,rt))}getBody(rt,it){const{callbacks:st}=it,lt=[];return each(rt,ct=>{const ut={before:[],lines:[],after:[]},dt=overrideCallbacks(st,ct);pushOrConcat(ut.before,splitNewlines(invokeCallbackWithFallback(dt,"beforeLabel",this,ct))),pushOrConcat(ut.lines,invokeCallbackWithFallback(dt,"label",this,ct)),pushOrConcat(ut.after,splitNewlines(invokeCallbackWithFallback(dt,"afterLabel",this,ct))),lt.push(ut)}),lt}getAfterBody(rt,it){return getBeforeAfterBodyLines(invokeCallbackWithFallback(it.callbacks,"afterBody",this,rt))}getFooter(rt,it){const{callbacks:st}=it,lt=invokeCallbackWithFallback(st,"beforeFooter",this,rt),ct=invokeCallbackWithFallback(st,"footer",this,rt),ut=invokeCallbackWithFallback(st,"afterFooter",this,rt);let dt=[];return dt=pushOrConcat(dt,splitNewlines(lt)),dt=pushOrConcat(dt,splitNewlines(ct)),dt=pushOrConcat(dt,splitNewlines(ut)),dt}_createItems(rt){const it=this._active,st=this.chart.data,lt=[],ct=[],ut=[];let dt=[],ht,ft;for(ht=0,ft=it.length;ht<ft;++ht)dt.push(createTooltipItem(this.chart,it[ht]));return rt.filter&&(dt=dt.filter((pt,mt,gt)=>rt.filter(pt,mt,gt,st))),rt.itemSort&&(dt=dt.sort((pt,mt)=>rt.itemSort(pt,mt,st))),each(dt,pt=>{const mt=overrideCallbacks(rt.callbacks,pt);lt.push(invokeCallbackWithFallback(mt,"labelColor",this,pt)),ct.push(invokeCallbackWithFallback(mt,"labelPointStyle",this,pt)),ut.push(invokeCallbackWithFallback(mt,"labelTextColor",this,pt))}),this.labelColors=lt,this.labelPointStyles=ct,this.labelTextColors=ut,this.dataPoints=dt,dt}update(rt,it){const st=this.options.setContext(this.getContext()),lt=this._active;let ct,ut=[];if(!lt.length)this.opacity!==0&&(ct={opacity:0});else{const dt=positioners[st.position].call(this,lt,this._eventPosition);ut=this._createItems(st),this.title=this.getTitle(ut,st),this.beforeBody=this.getBeforeBody(ut,st),this.body=this.getBody(ut,st),this.afterBody=this.getAfterBody(ut,st),this.footer=this.getFooter(ut,st);const ht=this._size=getTooltipSize(this,st),ft=Object.assign({},dt,ht),pt=determineAlignment(this.chart,st,ft),mt=getBackgroundPoint(st,ft,pt,this.chart);this.xAlign=pt.xAlign,this.yAlign=pt.yAlign,ct={opacity:1,x:mt.x,y:mt.y,width:ht.width,height:ht.height,caretX:dt.x,caretY:dt.y}}this._tooltipItems=ut,this.$context=void 0,ct&&this._resolveAnimations().update(this,ct),rt&&st.external&&st.external.call(this,{chart:this.chart,tooltip:this,replay:it})}drawCaret(rt,it,st,lt){const ct=this.getCaretPosition(rt,st,lt);it.lineTo(ct.x1,ct.y1),it.lineTo(ct.x2,ct.y2),it.lineTo(ct.x3,ct.y3)}getCaretPosition(rt,it,st){const{xAlign:lt,yAlign:ct}=this,{caretSize:ut,cornerRadius:dt}=st,{topLeft:ht,topRight:ft,bottomLeft:pt,bottomRight:mt}=toTRBLCorners(dt),{x:gt,y:xt}=rt,{width:yt,height:vt}=it;let St,wt,Et,Rt,Tt,It;return ct==="center"?(Tt=xt+vt/2,lt==="left"?(St=gt,wt=St-ut,Rt=Tt+ut,It=Tt-ut):(St=gt+yt,wt=St+ut,Rt=Tt-ut,It=Tt+ut),Et=St):(lt==="left"?wt=gt+Math.max(ht,pt)+ut:lt==="right"?wt=gt+yt-Math.max(ft,mt)-ut:wt=this.caretX,ct==="top"?(Rt=xt,Tt=Rt-ut,St=wt-ut,Et=wt+ut):(Rt=xt+vt,Tt=Rt+ut,St=wt+ut,Et=wt-ut),It=Rt),{x1:St,x2:wt,x3:Et,y1:Rt,y2:Tt,y3:It}}drawTitle(rt,it,st){const lt=this.title,ct=lt.length;let ut,dt,ht;if(ct){const ft=getRtlAdapter(st.rtl,this.x,this.width);for(rt.x=getAlignedX(this,st.titleAlign,st),it.textAlign=ft.textAlign(st.titleAlign),it.textBaseline="middle",ut=toFont(st.titleFont),dt=st.titleSpacing,it.fillStyle=st.titleColor,it.font=ut.string,ht=0;ht<ct;++ht)it.fillText(lt[ht],ft.x(rt.x),rt.y+ut.lineHeight/2),rt.y+=ut.lineHeight+dt,ht+1===ct&&(rt.y+=st.titleMarginBottom-dt)}}_drawColorBox(rt,it,st,lt,ct){const ut=this.labelColors[st],dt=this.labelPointStyles[st],{boxHeight:ht,boxWidth:ft}=ct,pt=toFont(ct.bodyFont),mt=getAlignedX(this,"left",ct),gt=lt.x(mt),xt=ht<pt.lineHeight?(pt.lineHeight-ht)/2:0,yt=it.y+xt;if(ct.usePointStyle){const vt={radius:Math.min(ft,ht)/2,pointStyle:dt.pointStyle,rotation:dt.rotation,borderWidth:1},St=lt.leftForLtr(gt,ft)+ft/2,wt=yt+ht/2;rt.strokeStyle=ct.multiKeyBackground,rt.fillStyle=ct.multiKeyBackground,drawPoint(rt,vt,St,wt),rt.strokeStyle=ut.borderColor,rt.fillStyle=ut.backgroundColor,drawPoint(rt,vt,St,wt)}else{rt.lineWidth=isObject(ut.borderWidth)?Math.max(...Object.values(ut.borderWidth)):ut.borderWidth||1,rt.strokeStyle=ut.borderColor,rt.setLineDash(ut.borderDash||[]),rt.lineDashOffset=ut.borderDashOffset||0;const vt=lt.leftForLtr(gt,ft),St=lt.leftForLtr(lt.xPlus(gt,1),ft-2),wt=toTRBLCorners(ut.borderRadius);Object.values(wt).some(Et=>Et!==0)?(rt.beginPath(),rt.fillStyle=ct.multiKeyBackground,addRoundedRectPath(rt,{x:vt,y:yt,w:ft,h:ht,radius:wt}),rt.fill(),rt.stroke(),rt.fillStyle=ut.backgroundColor,rt.beginPath(),addRoundedRectPath(rt,{x:St,y:yt+1,w:ft-2,h:ht-2,radius:wt}),rt.fill()):(rt.fillStyle=ct.multiKeyBackground,rt.fillRect(vt,yt,ft,ht),rt.strokeRect(vt,yt,ft,ht),rt.fillStyle=ut.backgroundColor,rt.fillRect(St,yt+1,ft-2,ht-2))}rt.fillStyle=this.labelTextColors[st]}drawBody(rt,it,st){const{body:lt}=this,{bodySpacing:ct,bodyAlign:ut,displayColors:dt,boxHeight:ht,boxWidth:ft,boxPadding:pt}=st,mt=toFont(st.bodyFont);let gt=mt.lineHeight,xt=0;const yt=getRtlAdapter(st.rtl,this.x,this.width),vt=function(jt){it.fillText(jt,yt.x(rt.x+xt),rt.y+gt/2),rt.y+=gt+ct},St=yt.textAlign(ut);let wt,Et,Rt,Tt,It,At,Dt;for(it.textAlign=ut,it.textBaseline="middle",it.font=mt.string,rt.x=getAlignedX(this,St,st),it.fillStyle=st.bodyColor,each(this.beforeBody,vt),xt=dt&&St!=="right"?ut==="center"?ft/2+pt:ft+2+pt:0,Tt=0,At=lt.length;Tt<At;++Tt){for(wt=lt[Tt],Et=this.labelTextColors[Tt],it.fillStyle=Et,each(wt.before,vt),Rt=wt.lines,dt&&Rt.length&&(this._drawColorBox(it,rt,Tt,yt,st),gt=Math.max(mt.lineHeight,ht)),It=0,Dt=Rt.length;It<Dt;++It)vt(Rt[It]),gt=mt.lineHeight;each(wt.after,vt)}xt=0,gt=mt.lineHeight,each(this.afterBody,vt),rt.y-=ct}drawFooter(rt,it,st){const lt=this.footer,ct=lt.length;let ut,dt;if(ct){const ht=getRtlAdapter(st.rtl,this.x,this.width);for(rt.x=getAlignedX(this,st.footerAlign,st),rt.y+=st.footerMarginTop,it.textAlign=ht.textAlign(st.footerAlign),it.textBaseline="middle",ut=toFont(st.footerFont),it.fillStyle=st.footerColor,it.font=ut.string,dt=0;dt<ct;++dt)it.fillText(lt[dt],ht.x(rt.x),rt.y+ut.lineHeight/2),rt.y+=ut.lineHeight+st.footerSpacing}}drawBackground(rt,it,st,lt){const{xAlign:ct,yAlign:ut}=this,{x:dt,y:ht}=rt,{width:ft,height:pt}=st,{topLeft:mt,topRight:gt,bottomLeft:xt,bottomRight:yt}=toTRBLCorners(lt.cornerRadius);it.fillStyle=lt.backgroundColor,it.strokeStyle=lt.borderColor,it.lineWidth=lt.borderWidth,it.beginPath(),it.moveTo(dt+mt,ht),ut==="top"&&this.drawCaret(rt,it,st,lt),it.lineTo(dt+ft-gt,ht),it.quadraticCurveTo(dt+ft,ht,dt+ft,ht+gt),ut==="center"&&ct==="right"&&this.drawCaret(rt,it,st,lt),it.lineTo(dt+ft,ht+pt-yt),it.quadraticCurveTo(dt+ft,ht+pt,dt+ft-yt,ht+pt),ut==="bottom"&&this.drawCaret(rt,it,st,lt),it.lineTo(dt+xt,ht+pt),it.quadraticCurveTo(dt,ht+pt,dt,ht+pt-xt),ut==="center"&&ct==="left"&&this.drawCaret(rt,it,st,lt),it.lineTo(dt,ht+mt),it.quadraticCurveTo(dt,ht,dt+mt,ht),it.closePath(),it.fill(),lt.borderWidth>0&&it.stroke()}_updateAnimationTarget(rt){const it=this.chart,st=this.$animations,lt=st&&st.x,ct=st&&st.y;if(lt||ct){const ut=positioners[rt.position].call(this,this._active,this._eventPosition);if(!ut)return;const dt=this._size=getTooltipSize(this,rt),ht=Object.assign({},ut,this._size),ft=determineAlignment(it,rt,ht),pt=getBackgroundPoint(rt,ht,ft,it);(lt._to!==pt.x||ct._to!==pt.y)&&(this.xAlign=ft.xAlign,this.yAlign=ft.yAlign,this.width=dt.width,this.height=dt.height,this.caretX=ut.x,this.caretY=ut.y,this._resolveAnimations().update(this,pt))}}_willRender(){return!!this.opacity}draw(rt){const it=this.options.setContext(this.getContext());let st=this.opacity;if(!st)return;this._updateAnimationTarget(it);const lt={width:this.width,height:this.height},ct={x:this.x,y:this.y};st=Math.abs(st)<.001?0:st;const ut=toPadding(it.padding),dt=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;it.enabled&&dt&&(rt.save(),rt.globalAlpha=st,this.drawBackground(ct,rt,lt,it),overrideTextDirection(rt,it.textDirection),ct.y+=ut.top,this.drawTitle(ct,rt,it),this.drawBody(ct,rt,it),this.drawFooter(ct,rt,it),restoreTextDirection(rt,it.textDirection),rt.restore())}getActiveElements(){return this._active||[]}setActiveElements(rt,it){const st=this._active,lt=rt.map(({datasetIndex:dt,index:ht})=>{const ft=this.chart.getDatasetMeta(dt);if(!ft)throw new Error("Cannot find a dataset at index "+dt);return{datasetIndex:dt,element:ft.data[ht],index:ht}}),ct=!_elementsEqual(st,lt),ut=this._positionChanged(lt,it);(ct||ut)&&(this._active=lt,this._eventPosition=it,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(rt,it,st=!0){if(it&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const lt=this.options,ct=this._active||[],ut=this._getActiveElements(rt,ct,it,st),dt=this._positionChanged(ut,rt),ht=it||!_elementsEqual(ut,ct)||dt;return ht&&(this._active=ut,(lt.enabled||lt.external)&&(this._eventPosition={x:rt.x,y:rt.y},this.update(!0,it))),ht}_getActiveElements(rt,it,st,lt){const ct=this.options;if(rt.type==="mouseout")return[];if(!lt)return it.filter(dt=>this.chart.data.datasets[dt.datasetIndex]&&this.chart.getDatasetMeta(dt.datasetIndex).controller.getParsed(dt.index)!==void 0);const ut=this.chart.getElementsAtEventForMode(rt,ct.mode,ct,st);return ct.reverse&&ut.reverse(),ut}_positionChanged(rt,it){const{caretX:st,caretY:lt,options:ct}=this,ut=positioners[ct.position].call(this,rt,it);return ut!==!1&&(st!==ut.x||lt!==ut.y)}}So(Tooltip,"positioners",positioners);var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners,afterInit(nt,rt,it){it&&(nt.tooltip=new Tooltip({chart:nt,options:it}))},beforeUpdate(nt,rt,it){nt.tooltip&&nt.tooltip.initialize(it)},reset(nt,rt,it){nt.tooltip&&nt.tooltip.initialize(it)},afterDraw(nt){const rt=nt.tooltip;if(rt&&rt._willRender()){const it={tooltip:rt};if(nt.notifyPlugins("beforeTooltipDraw",{...it,cancelable:!0})===!1)return;rt.draw(nt.ctx),nt.notifyPlugins("afterTooltipDraw",it)}},afterEvent(nt,rt){if(nt.tooltip){const it=rt.replay;nt.tooltip.handleEvent(rt.event,it,rt.inChartArea)&&(rt.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(nt,rt)=>rt.bodyFont.size,boxWidth:(nt,rt)=>rt.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:defaultCallbacks},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:nt=>nt!=="filter"&&nt!=="itemSort"&&nt!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const addIfString=(nt,rt,it,st)=>(typeof rt=="string"?(it=nt.push(rt)-1,st.unshift({index:it,label:rt})):isNaN(rt)&&(it=null),it);function findOrAddLabel(nt,rt,it,st){const lt=nt.indexOf(rt);if(lt===-1)return addIfString(nt,rt,it,st);const ct=nt.lastIndexOf(rt);return lt!==ct?it:lt}const validIndex=(nt,rt)=>nt===null?null:_limitValue(Math.round(nt),0,rt);function _getLabelForValue(nt){const rt=this.getLabels();return nt>=0&&nt<rt.length?rt[nt]:nt}class CategoryScale extends Scale{constructor(rt){super(rt),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(rt){const it=this._addedLabels;if(it.length){const st=this.getLabels();for(const{index:lt,label:ct}of it)st[lt]===ct&&st.splice(lt,1);this._addedLabels=[]}super.init(rt)}parse(rt,it){if(isNullOrUndef(rt))return null;const st=this.getLabels();return it=isFinite(it)&&st[it]===rt?it:findOrAddLabel(st,rt,valueOrDefault(it,rt),this._addedLabels),validIndex(it,st.length-1)}determineDataLimits(){const{minDefined:rt,maxDefined:it}=this.getUserBounds();let{min:st,max:lt}=this.getMinMax(!0);this.options.bounds==="ticks"&&(rt||(st=0),it||(lt=this.getLabels().length-1)),this.min=st,this.max=lt}buildTicks(){const rt=this.min,it=this.max,st=this.options.offset,lt=[];let ct=this.getLabels();ct=rt===0&&it===ct.length-1?ct:ct.slice(rt,it+1),this._valueRange=Math.max(ct.length-(st?0:1),1),this._startValue=this.min-(st?.5:0);for(let ut=rt;ut<=it;ut++)lt.push({value:ut});return lt}getLabelForValue(rt){return _getLabelForValue.call(this,rt)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(rt){return typeof rt!="number"&&(rt=this.parse(rt)),rt===null?NaN:this.getPixelForDecimal((rt-this._startValue)/this._valueRange)}getPixelForTick(rt){const it=this.ticks;return rt<0||rt>it.length-1?null:this.getPixelForValue(it[rt].value)}getValueForPixel(rt){return Math.round(this._startValue+this.getDecimalForPixel(rt)*this._valueRange)}getBasePixel(){return this.bottom}}So(CategoryScale,"id","category"),So(CategoryScale,"defaults",{ticks:{callback:_getLabelForValue}});function generateTicks$1(nt,rt){const it=[],{bounds:lt,step:ct,min:ut,max:dt,precision:ht,count:ft,maxTicks:pt,maxDigits:mt,includeBounds:gt}=nt,xt=ct||1,yt=pt-1,{min:vt,max:St}=rt,wt=!isNullOrUndef(ut),Et=!isNullOrUndef(dt),Rt=!isNullOrUndef(ft),Tt=(St-vt)/(mt+1);let It=niceNum((St-vt)/yt/xt)*xt,At,Dt,jt,Ft;if(It<1e-14&&!wt&&!Et)return[{value:vt},{value:St}];Ft=Math.ceil(St/It)-Math.floor(vt/It),Ft>yt&&(It=niceNum(Ft*It/yt/xt)*xt),isNullOrUndef(ht)||(At=Math.pow(10,ht),It=Math.ceil(It*At)/At),lt==="ticks"?(Dt=Math.floor(vt/It)*It,jt=Math.ceil(St/It)*It):(Dt=vt,jt=St),wt&&Et&&ct&&almostWhole((dt-ut)/ct,It/1e3)?(Ft=Math.round(Math.min((dt-ut)/It,pt)),It=(dt-ut)/Ft,Dt=ut,jt=dt):Rt?(Dt=wt?ut:Dt,jt=Et?dt:jt,Ft=ft-1,It=(jt-Dt)/Ft):(Ft=(jt-Dt)/It,almostEquals(Ft,Math.round(Ft),It/1e3)?Ft=Math.round(Ft):Ft=Math.ceil(Ft));const Lt=Math.max(_decimalPlaces(It),_decimalPlaces(Dt));At=Math.pow(10,isNullOrUndef(ht)?Lt:ht),Dt=Math.round(Dt*At)/At,jt=Math.round(jt*At)/At;let Mt=0;for(wt&&(gt&&Dt!==ut?(it.push({value:ut}),Dt<ut&&Mt++,almostEquals(Math.round((Dt+Mt*It)*At)/At,ut,relativeLabelSize(ut,Tt,nt))&&Mt++):Dt<ut&&Mt++);Mt<Ft;++Mt){const Ot=Math.round((Dt+Mt*It)*At)/At;if(Et&&Ot>dt)break;it.push({value:Ot})}return Et&&gt&&jt!==dt?it.length&&almostEquals(it[it.length-1].value,dt,relativeLabelSize(dt,Tt,nt))?it[it.length-1].value=dt:it.push({value:dt}):(!Et||jt===dt)&&it.push({value:jt}),it}function relativeLabelSize(nt,rt,{horizontal:it,minRotation:st}){const lt=toRadians(st),ct=(it?Math.sin(lt):Math.cos(lt))||.001,ut=.75*rt*(""+nt).length;return Math.min(rt/ct,ut)}class LinearScaleBase extends Scale{constructor(rt){super(rt),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(rt,it){return isNullOrUndef(rt)||(typeof rt=="number"||rt instanceof Number)&&!isFinite(+rt)?null:+rt}handleTickRangeOptions(){const{beginAtZero:rt}=this.options,{minDefined:it,maxDefined:st}=this.getUserBounds();let{min:lt,max:ct}=this;const ut=ht=>lt=it?lt:ht,dt=ht=>ct=st?ct:ht;if(rt){const ht=sign$1(lt),ft=sign$1(ct);ht<0&&ft<0?dt(0):ht>0&&ft>0&&ut(0)}if(lt===ct){let ht=ct===0?1:Math.abs(ct*.05);dt(ct+ht),rt||ut(lt-ht)}this.min=lt,this.max=ct}getTickLimit(){const rt=this.options.ticks;let{maxTicksLimit:it,stepSize:st}=rt,lt;return st?(lt=Math.ceil(this.max/st)-Math.floor(this.min/st)+1,lt>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${st} would result generating up to ${lt} ticks. Limiting to 1000.`),lt=1e3)):(lt=this.computeTickLimit(),it=it||11),it&&(lt=Math.min(it,lt)),lt}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const rt=this.options,it=rt.ticks;let st=this.getTickLimit();st=Math.max(2,st);const lt={maxTicks:st,bounds:rt.bounds,min:rt.min,max:rt.max,precision:it.precision,step:it.stepSize,count:it.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:it.minRotation||0,includeBounds:it.includeBounds!==!1},ct=this._range||this,ut=generateTicks$1(lt,ct);return rt.bounds==="ticks"&&_setMinAndMaxByKey(ut,this,"value"),rt.reverse?(ut.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),ut}configure(){const rt=this.ticks;let it=this.min,st=this.max;if(super.configure(),this.options.offset&&rt.length){const lt=(st-it)/Math.max(rt.length-1,1)/2;it-=lt,st+=lt}this._startValue=it,this._endValue=st,this._valueRange=st-it}getLabelForValue(rt){return formatNumber(rt,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{determineDataLimits(){const{min:rt,max:it}=this.getMinMax(!0);this.min=isNumberFinite(rt)?rt:0,this.max=isNumberFinite(it)?it:1,this.handleTickRangeOptions()}computeTickLimit(){const rt=this.isHorizontal(),it=rt?this.width:this.height,st=toRadians(this.options.ticks.minRotation),lt=(rt?Math.sin(st):Math.cos(st))||.001,ct=this._resolveTickFontOptions(0);return Math.ceil(it/Math.min(40,ct.lineHeight/lt))}getPixelForValue(rt){return rt===null?NaN:this.getPixelForDecimal((rt-this._startValue)/this._valueRange)}getValueForPixel(rt){return this._startValue+this.getDecimalForPixel(rt)*this._valueRange}}So(LinearScale,"id","linear"),So(LinearScale,"defaults",{ticks:{callback:Ticks.formatters.numeric}});const log10Floor=nt=>Math.floor(log10(nt)),changeExponent=(nt,rt)=>Math.pow(10,log10Floor(nt)+rt);function isMajor(nt){return nt/Math.pow(10,log10Floor(nt))===1}function steps(nt,rt,it){const st=Math.pow(10,it),lt=Math.floor(nt/st);return Math.ceil(rt/st)-lt}function startExp(nt,rt){const it=rt-nt;let st=log10Floor(it);for(;steps(nt,rt,st)>10;)st++;for(;steps(nt,rt,st)<10;)st--;return Math.min(st,log10Floor(nt))}function generateTicks(nt,{min:rt,max:it}){rt=finiteOrDefault(nt.min,rt);const st=[],lt=log10Floor(rt);let ct=startExp(rt,it),ut=ct<0?Math.pow(10,Math.abs(ct)):1;const dt=Math.pow(10,ct),ht=lt>ct?Math.pow(10,lt):0,ft=Math.round((rt-ht)*ut)/ut,pt=Math.floor((rt-ht)/dt/10)*dt*10;let mt=Math.floor((ft-pt)/Math.pow(10,ct)),gt=finiteOrDefault(nt.min,Math.round((ht+pt+mt*Math.pow(10,ct))*ut)/ut);for(;gt<it;)st.push({value:gt,major:isMajor(gt),significand:mt}),mt>=10?mt=mt<15?15:20:mt++,mt>=20&&(ct++,mt=2,ut=ct>=0?1:ut),gt=Math.round((ht+pt+mt*Math.pow(10,ct))*ut)/ut;const xt=finiteOrDefault(nt.max,gt);return st.push({value:xt,major:isMajor(xt),significand:mt}),st}class LogarithmicScale extends Scale{constructor(rt){super(rt),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(rt,it){const st=LinearScaleBase.prototype.parse.apply(this,[rt,it]);if(st===0){this._zero=!0;return}return isNumberFinite(st)&&st>0?st:null}determineDataLimits(){const{min:rt,max:it}=this.getMinMax(!0);this.min=isNumberFinite(rt)?Math.max(0,rt):null,this.max=isNumberFinite(it)?Math.max(0,it):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!isNumberFinite(this._userMin)&&(this.min=rt===changeExponent(this.min,0)?changeExponent(this.min,-1):changeExponent(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:rt,maxDefined:it}=this.getUserBounds();let st=this.min,lt=this.max;const ct=dt=>st=rt?st:dt,ut=dt=>lt=it?lt:dt;st===lt&&(st<=0?(ct(1),ut(10)):(ct(changeExponent(st,-1)),ut(changeExponent(lt,1)))),st<=0&&ct(changeExponent(lt,-1)),lt<=0&&ut(changeExponent(st,1)),this.min=st,this.max=lt}buildTicks(){const rt=this.options,it={min:this._userMin,max:this._userMax},st=generateTicks(it,this);return rt.bounds==="ticks"&&_setMinAndMaxByKey(st,this,"value"),rt.reverse?(st.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),st}getLabelForValue(rt){return rt===void 0?"0":formatNumber(rt,this.chart.options.locale,this.options.ticks.format)}configure(){const rt=this.min;super.configure(),this._startValue=log10(rt),this._valueRange=log10(this.max)-log10(rt)}getPixelForValue(rt){return(rt===void 0||rt===0)&&(rt=this.min),rt===null||isNaN(rt)?NaN:this.getPixelForDecimal(rt===this.min?0:(log10(rt)-this._startValue)/this._valueRange)}getValueForPixel(rt){const it=this.getDecimalForPixel(rt);return Math.pow(10,this._startValue+it*this._valueRange)}}So(LogarithmicScale,"id","logarithmic"),So(LogarithmicScale,"defaults",{ticks:{callback:Ticks.formatters.logarithmic,major:{enabled:!0}}});function getTickBackdropHeight(nt){const rt=nt.ticks;if(rt.display&&nt.display){const it=toPadding(rt.backdropPadding);return valueOrDefault(rt.font&&rt.font.size,defaults.font.size)+it.height}return 0}function measureLabelSize(nt,rt,it){return it=isArray(it)?it:[it],{w:_longestText(nt,rt.string,it),h:it.length*rt.lineHeight}}function determineLimits(nt,rt,it,st,lt){return nt===st||nt===lt?{start:rt-it/2,end:rt+it/2}:nt<st||nt>lt?{start:rt-it,end:rt}:{start:rt,end:rt+it}}function fitWithPointLabels(nt){const rt={l:nt.left+nt._padding.left,r:nt.right-nt._padding.right,t:nt.top+nt._padding.top,b:nt.bottom-nt._padding.bottom},it=Object.assign({},rt),st=[],lt=[],ct=nt._pointLabels.length,ut=nt.options.pointLabels,dt=ut.centerPointLabels?PI/ct:0;for(let ht=0;ht<ct;ht++){const ft=ut.setContext(nt.getPointLabelContext(ht));lt[ht]=ft.padding;const pt=nt.getPointPosition(ht,nt.drawingArea+lt[ht],dt),mt=toFont(ft.font),gt=measureLabelSize(nt.ctx,mt,nt._pointLabels[ht]);st[ht]=gt;const xt=_normalizeAngle(nt.getIndexAngle(ht)+dt),yt=Math.round(toDegrees(xt)),vt=determineLimits(yt,pt.x,gt.w,0,180),St=determineLimits(yt,pt.y,gt.h,90,270);updateLimits(it,rt,xt,vt,St)}nt.setCenterPoint(rt.l-it.l,it.r-rt.r,rt.t-it.t,it.b-rt.b),nt._pointLabelItems=buildPointLabelItems(nt,st,lt)}function updateLimits(nt,rt,it,st,lt){const ct=Math.abs(Math.sin(it)),ut=Math.abs(Math.cos(it));let dt=0,ht=0;st.start<rt.l?(dt=(rt.l-st.start)/ct,nt.l=Math.min(nt.l,rt.l-dt)):st.end>rt.r&&(dt=(st.end-rt.r)/ct,nt.r=Math.max(nt.r,rt.r+dt)),lt.start<rt.t?(ht=(rt.t-lt.start)/ut,nt.t=Math.min(nt.t,rt.t-ht)):lt.end>rt.b&&(ht=(lt.end-rt.b)/ut,nt.b=Math.max(nt.b,rt.b+ht))}function createPointLabelItem(nt,rt,it){const st=nt.drawingArea,{extra:lt,additionalAngle:ct,padding:ut,size:dt}=it,ht=nt.getPointPosition(rt,st+lt+ut,ct),ft=Math.round(toDegrees(_normalizeAngle(ht.angle+HALF_PI))),pt=yForAngle(ht.y,dt.h,ft),mt=getTextAlignForAngle(ft),gt=leftForTextAlign(ht.x,dt.w,mt);return{visible:!0,x:ht.x,y:pt,textAlign:mt,left:gt,top:pt,right:gt+dt.w,bottom:pt+dt.h}}function isNotOverlapped(nt,rt){if(!rt)return!0;const{left:it,top:st,right:lt,bottom:ct}=nt;return!(_isPointInArea({x:it,y:st},rt)||_isPointInArea({x:it,y:ct},rt)||_isPointInArea({x:lt,y:st},rt)||_isPointInArea({x:lt,y:ct},rt))}function buildPointLabelItems(nt,rt,it){const st=[],lt=nt._pointLabels.length,ct=nt.options,{centerPointLabels:ut,display:dt}=ct.pointLabels,ht={extra:getTickBackdropHeight(ct)/2,additionalAngle:ut?PI/lt:0};let ft;for(let pt=0;pt<lt;pt++){ht.padding=it[pt],ht.size=rt[pt];const mt=createPointLabelItem(nt,pt,ht);st.push(mt),dt==="auto"&&(mt.visible=isNotOverlapped(mt,ft),mt.visible&&(ft=mt))}return st}function getTextAlignForAngle(nt){return nt===0||nt===180?"center":nt<180?"left":"right"}function leftForTextAlign(nt,rt,it){return it==="right"?nt-=rt:it==="center"&&(nt-=rt/2),nt}function yForAngle(nt,rt,it){return it===90||it===270?nt-=rt/2:(it>270||it<90)&&(nt-=rt),nt}function drawPointLabelBox(nt,rt,it){const{left:st,top:lt,right:ct,bottom:ut}=it,{backdropColor:dt}=rt;if(!isNullOrUndef(dt)){const ht=toTRBLCorners(rt.borderRadius),ft=toPadding(rt.backdropPadding);nt.fillStyle=dt;const pt=st-ft.left,mt=lt-ft.top,gt=ct-st+ft.width,xt=ut-lt+ft.height;Object.values(ht).some(yt=>yt!==0)?(nt.beginPath(),addRoundedRectPath(nt,{x:pt,y:mt,w:gt,h:xt,radius:ht}),nt.fill()):nt.fillRect(pt,mt,gt,xt)}}function drawPointLabels(nt,rt){const{ctx:it,options:{pointLabels:st}}=nt;for(let lt=rt-1;lt>=0;lt--){const ct=nt._pointLabelItems[lt];if(!ct.visible)continue;const ut=st.setContext(nt.getPointLabelContext(lt));drawPointLabelBox(it,ut,ct);const dt=toFont(ut.font),{x:ht,y:ft,textAlign:pt}=ct;renderText(it,nt._pointLabels[lt],ht,ft+dt.lineHeight/2,dt,{color:ut.color,textAlign:pt,textBaseline:"middle"})}}function pathRadiusLine(nt,rt,it,st){const{ctx:lt}=nt;if(it)lt.arc(nt.xCenter,nt.yCenter,rt,0,TAU);else{let ct=nt.getPointPosition(0,rt);lt.moveTo(ct.x,ct.y);for(let ut=1;ut<st;ut++)ct=nt.getPointPosition(ut,rt),lt.lineTo(ct.x,ct.y)}}function drawRadiusLine(nt,rt,it,st,lt){const ct=nt.ctx,ut=rt.circular,{color:dt,lineWidth:ht}=rt;!ut&&!st||!dt||!ht||it<0||(ct.save(),ct.strokeStyle=dt,ct.lineWidth=ht,ct.setLineDash(lt.dash),ct.lineDashOffset=lt.dashOffset,ct.beginPath(),pathRadiusLine(nt,it,ut,st),ct.closePath(),ct.stroke(),ct.restore())}function createPointLabelContext(nt,rt,it){return createContext(nt,{label:it,index:rt,type:"pointLabel"})}class RadialLinearScale extends LinearScaleBase{constructor(rt){super(rt),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const rt=this._padding=toPadding(getTickBackdropHeight(this.options)/2),it=this.width=this.maxWidth-rt.width,st=this.height=this.maxHeight-rt.height;this.xCenter=Math.floor(this.left+it/2+rt.left),this.yCenter=Math.floor(this.top+st/2+rt.top),this.drawingArea=Math.floor(Math.min(it,st)/2)}determineDataLimits(){const{min:rt,max:it}=this.getMinMax(!1);this.min=isNumberFinite(rt)&&!isNaN(rt)?rt:0,this.max=isNumberFinite(it)&&!isNaN(it)?it:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))}generateTickLabels(rt){LinearScaleBase.prototype.generateTickLabels.call(this,rt),this._pointLabels=this.getLabels().map((it,st)=>{const lt=callback(this.options.pointLabels.callback,[it,st],this);return lt||lt===0?lt:""}).filter((it,st)=>this.chart.getDataVisibility(st))}fit(){const rt=this.options;rt.display&&rt.pointLabels.display?fitWithPointLabels(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(rt,it,st,lt){this.xCenter+=Math.floor((rt-it)/2),this.yCenter+=Math.floor((st-lt)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(rt,it,st,lt))}getIndexAngle(rt){const it=TAU/(this._pointLabels.length||1),st=this.options.startAngle||0;return _normalizeAngle(rt*it+toRadians(st))}getDistanceFromCenterForValue(rt){if(isNullOrUndef(rt))return NaN;const it=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-rt)*it:(rt-this.min)*it}getValueForDistanceFromCenter(rt){if(isNullOrUndef(rt))return NaN;const it=rt/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-it:this.min+it}getPointLabelContext(rt){const it=this._pointLabels||[];if(rt>=0&&rt<it.length){const st=it[rt];return createPointLabelContext(this.getContext(),rt,st)}}getPointPosition(rt,it,st=0){const lt=this.getIndexAngle(rt)-HALF_PI+st;return{x:Math.cos(lt)*it+this.xCenter,y:Math.sin(lt)*it+this.yCenter,angle:lt}}getPointPositionForValue(rt,it){return this.getPointPosition(rt,this.getDistanceFromCenterForValue(it))}getBasePosition(rt){return this.getPointPositionForValue(rt||0,this.getBaseValue())}getPointLabelPosition(rt){const{left:it,top:st,right:lt,bottom:ct}=this._pointLabelItems[rt];return{left:it,top:st,right:lt,bottom:ct}}drawBackground(){const{backgroundColor:rt,grid:{circular:it}}=this.options;if(rt){const st=this.ctx;st.save(),st.beginPath(),pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),it,this._pointLabels.length),st.closePath(),st.fillStyle=rt,st.fill(),st.restore()}}drawGrid(){const rt=this.ctx,it=this.options,{angleLines:st,grid:lt,border:ct}=it,ut=this._pointLabels.length;let dt,ht,ft;if(it.pointLabels.display&&drawPointLabels(this,ut),lt.display&&this.ticks.forEach((pt,mt)=>{if(mt!==0){ht=this.getDistanceFromCenterForValue(pt.value);const gt=this.getContext(mt),xt=lt.setContext(gt),yt=ct.setContext(gt);drawRadiusLine(this,xt,ht,ut,yt)}}),st.display){for(rt.save(),dt=ut-1;dt>=0;dt--){const pt=st.setContext(this.getPointLabelContext(dt)),{color:mt,lineWidth:gt}=pt;!gt||!mt||(rt.lineWidth=gt,rt.strokeStyle=mt,rt.setLineDash(pt.borderDash),rt.lineDashOffset=pt.borderDashOffset,ht=this.getDistanceFromCenterForValue(it.ticks.reverse?this.min:this.max),ft=this.getPointPosition(dt,ht),rt.beginPath(),rt.moveTo(this.xCenter,this.yCenter),rt.lineTo(ft.x,ft.y),rt.stroke())}rt.restore()}}drawBorder(){}drawLabels(){const rt=this.ctx,it=this.options,st=it.ticks;if(!st.display)return;const lt=this.getIndexAngle(0);let ct,ut;rt.save(),rt.translate(this.xCenter,this.yCenter),rt.rotate(lt),rt.textAlign="center",rt.textBaseline="middle",this.ticks.forEach((dt,ht)=>{if(ht===0&&!it.reverse)return;const ft=st.setContext(this.getContext(ht)),pt=toFont(ft.font);if(ct=this.getDistanceFromCenterForValue(this.ticks[ht].value),ft.showLabelBackdrop){rt.font=pt.string,ut=rt.measureText(dt.label).width,rt.fillStyle=ft.backdropColor;const mt=toPadding(ft.backdropPadding);rt.fillRect(-ut/2-mt.left,-ct-pt.size/2-mt.top,ut+mt.width,pt.size+mt.height)}renderText(rt,dt.label,0,-ct,pt,{color:ft.color,strokeColor:ft.textStrokeColor,strokeWidth:ft.textStrokeWidth})}),rt.restore()}drawTitle(){}}So(RadialLinearScale,"id","radialLinear"),So(RadialLinearScale,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ticks.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(rt){return rt},padding:5,centerPointLabels:!1}}),So(RadialLinearScale,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),So(RadialLinearScale,"descriptors",{angleLines:{_fallback:"grid"}});const INTERVALS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UNITS=Object.keys(INTERVALS);function sorter(nt,rt){return nt-rt}function parse(nt,rt){if(isNullOrUndef(rt))return null;const it=nt._adapter,{parser:st,round:lt,isoWeekday:ct}=nt._parseOpts;let ut=rt;return typeof st=="function"&&(ut=st(ut)),isNumberFinite(ut)||(ut=typeof st=="string"?it.parse(ut,st):it.parse(ut)),ut===null?null:(lt&&(ut=lt==="week"&&(isNumber(ct)||ct===!0)?it.startOf(ut,"isoWeek",ct):it.startOf(ut,lt)),+ut)}function determineUnitForAutoTicks(nt,rt,it,st){const lt=UNITS.length;for(let ct=UNITS.indexOf(nt);ct<lt-1;++ct){const ut=INTERVALS[UNITS[ct]],dt=ut.steps?ut.steps:Number.MAX_SAFE_INTEGER;if(ut.common&&Math.ceil((it-rt)/(dt*ut.size))<=st)return UNITS[ct]}return UNITS[lt-1]}function determineUnitForFormatting(nt,rt,it,st,lt){for(let ct=UNITS.length-1;ct>=UNITS.indexOf(it);ct--){const ut=UNITS[ct];if(INTERVALS[ut].common&&nt._adapter.diff(lt,st,ut)>=rt-1)return ut}return UNITS[it?UNITS.indexOf(it):0]}function determineMajorUnit(nt){for(let rt=UNITS.indexOf(nt)+1,it=UNITS.length;rt<it;++rt)if(INTERVALS[UNITS[rt]].common)return UNITS[rt]}function addTick(nt,rt,it){if(!it)nt[rt]=!0;else if(it.length){const{lo:st,hi:lt}=_lookup(it,rt),ct=it[st]>=rt?it[st]:it[lt];nt[ct]=!0}}function setMajorTicks(nt,rt,it,st){const lt=nt._adapter,ct=+lt.startOf(rt[0].value,st),ut=rt[rt.length-1].value;let dt,ht;for(dt=ct;dt<=ut;dt=+lt.add(dt,1,st))ht=it[dt],ht>=0&&(rt[ht].major=!0);return rt}function ticksFromTimestamps(nt,rt,it){const st=[],lt={},ct=rt.length;let ut,dt;for(ut=0;ut<ct;++ut)dt=rt[ut],lt[dt]=ut,st.push({value:dt,major:!1});return ct===0||!it?st:setMajorTicks(nt,st,lt,it)}class TimeScale extends Scale{constructor(rt){super(rt),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(rt,it={}){const st=rt.time||(rt.time={}),lt=this._adapter=new adapters._date(rt.adapters.date);lt.init(it),mergeIf(st.displayFormats,lt.formats()),this._parseOpts={parser:st.parser,round:st.round,isoWeekday:st.isoWeekday},super.init(rt),this._normalized=it.normalized}parse(rt,it){return rt===void 0?null:parse(this,rt)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const rt=this.options,it=this._adapter,st=rt.time.unit||"day";let{min:lt,max:ct,minDefined:ut,maxDefined:dt}=this.getUserBounds();function ht(ft){!ut&&!isNaN(ft.min)&&(lt=Math.min(lt,ft.min)),!dt&&!isNaN(ft.max)&&(ct=Math.max(ct,ft.max))}(!ut||!dt)&&(ht(this._getLabelBounds()),(rt.bounds!=="ticks"||rt.ticks.source!=="labels")&&ht(this.getMinMax(!1))),lt=isNumberFinite(lt)&&!isNaN(lt)?lt:+it.startOf(Date.now(),st),ct=isNumberFinite(ct)&&!isNaN(ct)?ct:+it.endOf(Date.now(),st)+1,this.min=Math.min(lt,ct-1),this.max=Math.max(lt+1,ct)}_getLabelBounds(){const rt=this.getLabelTimestamps();let it=Number.POSITIVE_INFINITY,st=Number.NEGATIVE_INFINITY;return rt.length&&(it=rt[0],st=rt[rt.length-1]),{min:it,max:st}}buildTicks(){const rt=this.options,it=rt.time,st=rt.ticks,lt=st.source==="labels"?this.getLabelTimestamps():this._generate();rt.bounds==="ticks"&&lt.length&&(this.min=this._userMin||lt[0],this.max=this._userMax||lt[lt.length-1]);const ct=this.min,ut=this.max,dt=_filterBetween(lt,ct,ut);return this._unit=it.unit||(st.autoSkip?determineUnitForAutoTicks(it.minUnit,this.min,this.max,this._getLabelCapacity(ct)):determineUnitForFormatting(this,dt.length,it.minUnit,this.min,this.max)),this._majorUnit=!st.major.enabled||this._unit==="year"?void 0:determineMajorUnit(this._unit),this.initOffsets(lt),rt.reverse&&dt.reverse(),ticksFromTimestamps(this,dt,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(rt=>+rt.value))}initOffsets(rt=[]){let it=0,st=0,lt,ct;this.options.offset&&rt.length&&(lt=this.getDecimalForValue(rt[0]),rt.length===1?it=1-lt:it=(this.getDecimalForValue(rt[1])-lt)/2,ct=this.getDecimalForValue(rt[rt.length-1]),rt.length===1?st=ct:st=(ct-this.getDecimalForValue(rt[rt.length-2]))/2);const ut=rt.length<3?.5:.25;it=_limitValue(it,0,ut),st=_limitValue(st,0,ut),this._offsets={start:it,end:st,factor:1/(it+1+st)}}_generate(){const rt=this._adapter,it=this.min,st=this.max,lt=this.options,ct=lt.time,ut=ct.unit||determineUnitForAutoTicks(ct.minUnit,it,st,this._getLabelCapacity(it)),dt=valueOrDefault(lt.ticks.stepSize,1),ht=ut==="week"?ct.isoWeekday:!1,ft=isNumber(ht)||ht===!0,pt={};let mt=it,gt,xt;if(ft&&(mt=+rt.startOf(mt,"isoWeek",ht)),mt=+rt.startOf(mt,ft?"day":ut),rt.diff(st,it,ut)>1e5*dt)throw new Error(it+" and "+st+" are too far apart with stepSize of "+dt+" "+ut);const yt=lt.ticks.source==="data"&&this.getDataTimestamps();for(gt=mt,xt=0;gt<st;gt=+rt.add(gt,dt,ut),xt++)addTick(pt,gt,yt);return(gt===st||lt.bounds==="ticks"||xt===1)&&addTick(pt,gt,yt),Object.keys(pt).sort(sorter).map(vt=>+vt)}getLabelForValue(rt){const it=this._adapter,st=this.options.time;return st.tooltipFormat?it.format(rt,st.tooltipFormat):it.format(rt,st.displayFormats.datetime)}format(rt,it){const lt=this.options.time.displayFormats,ct=this._unit,ut=it||lt[ct];return this._adapter.format(rt,ut)}_tickFormatFunction(rt,it,st,lt){const ct=this.options,ut=ct.ticks.callback;if(ut)return callback(ut,[rt,it,st],this);const dt=ct.time.displayFormats,ht=this._unit,ft=this._majorUnit,pt=ht&&dt[ht],mt=ft&&dt[ft],gt=st[it],xt=ft&&mt&&gt&&gt.major;return this._adapter.format(rt,lt||(xt?mt:pt))}generateTickLabels(rt){let it,st,lt;for(it=0,st=rt.length;it<st;++it)lt=rt[it],lt.label=this._tickFormatFunction(lt.value,it,rt)}getDecimalForValue(rt){return rt===null?NaN:(rt-this.min)/(this.max-this.min)}getPixelForValue(rt){const it=this._offsets,st=this.getDecimalForValue(rt);return this.getPixelForDecimal((it.start+st)*it.factor)}getValueForPixel(rt){const it=this._offsets,st=this.getDecimalForPixel(rt)/it.factor-it.end;return this.min+st*(this.max-this.min)}_getLabelSize(rt){const it=this.options.ticks,st=this.ctx.measureText(rt).width,lt=toRadians(this.isHorizontal()?it.maxRotation:it.minRotation),ct=Math.cos(lt),ut=Math.sin(lt),dt=this._resolveTickFontOptions(0).size;return{w:st*ct+dt*ut,h:st*ut+dt*ct}}_getLabelCapacity(rt){const it=this.options.time,st=it.displayFormats,lt=st[it.unit]||st.millisecond,ct=this._tickFormatFunction(rt,0,ticksFromTimestamps(this,[rt],this._majorUnit),lt),ut=this._getLabelSize(ct),dt=Math.floor(this.isHorizontal()?this.width/ut.w:this.height/ut.h)-1;return dt>0?dt:1}getDataTimestamps(){let rt=this._cache.data||[],it,st;if(rt.length)return rt;const lt=this.getMatchingVisibleMetas();if(this._normalized&&lt.length)return this._cache.data=lt[0].controller.getAllParsedValues(this);for(it=0,st=lt.length;it<st;++it)rt=rt.concat(lt[it].controller.getAllParsedValues(this));return this._cache.data=this.normalize(rt)}getLabelTimestamps(){const rt=this._cache.labels||[];let it,st;if(rt.length)return rt;const lt=this.getLabels();for(it=0,st=lt.length;it<st;++it)rt.push(parse(this,lt[it]));return this._cache.labels=this._normalized?rt:this.normalize(rt)}normalize(rt){return _arrayUnique(rt.sort(sorter))}}So(TimeScale,"id","time"),So(TimeScale,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function interpolate(nt,rt,it){let st=0,lt=nt.length-1,ct,ut,dt,ht;it?(rt>=nt[st].pos&&rt<=nt[lt].pos&&({lo:st,hi:lt}=_lookupByKey(nt,"pos",rt)),{pos:ct,time:dt}=nt[st],{pos:ut,time:ht}=nt[lt]):(rt>=nt[st].time&&rt<=nt[lt].time&&({lo:st,hi:lt}=_lookupByKey(nt,"time",rt)),{time:ct,pos:dt}=nt[st],{time:ut,pos:ht}=nt[lt]);const ft=ut-ct;return ft?dt+(ht-dt)*(rt-ct)/ft:dt}class TimeSeriesScale extends TimeScale{constructor(rt){super(rt),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const rt=this._getTimestampsForTable(),it=this._table=this.buildLookupTable(rt);this._minPos=interpolate(it,this.min),this._tableRange=interpolate(it,this.max)-this._minPos,super.initOffsets(rt)}buildLookupTable(rt){const{min:it,max:st}=this,lt=[],ct=[];let ut,dt,ht,ft,pt;for(ut=0,dt=rt.length;ut<dt;++ut)ft=rt[ut],ft>=it&&ft<=st&&lt.push(ft);if(lt.length<2)return[{time:it,pos:0},{time:st,pos:1}];for(ut=0,dt=lt.length;ut<dt;++ut)pt=lt[ut+1],ht=lt[ut-1],ft=lt[ut],Math.round((pt+ht)/2)!==ft&&ct.push({time:ft,pos:ut/(dt-1)});return ct}_generate(){const rt=this.min,it=this.max;let st=super.getDataTimestamps();return(!st.includes(rt)||!st.length)&&st.splice(0,0,rt),(!st.includes(it)||st.length===1)&&st.push(it),st.sort((lt,ct)=>lt-ct)}_getTimestampsForTable(){let rt=this._cache.all||[];if(rt.length)return rt;const it=this.getDataTimestamps(),st=this.getLabelTimestamps();return it.length&&st.length?rt=this.normalize(it.concat(st)):rt=it.length?it:st,rt=this._cache.all=rt,rt}getDecimalForValue(rt){return(interpolate(this._table,rt)-this._minPos)/this._tableRange}getValueForPixel(rt){const it=this._offsets,st=this.getDecimalForPixel(rt)/it.factor-it.end;return interpolate(this._table,st*this._tableRange+this._minPos,!0)}}So(TimeSeriesScale,"id","timeseries"),So(TimeSeriesScale,"defaults",TimeScale.defaults);const defaultDatasetIdKey="label";function reforwardRef(nt,rt){typeof nt=="function"?nt(rt):nt&&(nt.current=rt)}function setOptions(nt,rt){const it=nt.options;it&&rt&&Object.assign(it,rt)}function setLabels(nt,rt){nt.labels=rt}function setDatasets(nt,rt){let it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:defaultDatasetIdKey;const st=[];nt.datasets=rt.map(lt=>{const ct=nt.datasets.find(ut=>ut[it]===lt[it]);return!ct||!lt.data||st.includes(ct)?{...lt}:(st.push(ct),Object.assign(ct,lt),ct)})}function cloneData(nt){let rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:defaultDatasetIdKey;const it={labels:[],datasets:[]};return setLabels(it,nt.labels),setDatasets(it,nt.datasets,rt),it}function ChartComponent(nt,rt){const{height:it=150,width:st=300,redraw:lt=!1,datasetIdKey:ct,type:ut,data:dt,options:ht,plugins:ft=[],fallbackContent:pt,updateMode:mt,...gt}=nt,xt=reactExports.useRef(null),yt=reactExports.useRef(),vt=()=>{xt.current&&(yt.current=new Chart$1(xt.current,{type:ut,data:cloneData(dt,ct),options:ht&&{...ht},plugins:ft}),reforwardRef(rt,yt.current))},St=()=>{reforwardRef(rt,null),yt.current&&(yt.current.destroy(),yt.current=null)};return reactExports.useEffect(()=>{!lt&&yt.current&&ht&&setOptions(yt.current,ht)},[lt,ht]),reactExports.useEffect(()=>{!lt&&yt.current&&setLabels(yt.current.config.data,dt.labels)},[lt,dt.labels]),reactExports.useEffect(()=>{!lt&&yt.current&&dt.datasets&&setDatasets(yt.current.config.data,dt.datasets,ct)},[lt,dt.datasets]),reactExports.useEffect(()=>{yt.current&&(lt?(St(),setTimeout(vt)):yt.current.update(mt))},[lt,ht,dt.labels,dt.datasets,mt]),reactExports.useEffect(()=>{yt.current&&(St(),setTimeout(vt))},[ut]),reactExports.useEffect(()=>(vt(),()=>St()),[]),e$2.createElement("canvas",Object.assign({ref:xt,role:"img",height:it,width:st},gt),pt)}const Chart=reactExports.forwardRef(ChartComponent);function createTypedChart(nt,rt){return Chart$1.register(rt),reactExports.forwardRef((it,st)=>e$2.createElement(Chart,Object.assign({},it,{ref:st,type:nt})))}const Line$1=createTypedChart("line",LineController);Chart$1.register(CategoryScale,LinearScale,PointElement,LineElement,plugin_title,plugin_tooltip,plugin_legend);const ChartBodyComposition=()=>{const nt=Recoil_index_20(inbodyListState),rt={responsive:!0,plugins:{legend:{position:"top"}},scales:{x:{axis:"x",position:"bottom",ticks:{minRotation:45,padding:5}},y:{axis:"y",display:!0,position:"left",title:{display:!0,align:"end",color:"#808080",font:{size:12,family:"'Noto Sans KR', sans-serif",weight:300},text:"단위: kg"}},y_sub:{position:"right",title:{display:!0,align:"end",color:"#808080",font:{size:12,family:"'Noto Sans KR', sans-serif",weight:300},text:"단위: %"}}}},st={labels:nt.map(lt=>lt.date.substring(5,10)),datasets:[{label:"골격근량",data:nt.map(lt=>lt.muscle),borderColor:"rgb(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 0.5)",yAxisID:"y"},{label:"체지방량",data:nt.map(lt=>lt.fat_mass),borderColor:"rgb(255, 205, 86)",backgroundColor:"rgba(255, 205, 86, 0.5)",yAxisID:"y"},{label:"체지방율",data:nt.map(lt=>lt.fat_per),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)",yAxisID:"y_sub"}]};return jsxRuntimeExports.jsxs("div",{className:"px-2",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-4",children:jsxRuntimeExports.jsx("div",{className:"px-4 py-1 italic font-semibold bg-white border border-gray-700 rounded-lg text-sky-300",children:"체성분 변화량"})}),jsxRuntimeExports.jsx(Line$1,{options:rt,data:st})]})};Chart$1.register(CategoryScale,LinearScale,PointElement,LineElement,plugin_title,plugin_tooltip,plugin_legend);const ChartWeight=()=>{const nt=Recoil_index_20(inbodyListState),rt={responsive:!0,plugins:{legend:{position:"top"}},scales:{x:{axis:"x",position:"bottom",ticks:{minRotation:45,padding:5}},y:{axis:"y",display:!0,position:"left",title:{display:!0,align:"end",color:"#808080",font:{size:12,family:"'Noto Sans KR', sans-serif",weight:300},text:"단위: kg"}}}},st={labels:nt.map(lt=>lt.date.substring(5,10)),datasets:[{label:"체중",data:nt.map(lt=>lt.weight),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",yAxisID:"y"}]};return jsxRuntimeExports.jsxs("div",{className:"px-2 py-8 bg-white",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-4",children:jsxRuntimeExports.jsx("div",{className:"px-4 py-1 italic font-semibold bg-white border border-gray-700 rounded-lg text-rose-300",children:"체중 변화량"})}),jsxRuntimeExports.jsx(Line$1,{options:rt,data:st})]})},Graph=()=>jsxRuntimeExports.jsx("div",{className:"bg-[#C9DECF]/30 pb-20",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-10",children:[jsxRuntimeExports.jsx(ChartWeight,{}),jsxRuntimeExports.jsx(ChartBodyComposition,{})]})}),userTrainingState=Recoil_index_8({key:"userTrainingState",default:[]}),userFoodState=Recoil_index_8({key:"userFoodState",default:[]});function FaDumbbell(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 64c0-17.7 14.3-32 32-32h32c17.7 0 32 14.3 32 32V224v64V448c0 17.7-14.3 32-32 32H128c-17.7 0-32-14.3-32-32V384H64c-17.7 0-32-14.3-32-32V288c-17.7 0-32-14.3-32-32s14.3-32 32-32V160c0-17.7 14.3-32 32-32H96V64zm448 0v64h32c17.7 0 32 14.3 32 32v64c17.7 0 32 14.3 32 32s-14.3 32-32 32v64c0 17.7-14.3 32-32 32H544v64c0 17.7-14.3 32-32 32H480c-17.7 0-32-14.3-32-32V288 224 64c0-17.7 14.3-32 32-32h32c17.7 0 32 14.3 32 32zM416 224v64H224V224H416z"},child:[]}]})(nt)}function GiMeat(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.156 98.063c-4.05-.11-8.044 1.117-11.656 4-1.542 1.23-3.1 2.884-4.47 4.75-22.9 31.22-48.278 57.33-75.186 81-8.76 14.692 10.695 44.406 25.594 44.406 34.144-12.928 69.617-22.516 106.75-26.314 42.628-4.358 17.688-68.134-26.25-45.47 30.3-22.666 7.094-61.79-14.782-62.374zM310.47 108.156c-6.167-.108-12.215 1.172-17.595 4.28-1.576.912-3.042 1.948-4.406 3.095-.038-.056-.09-.13-.126-.186-79.912 66.402-116.334 73.468-158.22 86.844-6.886 2.2-12.27 7.18-16.5 15.5s-6.892 19.843-7.343 33.125c-.9 26.563 6.935 59.927 23.72 89.03 16.72 28.99 43.37 53.946 67.656 67.126 12.143 6.59 23.682 10.167 32.375 10.436 8.694.27 13.915-1.95 17.782-7.375 30.986-43.45 89.343-69.052 156.157-92.25-.005-.006.003-.023 0-.03 2.012-.663 3.967-1.51 5.842-2.594 8.2-4.738 13.535-12.897 16.282-22.125 2.747-9.227 3.22-19.75 2.03-31.25-.953-9.233-3.033-19.127-6.155-29.374-5.916 1.366-11.628 3.157-17.908 5.47 2.835 9.25 4.69 17.978 5.5 25.81 1.007 9.74.403 18.06-1.375 24.033-1.777 5.972-4.412 9.338-7.718 11.25-3.308 1.91-7.543 2.505-13.595 1.06-6.052-1.443-13.55-5.07-21.47-10.81-15.838-11.482-33.334-31.223-47.624-56-14.29-24.78-22.61-49.838-24.624-69.314-1.006-9.738-.403-18.027 1.375-24 1.78-5.973 4.414-9.37 7.72-11.28 1.653-.957 3.52-1.58 5.75-1.782.557-.05 1.147-.067 1.75-.063 1.81.014 3.824.272 6.094.814 6.05 1.444 13.518 5.04 21.437 10.78 8.218 5.957 16.884 14.166 25.314 24.126 5.07-4.055 9.34-8.25 13.406-13.188-8.97-10.46-18.366-19.26-27.75-26.062-9.354-6.78-18.733-11.61-28.094-13.844-2.34-.558-4.674-.935-7.03-1.125-.885-.07-1.776-.108-2.657-.124zm7.967 34.188c-.438.024-.86.063-1.28.125-17.327 2.54-14.97 36.035 5.03 74.56 20 38.528 50.52 67.576 67.844 65.032 5.995-.88 9.263-5.687 10.658-12.875-1.67 2.187-3.847 3.484-6.72 3.907-15.316 2.248-42.316-23.093-60-57.156-17.682-34.064-19.254-63.91-3.937-66.157 3.638-.53 7.69.417 12.345 2.782-8.68-6.8-17.353-10.583-23.938-10.218zM102 325.124c-16.555 1.844-35.304 3.26-57.063 4.376-49.128 2.523-25.555 71.576 30.094 52.22-49.365 29.9 3.86 86.927 26.97 46.75 10.362-18.016 21.88-33.79 34.375-47.814-8.42-9.644-16.078-20.224-22.563-31.47-4.52-7.835-8.462-15.898-11.812-24.06z"},child:[]}]})(nt)}function GiMuscleUp(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M165.906 18.688C15.593 59.28-42.187 198.55 92.72 245.375h-1.095c.635.086 1.274.186 1.906.28 8.985 3.077 18.83 5.733 29.532 7.94C173.36 273.35 209.74 321.22 212.69 368c-33.514 23.096-59.47 62.844-59.47 62.844L179.5 469.53 138.28 493h81.97c-40.425-40.435-11.76-85.906 36.125-85.906 48.54 0 73.945 48.112 36.156 85.906h81.126l-40.375-23.47 26.283-38.686s-26.376-40.4-60.282-63.406c3.204-46.602 39.5-94.167 89.595-113.844 10.706-2.207 20.546-4.86 29.53-7.938.633-.095 1.273-.195 1.908-.28h-1.125c134.927-46.82 77.163-186.094-73.157-226.69-40.722 39.37 6.54 101.683 43.626 56.877 36.9 69.08 8.603 127.587-72.28 83.406-11.88 24.492-34.213 41.374-60.688 41.374-26.703 0-49.168-17.167-60.97-42-81.774 45.38-110.512-13.372-73.437-82.78 37.09 44.805 84.35-17.508 43.626-56.876zm90.79 35.92c-27.388 0-51.33 27.556-51.33 63.61 0 36.056 23.942 62.995 51.33 62.995 27.387 0 51.327-26.94 51.327-62.994 0-36.058-23.94-63.61-51.328-63.61z"},child:[]}]})(nt)}const Description=({Title:nt,size:rt,subTitle:it,subsize:st,font:lt})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{className:`text-${rt} font-${lt} z-10`,children:nt}),jsxRuntimeExports.jsx("p",{className:`text-${st} text-gray-500 z-10`,children:it})]});Description.propTypes={Title:PropTypes.string,size:PropTypes.string,subTitle:PropTypes.string,subsize:PropTypes.string,font:PropTypes.string};Description.defaultProps={Title:"이전 운동 기록을 선택해주세요.",size:"base",subTitle:"최근 수행 순",subsize:"sm",font:"semibold"};const TrainingSummary=()=>{const nt=Recoil_index_20(selectedDateState),rt=Recoil_index_20(selectedDayState),it=Recoil_index_20(userTrainingState),st=()=>localStorage.getItem(`date_${nt.join("-")}`),lt=()=>it.length,ct=()=>it.reduce((dt,ht)=>dt+ht.sets.reduce((ft,pt)=>ft+pt.count*pt.kg,0),0),ut=()=>{let dt=!0;return it.forEach(ht=>{ht.sets.forEach(ft=>{if(ft.is_finished===!1){dt=!1;return}})}),dt};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"relative px-4 pt-2 pb-4 border border-teal-700 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"absolute right-2",children:jsxRuntimeExports.jsx(NextButton,{})}),jsxRuntimeExports.jsxs("p",{className:"pb-2",children:[nt[1],"월 ",nt[2],"일 ",rt," - 운동요약"]}),ut()?jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 py-4 bg-gray-100 border-white divide-x-4 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(BsAlarm,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:`${st()?st():50}분`,subTitle:"운동 시간"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(FaDumbbell,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:`${lt()}개`,subTitle:"운동 개수"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(GiMuscleUp,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:`${ct()}kg`,subTitle:"전체 볼륨"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center m-4",children:[jsxRuntimeExports.jsx(ExclamationTriangleIcon$1,{className:"w-6 h-6 text-red-500"}),jsxRuntimeExports.jsx(Description,{Title:"아직 완료되지 않은 운동입니다.",size:"sm",subTitle:"정보 확인을 위해 운동을 완료해주세요!",subsize:"xs",font:"medium"})]})]})})};function BiSolidBowlRice(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21 10a3.58 3.58 0 0 0-1.8-3 3.66 3.66 0 0 0-3.63-3.13 3.86 3.86 0 0 0-1 .13 3.7 3.7 0 0 0-5.11 0 3.86 3.86 0 0 0-1-.13A3.66 3.66 0 0 0 4.81 7 3.58 3.58 0 0 0 3 10a1 1 0 0 0-1 1 10 10 0 0 0 5 8.66V21a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1.34A10 10 0 0 0 22 11a1 1 0 0 0-1-1zM5 10a1.59 1.59 0 0 1 1.11-1.39l.83-.26-.16-.85a1.64 1.64 0 0 1 1.66-1.62 1.78 1.78 0 0 1 .83.2l.81.45.5-.77a1.71 1.71 0 0 1 2.84 0l.5.77.81-.45a1.78 1.78 0 0 1 .83-.2 1.65 1.65 0 0 1 1.67 1.6l-.16.85.82.28A1.59 1.59 0 0 1 19 10z"},child:[]}]})(nt)}function BiSolidCheese(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M15.16 2a1 1 0 0 0-.66.13l-12 7a.64.64 0 0 0-.13.1l-.1.08a1.17 1.17 0 0 0-.17.26.84.84 0 0 0-.1.43v10a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V10a8.08 8.08 0 0 0-6.84-8zm0 2.05A6.07 6.07 0 0 1 19.93 9H6.7zM6.5 18A1.5 1.5 0 1 1 8 16.5 1.5 1.5 0 0 1 6.5 18zm5-3a1.5 1.5 0 1 1 1.5-1.5 1.5 1.5 0 0 1-1.5 1.5zm5.5 3a2 2 0 1 1 2-2 2 2 0 0 1-2 2z"},child:[]}]})(nt)}const FoodSummary=()=>{const nt=Recoil_index_20(selectedDateState),rt=Recoil_index_20(selectedDayState),it=Recoil_index_20(userFoodState),st=it.reduce((dt,ht)=>dt+ht.food.calorie*(ht.servingSize/ht.food.servingSize)*ht.foodCount,0).toFixed(1),lt=it.reduce((dt,ht)=>dt+ht.food.carbohydrate*(ht.servingSize/ht.food.servingSize)*ht.foodCount,0).toFixed(1),ct=it.reduce((dt,ht)=>dt+ht.food.protein*(ht.servingSize/ht.food.servingSize)*ht.foodCount,0).toFixed(1),ut=it.reduce((dt,ht)=>dt+ht.food.lipid*(ht.servingSize/ht.food.servingSize)*ht.foodCount,0).toFixed(1);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"relative px-4 pt-2 pb-4 border border-teal-700 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"absolute right-2",children:jsxRuntimeExports.jsx(NextButton,{})}),jsxRuntimeExports.jsxs("p",{className:"pb-2",children:[nt[1],"월 ",nt[2],"일 ",rt," - 식단요약"," ",jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:["총 ",st,"kcal"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 py-4 bg-gray-100 border-white divide-x-4 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(BiSolidBowlRice,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:lt+"g",subTitle:"탄수화물"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(GiMeat,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:ct+"g",subTitle:"단백질"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(BiSolidCheese,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:ut+"g",subTitle:"지방"})]})]})]})})},DiaryPage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),st=Recoil_index_20(toggleDiaryState),[lt,ct]=Recoil_index_22(userTrainingState),[ut,dt]=Recoil_index_22(userFoodState),ht=()=>jsxRuntimeExports.jsx(Link,{to:`/diary/training/${it[0]}/${it[1]}/${it[2]}`,children:lt.length?jsxRuntimeExports.jsx(TrainingSummary,{}):jsxRuntimeExports.jsx(Button,{btnCss:"p-2 w-full text-white text-lg border bg-teal-700 rounded-lg",buttonName:"운동 계획하기"})}),ft=async()=>{await axios.get(`${nt}api/management/training?user_id=${rt.info.userId}&year=${it[0]}&month=${it[1]}&day=${it[2]}`).then(gt=>{ct(gt.data.user_training_list)}).catch(gt=>{console.log(gt)})},pt=()=>jsxRuntimeExports.jsx(Link,{to:`/diary/food/${it[0]}/${it[1]}/${it[2]}`,children:ut.length?jsxRuntimeExports.jsx(FoodSummary,{}):jsxRuntimeExports.jsx(Button,{btnCss:"p-2 w-full text-white text-lg border bg-teal-700 rounded-lg",buttonName:"식단 관리하기"})}),mt=async()=>{await axios.get(`${nt}api/management/food/list/${rt.info.userId}?year=${it[0]}&month=${it[1]}&day=${it[2]}`).then(gt=>{dt(gt.data)}).catch(gt=>{console.log(gt)})};return reactExports.useEffect(()=>{ft(),mt()},[it]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(PageTitle,{pageTitle:"다이어리"}),jsxRuntimeExports.jsx(ToggleTap,{leftTitle:"캘린더",rightTitle:"그래프",state:toggleDiaryState}),st==="left"?jsxRuntimeExports.jsx(CalendarMonth,{}):jsxRuntimeExports.jsx(Graph,{}),jsxRuntimeExports.jsx("hr",{className:`my-4 ${st==="right"?"hidden":""}`}),jsxRuntimeExports.jsxs("div",{className:`absolute -z-10 flex flex-col gap-4 mb-16 inset-x-4 ${st==="right"?"hidden":""}`,children:[ht(),pt()]})]})},ChallengeCard=({challengeId:nt,challengeTitle:rt,challengeSummary:it,challengeThumbnail:st})=>jsxRuntimeExports.jsx("div",{className:"justify-self-center",children:jsxRuntimeExports.jsx(Link,{to:`/challenge/${nt}`,children:jsxRuntimeExports.jsx("div",{className:"card -z-10",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center",children:[jsxRuntimeExports.jsx("div",{className:"w-40 mt-3 h-52",children:jsxRuntimeExports.jsx("img",{className:"w-full h-full border-2 rounded-lg",src:st,alt:"썸네일"})}),jsxRuntimeExports.jsxs("div",{className:"w-40 mt-1",children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-semibold text-left truncate",children:rt}),jsxRuntimeExports.jsx("p",{className:"text-base text-left text-gray-400 truncate",children:it})]})]})})})});ChallengeCard.propTypes={challengeId:PropTypes.number,challengeTitle:PropTypes.string,challengeSummary:PropTypes.string,challengeThumbnail:PropTypes.string,challengeStartDate:PropTypes.string,challengeEndDate:PropTypes.string};const ChallengeParticipating=()=>{const[nt,rt]=reactExports.useState([]),it=Recoil_index_20(baseUrlState),st=Recoil_index_20(userState),lt=async()=>{const ut=(await axios.get(`${it}api/challenge/list/${st.info.userId}`)).data;rt(ut)};reactExports.useEffect(()=>{lt()},[]);const ct=nt.map(ut=>jsxRuntimeExports.jsx(ChallengeCard,{challengeId:ut.challenge_id,challengeTitle:ut.title,challengeSummary:ut.summary,challengeThumbnail:ut.thumbnail,challengeStartDate:ut.start_date,challengeEndDate:ut.end_date},ut.challenge_id));return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 mb-16",children:ct.length?ct:jsxRuntimeExports.jsx("div",{className:"col-start-1 col-end-3 mt-4 text-center",children:"참여중인 챌린지가 없습니다."})}),jsxRuntimeExports.jsx("div",{className:st.info.role==="ROLE_ADMIN"?"fixed flex justify-center items-center bottom-20 right-6 w-16 h-16 border-2 rounded-full bg-teal-700":"hidden",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Link,{to:"/challenge/registration",children:jsxRuntimeExports.jsx(PlusIcon$1,{className:"w-8 h-8 text-white"})})})})]})},ChallengeCanParticipate=()=>{const[nt,rt]=reactExports.useState([]),it=Recoil_index_20(baseUrlState),st=Recoil_index_20(userState),lt=async()=>{const ut=(await axios.get(`${it}api/challenge/list/proceeding`)).data;rt(ut)};reactExports.useEffect(()=>{lt()},[]);const ct=nt.map(ut=>jsxRuntimeExports.jsx(ChallengeCard,{challengeId:ut.challenge_id,challengeTitle:ut.title,challengeSummary:ut.summary,challengeThumbnail:ut.thumbnail,challengeStartDate:ut.start_date,challengeEndDate:ut.end_date},ut.challenge_id));return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 mb-16",children:ct.length?ct:st.info.role==="ROLE_ADMIN"?null:jsxRuntimeExports.jsx("div",{className:"col-start-1 col-end-3 text-center",children:"참여가능한 챌린지가 없습니다."})}),jsxRuntimeExports.jsx("div",{className:st.info.role==="ROLE_ADMIN"?"fixed flex justify-center items-center bottom-20 right-6 w-16 h-16 border-2 rounded-full bg-teal-700":"hidden",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Link,{to:"/challenge/registration",children:jsxRuntimeExports.jsx(PlusIcon$1,{className:"w-8 h-8 text-white"})})})})]})},Challenge=()=>{const nt=Recoil_index_20(toggleState);return jsxRuntimeExports.jsxs("div",{className:"",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsx(PageTitle,{pageTitle:"챌린지"}),jsxRuntimeExports.jsx(ToggleTap,{leftTitle:"참여 가능",rightTitle:"참여 중",state:toggleState}),jsxRuntimeExports.jsx("hr",{className:"mt-4"})]}),nt==="left"?jsxRuntimeExports.jsx(ChallengeCanParticipate,{}):jsxRuntimeExports.jsx(ChallengeParticipating,{})]})},ChallengeDetailInfo=()=>{const{challengeId:nt}=useParams(),[rt,it]=reactExports.useState({}),st=Recoil_index_20(baseUrlState),lt=Recoil_index_20(userState),[ct,ut]=reactExports.useState(null),dt=async()=>{const vt=(await axios.get(`${st}api/challenge/detail/${nt}`)).data;it(vt)},ht=async()=>{await axios.get(`${st}api/challenge/${nt}/user/${lt.info.userId}`).then(vt=>{ut(vt.data)})};let ft=""+rt.start_date,pt=""+rt.end_date;const mt=ft.slice(0,10),gt=pt.slice(0,10),xt=async vt=>{vt.preventDefault(),await axios.post(`${st}api/challenge/${nt}/user/${lt.info.userId}`).then(()=>{ut(!0)})},yt=async vt=>{vt.preventDefault(),await axios.delete(`${st}api/challenge/${nt}/user/${lt.info.userId}`).then(()=>{ut(!1)})};return reactExports.useEffect(()=>{dt(),ht()},[rt]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"mt-2 mb-2 ml-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-1",children:[jsxRuntimeExports.jsx(CalendarIcon$1,{className:"w-5 h-5 mr-2 text-teal-700"}),jsxRuntimeExports.jsxs("p",{className:"text-lg",children:[mt," ~ ",gt]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-1",children:[jsxRuntimeExports.jsx(UsersIcon$1,{className:"w-5 h-5 mr-2 text-teal-700"}),jsxRuntimeExports.jsxs("p",{className:"text-lg",children:[rt.entry,"명 참여"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(FlagIcon$1,{className:"w-5 h-5 mr-2 text-teal-700"}),jsxRuntimeExports.jsx("p",{className:"text-lg truncate",children:rt.summary})]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:ct?jsxRuntimeExports.jsx("button",{onClick:yt,className:"w-10/12 p-2 mt-3 mb-4 text-center text-teal-700 bg-white border-2 border-teal-700 rounded-full",children:"참여중"}):jsxRuntimeExports.jsx("button",{onClick:xt,className:"w-10/12 p-2 mt-3 mb-4 text-center text-white bg-teal-700 border-2 border-teal-700 rounded-full",children:"참여하기"})}),jsxRuntimeExports.jsx("hr",{}),jsxRuntimeExports.jsxs("div",{className:"m-4",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl",children:"상세정보"}),rt.content]})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:ct?jsxRuntimeExports.jsx(Link,{to:"/challenge/ongoing",className:"w-10/12 p-2 mt-3 mb-4 text-center text-white bg-teal-700 border-2 border-teal-700 rounded-full",children:"챌린지 시작하기"}):null})})]})},ChallengeComment=({content:nt,nickname:rt,commentId:it,userId:st,profileImage:lt})=>{const ct=Recoil_index_20(baseUrlState),ut=Recoil_index_20(userState),dt=async ht=>{ht.preventDefault(),await axios.delete(`${ct}api/comment/${it}`)};return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mx-4 my-2 bg-gray-100 border-2 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("img",{src:lt||"/challenge/기본이미지.jpg",alt:"...",className:"w-10 h-10 m-1 rounded-full"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:rt}),jsxRuntimeExports.jsx("p",{children:nt})]})]}),st===ut.info.userId?jsxRuntimeExports.jsx("div",{className:"flex",children:jsxRuntimeExports.jsx("div",{onClick:dt,children:jsxRuntimeExports.jsx(TrashIcon$1,{className:"w-5 h-5 mr-2"})})}):null]})})};ChallengeComment.propTypes={nickname:PropTypes.string,content:PropTypes.string,commentId:PropTypes.number,userId:PropTypes.number,profileImage:PropTypes.string};const ChallengeDetailComment=()=>{const{challengeId:nt}=useParams(),[rt,it]=reactExports.useState([]),st=Recoil_index_20(baseUrlState),lt=Recoil_index_20(userState),[ct,ut]=reactExports.useState(""),dt=async()=>{const mt=(await axios.get(`${st}api/comment/${nt}`)).data;it(mt)};reactExports.useEffect(()=>{dt()},[rt]);const ht=rt.map(mt=>jsxRuntimeExports.jsx(ChallengeComment,{content:mt.content,nickname:mt.nickname,commentId:mt.comment_id,userId:mt.user_id,profileImage:mt.profile_image},mt.comment_id)),ft=mt=>{ut(mt.currentTarget.value)},pt=async mt=>{mt.preventDefault(),await axios.post(`${st}api/comment/${nt}`,{content:ct,user_id:lt.info.userId}).then(()=>{ut("")})};return jsxRuntimeExports.jsxs("div",{children:[rt.length?jsxRuntimeExports.jsx("div",{children:ht}):jsxRuntimeExports.jsx("div",{className:"mt-10 text-center text-gray-500",children:"등록된 댓글이 없습니다."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("div",{className:"fixed w-screen p-4 bottom-11",children:jsxRuntimeExports.jsxs("form",{onSubmit:pt,className:"flex",children:[jsxRuntimeExports.jsx("input",{className:"pl-2 border rounded-lg border-slate-950",type:"text",value:ct,onChange:ft,placeholder:"댓글을 입력해주세요."}),jsxRuntimeExports.jsx("button",{className:"w-20 h-10 text-white bg-teal-700 border rounded-lg",children:"입력"})]})})]})},ChallengeDetail=()=>{const{challengeId:nt}=useParams(),[rt,it]=reactExports.useState("info"),[st,lt]=reactExports.useState({}),ct=Recoil_index_20(baseUrlState),ut=Recoil_index_24(modalState),dt=()=>{ut({type:"challengeMenu",data:st})},ht=()=>{it("info")},ft=()=>{it("comment")},pt=async()=>{const mt=(await axios.get(`${ct}api/challenge/detail/${nt}`)).data;lt(mt)};return reactExports.useEffect(()=>{pt()},[]),jsxRuntimeExports.jsxs("div",{className:"mb-16",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsxs("div",{className:"absolute flex justify-between w-full",children:[jsxRuntimeExports.jsx(BackButton,{}),jsxRuntimeExports.jsx("button",{onClick:dt,children:jsxRuntimeExports.jsx(EllipsisVerticalIcon$1,{className:"w-6 h-6 mr-2"})})]}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:st.title}),jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsx("img",{src:st.image,alt:"...",className:"h-40 mx-auto"})}),jsxRuntimeExports.jsx("hr",{}),jsxRuntimeExports.jsxs("div",{className:"flex h-10",children:[jsxRuntimeExports.jsx("div",{className:`${rt==="info"?"font-bold border-b-teal-700":null} mr-1 ml-4 text-xl flex items-center border-2 border-white`,onClick:()=>ht(),children:"정보"}),jsxRuntimeExports.jsx("div",{className:`${rt==="comment"?"font-bold border-b-teal-700":"text-gray-600"} text-xl ml-1 flex items-center border-2 border-white`,onClick:()=>ft(),children:"댓글"})]})]}),jsxRuntimeExports.jsx("hr",{}),rt==="info"?jsxRuntimeExports.jsx(ChallengeDetailInfo,{}):jsxRuntimeExports.jsx(ChallengeDetailComment,{})]})},CalendarWeek=()=>{const[nt,rt]=Recoil_index_22(selectedDateState),[it,st]=reactExports.useState([]),lt=["일","월","화","수","목","금","토"],ct=Recoil_index_24(selectedDayState),ut=useNavigate();reactExports.useEffect(()=>{dt();const gt=new Date(nt[0],nt[1]-1,nt[2]);ct(lt[gt.getDay()])},[nt]);const dt=()=>{const gt=new Date(nt[0],nt[1]-1,nt[2]);gt.setDate(nt[2]-gt.getDay());const xt=[...Array(7)].map((yt,vt)=>{const St=new Date(gt);return St.setDate(gt.getDate()+vt),St});st(xt)},ht=()=>{rt(gt=>{const xt=new Date(gt[0],gt[1]-1,gt[2]);return xt.setDate(gt[2]-7),mt(xt),[xt.getFullYear(),xt.getMonth()+1,xt.getDate()]})},ft=()=>{rt(gt=>{const xt=new Date(gt[0],gt[1]-1,gt[2]);return xt.setDate(gt[2]+7),mt(xt),[xt.getFullYear(),xt.getMonth()+1,xt.getDate()]})},pt=()=>{const gt=new Date;mt(gt),rt([gt.getFullYear(),gt.getMonth()+1,gt.getDate()])},mt=gt=>{const xt=gt.getFullYear(),yt=gt.getMonth()+1,vt=gt.getDate();ut(window.location.href.includes("training")?`/diary/training/${xt}/${yt}/${vt}`:`/diary/food/${xt}/${yt}/${vt}`)};return jsxRuntimeExports.jsxs("div",{className:"max-w-screen-sm mx-auto mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-4",children:[jsxRuntimeExports.jsx(Link,{to:"/diary",children:jsxRuntimeExports.jsx(CalendarDaysIcon$3,{className:"w-6 h-6"})}),jsxRuntimeExports.jsxs("span",{className:"mx-auto font-bold text-gray-800",children:[nt[1],"월 ",nt[2],"일"]}),jsxRuntimeExports.jsx(ArrowPathIcon$1,{className:"w-6 h-6",onClick:pt})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center mx-4",children:[jsxRuntimeExports.jsx(ChevronLeftIcon$1,{className:"w-6 h-6 ",onClick:ht}),jsxRuntimeExports.jsxs("table",{className:"w-full mx-auto",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"py-2 text-center text-red-500",children:"일"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"월"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"화"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"수"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"목"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center",children:"금"}),jsxRuntimeExports.jsx("th",{className:"py-2 text-center text-blue-500",children:"토"})]})}),jsxRuntimeExports.jsx("tbody",{children:jsxRuntimeExports.jsx("tr",{children:it.map((gt,xt)=>jsxRuntimeExports.jsx("td",{onClick:()=>{mt(gt),rt([gt.getFullYear(),gt.getMonth()+1,gt.getDate()])},className:`
                    text-center 
                    ${gt.getMonth()!==nt[1]-1?"text-gray-300":""} 
                    `,children:jsxRuntimeExports.jsx("div",{className:`
                    flex justify-center items-center
                    w-8 h-8 mx-auto
                    ${gt.getDate()===nt[2]?"bg-teal-700 rounded-full text-white":""}
                  `,children:gt.getDate()})},xt))})})]}),jsxRuntimeExports.jsx(ChevronRightIcon$3,{className:"w-6 h-6",onClick:ft})]})]})},isRestState=Recoil_index_8({key:"isRestState",default:!1}),Rest=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),st=Recoil_index_24(isRestState),lt=()=>{(async()=>{await axios.delete(`${nt}api/management/training/rest?user_id=${rt.info.userId}&year=${it[0]}&month=${it[1]}&day=${it[2]}`).then(ut=>{console.log("휴식 해제 성공"),st(!1)}).catch(ut=>{console.log(ut)})})()};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2 pt-16",children:[jsxRuntimeExports.jsx("img",{src:"/diary/rest.jpg",alt:"img",className:"w-1/2 border rounded-full animate-bounce"}),jsxRuntimeExports.jsx("p",{children:"오늘은 운동 쉬는 날!"}),jsxRuntimeExports.jsx("p",{onClick:lt,className:"text-gray-500 underline ",children:"휴식 취소"})]})},Plan=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_24(isRestState),st=Recoil_index_20(selectedDateState),lt=Recoil_index_20(selectedDayState),ct=()=>{(async()=>{await axios.post(`${nt}api/management/training/rest?user_id=${rt.info.userId}&year=${st[0]}&month=${st[1]}&day=${st[2]}`).then(dt=>{console.log("휴식 등록 성공"),it(!0)}).catch(dt=>{console.log(dt)})})()};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 m-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-white border-white rounded-xl",children:[jsxRuntimeExports.jsx(Description,{Title:`${st[1]}월 ${st[2]}일 ${lt}`,subTitle:"운동을 직접 계획해보세요!"}),jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4 mt-4 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"p-1 text-center border border-teal-700 rounded-md basis-1/2",children:jsxRuntimeExports.jsx(Link,{to:"/diary/training/load/basic",children:jsxRuntimeExports.jsx(Button,{buttonName:"불러오기"})})}),jsxRuntimeExports.jsx("div",{className:"p-1 text-center text-white bg-teal-700 rounded-md basis-1/2",children:jsxRuntimeExports.jsx(Link,{to:"/diary/training/choice/basic",children:jsxRuntimeExports.jsx(Button,{buttonName:"운동 선택하기"})})})]})})]}),jsxRuntimeExports.jsx("div",{className:"relative p-4 bg-white border-white rounded-xl",children:jsxRuntimeExports.jsxs(Link,{to:"/diary/training/myroutine",children:[jsxRuntimeExports.jsx("div",{className:"absolute right-2",children:jsxRuntimeExports.jsx(NextButton,{})}),jsxRuntimeExports.jsx(Description,{Title:"나만의 루틴",subTitle:"루틴을 선택해주세요."})]})}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("p",{onClick:ct,className:"text-base text-gray-500 underline",children:"오늘은 쉴래요! 😥"})})]})},TrainingNoData=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),[st,lt]=Recoil_index_22(isRestState),ct=async()=>{await axios.get(`${nt}api/management/training/rest?user_id=${rt.info.userId}&year=${it[0]}&month=${it[1]}&day=${it[2]}`).then(ut=>{lt(ut.data)}).catch(ut=>{console.log(ut)})};return reactExports.useEffect(()=>{ct()},[it]),jsxRuntimeExports.jsx("div",{className:"pb-80",children:st?jsxRuntimeExports.jsx(Rest,{}):jsxRuntimeExports.jsx(Plan,{})})},TrainingSetBox=({set:nt,setIdx:rt})=>{const it=Recoil_index_20(baseUrlState),st=Recoil_index_20(selectedDateState),lt=Recoil_index_24(userTrainingState),ct=Recoil_index_20(userState),[ut,dt]=reactExports.useState(nt.kg),[ht,ft]=reactExports.useState(nt.count),[pt,mt]=reactExports.useState(nt.is_finished),[gt,xt]=reactExports.useState(!0),yt=It=>{dt(It.target.value)},vt=It=>{ft(It.target.value)},St=()=>{const It=new Date;return It.setHours(It.getHours()+9),It.toJSON()<new Date(st[0],st[1]-1,st[2],9).toJSON()},wt=async()=>{await axios.put(`${it}api/management/training/user_training/${nt.user_training_id}`).then(It=>{mt(!pt)}).catch(It=>{console.log(It)})},Et=async It=>{It.preventDefault(),await axios.put(`${it}api/management/training/set`,{user_training_id:nt.user_training_id,kg:ut,count:nt.count}).then(At=>{xt(!gt)}).catch(At=>{console.log(At)})},Rt=async It=>{It.preventDefault(),await axios.put(`${it}api/management/training/set`,{user_training_id:nt.user_training_id,kg:nt.kg,count:ht}).then(At=>{xt(!gt)}).catch(At=>{console.log(At)})},Tt=async()=>{await axios.get(`${it}api/management/training?user_id=${ct.info.userId}&year=${st[0]}&month=${st[1]}&day=${st[2]}`).then(It=>{lt(It.data.user_training_list)}).catch(It=>{console.log(It)})};return reactExports.useEffect(()=>{Tt()},[gt,pt]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("td",{children:rt+1}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("form",{onSubmit:Et,onBlur:Et,children:jsxRuntimeExports.jsx("input",{className:"w-16 mx-2 text-center border",value:ut,onChange:yt})})}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("form",{onSubmit:Rt,onBlur:Rt,children:jsxRuntimeExports.jsx("input",{className:"w-16 mx-2 text-center border",value:ht,onChange:vt})})}),jsxRuntimeExports.jsx("td",{className:"flex justify-center",children:jsxRuntimeExports.jsx("input",{type:"checkbox",className:"w-5 h-5 mt-1 accent-teal-600",onChange:()=>wt(),checked:pt,disabled:St()})})]})};TrainingSetBox.propTypes={set:PropTypes.object,setIdx:PropTypes.number};const TrainingDetailBox=({data:nt,idx:rt})=>{const it=Recoil_index_20(baseUrlState),st=Recoil_index_20(userState),lt=Recoil_index_20(selectedDateState),ct=Recoil_index_24(userTrainingState),[ut,dt]=reactExports.useState(!0),ht=()=>nt.sets.reduce((St,wt)=>St+wt.count*wt.kg,0),ft=new Date(lt[0],lt[1]-1,lt[2]),pt=9*60*60*1e3,mt=new Date(ft.getTime()+pt).toISOString().split("T")[0],gt=async()=>{await axios.delete(`${it}api/management/training`,{data:{user_id:st.info.userId,training_id:nt.training_id,date:mt}}).then(St=>{dt(!ut)}).catch(St=>{console.log(St)})},xt=async()=>{await axios.delete(`${it}api/management/training/set`,{data:{user_id:st.info.userId,training_id:nt.training_id,date:mt}}).then(St=>{dt(!ut)}).catch(St=>{console.log(St)})},yt=async()=>{await axios.post(`${it}api/management/training/set`,{user_id:st.info.userId,training_id:nt.training_id,date:mt}).then(St=>{dt(!ut)}).catch(St=>{console.log(St)})},vt=async()=>{await axios.get(`${it}api/management/training?user_id=${st.info.userId}&year=${lt[0]}&month=${lt[1]}&day=${lt[2]}`).then(St=>{ct(St.data.user_training_list)}).catch(St=>{console.log(St)})};return reactExports.useEffect(()=>{vt()},[ut]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-teal-700",children:rt+1})," ",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("span",{className:"ps-1 pe-2",children:nt.category}),"|",jsxRuntimeExports.jsx("span",{className:"px-2",children:nt.name})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center me-2",onClick:()=>gt(),children:jsxRuntimeExports.jsx(BsFillTrash3Fill,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("hr",{className:"my-2"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mx-2 my-1 text-sm font-semibold",children:[jsxRuntimeExports.jsx("p",{children:"총 볼륨 "}),jsxRuntimeExports.jsxs("p",{children:[ht(),"kg"]})]}),jsxRuntimeExports.jsx("hr",{className:"my-2"}),jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"text-gray-400 ",children:[jsxRuntimeExports.jsx("th",{children:"세트"}),jsxRuntimeExports.jsx("th",{children:"kg"}),jsxRuntimeExports.jsx("th",{children:"회"}),jsxRuntimeExports.jsx("th",{children:"완료"})]})}),jsxRuntimeExports.jsx("tbody",{children:nt.sets.map((St,wt)=>jsxRuntimeExports.jsx("tr",{className:"text-center",children:jsxRuntimeExports.jsx(TrainingSetBox,{set:St,setIdx:wt})},wt))})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 pt-4 pb-2 text-center divide-x-2",children:[jsxRuntimeExports.jsxs("button",{className:"flex justify-center gap-2",onClick:()=>xt(),children:[jsxRuntimeExports.jsx(MinusIcon$1,{className:"w-6 h-6"}),"세트 삭제"]}),jsxRuntimeExports.jsxs("button",{className:"flex justify-center gap-2 text-teal-700",onClick:()=>yt(),children:[jsxRuntimeExports.jsx(PlusIcon$1,{className:"w-6 h-6"}),"세트 추가"]})]})]})};TrainingDetailBox.propTypes={data:PropTypes.object,idx:PropTypes.number};const TrainingBottomBtn=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),[it,st]=Recoil_index_22(selectedDateState),lt=Recoil_index_20(userTrainingState),[ct,ut]=reactExports.useState(!1),[dt,ht]=reactExports.useState(0),[ft,pt]=reactExports.useState(0),[mt,gt]=reactExports.useState(0),[xt,yt]=reactExports.useState(!!localStorage.getItem(`date_${it.join("-")}_finish`)),vt=()=>{const It=new Date;return It.getFullYear()===it[0]&&It.getMonth()===it[1]-1&&It.getDate()===it[2]},St=()=>{const It=new Date;return It.setHours(It.getHours()+9),It.toJSON()<new Date(it[0],it[1]-1,it[2],9).toJSON()},wt=()=>{ut(It=>!It)},Et=()=>{const It=Math.floor(dt/6e4);localStorage.setItem(`date_${it.join("-")}`,It===0?50:It),localStorage.setItem(`date_${it.join("-")}_finish`,!0),st([it[0],it[1],it[2]]),ut(!ct),yt(!xt)},Rt=()=>{console.log("localstorage - finish 삭제"),localStorage.removeItem(`date_${it.join("-")}_finish`),st([it[0],it[1],it[2]]),yt(!1)},Tt=async()=>{await axios.post(`${nt}api/management/routine/addroutine`,{userId:rt.info.userId,title:`${it[0]}년 ${it[1]}월 ${it[2]}일`}).then(It=>{axios.get(`${nt}api/management/routine/${rt.info.userId}`).then(At=>{const Dt=At.data[At.data.length-1].routineId;axios.post(`${nt}api/management/routine/add?routine_id=${Dt}`,lt).then(jt=>{}).catch(jt=>{console.log(jt)})}).catch(At=>{console.log(At)})}).catch(It=>{console.log(It)})};return reactExports.useEffect(()=>{let It;return ct?It=setInterval(()=>{ht(At=>At+1e3)},1e3):clearInterval(It),()=>clearInterval(It)},[ct]),reactExports.useEffect(()=>{const It=Math.floor(dt/6e4),At=Math.floor(dt%6e4/1e3);pt(It),At<10?gt(At.toString().padStart(2,"0")):gt(At)},[dt]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!vt()&&!St()&&jsxRuntimeExports.jsxs("div",{className:"flex gap-4 m-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 text-center border border-teal-700 rounded-md basis-1/2",children:jsxRuntimeExports.jsx(Button,{onClick:Rt,buttonName:"운동 편집"})}),jsxRuntimeExports.jsx("div",{className:"p-2 text-center text-white bg-teal-700 rounded-md basis-1/2",children:jsxRuntimeExports.jsx(Button,{btnCss:"text-sm",buttonName:`${it[1]}월 ${it[2]}일의 운동 완료`,onClick:Et})})]}),vt()&&jsxRuntimeExports.jsxs("div",{className:"flex gap-4 m-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-2 text-center border border-teal-700 rounded-md basis-1/2",children:[xt===!1&&ct===!1&&jsxRuntimeExports.jsxs("div",{className:"flex justify-center text-sm divide-x-2",children:[jsxRuntimeExports.jsx(Link,{to:"/diary/training/choice/basic",children:jsxRuntimeExports.jsx(Button,{btnCss:"px-1",buttonName:"운동추가"})}),jsxRuntimeExports.jsx(Link,{to:"/diary/training/load/basic",children:jsxRuntimeExports.jsx(Button,{btnCss:"px-1",buttonName:"불러오기"})})]}),xt===!1&&ct===!0&&jsxRuntimeExports.jsx(Button,{buttonName:`${ft} : ${mt}`}),xt===!0&&jsxRuntimeExports.jsx(Button,{onClick:Rt,buttonName:"운동 편집"})]}),jsxRuntimeExports.jsxs("div",{className:"p-2 text-center text-white bg-teal-700 rounded-md basis-1/2",children:[xt===!1&&ct===!1&&jsxRuntimeExports.jsx(Button,{onClick:wt,buttonName:"운동 시작"}),xt===!1&&ct===!0&&jsxRuntimeExports.jsx(Button,{onClick:Et,buttonName:"운동 완료"}),xt===!0&&jsxRuntimeExports.jsx(Link,{to:"/diary/training/myroutine",children:jsxRuntimeExports.jsx(Button,{buttonName:"루틴 저장",onClick:Tt})})]})]}),St()&&jsxRuntimeExports.jsxs("div",{className:"flex gap-4 m-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 text-center border border-teal-700 rounded-md basis-1/2",children:jsxRuntimeExports.jsx(Link,{to:"/diary/training/choice/basic",children:jsxRuntimeExports.jsx(Button,{buttonName:"운동추가"})})}),jsxRuntimeExports.jsx("div",{className:"p-2 text-center text-white bg-teal-700 rounded-md basis-1/2",children:jsxRuntimeExports.jsx(Link,{to:"/diary/training/load/basic",children:jsxRuntimeExports.jsx(Button,{buttonName:"불러오기"})})})]})]})},TrainingData=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),st=Recoil_index_20(selectedDayState),lt=Recoil_index_20(userTrainingState),[ct,ut]=reactExports.useState(!!localStorage.getItem(`date_${it.join("-")}_finish`)),dt=()=>{const gt=new Date;return gt.getFullYear()===it[0]&&gt.getMonth()===it[1]-1&&gt.getDate()===it[2]},ht=()=>localStorage.getItem(`date_${it.join("-")}`),ft=()=>lt.length,pt=()=>lt.reduce((gt,xt)=>gt+xt.sets.reduce((yt,vt)=>yt+vt.count*vt.kg,0),0),mt=async()=>{await axios.post(`${nt}api/management/routine/addroutine`,{userId:rt.info.userId,title:`${it[0]}년 ${it[1]}월 ${it[2]}일`}).then(gt=>{axios.get(`${nt}api/management/routine/${rt.info.userId}`).then(xt=>{const yt=xt.data[xt.data.length-1].routineId;axios.post(`${nt}api/management/routine/add?routine_id=${yt}`,lt).then(vt=>{}).catch(vt=>{console.log(vt)})}).catch(xt=>{console.log(xt)})}).catch(gt=>{console.log(gt)})};return reactExports.useEffect(()=>{ut(!!localStorage.getItem(`date_${it.join("-")}_finish`))},[it]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ct&&jsxRuntimeExports.jsxs("div",{className:`flex flex-col gap-2 pt-2 mx-4 mb-32 ${lt.length===1?"pb-32":""}`,children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold",children:[it[1],"월 ",it[2],"일 ",st," - 운동"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 py-4 bg-white border-white divide-x-4 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute w-[88px] h-[88px] bg-[#E9E1D4]/30 rounded-full top-[-10px]"}),jsxRuntimeExports.jsx(BsAlarm,{className:"z-10 w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:`${ht()?ht():50}분`,subTitle:"운동 시간"})]}),jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute w-[88px] h-[88px] bg-[#F5DDAD]/30 rounded-full top-[-10px]"}),jsxRuntimeExports.jsx(FaDumbbell,{className:"z-10 w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:`${ft()}개`,subTitle:"운동 개수"})]}),jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute w-[88px] h-[88px] bg-[#F1BCAE]/30 rounded-full top-[-10px]"}),jsxRuntimeExports.jsx(GiMuscleUp,{className:"z-10 w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:`${pt()}kg`,subTitle:"전체 볼륨"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[lt.map((gt,xt)=>jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 bg-white rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between",children:jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-teal-700",children:xt+1})," ",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("span",{className:"ps-1 pe-2",children:gt.category}),"|",jsxRuntimeExports.jsx("span",{className:"px-2",children:gt.name})]})]})}),jsxRuntimeExports.jsx("hr",{className:"my-2"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mx-2 my-1 text-sm font-semibold",children:[jsxRuntimeExports.jsx("p",{children:"총 볼륨 "}),jsxRuntimeExports.jsxs("p",{children:[gt.sets.reduce((yt,vt)=>yt+vt.count*vt.kg,0),"kg"]})]}),jsxRuntimeExports.jsx("hr",{className:"my-2"}),jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"text-gray-400",children:[jsxRuntimeExports.jsx("th",{children:"세트"}),jsxRuntimeExports.jsx("th",{children:"kg"}),jsxRuntimeExports.jsx("th",{children:"회"}),jsxRuntimeExports.jsx("th",{children:"완료"})]})}),jsxRuntimeExports.jsx("tbody",{children:gt.sets.map((yt,vt)=>jsxRuntimeExports.jsxs("tr",{className:"text-center",children:[jsxRuntimeExports.jsx("td",{children:vt+1}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("p",{className:"w-16 mx-auto font-semibold",children:yt.kg})}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("p",{className:"w-16 mx-auto font-semibold",children:yt.count})}),jsxRuntimeExports.jsx("td",{className:"flex justify-center",children:jsxRuntimeExports.jsx("input",{type:"checkbox",className:"w-5 h-5 mt-1 accent-teal-600",checked:yt.is_finished,onChange:()=>{}})})]},vt))})]})]},xt)),jsxRuntimeExports.jsx(Link,{to:"/diary/training/myroutine",children:jsxRuntimeExports.jsx("div",{className:"pt-2 text-center text-gray-500 underline underline-offset-4",onClick:mt,children:"루틴 저장"})})]}),jsxRuntimeExports.jsx("div",{className:"mb-4"})]}),!ct&&jsxRuntimeExports.jsxs("div",{className:`flex flex-col gap-2 pt-2 mx-4 mb-32 ${lt.length===1?"pb-28":""}`,children:[jsxRuntimeExports.jsxs("div",{className:`flex justify-between ${dt()?"":"opacity-0"}`,onClick:()=>console.log("갤럭시 와치 데이터 연동"),children:[jsxRuntimeExports.jsx("p",{className:"font-semibold",children:"✅Galaxy Watch"}),jsxRuntimeExports.jsx(Button,{btnCss:"w-1/5 text-white bg-teal-700 rounded",buttonName:"전송"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between px-4 py-2 bg-white rounded-lg",children:[jsxRuntimeExports.jsx("p",{children:"전체 볼륨"}),jsxRuntimeExports.jsx("p",{children:pt()+" kg"})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:lt.map((gt,xt)=>jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-white rounded-lg",children:jsxRuntimeExports.jsx(TrainingDetailBox,{data:gt,idx:xt})},xt))}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 pt-2 mb-4 text-center divide-x-4",children:[jsxRuntimeExports.jsx(Link,{to:"/diary/training/choice/basic",children:"운동추가"}),jsxRuntimeExports.jsx(Link,{to:"/diary/training/load/basic",children:"불러오기"})]})]}),jsxRuntimeExports.jsx("div",{className:"fixed w-full bg-white bottom-[57px] border-t",children:jsxRuntimeExports.jsx(TrainingBottomBtn,{})})]})},DiaryTrainingPage$1=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),st=Recoil_index_20(toggleDiaryState),[lt,ct]=Recoil_index_22(userTrainingState),ut=async()=>{await axios.get(`${nt}api/management/training?user_id=${rt.info.userId}&year=${it[0]}&month=${it[1]}&day=${it[2]}`).then(dt=>{ct(dt.data.user_training_list)}).catch(dt=>{console.log(dt)})};return reactExports.useEffect(()=>{ut()},[it]),jsxRuntimeExports.jsxs("div",{className:"bg-[#C9DECF]/30",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 z-20 bg-white",children:[jsxRuntimeExports.jsx(PageTitle,{pageTitle:"다이어리"}),jsxRuntimeExports.jsx(ToggleTap,{leftTitle:"캘린더",rightTitle:"그래프",state:toggleDiaryState}),st==="left"?jsxRuntimeExports.jsx(CalendarWeek,{}):jsxRuntimeExports.jsx(Graph,{}),jsxRuntimeExports.jsx("hr",{className:`mt-4 ${st==="right"?"hidden":""}`})]}),jsxRuntimeExports.jsx("div",{className:`${st==="right"?"hidden":""}`,children:lt.length?jsxRuntimeExports.jsx(TrainingData,{}):jsxRuntimeExports.jsx(TrainingNoData,{})})]})},FoodByCategory=({category:nt,data:rt})=>jsxRuntimeExports.jsx(Link,{to:`/diary/food/${nt.substring(3)}`,children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between p-4 bg-white border-white rounded-xl",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Description,{Title:nt,subTitle:`${rt.reduce((it,st)=>it+st.food.calorie*(st.servingSize/st.food.servingSize)*st.foodCount,0).toFixed(1)}kcal / ${rt.reduce((it,st)=>it+st.food.carbohydrate*(st.servingSize/st.food.servingSize)*st.foodCount,0).toFixed(1)}g / ${rt.reduce((it,st)=>it+st.food.protein*(st.servingSize/st.food.servingSize)*st.foodCount,0).toFixed(1)}g / ${rt.reduce((it,st)=>it+st.food.lipid*(st.servingSize/st.food.servingSize)*st.foodCount,0).toFixed(1)}g`})}),jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsx(NextButton,{})})]})});FoodByCategory.propTypes={category:PropTypes.string,data:PropTypes.array};const FoodData=()=>{const nt=Recoil_index_20(selectedDateState),rt=Recoil_index_20(selectedDayState),it=Recoil_index_20(userFoodState),st=it.reduce((mt,gt)=>mt+gt.food.calorie*(gt.servingSize/gt.food.servingSize)*gt.foodCount,0).toFixed(1),lt=it.reduce((mt,gt)=>mt+gt.food.carbohydrate*(gt.servingSize/gt.food.servingSize)*gt.foodCount,0).toFixed(1),ct=it.reduce((mt,gt)=>mt+gt.food.protein*(gt.servingSize/gt.food.servingSize)*gt.foodCount,0).toFixed(1),ut=it.reduce((mt,gt)=>mt+gt.food.lipid*(gt.servingSize/gt.food.servingSize)*gt.foodCount,0).toFixed(1),dt=it.filter(mt=>mt.category==="아침"),ht=it.filter(mt=>mt.category==="점심"),ft=it.filter(mt=>mt.category==="저녁"),pt=it.filter(mt=>mt.category==="기타");return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 pt-2 mx-4 mb-16",children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold",children:[nt[1],"월 ",nt[2],"일 ",rt," - 식단"]}),jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-white border-white rounded-xl",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 font-semibold divide-x-4",children:[jsxRuntimeExports.jsx("p",{className:"text-center",children:"총 칼로리"}),jsxRuntimeExports.jsxs("p",{className:"text-center",children:[st," kcal"]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 py-4 bg-white border-white divide-x-4 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute w-[88px] h-[88px] bg-[#E9E1D4]/30 rounded-full top-[-10px]"}),jsxRuntimeExports.jsx(BiSolidBowlRice,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:lt+"g",subTitle:"탄수화물"})]}),jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute w-[88px] h-[88px] bg-[#F5DDAD]/30 rounded-full top-[-10px]"}),jsxRuntimeExports.jsx(GiMeat,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:ct+"g",subTitle:"단백질"})]}),jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute w-[88px] h-[88px] bg-[#F1BCAE]/30 rounded-full top-[-10px]"}),jsxRuntimeExports.jsx(BiSolidCheese,{className:"w-6 h-6"}),jsxRuntimeExports.jsx(Description,{Title:ut+"g",subTitle:"지방"})]})]}),jsxRuntimeExports.jsx(FoodByCategory,{category:"🍎 아침 식사",data:dt}),jsxRuntimeExports.jsx(FoodByCategory,{category:"☀️ 점심 식사",data:ht}),jsxRuntimeExports.jsx(FoodByCategory,{category:"🌙 저녁 식사",data:ft}),jsxRuntimeExports.jsx(FoodByCategory,{category:"🍪 기타 식사",data:pt})]})},DiaryTrainingPage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),st=Recoil_index_20(toggleDiaryState),lt=Recoil_index_24(userFoodState),ct=async()=>{await axios.get(`${nt}api/management/food/list/${rt.info.userId}?year=${it[0]}&month=${it[1]}&day=${it[2]}`).then(ut=>{lt(ut.data)}).catch(ut=>{console.log(ut)})};return reactExports.useEffect(()=>{ct()},[it]),jsxRuntimeExports.jsxs("div",{className:"bg-[#C9DECF]/30 pb-2",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsx(PageTitle,{pageTitle:"다이어리"}),jsxRuntimeExports.jsx(ToggleTap,{leftTitle:"캘린더",rightTitle:"그래프",state:toggleDiaryState}),st==="left"?jsxRuntimeExports.jsx(CalendarWeek,{}):jsxRuntimeExports.jsx(Graph,{}),jsxRuntimeExports.jsx("hr",{className:`mt-4 ${st==="right"?"hidden":""}`})]}),jsxRuntimeExports.jsx("div",{className:`${st==="right"?"hidden":""}`,children:jsxRuntimeExports.jsx(FoodData,{})})]})};function _extends(){return _extends=Object.assign?Object.assign.bind():function(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt];for(var st in it)Object.prototype.hasOwnProperty.call(it,st)&&(nt[st]=it[st])}return nt},_extends.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="161",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,AttachedBindMode="attached",DetachedBindMode="detached",UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",DisplayP3ColorSpace="display-p3",LinearDisplayP3ColorSpace="display-p3-linear",LinearTransfer="linear",SRGBTransfer="srgb",Rec709Primaries="rec709",P3Primaries="p3",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",_SRGBAFormat=1035,WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001;class EventDispatcher{addEventListener(rt,it){this._listeners===void 0&&(this._listeners={});const st=this._listeners;st[rt]===void 0&&(st[rt]=[]),st[rt].indexOf(it)===-1&&st[rt].push(it)}hasEventListener(rt,it){if(this._listeners===void 0)return!1;const st=this._listeners;return st[rt]!==void 0&&st[rt].indexOf(it)!==-1}removeEventListener(rt,it){if(this._listeners===void 0)return;const lt=this._listeners[rt];if(lt!==void 0){const ct=lt.indexOf(it);ct!==-1&&lt.splice(ct,1)}}dispatchEvent(rt){if(this._listeners===void 0)return;const st=this._listeners[rt.type];if(st!==void 0){rt.target=this;const lt=st.slice(0);for(let ct=0,ut=lt.length;ct<ut;ct++)lt[ct].call(this,rt);rt.target=null}}}const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const nt=Math.random()*4294967295|0,rt=Math.random()*4294967295|0,it=Math.random()*4294967295|0,st=Math.random()*4294967295|0;return(_lut[nt&255]+_lut[nt>>8&255]+_lut[nt>>16&255]+_lut[nt>>24&255]+"-"+_lut[rt&255]+_lut[rt>>8&255]+"-"+_lut[rt>>16&15|64]+_lut[rt>>24&255]+"-"+_lut[it&63|128]+_lut[it>>8&255]+"-"+_lut[it>>16&255]+_lut[it>>24&255]+_lut[st&255]+_lut[st>>8&255]+_lut[st>>16&255]+_lut[st>>24&255]).toLowerCase()}function clamp(nt,rt,it){return Math.max(rt,Math.min(it,nt))}function euclideanModulo(nt,rt){return(nt%rt+rt)%rt}function mapLinear(nt,rt,it,st,lt){return st+(nt-rt)*(lt-st)/(it-rt)}function inverseLerp(nt,rt,it){return nt!==rt?(it-nt)/(rt-nt):0}function lerp(nt,rt,it){return(1-it)*nt+it*rt}function damp(nt,rt,it,st){return lerp(nt,rt,1-Math.exp(-it*st))}function pingpong(nt,rt=1){return rt-Math.abs(euclideanModulo(nt,rt*2)-rt)}function smoothstep(nt,rt,it){return nt<=rt?0:nt>=it?1:(nt=(nt-rt)/(it-rt),nt*nt*(3-2*nt))}function smootherstep(nt,rt,it){return nt<=rt?0:nt>=it?1:(nt=(nt-rt)/(it-rt),nt*nt*nt*(nt*(nt*6-15)+10))}function randInt(nt,rt){return nt+Math.floor(Math.random()*(rt-nt+1))}function randFloat(nt,rt){return nt+Math.random()*(rt-nt)}function randFloatSpread(nt){return nt*(.5-Math.random())}function seededRandom(nt){nt!==void 0&&(_seed=nt);let rt=_seed+=1831565813;return rt=Math.imul(rt^rt>>>15,rt|1),rt^=rt+Math.imul(rt^rt>>>7,rt|61),((rt^rt>>>14)>>>0)/4294967296}function degToRad(nt){return nt*DEG2RAD}function radToDeg(nt){return nt*RAD2DEG}function isPowerOfTwo(nt){return(nt&nt-1)===0&&nt!==0}function ceilPowerOfTwo(nt){return Math.pow(2,Math.ceil(Math.log(nt)/Math.LN2))}function floorPowerOfTwo(nt){return Math.pow(2,Math.floor(Math.log(nt)/Math.LN2))}function setQuaternionFromProperEuler(nt,rt,it,st,lt){const ct=Math.cos,ut=Math.sin,dt=ct(it/2),ht=ut(it/2),ft=ct((rt+st)/2),pt=ut((rt+st)/2),mt=ct((rt-st)/2),gt=ut((rt-st)/2),xt=ct((st-rt)/2),yt=ut((st-rt)/2);switch(lt){case"XYX":nt.set(dt*pt,ht*mt,ht*gt,dt*ft);break;case"YZY":nt.set(ht*gt,dt*pt,ht*mt,dt*ft);break;case"ZXZ":nt.set(ht*mt,ht*gt,dt*pt,dt*ft);break;case"XZX":nt.set(dt*pt,ht*yt,ht*xt,dt*ft);break;case"YXY":nt.set(ht*xt,dt*pt,ht*yt,dt*ft);break;case"ZYZ":nt.set(ht*yt,ht*xt,dt*pt,dt*ft);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+lt)}}function denormalize(nt,rt){switch(rt.constructor){case Float32Array:return nt;case Uint32Array:return nt/4294967295;case Uint16Array:return nt/65535;case Uint8Array:return nt/255;case Int32Array:return Math.max(nt/2147483647,-1);case Int16Array:return Math.max(nt/32767,-1);case Int8Array:return Math.max(nt/127,-1);default:throw new Error("Invalid component type.")}}function normalize(nt,rt){switch(rt.constructor){case Float32Array:return nt;case Uint32Array:return Math.round(nt*4294967295);case Uint16Array:return Math.round(nt*65535);case Uint8Array:return Math.round(nt*255);case Int32Array:return Math.round(nt*2147483647);case Int16Array:return Math.round(nt*32767);case Int8Array:return Math.round(nt*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID,clamp,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor(rt=0,it=0){Vector2.prototype.isVector2=!0,this.x=rt,this.y=it}get width(){return this.x}set width(rt){this.x=rt}get height(){return this.y}set height(rt){this.y=rt}set(rt,it){return this.x=rt,this.y=it,this}setScalar(rt){return this.x=rt,this.y=rt,this}setX(rt){return this.x=rt,this}setY(rt){return this.y=rt,this}setComponent(rt,it){switch(rt){case 0:this.x=it;break;case 1:this.y=it;break;default:throw new Error("index is out of range: "+rt)}return this}getComponent(rt){switch(rt){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+rt)}}clone(){return new this.constructor(this.x,this.y)}copy(rt){return this.x=rt.x,this.y=rt.y,this}add(rt){return this.x+=rt.x,this.y+=rt.y,this}addScalar(rt){return this.x+=rt,this.y+=rt,this}addVectors(rt,it){return this.x=rt.x+it.x,this.y=rt.y+it.y,this}addScaledVector(rt,it){return this.x+=rt.x*it,this.y+=rt.y*it,this}sub(rt){return this.x-=rt.x,this.y-=rt.y,this}subScalar(rt){return this.x-=rt,this.y-=rt,this}subVectors(rt,it){return this.x=rt.x-it.x,this.y=rt.y-it.y,this}multiply(rt){return this.x*=rt.x,this.y*=rt.y,this}multiplyScalar(rt){return this.x*=rt,this.y*=rt,this}divide(rt){return this.x/=rt.x,this.y/=rt.y,this}divideScalar(rt){return this.multiplyScalar(1/rt)}applyMatrix3(rt){const it=this.x,st=this.y,lt=rt.elements;return this.x=lt[0]*it+lt[3]*st+lt[6],this.y=lt[1]*it+lt[4]*st+lt[7],this}min(rt){return this.x=Math.min(this.x,rt.x),this.y=Math.min(this.y,rt.y),this}max(rt){return this.x=Math.max(this.x,rt.x),this.y=Math.max(this.y,rt.y),this}clamp(rt,it){return this.x=Math.max(rt.x,Math.min(it.x,this.x)),this.y=Math.max(rt.y,Math.min(it.y,this.y)),this}clampScalar(rt,it){return this.x=Math.max(rt,Math.min(it,this.x)),this.y=Math.max(rt,Math.min(it,this.y)),this}clampLength(rt,it){const st=this.length();return this.divideScalar(st||1).multiplyScalar(Math.max(rt,Math.min(it,st)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(rt){return this.x*rt.x+this.y*rt.y}cross(rt){return this.x*rt.y-this.y*rt.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(rt){const it=Math.sqrt(this.lengthSq()*rt.lengthSq());if(it===0)return Math.PI/2;const st=this.dot(rt)/it;return Math.acos(clamp(st,-1,1))}distanceTo(rt){return Math.sqrt(this.distanceToSquared(rt))}distanceToSquared(rt){const it=this.x-rt.x,st=this.y-rt.y;return it*it+st*st}manhattanDistanceTo(rt){return Math.abs(this.x-rt.x)+Math.abs(this.y-rt.y)}setLength(rt){return this.normalize().multiplyScalar(rt)}lerp(rt,it){return this.x+=(rt.x-this.x)*it,this.y+=(rt.y-this.y)*it,this}lerpVectors(rt,it,st){return this.x=rt.x+(it.x-rt.x)*st,this.y=rt.y+(it.y-rt.y)*st,this}equals(rt){return rt.x===this.x&&rt.y===this.y}fromArray(rt,it=0){return this.x=rt[it],this.y=rt[it+1],this}toArray(rt=[],it=0){return rt[it]=this.x,rt[it+1]=this.y,rt}fromBufferAttribute(rt,it){return this.x=rt.getX(it),this.y=rt.getY(it),this}rotateAround(rt,it){const st=Math.cos(it),lt=Math.sin(it),ct=this.x-rt.x,ut=this.y-rt.y;return this.x=ct*st-ut*lt+rt.x,this.y=ct*lt+ut*st+rt.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(rt,it,st,lt,ct,ut,dt,ht,ft){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],rt!==void 0&&this.set(rt,it,st,lt,ct,ut,dt,ht,ft)}set(rt,it,st,lt,ct,ut,dt,ht,ft){const pt=this.elements;return pt[0]=rt,pt[1]=lt,pt[2]=dt,pt[3]=it,pt[4]=ct,pt[5]=ht,pt[6]=st,pt[7]=ut,pt[8]=ft,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(rt){const it=this.elements,st=rt.elements;return it[0]=st[0],it[1]=st[1],it[2]=st[2],it[3]=st[3],it[4]=st[4],it[5]=st[5],it[6]=st[6],it[7]=st[7],it[8]=st[8],this}extractBasis(rt,it,st){return rt.setFromMatrix3Column(this,0),it.setFromMatrix3Column(this,1),st.setFromMatrix3Column(this,2),this}setFromMatrix4(rt){const it=rt.elements;return this.set(it[0],it[4],it[8],it[1],it[5],it[9],it[2],it[6],it[10]),this}multiply(rt){return this.multiplyMatrices(this,rt)}premultiply(rt){return this.multiplyMatrices(rt,this)}multiplyMatrices(rt,it){const st=rt.elements,lt=it.elements,ct=this.elements,ut=st[0],dt=st[3],ht=st[6],ft=st[1],pt=st[4],mt=st[7],gt=st[2],xt=st[5],yt=st[8],vt=lt[0],St=lt[3],wt=lt[6],Et=lt[1],Rt=lt[4],Tt=lt[7],It=lt[2],At=lt[5],Dt=lt[8];return ct[0]=ut*vt+dt*Et+ht*It,ct[3]=ut*St+dt*Rt+ht*At,ct[6]=ut*wt+dt*Tt+ht*Dt,ct[1]=ft*vt+pt*Et+mt*It,ct[4]=ft*St+pt*Rt+mt*At,ct[7]=ft*wt+pt*Tt+mt*Dt,ct[2]=gt*vt+xt*Et+yt*It,ct[5]=gt*St+xt*Rt+yt*At,ct[8]=gt*wt+xt*Tt+yt*Dt,this}multiplyScalar(rt){const it=this.elements;return it[0]*=rt,it[3]*=rt,it[6]*=rt,it[1]*=rt,it[4]*=rt,it[7]*=rt,it[2]*=rt,it[5]*=rt,it[8]*=rt,this}determinant(){const rt=this.elements,it=rt[0],st=rt[1],lt=rt[2],ct=rt[3],ut=rt[4],dt=rt[5],ht=rt[6],ft=rt[7],pt=rt[8];return it*ut*pt-it*dt*ft-st*ct*pt+st*dt*ht+lt*ct*ft-lt*ut*ht}invert(){const rt=this.elements,it=rt[0],st=rt[1],lt=rt[2],ct=rt[3],ut=rt[4],dt=rt[5],ht=rt[6],ft=rt[7],pt=rt[8],mt=pt*ut-dt*ft,gt=dt*ht-pt*ct,xt=ft*ct-ut*ht,yt=it*mt+st*gt+lt*xt;if(yt===0)return this.set(0,0,0,0,0,0,0,0,0);const vt=1/yt;return rt[0]=mt*vt,rt[1]=(lt*ft-pt*st)*vt,rt[2]=(dt*st-lt*ut)*vt,rt[3]=gt*vt,rt[4]=(pt*it-lt*ht)*vt,rt[5]=(lt*ct-dt*it)*vt,rt[6]=xt*vt,rt[7]=(st*ht-ft*it)*vt,rt[8]=(ut*it-st*ct)*vt,this}transpose(){let rt;const it=this.elements;return rt=it[1],it[1]=it[3],it[3]=rt,rt=it[2],it[2]=it[6],it[6]=rt,rt=it[5],it[5]=it[7],it[7]=rt,this}getNormalMatrix(rt){return this.setFromMatrix4(rt).invert().transpose()}transposeIntoArray(rt){const it=this.elements;return rt[0]=it[0],rt[1]=it[3],rt[2]=it[6],rt[3]=it[1],rt[4]=it[4],rt[5]=it[7],rt[6]=it[2],rt[7]=it[5],rt[8]=it[8],this}setUvTransform(rt,it,st,lt,ct,ut,dt){const ht=Math.cos(ct),ft=Math.sin(ct);return this.set(st*ht,st*ft,-st*(ht*ut+ft*dt)+ut+rt,-lt*ft,lt*ht,-lt*(-ft*ut+ht*dt)+dt+it,0,0,1),this}scale(rt,it){return this.premultiply(_m3.makeScale(rt,it)),this}rotate(rt){return this.premultiply(_m3.makeRotation(-rt)),this}translate(rt,it){return this.premultiply(_m3.makeTranslation(rt,it)),this}makeTranslation(rt,it){return rt.isVector2?this.set(1,0,rt.x,0,1,rt.y,0,0,1):this.set(1,0,rt,0,1,it,0,0,1),this}makeRotation(rt){const it=Math.cos(rt),st=Math.sin(rt);return this.set(it,-st,0,st,it,0,0,0,1),this}makeScale(rt,it){return this.set(rt,0,0,0,it,0,0,0,1),this}equals(rt){const it=this.elements,st=rt.elements;for(let lt=0;lt<9;lt++)if(it[lt]!==st[lt])return!1;return!0}fromArray(rt,it=0){for(let st=0;st<9;st++)this.elements[st]=rt[st+it];return this}toArray(rt=[],it=0){const st=this.elements;return rt[it]=st[0],rt[it+1]=st[1],rt[it+2]=st[2],rt[it+3]=st[3],rt[it+4]=st[4],rt[it+5]=st[5],rt[it+6]=st[6],rt[it+7]=st[7],rt[it+8]=st[8],rt}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(nt){for(let rt=nt.length-1;rt>=0;--rt)if(nt[rt]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(nt,rt){return new TYPED_ARRAYS[nt](rt)}function createElementNS(nt){return document.createElementNS("http://www.w3.org/1999/xhtml",nt)}function createCanvasElement(){const nt=createElementNS("canvas");return nt.style.display="block",nt}const _cache={};function warnOnce(nt){nt in _cache||(_cache[nt]=!0,console.warn(nt))}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=new Matrix3().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=new Matrix3().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),COLOR_SPACES={[LinearSRGBColorSpace]:{transfer:LinearTransfer,primaries:Rec709Primaries,toReference:nt=>nt,fromReference:nt=>nt},[SRGBColorSpace]:{transfer:SRGBTransfer,primaries:Rec709Primaries,toReference:nt=>nt.convertSRGBToLinear(),fromReference:nt=>nt.convertLinearToSRGB()},[LinearDisplayP3ColorSpace]:{transfer:LinearTransfer,primaries:P3Primaries,toReference:nt=>nt.applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:nt=>nt.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3)},[DisplayP3ColorSpace]:{transfer:SRGBTransfer,primaries:P3Primaries,toReference:nt=>nt.convertSRGBToLinear().applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:nt=>nt.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3).convertLinearToSRGB()}},SUPPORTED_WORKING_COLOR_SPACES=new Set([LinearSRGBColorSpace,LinearDisplayP3ColorSpace]),ColorManagement={enabled:!0,_workingColorSpace:LinearSRGBColorSpace,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(nt){if(!SUPPORTED_WORKING_COLOR_SPACES.has(nt))throw new Error(`Unsupported working color space, "${nt}".`);this._workingColorSpace=nt},convert:function(nt,rt,it){if(this.enabled===!1||rt===it||!rt||!it)return nt;const st=COLOR_SPACES[rt].toReference,lt=COLOR_SPACES[it].fromReference;return lt(st(nt))},fromWorkingColorSpace:function(nt,rt){return this.convert(nt,this._workingColorSpace,rt)},toWorkingColorSpace:function(nt,rt){return this.convert(nt,rt,this._workingColorSpace)},getPrimaries:function(nt){return COLOR_SPACES[nt].primaries},getTransfer:function(nt){return nt===NoColorSpace?LinearTransfer:COLOR_SPACES[nt].transfer}};function SRGBToLinear(nt){return nt<.04045?nt*.0773993808:Math.pow(nt*.9478672986+.0521327014,2.4)}function LinearToSRGB(nt){return nt<.0031308?nt*12.92:1.055*Math.pow(nt,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(rt){if(/^data:/i.test(rt.src)||typeof HTMLCanvasElement>"u")return rt.src;let it;if(rt instanceof HTMLCanvasElement)it=rt;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=rt.width,_canvas.height=rt.height;const st=_canvas.getContext("2d");rt instanceof ImageData?st.putImageData(rt,0,0):st.drawImage(rt,0,0,rt.width,rt.height),it=_canvas}return it.width>2048||it.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",rt),it.toDataURL("image/jpeg",.6)):it.toDataURL("image/png")}static sRGBToLinear(rt){if(typeof HTMLImageElement<"u"&&rt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&rt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&rt instanceof ImageBitmap){const it=createElementNS("canvas");it.width=rt.width,it.height=rt.height;const st=it.getContext("2d");st.drawImage(rt,0,0,rt.width,rt.height);const lt=st.getImageData(0,0,rt.width,rt.height),ct=lt.data;for(let ut=0;ut<ct.length;ut++)ct[ut]=SRGBToLinear(ct[ut]/255)*255;return st.putImageData(lt,0,0),it}else if(rt.data){const it=rt.data.slice(0);for(let st=0;st<it.length;st++)it instanceof Uint8Array||it instanceof Uint8ClampedArray?it[st]=Math.floor(SRGBToLinear(it[st]/255)*255):it[st]=SRGBToLinear(it[st]);return{data:it,width:rt.width,height:rt.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),rt}}let _sourceId=0;class Source{constructor(rt=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID(),this.data=rt,this.dataReady=!0,this.version=0}set needsUpdate(rt){rt===!0&&this.version++}toJSON(rt){const it=rt===void 0||typeof rt=="string";if(!it&&rt.images[this.uuid]!==void 0)return rt.images[this.uuid];const st={uuid:this.uuid,url:""},lt=this.data;if(lt!==null){let ct;if(Array.isArray(lt)){ct=[];for(let ut=0,dt=lt.length;ut<dt;ut++)lt[ut].isDataTexture?ct.push(serializeImage(lt[ut].image)):ct.push(serializeImage(lt[ut]))}else ct=serializeImage(lt);st.url=ct}return it||(rt.images[this.uuid]=st),st}}function serializeImage(nt){return typeof HTMLImageElement<"u"&&nt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&nt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&nt instanceof ImageBitmap?ImageUtils.getDataURL(nt):nt.data?{data:Array.from(nt.data),width:nt.width,height:nt.height,type:nt.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId=0;class Texture extends EventDispatcher{constructor(rt=Texture.DEFAULT_IMAGE,it=Texture.DEFAULT_MAPPING,st=ClampToEdgeWrapping,lt=ClampToEdgeWrapping,ct=LinearFilter,ut=LinearMipmapLinearFilter,dt=RGBAFormat,ht=UnsignedByteType,ft=Texture.DEFAULT_ANISOTROPY,pt=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(rt),this.mipmaps=[],this.mapping=it,this.channel=0,this.wrapS=st,this.wrapT=lt,this.magFilter=ct,this.minFilter=ut,this.anisotropy=ft,this.format=dt,this.internalFormat=null,this.type=ht,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof pt=="string"?this.colorSpace=pt:(warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=pt===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(rt=null){this.source.data=rt}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(rt){return this.name=rt.name,this.source=rt.source,this.mipmaps=rt.mipmaps.slice(0),this.mapping=rt.mapping,this.channel=rt.channel,this.wrapS=rt.wrapS,this.wrapT=rt.wrapT,this.magFilter=rt.magFilter,this.minFilter=rt.minFilter,this.anisotropy=rt.anisotropy,this.format=rt.format,this.internalFormat=rt.internalFormat,this.type=rt.type,this.offset.copy(rt.offset),this.repeat.copy(rt.repeat),this.center.copy(rt.center),this.rotation=rt.rotation,this.matrixAutoUpdate=rt.matrixAutoUpdate,this.matrix.copy(rt.matrix),this.generateMipmaps=rt.generateMipmaps,this.premultiplyAlpha=rt.premultiplyAlpha,this.flipY=rt.flipY,this.unpackAlignment=rt.unpackAlignment,this.colorSpace=rt.colorSpace,this.userData=JSON.parse(JSON.stringify(rt.userData)),this.needsUpdate=!0,this}toJSON(rt){const it=rt===void 0||typeof rt=="string";if(!it&&rt.textures[this.uuid]!==void 0)return rt.textures[this.uuid];const st={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(rt).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(st.userData=this.userData),it||(rt.textures[this.uuid]=st),st}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(rt){if(this.mapping!==UVMapping)return rt;if(rt.applyMatrix3(this.matrix),rt.x<0||rt.x>1)switch(this.wrapS){case RepeatWrapping:rt.x=rt.x-Math.floor(rt.x);break;case ClampToEdgeWrapping:rt.x=rt.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(rt.x)%2)===1?rt.x=Math.ceil(rt.x)-rt.x:rt.x=rt.x-Math.floor(rt.x);break}if(rt.y<0||rt.y>1)switch(this.wrapT){case RepeatWrapping:rt.y=rt.y-Math.floor(rt.y);break;case ClampToEdgeWrapping:rt.y=rt.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(rt.y)%2)===1?rt.y=Math.ceil(rt.y)-rt.y:rt.y=rt.y-Math.floor(rt.y);break}return this.flipY&&(rt.y=1-rt.y),rt}set needsUpdate(rt){rt===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===SRGBColorSpace?sRGBEncoding:LinearEncoding}set encoding(rt){warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=rt===sRGBEncoding?SRGBColorSpace:NoColorSpace}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(rt=0,it=0,st=0,lt=1){Vector4.prototype.isVector4=!0,this.x=rt,this.y=it,this.z=st,this.w=lt}get width(){return this.z}set width(rt){this.z=rt}get height(){return this.w}set height(rt){this.w=rt}set(rt,it,st,lt){return this.x=rt,this.y=it,this.z=st,this.w=lt,this}setScalar(rt){return this.x=rt,this.y=rt,this.z=rt,this.w=rt,this}setX(rt){return this.x=rt,this}setY(rt){return this.y=rt,this}setZ(rt){return this.z=rt,this}setW(rt){return this.w=rt,this}setComponent(rt,it){switch(rt){case 0:this.x=it;break;case 1:this.y=it;break;case 2:this.z=it;break;case 3:this.w=it;break;default:throw new Error("index is out of range: "+rt)}return this}getComponent(rt){switch(rt){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+rt)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(rt){return this.x=rt.x,this.y=rt.y,this.z=rt.z,this.w=rt.w!==void 0?rt.w:1,this}add(rt){return this.x+=rt.x,this.y+=rt.y,this.z+=rt.z,this.w+=rt.w,this}addScalar(rt){return this.x+=rt,this.y+=rt,this.z+=rt,this.w+=rt,this}addVectors(rt,it){return this.x=rt.x+it.x,this.y=rt.y+it.y,this.z=rt.z+it.z,this.w=rt.w+it.w,this}addScaledVector(rt,it){return this.x+=rt.x*it,this.y+=rt.y*it,this.z+=rt.z*it,this.w+=rt.w*it,this}sub(rt){return this.x-=rt.x,this.y-=rt.y,this.z-=rt.z,this.w-=rt.w,this}subScalar(rt){return this.x-=rt,this.y-=rt,this.z-=rt,this.w-=rt,this}subVectors(rt,it){return this.x=rt.x-it.x,this.y=rt.y-it.y,this.z=rt.z-it.z,this.w=rt.w-it.w,this}multiply(rt){return this.x*=rt.x,this.y*=rt.y,this.z*=rt.z,this.w*=rt.w,this}multiplyScalar(rt){return this.x*=rt,this.y*=rt,this.z*=rt,this.w*=rt,this}applyMatrix4(rt){const it=this.x,st=this.y,lt=this.z,ct=this.w,ut=rt.elements;return this.x=ut[0]*it+ut[4]*st+ut[8]*lt+ut[12]*ct,this.y=ut[1]*it+ut[5]*st+ut[9]*lt+ut[13]*ct,this.z=ut[2]*it+ut[6]*st+ut[10]*lt+ut[14]*ct,this.w=ut[3]*it+ut[7]*st+ut[11]*lt+ut[15]*ct,this}divideScalar(rt){return this.multiplyScalar(1/rt)}setAxisAngleFromQuaternion(rt){this.w=2*Math.acos(rt.w);const it=Math.sqrt(1-rt.w*rt.w);return it<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=rt.x/it,this.y=rt.y/it,this.z=rt.z/it),this}setAxisAngleFromRotationMatrix(rt){let it,st,lt,ct;const ht=rt.elements,ft=ht[0],pt=ht[4],mt=ht[8],gt=ht[1],xt=ht[5],yt=ht[9],vt=ht[2],St=ht[6],wt=ht[10];if(Math.abs(pt-gt)<.01&&Math.abs(mt-vt)<.01&&Math.abs(yt-St)<.01){if(Math.abs(pt+gt)<.1&&Math.abs(mt+vt)<.1&&Math.abs(yt+St)<.1&&Math.abs(ft+xt+wt-3)<.1)return this.set(1,0,0,0),this;it=Math.PI;const Rt=(ft+1)/2,Tt=(xt+1)/2,It=(wt+1)/2,At=(pt+gt)/4,Dt=(mt+vt)/4,jt=(yt+St)/4;return Rt>Tt&&Rt>It?Rt<.01?(st=0,lt=.707106781,ct=.707106781):(st=Math.sqrt(Rt),lt=At/st,ct=Dt/st):Tt>It?Tt<.01?(st=.707106781,lt=0,ct=.707106781):(lt=Math.sqrt(Tt),st=At/lt,ct=jt/lt):It<.01?(st=.707106781,lt=.707106781,ct=0):(ct=Math.sqrt(It),st=Dt/ct,lt=jt/ct),this.set(st,lt,ct,it),this}let Et=Math.sqrt((St-yt)*(St-yt)+(mt-vt)*(mt-vt)+(gt-pt)*(gt-pt));return Math.abs(Et)<.001&&(Et=1),this.x=(St-yt)/Et,this.y=(mt-vt)/Et,this.z=(gt-pt)/Et,this.w=Math.acos((ft+xt+wt-1)/2),this}min(rt){return this.x=Math.min(this.x,rt.x),this.y=Math.min(this.y,rt.y),this.z=Math.min(this.z,rt.z),this.w=Math.min(this.w,rt.w),this}max(rt){return this.x=Math.max(this.x,rt.x),this.y=Math.max(this.y,rt.y),this.z=Math.max(this.z,rt.z),this.w=Math.max(this.w,rt.w),this}clamp(rt,it){return this.x=Math.max(rt.x,Math.min(it.x,this.x)),this.y=Math.max(rt.y,Math.min(it.y,this.y)),this.z=Math.max(rt.z,Math.min(it.z,this.z)),this.w=Math.max(rt.w,Math.min(it.w,this.w)),this}clampScalar(rt,it){return this.x=Math.max(rt,Math.min(it,this.x)),this.y=Math.max(rt,Math.min(it,this.y)),this.z=Math.max(rt,Math.min(it,this.z)),this.w=Math.max(rt,Math.min(it,this.w)),this}clampLength(rt,it){const st=this.length();return this.divideScalar(st||1).multiplyScalar(Math.max(rt,Math.min(it,st)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(rt){return this.x*rt.x+this.y*rt.y+this.z*rt.z+this.w*rt.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(rt){return this.normalize().multiplyScalar(rt)}lerp(rt,it){return this.x+=(rt.x-this.x)*it,this.y+=(rt.y-this.y)*it,this.z+=(rt.z-this.z)*it,this.w+=(rt.w-this.w)*it,this}lerpVectors(rt,it,st){return this.x=rt.x+(it.x-rt.x)*st,this.y=rt.y+(it.y-rt.y)*st,this.z=rt.z+(it.z-rt.z)*st,this.w=rt.w+(it.w-rt.w)*st,this}equals(rt){return rt.x===this.x&&rt.y===this.y&&rt.z===this.z&&rt.w===this.w}fromArray(rt,it=0){return this.x=rt[it],this.y=rt[it+1],this.z=rt[it+2],this.w=rt[it+3],this}toArray(rt=[],it=0){return rt[it]=this.x,rt[it+1]=this.y,rt[it+2]=this.z,rt[it+3]=this.w,rt}fromBufferAttribute(rt,it){return this.x=rt.getX(it),this.y=rt.getY(it),this.z=rt.getZ(it),this.w=rt.getW(it),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(rt=1,it=1,st={}){super(),this.isRenderTarget=!0,this.width=rt,this.height=it,this.depth=1,this.scissor=new Vector4(0,0,rt,it),this.scissorTest=!1,this.viewport=new Vector4(0,0,rt,it);const lt={width:rt,height:it,depth:1};st.encoding!==void 0&&(warnOnce("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),st.colorSpace=st.encoding===sRGBEncoding?SRGBColorSpace:NoColorSpace),st=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},st),this.texture=new Texture(lt,st.mapping,st.wrapS,st.wrapT,st.magFilter,st.minFilter,st.format,st.type,st.anisotropy,st.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=st.generateMipmaps,this.texture.internalFormat=st.internalFormat,this.depthBuffer=st.depthBuffer,this.stencilBuffer=st.stencilBuffer,this.depthTexture=st.depthTexture,this.samples=st.samples}setSize(rt,it,st=1){(this.width!==rt||this.height!==it||this.depth!==st)&&(this.width=rt,this.height=it,this.depth=st,this.texture.image.width=rt,this.texture.image.height=it,this.texture.image.depth=st,this.dispose()),this.viewport.set(0,0,rt,it),this.scissor.set(0,0,rt,it)}clone(){return new this.constructor().copy(this)}copy(rt){this.width=rt.width,this.height=rt.height,this.depth=rt.depth,this.scissor.copy(rt.scissor),this.scissorTest=rt.scissorTest,this.viewport.copy(rt.viewport),this.texture=rt.texture.clone(),this.texture.isRenderTargetTexture=!0;const it=Object.assign({},rt.texture.image);return this.texture.source=new Source(it),this.depthBuffer=rt.depthBuffer,this.stencilBuffer=rt.stencilBuffer,rt.depthTexture!==null&&(this.depthTexture=rt.depthTexture.clone()),this.samples=rt.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(rt=1,it=1,st={}){super(rt,it,st),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(rt=null,it=1,st=1,lt=1){super(null),this.isDataArrayTexture=!0,this.image={data:rt,width:it,height:st,depth:lt},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(rt=1,it=1,st=1,lt={}){super(rt,it,lt),this.isWebGLArrayRenderTarget=!0,this.depth=st,this.texture=new DataArrayTexture(null,rt,it,st),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(rt=null,it=1,st=1,lt=1){super(null),this.isData3DTexture=!0,this.image={data:rt,width:it,height:st,depth:lt},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(rt=1,it=1,st=1,lt={}){super(rt,it,lt),this.isWebGL3DRenderTarget=!0,this.depth=st,this.texture=new Data3DTexture(null,rt,it,st),this.texture.isRenderTargetTexture=!0}}class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor(rt=1,it=1,st=1,lt={}){super(rt,it,lt),this.isWebGLMultipleRenderTargets=!0;const ct=this.texture;this.texture=[];for(let ut=0;ut<st;ut++)this.texture[ut]=ct.clone(),this.texture[ut].isRenderTargetTexture=!0}setSize(rt,it,st=1){if(this.width!==rt||this.height!==it||this.depth!==st){this.width=rt,this.height=it,this.depth=st;for(let lt=0,ct=this.texture.length;lt<ct;lt++)this.texture[lt].image.width=rt,this.texture[lt].image.height=it,this.texture[lt].image.depth=st;this.dispose()}this.viewport.set(0,0,rt,it),this.scissor.set(0,0,rt,it)}copy(rt){this.dispose(),this.width=rt.width,this.height=rt.height,this.depth=rt.depth,this.scissor.copy(rt.scissor),this.scissorTest=rt.scissorTest,this.viewport.copy(rt.viewport),this.depthBuffer=rt.depthBuffer,this.stencilBuffer=rt.stencilBuffer,rt.depthTexture!==null&&(this.depthTexture=rt.depthTexture.clone()),this.texture.length=0;for(let it=0,st=rt.texture.length;it<st;it++)this.texture[it]=rt.texture[it].clone(),this.texture[it].isRenderTargetTexture=!0;return this}}class Quaternion{constructor(rt=0,it=0,st=0,lt=1){this.isQuaternion=!0,this._x=rt,this._y=it,this._z=st,this._w=lt}static slerpFlat(rt,it,st,lt,ct,ut,dt){let ht=st[lt+0],ft=st[lt+1],pt=st[lt+2],mt=st[lt+3];const gt=ct[ut+0],xt=ct[ut+1],yt=ct[ut+2],vt=ct[ut+3];if(dt===0){rt[it+0]=ht,rt[it+1]=ft,rt[it+2]=pt,rt[it+3]=mt;return}if(dt===1){rt[it+0]=gt,rt[it+1]=xt,rt[it+2]=yt,rt[it+3]=vt;return}if(mt!==vt||ht!==gt||ft!==xt||pt!==yt){let St=1-dt;const wt=ht*gt+ft*xt+pt*yt+mt*vt,Et=wt>=0?1:-1,Rt=1-wt*wt;if(Rt>Number.EPSILON){const It=Math.sqrt(Rt),At=Math.atan2(It,wt*Et);St=Math.sin(St*At)/It,dt=Math.sin(dt*At)/It}const Tt=dt*Et;if(ht=ht*St+gt*Tt,ft=ft*St+xt*Tt,pt=pt*St+yt*Tt,mt=mt*St+vt*Tt,St===1-dt){const It=1/Math.sqrt(ht*ht+ft*ft+pt*pt+mt*mt);ht*=It,ft*=It,pt*=It,mt*=It}}rt[it]=ht,rt[it+1]=ft,rt[it+2]=pt,rt[it+3]=mt}static multiplyQuaternionsFlat(rt,it,st,lt,ct,ut){const dt=st[lt],ht=st[lt+1],ft=st[lt+2],pt=st[lt+3],mt=ct[ut],gt=ct[ut+1],xt=ct[ut+2],yt=ct[ut+3];return rt[it]=dt*yt+pt*mt+ht*xt-ft*gt,rt[it+1]=ht*yt+pt*gt+ft*mt-dt*xt,rt[it+2]=ft*yt+pt*xt+dt*gt-ht*mt,rt[it+3]=pt*yt-dt*mt-ht*gt-ft*xt,rt}get x(){return this._x}set x(rt){this._x=rt,this._onChangeCallback()}get y(){return this._y}set y(rt){this._y=rt,this._onChangeCallback()}get z(){return this._z}set z(rt){this._z=rt,this._onChangeCallback()}get w(){return this._w}set w(rt){this._w=rt,this._onChangeCallback()}set(rt,it,st,lt){return this._x=rt,this._y=it,this._z=st,this._w=lt,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(rt){return this._x=rt.x,this._y=rt.y,this._z=rt.z,this._w=rt.w,this._onChangeCallback(),this}setFromEuler(rt,it=!0){const st=rt._x,lt=rt._y,ct=rt._z,ut=rt._order,dt=Math.cos,ht=Math.sin,ft=dt(st/2),pt=dt(lt/2),mt=dt(ct/2),gt=ht(st/2),xt=ht(lt/2),yt=ht(ct/2);switch(ut){case"XYZ":this._x=gt*pt*mt+ft*xt*yt,this._y=ft*xt*mt-gt*pt*yt,this._z=ft*pt*yt+gt*xt*mt,this._w=ft*pt*mt-gt*xt*yt;break;case"YXZ":this._x=gt*pt*mt+ft*xt*yt,this._y=ft*xt*mt-gt*pt*yt,this._z=ft*pt*yt-gt*xt*mt,this._w=ft*pt*mt+gt*xt*yt;break;case"ZXY":this._x=gt*pt*mt-ft*xt*yt,this._y=ft*xt*mt+gt*pt*yt,this._z=ft*pt*yt+gt*xt*mt,this._w=ft*pt*mt-gt*xt*yt;break;case"ZYX":this._x=gt*pt*mt-ft*xt*yt,this._y=ft*xt*mt+gt*pt*yt,this._z=ft*pt*yt-gt*xt*mt,this._w=ft*pt*mt+gt*xt*yt;break;case"YZX":this._x=gt*pt*mt+ft*xt*yt,this._y=ft*xt*mt+gt*pt*yt,this._z=ft*pt*yt-gt*xt*mt,this._w=ft*pt*mt-gt*xt*yt;break;case"XZY":this._x=gt*pt*mt-ft*xt*yt,this._y=ft*xt*mt-gt*pt*yt,this._z=ft*pt*yt+gt*xt*mt,this._w=ft*pt*mt+gt*xt*yt;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+ut)}return it===!0&&this._onChangeCallback(),this}setFromAxisAngle(rt,it){const st=it/2,lt=Math.sin(st);return this._x=rt.x*lt,this._y=rt.y*lt,this._z=rt.z*lt,this._w=Math.cos(st),this._onChangeCallback(),this}setFromRotationMatrix(rt){const it=rt.elements,st=it[0],lt=it[4],ct=it[8],ut=it[1],dt=it[5],ht=it[9],ft=it[2],pt=it[6],mt=it[10],gt=st+dt+mt;if(gt>0){const xt=.5/Math.sqrt(gt+1);this._w=.25/xt,this._x=(pt-ht)*xt,this._y=(ct-ft)*xt,this._z=(ut-lt)*xt}else if(st>dt&&st>mt){const xt=2*Math.sqrt(1+st-dt-mt);this._w=(pt-ht)/xt,this._x=.25*xt,this._y=(lt+ut)/xt,this._z=(ct+ft)/xt}else if(dt>mt){const xt=2*Math.sqrt(1+dt-st-mt);this._w=(ct-ft)/xt,this._x=(lt+ut)/xt,this._y=.25*xt,this._z=(ht+pt)/xt}else{const xt=2*Math.sqrt(1+mt-st-dt);this._w=(ut-lt)/xt,this._x=(ct+ft)/xt,this._y=(ht+pt)/xt,this._z=.25*xt}return this._onChangeCallback(),this}setFromUnitVectors(rt,it){let st=rt.dot(it)+1;return st<Number.EPSILON?(st=0,Math.abs(rt.x)>Math.abs(rt.z)?(this._x=-rt.y,this._y=rt.x,this._z=0,this._w=st):(this._x=0,this._y=-rt.z,this._z=rt.y,this._w=st)):(this._x=rt.y*it.z-rt.z*it.y,this._y=rt.z*it.x-rt.x*it.z,this._z=rt.x*it.y-rt.y*it.x,this._w=st),this.normalize()}angleTo(rt){return 2*Math.acos(Math.abs(clamp(this.dot(rt),-1,1)))}rotateTowards(rt,it){const st=this.angleTo(rt);if(st===0)return this;const lt=Math.min(1,it/st);return this.slerp(rt,lt),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(rt){return this._x*rt._x+this._y*rt._y+this._z*rt._z+this._w*rt._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let rt=this.length();return rt===0?(this._x=0,this._y=0,this._z=0,this._w=1):(rt=1/rt,this._x=this._x*rt,this._y=this._y*rt,this._z=this._z*rt,this._w=this._w*rt),this._onChangeCallback(),this}multiply(rt){return this.multiplyQuaternions(this,rt)}premultiply(rt){return this.multiplyQuaternions(rt,this)}multiplyQuaternions(rt,it){const st=rt._x,lt=rt._y,ct=rt._z,ut=rt._w,dt=it._x,ht=it._y,ft=it._z,pt=it._w;return this._x=st*pt+ut*dt+lt*ft-ct*ht,this._y=lt*pt+ut*ht+ct*dt-st*ft,this._z=ct*pt+ut*ft+st*ht-lt*dt,this._w=ut*pt-st*dt-lt*ht-ct*ft,this._onChangeCallback(),this}slerp(rt,it){if(it===0)return this;if(it===1)return this.copy(rt);const st=this._x,lt=this._y,ct=this._z,ut=this._w;let dt=ut*rt._w+st*rt._x+lt*rt._y+ct*rt._z;if(dt<0?(this._w=-rt._w,this._x=-rt._x,this._y=-rt._y,this._z=-rt._z,dt=-dt):this.copy(rt),dt>=1)return this._w=ut,this._x=st,this._y=lt,this._z=ct,this;const ht=1-dt*dt;if(ht<=Number.EPSILON){const xt=1-it;return this._w=xt*ut+it*this._w,this._x=xt*st+it*this._x,this._y=xt*lt+it*this._y,this._z=xt*ct+it*this._z,this.normalize(),this}const ft=Math.sqrt(ht),pt=Math.atan2(ft,dt),mt=Math.sin((1-it)*pt)/ft,gt=Math.sin(it*pt)/ft;return this._w=ut*mt+this._w*gt,this._x=st*mt+this._x*gt,this._y=lt*mt+this._y*gt,this._z=ct*mt+this._z*gt,this._onChangeCallback(),this}slerpQuaternions(rt,it,st){return this.copy(rt).slerp(it,st)}random(){const rt=Math.random(),it=Math.sqrt(1-rt),st=Math.sqrt(rt),lt=2*Math.PI*Math.random(),ct=2*Math.PI*Math.random();return this.set(it*Math.cos(lt),st*Math.sin(ct),st*Math.cos(ct),it*Math.sin(lt))}equals(rt){return rt._x===this._x&&rt._y===this._y&&rt._z===this._z&&rt._w===this._w}fromArray(rt,it=0){return this._x=rt[it],this._y=rt[it+1],this._z=rt[it+2],this._w=rt[it+3],this._onChangeCallback(),this}toArray(rt=[],it=0){return rt[it]=this._x,rt[it+1]=this._y,rt[it+2]=this._z,rt[it+3]=this._w,rt}fromBufferAttribute(rt,it){return this._x=rt.getX(it),this._y=rt.getY(it),this._z=rt.getZ(it),this._w=rt.getW(it),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(rt){return this._onChangeCallback=rt,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(rt=0,it=0,st=0){Vector3.prototype.isVector3=!0,this.x=rt,this.y=it,this.z=st}set(rt,it,st){return st===void 0&&(st=this.z),this.x=rt,this.y=it,this.z=st,this}setScalar(rt){return this.x=rt,this.y=rt,this.z=rt,this}setX(rt){return this.x=rt,this}setY(rt){return this.y=rt,this}setZ(rt){return this.z=rt,this}setComponent(rt,it){switch(rt){case 0:this.x=it;break;case 1:this.y=it;break;case 2:this.z=it;break;default:throw new Error("index is out of range: "+rt)}return this}getComponent(rt){switch(rt){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+rt)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(rt){return this.x=rt.x,this.y=rt.y,this.z=rt.z,this}add(rt){return this.x+=rt.x,this.y+=rt.y,this.z+=rt.z,this}addScalar(rt){return this.x+=rt,this.y+=rt,this.z+=rt,this}addVectors(rt,it){return this.x=rt.x+it.x,this.y=rt.y+it.y,this.z=rt.z+it.z,this}addScaledVector(rt,it){return this.x+=rt.x*it,this.y+=rt.y*it,this.z+=rt.z*it,this}sub(rt){return this.x-=rt.x,this.y-=rt.y,this.z-=rt.z,this}subScalar(rt){return this.x-=rt,this.y-=rt,this.z-=rt,this}subVectors(rt,it){return this.x=rt.x-it.x,this.y=rt.y-it.y,this.z=rt.z-it.z,this}multiply(rt){return this.x*=rt.x,this.y*=rt.y,this.z*=rt.z,this}multiplyScalar(rt){return this.x*=rt,this.y*=rt,this.z*=rt,this}multiplyVectors(rt,it){return this.x=rt.x*it.x,this.y=rt.y*it.y,this.z=rt.z*it.z,this}applyEuler(rt){return this.applyQuaternion(_quaternion$4.setFromEuler(rt))}applyAxisAngle(rt,it){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(rt,it))}applyMatrix3(rt){const it=this.x,st=this.y,lt=this.z,ct=rt.elements;return this.x=ct[0]*it+ct[3]*st+ct[6]*lt,this.y=ct[1]*it+ct[4]*st+ct[7]*lt,this.z=ct[2]*it+ct[5]*st+ct[8]*lt,this}applyNormalMatrix(rt){return this.applyMatrix3(rt).normalize()}applyMatrix4(rt){const it=this.x,st=this.y,lt=this.z,ct=rt.elements,ut=1/(ct[3]*it+ct[7]*st+ct[11]*lt+ct[15]);return this.x=(ct[0]*it+ct[4]*st+ct[8]*lt+ct[12])*ut,this.y=(ct[1]*it+ct[5]*st+ct[9]*lt+ct[13])*ut,this.z=(ct[2]*it+ct[6]*st+ct[10]*lt+ct[14])*ut,this}applyQuaternion(rt){const it=this.x,st=this.y,lt=this.z,ct=rt.x,ut=rt.y,dt=rt.z,ht=rt.w,ft=2*(ut*lt-dt*st),pt=2*(dt*it-ct*lt),mt=2*(ct*st-ut*it);return this.x=it+ht*ft+ut*mt-dt*pt,this.y=st+ht*pt+dt*ft-ct*mt,this.z=lt+ht*mt+ct*pt-ut*ft,this}project(rt){return this.applyMatrix4(rt.matrixWorldInverse).applyMatrix4(rt.projectionMatrix)}unproject(rt){return this.applyMatrix4(rt.projectionMatrixInverse).applyMatrix4(rt.matrixWorld)}transformDirection(rt){const it=this.x,st=this.y,lt=this.z,ct=rt.elements;return this.x=ct[0]*it+ct[4]*st+ct[8]*lt,this.y=ct[1]*it+ct[5]*st+ct[9]*lt,this.z=ct[2]*it+ct[6]*st+ct[10]*lt,this.normalize()}divide(rt){return this.x/=rt.x,this.y/=rt.y,this.z/=rt.z,this}divideScalar(rt){return this.multiplyScalar(1/rt)}min(rt){return this.x=Math.min(this.x,rt.x),this.y=Math.min(this.y,rt.y),this.z=Math.min(this.z,rt.z),this}max(rt){return this.x=Math.max(this.x,rt.x),this.y=Math.max(this.y,rt.y),this.z=Math.max(this.z,rt.z),this}clamp(rt,it){return this.x=Math.max(rt.x,Math.min(it.x,this.x)),this.y=Math.max(rt.y,Math.min(it.y,this.y)),this.z=Math.max(rt.z,Math.min(it.z,this.z)),this}clampScalar(rt,it){return this.x=Math.max(rt,Math.min(it,this.x)),this.y=Math.max(rt,Math.min(it,this.y)),this.z=Math.max(rt,Math.min(it,this.z)),this}clampLength(rt,it){const st=this.length();return this.divideScalar(st||1).multiplyScalar(Math.max(rt,Math.min(it,st)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(rt){return this.x*rt.x+this.y*rt.y+this.z*rt.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(rt){return this.normalize().multiplyScalar(rt)}lerp(rt,it){return this.x+=(rt.x-this.x)*it,this.y+=(rt.y-this.y)*it,this.z+=(rt.z-this.z)*it,this}lerpVectors(rt,it,st){return this.x=rt.x+(it.x-rt.x)*st,this.y=rt.y+(it.y-rt.y)*st,this.z=rt.z+(it.z-rt.z)*st,this}cross(rt){return this.crossVectors(this,rt)}crossVectors(rt,it){const st=rt.x,lt=rt.y,ct=rt.z,ut=it.x,dt=it.y,ht=it.z;return this.x=lt*ht-ct*dt,this.y=ct*ut-st*ht,this.z=st*dt-lt*ut,this}projectOnVector(rt){const it=rt.lengthSq();if(it===0)return this.set(0,0,0);const st=rt.dot(this)/it;return this.copy(rt).multiplyScalar(st)}projectOnPlane(rt){return _vector$c.copy(this).projectOnVector(rt),this.sub(_vector$c)}reflect(rt){return this.sub(_vector$c.copy(rt).multiplyScalar(2*this.dot(rt)))}angleTo(rt){const it=Math.sqrt(this.lengthSq()*rt.lengthSq());if(it===0)return Math.PI/2;const st=this.dot(rt)/it;return Math.acos(clamp(st,-1,1))}distanceTo(rt){return Math.sqrt(this.distanceToSquared(rt))}distanceToSquared(rt){const it=this.x-rt.x,st=this.y-rt.y,lt=this.z-rt.z;return it*it+st*st+lt*lt}manhattanDistanceTo(rt){return Math.abs(this.x-rt.x)+Math.abs(this.y-rt.y)+Math.abs(this.z-rt.z)}setFromSpherical(rt){return this.setFromSphericalCoords(rt.radius,rt.phi,rt.theta)}setFromSphericalCoords(rt,it,st){const lt=Math.sin(it)*rt;return this.x=lt*Math.sin(st),this.y=Math.cos(it)*rt,this.z=lt*Math.cos(st),this}setFromCylindrical(rt){return this.setFromCylindricalCoords(rt.radius,rt.theta,rt.y)}setFromCylindricalCoords(rt,it,st){return this.x=rt*Math.sin(it),this.y=st,this.z=rt*Math.cos(it),this}setFromMatrixPosition(rt){const it=rt.elements;return this.x=it[12],this.y=it[13],this.z=it[14],this}setFromMatrixScale(rt){const it=this.setFromMatrixColumn(rt,0).length(),st=this.setFromMatrixColumn(rt,1).length(),lt=this.setFromMatrixColumn(rt,2).length();return this.x=it,this.y=st,this.z=lt,this}setFromMatrixColumn(rt,it){return this.fromArray(rt.elements,it*4)}setFromMatrix3Column(rt,it){return this.fromArray(rt.elements,it*3)}setFromEuler(rt){return this.x=rt._x,this.y=rt._y,this.z=rt._z,this}setFromColor(rt){return this.x=rt.r,this.y=rt.g,this.z=rt.b,this}equals(rt){return rt.x===this.x&&rt.y===this.y&&rt.z===this.z}fromArray(rt,it=0){return this.x=rt[it],this.y=rt[it+1],this.z=rt[it+2],this}toArray(rt=[],it=0){return rt[it]=this.x,rt[it+1]=this.y,rt[it+2]=this.z,rt}fromBufferAttribute(rt,it){return this.x=rt.getX(it),this.y=rt.getY(it),this.z=rt.getZ(it),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const rt=(Math.random()-.5)*2,it=Math.random()*Math.PI*2,st=Math.sqrt(1-rt**2);return this.x=st*Math.cos(it),this.y=st*Math.sin(it),this.z=rt,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(rt=new Vector3(1/0,1/0,1/0),it=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=rt,this.max=it}set(rt,it){return this.min.copy(rt),this.max.copy(it),this}setFromArray(rt){this.makeEmpty();for(let it=0,st=rt.length;it<st;it+=3)this.expandByPoint(_vector$b.fromArray(rt,it));return this}setFromBufferAttribute(rt){this.makeEmpty();for(let it=0,st=rt.count;it<st;it++)this.expandByPoint(_vector$b.fromBufferAttribute(rt,it));return this}setFromPoints(rt){this.makeEmpty();for(let it=0,st=rt.length;it<st;it++)this.expandByPoint(rt[it]);return this}setFromCenterAndSize(rt,it){const st=_vector$b.copy(it).multiplyScalar(.5);return this.min.copy(rt).sub(st),this.max.copy(rt).add(st),this}setFromObject(rt,it=!1){return this.makeEmpty(),this.expandByObject(rt,it)}clone(){return new this.constructor().copy(this)}copy(rt){return this.min.copy(rt.min),this.max.copy(rt.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(rt){return this.isEmpty()?rt.set(0,0,0):rt.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(rt){return this.isEmpty()?rt.set(0,0,0):rt.subVectors(this.max,this.min)}expandByPoint(rt){return this.min.min(rt),this.max.max(rt),this}expandByVector(rt){return this.min.sub(rt),this.max.add(rt),this}expandByScalar(rt){return this.min.addScalar(-rt),this.max.addScalar(rt),this}expandByObject(rt,it=!1){rt.updateWorldMatrix(!1,!1);const st=rt.geometry;if(st!==void 0){const ct=st.getAttribute("position");if(it===!0&&ct!==void 0&&rt.isInstancedMesh!==!0)for(let ut=0,dt=ct.count;ut<dt;ut++)rt.isMesh===!0?rt.getVertexPosition(ut,_vector$b):_vector$b.fromBufferAttribute(ct,ut),_vector$b.applyMatrix4(rt.matrixWorld),this.expandByPoint(_vector$b);else rt.boundingBox!==void 0?(rt.boundingBox===null&&rt.computeBoundingBox(),_box$4.copy(rt.boundingBox)):(st.boundingBox===null&&st.computeBoundingBox(),_box$4.copy(st.boundingBox)),_box$4.applyMatrix4(rt.matrixWorld),this.union(_box$4)}const lt=rt.children;for(let ct=0,ut=lt.length;ct<ut;ct++)this.expandByObject(lt[ct],it);return this}containsPoint(rt){return!(rt.x<this.min.x||rt.x>this.max.x||rt.y<this.min.y||rt.y>this.max.y||rt.z<this.min.z||rt.z>this.max.z)}containsBox(rt){return this.min.x<=rt.min.x&&rt.max.x<=this.max.x&&this.min.y<=rt.min.y&&rt.max.y<=this.max.y&&this.min.z<=rt.min.z&&rt.max.z<=this.max.z}getParameter(rt,it){return it.set((rt.x-this.min.x)/(this.max.x-this.min.x),(rt.y-this.min.y)/(this.max.y-this.min.y),(rt.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(rt){return!(rt.max.x<this.min.x||rt.min.x>this.max.x||rt.max.y<this.min.y||rt.min.y>this.max.y||rt.max.z<this.min.z||rt.min.z>this.max.z)}intersectsSphere(rt){return this.clampPoint(rt.center,_vector$b),_vector$b.distanceToSquared(rt.center)<=rt.radius*rt.radius}intersectsPlane(rt){let it,st;return rt.normal.x>0?(it=rt.normal.x*this.min.x,st=rt.normal.x*this.max.x):(it=rt.normal.x*this.max.x,st=rt.normal.x*this.min.x),rt.normal.y>0?(it+=rt.normal.y*this.min.y,st+=rt.normal.y*this.max.y):(it+=rt.normal.y*this.max.y,st+=rt.normal.y*this.min.y),rt.normal.z>0?(it+=rt.normal.z*this.min.z,st+=rt.normal.z*this.max.z):(it+=rt.normal.z*this.max.z,st+=rt.normal.z*this.min.z),it<=-rt.constant&&st>=-rt.constant}intersectsTriangle(rt){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(rt.a,_center),_v1$7.subVectors(rt.b,_center),_v2$4.subVectors(rt.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let it=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(it,_v0$2,_v1$7,_v2$4,_extents)||(it=[1,0,0,0,1,0,0,0,1],!satForAxes(it,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),it=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(it,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(rt,it){return it.copy(rt).clamp(this.min,this.max)}distanceToPoint(rt){return this.clampPoint(rt,_vector$b).distanceTo(rt)}getBoundingSphere(rt){return this.isEmpty()?rt.makeEmpty():(this.getCenter(rt.center),rt.radius=this.getSize(_vector$b).length()*.5),rt}intersect(rt){return this.min.max(rt.min),this.max.min(rt.max),this.isEmpty()&&this.makeEmpty(),this}union(rt){return this.min.min(rt.min),this.max.max(rt.max),this}applyMatrix4(rt){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(rt),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(rt),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(rt),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(rt),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(rt),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(rt),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(rt),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(rt),this.setFromPoints(_points),this)}translate(rt){return this.min.add(rt),this.max.add(rt),this}equals(rt){return rt.min.equals(this.min)&&rt.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(nt,rt,it,st,lt){for(let ct=0,ut=nt.length-3;ct<=ut;ct+=3){_testAxis.fromArray(nt,ct);const dt=lt.x*Math.abs(_testAxis.x)+lt.y*Math.abs(_testAxis.y)+lt.z*Math.abs(_testAxis.z),ht=rt.dot(_testAxis),ft=it.dot(_testAxis),pt=st.dot(_testAxis);if(Math.max(-Math.max(ht,ft,pt),Math.min(ht,ft,pt))>dt)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(rt=new Vector3,it=-1){this.isSphere=!0,this.center=rt,this.radius=it}set(rt,it){return this.center.copy(rt),this.radius=it,this}setFromPoints(rt,it){const st=this.center;it!==void 0?st.copy(it):_box$3.setFromPoints(rt).getCenter(st);let lt=0;for(let ct=0,ut=rt.length;ct<ut;ct++)lt=Math.max(lt,st.distanceToSquared(rt[ct]));return this.radius=Math.sqrt(lt),this}copy(rt){return this.center.copy(rt.center),this.radius=rt.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(rt){return rt.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(rt){return rt.distanceTo(this.center)-this.radius}intersectsSphere(rt){const it=this.radius+rt.radius;return rt.center.distanceToSquared(this.center)<=it*it}intersectsBox(rt){return rt.intersectsSphere(this)}intersectsPlane(rt){return Math.abs(rt.distanceToPoint(this.center))<=this.radius}clampPoint(rt,it){const st=this.center.distanceToSquared(rt);return it.copy(rt),st>this.radius*this.radius&&(it.sub(this.center).normalize(),it.multiplyScalar(this.radius).add(this.center)),it}getBoundingBox(rt){return this.isEmpty()?(rt.makeEmpty(),rt):(rt.set(this.center,this.center),rt.expandByScalar(this.radius),rt)}applyMatrix4(rt){return this.center.applyMatrix4(rt),this.radius=this.radius*rt.getMaxScaleOnAxis(),this}translate(rt){return this.center.add(rt),this}expandByPoint(rt){if(this.isEmpty())return this.center.copy(rt),this.radius=0,this;_v1$6.subVectors(rt,this.center);const it=_v1$6.lengthSq();if(it>this.radius*this.radius){const st=Math.sqrt(it),lt=(st-this.radius)*.5;this.center.addScaledVector(_v1$6,lt/st),this.radius+=lt}return this}union(rt){return rt.isEmpty()?this:this.isEmpty()?(this.copy(rt),this):(this.center.equals(rt.center)===!0?this.radius=Math.max(this.radius,rt.radius):(_v2$3.subVectors(rt.center,this.center).setLength(rt.radius),this.expandByPoint(_v1$6.copy(rt.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(rt.center).sub(_v2$3))),this)}equals(rt){return rt.center.equals(this.center)&&rt.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(rt=new Vector3,it=new Vector3(0,0,-1)){this.origin=rt,this.direction=it}set(rt,it){return this.origin.copy(rt),this.direction.copy(it),this}copy(rt){return this.origin.copy(rt.origin),this.direction.copy(rt.direction),this}at(rt,it){return it.copy(this.origin).addScaledVector(this.direction,rt)}lookAt(rt){return this.direction.copy(rt).sub(this.origin).normalize(),this}recast(rt){return this.origin.copy(this.at(rt,_vector$a)),this}closestPointToPoint(rt,it){it.subVectors(rt,this.origin);const st=it.dot(this.direction);return st<0?it.copy(this.origin):it.copy(this.origin).addScaledVector(this.direction,st)}distanceToPoint(rt){return Math.sqrt(this.distanceSqToPoint(rt))}distanceSqToPoint(rt){const it=_vector$a.subVectors(rt,this.origin).dot(this.direction);return it<0?this.origin.distanceToSquared(rt):(_vector$a.copy(this.origin).addScaledVector(this.direction,it),_vector$a.distanceToSquared(rt))}distanceSqToSegment(rt,it,st,lt){_segCenter.copy(rt).add(it).multiplyScalar(.5),_segDir.copy(it).sub(rt).normalize(),_diff.copy(this.origin).sub(_segCenter);const ct=rt.distanceTo(it)*.5,ut=-this.direction.dot(_segDir),dt=_diff.dot(this.direction),ht=-_diff.dot(_segDir),ft=_diff.lengthSq(),pt=Math.abs(1-ut*ut);let mt,gt,xt,yt;if(pt>0)if(mt=ut*ht-dt,gt=ut*dt-ht,yt=ct*pt,mt>=0)if(gt>=-yt)if(gt<=yt){const vt=1/pt;mt*=vt,gt*=vt,xt=mt*(mt+ut*gt+2*dt)+gt*(ut*mt+gt+2*ht)+ft}else gt=ct,mt=Math.max(0,-(ut*gt+dt)),xt=-mt*mt+gt*(gt+2*ht)+ft;else gt=-ct,mt=Math.max(0,-(ut*gt+dt)),xt=-mt*mt+gt*(gt+2*ht)+ft;else gt<=-yt?(mt=Math.max(0,-(-ut*ct+dt)),gt=mt>0?-ct:Math.min(Math.max(-ct,-ht),ct),xt=-mt*mt+gt*(gt+2*ht)+ft):gt<=yt?(mt=0,gt=Math.min(Math.max(-ct,-ht),ct),xt=gt*(gt+2*ht)+ft):(mt=Math.max(0,-(ut*ct+dt)),gt=mt>0?ct:Math.min(Math.max(-ct,-ht),ct),xt=-mt*mt+gt*(gt+2*ht)+ft);else gt=ut>0?-ct:ct,mt=Math.max(0,-(ut*gt+dt)),xt=-mt*mt+gt*(gt+2*ht)+ft;return st&&st.copy(this.origin).addScaledVector(this.direction,mt),lt&&lt.copy(_segCenter).addScaledVector(_segDir,gt),xt}intersectSphere(rt,it){_vector$a.subVectors(rt.center,this.origin);const st=_vector$a.dot(this.direction),lt=_vector$a.dot(_vector$a)-st*st,ct=rt.radius*rt.radius;if(lt>ct)return null;const ut=Math.sqrt(ct-lt),dt=st-ut,ht=st+ut;return ht<0?null:dt<0?this.at(ht,it):this.at(dt,it)}intersectsSphere(rt){return this.distanceSqToPoint(rt.center)<=rt.radius*rt.radius}distanceToPlane(rt){const it=rt.normal.dot(this.direction);if(it===0)return rt.distanceToPoint(this.origin)===0?0:null;const st=-(this.origin.dot(rt.normal)+rt.constant)/it;return st>=0?st:null}intersectPlane(rt,it){const st=this.distanceToPlane(rt);return st===null?null:this.at(st,it)}intersectsPlane(rt){const it=rt.distanceToPoint(this.origin);return it===0||rt.normal.dot(this.direction)*it<0}intersectBox(rt,it){let st,lt,ct,ut,dt,ht;const ft=1/this.direction.x,pt=1/this.direction.y,mt=1/this.direction.z,gt=this.origin;return ft>=0?(st=(rt.min.x-gt.x)*ft,lt=(rt.max.x-gt.x)*ft):(st=(rt.max.x-gt.x)*ft,lt=(rt.min.x-gt.x)*ft),pt>=0?(ct=(rt.min.y-gt.y)*pt,ut=(rt.max.y-gt.y)*pt):(ct=(rt.max.y-gt.y)*pt,ut=(rt.min.y-gt.y)*pt),st>ut||ct>lt||((ct>st||isNaN(st))&&(st=ct),(ut<lt||isNaN(lt))&&(lt=ut),mt>=0?(dt=(rt.min.z-gt.z)*mt,ht=(rt.max.z-gt.z)*mt):(dt=(rt.max.z-gt.z)*mt,ht=(rt.min.z-gt.z)*mt),st>ht||dt>lt)||((dt>st||st!==st)&&(st=dt),(ht<lt||lt!==lt)&&(lt=ht),lt<0)?null:this.at(st>=0?st:lt,it)}intersectsBox(rt){return this.intersectBox(rt,_vector$a)!==null}intersectTriangle(rt,it,st,lt,ct){_edge1.subVectors(it,rt),_edge2.subVectors(st,rt),_normal$1.crossVectors(_edge1,_edge2);let ut=this.direction.dot(_normal$1),dt;if(ut>0){if(lt)return null;dt=1}else if(ut<0)dt=-1,ut=-ut;else return null;_diff.subVectors(this.origin,rt);const ht=dt*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(ht<0)return null;const ft=dt*this.direction.dot(_edge1.cross(_diff));if(ft<0||ht+ft>ut)return null;const pt=-dt*_diff.dot(_normal$1);return pt<0?null:this.at(pt/ut,ct)}applyMatrix4(rt){return this.origin.applyMatrix4(rt),this.direction.transformDirection(rt),this}equals(rt){return rt.origin.equals(this.origin)&&rt.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(rt,it,st,lt,ct,ut,dt,ht,ft,pt,mt,gt,xt,yt,vt,St){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],rt!==void 0&&this.set(rt,it,st,lt,ct,ut,dt,ht,ft,pt,mt,gt,xt,yt,vt,St)}set(rt,it,st,lt,ct,ut,dt,ht,ft,pt,mt,gt,xt,yt,vt,St){const wt=this.elements;return wt[0]=rt,wt[4]=it,wt[8]=st,wt[12]=lt,wt[1]=ct,wt[5]=ut,wt[9]=dt,wt[13]=ht,wt[2]=ft,wt[6]=pt,wt[10]=mt,wt[14]=gt,wt[3]=xt,wt[7]=yt,wt[11]=vt,wt[15]=St,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(rt){const it=this.elements,st=rt.elements;return it[0]=st[0],it[1]=st[1],it[2]=st[2],it[3]=st[3],it[4]=st[4],it[5]=st[5],it[6]=st[6],it[7]=st[7],it[8]=st[8],it[9]=st[9],it[10]=st[10],it[11]=st[11],it[12]=st[12],it[13]=st[13],it[14]=st[14],it[15]=st[15],this}copyPosition(rt){const it=this.elements,st=rt.elements;return it[12]=st[12],it[13]=st[13],it[14]=st[14],this}setFromMatrix3(rt){const it=rt.elements;return this.set(it[0],it[3],it[6],0,it[1],it[4],it[7],0,it[2],it[5],it[8],0,0,0,0,1),this}extractBasis(rt,it,st){return rt.setFromMatrixColumn(this,0),it.setFromMatrixColumn(this,1),st.setFromMatrixColumn(this,2),this}makeBasis(rt,it,st){return this.set(rt.x,it.x,st.x,0,rt.y,it.y,st.y,0,rt.z,it.z,st.z,0,0,0,0,1),this}extractRotation(rt){const it=this.elements,st=rt.elements,lt=1/_v1$5.setFromMatrixColumn(rt,0).length(),ct=1/_v1$5.setFromMatrixColumn(rt,1).length(),ut=1/_v1$5.setFromMatrixColumn(rt,2).length();return it[0]=st[0]*lt,it[1]=st[1]*lt,it[2]=st[2]*lt,it[3]=0,it[4]=st[4]*ct,it[5]=st[5]*ct,it[6]=st[6]*ct,it[7]=0,it[8]=st[8]*ut,it[9]=st[9]*ut,it[10]=st[10]*ut,it[11]=0,it[12]=0,it[13]=0,it[14]=0,it[15]=1,this}makeRotationFromEuler(rt){const it=this.elements,st=rt.x,lt=rt.y,ct=rt.z,ut=Math.cos(st),dt=Math.sin(st),ht=Math.cos(lt),ft=Math.sin(lt),pt=Math.cos(ct),mt=Math.sin(ct);if(rt.order==="XYZ"){const gt=ut*pt,xt=ut*mt,yt=dt*pt,vt=dt*mt;it[0]=ht*pt,it[4]=-ht*mt,it[8]=ft,it[1]=xt+yt*ft,it[5]=gt-vt*ft,it[9]=-dt*ht,it[2]=vt-gt*ft,it[6]=yt+xt*ft,it[10]=ut*ht}else if(rt.order==="YXZ"){const gt=ht*pt,xt=ht*mt,yt=ft*pt,vt=ft*mt;it[0]=gt+vt*dt,it[4]=yt*dt-xt,it[8]=ut*ft,it[1]=ut*mt,it[5]=ut*pt,it[9]=-dt,it[2]=xt*dt-yt,it[6]=vt+gt*dt,it[10]=ut*ht}else if(rt.order==="ZXY"){const gt=ht*pt,xt=ht*mt,yt=ft*pt,vt=ft*mt;it[0]=gt-vt*dt,it[4]=-ut*mt,it[8]=yt+xt*dt,it[1]=xt+yt*dt,it[5]=ut*pt,it[9]=vt-gt*dt,it[2]=-ut*ft,it[6]=dt,it[10]=ut*ht}else if(rt.order==="ZYX"){const gt=ut*pt,xt=ut*mt,yt=dt*pt,vt=dt*mt;it[0]=ht*pt,it[4]=yt*ft-xt,it[8]=gt*ft+vt,it[1]=ht*mt,it[5]=vt*ft+gt,it[9]=xt*ft-yt,it[2]=-ft,it[6]=dt*ht,it[10]=ut*ht}else if(rt.order==="YZX"){const gt=ut*ht,xt=ut*ft,yt=dt*ht,vt=dt*ft;it[0]=ht*pt,it[4]=vt-gt*mt,it[8]=yt*mt+xt,it[1]=mt,it[5]=ut*pt,it[9]=-dt*pt,it[2]=-ft*pt,it[6]=xt*mt+yt,it[10]=gt-vt*mt}else if(rt.order==="XZY"){const gt=ut*ht,xt=ut*ft,yt=dt*ht,vt=dt*ft;it[0]=ht*pt,it[4]=-mt,it[8]=ft*pt,it[1]=gt*mt+vt,it[5]=ut*pt,it[9]=xt*mt-yt,it[2]=yt*mt-xt,it[6]=dt*pt,it[10]=vt*mt+gt}return it[3]=0,it[7]=0,it[11]=0,it[12]=0,it[13]=0,it[14]=0,it[15]=1,this}makeRotationFromQuaternion(rt){return this.compose(_zero,rt,_one)}lookAt(rt,it,st){const lt=this.elements;return _z.subVectors(rt,it),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(st,_z),_x.lengthSq()===0&&(Math.abs(st.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(st,_z)),_x.normalize(),_y.crossVectors(_z,_x),lt[0]=_x.x,lt[4]=_y.x,lt[8]=_z.x,lt[1]=_x.y,lt[5]=_y.y,lt[9]=_z.y,lt[2]=_x.z,lt[6]=_y.z,lt[10]=_z.z,this}multiply(rt){return this.multiplyMatrices(this,rt)}premultiply(rt){return this.multiplyMatrices(rt,this)}multiplyMatrices(rt,it){const st=rt.elements,lt=it.elements,ct=this.elements,ut=st[0],dt=st[4],ht=st[8],ft=st[12],pt=st[1],mt=st[5],gt=st[9],xt=st[13],yt=st[2],vt=st[6],St=st[10],wt=st[14],Et=st[3],Rt=st[7],Tt=st[11],It=st[15],At=lt[0],Dt=lt[4],jt=lt[8],Ft=lt[12],Lt=lt[1],Mt=lt[5],Ot=lt[9],Nt=lt[13],$t=lt[2],Vt=lt[6],Ut=lt[10],zt=lt[14],Bt=lt[3],Ht=lt[7],Gt=lt[11],Xt=lt[15];return ct[0]=ut*At+dt*Lt+ht*$t+ft*Bt,ct[4]=ut*Dt+dt*Mt+ht*Vt+ft*Ht,ct[8]=ut*jt+dt*Ot+ht*Ut+ft*Gt,ct[12]=ut*Ft+dt*Nt+ht*zt+ft*Xt,ct[1]=pt*At+mt*Lt+gt*$t+xt*Bt,ct[5]=pt*Dt+mt*Mt+gt*Vt+xt*Ht,ct[9]=pt*jt+mt*Ot+gt*Ut+xt*Gt,ct[13]=pt*Ft+mt*Nt+gt*zt+xt*Xt,ct[2]=yt*At+vt*Lt+St*$t+wt*Bt,ct[6]=yt*Dt+vt*Mt+St*Vt+wt*Ht,ct[10]=yt*jt+vt*Ot+St*Ut+wt*Gt,ct[14]=yt*Ft+vt*Nt+St*zt+wt*Xt,ct[3]=Et*At+Rt*Lt+Tt*$t+It*Bt,ct[7]=Et*Dt+Rt*Mt+Tt*Vt+It*Ht,ct[11]=Et*jt+Rt*Ot+Tt*Ut+It*Gt,ct[15]=Et*Ft+Rt*Nt+Tt*zt+It*Xt,this}multiplyScalar(rt){const it=this.elements;return it[0]*=rt,it[4]*=rt,it[8]*=rt,it[12]*=rt,it[1]*=rt,it[5]*=rt,it[9]*=rt,it[13]*=rt,it[2]*=rt,it[6]*=rt,it[10]*=rt,it[14]*=rt,it[3]*=rt,it[7]*=rt,it[11]*=rt,it[15]*=rt,this}determinant(){const rt=this.elements,it=rt[0],st=rt[4],lt=rt[8],ct=rt[12],ut=rt[1],dt=rt[5],ht=rt[9],ft=rt[13],pt=rt[2],mt=rt[6],gt=rt[10],xt=rt[14],yt=rt[3],vt=rt[7],St=rt[11],wt=rt[15];return yt*(+ct*ht*mt-lt*ft*mt-ct*dt*gt+st*ft*gt+lt*dt*xt-st*ht*xt)+vt*(+it*ht*xt-it*ft*gt+ct*ut*gt-lt*ut*xt+lt*ft*pt-ct*ht*pt)+St*(+it*ft*mt-it*dt*xt-ct*ut*mt+st*ut*xt+ct*dt*pt-st*ft*pt)+wt*(-lt*dt*pt-it*ht*mt+it*dt*gt+lt*ut*mt-st*ut*gt+st*ht*pt)}transpose(){const rt=this.elements;let it;return it=rt[1],rt[1]=rt[4],rt[4]=it,it=rt[2],rt[2]=rt[8],rt[8]=it,it=rt[6],rt[6]=rt[9],rt[9]=it,it=rt[3],rt[3]=rt[12],rt[12]=it,it=rt[7],rt[7]=rt[13],rt[13]=it,it=rt[11],rt[11]=rt[14],rt[14]=it,this}setPosition(rt,it,st){const lt=this.elements;return rt.isVector3?(lt[12]=rt.x,lt[13]=rt.y,lt[14]=rt.z):(lt[12]=rt,lt[13]=it,lt[14]=st),this}invert(){const rt=this.elements,it=rt[0],st=rt[1],lt=rt[2],ct=rt[3],ut=rt[4],dt=rt[5],ht=rt[6],ft=rt[7],pt=rt[8],mt=rt[9],gt=rt[10],xt=rt[11],yt=rt[12],vt=rt[13],St=rt[14],wt=rt[15],Et=mt*St*ft-vt*gt*ft+vt*ht*xt-dt*St*xt-mt*ht*wt+dt*gt*wt,Rt=yt*gt*ft-pt*St*ft-yt*ht*xt+ut*St*xt+pt*ht*wt-ut*gt*wt,Tt=pt*vt*ft-yt*mt*ft+yt*dt*xt-ut*vt*xt-pt*dt*wt+ut*mt*wt,It=yt*mt*ht-pt*vt*ht-yt*dt*gt+ut*vt*gt+pt*dt*St-ut*mt*St,At=it*Et+st*Rt+lt*Tt+ct*It;if(At===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Dt=1/At;return rt[0]=Et*Dt,rt[1]=(vt*gt*ct-mt*St*ct-vt*lt*xt+st*St*xt+mt*lt*wt-st*gt*wt)*Dt,rt[2]=(dt*St*ct-vt*ht*ct+vt*lt*ft-st*St*ft-dt*lt*wt+st*ht*wt)*Dt,rt[3]=(mt*ht*ct-dt*gt*ct-mt*lt*ft+st*gt*ft+dt*lt*xt-st*ht*xt)*Dt,rt[4]=Rt*Dt,rt[5]=(pt*St*ct-yt*gt*ct+yt*lt*xt-it*St*xt-pt*lt*wt+it*gt*wt)*Dt,rt[6]=(yt*ht*ct-ut*St*ct-yt*lt*ft+it*St*ft+ut*lt*wt-it*ht*wt)*Dt,rt[7]=(ut*gt*ct-pt*ht*ct+pt*lt*ft-it*gt*ft-ut*lt*xt+it*ht*xt)*Dt,rt[8]=Tt*Dt,rt[9]=(yt*mt*ct-pt*vt*ct-yt*st*xt+it*vt*xt+pt*st*wt-it*mt*wt)*Dt,rt[10]=(ut*vt*ct-yt*dt*ct+yt*st*ft-it*vt*ft-ut*st*wt+it*dt*wt)*Dt,rt[11]=(pt*dt*ct-ut*mt*ct-pt*st*ft+it*mt*ft+ut*st*xt-it*dt*xt)*Dt,rt[12]=It*Dt,rt[13]=(pt*vt*lt-yt*mt*lt+yt*st*gt-it*vt*gt-pt*st*St+it*mt*St)*Dt,rt[14]=(yt*dt*lt-ut*vt*lt-yt*st*ht+it*vt*ht+ut*st*St-it*dt*St)*Dt,rt[15]=(ut*mt*lt-pt*dt*lt+pt*st*ht-it*mt*ht-ut*st*gt+it*dt*gt)*Dt,this}scale(rt){const it=this.elements,st=rt.x,lt=rt.y,ct=rt.z;return it[0]*=st,it[4]*=lt,it[8]*=ct,it[1]*=st,it[5]*=lt,it[9]*=ct,it[2]*=st,it[6]*=lt,it[10]*=ct,it[3]*=st,it[7]*=lt,it[11]*=ct,this}getMaxScaleOnAxis(){const rt=this.elements,it=rt[0]*rt[0]+rt[1]*rt[1]+rt[2]*rt[2],st=rt[4]*rt[4]+rt[5]*rt[5]+rt[6]*rt[6],lt=rt[8]*rt[8]+rt[9]*rt[9]+rt[10]*rt[10];return Math.sqrt(Math.max(it,st,lt))}makeTranslation(rt,it,st){return rt.isVector3?this.set(1,0,0,rt.x,0,1,0,rt.y,0,0,1,rt.z,0,0,0,1):this.set(1,0,0,rt,0,1,0,it,0,0,1,st,0,0,0,1),this}makeRotationX(rt){const it=Math.cos(rt),st=Math.sin(rt);return this.set(1,0,0,0,0,it,-st,0,0,st,it,0,0,0,0,1),this}makeRotationY(rt){const it=Math.cos(rt),st=Math.sin(rt);return this.set(it,0,st,0,0,1,0,0,-st,0,it,0,0,0,0,1),this}makeRotationZ(rt){const it=Math.cos(rt),st=Math.sin(rt);return this.set(it,-st,0,0,st,it,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(rt,it){const st=Math.cos(it),lt=Math.sin(it),ct=1-st,ut=rt.x,dt=rt.y,ht=rt.z,ft=ct*ut,pt=ct*dt;return this.set(ft*ut+st,ft*dt-lt*ht,ft*ht+lt*dt,0,ft*dt+lt*ht,pt*dt+st,pt*ht-lt*ut,0,ft*ht-lt*dt,pt*ht+lt*ut,ct*ht*ht+st,0,0,0,0,1),this}makeScale(rt,it,st){return this.set(rt,0,0,0,0,it,0,0,0,0,st,0,0,0,0,1),this}makeShear(rt,it,st,lt,ct,ut){return this.set(1,st,ct,0,rt,1,ut,0,it,lt,1,0,0,0,0,1),this}compose(rt,it,st){const lt=this.elements,ct=it._x,ut=it._y,dt=it._z,ht=it._w,ft=ct+ct,pt=ut+ut,mt=dt+dt,gt=ct*ft,xt=ct*pt,yt=ct*mt,vt=ut*pt,St=ut*mt,wt=dt*mt,Et=ht*ft,Rt=ht*pt,Tt=ht*mt,It=st.x,At=st.y,Dt=st.z;return lt[0]=(1-(vt+wt))*It,lt[1]=(xt+Tt)*It,lt[2]=(yt-Rt)*It,lt[3]=0,lt[4]=(xt-Tt)*At,lt[5]=(1-(gt+wt))*At,lt[6]=(St+Et)*At,lt[7]=0,lt[8]=(yt+Rt)*Dt,lt[9]=(St-Et)*Dt,lt[10]=(1-(gt+vt))*Dt,lt[11]=0,lt[12]=rt.x,lt[13]=rt.y,lt[14]=rt.z,lt[15]=1,this}decompose(rt,it,st){const lt=this.elements;let ct=_v1$5.set(lt[0],lt[1],lt[2]).length();const ut=_v1$5.set(lt[4],lt[5],lt[6]).length(),dt=_v1$5.set(lt[8],lt[9],lt[10]).length();this.determinant()<0&&(ct=-ct),rt.x=lt[12],rt.y=lt[13],rt.z=lt[14],_m1$2.copy(this);const ft=1/ct,pt=1/ut,mt=1/dt;return _m1$2.elements[0]*=ft,_m1$2.elements[1]*=ft,_m1$2.elements[2]*=ft,_m1$2.elements[4]*=pt,_m1$2.elements[5]*=pt,_m1$2.elements[6]*=pt,_m1$2.elements[8]*=mt,_m1$2.elements[9]*=mt,_m1$2.elements[10]*=mt,it.setFromRotationMatrix(_m1$2),st.x=ct,st.y=ut,st.z=dt,this}makePerspective(rt,it,st,lt,ct,ut,dt=WebGLCoordinateSystem){const ht=this.elements,ft=2*ct/(it-rt),pt=2*ct/(st-lt),mt=(it+rt)/(it-rt),gt=(st+lt)/(st-lt);let xt,yt;if(dt===WebGLCoordinateSystem)xt=-(ut+ct)/(ut-ct),yt=-2*ut*ct/(ut-ct);else if(dt===WebGPUCoordinateSystem)xt=-ut/(ut-ct),yt=-ut*ct/(ut-ct);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+dt);return ht[0]=ft,ht[4]=0,ht[8]=mt,ht[12]=0,ht[1]=0,ht[5]=pt,ht[9]=gt,ht[13]=0,ht[2]=0,ht[6]=0,ht[10]=xt,ht[14]=yt,ht[3]=0,ht[7]=0,ht[11]=-1,ht[15]=0,this}makeOrthographic(rt,it,st,lt,ct,ut,dt=WebGLCoordinateSystem){const ht=this.elements,ft=1/(it-rt),pt=1/(st-lt),mt=1/(ut-ct),gt=(it+rt)*ft,xt=(st+lt)*pt;let yt,vt;if(dt===WebGLCoordinateSystem)yt=(ut+ct)*mt,vt=-2*mt;else if(dt===WebGPUCoordinateSystem)yt=ct*mt,vt=-1*mt;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+dt);return ht[0]=2*ft,ht[4]=0,ht[8]=0,ht[12]=-gt,ht[1]=0,ht[5]=2*pt,ht[9]=0,ht[13]=-xt,ht[2]=0,ht[6]=0,ht[10]=vt,ht[14]=-yt,ht[3]=0,ht[7]=0,ht[11]=0,ht[15]=1,this}equals(rt){const it=this.elements,st=rt.elements;for(let lt=0;lt<16;lt++)if(it[lt]!==st[lt])return!1;return!0}fromArray(rt,it=0){for(let st=0;st<16;st++)this.elements[st]=rt[st+it];return this}toArray(rt=[],it=0){const st=this.elements;return rt[it]=st[0],rt[it+1]=st[1],rt[it+2]=st[2],rt[it+3]=st[3],rt[it+4]=st[4],rt[it+5]=st[5],rt[it+6]=st[6],rt[it+7]=st[7],rt[it+8]=st[8],rt[it+9]=st[9],rt[it+10]=st[10],rt[it+11]=st[11],rt[it+12]=st[12],rt[it+13]=st[13],rt[it+14]=st[14],rt[it+15]=st[15],rt}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$1=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(rt=0,it=0,st=0,lt=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=rt,this._y=it,this._z=st,this._order=lt}get x(){return this._x}set x(rt){this._x=rt,this._onChangeCallback()}get y(){return this._y}set y(rt){this._y=rt,this._onChangeCallback()}get z(){return this._z}set z(rt){this._z=rt,this._onChangeCallback()}get order(){return this._order}set order(rt){this._order=rt,this._onChangeCallback()}set(rt,it,st,lt=this._order){return this._x=rt,this._y=it,this._z=st,this._order=lt,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(rt){return this._x=rt._x,this._y=rt._y,this._z=rt._z,this._order=rt._order,this._onChangeCallback(),this}setFromRotationMatrix(rt,it=this._order,st=!0){const lt=rt.elements,ct=lt[0],ut=lt[4],dt=lt[8],ht=lt[1],ft=lt[5],pt=lt[9],mt=lt[2],gt=lt[6],xt=lt[10];switch(it){case"XYZ":this._y=Math.asin(clamp(dt,-1,1)),Math.abs(dt)<.9999999?(this._x=Math.atan2(-pt,xt),this._z=Math.atan2(-ut,ct)):(this._x=Math.atan2(gt,ft),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(pt,-1,1)),Math.abs(pt)<.9999999?(this._y=Math.atan2(dt,xt),this._z=Math.atan2(ht,ft)):(this._y=Math.atan2(-mt,ct),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(gt,-1,1)),Math.abs(gt)<.9999999?(this._y=Math.atan2(-mt,xt),this._z=Math.atan2(-ut,ft)):(this._y=0,this._z=Math.atan2(ht,ct));break;case"ZYX":this._y=Math.asin(-clamp(mt,-1,1)),Math.abs(mt)<.9999999?(this._x=Math.atan2(gt,xt),this._z=Math.atan2(ht,ct)):(this._x=0,this._z=Math.atan2(-ut,ft));break;case"YZX":this._z=Math.asin(clamp(ht,-1,1)),Math.abs(ht)<.9999999?(this._x=Math.atan2(-pt,ft),this._y=Math.atan2(-mt,ct)):(this._x=0,this._y=Math.atan2(dt,xt));break;case"XZY":this._z=Math.asin(-clamp(ut,-1,1)),Math.abs(ut)<.9999999?(this._x=Math.atan2(gt,ft),this._y=Math.atan2(dt,ct)):(this._x=Math.atan2(-pt,xt),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+it)}return this._order=it,st===!0&&this._onChangeCallback(),this}setFromQuaternion(rt,it,st){return _matrix$1.makeRotationFromQuaternion(rt),this.setFromRotationMatrix(_matrix$1,it,st)}setFromVector3(rt,it=this._order){return this.set(rt.x,rt.y,rt.z,it)}reorder(rt){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,rt)}equals(rt){return rt._x===this._x&&rt._y===this._y&&rt._z===this._z&&rt._order===this._order}fromArray(rt){return this._x=rt[0],this._y=rt[1],this._z=rt[2],rt[3]!==void 0&&(this._order=rt[3]),this._onChangeCallback(),this}toArray(rt=[],it=0){return rt[it]=this._x,rt[it+1]=this._y,rt[it+2]=this._z,rt[it+3]=this._order,rt}_onChange(rt){return this._onChangeCallback=rt,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(rt){this.mask=(1<<rt|0)>>>0}enable(rt){this.mask|=1<<rt|0}enableAll(){this.mask=-1}toggle(rt){this.mask^=1<<rt|0}disable(rt){this.mask&=~(1<<rt|0)}disableAll(){this.mask=0}test(rt){return(this.mask&rt.mask)!==0}isEnabled(rt){return(this.mask&(1<<rt|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const rt=new Vector3,it=new Euler,st=new Quaternion,lt=new Vector3(1,1,1);function ct(){st.setFromEuler(it,!1)}function ut(){it.setFromQuaternion(st,void 0,!1)}it._onChange(ct),st._onChange(ut),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:rt},rotation:{configurable:!0,enumerable:!0,value:it},quaternion:{configurable:!0,enumerable:!0,value:st},scale:{configurable:!0,enumerable:!0,value:lt},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(rt){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(rt),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(rt){return this.quaternion.premultiply(rt),this}setRotationFromAxisAngle(rt,it){this.quaternion.setFromAxisAngle(rt,it)}setRotationFromEuler(rt){this.quaternion.setFromEuler(rt,!0)}setRotationFromMatrix(rt){this.quaternion.setFromRotationMatrix(rt)}setRotationFromQuaternion(rt){this.quaternion.copy(rt)}rotateOnAxis(rt,it){return _q1.setFromAxisAngle(rt,it),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(rt,it){return _q1.setFromAxisAngle(rt,it),this.quaternion.premultiply(_q1),this}rotateX(rt){return this.rotateOnAxis(_xAxis,rt)}rotateY(rt){return this.rotateOnAxis(_yAxis,rt)}rotateZ(rt){return this.rotateOnAxis(_zAxis,rt)}translateOnAxis(rt,it){return _v1$4.copy(rt).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(it)),this}translateX(rt){return this.translateOnAxis(_xAxis,rt)}translateY(rt){return this.translateOnAxis(_yAxis,rt)}translateZ(rt){return this.translateOnAxis(_zAxis,rt)}localToWorld(rt){return this.updateWorldMatrix(!0,!1),rt.applyMatrix4(this.matrixWorld)}worldToLocal(rt){return this.updateWorldMatrix(!0,!1),rt.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(rt,it,st){rt.isVector3?_target.copy(rt):_target.set(rt,it,st);const lt=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),lt&&(_m1$1.extractRotation(lt.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(rt){if(arguments.length>1){for(let it=0;it<arguments.length;it++)this.add(arguments[it]);return this}return rt===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",rt),this):(rt&&rt.isObject3D?(rt.parent!==null&&rt.parent.remove(rt),rt.parent=this,this.children.push(rt),rt.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",rt),this)}remove(rt){if(arguments.length>1){for(let st=0;st<arguments.length;st++)this.remove(arguments[st]);return this}const it=this.children.indexOf(rt);return it!==-1&&(rt.parent=null,this.children.splice(it,1),rt.dispatchEvent(_removedEvent)),this}removeFromParent(){const rt=this.parent;return rt!==null&&rt.remove(this),this}clear(){return this.remove(...this.children)}attach(rt){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),rt.parent!==null&&(rt.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(rt.parent.matrixWorld)),rt.applyMatrix4(_m1$1),this.add(rt),rt.updateWorldMatrix(!1,!0),this}getObjectById(rt){return this.getObjectByProperty("id",rt)}getObjectByName(rt){return this.getObjectByProperty("name",rt)}getObjectByProperty(rt,it){if(this[rt]===it)return this;for(let st=0,lt=this.children.length;st<lt;st++){const ut=this.children[st].getObjectByProperty(rt,it);if(ut!==void 0)return ut}}getObjectsByProperty(rt,it,st=[]){this[rt]===it&&st.push(this);const lt=this.children;for(let ct=0,ut=lt.length;ct<ut;ct++)lt[ct].getObjectsByProperty(rt,it,st);return st}getWorldPosition(rt){return this.updateWorldMatrix(!0,!1),rt.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(rt){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,rt,_scale$2),rt}getWorldScale(rt){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,rt),rt}getWorldDirection(rt){this.updateWorldMatrix(!0,!1);const it=this.matrixWorld.elements;return rt.set(it[8],it[9],it[10]).normalize()}raycast(){}traverse(rt){rt(this);const it=this.children;for(let st=0,lt=it.length;st<lt;st++)it[st].traverse(rt)}traverseVisible(rt){if(this.visible===!1)return;rt(this);const it=this.children;for(let st=0,lt=it.length;st<lt;st++)it[st].traverseVisible(rt)}traverseAncestors(rt){const it=this.parent;it!==null&&(rt(it),it.traverseAncestors(rt))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(rt){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||rt)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,rt=!0);const it=this.children;for(let st=0,lt=it.length;st<lt;st++){const ct=it[st];(ct.matrixWorldAutoUpdate===!0||rt===!0)&&ct.updateMatrixWorld(rt)}}updateWorldMatrix(rt,it){const st=this.parent;if(rt===!0&&st!==null&&st.matrixWorldAutoUpdate===!0&&st.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),it===!0){const lt=this.children;for(let ct=0,ut=lt.length;ct<ut;ct++){const dt=lt[ct];dt.matrixWorldAutoUpdate===!0&&dt.updateWorldMatrix(!1,!0)}}}toJSON(rt){const it=rt===void 0||typeof rt=="string",st={};it&&(rt={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},st.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const lt={};lt.uuid=this.uuid,lt.type=this.type,this.name!==""&&(lt.name=this.name),this.castShadow===!0&&(lt.castShadow=!0),this.receiveShadow===!0&&(lt.receiveShadow=!0),this.visible===!1&&(lt.visible=!1),this.frustumCulled===!1&&(lt.frustumCulled=!1),this.renderOrder!==0&&(lt.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(lt.userData=this.userData),lt.layers=this.layers.mask,lt.matrix=this.matrix.toArray(),lt.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(lt.matrixAutoUpdate=!1),this.isInstancedMesh&&(lt.type="InstancedMesh",lt.count=this.count,lt.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(lt.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(lt.type="BatchedMesh",lt.perObjectFrustumCulled=this.perObjectFrustumCulled,lt.sortObjects=this.sortObjects,lt.drawRanges=this._drawRanges,lt.reservedRanges=this._reservedRanges,lt.visibility=this._visibility,lt.active=this._active,lt.bounds=this._bounds.map(dt=>({boxInitialized:dt.boxInitialized,boxMin:dt.box.min.toArray(),boxMax:dt.box.max.toArray(),sphereInitialized:dt.sphereInitialized,sphereRadius:dt.sphere.radius,sphereCenter:dt.sphere.center.toArray()})),lt.maxGeometryCount=this._maxGeometryCount,lt.maxVertexCount=this._maxVertexCount,lt.maxIndexCount=this._maxIndexCount,lt.geometryInitialized=this._geometryInitialized,lt.geometryCount=this._geometryCount,lt.matricesTexture=this._matricesTexture.toJSON(rt),this.boundingSphere!==null&&(lt.boundingSphere={center:lt.boundingSphere.center.toArray(),radius:lt.boundingSphere.radius}),this.boundingBox!==null&&(lt.boundingBox={min:lt.boundingBox.min.toArray(),max:lt.boundingBox.max.toArray()}));function ct(dt,ht){return dt[ht.uuid]===void 0&&(dt[ht.uuid]=ht.toJSON(rt)),ht.uuid}if(this.isScene)this.background&&(this.background.isColor?lt.background=this.background.toJSON():this.background.isTexture&&(lt.background=this.background.toJSON(rt).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(lt.environment=this.environment.toJSON(rt).uuid);else if(this.isMesh||this.isLine||this.isPoints){lt.geometry=ct(rt.geometries,this.geometry);const dt=this.geometry.parameters;if(dt!==void 0&&dt.shapes!==void 0){const ht=dt.shapes;if(Array.isArray(ht))for(let ft=0,pt=ht.length;ft<pt;ft++){const mt=ht[ft];ct(rt.shapes,mt)}else ct(rt.shapes,ht)}}if(this.isSkinnedMesh&&(lt.bindMode=this.bindMode,lt.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(ct(rt.skeletons,this.skeleton),lt.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const dt=[];for(let ht=0,ft=this.material.length;ht<ft;ht++)dt.push(ct(rt.materials,this.material[ht]));lt.material=dt}else lt.material=ct(rt.materials,this.material);if(this.children.length>0){lt.children=[];for(let dt=0;dt<this.children.length;dt++)lt.children.push(this.children[dt].toJSON(rt).object)}if(this.animations.length>0){lt.animations=[];for(let dt=0;dt<this.animations.length;dt++){const ht=this.animations[dt];lt.animations.push(ct(rt.animations,ht))}}if(it){const dt=ut(rt.geometries),ht=ut(rt.materials),ft=ut(rt.textures),pt=ut(rt.images),mt=ut(rt.shapes),gt=ut(rt.skeletons),xt=ut(rt.animations),yt=ut(rt.nodes);dt.length>0&&(st.geometries=dt),ht.length>0&&(st.materials=ht),ft.length>0&&(st.textures=ft),pt.length>0&&(st.images=pt),mt.length>0&&(st.shapes=mt),gt.length>0&&(st.skeletons=gt),xt.length>0&&(st.animations=xt),yt.length>0&&(st.nodes=yt)}return st.object=lt,st;function ut(dt){const ht=[];for(const ft in dt){const pt=dt[ft];delete pt.metadata,ht.push(pt)}return ht}}clone(rt){return new this.constructor().copy(this,rt)}copy(rt,it=!0){if(this.name=rt.name,this.up.copy(rt.up),this.position.copy(rt.position),this.rotation.order=rt.rotation.order,this.quaternion.copy(rt.quaternion),this.scale.copy(rt.scale),this.matrix.copy(rt.matrix),this.matrixWorld.copy(rt.matrixWorld),this.matrixAutoUpdate=rt.matrixAutoUpdate,this.matrixWorldAutoUpdate=rt.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=rt.matrixWorldNeedsUpdate,this.layers.mask=rt.layers.mask,this.visible=rt.visible,this.castShadow=rt.castShadow,this.receiveShadow=rt.receiveShadow,this.frustumCulled=rt.frustumCulled,this.renderOrder=rt.renderOrder,this.animations=rt.animations.slice(),this.userData=JSON.parse(JSON.stringify(rt.userData)),it===!0)for(let st=0;st<rt.children.length;st++){const lt=rt.children[st];this.add(lt.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;class Triangle{constructor(rt=new Vector3,it=new Vector3,st=new Vector3){this.a=rt,this.b=it,this.c=st}static getNormal(rt,it,st,lt){lt.subVectors(st,it),_v0$1.subVectors(rt,it),lt.cross(_v0$1);const ct=lt.lengthSq();return ct>0?lt.multiplyScalar(1/Math.sqrt(ct)):lt.set(0,0,0)}static getBarycoord(rt,it,st,lt,ct){_v0$1.subVectors(lt,it),_v1$3.subVectors(st,it),_v2$2.subVectors(rt,it);const ut=_v0$1.dot(_v0$1),dt=_v0$1.dot(_v1$3),ht=_v0$1.dot(_v2$2),ft=_v1$3.dot(_v1$3),pt=_v1$3.dot(_v2$2),mt=ut*ft-dt*dt;if(mt===0)return ct.set(0,0,0),null;const gt=1/mt,xt=(ft*ht-dt*pt)*gt,yt=(ut*pt-dt*ht)*gt;return ct.set(1-xt-yt,yt,xt)}static containsPoint(rt,it,st,lt){return this.getBarycoord(rt,it,st,lt,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(rt,it,st,lt,ct,ut,dt,ht){return this.getBarycoord(rt,it,st,lt,_v3$2)===null?(ht.x=0,ht.y=0,"z"in ht&&(ht.z=0),"w"in ht&&(ht.w=0),null):(ht.setScalar(0),ht.addScaledVector(ct,_v3$2.x),ht.addScaledVector(ut,_v3$2.y),ht.addScaledVector(dt,_v3$2.z),ht)}static isFrontFacing(rt,it,st,lt){return _v0$1.subVectors(st,it),_v1$3.subVectors(rt,it),_v0$1.cross(_v1$3).dot(lt)<0}set(rt,it,st){return this.a.copy(rt),this.b.copy(it),this.c.copy(st),this}setFromPointsAndIndices(rt,it,st,lt){return this.a.copy(rt[it]),this.b.copy(rt[st]),this.c.copy(rt[lt]),this}setFromAttributeAndIndices(rt,it,st,lt){return this.a.fromBufferAttribute(rt,it),this.b.fromBufferAttribute(rt,st),this.c.fromBufferAttribute(rt,lt),this}clone(){return new this.constructor().copy(this)}copy(rt){return this.a.copy(rt.a),this.b.copy(rt.b),this.c.copy(rt.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(rt){return rt.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(rt){return Triangle.getNormal(this.a,this.b,this.c,rt)}getPlane(rt){return rt.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(rt,it){return Triangle.getBarycoord(rt,this.a,this.b,this.c,it)}getInterpolation(rt,it,st,lt,ct){return Triangle.getInterpolation(rt,this.a,this.b,this.c,it,st,lt,ct)}containsPoint(rt){return Triangle.containsPoint(rt,this.a,this.b,this.c)}isFrontFacing(rt){return Triangle.isFrontFacing(this.a,this.b,this.c,rt)}intersectsBox(rt){return rt.intersectsTriangle(this)}closestPointToPoint(rt,it){const st=this.a,lt=this.b,ct=this.c;let ut,dt;_vab.subVectors(lt,st),_vac.subVectors(ct,st),_vap.subVectors(rt,st);const ht=_vab.dot(_vap),ft=_vac.dot(_vap);if(ht<=0&&ft<=0)return it.copy(st);_vbp.subVectors(rt,lt);const pt=_vab.dot(_vbp),mt=_vac.dot(_vbp);if(pt>=0&&mt<=pt)return it.copy(lt);const gt=ht*mt-pt*ft;if(gt<=0&&ht>=0&&pt<=0)return ut=ht/(ht-pt),it.copy(st).addScaledVector(_vab,ut);_vcp.subVectors(rt,ct);const xt=_vab.dot(_vcp),yt=_vac.dot(_vcp);if(yt>=0&&xt<=yt)return it.copy(ct);const vt=xt*ft-ht*yt;if(vt<=0&&ft>=0&&yt<=0)return dt=ft/(ft-yt),it.copy(st).addScaledVector(_vac,dt);const St=pt*yt-xt*mt;if(St<=0&&mt-pt>=0&&xt-yt>=0)return _vbc.subVectors(ct,lt),dt=(mt-pt)/(mt-pt+(xt-yt)),it.copy(lt).addScaledVector(_vbc,dt);const wt=1/(St+vt+gt);return ut=vt*wt,dt=gt*wt,it.copy(st).addScaledVector(_vab,ut).addScaledVector(_vac,dt)}equals(rt){return rt.a.equals(this.a)&&rt.b.equals(this.b)&&rt.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(nt,rt,it){return it<0&&(it+=1),it>1&&(it-=1),it<1/6?nt+(rt-nt)*6*it:it<1/2?rt:it<2/3?nt+(rt-nt)*6*(2/3-it):nt}class Color{constructor(rt,it,st){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(rt,it,st)}set(rt,it,st){if(it===void 0&&st===void 0){const lt=rt;lt&&lt.isColor?this.copy(lt):typeof lt=="number"?this.setHex(lt):typeof lt=="string"&&this.setStyle(lt)}else this.setRGB(rt,it,st);return this}setScalar(rt){return this.r=rt,this.g=rt,this.b=rt,this}setHex(rt,it=SRGBColorSpace){return rt=Math.floor(rt),this.r=(rt>>16&255)/255,this.g=(rt>>8&255)/255,this.b=(rt&255)/255,ColorManagement.toWorkingColorSpace(this,it),this}setRGB(rt,it,st,lt=ColorManagement.workingColorSpace){return this.r=rt,this.g=it,this.b=st,ColorManagement.toWorkingColorSpace(this,lt),this}setHSL(rt,it,st,lt=ColorManagement.workingColorSpace){if(rt=euclideanModulo(rt,1),it=clamp(it,0,1),st=clamp(st,0,1),it===0)this.r=this.g=this.b=st;else{const ct=st<=.5?st*(1+it):st+it-st*it,ut=2*st-ct;this.r=hue2rgb(ut,ct,rt+1/3),this.g=hue2rgb(ut,ct,rt),this.b=hue2rgb(ut,ct,rt-1/3)}return ColorManagement.toWorkingColorSpace(this,lt),this}setStyle(rt,it=SRGBColorSpace){function st(ct){ct!==void 0&&parseFloat(ct)<1&&console.warn("THREE.Color: Alpha component of "+rt+" will be ignored.")}let lt;if(lt=/^(\w+)\(([^\)]*)\)/.exec(rt)){let ct;const ut=lt[1],dt=lt[2];switch(ut){case"rgb":case"rgba":if(ct=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(dt))return st(ct[4]),this.setRGB(Math.min(255,parseInt(ct[1],10))/255,Math.min(255,parseInt(ct[2],10))/255,Math.min(255,parseInt(ct[3],10))/255,it);if(ct=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(dt))return st(ct[4]),this.setRGB(Math.min(100,parseInt(ct[1],10))/100,Math.min(100,parseInt(ct[2],10))/100,Math.min(100,parseInt(ct[3],10))/100,it);break;case"hsl":case"hsla":if(ct=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(dt))return st(ct[4]),this.setHSL(parseFloat(ct[1])/360,parseFloat(ct[2])/100,parseFloat(ct[3])/100,it);break;default:console.warn("THREE.Color: Unknown color model "+rt)}}else if(lt=/^\#([A-Fa-f\d]+)$/.exec(rt)){const ct=lt[1],ut=ct.length;if(ut===3)return this.setRGB(parseInt(ct.charAt(0),16)/15,parseInt(ct.charAt(1),16)/15,parseInt(ct.charAt(2),16)/15,it);if(ut===6)return this.setHex(parseInt(ct,16),it);console.warn("THREE.Color: Invalid hex color "+rt)}else if(rt&&rt.length>0)return this.setColorName(rt,it);return this}setColorName(rt,it=SRGBColorSpace){const st=_colorKeywords[rt.toLowerCase()];return st!==void 0?this.setHex(st,it):console.warn("THREE.Color: Unknown color "+rt),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(rt){return this.r=rt.r,this.g=rt.g,this.b=rt.b,this}copySRGBToLinear(rt){return this.r=SRGBToLinear(rt.r),this.g=SRGBToLinear(rt.g),this.b=SRGBToLinear(rt.b),this}copyLinearToSRGB(rt){return this.r=LinearToSRGB(rt.r),this.g=LinearToSRGB(rt.g),this.b=LinearToSRGB(rt.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(rt=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color$1.copy(this),rt),Math.round(clamp(_color$1.r*255,0,255))*65536+Math.round(clamp(_color$1.g*255,0,255))*256+Math.round(clamp(_color$1.b*255,0,255))}getHexString(rt=SRGBColorSpace){return("000000"+this.getHex(rt).toString(16)).slice(-6)}getHSL(rt,it=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color$1.copy(this),it);const st=_color$1.r,lt=_color$1.g,ct=_color$1.b,ut=Math.max(st,lt,ct),dt=Math.min(st,lt,ct);let ht,ft;const pt=(dt+ut)/2;if(dt===ut)ht=0,ft=0;else{const mt=ut-dt;switch(ft=pt<=.5?mt/(ut+dt):mt/(2-ut-dt),ut){case st:ht=(lt-ct)/mt+(lt<ct?6:0);break;case lt:ht=(ct-st)/mt+2;break;case ct:ht=(st-lt)/mt+4;break}ht/=6}return rt.h=ht,rt.s=ft,rt.l=pt,rt}getRGB(rt,it=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color$1.copy(this),it),rt.r=_color$1.r,rt.g=_color$1.g,rt.b=_color$1.b,rt}getStyle(rt=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color$1.copy(this),rt);const it=_color$1.r,st=_color$1.g,lt=_color$1.b;return rt!==SRGBColorSpace?`color(${rt} ${it.toFixed(3)} ${st.toFixed(3)} ${lt.toFixed(3)})`:`rgb(${Math.round(it*255)},${Math.round(st*255)},${Math.round(lt*255)})`}offsetHSL(rt,it,st){return this.getHSL(_hslA),this.setHSL(_hslA.h+rt,_hslA.s+it,_hslA.l+st)}add(rt){return this.r+=rt.r,this.g+=rt.g,this.b+=rt.b,this}addColors(rt,it){return this.r=rt.r+it.r,this.g=rt.g+it.g,this.b=rt.b+it.b,this}addScalar(rt){return this.r+=rt,this.g+=rt,this.b+=rt,this}sub(rt){return this.r=Math.max(0,this.r-rt.r),this.g=Math.max(0,this.g-rt.g),this.b=Math.max(0,this.b-rt.b),this}multiply(rt){return this.r*=rt.r,this.g*=rt.g,this.b*=rt.b,this}multiplyScalar(rt){return this.r*=rt,this.g*=rt,this.b*=rt,this}lerp(rt,it){return this.r+=(rt.r-this.r)*it,this.g+=(rt.g-this.g)*it,this.b+=(rt.b-this.b)*it,this}lerpColors(rt,it,st){return this.r=rt.r+(it.r-rt.r)*st,this.g=rt.g+(it.g-rt.g)*st,this.b=rt.b+(it.b-rt.b)*st,this}lerpHSL(rt,it){this.getHSL(_hslA),rt.getHSL(_hslB);const st=lerp(_hslA.h,_hslB.h,it),lt=lerp(_hslA.s,_hslB.s,it),ct=lerp(_hslA.l,_hslB.l,it);return this.setHSL(st,lt,ct),this}setFromVector3(rt){return this.r=rt.x,this.g=rt.y,this.b=rt.z,this}applyMatrix3(rt){const it=this.r,st=this.g,lt=this.b,ct=rt.elements;return this.r=ct[0]*it+ct[3]*st+ct[6]*lt,this.g=ct[1]*it+ct[4]*st+ct[7]*lt,this.b=ct[2]*it+ct[5]*st+ct[8]*lt,this}equals(rt){return rt.r===this.r&&rt.g===this.g&&rt.b===this.b}fromArray(rt,it=0){return this.r=rt[it],this.g=rt[it+1],this.b=rt[it+2],this}toArray(rt=[],it=0){return rt[it]=this.r,rt[it+1]=this.g,rt[it+2]=this.b,rt}fromBufferAttribute(rt,it){return this.r=rt.getX(it),this.g=rt.getY(it),this.b=rt.getZ(it),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color$1=new Color;Color.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(rt){this._alphaTest>0!=rt>0&&this.version++,this._alphaTest=rt}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(rt){if(rt!==void 0)for(const it in rt){const st=rt[it];if(st===void 0){console.warn(`THREE.Material: parameter '${it}' has value of undefined.`);continue}const lt=this[it];if(lt===void 0){console.warn(`THREE.Material: '${it}' is not a property of THREE.${this.type}.`);continue}lt&&lt.isColor?lt.set(st):lt&&lt.isVector3&&st&&st.isVector3?lt.copy(st):this[it]=st}}toJSON(rt){const it=rt===void 0||typeof rt=="string";it&&(rt={textures:{},images:{}});const st={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};st.uuid=this.uuid,st.type=this.type,this.name!==""&&(st.name=this.name),this.color&&this.color.isColor&&(st.color=this.color.getHex()),this.roughness!==void 0&&(st.roughness=this.roughness),this.metalness!==void 0&&(st.metalness=this.metalness),this.sheen!==void 0&&(st.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(st.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(st.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(st.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(st.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(st.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(st.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(st.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(st.shininess=this.shininess),this.clearcoat!==void 0&&(st.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(st.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(st.clearcoatMap=this.clearcoatMap.toJSON(rt).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(st.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(rt).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(st.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(rt).uuid,st.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(st.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(st.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(st.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(st.iridescenceMap=this.iridescenceMap.toJSON(rt).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(st.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(rt).uuid),this.anisotropy!==void 0&&(st.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(st.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(st.anisotropyMap=this.anisotropyMap.toJSON(rt).uuid),this.map&&this.map.isTexture&&(st.map=this.map.toJSON(rt).uuid),this.matcap&&this.matcap.isTexture&&(st.matcap=this.matcap.toJSON(rt).uuid),this.alphaMap&&this.alphaMap.isTexture&&(st.alphaMap=this.alphaMap.toJSON(rt).uuid),this.lightMap&&this.lightMap.isTexture&&(st.lightMap=this.lightMap.toJSON(rt).uuid,st.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(st.aoMap=this.aoMap.toJSON(rt).uuid,st.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(st.bumpMap=this.bumpMap.toJSON(rt).uuid,st.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(st.normalMap=this.normalMap.toJSON(rt).uuid,st.normalMapType=this.normalMapType,st.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(st.displacementMap=this.displacementMap.toJSON(rt).uuid,st.displacementScale=this.displacementScale,st.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(st.roughnessMap=this.roughnessMap.toJSON(rt).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(st.metalnessMap=this.metalnessMap.toJSON(rt).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(st.emissiveMap=this.emissiveMap.toJSON(rt).uuid),this.specularMap&&this.specularMap.isTexture&&(st.specularMap=this.specularMap.toJSON(rt).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(st.specularIntensityMap=this.specularIntensityMap.toJSON(rt).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(st.specularColorMap=this.specularColorMap.toJSON(rt).uuid),this.envMap&&this.envMap.isTexture&&(st.envMap=this.envMap.toJSON(rt).uuid,this.combine!==void 0&&(st.combine=this.combine)),this.envMapIntensity!==void 0&&(st.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(st.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(st.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(st.gradientMap=this.gradientMap.toJSON(rt).uuid),this.transmission!==void 0&&(st.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(st.transmissionMap=this.transmissionMap.toJSON(rt).uuid),this.thickness!==void 0&&(st.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(st.thicknessMap=this.thicknessMap.toJSON(rt).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(st.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(st.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(st.size=this.size),this.shadowSide!==null&&(st.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(st.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(st.blending=this.blending),this.side!==FrontSide&&(st.side=this.side),this.vertexColors===!0&&(st.vertexColors=!0),this.opacity<1&&(st.opacity=this.opacity),this.transparent===!0&&(st.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(st.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(st.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(st.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(st.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(st.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(st.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(st.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(st.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(st.depthFunc=this.depthFunc),this.depthTest===!1&&(st.depthTest=this.depthTest),this.depthWrite===!1&&(st.depthWrite=this.depthWrite),this.colorWrite===!1&&(st.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(st.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(st.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(st.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(st.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(st.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(st.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(st.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(st.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(st.rotation=this.rotation),this.polygonOffset===!0&&(st.polygonOffset=!0),this.polygonOffsetFactor!==0&&(st.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(st.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(st.linewidth=this.linewidth),this.dashSize!==void 0&&(st.dashSize=this.dashSize),this.gapSize!==void 0&&(st.gapSize=this.gapSize),this.scale!==void 0&&(st.scale=this.scale),this.dithering===!0&&(st.dithering=!0),this.alphaTest>0&&(st.alphaTest=this.alphaTest),this.alphaHash===!0&&(st.alphaHash=!0),this.alphaToCoverage===!0&&(st.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(st.premultipliedAlpha=!0),this.forceSinglePass===!0&&(st.forceSinglePass=!0),this.wireframe===!0&&(st.wireframe=!0),this.wireframeLinewidth>1&&(st.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(st.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(st.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(st.flatShading=!0),this.visible===!1&&(st.visible=!1),this.toneMapped===!1&&(st.toneMapped=!1),this.fog===!1&&(st.fog=!1),Object.keys(this.userData).length>0&&(st.userData=this.userData);function lt(ct){const ut=[];for(const dt in ct){const ht=ct[dt];delete ht.metadata,ut.push(ht)}return ut}if(it){const ct=lt(rt.textures),ut=lt(rt.images);ct.length>0&&(st.textures=ct),ut.length>0&&(st.images=ut)}return st}clone(){return new this.constructor().copy(this)}copy(rt){this.name=rt.name,this.blending=rt.blending,this.side=rt.side,this.vertexColors=rt.vertexColors,this.opacity=rt.opacity,this.transparent=rt.transparent,this.blendSrc=rt.blendSrc,this.blendDst=rt.blendDst,this.blendEquation=rt.blendEquation,this.blendSrcAlpha=rt.blendSrcAlpha,this.blendDstAlpha=rt.blendDstAlpha,this.blendEquationAlpha=rt.blendEquationAlpha,this.blendColor.copy(rt.blendColor),this.blendAlpha=rt.blendAlpha,this.depthFunc=rt.depthFunc,this.depthTest=rt.depthTest,this.depthWrite=rt.depthWrite,this.stencilWriteMask=rt.stencilWriteMask,this.stencilFunc=rt.stencilFunc,this.stencilRef=rt.stencilRef,this.stencilFuncMask=rt.stencilFuncMask,this.stencilFail=rt.stencilFail,this.stencilZFail=rt.stencilZFail,this.stencilZPass=rt.stencilZPass,this.stencilWrite=rt.stencilWrite;const it=rt.clippingPlanes;let st=null;if(it!==null){const lt=it.length;st=new Array(lt);for(let ct=0;ct!==lt;++ct)st[ct]=it[ct].clone()}return this.clippingPlanes=st,this.clipIntersection=rt.clipIntersection,this.clipShadows=rt.clipShadows,this.shadowSide=rt.shadowSide,this.colorWrite=rt.colorWrite,this.precision=rt.precision,this.polygonOffset=rt.polygonOffset,this.polygonOffsetFactor=rt.polygonOffsetFactor,this.polygonOffsetUnits=rt.polygonOffsetUnits,this.dithering=rt.dithering,this.alphaTest=rt.alphaTest,this.alphaHash=rt.alphaHash,this.alphaToCoverage=rt.alphaToCoverage,this.premultipliedAlpha=rt.premultipliedAlpha,this.forceSinglePass=rt.forceSinglePass,this.visible=rt.visible,this.toneMapped=rt.toneMapped,this.userData=JSON.parse(JSON.stringify(rt.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(rt){rt===!0&&this.version++}}class MeshBasicMaterial extends Material{constructor(rt){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.map=rt.map,this.lightMap=rt.lightMap,this.lightMapIntensity=rt.lightMapIntensity,this.aoMap=rt.aoMap,this.aoMapIntensity=rt.aoMapIntensity,this.specularMap=rt.specularMap,this.alphaMap=rt.alphaMap,this.envMap=rt.envMap,this.combine=rt.combine,this.reflectivity=rt.reflectivity,this.refractionRatio=rt.refractionRatio,this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this.wireframeLinecap=rt.wireframeLinecap,this.wireframeLinejoin=rt.wireframeLinejoin,this.fog=rt.fog,this}}const _tables=_generateTables();function _generateTables(){const nt=new ArrayBuffer(4),rt=new Float32Array(nt),it=new Uint32Array(nt),st=new Uint32Array(512),lt=new Uint32Array(512);for(let ht=0;ht<256;++ht){const ft=ht-127;ft<-27?(st[ht]=0,st[ht|256]=32768,lt[ht]=24,lt[ht|256]=24):ft<-14?(st[ht]=1024>>-ft-14,st[ht|256]=1024>>-ft-14|32768,lt[ht]=-ft-1,lt[ht|256]=-ft-1):ft<=15?(st[ht]=ft+15<<10,st[ht|256]=ft+15<<10|32768,lt[ht]=13,lt[ht|256]=13):ft<128?(st[ht]=31744,st[ht|256]=64512,lt[ht]=24,lt[ht|256]=24):(st[ht]=31744,st[ht|256]=64512,lt[ht]=13,lt[ht|256]=13)}const ct=new Uint32Array(2048),ut=new Uint32Array(64),dt=new Uint32Array(64);for(let ht=1;ht<1024;++ht){let ft=ht<<13,pt=0;for(;!(ft&8388608);)ft<<=1,pt-=8388608;ft&=-8388609,pt+=947912704,ct[ht]=ft|pt}for(let ht=1024;ht<2048;++ht)ct[ht]=939524096+(ht-1024<<13);for(let ht=1;ht<31;++ht)ut[ht]=ht<<23;ut[31]=1199570944,ut[32]=2147483648;for(let ht=33;ht<63;++ht)ut[ht]=2147483648+(ht-32<<23);ut[63]=3347054592;for(let ht=1;ht<64;++ht)ht!==32&&(dt[ht]=1024);return{floatView:rt,uint32View:it,baseTable:st,shiftTable:lt,mantissaTable:ct,exponentTable:ut,offsetTable:dt}}function toHalfFloat(nt){Math.abs(nt)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),nt=clamp(nt,-65504,65504),_tables.floatView[0]=nt;const rt=_tables.uint32View[0],it=rt>>23&511;return _tables.baseTable[it]+((rt&8388607)>>_tables.shiftTable[it])}function fromHalfFloat(nt){const rt=nt>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[rt]+(nt&1023)]+_tables.exponentTable[rt],_tables.floatView[0]}const DataUtils={toHalfFloat,fromHalfFloat},_vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(rt,it,st=!1){if(Array.isArray(rt))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=rt,this.itemSize=it,this.count=rt!==void 0?rt.length/it:0,this.normalized=st,this.usage=StaticDrawUsage,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(rt){rt===!0&&this.version++}get updateRange(){return warnOnce("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(rt){return this.usage=rt,this}addUpdateRange(rt,it){this.updateRanges.push({start:rt,count:it})}clearUpdateRanges(){this.updateRanges.length=0}copy(rt){return this.name=rt.name,this.array=new rt.array.constructor(rt.array),this.itemSize=rt.itemSize,this.count=rt.count,this.normalized=rt.normalized,this.usage=rt.usage,this.gpuType=rt.gpuType,this}copyAt(rt,it,st){rt*=this.itemSize,st*=it.itemSize;for(let lt=0,ct=this.itemSize;lt<ct;lt++)this.array[rt+lt]=it.array[st+lt];return this}copyArray(rt){return this.array.set(rt),this}applyMatrix3(rt){if(this.itemSize===2)for(let it=0,st=this.count;it<st;it++)_vector2$1.fromBufferAttribute(this,it),_vector2$1.applyMatrix3(rt),this.setXY(it,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let it=0,st=this.count;it<st;it++)_vector$9.fromBufferAttribute(this,it),_vector$9.applyMatrix3(rt),this.setXYZ(it,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(rt){for(let it=0,st=this.count;it<st;it++)_vector$9.fromBufferAttribute(this,it),_vector$9.applyMatrix4(rt),this.setXYZ(it,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(rt){for(let it=0,st=this.count;it<st;it++)_vector$9.fromBufferAttribute(this,it),_vector$9.applyNormalMatrix(rt),this.setXYZ(it,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(rt){for(let it=0,st=this.count;it<st;it++)_vector$9.fromBufferAttribute(this,it),_vector$9.transformDirection(rt),this.setXYZ(it,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(rt,it=0){return this.array.set(rt,it),this}getComponent(rt,it){let st=this.array[rt*this.itemSize+it];return this.normalized&&(st=denormalize(st,this.array)),st}setComponent(rt,it,st){return this.normalized&&(st=normalize(st,this.array)),this.array[rt*this.itemSize+it]=st,this}getX(rt){let it=this.array[rt*this.itemSize];return this.normalized&&(it=denormalize(it,this.array)),it}setX(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize]=it,this}getY(rt){let it=this.array[rt*this.itemSize+1];return this.normalized&&(it=denormalize(it,this.array)),it}setY(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize+1]=it,this}getZ(rt){let it=this.array[rt*this.itemSize+2];return this.normalized&&(it=denormalize(it,this.array)),it}setZ(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize+2]=it,this}getW(rt){let it=this.array[rt*this.itemSize+3];return this.normalized&&(it=denormalize(it,this.array)),it}setW(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize+3]=it,this}setXY(rt,it,st){return rt*=this.itemSize,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array)),this.array[rt+0]=it,this.array[rt+1]=st,this}setXYZ(rt,it,st,lt){return rt*=this.itemSize,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array),lt=normalize(lt,this.array)),this.array[rt+0]=it,this.array[rt+1]=st,this.array[rt+2]=lt,this}setXYZW(rt,it,st,lt,ct){return rt*=this.itemSize,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array),lt=normalize(lt,this.array),ct=normalize(ct,this.array)),this.array[rt+0]=it,this.array[rt+1]=st,this.array[rt+2]=lt,this.array[rt+3]=ct,this}onUpload(rt){return this.onUploadCallback=rt,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const rt={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(rt.name=this.name),this.usage!==StaticDrawUsage&&(rt.usage=this.usage),rt}}class Int8BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Int8Array(rt),it,st)}}class Uint8BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Uint8Array(rt),it,st)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Uint8ClampedArray(rt),it,st)}}class Int16BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Int16Array(rt),it,st)}}class Uint16BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Uint16Array(rt),it,st)}}class Int32BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Int32Array(rt),it,st)}}class Uint32BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Uint32Array(rt),it,st)}}class Float16BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Uint16Array(rt),it,st),this.isFloat16BufferAttribute=!0}getX(rt){let it=fromHalfFloat(this.array[rt*this.itemSize]);return this.normalized&&(it=denormalize(it,this.array)),it}setX(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize]=toHalfFloat(it),this}getY(rt){let it=fromHalfFloat(this.array[rt*this.itemSize+1]);return this.normalized&&(it=denormalize(it,this.array)),it}setY(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize+1]=toHalfFloat(it),this}getZ(rt){let it=fromHalfFloat(this.array[rt*this.itemSize+2]);return this.normalized&&(it=denormalize(it,this.array)),it}setZ(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize+2]=toHalfFloat(it),this}getW(rt){let it=fromHalfFloat(this.array[rt*this.itemSize+3]);return this.normalized&&(it=denormalize(it,this.array)),it}setW(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.array[rt*this.itemSize+3]=toHalfFloat(it),this}setXY(rt,it,st){return rt*=this.itemSize,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array)),this.array[rt+0]=toHalfFloat(it),this.array[rt+1]=toHalfFloat(st),this}setXYZ(rt,it,st,lt){return rt*=this.itemSize,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array),lt=normalize(lt,this.array)),this.array[rt+0]=toHalfFloat(it),this.array[rt+1]=toHalfFloat(st),this.array[rt+2]=toHalfFloat(lt),this}setXYZW(rt,it,st,lt,ct){return rt*=this.itemSize,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array),lt=normalize(lt,this.array),ct=normalize(ct,this.array)),this.array[rt+0]=toHalfFloat(it),this.array[rt+1]=toHalfFloat(st),this.array[rt+2]=toHalfFloat(lt),this.array[rt+3]=toHalfFloat(ct),this}}class Float32BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Float32Array(rt),it,st)}}class Float64BufferAttribute extends BufferAttribute{constructor(rt,it,st){super(new Float64Array(rt),it,st)}}let _id$2=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(rt){return Array.isArray(rt)?this.index=new(arrayNeedsUint32(rt)?Uint32BufferAttribute:Uint16BufferAttribute)(rt,1):this.index=rt,this}getAttribute(rt){return this.attributes[rt]}setAttribute(rt,it){return this.attributes[rt]=it,this}deleteAttribute(rt){return delete this.attributes[rt],this}hasAttribute(rt){return this.attributes[rt]!==void 0}addGroup(rt,it,st=0){this.groups.push({start:rt,count:it,materialIndex:st})}clearGroups(){this.groups=[]}setDrawRange(rt,it){this.drawRange.start=rt,this.drawRange.count=it}applyMatrix4(rt){const it=this.attributes.position;it!==void 0&&(it.applyMatrix4(rt),it.needsUpdate=!0);const st=this.attributes.normal;if(st!==void 0){const ct=new Matrix3().getNormalMatrix(rt);st.applyNormalMatrix(ct),st.needsUpdate=!0}const lt=this.attributes.tangent;return lt!==void 0&&(lt.transformDirection(rt),lt.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(rt){return _m1.makeRotationFromQuaternion(rt),this.applyMatrix4(_m1),this}rotateX(rt){return _m1.makeRotationX(rt),this.applyMatrix4(_m1),this}rotateY(rt){return _m1.makeRotationY(rt),this.applyMatrix4(_m1),this}rotateZ(rt){return _m1.makeRotationZ(rt),this.applyMatrix4(_m1),this}translate(rt,it,st){return _m1.makeTranslation(rt,it,st),this.applyMatrix4(_m1),this}scale(rt,it,st){return _m1.makeScale(rt,it,st),this.applyMatrix4(_m1),this}lookAt(rt){return _obj.lookAt(rt),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(rt){const it=[];for(let st=0,lt=rt.length;st<lt;st++){const ct=rt[st];it.push(ct.x,ct.y,ct.z||0)}return this.setAttribute("position",new Float32BufferAttribute(it,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const rt=this.attributes.position,it=this.morphAttributes.position;if(rt&&rt.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(rt!==void 0){if(this.boundingBox.setFromBufferAttribute(rt),it)for(let st=0,lt=it.length;st<lt;st++){const ct=it[st];_box$2.setFromBufferAttribute(ct),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const rt=this.attributes.position,it=this.morphAttributes.position;if(rt&&rt.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if(rt){const st=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(rt),it)for(let ct=0,ut=it.length;ct<ut;ct++){const dt=it[ct];_boxMorphTargets.setFromBufferAttribute(dt),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(st);let lt=0;for(let ct=0,ut=rt.count;ct<ut;ct++)_vector$8.fromBufferAttribute(rt,ct),lt=Math.max(lt,st.distanceToSquared(_vector$8));if(it)for(let ct=0,ut=it.length;ct<ut;ct++){const dt=it[ct],ht=this.morphTargetsRelative;for(let ft=0,pt=dt.count;ft<pt;ft++)_vector$8.fromBufferAttribute(dt,ft),ht&&(_offset.fromBufferAttribute(rt,ft),_vector$8.add(_offset)),lt=Math.max(lt,st.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(lt),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const rt=this.index,it=this.attributes;if(rt===null||it.position===void 0||it.normal===void 0||it.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const st=rt.array,lt=it.position.array,ct=it.normal.array,ut=it.uv.array,dt=lt.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*dt),4));const ht=this.getAttribute("tangent").array,ft=[],pt=[];for(let Lt=0;Lt<dt;Lt++)ft[Lt]=new Vector3,pt[Lt]=new Vector3;const mt=new Vector3,gt=new Vector3,xt=new Vector3,yt=new Vector2,vt=new Vector2,St=new Vector2,wt=new Vector3,Et=new Vector3;function Rt(Lt,Mt,Ot){mt.fromArray(lt,Lt*3),gt.fromArray(lt,Mt*3),xt.fromArray(lt,Ot*3),yt.fromArray(ut,Lt*2),vt.fromArray(ut,Mt*2),St.fromArray(ut,Ot*2),gt.sub(mt),xt.sub(mt),vt.sub(yt),St.sub(yt);const Nt=1/(vt.x*St.y-St.x*vt.y);isFinite(Nt)&&(wt.copy(gt).multiplyScalar(St.y).addScaledVector(xt,-vt.y).multiplyScalar(Nt),Et.copy(xt).multiplyScalar(vt.x).addScaledVector(gt,-St.x).multiplyScalar(Nt),ft[Lt].add(wt),ft[Mt].add(wt),ft[Ot].add(wt),pt[Lt].add(Et),pt[Mt].add(Et),pt[Ot].add(Et))}let Tt=this.groups;Tt.length===0&&(Tt=[{start:0,count:st.length}]);for(let Lt=0,Mt=Tt.length;Lt<Mt;++Lt){const Ot=Tt[Lt],Nt=Ot.start,$t=Ot.count;for(let Vt=Nt,Ut=Nt+$t;Vt<Ut;Vt+=3)Rt(st[Vt+0],st[Vt+1],st[Vt+2])}const It=new Vector3,At=new Vector3,Dt=new Vector3,jt=new Vector3;function Ft(Lt){Dt.fromArray(ct,Lt*3),jt.copy(Dt);const Mt=ft[Lt];It.copy(Mt),It.sub(Dt.multiplyScalar(Dt.dot(Mt))).normalize(),At.crossVectors(jt,Mt);const Nt=At.dot(pt[Lt])<0?-1:1;ht[Lt*4]=It.x,ht[Lt*4+1]=It.y,ht[Lt*4+2]=It.z,ht[Lt*4+3]=Nt}for(let Lt=0,Mt=Tt.length;Lt<Mt;++Lt){const Ot=Tt[Lt],Nt=Ot.start,$t=Ot.count;for(let Vt=Nt,Ut=Nt+$t;Vt<Ut;Vt+=3)Ft(st[Vt+0]),Ft(st[Vt+1]),Ft(st[Vt+2])}}computeVertexNormals(){const rt=this.index,it=this.getAttribute("position");if(it!==void 0){let st=this.getAttribute("normal");if(st===void 0)st=new BufferAttribute(new Float32Array(it.count*3),3),this.setAttribute("normal",st);else for(let gt=0,xt=st.count;gt<xt;gt++)st.setXYZ(gt,0,0,0);const lt=new Vector3,ct=new Vector3,ut=new Vector3,dt=new Vector3,ht=new Vector3,ft=new Vector3,pt=new Vector3,mt=new Vector3;if(rt)for(let gt=0,xt=rt.count;gt<xt;gt+=3){const yt=rt.getX(gt+0),vt=rt.getX(gt+1),St=rt.getX(gt+2);lt.fromBufferAttribute(it,yt),ct.fromBufferAttribute(it,vt),ut.fromBufferAttribute(it,St),pt.subVectors(ut,ct),mt.subVectors(lt,ct),pt.cross(mt),dt.fromBufferAttribute(st,yt),ht.fromBufferAttribute(st,vt),ft.fromBufferAttribute(st,St),dt.add(pt),ht.add(pt),ft.add(pt),st.setXYZ(yt,dt.x,dt.y,dt.z),st.setXYZ(vt,ht.x,ht.y,ht.z),st.setXYZ(St,ft.x,ft.y,ft.z)}else for(let gt=0,xt=it.count;gt<xt;gt+=3)lt.fromBufferAttribute(it,gt+0),ct.fromBufferAttribute(it,gt+1),ut.fromBufferAttribute(it,gt+2),pt.subVectors(ut,ct),mt.subVectors(lt,ct),pt.cross(mt),st.setXYZ(gt+0,pt.x,pt.y,pt.z),st.setXYZ(gt+1,pt.x,pt.y,pt.z),st.setXYZ(gt+2,pt.x,pt.y,pt.z);this.normalizeNormals(),st.needsUpdate=!0}}normalizeNormals(){const rt=this.attributes.normal;for(let it=0,st=rt.count;it<st;it++)_vector$8.fromBufferAttribute(rt,it),_vector$8.normalize(),rt.setXYZ(it,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function rt(dt,ht){const ft=dt.array,pt=dt.itemSize,mt=dt.normalized,gt=new ft.constructor(ht.length*pt);let xt=0,yt=0;for(let vt=0,St=ht.length;vt<St;vt++){dt.isInterleavedBufferAttribute?xt=ht[vt]*dt.data.stride+dt.offset:xt=ht[vt]*pt;for(let wt=0;wt<pt;wt++)gt[yt++]=ft[xt++]}return new BufferAttribute(gt,pt,mt)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const it=new BufferGeometry,st=this.index.array,lt=this.attributes;for(const dt in lt){const ht=lt[dt],ft=rt(ht,st);it.setAttribute(dt,ft)}const ct=this.morphAttributes;for(const dt in ct){const ht=[],ft=ct[dt];for(let pt=0,mt=ft.length;pt<mt;pt++){const gt=ft[pt],xt=rt(gt,st);ht.push(xt)}it.morphAttributes[dt]=ht}it.morphTargetsRelative=this.morphTargetsRelative;const ut=this.groups;for(let dt=0,ht=ut.length;dt<ht;dt++){const ft=ut[dt];it.addGroup(ft.start,ft.count,ft.materialIndex)}return it}toJSON(){const rt={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(rt.uuid=this.uuid,rt.type=this.type,this.name!==""&&(rt.name=this.name),Object.keys(this.userData).length>0&&(rt.userData=this.userData),this.parameters!==void 0){const ht=this.parameters;for(const ft in ht)ht[ft]!==void 0&&(rt[ft]=ht[ft]);return rt}rt.data={attributes:{}};const it=this.index;it!==null&&(rt.data.index={type:it.array.constructor.name,array:Array.prototype.slice.call(it.array)});const st=this.attributes;for(const ht in st){const ft=st[ht];rt.data.attributes[ht]=ft.toJSON(rt.data)}const lt={};let ct=!1;for(const ht in this.morphAttributes){const ft=this.morphAttributes[ht],pt=[];for(let mt=0,gt=ft.length;mt<gt;mt++){const xt=ft[mt];pt.push(xt.toJSON(rt.data))}pt.length>0&&(lt[ht]=pt,ct=!0)}ct&&(rt.data.morphAttributes=lt,rt.data.morphTargetsRelative=this.morphTargetsRelative);const ut=this.groups;ut.length>0&&(rt.data.groups=JSON.parse(JSON.stringify(ut)));const dt=this.boundingSphere;return dt!==null&&(rt.data.boundingSphere={center:dt.center.toArray(),radius:dt.radius}),rt}clone(){return new this.constructor().copy(this)}copy(rt){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const it={};this.name=rt.name;const st=rt.index;st!==null&&this.setIndex(st.clone(it));const lt=rt.attributes;for(const ft in lt){const pt=lt[ft];this.setAttribute(ft,pt.clone(it))}const ct=rt.morphAttributes;for(const ft in ct){const pt=[],mt=ct[ft];for(let gt=0,xt=mt.length;gt<xt;gt++)pt.push(mt[gt].clone(it));this.morphAttributes[ft]=pt}this.morphTargetsRelative=rt.morphTargetsRelative;const ut=rt.groups;for(let ft=0,pt=ut.length;ft<pt;ft++){const mt=ut[ft];this.addGroup(mt.start,mt.count,mt.materialIndex)}const dt=rt.boundingBox;dt!==null&&(this.boundingBox=dt.clone());const ht=rt.boundingSphere;return ht!==null&&(this.boundingSphere=ht.clone()),this.drawRange.start=rt.drawRange.start,this.drawRange.count=rt.drawRange.count,this.userData=rt.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_normalA=new Vector3,_normalB=new Vector3,_normalC=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(rt=new BufferGeometry,it=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=rt,this.material=it,this.updateMorphTargets()}copy(rt,it){return super.copy(rt,it),rt.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=rt.morphTargetInfluences.slice()),rt.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},rt.morphTargetDictionary)),this.material=Array.isArray(rt.material)?rt.material.slice():rt.material,this.geometry=rt.geometry,this}updateMorphTargets(){const it=this.geometry.morphAttributes,st=Object.keys(it);if(st.length>0){const lt=it[st[0]];if(lt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ct=0,ut=lt.length;ct<ut;ct++){const dt=lt[ct].name||String(ct);this.morphTargetInfluences.push(0),this.morphTargetDictionary[dt]=ct}}}}getVertexPosition(rt,it){const st=this.geometry,lt=st.attributes.position,ct=st.morphAttributes.position,ut=st.morphTargetsRelative;it.fromBufferAttribute(lt,rt);const dt=this.morphTargetInfluences;if(ct&&dt){_morphA.set(0,0,0);for(let ht=0,ft=ct.length;ht<ft;ht++){const pt=dt[ht],mt=ct[ht];pt!==0&&(_tempA.fromBufferAttribute(mt,rt),ut?_morphA.addScaledVector(_tempA,pt):_morphA.addScaledVector(_tempA.sub(it),pt))}it.add(_morphA)}return it}raycast(rt,it){const st=this.geometry,lt=this.material,ct=this.matrixWorld;lt!==void 0&&(st.boundingSphere===null&&st.computeBoundingSphere(),_sphere$6.copy(st.boundingSphere),_sphere$6.applyMatrix4(ct),_ray$3.copy(rt.ray).recast(rt.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(rt.far-rt.near)**2))&&(_inverseMatrix$3.copy(ct).invert(),_ray$3.copy(rt.ray).applyMatrix4(_inverseMatrix$3),!(st.boundingBox!==null&&_ray$3.intersectsBox(st.boundingBox)===!1)&&this._computeIntersections(rt,it,_ray$3)))}_computeIntersections(rt,it,st){let lt;const ct=this.geometry,ut=this.material,dt=ct.index,ht=ct.attributes.position,ft=ct.attributes.uv,pt=ct.attributes.uv1,mt=ct.attributes.normal,gt=ct.groups,xt=ct.drawRange;if(dt!==null)if(Array.isArray(ut))for(let yt=0,vt=gt.length;yt<vt;yt++){const St=gt[yt],wt=ut[St.materialIndex],Et=Math.max(St.start,xt.start),Rt=Math.min(dt.count,Math.min(St.start+St.count,xt.start+xt.count));for(let Tt=Et,It=Rt;Tt<It;Tt+=3){const At=dt.getX(Tt),Dt=dt.getX(Tt+1),jt=dt.getX(Tt+2);lt=checkGeometryIntersection(this,wt,rt,st,ft,pt,mt,At,Dt,jt),lt&&(lt.faceIndex=Math.floor(Tt/3),lt.face.materialIndex=St.materialIndex,it.push(lt))}}else{const yt=Math.max(0,xt.start),vt=Math.min(dt.count,xt.start+xt.count);for(let St=yt,wt=vt;St<wt;St+=3){const Et=dt.getX(St),Rt=dt.getX(St+1),Tt=dt.getX(St+2);lt=checkGeometryIntersection(this,ut,rt,st,ft,pt,mt,Et,Rt,Tt),lt&&(lt.faceIndex=Math.floor(St/3),it.push(lt))}}else if(ht!==void 0)if(Array.isArray(ut))for(let yt=0,vt=gt.length;yt<vt;yt++){const St=gt[yt],wt=ut[St.materialIndex],Et=Math.max(St.start,xt.start),Rt=Math.min(ht.count,Math.min(St.start+St.count,xt.start+xt.count));for(let Tt=Et,It=Rt;Tt<It;Tt+=3){const At=Tt,Dt=Tt+1,jt=Tt+2;lt=checkGeometryIntersection(this,wt,rt,st,ft,pt,mt,At,Dt,jt),lt&&(lt.faceIndex=Math.floor(Tt/3),lt.face.materialIndex=St.materialIndex,it.push(lt))}}else{const yt=Math.max(0,xt.start),vt=Math.min(ht.count,xt.start+xt.count);for(let St=yt,wt=vt;St<wt;St+=3){const Et=St,Rt=St+1,Tt=St+2;lt=checkGeometryIntersection(this,ut,rt,st,ft,pt,mt,Et,Rt,Tt),lt&&(lt.faceIndex=Math.floor(St/3),it.push(lt))}}}}function checkIntersection(nt,rt,it,st,lt,ct,ut,dt){let ht;if(rt.side===BackSide?ht=st.intersectTriangle(ut,ct,lt,!0,dt):ht=st.intersectTriangle(lt,ct,ut,rt.side===FrontSide,dt),ht===null)return null;_intersectionPointWorld.copy(dt),_intersectionPointWorld.applyMatrix4(nt.matrixWorld);const ft=it.ray.origin.distanceTo(_intersectionPointWorld);return ft<it.near||ft>it.far?null:{distance:ft,point:_intersectionPointWorld.clone(),object:nt}}function checkGeometryIntersection(nt,rt,it,st,lt,ct,ut,dt,ht,ft){nt.getVertexPosition(dt,_vA$1),nt.getVertexPosition(ht,_vB$1),nt.getVertexPosition(ft,_vC$1);const pt=checkIntersection(nt,rt,it,st,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(pt){lt&&(_uvA$1.fromBufferAttribute(lt,dt),_uvB$1.fromBufferAttribute(lt,ht),_uvC$1.fromBufferAttribute(lt,ft),pt.uv=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),ct&&(_uvA$1.fromBufferAttribute(ct,dt),_uvB$1.fromBufferAttribute(ct,ht),_uvC$1.fromBufferAttribute(ct,ft),pt.uv1=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),pt.uv2=pt.uv1),ut&&(_normalA.fromBufferAttribute(ut,dt),_normalB.fromBufferAttribute(ut,ht),_normalC.fromBufferAttribute(ut,ft),pt.normal=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_normalA,_normalB,_normalC,new Vector3),pt.normal.dot(st.direction)>0&&pt.normal.multiplyScalar(-1));const mt={a:dt,b:ht,c:ft,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,mt.normal),pt.face=mt}return pt}class BoxGeometry extends BufferGeometry{constructor(rt=1,it=1,st=1,lt=1,ct=1,ut=1){super(),this.type="BoxGeometry",this.parameters={width:rt,height:it,depth:st,widthSegments:lt,heightSegments:ct,depthSegments:ut};const dt=this;lt=Math.floor(lt),ct=Math.floor(ct),ut=Math.floor(ut);const ht=[],ft=[],pt=[],mt=[];let gt=0,xt=0;yt("z","y","x",-1,-1,st,it,rt,ut,ct,0),yt("z","y","x",1,-1,st,it,-rt,ut,ct,1),yt("x","z","y",1,1,rt,st,it,lt,ut,2),yt("x","z","y",1,-1,rt,st,-it,lt,ut,3),yt("x","y","z",1,-1,rt,it,st,lt,ct,4),yt("x","y","z",-1,-1,rt,it,-st,lt,ct,5),this.setIndex(ht),this.setAttribute("position",new Float32BufferAttribute(ft,3)),this.setAttribute("normal",new Float32BufferAttribute(pt,3)),this.setAttribute("uv",new Float32BufferAttribute(mt,2));function yt(vt,St,wt,Et,Rt,Tt,It,At,Dt,jt,Ft){const Lt=Tt/Dt,Mt=It/jt,Ot=Tt/2,Nt=It/2,$t=At/2,Vt=Dt+1,Ut=jt+1;let zt=0,Bt=0;const Ht=new Vector3;for(let Gt=0;Gt<Ut;Gt++){const Xt=Gt*Mt-Nt;for(let Zt=0;Zt<Vt;Zt++){const hr=Zt*Lt-Ot;Ht[vt]=hr*Et,Ht[St]=Xt*Rt,Ht[wt]=$t,ft.push(Ht.x,Ht.y,Ht.z),Ht[vt]=0,Ht[St]=0,Ht[wt]=At>0?1:-1,pt.push(Ht.x,Ht.y,Ht.z),mt.push(Zt/Dt),mt.push(1-Gt/jt),zt+=1}}for(let Gt=0;Gt<jt;Gt++)for(let Xt=0;Xt<Dt;Xt++){const Zt=gt+Xt+Vt*Gt,hr=gt+Xt+Vt*(Gt+1),nr=gt+(Xt+1)+Vt*(Gt+1),ir=gt+(Xt+1)+Vt*Gt;ht.push(Zt,hr,ir),ht.push(hr,nr,ir),Bt+=6}dt.addGroup(xt,Bt,Ft),xt+=Bt,gt+=zt}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new BoxGeometry(rt.width,rt.height,rt.depth,rt.widthSegments,rt.heightSegments,rt.depthSegments)}}function cloneUniforms(nt){const rt={};for(const it in nt){rt[it]={};for(const st in nt[it]){const lt=nt[it][st];lt&&(lt.isColor||lt.isMatrix3||lt.isMatrix4||lt.isVector2||lt.isVector3||lt.isVector4||lt.isTexture||lt.isQuaternion)?lt.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),rt[it][st]=null):rt[it][st]=lt.clone():Array.isArray(lt)?rt[it][st]=lt.slice():rt[it][st]=lt}}return rt}function mergeUniforms(nt){const rt={};for(let it=0;it<nt.length;it++){const st=cloneUniforms(nt[it]);for(const lt in st)rt[lt]=st[lt]}return rt}function cloneUniformsGroups(nt){const rt=[];for(let it=0;it<nt.length;it++)rt.push(nt[it].clone());return rt}function getUnlitUniformColorSpace(nt){return nt.getRenderTarget()===null?nt.outputColorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(rt){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,rt!==void 0&&this.setValues(rt)}copy(rt){return super.copy(rt),this.fragmentShader=rt.fragmentShader,this.vertexShader=rt.vertexShader,this.uniforms=cloneUniforms(rt.uniforms),this.uniformsGroups=cloneUniformsGroups(rt.uniformsGroups),this.defines=Object.assign({},rt.defines),this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this.fog=rt.fog,this.lights=rt.lights,this.clipping=rt.clipping,this.extensions=Object.assign({},rt.extensions),this.glslVersion=rt.glslVersion,this}toJSON(rt){const it=super.toJSON(rt);it.glslVersion=this.glslVersion,it.uniforms={};for(const lt in this.uniforms){const ut=this.uniforms[lt].value;ut&&ut.isTexture?it.uniforms[lt]={type:"t",value:ut.toJSON(rt).uuid}:ut&&ut.isColor?it.uniforms[lt]={type:"c",value:ut.getHex()}:ut&&ut.isVector2?it.uniforms[lt]={type:"v2",value:ut.toArray()}:ut&&ut.isVector3?it.uniforms[lt]={type:"v3",value:ut.toArray()}:ut&&ut.isVector4?it.uniforms[lt]={type:"v4",value:ut.toArray()}:ut&&ut.isMatrix3?it.uniforms[lt]={type:"m3",value:ut.toArray()}:ut&&ut.isMatrix4?it.uniforms[lt]={type:"m4",value:ut.toArray()}:it.uniforms[lt]={value:ut}}Object.keys(this.defines).length>0&&(it.defines=this.defines),it.vertexShader=this.vertexShader,it.fragmentShader=this.fragmentShader,it.lights=this.lights,it.clipping=this.clipping;const st={};for(const lt in this.extensions)this.extensions[lt]===!0&&(st[lt]=!0);return Object.keys(st).length>0&&(it.extensions=st),it}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(rt,it){return super.copy(rt,it),this.matrixWorldInverse.copy(rt.matrixWorldInverse),this.projectionMatrix.copy(rt.projectionMatrix),this.projectionMatrixInverse.copy(rt.projectionMatrixInverse),this.coordinateSystem=rt.coordinateSystem,this}getWorldDirection(rt){return super.getWorldDirection(rt).negate()}updateMatrixWorld(rt){super.updateMatrixWorld(rt),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(rt,it){super.updateWorldMatrix(rt,it),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera{constructor(rt=50,it=1,st=.1,lt=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=rt,this.zoom=1,this.near=st,this.far=lt,this.focus=10,this.aspect=it,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(rt,it){return super.copy(rt,it),this.fov=rt.fov,this.zoom=rt.zoom,this.near=rt.near,this.far=rt.far,this.focus=rt.focus,this.aspect=rt.aspect,this.view=rt.view===null?null:Object.assign({},rt.view),this.filmGauge=rt.filmGauge,this.filmOffset=rt.filmOffset,this}setFocalLength(rt){const it=.5*this.getFilmHeight()/rt;this.fov=RAD2DEG*2*Math.atan(it),this.updateProjectionMatrix()}getFocalLength(){const rt=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/rt}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(rt,it,st){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),it.set(_v3$1.x,_v3$1.y).multiplyScalar(-rt/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),st.set(_v3$1.x,_v3$1.y).multiplyScalar(-rt/_v3$1.z)}getViewSize(rt,it){return this.getViewBounds(rt,_minTarget,_maxTarget),it.subVectors(_maxTarget,_minTarget)}setViewOffset(rt,it,st,lt,ct,ut){this.aspect=rt/it,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=rt,this.view.fullHeight=it,this.view.offsetX=st,this.view.offsetY=lt,this.view.width=ct,this.view.height=ut,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const rt=this.near;let it=rt*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,st=2*it,lt=this.aspect*st,ct=-.5*lt;const ut=this.view;if(this.view!==null&&this.view.enabled){const ht=ut.fullWidth,ft=ut.fullHeight;ct+=ut.offsetX*lt/ht,it-=ut.offsetY*st/ft,lt*=ut.width/ht,st*=ut.height/ft}const dt=this.filmOffset;dt!==0&&(ct+=rt*dt/this.getFilmWidth()),this.projectionMatrix.makePerspective(ct,ct+lt,it,it-st,rt,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(rt){const it=super.toJSON(rt);return it.object.fov=this.fov,it.object.zoom=this.zoom,it.object.near=this.near,it.object.far=this.far,it.object.focus=this.focus,it.object.aspect=this.aspect,this.view!==null&&(it.object.view=Object.assign({},this.view)),it.object.filmGauge=this.filmGauge,it.object.filmOffset=this.filmOffset,it}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(rt,it,st){super(),this.type="CubeCamera",this.renderTarget=st,this.coordinateSystem=null,this.activeMipmapLevel=0;const lt=new PerspectiveCamera(fov,aspect,rt,it);lt.layers=this.layers,this.add(lt);const ct=new PerspectiveCamera(fov,aspect,rt,it);ct.layers=this.layers,this.add(ct);const ut=new PerspectiveCamera(fov,aspect,rt,it);ut.layers=this.layers,this.add(ut);const dt=new PerspectiveCamera(fov,aspect,rt,it);dt.layers=this.layers,this.add(dt);const ht=new PerspectiveCamera(fov,aspect,rt,it);ht.layers=this.layers,this.add(ht);const ft=new PerspectiveCamera(fov,aspect,rt,it);ft.layers=this.layers,this.add(ft)}updateCoordinateSystem(){const rt=this.coordinateSystem,it=this.children.concat(),[st,lt,ct,ut,dt,ht]=it;for(const ft of it)this.remove(ft);if(rt===WebGLCoordinateSystem)st.up.set(0,1,0),st.lookAt(1,0,0),lt.up.set(0,1,0),lt.lookAt(-1,0,0),ct.up.set(0,0,-1),ct.lookAt(0,1,0),ut.up.set(0,0,1),ut.lookAt(0,-1,0),dt.up.set(0,1,0),dt.lookAt(0,0,1),ht.up.set(0,1,0),ht.lookAt(0,0,-1);else if(rt===WebGPUCoordinateSystem)st.up.set(0,-1,0),st.lookAt(-1,0,0),lt.up.set(0,-1,0),lt.lookAt(1,0,0),ct.up.set(0,0,1),ct.lookAt(0,1,0),ut.up.set(0,0,-1),ut.lookAt(0,-1,0),dt.up.set(0,-1,0),dt.lookAt(0,0,1),ht.up.set(0,-1,0),ht.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+rt);for(const ft of it)this.add(ft),ft.updateMatrixWorld()}update(rt,it){this.parent===null&&this.updateMatrixWorld();const{renderTarget:st,activeMipmapLevel:lt}=this;this.coordinateSystem!==rt.coordinateSystem&&(this.coordinateSystem=rt.coordinateSystem,this.updateCoordinateSystem());const[ct,ut,dt,ht,ft,pt]=this.children,mt=rt.getRenderTarget(),gt=rt.getActiveCubeFace(),xt=rt.getActiveMipmapLevel(),yt=rt.xr.enabled;rt.xr.enabled=!1;const vt=st.texture.generateMipmaps;st.texture.generateMipmaps=!1,rt.setRenderTarget(st,0,lt),rt.render(it,ct),rt.setRenderTarget(st,1,lt),rt.render(it,ut),rt.setRenderTarget(st,2,lt),rt.render(it,dt),rt.setRenderTarget(st,3,lt),rt.render(it,ht),rt.setRenderTarget(st,4,lt),rt.render(it,ft),st.texture.generateMipmaps=vt,rt.setRenderTarget(st,5,lt),rt.render(it,pt),rt.setRenderTarget(mt,gt,xt),rt.xr.enabled=yt,st.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(rt,it,st,lt,ct,ut,dt,ht,ft,pt){rt=rt!==void 0?rt:[],it=it!==void 0?it:CubeReflectionMapping,super(rt,it,st,lt,ct,ut,dt,ht,ft,pt),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(rt){this.image=rt}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(rt=1,it={}){super(rt,rt,it),this.isWebGLCubeRenderTarget=!0;const st={width:rt,height:rt,depth:1},lt=[st,st,st,st,st,st];it.encoding!==void 0&&(warnOnce("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),it.colorSpace=it.encoding===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.texture=new CubeTexture(lt,it.mapping,it.wrapS,it.wrapT,it.magFilter,it.minFilter,it.format,it.type,it.anisotropy,it.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=it.generateMipmaps!==void 0?it.generateMipmaps:!1,this.texture.minFilter=it.minFilter!==void 0?it.minFilter:LinearFilter}fromEquirectangularTexture(rt,it){this.texture.type=it.type,this.texture.colorSpace=it.colorSpace,this.texture.generateMipmaps=it.generateMipmaps,this.texture.minFilter=it.minFilter,this.texture.magFilter=it.magFilter;const st={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},lt=new BoxGeometry(5,5,5),ct=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(st.uniforms),vertexShader:st.vertexShader,fragmentShader:st.fragmentShader,side:BackSide,blending:NoBlending});ct.uniforms.tEquirect.value=it;const ut=new Mesh(lt,ct),dt=it.minFilter;return it.minFilter===LinearMipmapLinearFilter&&(it.minFilter=LinearFilter),new CubeCamera(1,10,this).update(rt,ut),it.minFilter=dt,ut.geometry.dispose(),ut.material.dispose(),this}clear(rt,it,st,lt){const ct=rt.getRenderTarget();for(let ut=0;ut<6;ut++)rt.setRenderTarget(this,ut),rt.clear(it,st,lt);rt.setRenderTarget(ct)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(rt=new Vector3(1,0,0),it=0){this.isPlane=!0,this.normal=rt,this.constant=it}set(rt,it){return this.normal.copy(rt),this.constant=it,this}setComponents(rt,it,st,lt){return this.normal.set(rt,it,st),this.constant=lt,this}setFromNormalAndCoplanarPoint(rt,it){return this.normal.copy(rt),this.constant=-it.dot(this.normal),this}setFromCoplanarPoints(rt,it,st){const lt=_vector1.subVectors(st,it).cross(_vector2.subVectors(rt,it)).normalize();return this.setFromNormalAndCoplanarPoint(lt,rt),this}copy(rt){return this.normal.copy(rt.normal),this.constant=rt.constant,this}normalize(){const rt=1/this.normal.length();return this.normal.multiplyScalar(rt),this.constant*=rt,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(rt){return this.normal.dot(rt)+this.constant}distanceToSphere(rt){return this.distanceToPoint(rt.center)-rt.radius}projectPoint(rt,it){return it.copy(rt).addScaledVector(this.normal,-this.distanceToPoint(rt))}intersectLine(rt,it){const st=rt.delta(_vector1),lt=this.normal.dot(st);if(lt===0)return this.distanceToPoint(rt.start)===0?it.copy(rt.start):null;const ct=-(rt.start.dot(this.normal)+this.constant)/lt;return ct<0||ct>1?null:it.copy(rt.start).addScaledVector(st,ct)}intersectsLine(rt){const it=this.distanceToPoint(rt.start),st=this.distanceToPoint(rt.end);return it<0&&st>0||st<0&&it>0}intersectsBox(rt){return rt.intersectsPlane(this)}intersectsSphere(rt){return rt.intersectsPlane(this)}coplanarPoint(rt){return rt.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(rt,it){const st=it||_normalMatrix.getNormalMatrix(rt),lt=this.coplanarPoint(_vector1).applyMatrix4(rt),ct=this.normal.applyMatrix3(st).normalize();return this.constant=-lt.dot(ct),this}translate(rt){return this.constant-=rt.dot(this.normal),this}equals(rt){return rt.normal.equals(this.normal)&&rt.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$5=new Sphere,_vector$7=new Vector3;class Frustum{constructor(rt=new Plane,it=new Plane,st=new Plane,lt=new Plane,ct=new Plane,ut=new Plane){this.planes=[rt,it,st,lt,ct,ut]}set(rt,it,st,lt,ct,ut){const dt=this.planes;return dt[0].copy(rt),dt[1].copy(it),dt[2].copy(st),dt[3].copy(lt),dt[4].copy(ct),dt[5].copy(ut),this}copy(rt){const it=this.planes;for(let st=0;st<6;st++)it[st].copy(rt.planes[st]);return this}setFromProjectionMatrix(rt,it=WebGLCoordinateSystem){const st=this.planes,lt=rt.elements,ct=lt[0],ut=lt[1],dt=lt[2],ht=lt[3],ft=lt[4],pt=lt[5],mt=lt[6],gt=lt[7],xt=lt[8],yt=lt[9],vt=lt[10],St=lt[11],wt=lt[12],Et=lt[13],Rt=lt[14],Tt=lt[15];if(st[0].setComponents(ht-ct,gt-ft,St-xt,Tt-wt).normalize(),st[1].setComponents(ht+ct,gt+ft,St+xt,Tt+wt).normalize(),st[2].setComponents(ht+ut,gt+pt,St+yt,Tt+Et).normalize(),st[3].setComponents(ht-ut,gt-pt,St-yt,Tt-Et).normalize(),st[4].setComponents(ht-dt,gt-mt,St-vt,Tt-Rt).normalize(),it===WebGLCoordinateSystem)st[5].setComponents(ht+dt,gt+mt,St+vt,Tt+Rt).normalize();else if(it===WebGPUCoordinateSystem)st[5].setComponents(dt,mt,vt,Rt).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+it);return this}intersectsObject(rt){if(rt.boundingSphere!==void 0)rt.boundingSphere===null&&rt.computeBoundingSphere(),_sphere$5.copy(rt.boundingSphere).applyMatrix4(rt.matrixWorld);else{const it=rt.geometry;it.boundingSphere===null&&it.computeBoundingSphere(),_sphere$5.copy(it.boundingSphere).applyMatrix4(rt.matrixWorld)}return this.intersectsSphere(_sphere$5)}intersectsSprite(rt){return _sphere$5.center.set(0,0,0),_sphere$5.radius=.7071067811865476,_sphere$5.applyMatrix4(rt.matrixWorld),this.intersectsSphere(_sphere$5)}intersectsSphere(rt){const it=this.planes,st=rt.center,lt=-rt.radius;for(let ct=0;ct<6;ct++)if(it[ct].distanceToPoint(st)<lt)return!1;return!0}intersectsBox(rt){const it=this.planes;for(let st=0;st<6;st++){const lt=it[st];if(_vector$7.x=lt.normal.x>0?rt.max.x:rt.min.x,_vector$7.y=lt.normal.y>0?rt.max.y:rt.min.y,_vector$7.z=lt.normal.z>0?rt.max.z:rt.min.z,lt.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(rt){const it=this.planes;for(let st=0;st<6;st++)if(it[st].distanceToPoint(rt)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let nt=null,rt=!1,it=null,st=null;function lt(ct,ut){it(ct,ut),st=nt.requestAnimationFrame(lt)}return{start:function(){rt!==!0&&it!==null&&(st=nt.requestAnimationFrame(lt),rt=!0)},stop:function(){nt.cancelAnimationFrame(st),rt=!1},setAnimationLoop:function(ct){it=ct},setContext:function(ct){nt=ct}}}function WebGLAttributes(nt,rt){const it=rt.isWebGL2,st=new WeakMap;function lt(ft,pt){const mt=ft.array,gt=ft.usage,xt=mt.byteLength,yt=nt.createBuffer();nt.bindBuffer(pt,yt),nt.bufferData(pt,mt,gt),ft.onUploadCallback();let vt;if(mt instanceof Float32Array)vt=nt.FLOAT;else if(mt instanceof Uint16Array)if(ft.isFloat16BufferAttribute)if(it)vt=nt.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else vt=nt.UNSIGNED_SHORT;else if(mt instanceof Int16Array)vt=nt.SHORT;else if(mt instanceof Uint32Array)vt=nt.UNSIGNED_INT;else if(mt instanceof Int32Array)vt=nt.INT;else if(mt instanceof Int8Array)vt=nt.BYTE;else if(mt instanceof Uint8Array)vt=nt.UNSIGNED_BYTE;else if(mt instanceof Uint8ClampedArray)vt=nt.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+mt);return{buffer:yt,type:vt,bytesPerElement:mt.BYTES_PER_ELEMENT,version:ft.version,size:xt}}function ct(ft,pt,mt){const gt=pt.array,xt=pt._updateRange,yt=pt.updateRanges;if(nt.bindBuffer(mt,ft),xt.count===-1&&yt.length===0&&nt.bufferSubData(mt,0,gt),yt.length!==0){for(let vt=0,St=yt.length;vt<St;vt++){const wt=yt[vt];it?nt.bufferSubData(mt,wt.start*gt.BYTES_PER_ELEMENT,gt,wt.start,wt.count):nt.bufferSubData(mt,wt.start*gt.BYTES_PER_ELEMENT,gt.subarray(wt.start,wt.start+wt.count))}pt.clearUpdateRanges()}xt.count!==-1&&(it?nt.bufferSubData(mt,xt.offset*gt.BYTES_PER_ELEMENT,gt,xt.offset,xt.count):nt.bufferSubData(mt,xt.offset*gt.BYTES_PER_ELEMENT,gt.subarray(xt.offset,xt.offset+xt.count)),xt.count=-1),pt.onUploadCallback()}function ut(ft){return ft.isInterleavedBufferAttribute&&(ft=ft.data),st.get(ft)}function dt(ft){ft.isInterleavedBufferAttribute&&(ft=ft.data);const pt=st.get(ft);pt&&(nt.deleteBuffer(pt.buffer),st.delete(ft))}function ht(ft,pt){if(ft.isGLBufferAttribute){const gt=st.get(ft);(!gt||gt.version<ft.version)&&st.set(ft,{buffer:ft.buffer,type:ft.type,bytesPerElement:ft.elementSize,version:ft.version});return}ft.isInterleavedBufferAttribute&&(ft=ft.data);const mt=st.get(ft);if(mt===void 0)st.set(ft,lt(ft,pt));else if(mt.version<ft.version){if(mt.size!==ft.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");ct(mt.buffer,ft,pt),mt.version=ft.version}}return{get:ut,remove:dt,update:ht}}class PlaneGeometry extends BufferGeometry{constructor(rt=1,it=1,st=1,lt=1){super(),this.type="PlaneGeometry",this.parameters={width:rt,height:it,widthSegments:st,heightSegments:lt};const ct=rt/2,ut=it/2,dt=Math.floor(st),ht=Math.floor(lt),ft=dt+1,pt=ht+1,mt=rt/dt,gt=it/ht,xt=[],yt=[],vt=[],St=[];for(let wt=0;wt<pt;wt++){const Et=wt*gt-ut;for(let Rt=0;Rt<ft;Rt++){const Tt=Rt*mt-ct;yt.push(Tt,-Et,0),vt.push(0,0,1),St.push(Rt/dt),St.push(1-wt/ht)}}for(let wt=0;wt<ht;wt++)for(let Et=0;Et<dt;Et++){const Rt=Et+ft*wt,Tt=Et+ft*(wt+1),It=Et+1+ft*(wt+1),At=Et+1+ft*wt;xt.push(Rt,Tt,At),xt.push(Tt,It,At)}this.setIndex(xt),this.setAttribute("position",new Float32BufferAttribute(yt,3)),this.setAttribute("normal",new Float32BufferAttribute(vt,3)),this.setAttribute("uv",new Float32BufferAttribute(St,2))}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new PlaneGeometry(rt.width,rt.height,rt.widthSegments,rt.heightSegments)}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,batching_vertex=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0};function WebGLBackground(nt,rt,it,st,lt,ct,ut){const dt=new Color(0);let ht=ct===!0?0:1,ft,pt,mt=null,gt=0,xt=null;function yt(St,wt){let Et=!1,Rt=wt.isScene===!0?wt.background:null;Rt&&Rt.isTexture&&(Rt=(wt.backgroundBlurriness>0?it:rt).get(Rt)),Rt===null?vt(dt,ht):Rt&&Rt.isColor&&(vt(Rt,1),Et=!0);const Tt=nt.xr.getEnvironmentBlendMode();Tt==="additive"?st.buffers.color.setClear(0,0,0,1,ut):Tt==="alpha-blend"&&st.buffers.color.setClear(0,0,0,0,ut),(nt.autoClear||Et)&&nt.clear(nt.autoClearColor,nt.autoClearDepth,nt.autoClearStencil),Rt&&(Rt.isCubeTexture||Rt.mapping===CubeUVReflectionMapping)?(pt===void 0&&(pt=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),pt.geometry.deleteAttribute("normal"),pt.geometry.deleteAttribute("uv"),pt.onBeforeRender=function(It,At,Dt){this.matrixWorld.copyPosition(Dt.matrixWorld)},Object.defineProperty(pt.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),lt.update(pt)),pt.material.uniforms.envMap.value=Rt,pt.material.uniforms.flipEnvMap.value=Rt.isCubeTexture&&Rt.isRenderTargetTexture===!1?-1:1,pt.material.uniforms.backgroundBlurriness.value=wt.backgroundBlurriness,pt.material.uniforms.backgroundIntensity.value=wt.backgroundIntensity,pt.material.toneMapped=ColorManagement.getTransfer(Rt.colorSpace)!==SRGBTransfer,(mt!==Rt||gt!==Rt.version||xt!==nt.toneMapping)&&(pt.material.needsUpdate=!0,mt=Rt,gt=Rt.version,xt=nt.toneMapping),pt.layers.enableAll(),St.unshift(pt,pt.geometry,pt.material,0,0,null)):Rt&&Rt.isTexture&&(ft===void 0&&(ft=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),ft.geometry.deleteAttribute("normal"),Object.defineProperty(ft.material,"map",{get:function(){return this.uniforms.t2D.value}}),lt.update(ft)),ft.material.uniforms.t2D.value=Rt,ft.material.uniforms.backgroundIntensity.value=wt.backgroundIntensity,ft.material.toneMapped=ColorManagement.getTransfer(Rt.colorSpace)!==SRGBTransfer,Rt.matrixAutoUpdate===!0&&Rt.updateMatrix(),ft.material.uniforms.uvTransform.value.copy(Rt.matrix),(mt!==Rt||gt!==Rt.version||xt!==nt.toneMapping)&&(ft.material.needsUpdate=!0,mt=Rt,gt=Rt.version,xt=nt.toneMapping),ft.layers.enableAll(),St.unshift(ft,ft.geometry,ft.material,0,0,null))}function vt(St,wt){St.getRGB(_rgb,getUnlitUniformColorSpace(nt)),st.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,wt,ut)}return{getClearColor:function(){return dt},setClearColor:function(St,wt=1){dt.set(St),ht=wt,vt(dt,ht)},getClearAlpha:function(){return ht},setClearAlpha:function(St){ht=St,vt(dt,ht)},render:yt}}function WebGLBindingStates(nt,rt,it,st){const lt=nt.getParameter(nt.MAX_VERTEX_ATTRIBS),ct=st.isWebGL2?null:rt.get("OES_vertex_array_object"),ut=st.isWebGL2||ct!==null,dt={},ht=St(null);let ft=ht,pt=!1;function mt($t,Vt,Ut,zt,Bt){let Ht=!1;if(ut){const Gt=vt(zt,Ut,Vt);ft!==Gt&&(ft=Gt,xt(ft.object)),Ht=wt($t,zt,Ut,Bt),Ht&&Et($t,zt,Ut,Bt)}else{const Gt=Vt.wireframe===!0;(ft.geometry!==zt.id||ft.program!==Ut.id||ft.wireframe!==Gt)&&(ft.geometry=zt.id,ft.program=Ut.id,ft.wireframe=Gt,Ht=!0)}Bt!==null&&it.update(Bt,nt.ELEMENT_ARRAY_BUFFER),(Ht||pt)&&(pt=!1,jt($t,Vt,Ut,zt),Bt!==null&&nt.bindBuffer(nt.ELEMENT_ARRAY_BUFFER,it.get(Bt).buffer))}function gt(){return st.isWebGL2?nt.createVertexArray():ct.createVertexArrayOES()}function xt($t){return st.isWebGL2?nt.bindVertexArray($t):ct.bindVertexArrayOES($t)}function yt($t){return st.isWebGL2?nt.deleteVertexArray($t):ct.deleteVertexArrayOES($t)}function vt($t,Vt,Ut){const zt=Ut.wireframe===!0;let Bt=dt[$t.id];Bt===void 0&&(Bt={},dt[$t.id]=Bt);let Ht=Bt[Vt.id];Ht===void 0&&(Ht={},Bt[Vt.id]=Ht);let Gt=Ht[zt];return Gt===void 0&&(Gt=St(gt()),Ht[zt]=Gt),Gt}function St($t){const Vt=[],Ut=[],zt=[];for(let Bt=0;Bt<lt;Bt++)Vt[Bt]=0,Ut[Bt]=0,zt[Bt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Vt,enabledAttributes:Ut,attributeDivisors:zt,object:$t,attributes:{},index:null}}function wt($t,Vt,Ut,zt){const Bt=ft.attributes,Ht=Vt.attributes;let Gt=0;const Xt=Ut.getAttributes();for(const Zt in Xt)if(Xt[Zt].location>=0){const nr=Bt[Zt];let ir=Ht[Zt];if(ir===void 0&&(Zt==="instanceMatrix"&&$t.instanceMatrix&&(ir=$t.instanceMatrix),Zt==="instanceColor"&&$t.instanceColor&&(ir=$t.instanceColor)),nr===void 0||nr.attribute!==ir||ir&&nr.data!==ir.data)return!0;Gt++}return ft.attributesNum!==Gt||ft.index!==zt}function Et($t,Vt,Ut,zt){const Bt={},Ht=Vt.attributes;let Gt=0;const Xt=Ut.getAttributes();for(const Zt in Xt)if(Xt[Zt].location>=0){let nr=Ht[Zt];nr===void 0&&(Zt==="instanceMatrix"&&$t.instanceMatrix&&(nr=$t.instanceMatrix),Zt==="instanceColor"&&$t.instanceColor&&(nr=$t.instanceColor));const ir={};ir.attribute=nr,nr&&nr.data&&(ir.data=nr.data),Bt[Zt]=ir,Gt++}ft.attributes=Bt,ft.attributesNum=Gt,ft.index=zt}function Rt(){const $t=ft.newAttributes;for(let Vt=0,Ut=$t.length;Vt<Ut;Vt++)$t[Vt]=0}function Tt($t){It($t,0)}function It($t,Vt){const Ut=ft.newAttributes,zt=ft.enabledAttributes,Bt=ft.attributeDivisors;Ut[$t]=1,zt[$t]===0&&(nt.enableVertexAttribArray($t),zt[$t]=1),Bt[$t]!==Vt&&((st.isWebGL2?nt:rt.get("ANGLE_instanced_arrays"))[st.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"]($t,Vt),Bt[$t]=Vt)}function At(){const $t=ft.newAttributes,Vt=ft.enabledAttributes;for(let Ut=0,zt=Vt.length;Ut<zt;Ut++)Vt[Ut]!==$t[Ut]&&(nt.disableVertexAttribArray(Ut),Vt[Ut]=0)}function Dt($t,Vt,Ut,zt,Bt,Ht,Gt){Gt===!0?nt.vertexAttribIPointer($t,Vt,Ut,Bt,Ht):nt.vertexAttribPointer($t,Vt,Ut,zt,Bt,Ht)}function jt($t,Vt,Ut,zt){if(st.isWebGL2===!1&&($t.isInstancedMesh||zt.isInstancedBufferGeometry)&&rt.get("ANGLE_instanced_arrays")===null)return;Rt();const Bt=zt.attributes,Ht=Ut.getAttributes(),Gt=Vt.defaultAttributeValues;for(const Xt in Ht){const Zt=Ht[Xt];if(Zt.location>=0){let hr=Bt[Xt];if(hr===void 0&&(Xt==="instanceMatrix"&&$t.instanceMatrix&&(hr=$t.instanceMatrix),Xt==="instanceColor"&&$t.instanceColor&&(hr=$t.instanceColor)),hr!==void 0){const nr=hr.normalized,ir=hr.itemSize,yr=it.get(hr);if(yr===void 0)continue;const Cr=yr.buffer,Sr=yr.type,xr=yr.bytesPerElement,gr=st.isWebGL2===!0&&(Sr===nt.INT||Sr===nt.UNSIGNED_INT||hr.gpuType===IntType);if(hr.isInterleavedBufferAttribute){const _r=hr.data,fr=_r.stride,Nr=hr.offset;if(_r.isInstancedInterleavedBuffer){for(let Tr=0;Tr<Zt.locationSize;Tr++)It(Zt.location+Tr,_r.meshPerAttribute);$t.isInstancedMesh!==!0&&zt._maxInstanceCount===void 0&&(zt._maxInstanceCount=_r.meshPerAttribute*_r.count)}else for(let Tr=0;Tr<Zt.locationSize;Tr++)Tt(Zt.location+Tr);nt.bindBuffer(nt.ARRAY_BUFFER,Cr);for(let Tr=0;Tr<Zt.locationSize;Tr++)Dt(Zt.location+Tr,ir/Zt.locationSize,Sr,nr,fr*xr,(Nr+ir/Zt.locationSize*Tr)*xr,gr)}else{if(hr.isInstancedBufferAttribute){for(let _r=0;_r<Zt.locationSize;_r++)It(Zt.location+_r,hr.meshPerAttribute);$t.isInstancedMesh!==!0&&zt._maxInstanceCount===void 0&&(zt._maxInstanceCount=hr.meshPerAttribute*hr.count)}else for(let _r=0;_r<Zt.locationSize;_r++)Tt(Zt.location+_r);nt.bindBuffer(nt.ARRAY_BUFFER,Cr);for(let _r=0;_r<Zt.locationSize;_r++)Dt(Zt.location+_r,ir/Zt.locationSize,Sr,nr,ir*xr,ir/Zt.locationSize*_r*xr,gr)}}else if(Gt!==void 0){const nr=Gt[Xt];if(nr!==void 0)switch(nr.length){case 2:nt.vertexAttrib2fv(Zt.location,nr);break;case 3:nt.vertexAttrib3fv(Zt.location,nr);break;case 4:nt.vertexAttrib4fv(Zt.location,nr);break;default:nt.vertexAttrib1fv(Zt.location,nr)}}}}At()}function Ft(){Ot();for(const $t in dt){const Vt=dt[$t];for(const Ut in Vt){const zt=Vt[Ut];for(const Bt in zt)yt(zt[Bt].object),delete zt[Bt];delete Vt[Ut]}delete dt[$t]}}function Lt($t){if(dt[$t.id]===void 0)return;const Vt=dt[$t.id];for(const Ut in Vt){const zt=Vt[Ut];for(const Bt in zt)yt(zt[Bt].object),delete zt[Bt];delete Vt[Ut]}delete dt[$t.id]}function Mt($t){for(const Vt in dt){const Ut=dt[Vt];if(Ut[$t.id]===void 0)continue;const zt=Ut[$t.id];for(const Bt in zt)yt(zt[Bt].object),delete zt[Bt];delete Ut[$t.id]}}function Ot(){Nt(),pt=!0,ft!==ht&&(ft=ht,xt(ft.object))}function Nt(){ht.geometry=null,ht.program=null,ht.wireframe=!1}return{setup:mt,reset:Ot,resetDefaultState:Nt,dispose:Ft,releaseStatesOfGeometry:Lt,releaseStatesOfProgram:Mt,initAttributes:Rt,enableAttribute:Tt,disableUnusedAttributes:At}}function WebGLBufferRenderer(nt,rt,it,st){const lt=st.isWebGL2;let ct;function ut(pt){ct=pt}function dt(pt,mt){nt.drawArrays(ct,pt,mt),it.update(mt,ct,1)}function ht(pt,mt,gt){if(gt===0)return;let xt,yt;if(lt)xt=nt,yt="drawArraysInstanced";else if(xt=rt.get("ANGLE_instanced_arrays"),yt="drawArraysInstancedANGLE",xt===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}xt[yt](ct,pt,mt,gt),it.update(mt,ct,gt)}function ft(pt,mt,gt){if(gt===0)return;const xt=rt.get("WEBGL_multi_draw");if(xt===null)for(let yt=0;yt<gt;yt++)this.render(pt[yt],mt[yt]);else{xt.multiDrawArraysWEBGL(ct,pt,0,mt,0,gt);let yt=0;for(let vt=0;vt<gt;vt++)yt+=mt[vt];it.update(yt,ct,1)}}this.setMode=ut,this.render=dt,this.renderInstances=ht,this.renderMultiDraw=ft}function WebGLCapabilities(nt,rt,it){let st;function lt(){if(st!==void 0)return st;if(rt.has("EXT_texture_filter_anisotropic")===!0){const Dt=rt.get("EXT_texture_filter_anisotropic");st=nt.getParameter(Dt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else st=0;return st}function ct(Dt){if(Dt==="highp"){if(nt.getShaderPrecisionFormat(nt.VERTEX_SHADER,nt.HIGH_FLOAT).precision>0&&nt.getShaderPrecisionFormat(nt.FRAGMENT_SHADER,nt.HIGH_FLOAT).precision>0)return"highp";Dt="mediump"}return Dt==="mediump"&&nt.getShaderPrecisionFormat(nt.VERTEX_SHADER,nt.MEDIUM_FLOAT).precision>0&&nt.getShaderPrecisionFormat(nt.FRAGMENT_SHADER,nt.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const ut=typeof WebGL2RenderingContext<"u"&&nt.constructor.name==="WebGL2RenderingContext";let dt=it.precision!==void 0?it.precision:"highp";const ht=ct(dt);ht!==dt&&(console.warn("THREE.WebGLRenderer:",dt,"not supported, using",ht,"instead."),dt=ht);const ft=ut||rt.has("WEBGL_draw_buffers"),pt=it.logarithmicDepthBuffer===!0,mt=nt.getParameter(nt.MAX_TEXTURE_IMAGE_UNITS),gt=nt.getParameter(nt.MAX_VERTEX_TEXTURE_IMAGE_UNITS),xt=nt.getParameter(nt.MAX_TEXTURE_SIZE),yt=nt.getParameter(nt.MAX_CUBE_MAP_TEXTURE_SIZE),vt=nt.getParameter(nt.MAX_VERTEX_ATTRIBS),St=nt.getParameter(nt.MAX_VERTEX_UNIFORM_VECTORS),wt=nt.getParameter(nt.MAX_VARYING_VECTORS),Et=nt.getParameter(nt.MAX_FRAGMENT_UNIFORM_VECTORS),Rt=gt>0,Tt=ut||rt.has("OES_texture_float"),It=Rt&&Tt,At=ut?nt.getParameter(nt.MAX_SAMPLES):0;return{isWebGL2:ut,drawBuffers:ft,getMaxAnisotropy:lt,getMaxPrecision:ct,precision:dt,logarithmicDepthBuffer:pt,maxTextures:mt,maxVertexTextures:gt,maxTextureSize:xt,maxCubemapSize:yt,maxAttributes:vt,maxVertexUniforms:St,maxVaryings:wt,maxFragmentUniforms:Et,vertexTextures:Rt,floatFragmentTextures:Tt,floatVertexTextures:It,maxSamples:At}}function WebGLClipping(nt){const rt=this;let it=null,st=0,lt=!1,ct=!1;const ut=new Plane,dt=new Matrix3,ht={value:null,needsUpdate:!1};this.uniform=ht,this.numPlanes=0,this.numIntersection=0,this.init=function(mt,gt){const xt=mt.length!==0||gt||st!==0||lt;return lt=gt,st=mt.length,xt},this.beginShadows=function(){ct=!0,pt(null)},this.endShadows=function(){ct=!1},this.setGlobalState=function(mt,gt){it=pt(mt,gt,0)},this.setState=function(mt,gt,xt){const yt=mt.clippingPlanes,vt=mt.clipIntersection,St=mt.clipShadows,wt=nt.get(mt);if(!lt||yt===null||yt.length===0||ct&&!St)ct?pt(null):ft();else{const Et=ct?0:st,Rt=Et*4;let Tt=wt.clippingState||null;ht.value=Tt,Tt=pt(yt,gt,Rt,xt);for(let It=0;It!==Rt;++It)Tt[It]=it[It];wt.clippingState=Tt,this.numIntersection=vt?this.numPlanes:0,this.numPlanes+=Et}};function ft(){ht.value!==it&&(ht.value=it,ht.needsUpdate=st>0),rt.numPlanes=st,rt.numIntersection=0}function pt(mt,gt,xt,yt){const vt=mt!==null?mt.length:0;let St=null;if(vt!==0){if(St=ht.value,yt!==!0||St===null){const wt=xt+vt*4,Et=gt.matrixWorldInverse;dt.getNormalMatrix(Et),(St===null||St.length<wt)&&(St=new Float32Array(wt));for(let Rt=0,Tt=xt;Rt!==vt;++Rt,Tt+=4)ut.copy(mt[Rt]).applyMatrix4(Et,dt),ut.normal.toArray(St,Tt),St[Tt+3]=ut.constant}ht.value=St,ht.needsUpdate=!0}return rt.numPlanes=vt,rt.numIntersection=0,St}}function WebGLCubeMaps(nt){let rt=new WeakMap;function it(ut,dt){return dt===EquirectangularReflectionMapping?ut.mapping=CubeReflectionMapping:dt===EquirectangularRefractionMapping&&(ut.mapping=CubeRefractionMapping),ut}function st(ut){if(ut&&ut.isTexture){const dt=ut.mapping;if(dt===EquirectangularReflectionMapping||dt===EquirectangularRefractionMapping)if(rt.has(ut)){const ht=rt.get(ut).texture;return it(ht,ut.mapping)}else{const ht=ut.image;if(ht&&ht.height>0){const ft=new WebGLCubeRenderTarget(ht.height);return ft.fromEquirectangularTexture(nt,ut),rt.set(ut,ft),ut.addEventListener("dispose",lt),it(ft.texture,ut.mapping)}else return null}}return ut}function lt(ut){const dt=ut.target;dt.removeEventListener("dispose",lt);const ht=rt.get(dt);ht!==void 0&&(rt.delete(dt),ht.dispose())}function ct(){rt=new WeakMap}return{get:st,dispose:ct}}class OrthographicCamera extends Camera{constructor(rt=-1,it=1,st=1,lt=-1,ct=.1,ut=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=rt,this.right=it,this.top=st,this.bottom=lt,this.near=ct,this.far=ut,this.updateProjectionMatrix()}copy(rt,it){return super.copy(rt,it),this.left=rt.left,this.right=rt.right,this.top=rt.top,this.bottom=rt.bottom,this.near=rt.near,this.far=rt.far,this.zoom=rt.zoom,this.view=rt.view===null?null:Object.assign({},rt.view),this}setViewOffset(rt,it,st,lt,ct,ut){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=rt,this.view.fullHeight=it,this.view.offsetX=st,this.view.offsetY=lt,this.view.width=ct,this.view.height=ut,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const rt=(this.right-this.left)/(2*this.zoom),it=(this.top-this.bottom)/(2*this.zoom),st=(this.right+this.left)/2,lt=(this.top+this.bottom)/2;let ct=st-rt,ut=st+rt,dt=lt+it,ht=lt-it;if(this.view!==null&&this.view.enabled){const ft=(this.right-this.left)/this.view.fullWidth/this.zoom,pt=(this.top-this.bottom)/this.view.fullHeight/this.zoom;ct+=ft*this.view.offsetX,ut=ct+ft*this.view.width,dt-=pt*this.view.offsetY,ht=dt-pt*this.view.height}this.projectionMatrix.makeOrthographic(ct,ut,dt,ht,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(rt){const it=super.toJSON(rt);return it.object.zoom=this.zoom,it.object.left=this.left,it.object.right=this.right,it.object.top=this.top,it.object.bottom=this.bottom,it.object.near=this.near,it.object.far=this.far,this.view!==null&&(it.object.view=Object.assign({},this.view)),it}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(rt){this._renderer=rt,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(rt,it=0,st=.1,lt=100){_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),this._setSize(256);const ct=this._allocateTargets();return ct.depthBuffer=!0,this._sceneToCubeUV(rt,st,lt,ct),it>0&&this._blur(ct,0,0,it),this._applyPMREM(ct),this._cleanup(ct),ct}fromEquirectangular(rt,it=null){return this._fromTexture(rt,it)}fromCubemap(rt,it=null){return this._fromTexture(rt,it)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(rt){this._lodMax=Math.floor(Math.log2(rt)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let rt=0;rt<this._lodPlanes.length;rt++)this._lodPlanes[rt].dispose()}_cleanup(rt){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),rt.scissorTest=!1,_setViewport(rt,0,0,rt.width,rt.height)}_fromTexture(rt,it){rt.mapping===CubeReflectionMapping||rt.mapping===CubeRefractionMapping?this._setSize(rt.image.length===0?16:rt.image[0].width||rt.image[0].image.width):this._setSize(rt.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel();const st=it||this._allocateTargets();return this._textureToCubeUV(rt,st),this._applyPMREM(st),this._cleanup(st),st}_allocateTargets(){const rt=3*Math.max(this._cubeSize,112),it=4*this._cubeSize,st={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},lt=_createRenderTarget(rt,it,st);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==rt||this._pingPongRenderTarget.height!==it){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(rt,it,st);const{_lodMax:ct}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(ct)),this._blurMaterial=_getBlurShader(ct,rt,it)}return lt}_compileMaterial(rt){const it=new Mesh(this._lodPlanes[0],rt);this._renderer.compile(it,_flatCamera)}_sceneToCubeUV(rt,it,st,lt){const dt=new PerspectiveCamera(90,1,it,st),ht=[1,-1,1,1,1,1],ft=[1,1,1,-1,-1,-1],pt=this._renderer,mt=pt.autoClear,gt=pt.toneMapping;pt.getClearColor(_clearColor),pt.toneMapping=NoToneMapping,pt.autoClear=!1;const xt=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),yt=new Mesh(new BoxGeometry,xt);let vt=!1;const St=rt.background;St?St.isColor&&(xt.color.copy(St),rt.background=null,vt=!0):(xt.color.copy(_clearColor),vt=!0);for(let wt=0;wt<6;wt++){const Et=wt%3;Et===0?(dt.up.set(0,ht[wt],0),dt.lookAt(ft[wt],0,0)):Et===1?(dt.up.set(0,0,ht[wt]),dt.lookAt(0,ft[wt],0)):(dt.up.set(0,ht[wt],0),dt.lookAt(0,0,ft[wt]));const Rt=this._cubeSize;_setViewport(lt,Et*Rt,wt>2?Rt:0,Rt,Rt),pt.setRenderTarget(lt),vt&&pt.render(yt,dt),pt.render(rt,dt)}yt.geometry.dispose(),yt.material.dispose(),pt.toneMapping=gt,pt.autoClear=mt,rt.background=St}_textureToCubeUV(rt,it){const st=this._renderer,lt=rt.mapping===CubeReflectionMapping||rt.mapping===CubeRefractionMapping;lt?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=rt.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const ct=lt?this._cubemapMaterial:this._equirectMaterial,ut=new Mesh(this._lodPlanes[0],ct),dt=ct.uniforms;dt.envMap.value=rt;const ht=this._cubeSize;_setViewport(it,0,0,3*ht,2*ht),st.setRenderTarget(it),st.render(ut,_flatCamera)}_applyPMREM(rt){const it=this._renderer,st=it.autoClear;it.autoClear=!1;for(let lt=1;lt<this._lodPlanes.length;lt++){const ct=Math.sqrt(this._sigmas[lt]*this._sigmas[lt]-this._sigmas[lt-1]*this._sigmas[lt-1]),ut=_axisDirections[(lt-1)%_axisDirections.length];this._blur(rt,lt-1,lt,ct,ut)}it.autoClear=st}_blur(rt,it,st,lt,ct){const ut=this._pingPongRenderTarget;this._halfBlur(rt,ut,it,st,lt,"latitudinal",ct),this._halfBlur(ut,rt,st,st,lt,"longitudinal",ct)}_halfBlur(rt,it,st,lt,ct,ut,dt){const ht=this._renderer,ft=this._blurMaterial;ut!=="latitudinal"&&ut!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const pt=3,mt=new Mesh(this._lodPlanes[lt],ft),gt=ft.uniforms,xt=this._sizeLods[st]-1,yt=isFinite(ct)?Math.PI/(2*xt):2*Math.PI/(2*MAX_SAMPLES-1),vt=ct/yt,St=isFinite(ct)?1+Math.floor(pt*vt):MAX_SAMPLES;St>MAX_SAMPLES&&console.warn(`sigmaRadians, ${ct}, is too large and will clip, as it requested ${St} samples when the maximum is set to ${MAX_SAMPLES}`);const wt=[];let Et=0;for(let Dt=0;Dt<MAX_SAMPLES;++Dt){const jt=Dt/vt,Ft=Math.exp(-jt*jt/2);wt.push(Ft),Dt===0?Et+=Ft:Dt<St&&(Et+=2*Ft)}for(let Dt=0;Dt<wt.length;Dt++)wt[Dt]=wt[Dt]/Et;gt.envMap.value=rt.texture,gt.samples.value=St,gt.weights.value=wt,gt.latitudinal.value=ut==="latitudinal",dt&&(gt.poleAxis.value=dt);const{_lodMax:Rt}=this;gt.dTheta.value=yt,gt.mipInt.value=Rt-st;const Tt=this._sizeLods[lt],It=3*Tt*(lt>Rt-LOD_MIN?lt-Rt+LOD_MIN:0),At=4*(this._cubeSize-Tt);_setViewport(it,It,At,3*Tt,2*Tt),ht.setRenderTarget(it),ht.render(mt,_flatCamera)}}function _createPlanes(nt){const rt=[],it=[],st=[];let lt=nt;const ct=nt-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let ut=0;ut<ct;ut++){const dt=Math.pow(2,lt);it.push(dt);let ht=1/dt;ut>nt-LOD_MIN?ht=EXTRA_LOD_SIGMA[ut-nt+LOD_MIN-1]:ut===0&&(ht=0),st.push(ht);const ft=1/(dt-2),pt=-ft,mt=1+ft,gt=[pt,pt,mt,pt,mt,mt,pt,pt,mt,mt,pt,mt],xt=6,yt=6,vt=3,St=2,wt=1,Et=new Float32Array(vt*yt*xt),Rt=new Float32Array(St*yt*xt),Tt=new Float32Array(wt*yt*xt);for(let At=0;At<xt;At++){const Dt=At%3*2/3-1,jt=At>2?0:-1,Ft=[Dt,jt,0,Dt+2/3,jt,0,Dt+2/3,jt+1,0,Dt,jt,0,Dt+2/3,jt+1,0,Dt,jt+1,0];Et.set(Ft,vt*yt*At),Rt.set(gt,St*yt*At);const Lt=[At,At,At,At,At,At];Tt.set(Lt,wt*yt*At)}const It=new BufferGeometry;It.setAttribute("position",new BufferAttribute(Et,vt)),It.setAttribute("uv",new BufferAttribute(Rt,St)),It.setAttribute("faceIndex",new BufferAttribute(Tt,wt)),rt.push(It),lt>LOD_MIN&&lt--}return{lodPlanes:rt,sizeLods:it,sigmas:st}}function _createRenderTarget(nt,rt,it){const st=new WebGLRenderTarget(nt,rt,it);return st.texture.mapping=CubeUVReflectionMapping,st.texture.name="PMREM.cubeUv",st.scissorTest=!0,st}function _setViewport(nt,rt,it,st,lt){nt.viewport.set(rt,it,st,lt),nt.scissor.set(rt,it,st,lt)}function _getBlurShader(nt,rt,it){const st=new Float32Array(MAX_SAMPLES),lt=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/rt,CUBEUV_TEXEL_HEIGHT:1/it,CUBEUV_MAX_MIP:`${nt}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:st},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:lt}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(nt){let rt=new WeakMap,it=null;function st(dt){if(dt&&dt.isTexture){const ht=dt.mapping,ft=ht===EquirectangularReflectionMapping||ht===EquirectangularRefractionMapping,pt=ht===CubeReflectionMapping||ht===CubeRefractionMapping;if(ft||pt)if(dt.isRenderTargetTexture&&dt.needsPMREMUpdate===!0){dt.needsPMREMUpdate=!1;let mt=rt.get(dt);return it===null&&(it=new PMREMGenerator(nt)),mt=ft?it.fromEquirectangular(dt,mt):it.fromCubemap(dt,mt),rt.set(dt,mt),mt.texture}else{if(rt.has(dt))return rt.get(dt).texture;{const mt=dt.image;if(ft&&mt&&mt.height>0||pt&&mt&&lt(mt)){it===null&&(it=new PMREMGenerator(nt));const gt=ft?it.fromEquirectangular(dt):it.fromCubemap(dt);return rt.set(dt,gt),dt.addEventListener("dispose",ct),gt.texture}else return null}}}return dt}function lt(dt){let ht=0;const ft=6;for(let pt=0;pt<ft;pt++)dt[pt]!==void 0&&ht++;return ht===ft}function ct(dt){const ht=dt.target;ht.removeEventListener("dispose",ct);const ft=rt.get(ht);ft!==void 0&&(rt.delete(ht),ft.dispose())}function ut(){rt=new WeakMap,it!==null&&(it.dispose(),it=null)}return{get:st,dispose:ut}}function WebGLExtensions(nt){const rt={};function it(st){if(rt[st]!==void 0)return rt[st];let lt;switch(st){case"WEBGL_depth_texture":lt=nt.getExtension("WEBGL_depth_texture")||nt.getExtension("MOZ_WEBGL_depth_texture")||nt.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":lt=nt.getExtension("EXT_texture_filter_anisotropic")||nt.getExtension("MOZ_EXT_texture_filter_anisotropic")||nt.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":lt=nt.getExtension("WEBGL_compressed_texture_s3tc")||nt.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||nt.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":lt=nt.getExtension("WEBGL_compressed_texture_pvrtc")||nt.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:lt=nt.getExtension(st)}return rt[st]=lt,lt}return{has:function(st){return it(st)!==null},init:function(st){st.isWebGL2?(it("EXT_color_buffer_float"),it("WEBGL_clip_cull_distance")):(it("WEBGL_depth_texture"),it("OES_texture_float"),it("OES_texture_half_float"),it("OES_texture_half_float_linear"),it("OES_standard_derivatives"),it("OES_element_index_uint"),it("OES_vertex_array_object"),it("ANGLE_instanced_arrays")),it("OES_texture_float_linear"),it("EXT_color_buffer_half_float"),it("WEBGL_multisampled_render_to_texture")},get:function(st){const lt=it(st);return lt===null&&console.warn("THREE.WebGLRenderer: "+st+" extension not supported."),lt}}}function WebGLGeometries(nt,rt,it,st){const lt={},ct=new WeakMap;function ut(mt){const gt=mt.target;gt.index!==null&&rt.remove(gt.index);for(const yt in gt.attributes)rt.remove(gt.attributes[yt]);for(const yt in gt.morphAttributes){const vt=gt.morphAttributes[yt];for(let St=0,wt=vt.length;St<wt;St++)rt.remove(vt[St])}gt.removeEventListener("dispose",ut),delete lt[gt.id];const xt=ct.get(gt);xt&&(rt.remove(xt),ct.delete(gt)),st.releaseStatesOfGeometry(gt),gt.isInstancedBufferGeometry===!0&&delete gt._maxInstanceCount,it.memory.geometries--}function dt(mt,gt){return lt[gt.id]===!0||(gt.addEventListener("dispose",ut),lt[gt.id]=!0,it.memory.geometries++),gt}function ht(mt){const gt=mt.attributes;for(const yt in gt)rt.update(gt[yt],nt.ARRAY_BUFFER);const xt=mt.morphAttributes;for(const yt in xt){const vt=xt[yt];for(let St=0,wt=vt.length;St<wt;St++)rt.update(vt[St],nt.ARRAY_BUFFER)}}function ft(mt){const gt=[],xt=mt.index,yt=mt.attributes.position;let vt=0;if(xt!==null){const Et=xt.array;vt=xt.version;for(let Rt=0,Tt=Et.length;Rt<Tt;Rt+=3){const It=Et[Rt+0],At=Et[Rt+1],Dt=Et[Rt+2];gt.push(It,At,At,Dt,Dt,It)}}else if(yt!==void 0){const Et=yt.array;vt=yt.version;for(let Rt=0,Tt=Et.length/3-1;Rt<Tt;Rt+=3){const It=Rt+0,At=Rt+1,Dt=Rt+2;gt.push(It,At,At,Dt,Dt,It)}}else return;const St=new(arrayNeedsUint32(gt)?Uint32BufferAttribute:Uint16BufferAttribute)(gt,1);St.version=vt;const wt=ct.get(mt);wt&&rt.remove(wt),ct.set(mt,St)}function pt(mt){const gt=ct.get(mt);if(gt){const xt=mt.index;xt!==null&&gt.version<xt.version&&ft(mt)}else ft(mt);return ct.get(mt)}return{get:dt,update:ht,getWireframeAttribute:pt}}function WebGLIndexedBufferRenderer(nt,rt,it,st){const lt=st.isWebGL2;let ct;function ut(xt){ct=xt}let dt,ht;function ft(xt){dt=xt.type,ht=xt.bytesPerElement}function pt(xt,yt){nt.drawElements(ct,yt,dt,xt*ht),it.update(yt,ct,1)}function mt(xt,yt,vt){if(vt===0)return;let St,wt;if(lt)St=nt,wt="drawElementsInstanced";else if(St=rt.get("ANGLE_instanced_arrays"),wt="drawElementsInstancedANGLE",St===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}St[wt](ct,yt,dt,xt*ht,vt),it.update(yt,ct,vt)}function gt(xt,yt,vt){if(vt===0)return;const St=rt.get("WEBGL_multi_draw");if(St===null)for(let wt=0;wt<vt;wt++)this.render(xt[wt]/ht,yt[wt]);else{St.multiDrawElementsWEBGL(ct,yt,0,dt,xt,0,vt);let wt=0;for(let Et=0;Et<vt;Et++)wt+=yt[Et];it.update(wt,ct,1)}}this.setMode=ut,this.setIndex=ft,this.render=pt,this.renderInstances=mt,this.renderMultiDraw=gt}function WebGLInfo(nt){const rt={geometries:0,textures:0},it={frame:0,calls:0,triangles:0,points:0,lines:0};function st(ct,ut,dt){switch(it.calls++,ut){case nt.TRIANGLES:it.triangles+=dt*(ct/3);break;case nt.LINES:it.lines+=dt*(ct/2);break;case nt.LINE_STRIP:it.lines+=dt*(ct-1);break;case nt.LINE_LOOP:it.lines+=dt*ct;break;case nt.POINTS:it.points+=dt*ct;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",ut);break}}function lt(){it.calls=0,it.triangles=0,it.points=0,it.lines=0}return{memory:rt,render:it,programs:null,autoReset:!0,reset:lt,update:st}}function numericalSort(nt,rt){return nt[0]-rt[0]}function absNumericalSort(nt,rt){return Math.abs(rt[1])-Math.abs(nt[1])}function WebGLMorphtargets(nt,rt,it){const st={},lt=new Float32Array(8),ct=new WeakMap,ut=new Vector4,dt=[];for(let ft=0;ft<8;ft++)dt[ft]=[ft,0];function ht(ft,pt,mt){const gt=ft.morphTargetInfluences;if(rt.isWebGL2===!0){const xt=pt.morphAttributes.position||pt.morphAttributes.normal||pt.morphAttributes.color,yt=xt!==void 0?xt.length:0;let vt=ct.get(pt);if(vt===void 0||vt.count!==yt){let Et=function(){Nt.dispose(),ct.delete(pt),pt.removeEventListener("dispose",Et)};vt!==void 0&&vt.texture.dispose();const Rt=pt.morphAttributes.position!==void 0,Tt=pt.morphAttributes.normal!==void 0,It=pt.morphAttributes.color!==void 0,At=pt.morphAttributes.position||[],Dt=pt.morphAttributes.normal||[],jt=pt.morphAttributes.color||[];let Ft=0;Rt===!0&&(Ft=1),Tt===!0&&(Ft=2),It===!0&&(Ft=3);let Lt=pt.attributes.position.count*Ft,Mt=1;Lt>rt.maxTextureSize&&(Mt=Math.ceil(Lt/rt.maxTextureSize),Lt=rt.maxTextureSize);const Ot=new Float32Array(Lt*Mt*4*yt),Nt=new DataArrayTexture(Ot,Lt,Mt,yt);Nt.type=FloatType,Nt.needsUpdate=!0;const $t=Ft*4;for(let Vt=0;Vt<yt;Vt++){const Ut=At[Vt],zt=Dt[Vt],Bt=jt[Vt],Ht=Lt*Mt*4*Vt;for(let Gt=0;Gt<Ut.count;Gt++){const Xt=Gt*$t;Rt===!0&&(ut.fromBufferAttribute(Ut,Gt),Ot[Ht+Xt+0]=ut.x,Ot[Ht+Xt+1]=ut.y,Ot[Ht+Xt+2]=ut.z,Ot[Ht+Xt+3]=0),Tt===!0&&(ut.fromBufferAttribute(zt,Gt),Ot[Ht+Xt+4]=ut.x,Ot[Ht+Xt+5]=ut.y,Ot[Ht+Xt+6]=ut.z,Ot[Ht+Xt+7]=0),It===!0&&(ut.fromBufferAttribute(Bt,Gt),Ot[Ht+Xt+8]=ut.x,Ot[Ht+Xt+9]=ut.y,Ot[Ht+Xt+10]=ut.z,Ot[Ht+Xt+11]=Bt.itemSize===4?ut.w:1)}}vt={count:yt,texture:Nt,size:new Vector2(Lt,Mt)},ct.set(pt,vt),pt.addEventListener("dispose",Et)}let St=0;for(let Et=0;Et<gt.length;Et++)St+=gt[Et];const wt=pt.morphTargetsRelative?1:1-St;mt.getUniforms().setValue(nt,"morphTargetBaseInfluence",wt),mt.getUniforms().setValue(nt,"morphTargetInfluences",gt),mt.getUniforms().setValue(nt,"morphTargetsTexture",vt.texture,it),mt.getUniforms().setValue(nt,"morphTargetsTextureSize",vt.size)}else{const xt=gt===void 0?0:gt.length;let yt=st[pt.id];if(yt===void 0||yt.length!==xt){yt=[];for(let Rt=0;Rt<xt;Rt++)yt[Rt]=[Rt,0];st[pt.id]=yt}for(let Rt=0;Rt<xt;Rt++){const Tt=yt[Rt];Tt[0]=Rt,Tt[1]=gt[Rt]}yt.sort(absNumericalSort);for(let Rt=0;Rt<8;Rt++)Rt<xt&&yt[Rt][1]?(dt[Rt][0]=yt[Rt][0],dt[Rt][1]=yt[Rt][1]):(dt[Rt][0]=Number.MAX_SAFE_INTEGER,dt[Rt][1]=0);dt.sort(numericalSort);const vt=pt.morphAttributes.position,St=pt.morphAttributes.normal;let wt=0;for(let Rt=0;Rt<8;Rt++){const Tt=dt[Rt],It=Tt[0],At=Tt[1];It!==Number.MAX_SAFE_INTEGER&&At?(vt&&pt.getAttribute("morphTarget"+Rt)!==vt[It]&&pt.setAttribute("morphTarget"+Rt,vt[It]),St&&pt.getAttribute("morphNormal"+Rt)!==St[It]&&pt.setAttribute("morphNormal"+Rt,St[It]),lt[Rt]=At,wt+=At):(vt&&pt.hasAttribute("morphTarget"+Rt)===!0&&pt.deleteAttribute("morphTarget"+Rt),St&&pt.hasAttribute("morphNormal"+Rt)===!0&&pt.deleteAttribute("morphNormal"+Rt),lt[Rt]=0)}const Et=pt.morphTargetsRelative?1:1-wt;mt.getUniforms().setValue(nt,"morphTargetBaseInfluence",Et),mt.getUniforms().setValue(nt,"morphTargetInfluences",lt)}}return{update:ht}}function WebGLObjects(nt,rt,it,st){let lt=new WeakMap;function ct(ht){const ft=st.render.frame,pt=ht.geometry,mt=rt.get(ht,pt);if(lt.get(mt)!==ft&&(rt.update(mt),lt.set(mt,ft)),ht.isInstancedMesh&&(ht.hasEventListener("dispose",dt)===!1&&ht.addEventListener("dispose",dt),lt.get(ht)!==ft&&(it.update(ht.instanceMatrix,nt.ARRAY_BUFFER),ht.instanceColor!==null&&it.update(ht.instanceColor,nt.ARRAY_BUFFER),lt.set(ht,ft))),ht.isSkinnedMesh){const gt=ht.skeleton;lt.get(gt)!==ft&&(gt.update(),lt.set(gt,ft))}return mt}function ut(){lt=new WeakMap}function dt(ht){const ft=ht.target;ft.removeEventListener("dispose",dt),it.remove(ft.instanceMatrix),ft.instanceColor!==null&&it.remove(ft.instanceColor)}return{update:ct,dispose:ut}}class DepthTexture extends Texture{constructor(rt,it,st,lt,ct,ut,dt,ht,ft,pt){if(pt=pt!==void 0?pt:DepthFormat,pt!==DepthFormat&&pt!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");st===void 0&&pt===DepthFormat&&(st=UnsignedIntType),st===void 0&&pt===DepthStencilFormat&&(st=UnsignedInt248Type),super(null,lt,ct,ut,dt,ht,pt,st,ft),this.isDepthTexture=!0,this.image={width:rt,height:it},this.magFilter=dt!==void 0?dt:NearestFilter,this.minFilter=ht!==void 0?ht:NearestFilter,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(rt){return super.copy(rt),this.compareFunction=rt.compareFunction,this}toJSON(rt){const it=super.toJSON(rt);return this.compareFunction!==null&&(it.compareFunction=this.compareFunction),it}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1);emptyShadowTexture.compareFunction=LessEqualCompare;const emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(nt,rt,it){const st=nt[0];if(st<=0||st>0)return nt;const lt=rt*it;let ct=arrayCacheF32[lt];if(ct===void 0&&(ct=new Float32Array(lt),arrayCacheF32[lt]=ct),rt!==0){st.toArray(ct,0);for(let ut=1,dt=0;ut!==rt;++ut)dt+=it,nt[ut].toArray(ct,dt)}return ct}function arraysEqual(nt,rt){if(nt.length!==rt.length)return!1;for(let it=0,st=nt.length;it<st;it++)if(nt[it]!==rt[it])return!1;return!0}function copyArray(nt,rt){for(let it=0,st=rt.length;it<st;it++)nt[it]=rt[it]}function allocTexUnits(nt,rt){let it=arrayCacheI32[rt];it===void 0&&(it=new Int32Array(rt),arrayCacheI32[rt]=it);for(let st=0;st!==rt;++st)it[st]=nt.allocateTextureUnit();return it}function setValueV1f(nt,rt){const it=this.cache;it[0]!==rt&&(nt.uniform1f(this.addr,rt),it[0]=rt)}function setValueV2f(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y)&&(nt.uniform2f(this.addr,rt.x,rt.y),it[0]=rt.x,it[1]=rt.y);else{if(arraysEqual(it,rt))return;nt.uniform2fv(this.addr,rt),copyArray(it,rt)}}function setValueV3f(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y||it[2]!==rt.z)&&(nt.uniform3f(this.addr,rt.x,rt.y,rt.z),it[0]=rt.x,it[1]=rt.y,it[2]=rt.z);else if(rt.r!==void 0)(it[0]!==rt.r||it[1]!==rt.g||it[2]!==rt.b)&&(nt.uniform3f(this.addr,rt.r,rt.g,rt.b),it[0]=rt.r,it[1]=rt.g,it[2]=rt.b);else{if(arraysEqual(it,rt))return;nt.uniform3fv(this.addr,rt),copyArray(it,rt)}}function setValueV4f(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y||it[2]!==rt.z||it[3]!==rt.w)&&(nt.uniform4f(this.addr,rt.x,rt.y,rt.z,rt.w),it[0]=rt.x,it[1]=rt.y,it[2]=rt.z,it[3]=rt.w);else{if(arraysEqual(it,rt))return;nt.uniform4fv(this.addr,rt),copyArray(it,rt)}}function setValueM2(nt,rt){const it=this.cache,st=rt.elements;if(st===void 0){if(arraysEqual(it,rt))return;nt.uniformMatrix2fv(this.addr,!1,rt),copyArray(it,rt)}else{if(arraysEqual(it,st))return;mat2array.set(st),nt.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(it,st)}}function setValueM3(nt,rt){const it=this.cache,st=rt.elements;if(st===void 0){if(arraysEqual(it,rt))return;nt.uniformMatrix3fv(this.addr,!1,rt),copyArray(it,rt)}else{if(arraysEqual(it,st))return;mat3array.set(st),nt.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(it,st)}}function setValueM4(nt,rt){const it=this.cache,st=rt.elements;if(st===void 0){if(arraysEqual(it,rt))return;nt.uniformMatrix4fv(this.addr,!1,rt),copyArray(it,rt)}else{if(arraysEqual(it,st))return;mat4array.set(st),nt.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(it,st)}}function setValueV1i(nt,rt){const it=this.cache;it[0]!==rt&&(nt.uniform1i(this.addr,rt),it[0]=rt)}function setValueV2i(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y)&&(nt.uniform2i(this.addr,rt.x,rt.y),it[0]=rt.x,it[1]=rt.y);else{if(arraysEqual(it,rt))return;nt.uniform2iv(this.addr,rt),copyArray(it,rt)}}function setValueV3i(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y||it[2]!==rt.z)&&(nt.uniform3i(this.addr,rt.x,rt.y,rt.z),it[0]=rt.x,it[1]=rt.y,it[2]=rt.z);else{if(arraysEqual(it,rt))return;nt.uniform3iv(this.addr,rt),copyArray(it,rt)}}function setValueV4i(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y||it[2]!==rt.z||it[3]!==rt.w)&&(nt.uniform4i(this.addr,rt.x,rt.y,rt.z,rt.w),it[0]=rt.x,it[1]=rt.y,it[2]=rt.z,it[3]=rt.w);else{if(arraysEqual(it,rt))return;nt.uniform4iv(this.addr,rt),copyArray(it,rt)}}function setValueV1ui(nt,rt){const it=this.cache;it[0]!==rt&&(nt.uniform1ui(this.addr,rt),it[0]=rt)}function setValueV2ui(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y)&&(nt.uniform2ui(this.addr,rt.x,rt.y),it[0]=rt.x,it[1]=rt.y);else{if(arraysEqual(it,rt))return;nt.uniform2uiv(this.addr,rt),copyArray(it,rt)}}function setValueV3ui(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y||it[2]!==rt.z)&&(nt.uniform3ui(this.addr,rt.x,rt.y,rt.z),it[0]=rt.x,it[1]=rt.y,it[2]=rt.z);else{if(arraysEqual(it,rt))return;nt.uniform3uiv(this.addr,rt),copyArray(it,rt)}}function setValueV4ui(nt,rt){const it=this.cache;if(rt.x!==void 0)(it[0]!==rt.x||it[1]!==rt.y||it[2]!==rt.z||it[3]!==rt.w)&&(nt.uniform4ui(this.addr,rt.x,rt.y,rt.z,rt.w),it[0]=rt.x,it[1]=rt.y,it[2]=rt.z,it[3]=rt.w);else{if(arraysEqual(it,rt))return;nt.uniform4uiv(this.addr,rt),copyArray(it,rt)}}function setValueT1(nt,rt,it){const st=this.cache,lt=it.allocateTextureUnit();st[0]!==lt&&(nt.uniform1i(this.addr,lt),st[0]=lt);const ct=this.type===nt.SAMPLER_2D_SHADOW?emptyShadowTexture:emptyTexture;it.setTexture2D(rt||ct,lt)}function setValueT3D1(nt,rt,it){const st=this.cache,lt=it.allocateTextureUnit();st[0]!==lt&&(nt.uniform1i(this.addr,lt),st[0]=lt),it.setTexture3D(rt||empty3dTexture,lt)}function setValueT6(nt,rt,it){const st=this.cache,lt=it.allocateTextureUnit();st[0]!==lt&&(nt.uniform1i(this.addr,lt),st[0]=lt),it.setTextureCube(rt||emptyCubeTexture,lt)}function setValueT2DArray1(nt,rt,it){const st=this.cache,lt=it.allocateTextureUnit();st[0]!==lt&&(nt.uniform1i(this.addr,lt),st[0]=lt),it.setTexture2DArray(rt||emptyArrayTexture,lt)}function getSingularSetter(nt){switch(nt){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(nt,rt){nt.uniform1fv(this.addr,rt)}function setValueV2fArray(nt,rt){const it=flatten(rt,this.size,2);nt.uniform2fv(this.addr,it)}function setValueV3fArray(nt,rt){const it=flatten(rt,this.size,3);nt.uniform3fv(this.addr,it)}function setValueV4fArray(nt,rt){const it=flatten(rt,this.size,4);nt.uniform4fv(this.addr,it)}function setValueM2Array(nt,rt){const it=flatten(rt,this.size,4);nt.uniformMatrix2fv(this.addr,!1,it)}function setValueM3Array(nt,rt){const it=flatten(rt,this.size,9);nt.uniformMatrix3fv(this.addr,!1,it)}function setValueM4Array(nt,rt){const it=flatten(rt,this.size,16);nt.uniformMatrix4fv(this.addr,!1,it)}function setValueV1iArray(nt,rt){nt.uniform1iv(this.addr,rt)}function setValueV2iArray(nt,rt){nt.uniform2iv(this.addr,rt)}function setValueV3iArray(nt,rt){nt.uniform3iv(this.addr,rt)}function setValueV4iArray(nt,rt){nt.uniform4iv(this.addr,rt)}function setValueV1uiArray(nt,rt){nt.uniform1uiv(this.addr,rt)}function setValueV2uiArray(nt,rt){nt.uniform2uiv(this.addr,rt)}function setValueV3uiArray(nt,rt){nt.uniform3uiv(this.addr,rt)}function setValueV4uiArray(nt,rt){nt.uniform4uiv(this.addr,rt)}function setValueT1Array(nt,rt,it){const st=this.cache,lt=rt.length,ct=allocTexUnits(it,lt);arraysEqual(st,ct)||(nt.uniform1iv(this.addr,ct),copyArray(st,ct));for(let ut=0;ut!==lt;++ut)it.setTexture2D(rt[ut]||emptyTexture,ct[ut])}function setValueT3DArray(nt,rt,it){const st=this.cache,lt=rt.length,ct=allocTexUnits(it,lt);arraysEqual(st,ct)||(nt.uniform1iv(this.addr,ct),copyArray(st,ct));for(let ut=0;ut!==lt;++ut)it.setTexture3D(rt[ut]||empty3dTexture,ct[ut])}function setValueT6Array(nt,rt,it){const st=this.cache,lt=rt.length,ct=allocTexUnits(it,lt);arraysEqual(st,ct)||(nt.uniform1iv(this.addr,ct),copyArray(st,ct));for(let ut=0;ut!==lt;++ut)it.setTextureCube(rt[ut]||emptyCubeTexture,ct[ut])}function setValueT2DArrayArray(nt,rt,it){const st=this.cache,lt=rt.length,ct=allocTexUnits(it,lt);arraysEqual(st,ct)||(nt.uniform1iv(this.addr,ct),copyArray(st,ct));for(let ut=0;ut!==lt;++ut)it.setTexture2DArray(rt[ut]||emptyArrayTexture,ct[ut])}function getPureArraySetter(nt){switch(nt){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(rt,it,st){this.id=rt,this.addr=st,this.cache=[],this.type=it.type,this.setValue=getSingularSetter(it.type)}}class PureArrayUniform{constructor(rt,it,st){this.id=rt,this.addr=st,this.cache=[],this.type=it.type,this.size=it.size,this.setValue=getPureArraySetter(it.type)}}class StructuredUniform{constructor(rt){this.id=rt,this.seq=[],this.map={}}setValue(rt,it,st){const lt=this.seq;for(let ct=0,ut=lt.length;ct!==ut;++ct){const dt=lt[ct];dt.setValue(rt,it[dt.id],st)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(nt,rt){nt.seq.push(rt),nt.map[rt.id]=rt}function parseUniform(nt,rt,it){const st=nt.name,lt=st.length;for(RePathPart.lastIndex=0;;){const ct=RePathPart.exec(st),ut=RePathPart.lastIndex;let dt=ct[1];const ht=ct[2]==="]",ft=ct[3];if(ht&&(dt=dt|0),ft===void 0||ft==="["&&ut+2===lt){addUniform(it,ft===void 0?new SingleUniform(dt,nt,rt):new PureArrayUniform(dt,nt,rt));break}else{let mt=it.map[dt];mt===void 0&&(mt=new StructuredUniform(dt),addUniform(it,mt)),it=mt}}}class WebGLUniforms{constructor(rt,it){this.seq=[],this.map={};const st=rt.getProgramParameter(it,rt.ACTIVE_UNIFORMS);for(let lt=0;lt<st;++lt){const ct=rt.getActiveUniform(it,lt),ut=rt.getUniformLocation(it,ct.name);parseUniform(ct,ut,this)}}setValue(rt,it,st,lt){const ct=this.map[it];ct!==void 0&&ct.setValue(rt,st,lt)}setOptional(rt,it,st){const lt=it[st];lt!==void 0&&this.setValue(rt,st,lt)}static upload(rt,it,st,lt){for(let ct=0,ut=it.length;ct!==ut;++ct){const dt=it[ct],ht=st[dt.id];ht.needsUpdate!==!1&&dt.setValue(rt,ht.value,lt)}}static seqWithValue(rt,it){const st=[];for(let lt=0,ct=rt.length;lt!==ct;++lt){const ut=rt[lt];ut.id in it&&st.push(ut)}return st}}function WebGLShader(nt,rt,it){const st=nt.createShader(rt);return nt.shaderSource(st,it),nt.compileShader(st),st}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(nt,rt){const it=nt.split(`
`),st=[],lt=Math.max(rt-6,0),ct=Math.min(rt+6,it.length);for(let ut=lt;ut<ct;ut++){const dt=ut+1;st.push(`${dt===rt?">":" "} ${dt}: ${it[ut]}`)}return st.join(`
`)}function getEncodingComponents(nt){const rt=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),it=ColorManagement.getPrimaries(nt);let st;switch(rt===it?st="":rt===P3Primaries&&it===Rec709Primaries?st="LinearDisplayP3ToLinearSRGB":rt===Rec709Primaries&&it===P3Primaries&&(st="LinearSRGBToLinearDisplayP3"),nt){case LinearSRGBColorSpace:case LinearDisplayP3ColorSpace:return[st,"LinearTransferOETF"];case SRGBColorSpace:case DisplayP3ColorSpace:return[st,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",nt),[st,"LinearTransferOETF"]}}function getShaderErrors(nt,rt,it){const st=nt.getShaderParameter(rt,nt.COMPILE_STATUS),lt=nt.getShaderInfoLog(rt).trim();if(st&&lt==="")return"";const ct=/ERROR: 0:(\d+)/.exec(lt);if(ct){const ut=parseInt(ct[1]);return it.toUpperCase()+`

`+lt+`

`+handleSource(nt.getShaderSource(rt),ut)}else return lt}function getTexelEncodingFunction(nt,rt){const it=getEncodingComponents(rt);return`vec4 ${nt}( vec4 value ) { return ${it[0]}( ${it[1]}( value ) ); }`}function getToneMappingFunction(nt,rt){let it;switch(rt){case LinearToneMapping:it="Linear";break;case ReinhardToneMapping:it="Reinhard";break;case CineonToneMapping:it="OptimizedCineon";break;case ACESFilmicToneMapping:it="ACESFilmic";break;case AgXToneMapping:it="AgX";break;case CustomToneMapping:it="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",rt),it="Linear"}return"vec3 "+nt+"( vec3 color ) { return "+it+"ToneMapping( color ); }"}function generateExtensions(nt){return[nt.extensionDerivatives||nt.envMapCubeUVHeight||nt.bumpMap||nt.normalMapTangentSpace||nt.clearcoatNormalMap||nt.flatShading||nt.alphaToCoverage||nt.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(nt.extensionFragDepth||nt.logarithmicDepthBuffer)&&nt.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",nt.extensionDrawBuffers&&nt.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(nt.extensionShaderTextureLOD||nt.envMap||nt.transmission)&&nt.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateVertexExtensions(nt){return[nt.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",nt.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines(nt){const rt=[];for(const it in nt){const st=nt[it];st!==!1&&rt.push("#define "+it+" "+st)}return rt.join(`
`)}function fetchAttributeLocations(nt,rt){const it={},st=nt.getProgramParameter(rt,nt.ACTIVE_ATTRIBUTES);for(let lt=0;lt<st;lt++){const ct=nt.getActiveAttrib(rt,lt),ut=ct.name;let dt=1;ct.type===nt.FLOAT_MAT2&&(dt=2),ct.type===nt.FLOAT_MAT3&&(dt=3),ct.type===nt.FLOAT_MAT4&&(dt=4),it[ut]={type:ct.type,location:nt.getAttribLocation(rt,ut),locationSize:dt}}return it}function filterEmptyLine(nt){return nt!==""}function replaceLightNums(nt,rt){const it=rt.numSpotLightShadows+rt.numSpotLightMaps-rt.numSpotLightShadowsWithMaps;return nt.replace(/NUM_DIR_LIGHTS/g,rt.numDirLights).replace(/NUM_SPOT_LIGHTS/g,rt.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,rt.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,it).replace(/NUM_RECT_AREA_LIGHTS/g,rt.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,rt.numPointLights).replace(/NUM_HEMI_LIGHTS/g,rt.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,rt.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,rt.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,rt.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,rt.numPointLightShadows)}function replaceClippingPlaneNums(nt,rt){return nt.replace(/NUM_CLIPPING_PLANES/g,rt.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,rt.numClippingPlanes-rt.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(nt){return nt.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function includeReplacer(nt,rt){let it=ShaderChunk[rt];if(it===void 0){const st=shaderChunkMap.get(rt);if(st!==void 0)it=ShaderChunk[st],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',rt,st);else throw new Error("Can not resolve #include <"+rt+">")}return resolveIncludes(it)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(nt){return nt.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(nt,rt,it,st){let lt="";for(let ct=parseInt(rt);ct<parseInt(it);ct++)lt+=st.replace(/\[\s*i\s*\]/g,"[ "+ct+" ]").replace(/UNROLLED_LOOP_INDEX/g,ct);return lt}function generatePrecision(nt){let rt=`precision ${nt.precision} float;
	precision ${nt.precision} int;
	precision ${nt.precision} sampler2D;
	precision ${nt.precision} samplerCube;
	`;return nt.isWebGL2&&(rt+=`precision ${nt.precision} sampler3D;
		precision ${nt.precision} sampler2DArray;
		precision ${nt.precision} sampler2DShadow;
		precision ${nt.precision} samplerCubeShadow;
		precision ${nt.precision} sampler2DArrayShadow;
		precision ${nt.precision} isampler2D;
		precision ${nt.precision} isampler3D;
		precision ${nt.precision} isamplerCube;
		precision ${nt.precision} isampler2DArray;
		precision ${nt.precision} usampler2D;
		precision ${nt.precision} usampler3D;
		precision ${nt.precision} usamplerCube;
		precision ${nt.precision} usampler2DArray;
		`),nt.precision==="highp"?rt+=`
#define HIGH_PRECISION`:nt.precision==="mediump"?rt+=`
#define MEDIUM_PRECISION`:nt.precision==="lowp"&&(rt+=`
#define LOW_PRECISION`),rt}function generateShadowMapTypeDefine(nt){let rt="SHADOWMAP_TYPE_BASIC";return nt.shadowMapType===PCFShadowMap?rt="SHADOWMAP_TYPE_PCF":nt.shadowMapType===PCFSoftShadowMap?rt="SHADOWMAP_TYPE_PCF_SOFT":nt.shadowMapType===VSMShadowMap&&(rt="SHADOWMAP_TYPE_VSM"),rt}function generateEnvMapTypeDefine(nt){let rt="ENVMAP_TYPE_CUBE";if(nt.envMap)switch(nt.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:rt="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:rt="ENVMAP_TYPE_CUBE_UV";break}return rt}function generateEnvMapModeDefine(nt){let rt="ENVMAP_MODE_REFLECTION";if(nt.envMap)switch(nt.envMapMode){case CubeRefractionMapping:rt="ENVMAP_MODE_REFRACTION";break}return rt}function generateEnvMapBlendingDefine(nt){let rt="ENVMAP_BLENDING_NONE";if(nt.envMap)switch(nt.combine){case MultiplyOperation:rt="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:rt="ENVMAP_BLENDING_MIX";break;case AddOperation:rt="ENVMAP_BLENDING_ADD";break}return rt}function generateCubeUVSize(nt){const rt=nt.envMapCubeUVHeight;if(rt===null)return null;const it=Math.log2(rt)-2,st=1/rt;return{texelWidth:1/(3*Math.max(Math.pow(2,it),7*16)),texelHeight:st,maxMip:it}}function WebGLProgram(nt,rt,it,st){const lt=nt.getContext(),ct=it.defines;let ut=it.vertexShader,dt=it.fragmentShader;const ht=generateShadowMapTypeDefine(it),ft=generateEnvMapTypeDefine(it),pt=generateEnvMapModeDefine(it),mt=generateEnvMapBlendingDefine(it),gt=generateCubeUVSize(it),xt=it.isWebGL2?"":generateExtensions(it),yt=generateVertexExtensions(it),vt=generateDefines(ct),St=lt.createProgram();let wt,Et,Rt=it.glslVersion?"#version "+it.glslVersion+`
`:"";it.isRawShaderMaterial?(wt=["#define SHADER_TYPE "+it.shaderType,"#define SHADER_NAME "+it.shaderName,vt].filter(filterEmptyLine).join(`
`),wt.length>0&&(wt+=`
`),Et=[xt,"#define SHADER_TYPE "+it.shaderType,"#define SHADER_NAME "+it.shaderName,vt].filter(filterEmptyLine).join(`
`),Et.length>0&&(Et+=`
`)):(wt=[generatePrecision(it),"#define SHADER_TYPE "+it.shaderType,"#define SHADER_NAME "+it.shaderName,vt,it.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",it.batching?"#define USE_BATCHING":"",it.instancing?"#define USE_INSTANCING":"",it.instancingColor?"#define USE_INSTANCING_COLOR":"",it.useFog&&it.fog?"#define USE_FOG":"",it.useFog&&it.fogExp2?"#define FOG_EXP2":"",it.map?"#define USE_MAP":"",it.envMap?"#define USE_ENVMAP":"",it.envMap?"#define "+pt:"",it.lightMap?"#define USE_LIGHTMAP":"",it.aoMap?"#define USE_AOMAP":"",it.bumpMap?"#define USE_BUMPMAP":"",it.normalMap?"#define USE_NORMALMAP":"",it.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",it.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",it.displacementMap?"#define USE_DISPLACEMENTMAP":"",it.emissiveMap?"#define USE_EMISSIVEMAP":"",it.anisotropy?"#define USE_ANISOTROPY":"",it.anisotropyMap?"#define USE_ANISOTROPYMAP":"",it.clearcoatMap?"#define USE_CLEARCOATMAP":"",it.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",it.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",it.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",it.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",it.specularMap?"#define USE_SPECULARMAP":"",it.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",it.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",it.roughnessMap?"#define USE_ROUGHNESSMAP":"",it.metalnessMap?"#define USE_METALNESSMAP":"",it.alphaMap?"#define USE_ALPHAMAP":"",it.alphaHash?"#define USE_ALPHAHASH":"",it.transmission?"#define USE_TRANSMISSION":"",it.transmissionMap?"#define USE_TRANSMISSIONMAP":"",it.thicknessMap?"#define USE_THICKNESSMAP":"",it.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",it.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",it.mapUv?"#define MAP_UV "+it.mapUv:"",it.alphaMapUv?"#define ALPHAMAP_UV "+it.alphaMapUv:"",it.lightMapUv?"#define LIGHTMAP_UV "+it.lightMapUv:"",it.aoMapUv?"#define AOMAP_UV "+it.aoMapUv:"",it.emissiveMapUv?"#define EMISSIVEMAP_UV "+it.emissiveMapUv:"",it.bumpMapUv?"#define BUMPMAP_UV "+it.bumpMapUv:"",it.normalMapUv?"#define NORMALMAP_UV "+it.normalMapUv:"",it.displacementMapUv?"#define DISPLACEMENTMAP_UV "+it.displacementMapUv:"",it.metalnessMapUv?"#define METALNESSMAP_UV "+it.metalnessMapUv:"",it.roughnessMapUv?"#define ROUGHNESSMAP_UV "+it.roughnessMapUv:"",it.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+it.anisotropyMapUv:"",it.clearcoatMapUv?"#define CLEARCOATMAP_UV "+it.clearcoatMapUv:"",it.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+it.clearcoatNormalMapUv:"",it.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+it.clearcoatRoughnessMapUv:"",it.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+it.iridescenceMapUv:"",it.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+it.iridescenceThicknessMapUv:"",it.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+it.sheenColorMapUv:"",it.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+it.sheenRoughnessMapUv:"",it.specularMapUv?"#define SPECULARMAP_UV "+it.specularMapUv:"",it.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+it.specularColorMapUv:"",it.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+it.specularIntensityMapUv:"",it.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+it.transmissionMapUv:"",it.thicknessMapUv?"#define THICKNESSMAP_UV "+it.thicknessMapUv:"",it.vertexTangents&&it.flatShading===!1?"#define USE_TANGENT":"",it.vertexColors?"#define USE_COLOR":"",it.vertexAlphas?"#define USE_COLOR_ALPHA":"",it.vertexUv1s?"#define USE_UV1":"",it.vertexUv2s?"#define USE_UV2":"",it.vertexUv3s?"#define USE_UV3":"",it.pointsUvs?"#define USE_POINTS_UV":"",it.flatShading?"#define FLAT_SHADED":"",it.skinning?"#define USE_SKINNING":"",it.morphTargets?"#define USE_MORPHTARGETS":"",it.morphNormals&&it.flatShading===!1?"#define USE_MORPHNORMALS":"",it.morphColors&&it.isWebGL2?"#define USE_MORPHCOLORS":"",it.morphTargetsCount>0&&it.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",it.morphTargetsCount>0&&it.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+it.morphTextureStride:"",it.morphTargetsCount>0&&it.isWebGL2?"#define MORPHTARGETS_COUNT "+it.morphTargetsCount:"",it.doubleSided?"#define DOUBLE_SIDED":"",it.flipSided?"#define FLIP_SIDED":"",it.shadowMapEnabled?"#define USE_SHADOWMAP":"",it.shadowMapEnabled?"#define "+ht:"",it.sizeAttenuation?"#define USE_SIZEATTENUATION":"",it.numLightProbes>0?"#define USE_LIGHT_PROBES":"",it.useLegacyLights?"#define LEGACY_LIGHTS":"",it.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",it.logarithmicDepthBuffer&&it.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),Et=[xt,generatePrecision(it),"#define SHADER_TYPE "+it.shaderType,"#define SHADER_NAME "+it.shaderName,vt,it.useFog&&it.fog?"#define USE_FOG":"",it.useFog&&it.fogExp2?"#define FOG_EXP2":"",it.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",it.map?"#define USE_MAP":"",it.matcap?"#define USE_MATCAP":"",it.envMap?"#define USE_ENVMAP":"",it.envMap?"#define "+ft:"",it.envMap?"#define "+pt:"",it.envMap?"#define "+mt:"",gt?"#define CUBEUV_TEXEL_WIDTH "+gt.texelWidth:"",gt?"#define CUBEUV_TEXEL_HEIGHT "+gt.texelHeight:"",gt?"#define CUBEUV_MAX_MIP "+gt.maxMip+".0":"",it.lightMap?"#define USE_LIGHTMAP":"",it.aoMap?"#define USE_AOMAP":"",it.bumpMap?"#define USE_BUMPMAP":"",it.normalMap?"#define USE_NORMALMAP":"",it.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",it.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",it.emissiveMap?"#define USE_EMISSIVEMAP":"",it.anisotropy?"#define USE_ANISOTROPY":"",it.anisotropyMap?"#define USE_ANISOTROPYMAP":"",it.clearcoat?"#define USE_CLEARCOAT":"",it.clearcoatMap?"#define USE_CLEARCOATMAP":"",it.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",it.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",it.iridescence?"#define USE_IRIDESCENCE":"",it.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",it.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",it.specularMap?"#define USE_SPECULARMAP":"",it.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",it.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",it.roughnessMap?"#define USE_ROUGHNESSMAP":"",it.metalnessMap?"#define USE_METALNESSMAP":"",it.alphaMap?"#define USE_ALPHAMAP":"",it.alphaTest?"#define USE_ALPHATEST":"",it.alphaHash?"#define USE_ALPHAHASH":"",it.sheen?"#define USE_SHEEN":"",it.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",it.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",it.transmission?"#define USE_TRANSMISSION":"",it.transmissionMap?"#define USE_TRANSMISSIONMAP":"",it.thicknessMap?"#define USE_THICKNESSMAP":"",it.vertexTangents&&it.flatShading===!1?"#define USE_TANGENT":"",it.vertexColors||it.instancingColor?"#define USE_COLOR":"",it.vertexAlphas?"#define USE_COLOR_ALPHA":"",it.vertexUv1s?"#define USE_UV1":"",it.vertexUv2s?"#define USE_UV2":"",it.vertexUv3s?"#define USE_UV3":"",it.pointsUvs?"#define USE_POINTS_UV":"",it.gradientMap?"#define USE_GRADIENTMAP":"",it.flatShading?"#define FLAT_SHADED":"",it.doubleSided?"#define DOUBLE_SIDED":"",it.flipSided?"#define FLIP_SIDED":"",it.shadowMapEnabled?"#define USE_SHADOWMAP":"",it.shadowMapEnabled?"#define "+ht:"",it.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",it.numLightProbes>0?"#define USE_LIGHT_PROBES":"",it.useLegacyLights?"#define LEGACY_LIGHTS":"",it.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",it.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",it.logarithmicDepthBuffer&&it.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",it.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",it.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",it.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",it.toneMapping):"",it.dithering?"#define DITHERING":"",it.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",it.outputColorSpace),it.useDepthPacking?"#define DEPTH_PACKING "+it.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),ut=resolveIncludes(ut),ut=replaceLightNums(ut,it),ut=replaceClippingPlaneNums(ut,it),dt=resolveIncludes(dt),dt=replaceLightNums(dt,it),dt=replaceClippingPlaneNums(dt,it),ut=unrollLoops(ut),dt=unrollLoops(dt),it.isWebGL2&&it.isRawShaderMaterial!==!0&&(Rt=`#version 300 es
`,wt=[yt,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+wt,Et=["precision mediump sampler2DArray;","#define varying in",it.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",it.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Et);const Tt=Rt+wt+ut,It=Rt+Et+dt,At=WebGLShader(lt,lt.VERTEX_SHADER,Tt),Dt=WebGLShader(lt,lt.FRAGMENT_SHADER,It);lt.attachShader(St,At),lt.attachShader(St,Dt),it.index0AttributeName!==void 0?lt.bindAttribLocation(St,0,it.index0AttributeName):it.morphTargets===!0&&lt.bindAttribLocation(St,0,"position"),lt.linkProgram(St);function jt(Ot){if(nt.debug.checkShaderErrors){const Nt=lt.getProgramInfoLog(St).trim(),$t=lt.getShaderInfoLog(At).trim(),Vt=lt.getShaderInfoLog(Dt).trim();let Ut=!0,zt=!0;if(lt.getProgramParameter(St,lt.LINK_STATUS)===!1)if(Ut=!1,typeof nt.debug.onShaderError=="function")nt.debug.onShaderError(lt,St,At,Dt);else{const Bt=getShaderErrors(lt,At,"vertex"),Ht=getShaderErrors(lt,Dt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+lt.getError()+" - VALIDATE_STATUS "+lt.getProgramParameter(St,lt.VALIDATE_STATUS)+`

Material Name: `+Ot.name+`
Material Type: `+Ot.type+`

Program Info Log: `+Nt+`
`+Bt+`
`+Ht)}else Nt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Nt):($t===""||Vt==="")&&(zt=!1);zt&&(Ot.diagnostics={runnable:Ut,programLog:Nt,vertexShader:{log:$t,prefix:wt},fragmentShader:{log:Vt,prefix:Et}})}lt.deleteShader(At),lt.deleteShader(Dt),Ft=new WebGLUniforms(lt,St),Lt=fetchAttributeLocations(lt,St)}let Ft;this.getUniforms=function(){return Ft===void 0&&jt(this),Ft};let Lt;this.getAttributes=function(){return Lt===void 0&&jt(this),Lt};let Mt=it.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Mt===!1&&(Mt=lt.getProgramParameter(St,COMPLETION_STATUS_KHR)),Mt},this.destroy=function(){st.releaseStatesOfProgram(this),lt.deleteProgram(St),this.program=void 0},this.type=it.shaderType,this.name=it.shaderName,this.id=programIdCount++,this.cacheKey=rt,this.usedTimes=1,this.program=St,this.vertexShader=At,this.fragmentShader=Dt,this}let _id$1=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(rt){const it=rt.vertexShader,st=rt.fragmentShader,lt=this._getShaderStage(it),ct=this._getShaderStage(st),ut=this._getShaderCacheForMaterial(rt);return ut.has(lt)===!1&&(ut.add(lt),lt.usedTimes++),ut.has(ct)===!1&&(ut.add(ct),ct.usedTimes++),this}remove(rt){const it=this.materialCache.get(rt);for(const st of it)st.usedTimes--,st.usedTimes===0&&this.shaderCache.delete(st.code);return this.materialCache.delete(rt),this}getVertexShaderID(rt){return this._getShaderStage(rt.vertexShader).id}getFragmentShaderID(rt){return this._getShaderStage(rt.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(rt){const it=this.materialCache;let st=it.get(rt);return st===void 0&&(st=new Set,it.set(rt,st)),st}_getShaderStage(rt){const it=this.shaderCache;let st=it.get(rt);return st===void 0&&(st=new WebGLShaderStage(rt),it.set(rt,st)),st}}class WebGLShaderStage{constructor(rt){this.id=_id$1++,this.code=rt,this.usedTimes=0}}function WebGLPrograms(nt,rt,it,st,lt,ct,ut){const dt=new Layers,ht=new WebGLShaderCache,ft=new Set,pt=[],mt=lt.isWebGL2,gt=lt.logarithmicDepthBuffer,xt=lt.vertexTextures;let yt=lt.precision;const vt={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function St(Lt){return ft.add(Lt),Lt===0?"uv":`uv${Lt}`}function wt(Lt,Mt,Ot,Nt,$t){const Vt=Nt.fog,Ut=$t.geometry,zt=Lt.isMeshStandardMaterial?Nt.environment:null,Bt=(Lt.isMeshStandardMaterial?it:rt).get(Lt.envMap||zt),Ht=Bt&&Bt.mapping===CubeUVReflectionMapping?Bt.image.height:null,Gt=vt[Lt.type];Lt.precision!==null&&(yt=lt.getMaxPrecision(Lt.precision),yt!==Lt.precision&&console.warn("THREE.WebGLProgram.getParameters:",Lt.precision,"not supported, using",yt,"instead."));const Xt=Ut.morphAttributes.position||Ut.morphAttributes.normal||Ut.morphAttributes.color,Zt=Xt!==void 0?Xt.length:0;let hr=0;Ut.morphAttributes.position!==void 0&&(hr=1),Ut.morphAttributes.normal!==void 0&&(hr=2),Ut.morphAttributes.color!==void 0&&(hr=3);let nr,ir,yr,Cr;if(Gt){const fn=ShaderLib[Gt];nr=fn.vertexShader,ir=fn.fragmentShader}else nr=Lt.vertexShader,ir=Lt.fragmentShader,ht.update(Lt),yr=ht.getVertexShaderID(Lt),Cr=ht.getFragmentShaderID(Lt);const Sr=nt.getRenderTarget(),xr=$t.isInstancedMesh===!0,gr=$t.isBatchedMesh===!0,_r=!!Lt.map,fr=!!Lt.matcap,Nr=!!Bt,Tr=!!Lt.aoMap,Hr=!!Lt.lightMap,Vr=!!Lt.bumpMap,mn=!!Lt.normalMap,tn=!!Lt.displacementMap,er=!!Lt.emissiveMap,tr=!!Lt.metalnessMap,vr=!!Lt.roughnessMap,Fr=Lt.anisotropy>0,Kr=Lt.clearcoat>0,qr=Lt.iridescence>0,pn=Lt.sheen>0,En=Lt.transmission>0,Rn=Fr&&!!Lt.anisotropyMap,Qn=Kr&&!!Lt.clearcoatMap,Ln=Kr&&!!Lt.clearcoatNormalMap,ln=Kr&&!!Lt.clearcoatRoughnessMap,Xn=qr&&!!Lt.iridescenceMap,Yr=qr&&!!Lt.iridescenceThicknessMap,Qr=pn&&!!Lt.sheenColorMap,Mn=pn&&!!Lt.sheenRoughnessMap,Ar=!!Lt.specularMap,or=!!Lt.specularColorMap,Wr=!!Lt.specularIntensityMap,Ir=En&&!!Lt.transmissionMap,dn=En&&!!Lt.thicknessMap,kn=!!Lt.gradientMap,Mr=!!Lt.alphaMap,vn=Lt.alphaTest>0,kr=!!Lt.alphaHash,Er=!!Lt.extensions;let Ur=NoToneMapping;Lt.toneMapped&&(Sr===null||Sr.isXRRenderTarget===!0)&&(Ur=nt.toneMapping);const on={isWebGL2:mt,shaderID:Gt,shaderType:Lt.type,shaderName:Lt.name,vertexShader:nr,fragmentShader:ir,defines:Lt.defines,customVertexShaderID:yr,customFragmentShaderID:Cr,isRawShaderMaterial:Lt.isRawShaderMaterial===!0,glslVersion:Lt.glslVersion,precision:yt,batching:gr,instancing:xr,instancingColor:xr&&$t.instanceColor!==null,supportsVertexTextures:xt,outputColorSpace:Sr===null?nt.outputColorSpace:Sr.isXRRenderTarget===!0?Sr.texture.colorSpace:LinearSRGBColorSpace,alphaToCoverage:!!Lt.alphaToCoverage,map:_r,matcap:fr,envMap:Nr,envMapMode:Nr&&Bt.mapping,envMapCubeUVHeight:Ht,aoMap:Tr,lightMap:Hr,bumpMap:Vr,normalMap:mn,displacementMap:xt&&tn,emissiveMap:er,normalMapObjectSpace:mn&&Lt.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:mn&&Lt.normalMapType===TangentSpaceNormalMap,metalnessMap:tr,roughnessMap:vr,anisotropy:Fr,anisotropyMap:Rn,clearcoat:Kr,clearcoatMap:Qn,clearcoatNormalMap:Ln,clearcoatRoughnessMap:ln,iridescence:qr,iridescenceMap:Xn,iridescenceThicknessMap:Yr,sheen:pn,sheenColorMap:Qr,sheenRoughnessMap:Mn,specularMap:Ar,specularColorMap:or,specularIntensityMap:Wr,transmission:En,transmissionMap:Ir,thicknessMap:dn,gradientMap:kn,opaque:Lt.transparent===!1&&Lt.blending===NormalBlending&&Lt.alphaToCoverage===!1,alphaMap:Mr,alphaTest:vn,alphaHash:kr,combine:Lt.combine,mapUv:_r&&St(Lt.map.channel),aoMapUv:Tr&&St(Lt.aoMap.channel),lightMapUv:Hr&&St(Lt.lightMap.channel),bumpMapUv:Vr&&St(Lt.bumpMap.channel),normalMapUv:mn&&St(Lt.normalMap.channel),displacementMapUv:tn&&St(Lt.displacementMap.channel),emissiveMapUv:er&&St(Lt.emissiveMap.channel),metalnessMapUv:tr&&St(Lt.metalnessMap.channel),roughnessMapUv:vr&&St(Lt.roughnessMap.channel),anisotropyMapUv:Rn&&St(Lt.anisotropyMap.channel),clearcoatMapUv:Qn&&St(Lt.clearcoatMap.channel),clearcoatNormalMapUv:Ln&&St(Lt.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ln&&St(Lt.clearcoatRoughnessMap.channel),iridescenceMapUv:Xn&&St(Lt.iridescenceMap.channel),iridescenceThicknessMapUv:Yr&&St(Lt.iridescenceThicknessMap.channel),sheenColorMapUv:Qr&&St(Lt.sheenColorMap.channel),sheenRoughnessMapUv:Mn&&St(Lt.sheenRoughnessMap.channel),specularMapUv:Ar&&St(Lt.specularMap.channel),specularColorMapUv:or&&St(Lt.specularColorMap.channel),specularIntensityMapUv:Wr&&St(Lt.specularIntensityMap.channel),transmissionMapUv:Ir&&St(Lt.transmissionMap.channel),thicknessMapUv:dn&&St(Lt.thicknessMap.channel),alphaMapUv:Mr&&St(Lt.alphaMap.channel),vertexTangents:!!Ut.attributes.tangent&&(mn||Fr),vertexColors:Lt.vertexColors,vertexAlphas:Lt.vertexColors===!0&&!!Ut.attributes.color&&Ut.attributes.color.itemSize===4,pointsUvs:$t.isPoints===!0&&!!Ut.attributes.uv&&(_r||Mr),fog:!!Vt,useFog:Lt.fog===!0,fogExp2:!!Vt&&Vt.isFogExp2,flatShading:Lt.flatShading===!0,sizeAttenuation:Lt.sizeAttenuation===!0,logarithmicDepthBuffer:gt,skinning:$t.isSkinnedMesh===!0,morphTargets:Ut.morphAttributes.position!==void 0,morphNormals:Ut.morphAttributes.normal!==void 0,morphColors:Ut.morphAttributes.color!==void 0,morphTargetsCount:Zt,morphTextureStride:hr,numDirLights:Mt.directional.length,numPointLights:Mt.point.length,numSpotLights:Mt.spot.length,numSpotLightMaps:Mt.spotLightMap.length,numRectAreaLights:Mt.rectArea.length,numHemiLights:Mt.hemi.length,numDirLightShadows:Mt.directionalShadowMap.length,numPointLightShadows:Mt.pointShadowMap.length,numSpotLightShadows:Mt.spotShadowMap.length,numSpotLightShadowsWithMaps:Mt.numSpotLightShadowsWithMaps,numLightProbes:Mt.numLightProbes,numClippingPlanes:ut.numPlanes,numClipIntersection:ut.numIntersection,dithering:Lt.dithering,shadowMapEnabled:nt.shadowMap.enabled&&Ot.length>0,shadowMapType:nt.shadowMap.type,toneMapping:Ur,useLegacyLights:nt._useLegacyLights,decodeVideoTexture:_r&&Lt.map.isVideoTexture===!0&&ColorManagement.getTransfer(Lt.map.colorSpace)===SRGBTransfer,premultipliedAlpha:Lt.premultipliedAlpha,doubleSided:Lt.side===DoubleSide,flipSided:Lt.side===BackSide,useDepthPacking:Lt.depthPacking>=0,depthPacking:Lt.depthPacking||0,index0AttributeName:Lt.index0AttributeName,extensionDerivatives:Er&&Lt.extensions.derivatives===!0,extensionFragDepth:Er&&Lt.extensions.fragDepth===!0,extensionDrawBuffers:Er&&Lt.extensions.drawBuffers===!0,extensionShaderTextureLOD:Er&&Lt.extensions.shaderTextureLOD===!0,extensionClipCullDistance:Er&&Lt.extensions.clipCullDistance===!0&&st.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Er&&Lt.extensions.multiDraw===!0&&st.has("WEBGL_multi_draw"),rendererExtensionFragDepth:mt||st.has("EXT_frag_depth"),rendererExtensionDrawBuffers:mt||st.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:mt||st.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:st.has("KHR_parallel_shader_compile"),customProgramCacheKey:Lt.customProgramCacheKey()};return on.vertexUv1s=ft.has(1),on.vertexUv2s=ft.has(2),on.vertexUv3s=ft.has(3),ft.clear(),on}function Et(Lt){const Mt=[];if(Lt.shaderID?Mt.push(Lt.shaderID):(Mt.push(Lt.customVertexShaderID),Mt.push(Lt.customFragmentShaderID)),Lt.defines!==void 0)for(const Ot in Lt.defines)Mt.push(Ot),Mt.push(Lt.defines[Ot]);return Lt.isRawShaderMaterial===!1&&(Rt(Mt,Lt),Tt(Mt,Lt),Mt.push(nt.outputColorSpace)),Mt.push(Lt.customProgramCacheKey),Mt.join()}function Rt(Lt,Mt){Lt.push(Mt.precision),Lt.push(Mt.outputColorSpace),Lt.push(Mt.envMapMode),Lt.push(Mt.envMapCubeUVHeight),Lt.push(Mt.mapUv),Lt.push(Mt.alphaMapUv),Lt.push(Mt.lightMapUv),Lt.push(Mt.aoMapUv),Lt.push(Mt.bumpMapUv),Lt.push(Mt.normalMapUv),Lt.push(Mt.displacementMapUv),Lt.push(Mt.emissiveMapUv),Lt.push(Mt.metalnessMapUv),Lt.push(Mt.roughnessMapUv),Lt.push(Mt.anisotropyMapUv),Lt.push(Mt.clearcoatMapUv),Lt.push(Mt.clearcoatNormalMapUv),Lt.push(Mt.clearcoatRoughnessMapUv),Lt.push(Mt.iridescenceMapUv),Lt.push(Mt.iridescenceThicknessMapUv),Lt.push(Mt.sheenColorMapUv),Lt.push(Mt.sheenRoughnessMapUv),Lt.push(Mt.specularMapUv),Lt.push(Mt.specularColorMapUv),Lt.push(Mt.specularIntensityMapUv),Lt.push(Mt.transmissionMapUv),Lt.push(Mt.thicknessMapUv),Lt.push(Mt.combine),Lt.push(Mt.fogExp2),Lt.push(Mt.sizeAttenuation),Lt.push(Mt.morphTargetsCount),Lt.push(Mt.morphAttributeCount),Lt.push(Mt.numDirLights),Lt.push(Mt.numPointLights),Lt.push(Mt.numSpotLights),Lt.push(Mt.numSpotLightMaps),Lt.push(Mt.numHemiLights),Lt.push(Mt.numRectAreaLights),Lt.push(Mt.numDirLightShadows),Lt.push(Mt.numPointLightShadows),Lt.push(Mt.numSpotLightShadows),Lt.push(Mt.numSpotLightShadowsWithMaps),Lt.push(Mt.numLightProbes),Lt.push(Mt.shadowMapType),Lt.push(Mt.toneMapping),Lt.push(Mt.numClippingPlanes),Lt.push(Mt.numClipIntersection),Lt.push(Mt.depthPacking)}function Tt(Lt,Mt){dt.disableAll(),Mt.isWebGL2&&dt.enable(0),Mt.supportsVertexTextures&&dt.enable(1),Mt.instancing&&dt.enable(2),Mt.instancingColor&&dt.enable(3),Mt.matcap&&dt.enable(4),Mt.envMap&&dt.enable(5),Mt.normalMapObjectSpace&&dt.enable(6),Mt.normalMapTangentSpace&&dt.enable(7),Mt.clearcoat&&dt.enable(8),Mt.iridescence&&dt.enable(9),Mt.alphaTest&&dt.enable(10),Mt.vertexColors&&dt.enable(11),Mt.vertexAlphas&&dt.enable(12),Mt.vertexUv1s&&dt.enable(13),Mt.vertexUv2s&&dt.enable(14),Mt.vertexUv3s&&dt.enable(15),Mt.vertexTangents&&dt.enable(16),Mt.anisotropy&&dt.enable(17),Mt.alphaHash&&dt.enable(18),Mt.batching&&dt.enable(19),Lt.push(dt.mask),dt.disableAll(),Mt.fog&&dt.enable(0),Mt.useFog&&dt.enable(1),Mt.flatShading&&dt.enable(2),Mt.logarithmicDepthBuffer&&dt.enable(3),Mt.skinning&&dt.enable(4),Mt.morphTargets&&dt.enable(5),Mt.morphNormals&&dt.enable(6),Mt.morphColors&&dt.enable(7),Mt.premultipliedAlpha&&dt.enable(8),Mt.shadowMapEnabled&&dt.enable(9),Mt.useLegacyLights&&dt.enable(10),Mt.doubleSided&&dt.enable(11),Mt.flipSided&&dt.enable(12),Mt.useDepthPacking&&dt.enable(13),Mt.dithering&&dt.enable(14),Mt.transmission&&dt.enable(15),Mt.sheen&&dt.enable(16),Mt.opaque&&dt.enable(17),Mt.pointsUvs&&dt.enable(18),Mt.decodeVideoTexture&&dt.enable(19),Mt.alphaToCoverage&&dt.enable(20),Lt.push(dt.mask)}function It(Lt){const Mt=vt[Lt.type];let Ot;if(Mt){const Nt=ShaderLib[Mt];Ot=UniformsUtils.clone(Nt.uniforms)}else Ot=Lt.uniforms;return Ot}function At(Lt,Mt){let Ot;for(let Nt=0,$t=pt.length;Nt<$t;Nt++){const Vt=pt[Nt];if(Vt.cacheKey===Mt){Ot=Vt,++Ot.usedTimes;break}}return Ot===void 0&&(Ot=new WebGLProgram(nt,Mt,Lt,ct),pt.push(Ot)),Ot}function Dt(Lt){if(--Lt.usedTimes===0){const Mt=pt.indexOf(Lt);pt[Mt]=pt[pt.length-1],pt.pop(),Lt.destroy()}}function jt(Lt){ht.remove(Lt)}function Ft(){ht.dispose()}return{getParameters:wt,getProgramCacheKey:Et,getUniforms:It,acquireProgram:At,releaseProgram:Dt,releaseShaderCache:jt,programs:pt,dispose:Ft}}function WebGLProperties(){let nt=new WeakMap;function rt(ct){let ut=nt.get(ct);return ut===void 0&&(ut={},nt.set(ct,ut)),ut}function it(ct){nt.delete(ct)}function st(ct,ut,dt){nt.get(ct)[ut]=dt}function lt(){nt=new WeakMap}return{get:rt,remove:it,update:st,dispose:lt}}function painterSortStable(nt,rt){return nt.groupOrder!==rt.groupOrder?nt.groupOrder-rt.groupOrder:nt.renderOrder!==rt.renderOrder?nt.renderOrder-rt.renderOrder:nt.material.id!==rt.material.id?nt.material.id-rt.material.id:nt.z!==rt.z?nt.z-rt.z:nt.id-rt.id}function reversePainterSortStable(nt,rt){return nt.groupOrder!==rt.groupOrder?nt.groupOrder-rt.groupOrder:nt.renderOrder!==rt.renderOrder?nt.renderOrder-rt.renderOrder:nt.z!==rt.z?rt.z-nt.z:nt.id-rt.id}function WebGLRenderList(){const nt=[];let rt=0;const it=[],st=[],lt=[];function ct(){rt=0,it.length=0,st.length=0,lt.length=0}function ut(mt,gt,xt,yt,vt,St){let wt=nt[rt];return wt===void 0?(wt={id:mt.id,object:mt,geometry:gt,material:xt,groupOrder:yt,renderOrder:mt.renderOrder,z:vt,group:St},nt[rt]=wt):(wt.id=mt.id,wt.object=mt,wt.geometry=gt,wt.material=xt,wt.groupOrder=yt,wt.renderOrder=mt.renderOrder,wt.z=vt,wt.group=St),rt++,wt}function dt(mt,gt,xt,yt,vt,St){const wt=ut(mt,gt,xt,yt,vt,St);xt.transmission>0?st.push(wt):xt.transparent===!0?lt.push(wt):it.push(wt)}function ht(mt,gt,xt,yt,vt,St){const wt=ut(mt,gt,xt,yt,vt,St);xt.transmission>0?st.unshift(wt):xt.transparent===!0?lt.unshift(wt):it.unshift(wt)}function ft(mt,gt){it.length>1&&it.sort(mt||painterSortStable),st.length>1&&st.sort(gt||reversePainterSortStable),lt.length>1&&lt.sort(gt||reversePainterSortStable)}function pt(){for(let mt=rt,gt=nt.length;mt<gt;mt++){const xt=nt[mt];if(xt.id===null)break;xt.id=null,xt.object=null,xt.geometry=null,xt.material=null,xt.group=null}}return{opaque:it,transmissive:st,transparent:lt,init:ct,push:dt,unshift:ht,finish:pt,sort:ft}}function WebGLRenderLists(){let nt=new WeakMap;function rt(st,lt){const ct=nt.get(st);let ut;return ct===void 0?(ut=new WebGLRenderList,nt.set(st,[ut])):lt>=ct.length?(ut=new WebGLRenderList,ct.push(ut)):ut=ct[lt],ut}function it(){nt=new WeakMap}return{get:rt,dispose:it}}function UniformsCache(){const nt={};return{get:function(rt){if(nt[rt.id]!==void 0)return nt[rt.id];let it;switch(rt.type){case"DirectionalLight":it={direction:new Vector3,color:new Color};break;case"SpotLight":it={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":it={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":it={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":it={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return nt[rt.id]=it,it}}}function ShadowUniformsCache(){const nt={};return{get:function(rt){if(nt[rt.id]!==void 0)return nt[rt.id];let it;switch(rt.type){case"DirectionalLight":it={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":it={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":it={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return nt[rt.id]=it,it}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(nt,rt){return(rt.castShadow?2:0)-(nt.castShadow?2:0)+(rt.map?1:0)-(nt.map?1:0)}function WebGLLights(nt,rt){const it=new UniformsCache,st=ShadowUniformsCache(),lt={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let pt=0;pt<9;pt++)lt.probe.push(new Vector3);const ct=new Vector3,ut=new Matrix4,dt=new Matrix4;function ht(pt,mt){let gt=0,xt=0,yt=0;for(let Ot=0;Ot<9;Ot++)lt.probe[Ot].set(0,0,0);let vt=0,St=0,wt=0,Et=0,Rt=0,Tt=0,It=0,At=0,Dt=0,jt=0,Ft=0;pt.sort(shadowCastingAndTexturingLightsFirst);const Lt=mt===!0?Math.PI:1;for(let Ot=0,Nt=pt.length;Ot<Nt;Ot++){const $t=pt[Ot],Vt=$t.color,Ut=$t.intensity,zt=$t.distance,Bt=$t.shadow&&$t.shadow.map?$t.shadow.map.texture:null;if($t.isAmbientLight)gt+=Vt.r*Ut*Lt,xt+=Vt.g*Ut*Lt,yt+=Vt.b*Ut*Lt;else if($t.isLightProbe){for(let Ht=0;Ht<9;Ht++)lt.probe[Ht].addScaledVector($t.sh.coefficients[Ht],Ut);Ft++}else if($t.isDirectionalLight){const Ht=it.get($t);if(Ht.color.copy($t.color).multiplyScalar($t.intensity*Lt),$t.castShadow){const Gt=$t.shadow,Xt=st.get($t);Xt.shadowBias=Gt.bias,Xt.shadowNormalBias=Gt.normalBias,Xt.shadowRadius=Gt.radius,Xt.shadowMapSize=Gt.mapSize,lt.directionalShadow[vt]=Xt,lt.directionalShadowMap[vt]=Bt,lt.directionalShadowMatrix[vt]=$t.shadow.matrix,Tt++}lt.directional[vt]=Ht,vt++}else if($t.isSpotLight){const Ht=it.get($t);Ht.position.setFromMatrixPosition($t.matrixWorld),Ht.color.copy(Vt).multiplyScalar(Ut*Lt),Ht.distance=zt,Ht.coneCos=Math.cos($t.angle),Ht.penumbraCos=Math.cos($t.angle*(1-$t.penumbra)),Ht.decay=$t.decay,lt.spot[wt]=Ht;const Gt=$t.shadow;if($t.map&&(lt.spotLightMap[Dt]=$t.map,Dt++,Gt.updateMatrices($t),$t.castShadow&&jt++),lt.spotLightMatrix[wt]=Gt.matrix,$t.castShadow){const Xt=st.get($t);Xt.shadowBias=Gt.bias,Xt.shadowNormalBias=Gt.normalBias,Xt.shadowRadius=Gt.radius,Xt.shadowMapSize=Gt.mapSize,lt.spotShadow[wt]=Xt,lt.spotShadowMap[wt]=Bt,At++}wt++}else if($t.isRectAreaLight){const Ht=it.get($t);Ht.color.copy(Vt).multiplyScalar(Ut),Ht.halfWidth.set($t.width*.5,0,0),Ht.halfHeight.set(0,$t.height*.5,0),lt.rectArea[Et]=Ht,Et++}else if($t.isPointLight){const Ht=it.get($t);if(Ht.color.copy($t.color).multiplyScalar($t.intensity*Lt),Ht.distance=$t.distance,Ht.decay=$t.decay,$t.castShadow){const Gt=$t.shadow,Xt=st.get($t);Xt.shadowBias=Gt.bias,Xt.shadowNormalBias=Gt.normalBias,Xt.shadowRadius=Gt.radius,Xt.shadowMapSize=Gt.mapSize,Xt.shadowCameraNear=Gt.camera.near,Xt.shadowCameraFar=Gt.camera.far,lt.pointShadow[St]=Xt,lt.pointShadowMap[St]=Bt,lt.pointShadowMatrix[St]=$t.shadow.matrix,It++}lt.point[St]=Ht,St++}else if($t.isHemisphereLight){const Ht=it.get($t);Ht.skyColor.copy($t.color).multiplyScalar(Ut*Lt),Ht.groundColor.copy($t.groundColor).multiplyScalar(Ut*Lt),lt.hemi[Rt]=Ht,Rt++}}Et>0&&(rt.isWebGL2?nt.has("OES_texture_float_linear")===!0?(lt.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,lt.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(lt.rectAreaLTC1=UniformsLib.LTC_HALF_1,lt.rectAreaLTC2=UniformsLib.LTC_HALF_2):nt.has("OES_texture_float_linear")===!0?(lt.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,lt.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):nt.has("OES_texture_half_float_linear")===!0?(lt.rectAreaLTC1=UniformsLib.LTC_HALF_1,lt.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),lt.ambient[0]=gt,lt.ambient[1]=xt,lt.ambient[2]=yt;const Mt=lt.hash;(Mt.directionalLength!==vt||Mt.pointLength!==St||Mt.spotLength!==wt||Mt.rectAreaLength!==Et||Mt.hemiLength!==Rt||Mt.numDirectionalShadows!==Tt||Mt.numPointShadows!==It||Mt.numSpotShadows!==At||Mt.numSpotMaps!==Dt||Mt.numLightProbes!==Ft)&&(lt.directional.length=vt,lt.spot.length=wt,lt.rectArea.length=Et,lt.point.length=St,lt.hemi.length=Rt,lt.directionalShadow.length=Tt,lt.directionalShadowMap.length=Tt,lt.pointShadow.length=It,lt.pointShadowMap.length=It,lt.spotShadow.length=At,lt.spotShadowMap.length=At,lt.directionalShadowMatrix.length=Tt,lt.pointShadowMatrix.length=It,lt.spotLightMatrix.length=At+Dt-jt,lt.spotLightMap.length=Dt,lt.numSpotLightShadowsWithMaps=jt,lt.numLightProbes=Ft,Mt.directionalLength=vt,Mt.pointLength=St,Mt.spotLength=wt,Mt.rectAreaLength=Et,Mt.hemiLength=Rt,Mt.numDirectionalShadows=Tt,Mt.numPointShadows=It,Mt.numSpotShadows=At,Mt.numSpotMaps=Dt,Mt.numLightProbes=Ft,lt.version=nextVersion++)}function ft(pt,mt){let gt=0,xt=0,yt=0,vt=0,St=0;const wt=mt.matrixWorldInverse;for(let Et=0,Rt=pt.length;Et<Rt;Et++){const Tt=pt[Et];if(Tt.isDirectionalLight){const It=lt.directional[gt];It.direction.setFromMatrixPosition(Tt.matrixWorld),ct.setFromMatrixPosition(Tt.target.matrixWorld),It.direction.sub(ct),It.direction.transformDirection(wt),gt++}else if(Tt.isSpotLight){const It=lt.spot[yt];It.position.setFromMatrixPosition(Tt.matrixWorld),It.position.applyMatrix4(wt),It.direction.setFromMatrixPosition(Tt.matrixWorld),ct.setFromMatrixPosition(Tt.target.matrixWorld),It.direction.sub(ct),It.direction.transformDirection(wt),yt++}else if(Tt.isRectAreaLight){const It=lt.rectArea[vt];It.position.setFromMatrixPosition(Tt.matrixWorld),It.position.applyMatrix4(wt),dt.identity(),ut.copy(Tt.matrixWorld),ut.premultiply(wt),dt.extractRotation(ut),It.halfWidth.set(Tt.width*.5,0,0),It.halfHeight.set(0,Tt.height*.5,0),It.halfWidth.applyMatrix4(dt),It.halfHeight.applyMatrix4(dt),vt++}else if(Tt.isPointLight){const It=lt.point[xt];It.position.setFromMatrixPosition(Tt.matrixWorld),It.position.applyMatrix4(wt),xt++}else if(Tt.isHemisphereLight){const It=lt.hemi[St];It.direction.setFromMatrixPosition(Tt.matrixWorld),It.direction.transformDirection(wt),St++}}}return{setup:ht,setupView:ft,state:lt}}function WebGLRenderState(nt,rt){const it=new WebGLLights(nt,rt),st=[],lt=[];function ct(){st.length=0,lt.length=0}function ut(mt){st.push(mt)}function dt(mt){lt.push(mt)}function ht(mt){it.setup(st,mt)}function ft(mt){it.setupView(st,mt)}return{init:ct,state:{lightsArray:st,shadowsArray:lt,lights:it},setupLights:ht,setupLightsView:ft,pushLight:ut,pushShadow:dt}}function WebGLRenderStates(nt,rt){let it=new WeakMap;function st(ct,ut=0){const dt=it.get(ct);let ht;return dt===void 0?(ht=new WebGLRenderState(nt,rt),it.set(ct,[ht])):ut>=dt.length?(ht=new WebGLRenderState(nt,rt),dt.push(ht)):ht=dt[ut],ht}function lt(){it=new WeakMap}return{get:st,dispose:lt}}class MeshDepthMaterial extends Material{constructor(rt){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(rt)}copy(rt){return super.copy(rt),this.depthPacking=rt.depthPacking,this.map=rt.map,this.alphaMap=rt.alphaMap,this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(rt){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(rt)}copy(rt){return super.copy(rt),this.map=rt.map,this.alphaMap=rt.alphaMap,this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(nt,rt,it){let st=new Frustum;const lt=new Vector2,ct=new Vector2,ut=new Vector4,dt=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),ht=new MeshDistanceMaterial,ft={},pt=it.maxTextureSize,mt={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},gt=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),xt=gt.clone();xt.defines.HORIZONTAL_PASS=1;const yt=new BufferGeometry;yt.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const vt=new Mesh(yt,gt),St=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let wt=this.type;this.render=function(At,Dt,jt){if(St.enabled===!1||St.autoUpdate===!1&&St.needsUpdate===!1||At.length===0)return;const Ft=nt.getRenderTarget(),Lt=nt.getActiveCubeFace(),Mt=nt.getActiveMipmapLevel(),Ot=nt.state;Ot.setBlending(NoBlending),Ot.buffers.color.setClear(1,1,1,1),Ot.buffers.depth.setTest(!0),Ot.setScissorTest(!1);const Nt=wt!==VSMShadowMap&&this.type===VSMShadowMap,$t=wt===VSMShadowMap&&this.type!==VSMShadowMap;for(let Vt=0,Ut=At.length;Vt<Ut;Vt++){const zt=At[Vt],Bt=zt.shadow;if(Bt===void 0){console.warn("THREE.WebGLShadowMap:",zt,"has no shadow.");continue}if(Bt.autoUpdate===!1&&Bt.needsUpdate===!1)continue;lt.copy(Bt.mapSize);const Ht=Bt.getFrameExtents();if(lt.multiply(Ht),ct.copy(Bt.mapSize),(lt.x>pt||lt.y>pt)&&(lt.x>pt&&(ct.x=Math.floor(pt/Ht.x),lt.x=ct.x*Ht.x,Bt.mapSize.x=ct.x),lt.y>pt&&(ct.y=Math.floor(pt/Ht.y),lt.y=ct.y*Ht.y,Bt.mapSize.y=ct.y)),Bt.map===null||Nt===!0||$t===!0){const Xt=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};Bt.map!==null&&Bt.map.dispose(),Bt.map=new WebGLRenderTarget(lt.x,lt.y,Xt),Bt.map.texture.name=zt.name+".shadowMap",Bt.camera.updateProjectionMatrix()}nt.setRenderTarget(Bt.map),nt.clear();const Gt=Bt.getViewportCount();for(let Xt=0;Xt<Gt;Xt++){const Zt=Bt.getViewport(Xt);ut.set(ct.x*Zt.x,ct.y*Zt.y,ct.x*Zt.z,ct.y*Zt.w),Ot.viewport(ut),Bt.updateMatrices(zt,Xt),st=Bt.getFrustum(),Tt(Dt,jt,Bt.camera,zt,this.type)}Bt.isPointLightShadow!==!0&&this.type===VSMShadowMap&&Et(Bt,jt),Bt.needsUpdate=!1}wt=this.type,St.needsUpdate=!1,nt.setRenderTarget(Ft,Lt,Mt)};function Et(At,Dt){const jt=rt.update(vt);gt.defines.VSM_SAMPLES!==At.blurSamples&&(gt.defines.VSM_SAMPLES=At.blurSamples,xt.defines.VSM_SAMPLES=At.blurSamples,gt.needsUpdate=!0,xt.needsUpdate=!0),At.mapPass===null&&(At.mapPass=new WebGLRenderTarget(lt.x,lt.y)),gt.uniforms.shadow_pass.value=At.map.texture,gt.uniforms.resolution.value=At.mapSize,gt.uniforms.radius.value=At.radius,nt.setRenderTarget(At.mapPass),nt.clear(),nt.renderBufferDirect(Dt,null,jt,gt,vt,null),xt.uniforms.shadow_pass.value=At.mapPass.texture,xt.uniforms.resolution.value=At.mapSize,xt.uniforms.radius.value=At.radius,nt.setRenderTarget(At.map),nt.clear(),nt.renderBufferDirect(Dt,null,jt,xt,vt,null)}function Rt(At,Dt,jt,Ft){let Lt=null;const Mt=jt.isPointLight===!0?At.customDistanceMaterial:At.customDepthMaterial;if(Mt!==void 0)Lt=Mt;else if(Lt=jt.isPointLight===!0?ht:dt,nt.localClippingEnabled&&Dt.clipShadows===!0&&Array.isArray(Dt.clippingPlanes)&&Dt.clippingPlanes.length!==0||Dt.displacementMap&&Dt.displacementScale!==0||Dt.alphaMap&&Dt.alphaTest>0||Dt.map&&Dt.alphaTest>0){const Ot=Lt.uuid,Nt=Dt.uuid;let $t=ft[Ot];$t===void 0&&($t={},ft[Ot]=$t);let Vt=$t[Nt];Vt===void 0&&(Vt=Lt.clone(),$t[Nt]=Vt,Dt.addEventListener("dispose",It)),Lt=Vt}if(Lt.visible=Dt.visible,Lt.wireframe=Dt.wireframe,Ft===VSMShadowMap?Lt.side=Dt.shadowSide!==null?Dt.shadowSide:Dt.side:Lt.side=Dt.shadowSide!==null?Dt.shadowSide:mt[Dt.side],Lt.alphaMap=Dt.alphaMap,Lt.alphaTest=Dt.alphaTest,Lt.map=Dt.map,Lt.clipShadows=Dt.clipShadows,Lt.clippingPlanes=Dt.clippingPlanes,Lt.clipIntersection=Dt.clipIntersection,Lt.displacementMap=Dt.displacementMap,Lt.displacementScale=Dt.displacementScale,Lt.displacementBias=Dt.displacementBias,Lt.wireframeLinewidth=Dt.wireframeLinewidth,Lt.linewidth=Dt.linewidth,jt.isPointLight===!0&&Lt.isMeshDistanceMaterial===!0){const Ot=nt.properties.get(Lt);Ot.light=jt}return Lt}function Tt(At,Dt,jt,Ft,Lt){if(At.visible===!1)return;if(At.layers.test(Dt.layers)&&(At.isMesh||At.isLine||At.isPoints)&&(At.castShadow||At.receiveShadow&&Lt===VSMShadowMap)&&(!At.frustumCulled||st.intersectsObject(At))){At.modelViewMatrix.multiplyMatrices(jt.matrixWorldInverse,At.matrixWorld);const Nt=rt.update(At),$t=At.material;if(Array.isArray($t)){const Vt=Nt.groups;for(let Ut=0,zt=Vt.length;Ut<zt;Ut++){const Bt=Vt[Ut],Ht=$t[Bt.materialIndex];if(Ht&&Ht.visible){const Gt=Rt(At,Ht,Ft,Lt);At.onBeforeShadow(nt,At,Dt,jt,Nt,Gt,Bt),nt.renderBufferDirect(jt,null,Nt,Gt,At,Bt),At.onAfterShadow(nt,At,Dt,jt,Nt,Gt,Bt)}}}else if($t.visible){const Vt=Rt(At,$t,Ft,Lt);At.onBeforeShadow(nt,At,Dt,jt,Nt,Vt,null),nt.renderBufferDirect(jt,null,Nt,Vt,At,null),At.onAfterShadow(nt,At,Dt,jt,Nt,Vt,null)}}const Ot=At.children;for(let Nt=0,$t=Ot.length;Nt<$t;Nt++)Tt(Ot[Nt],Dt,jt,Ft,Lt)}function It(At){At.target.removeEventListener("dispose",It);for(const jt in ft){const Ft=ft[jt],Lt=At.target.uuid;Lt in Ft&&(Ft[Lt].dispose(),delete Ft[Lt])}}}function WebGLState(nt,rt,it){const st=it.isWebGL2;function lt(){let Mr=!1;const vn=new Vector4;let kr=null;const Er=new Vector4(0,0,0,0);return{setMask:function(Ur){kr!==Ur&&!Mr&&(nt.colorMask(Ur,Ur,Ur,Ur),kr=Ur)},setLocked:function(Ur){Mr=Ur},setClear:function(Ur,on,fn,Kn,es){es===!0&&(Ur*=Kn,on*=Kn,fn*=Kn),vn.set(Ur,on,fn,Kn),Er.equals(vn)===!1&&(nt.clearColor(Ur,on,fn,Kn),Er.copy(vn))},reset:function(){Mr=!1,kr=null,Er.set(-1,0,0,0)}}}function ct(){let Mr=!1,vn=null,kr=null,Er=null;return{setTest:function(Ur){Ur?xr(nt.DEPTH_TEST):gr(nt.DEPTH_TEST)},setMask:function(Ur){vn!==Ur&&!Mr&&(nt.depthMask(Ur),vn=Ur)},setFunc:function(Ur){if(kr!==Ur){switch(Ur){case NeverDepth:nt.depthFunc(nt.NEVER);break;case AlwaysDepth:nt.depthFunc(nt.ALWAYS);break;case LessDepth:nt.depthFunc(nt.LESS);break;case LessEqualDepth:nt.depthFunc(nt.LEQUAL);break;case EqualDepth:nt.depthFunc(nt.EQUAL);break;case GreaterEqualDepth:nt.depthFunc(nt.GEQUAL);break;case GreaterDepth:nt.depthFunc(nt.GREATER);break;case NotEqualDepth:nt.depthFunc(nt.NOTEQUAL);break;default:nt.depthFunc(nt.LEQUAL)}kr=Ur}},setLocked:function(Ur){Mr=Ur},setClear:function(Ur){Er!==Ur&&(nt.clearDepth(Ur),Er=Ur)},reset:function(){Mr=!1,vn=null,kr=null,Er=null}}}function ut(){let Mr=!1,vn=null,kr=null,Er=null,Ur=null,on=null,fn=null,Kn=null,es=null;return{setTest:function(Zn){Mr||(Zn?xr(nt.STENCIL_TEST):gr(nt.STENCIL_TEST))},setMask:function(Zn){vn!==Zn&&!Mr&&(nt.stencilMask(Zn),vn=Zn)},setFunc:function(Zn,Dn,ss){(kr!==Zn||Er!==Dn||Ur!==ss)&&(nt.stencilFunc(Zn,Dn,ss),kr=Zn,Er=Dn,Ur=ss)},setOp:function(Zn,Dn,ss){(on!==Zn||fn!==Dn||Kn!==ss)&&(nt.stencilOp(Zn,Dn,ss),on=Zn,fn=Dn,Kn=ss)},setLocked:function(Zn){Mr=Zn},setClear:function(Zn){es!==Zn&&(nt.clearStencil(Zn),es=Zn)},reset:function(){Mr=!1,vn=null,kr=null,Er=null,Ur=null,on=null,fn=null,Kn=null,es=null}}}const dt=new lt,ht=new ct,ft=new ut,pt=new WeakMap,mt=new WeakMap;let gt={},xt={},yt=new WeakMap,vt=[],St=null,wt=!1,Et=null,Rt=null,Tt=null,It=null,At=null,Dt=null,jt=null,Ft=new Color(0,0,0),Lt=0,Mt=!1,Ot=null,Nt=null,$t=null,Vt=null,Ut=null;const zt=nt.getParameter(nt.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Bt=!1,Ht=0;const Gt=nt.getParameter(nt.VERSION);Gt.indexOf("WebGL")!==-1?(Ht=parseFloat(/^WebGL (\d)/.exec(Gt)[1]),Bt=Ht>=1):Gt.indexOf("OpenGL ES")!==-1&&(Ht=parseFloat(/^OpenGL ES (\d)/.exec(Gt)[1]),Bt=Ht>=2);let Xt=null,Zt={};const hr=nt.getParameter(nt.SCISSOR_BOX),nr=nt.getParameter(nt.VIEWPORT),ir=new Vector4().fromArray(hr),yr=new Vector4().fromArray(nr);function Cr(Mr,vn,kr,Er){const Ur=new Uint8Array(4),on=nt.createTexture();nt.bindTexture(Mr,on),nt.texParameteri(Mr,nt.TEXTURE_MIN_FILTER,nt.NEAREST),nt.texParameteri(Mr,nt.TEXTURE_MAG_FILTER,nt.NEAREST);for(let fn=0;fn<kr;fn++)st&&(Mr===nt.TEXTURE_3D||Mr===nt.TEXTURE_2D_ARRAY)?nt.texImage3D(vn,0,nt.RGBA,1,1,Er,0,nt.RGBA,nt.UNSIGNED_BYTE,Ur):nt.texImage2D(vn+fn,0,nt.RGBA,1,1,0,nt.RGBA,nt.UNSIGNED_BYTE,Ur);return on}const Sr={};Sr[nt.TEXTURE_2D]=Cr(nt.TEXTURE_2D,nt.TEXTURE_2D,1),Sr[nt.TEXTURE_CUBE_MAP]=Cr(nt.TEXTURE_CUBE_MAP,nt.TEXTURE_CUBE_MAP_POSITIVE_X,6),st&&(Sr[nt.TEXTURE_2D_ARRAY]=Cr(nt.TEXTURE_2D_ARRAY,nt.TEXTURE_2D_ARRAY,1,1),Sr[nt.TEXTURE_3D]=Cr(nt.TEXTURE_3D,nt.TEXTURE_3D,1,1)),dt.setClear(0,0,0,1),ht.setClear(1),ft.setClear(0),xr(nt.DEPTH_TEST),ht.setFunc(LessEqualDepth),tn(!1),er(CullFaceBack),xr(nt.CULL_FACE),Vr(NoBlending);function xr(Mr){gt[Mr]!==!0&&(nt.enable(Mr),gt[Mr]=!0)}function gr(Mr){gt[Mr]!==!1&&(nt.disable(Mr),gt[Mr]=!1)}function _r(Mr,vn){return xt[Mr]!==vn?(nt.bindFramebuffer(Mr,vn),xt[Mr]=vn,st&&(Mr===nt.DRAW_FRAMEBUFFER&&(xt[nt.FRAMEBUFFER]=vn),Mr===nt.FRAMEBUFFER&&(xt[nt.DRAW_FRAMEBUFFER]=vn)),!0):!1}function fr(Mr,vn){let kr=vt,Er=!1;if(Mr)if(kr=yt.get(vn),kr===void 0&&(kr=[],yt.set(vn,kr)),Mr.isWebGLMultipleRenderTargets){const Ur=Mr.texture;if(kr.length!==Ur.length||kr[0]!==nt.COLOR_ATTACHMENT0){for(let on=0,fn=Ur.length;on<fn;on++)kr[on]=nt.COLOR_ATTACHMENT0+on;kr.length=Ur.length,Er=!0}}else kr[0]!==nt.COLOR_ATTACHMENT0&&(kr[0]=nt.COLOR_ATTACHMENT0,Er=!0);else kr[0]!==nt.BACK&&(kr[0]=nt.BACK,Er=!0);Er&&(it.isWebGL2?nt.drawBuffers(kr):rt.get("WEBGL_draw_buffers").drawBuffersWEBGL(kr))}function Nr(Mr){return St!==Mr?(nt.useProgram(Mr),St=Mr,!0):!1}const Tr={[AddEquation]:nt.FUNC_ADD,[SubtractEquation]:nt.FUNC_SUBTRACT,[ReverseSubtractEquation]:nt.FUNC_REVERSE_SUBTRACT};if(st)Tr[MinEquation]=nt.MIN,Tr[MaxEquation]=nt.MAX;else{const Mr=rt.get("EXT_blend_minmax");Mr!==null&&(Tr[MinEquation]=Mr.MIN_EXT,Tr[MaxEquation]=Mr.MAX_EXT)}const Hr={[ZeroFactor]:nt.ZERO,[OneFactor]:nt.ONE,[SrcColorFactor]:nt.SRC_COLOR,[SrcAlphaFactor]:nt.SRC_ALPHA,[SrcAlphaSaturateFactor]:nt.SRC_ALPHA_SATURATE,[DstColorFactor]:nt.DST_COLOR,[DstAlphaFactor]:nt.DST_ALPHA,[OneMinusSrcColorFactor]:nt.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:nt.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:nt.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:nt.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:nt.CONSTANT_COLOR,[OneMinusConstantColorFactor]:nt.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:nt.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:nt.ONE_MINUS_CONSTANT_ALPHA};function Vr(Mr,vn,kr,Er,Ur,on,fn,Kn,es,Zn){if(Mr===NoBlending){wt===!0&&(gr(nt.BLEND),wt=!1);return}if(wt===!1&&(xr(nt.BLEND),wt=!0),Mr!==CustomBlending){if(Mr!==Et||Zn!==Mt){if((Rt!==AddEquation||At!==AddEquation)&&(nt.blendEquation(nt.FUNC_ADD),Rt=AddEquation,At=AddEquation),Zn)switch(Mr){case NormalBlending:nt.blendFuncSeparate(nt.ONE,nt.ONE_MINUS_SRC_ALPHA,nt.ONE,nt.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:nt.blendFunc(nt.ONE,nt.ONE);break;case SubtractiveBlending:nt.blendFuncSeparate(nt.ZERO,nt.ONE_MINUS_SRC_COLOR,nt.ZERO,nt.ONE);break;case MultiplyBlending:nt.blendFuncSeparate(nt.ZERO,nt.SRC_COLOR,nt.ZERO,nt.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Mr);break}else switch(Mr){case NormalBlending:nt.blendFuncSeparate(nt.SRC_ALPHA,nt.ONE_MINUS_SRC_ALPHA,nt.ONE,nt.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:nt.blendFunc(nt.SRC_ALPHA,nt.ONE);break;case SubtractiveBlending:nt.blendFuncSeparate(nt.ZERO,nt.ONE_MINUS_SRC_COLOR,nt.ZERO,nt.ONE);break;case MultiplyBlending:nt.blendFunc(nt.ZERO,nt.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Mr);break}Tt=null,It=null,Dt=null,jt=null,Ft.set(0,0,0),Lt=0,Et=Mr,Mt=Zn}return}Ur=Ur||vn,on=on||kr,fn=fn||Er,(vn!==Rt||Ur!==At)&&(nt.blendEquationSeparate(Tr[vn],Tr[Ur]),Rt=vn,At=Ur),(kr!==Tt||Er!==It||on!==Dt||fn!==jt)&&(nt.blendFuncSeparate(Hr[kr],Hr[Er],Hr[on],Hr[fn]),Tt=kr,It=Er,Dt=on,jt=fn),(Kn.equals(Ft)===!1||es!==Lt)&&(nt.blendColor(Kn.r,Kn.g,Kn.b,es),Ft.copy(Kn),Lt=es),Et=Mr,Mt=!1}function mn(Mr,vn){Mr.side===DoubleSide?gr(nt.CULL_FACE):xr(nt.CULL_FACE);let kr=Mr.side===BackSide;vn&&(kr=!kr),tn(kr),Mr.blending===NormalBlending&&Mr.transparent===!1?Vr(NoBlending):Vr(Mr.blending,Mr.blendEquation,Mr.blendSrc,Mr.blendDst,Mr.blendEquationAlpha,Mr.blendSrcAlpha,Mr.blendDstAlpha,Mr.blendColor,Mr.blendAlpha,Mr.premultipliedAlpha),ht.setFunc(Mr.depthFunc),ht.setTest(Mr.depthTest),ht.setMask(Mr.depthWrite),dt.setMask(Mr.colorWrite);const Er=Mr.stencilWrite;ft.setTest(Er),Er&&(ft.setMask(Mr.stencilWriteMask),ft.setFunc(Mr.stencilFunc,Mr.stencilRef,Mr.stencilFuncMask),ft.setOp(Mr.stencilFail,Mr.stencilZFail,Mr.stencilZPass)),vr(Mr.polygonOffset,Mr.polygonOffsetFactor,Mr.polygonOffsetUnits),Mr.alphaToCoverage===!0?xr(nt.SAMPLE_ALPHA_TO_COVERAGE):gr(nt.SAMPLE_ALPHA_TO_COVERAGE)}function tn(Mr){Ot!==Mr&&(Mr?nt.frontFace(nt.CW):nt.frontFace(nt.CCW),Ot=Mr)}function er(Mr){Mr!==CullFaceNone?(xr(nt.CULL_FACE),Mr!==Nt&&(Mr===CullFaceBack?nt.cullFace(nt.BACK):Mr===CullFaceFront?nt.cullFace(nt.FRONT):nt.cullFace(nt.FRONT_AND_BACK))):gr(nt.CULL_FACE),Nt=Mr}function tr(Mr){Mr!==$t&&(Bt&&nt.lineWidth(Mr),$t=Mr)}function vr(Mr,vn,kr){Mr?(xr(nt.POLYGON_OFFSET_FILL),(Vt!==vn||Ut!==kr)&&(nt.polygonOffset(vn,kr),Vt=vn,Ut=kr)):gr(nt.POLYGON_OFFSET_FILL)}function Fr(Mr){Mr?xr(nt.SCISSOR_TEST):gr(nt.SCISSOR_TEST)}function Kr(Mr){Mr===void 0&&(Mr=nt.TEXTURE0+zt-1),Xt!==Mr&&(nt.activeTexture(Mr),Xt=Mr)}function qr(Mr,vn,kr){kr===void 0&&(Xt===null?kr=nt.TEXTURE0+zt-1:kr=Xt);let Er=Zt[kr];Er===void 0&&(Er={type:void 0,texture:void 0},Zt[kr]=Er),(Er.type!==Mr||Er.texture!==vn)&&(Xt!==kr&&(nt.activeTexture(kr),Xt=kr),nt.bindTexture(Mr,vn||Sr[Mr]),Er.type=Mr,Er.texture=vn)}function pn(){const Mr=Zt[Xt];Mr!==void 0&&Mr.type!==void 0&&(nt.bindTexture(Mr.type,null),Mr.type=void 0,Mr.texture=void 0)}function En(){try{nt.compressedTexImage2D.apply(nt,arguments)}catch(Mr){console.error("THREE.WebGLState:",Mr)}}function Rn(){try{nt.compressedTexImage3D.apply(nt,arguments)}catch(Mr){console.error("THREE.WebGLState:",Mr)}}function Qn(){try{nt.texSubImage2D.apply(nt,arguments)}catch(Mr){console.error("THREE.WebGLState:",Mr)}}function Ln(){try{nt.texSubImage3D.apply(nt,arguments)}catch(Mr){console.error("THREE.WebGLState:",Mr)}}function ln(){try{nt.compressedTexSubImage2D.apply(nt,arguments)}catch(Mr){console.error("THREE.WebGLState:",Mr)}}function Xn(){try{nt.compressedTexSubImage3D.apply(nt,arguments)}catch(Mr){console.error("THREE.WebGLState:",Mr)}}function Yr(){try{nt.texStorage2D.apply(nt,arguments)}catch(Mr){console.error("THREE.WebGLState:",Mr)}}function Qr(){try{nt.texStorage3D.apply(nt,arguments)}catch(Mr){console.error("THREE.WebGLState:",Mr)}}function Mn(){try{nt.texImage2D.apply(nt,arguments)}catch(Mr){console.error("THREE.WebGLState:",Mr)}}function Ar(){try{nt.texImage3D.apply(nt,arguments)}catch(Mr){console.error("THREE.WebGLState:",Mr)}}function or(Mr){ir.equals(Mr)===!1&&(nt.scissor(Mr.x,Mr.y,Mr.z,Mr.w),ir.copy(Mr))}function Wr(Mr){yr.equals(Mr)===!1&&(nt.viewport(Mr.x,Mr.y,Mr.z,Mr.w),yr.copy(Mr))}function Ir(Mr,vn){let kr=mt.get(vn);kr===void 0&&(kr=new WeakMap,mt.set(vn,kr));let Er=kr.get(Mr);Er===void 0&&(Er=nt.getUniformBlockIndex(vn,Mr.name),kr.set(Mr,Er))}function dn(Mr,vn){const Er=mt.get(vn).get(Mr);pt.get(vn)!==Er&&(nt.uniformBlockBinding(vn,Er,Mr.__bindingPointIndex),pt.set(vn,Er))}function kn(){nt.disable(nt.BLEND),nt.disable(nt.CULL_FACE),nt.disable(nt.DEPTH_TEST),nt.disable(nt.POLYGON_OFFSET_FILL),nt.disable(nt.SCISSOR_TEST),nt.disable(nt.STENCIL_TEST),nt.disable(nt.SAMPLE_ALPHA_TO_COVERAGE),nt.blendEquation(nt.FUNC_ADD),nt.blendFunc(nt.ONE,nt.ZERO),nt.blendFuncSeparate(nt.ONE,nt.ZERO,nt.ONE,nt.ZERO),nt.blendColor(0,0,0,0),nt.colorMask(!0,!0,!0,!0),nt.clearColor(0,0,0,0),nt.depthMask(!0),nt.depthFunc(nt.LESS),nt.clearDepth(1),nt.stencilMask(4294967295),nt.stencilFunc(nt.ALWAYS,0,4294967295),nt.stencilOp(nt.KEEP,nt.KEEP,nt.KEEP),nt.clearStencil(0),nt.cullFace(nt.BACK),nt.frontFace(nt.CCW),nt.polygonOffset(0,0),nt.activeTexture(nt.TEXTURE0),nt.bindFramebuffer(nt.FRAMEBUFFER,null),st===!0&&(nt.bindFramebuffer(nt.DRAW_FRAMEBUFFER,null),nt.bindFramebuffer(nt.READ_FRAMEBUFFER,null)),nt.useProgram(null),nt.lineWidth(1),nt.scissor(0,0,nt.canvas.width,nt.canvas.height),nt.viewport(0,0,nt.canvas.width,nt.canvas.height),gt={},Xt=null,Zt={},xt={},yt=new WeakMap,vt=[],St=null,wt=!1,Et=null,Rt=null,Tt=null,It=null,At=null,Dt=null,jt=null,Ft=new Color(0,0,0),Lt=0,Mt=!1,Ot=null,Nt=null,$t=null,Vt=null,Ut=null,ir.set(0,0,nt.canvas.width,nt.canvas.height),yr.set(0,0,nt.canvas.width,nt.canvas.height),dt.reset(),ht.reset(),ft.reset()}return{buffers:{color:dt,depth:ht,stencil:ft},enable:xr,disable:gr,bindFramebuffer:_r,drawBuffers:fr,useProgram:Nr,setBlending:Vr,setMaterial:mn,setFlipSided:tn,setCullFace:er,setLineWidth:tr,setPolygonOffset:vr,setScissorTest:Fr,activeTexture:Kr,bindTexture:qr,unbindTexture:pn,compressedTexImage2D:En,compressedTexImage3D:Rn,texImage2D:Mn,texImage3D:Ar,updateUBOMapping:Ir,uniformBlockBinding:dn,texStorage2D:Yr,texStorage3D:Qr,texSubImage2D:Qn,texSubImage3D:Ln,compressedTexSubImage2D:ln,compressedTexSubImage3D:Xn,scissor:or,viewport:Wr,reset:kn}}function WebGLTextures(nt,rt,it,st,lt,ct,ut){const dt=lt.isWebGL2,ht=rt.has("WEBGL_multisampled_render_to_texture")?rt.get("WEBGL_multisampled_render_to_texture"):null,ft=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),pt=new WeakMap;let mt;const gt=new WeakMap;let xt=!1;try{xt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function yt(er,tr){return xt?new OffscreenCanvas(er,tr):createElementNS("canvas")}function vt(er,tr,vr,Fr){let Kr=1;if((er.width>Fr||er.height>Fr)&&(Kr=Fr/Math.max(er.width,er.height)),Kr<1||tr===!0)if(typeof HTMLImageElement<"u"&&er instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&er instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&er instanceof ImageBitmap){const qr=tr?floorPowerOfTwo:Math.floor,pn=qr(Kr*er.width),En=qr(Kr*er.height);mt===void 0&&(mt=yt(pn,En));const Rn=vr?yt(pn,En):mt;return Rn.width=pn,Rn.height=En,Rn.getContext("2d").drawImage(er,0,0,pn,En),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+er.width+"x"+er.height+") to ("+pn+"x"+En+")."),Rn}else return"data"in er&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+er.width+"x"+er.height+")."),er;return er}function St(er){return isPowerOfTwo(er.width)&&isPowerOfTwo(er.height)}function wt(er){return dt?!1:er.wrapS!==ClampToEdgeWrapping||er.wrapT!==ClampToEdgeWrapping||er.minFilter!==NearestFilter&&er.minFilter!==LinearFilter}function Et(er,tr){return er.generateMipmaps&&tr&&er.minFilter!==NearestFilter&&er.minFilter!==LinearFilter}function Rt(er){nt.generateMipmap(er)}function Tt(er,tr,vr,Fr,Kr=!1){if(dt===!1)return tr;if(er!==null){if(nt[er]!==void 0)return nt[er];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+er+"'")}let qr=tr;if(tr===nt.RED&&(vr===nt.FLOAT&&(qr=nt.R32F),vr===nt.HALF_FLOAT&&(qr=nt.R16F),vr===nt.UNSIGNED_BYTE&&(qr=nt.R8)),tr===nt.RED_INTEGER&&(vr===nt.UNSIGNED_BYTE&&(qr=nt.R8UI),vr===nt.UNSIGNED_SHORT&&(qr=nt.R16UI),vr===nt.UNSIGNED_INT&&(qr=nt.R32UI),vr===nt.BYTE&&(qr=nt.R8I),vr===nt.SHORT&&(qr=nt.R16I),vr===nt.INT&&(qr=nt.R32I)),tr===nt.RG&&(vr===nt.FLOAT&&(qr=nt.RG32F),vr===nt.HALF_FLOAT&&(qr=nt.RG16F),vr===nt.UNSIGNED_BYTE&&(qr=nt.RG8)),tr===nt.RGBA){const pn=Kr?LinearTransfer:ColorManagement.getTransfer(Fr);vr===nt.FLOAT&&(qr=nt.RGBA32F),vr===nt.HALF_FLOAT&&(qr=nt.RGBA16F),vr===nt.UNSIGNED_BYTE&&(qr=pn===SRGBTransfer?nt.SRGB8_ALPHA8:nt.RGBA8),vr===nt.UNSIGNED_SHORT_4_4_4_4&&(qr=nt.RGBA4),vr===nt.UNSIGNED_SHORT_5_5_5_1&&(qr=nt.RGB5_A1)}return(qr===nt.R16F||qr===nt.R32F||qr===nt.RG16F||qr===nt.RG32F||qr===nt.RGBA16F||qr===nt.RGBA32F)&&rt.get("EXT_color_buffer_float"),qr}function It(er,tr,vr){return Et(er,vr)===!0||er.isFramebufferTexture&&er.minFilter!==NearestFilter&&er.minFilter!==LinearFilter?Math.log2(Math.max(tr.width,tr.height))+1:er.mipmaps!==void 0&&er.mipmaps.length>0?er.mipmaps.length:er.isCompressedTexture&&Array.isArray(er.image)?tr.mipmaps.length:1}function At(er){return er===NearestFilter||er===NearestMipmapNearestFilter||er===NearestMipmapLinearFilter?nt.NEAREST:nt.LINEAR}function Dt(er){const tr=er.target;tr.removeEventListener("dispose",Dt),Ft(tr),tr.isVideoTexture&&pt.delete(tr)}function jt(er){const tr=er.target;tr.removeEventListener("dispose",jt),Mt(tr)}function Ft(er){const tr=st.get(er);if(tr.__webglInit===void 0)return;const vr=er.source,Fr=gt.get(vr);if(Fr){const Kr=Fr[tr.__cacheKey];Kr.usedTimes--,Kr.usedTimes===0&&Lt(er),Object.keys(Fr).length===0&&gt.delete(vr)}st.remove(er)}function Lt(er){const tr=st.get(er);nt.deleteTexture(tr.__webglTexture);const vr=er.source,Fr=gt.get(vr);delete Fr[tr.__cacheKey],ut.memory.textures--}function Mt(er){const tr=er.texture,vr=st.get(er),Fr=st.get(tr);if(Fr.__webglTexture!==void 0&&(nt.deleteTexture(Fr.__webglTexture),ut.memory.textures--),er.depthTexture&&er.depthTexture.dispose(),er.isWebGLCubeRenderTarget)for(let Kr=0;Kr<6;Kr++){if(Array.isArray(vr.__webglFramebuffer[Kr]))for(let qr=0;qr<vr.__webglFramebuffer[Kr].length;qr++)nt.deleteFramebuffer(vr.__webglFramebuffer[Kr][qr]);else nt.deleteFramebuffer(vr.__webglFramebuffer[Kr]);vr.__webglDepthbuffer&&nt.deleteRenderbuffer(vr.__webglDepthbuffer[Kr])}else{if(Array.isArray(vr.__webglFramebuffer))for(let Kr=0;Kr<vr.__webglFramebuffer.length;Kr++)nt.deleteFramebuffer(vr.__webglFramebuffer[Kr]);else nt.deleteFramebuffer(vr.__webglFramebuffer);if(vr.__webglDepthbuffer&&nt.deleteRenderbuffer(vr.__webglDepthbuffer),vr.__webglMultisampledFramebuffer&&nt.deleteFramebuffer(vr.__webglMultisampledFramebuffer),vr.__webglColorRenderbuffer)for(let Kr=0;Kr<vr.__webglColorRenderbuffer.length;Kr++)vr.__webglColorRenderbuffer[Kr]&&nt.deleteRenderbuffer(vr.__webglColorRenderbuffer[Kr]);vr.__webglDepthRenderbuffer&&nt.deleteRenderbuffer(vr.__webglDepthRenderbuffer)}if(er.isWebGLMultipleRenderTargets)for(let Kr=0,qr=tr.length;Kr<qr;Kr++){const pn=st.get(tr[Kr]);pn.__webglTexture&&(nt.deleteTexture(pn.__webglTexture),ut.memory.textures--),st.remove(tr[Kr])}st.remove(tr),st.remove(er)}let Ot=0;function Nt(){Ot=0}function $t(){const er=Ot;return er>=lt.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+er+" texture units while this GPU supports only "+lt.maxTextures),Ot+=1,er}function Vt(er){const tr=[];return tr.push(er.wrapS),tr.push(er.wrapT),tr.push(er.wrapR||0),tr.push(er.magFilter),tr.push(er.minFilter),tr.push(er.anisotropy),tr.push(er.internalFormat),tr.push(er.format),tr.push(er.type),tr.push(er.generateMipmaps),tr.push(er.premultiplyAlpha),tr.push(er.flipY),tr.push(er.unpackAlignment),tr.push(er.colorSpace),tr.join()}function Ut(er,tr){const vr=st.get(er);if(er.isVideoTexture&&mn(er),er.isRenderTargetTexture===!1&&er.version>0&&vr.__version!==er.version){const Fr=er.image;if(Fr===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Fr.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ir(vr,er,tr);return}}it.bindTexture(nt.TEXTURE_2D,vr.__webglTexture,nt.TEXTURE0+tr)}function zt(er,tr){const vr=st.get(er);if(er.version>0&&vr.__version!==er.version){ir(vr,er,tr);return}it.bindTexture(nt.TEXTURE_2D_ARRAY,vr.__webglTexture,nt.TEXTURE0+tr)}function Bt(er,tr){const vr=st.get(er);if(er.version>0&&vr.__version!==er.version){ir(vr,er,tr);return}it.bindTexture(nt.TEXTURE_3D,vr.__webglTexture,nt.TEXTURE0+tr)}function Ht(er,tr){const vr=st.get(er);if(er.version>0&&vr.__version!==er.version){yr(vr,er,tr);return}it.bindTexture(nt.TEXTURE_CUBE_MAP,vr.__webglTexture,nt.TEXTURE0+tr)}const Gt={[RepeatWrapping]:nt.REPEAT,[ClampToEdgeWrapping]:nt.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:nt.MIRRORED_REPEAT},Xt={[NearestFilter]:nt.NEAREST,[NearestMipmapNearestFilter]:nt.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:nt.NEAREST_MIPMAP_LINEAR,[LinearFilter]:nt.LINEAR,[LinearMipmapNearestFilter]:nt.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:nt.LINEAR_MIPMAP_LINEAR},Zt={[NeverCompare]:nt.NEVER,[AlwaysCompare]:nt.ALWAYS,[LessCompare]:nt.LESS,[LessEqualCompare]:nt.LEQUAL,[EqualCompare]:nt.EQUAL,[GreaterEqualCompare]:nt.GEQUAL,[GreaterCompare]:nt.GREATER,[NotEqualCompare]:nt.NOTEQUAL};function hr(er,tr,vr){if(tr.type===FloatType&&rt.has("OES_texture_float_linear")===!1&&(tr.magFilter===LinearFilter||tr.magFilter===LinearMipmapNearestFilter||tr.magFilter===NearestMipmapLinearFilter||tr.magFilter===LinearMipmapLinearFilter||tr.minFilter===LinearFilter||tr.minFilter===LinearMipmapNearestFilter||tr.minFilter===NearestMipmapLinearFilter||tr.minFilter===LinearMipmapLinearFilter)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),vr?(nt.texParameteri(er,nt.TEXTURE_WRAP_S,Gt[tr.wrapS]),nt.texParameteri(er,nt.TEXTURE_WRAP_T,Gt[tr.wrapT]),(er===nt.TEXTURE_3D||er===nt.TEXTURE_2D_ARRAY)&&nt.texParameteri(er,nt.TEXTURE_WRAP_R,Gt[tr.wrapR]),nt.texParameteri(er,nt.TEXTURE_MAG_FILTER,Xt[tr.magFilter]),nt.texParameteri(er,nt.TEXTURE_MIN_FILTER,Xt[tr.minFilter])):(nt.texParameteri(er,nt.TEXTURE_WRAP_S,nt.CLAMP_TO_EDGE),nt.texParameteri(er,nt.TEXTURE_WRAP_T,nt.CLAMP_TO_EDGE),(er===nt.TEXTURE_3D||er===nt.TEXTURE_2D_ARRAY)&&nt.texParameteri(er,nt.TEXTURE_WRAP_R,nt.CLAMP_TO_EDGE),(tr.wrapS!==ClampToEdgeWrapping||tr.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),nt.texParameteri(er,nt.TEXTURE_MAG_FILTER,At(tr.magFilter)),nt.texParameteri(er,nt.TEXTURE_MIN_FILTER,At(tr.minFilter)),tr.minFilter!==NearestFilter&&tr.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),tr.compareFunction&&(nt.texParameteri(er,nt.TEXTURE_COMPARE_MODE,nt.COMPARE_REF_TO_TEXTURE),nt.texParameteri(er,nt.TEXTURE_COMPARE_FUNC,Zt[tr.compareFunction])),rt.has("EXT_texture_filter_anisotropic")===!0){const Fr=rt.get("EXT_texture_filter_anisotropic");if(tr.magFilter===NearestFilter||tr.minFilter!==NearestMipmapLinearFilter&&tr.minFilter!==LinearMipmapLinearFilter||tr.type===FloatType&&rt.has("OES_texture_float_linear")===!1||dt===!1&&tr.type===HalfFloatType&&rt.has("OES_texture_half_float_linear")===!1)return;(tr.anisotropy>1||st.get(tr).__currentAnisotropy)&&(nt.texParameterf(er,Fr.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(tr.anisotropy,lt.getMaxAnisotropy())),st.get(tr).__currentAnisotropy=tr.anisotropy)}}function nr(er,tr){let vr=!1;er.__webglInit===void 0&&(er.__webglInit=!0,tr.addEventListener("dispose",Dt));const Fr=tr.source;let Kr=gt.get(Fr);Kr===void 0&&(Kr={},gt.set(Fr,Kr));const qr=Vt(tr);if(qr!==er.__cacheKey){Kr[qr]===void 0&&(Kr[qr]={texture:nt.createTexture(),usedTimes:0},ut.memory.textures++,vr=!0),Kr[qr].usedTimes++;const pn=Kr[er.__cacheKey];pn!==void 0&&(Kr[er.__cacheKey].usedTimes--,pn.usedTimes===0&&Lt(tr)),er.__cacheKey=qr,er.__webglTexture=Kr[qr].texture}return vr}function ir(er,tr,vr){let Fr=nt.TEXTURE_2D;(tr.isDataArrayTexture||tr.isCompressedArrayTexture)&&(Fr=nt.TEXTURE_2D_ARRAY),tr.isData3DTexture&&(Fr=nt.TEXTURE_3D);const Kr=nr(er,tr),qr=tr.source;it.bindTexture(Fr,er.__webglTexture,nt.TEXTURE0+vr);const pn=st.get(qr);if(qr.version!==pn.__version||Kr===!0){it.activeTexture(nt.TEXTURE0+vr);const En=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Rn=tr.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(tr.colorSpace),Qn=tr.colorSpace===NoColorSpace||En===Rn?nt.NONE:nt.BROWSER_DEFAULT_WEBGL;nt.pixelStorei(nt.UNPACK_FLIP_Y_WEBGL,tr.flipY),nt.pixelStorei(nt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,tr.premultiplyAlpha),nt.pixelStorei(nt.UNPACK_ALIGNMENT,tr.unpackAlignment),nt.pixelStorei(nt.UNPACK_COLORSPACE_CONVERSION_WEBGL,Qn);const Ln=wt(tr)&&St(tr.image)===!1;let ln=vt(tr.image,Ln,!1,lt.maxTextureSize);ln=tn(tr,ln);const Xn=St(ln)||dt,Yr=ct.convert(tr.format,tr.colorSpace);let Qr=ct.convert(tr.type),Mn=Tt(tr.internalFormat,Yr,Qr,tr.colorSpace,tr.isVideoTexture);hr(Fr,tr,Xn);let Ar;const or=tr.mipmaps,Wr=dt&&tr.isVideoTexture!==!0&&Mn!==RGB_ETC1_Format,Ir=pn.__version===void 0||Kr===!0,dn=qr.dataReady,kn=It(tr,ln,Xn);if(tr.isDepthTexture)Mn=nt.DEPTH_COMPONENT,dt?tr.type===FloatType?Mn=nt.DEPTH_COMPONENT32F:tr.type===UnsignedIntType?Mn=nt.DEPTH_COMPONENT24:tr.type===UnsignedInt248Type?Mn=nt.DEPTH24_STENCIL8:Mn=nt.DEPTH_COMPONENT16:tr.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),tr.format===DepthFormat&&Mn===nt.DEPTH_COMPONENT&&tr.type!==UnsignedShortType&&tr.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),tr.type=UnsignedIntType,Qr=ct.convert(tr.type)),tr.format===DepthStencilFormat&&Mn===nt.DEPTH_COMPONENT&&(Mn=nt.DEPTH_STENCIL,tr.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),tr.type=UnsignedInt248Type,Qr=ct.convert(tr.type))),Ir&&(Wr?it.texStorage2D(nt.TEXTURE_2D,1,Mn,ln.width,ln.height):it.texImage2D(nt.TEXTURE_2D,0,Mn,ln.width,ln.height,0,Yr,Qr,null));else if(tr.isDataTexture)if(or.length>0&&Xn){Wr&&Ir&&it.texStorage2D(nt.TEXTURE_2D,kn,Mn,or[0].width,or[0].height);for(let Mr=0,vn=or.length;Mr<vn;Mr++)Ar=or[Mr],Wr?dn&&it.texSubImage2D(nt.TEXTURE_2D,Mr,0,0,Ar.width,Ar.height,Yr,Qr,Ar.data):it.texImage2D(nt.TEXTURE_2D,Mr,Mn,Ar.width,Ar.height,0,Yr,Qr,Ar.data);tr.generateMipmaps=!1}else Wr?(Ir&&it.texStorage2D(nt.TEXTURE_2D,kn,Mn,ln.width,ln.height),dn&&it.texSubImage2D(nt.TEXTURE_2D,0,0,0,ln.width,ln.height,Yr,Qr,ln.data)):it.texImage2D(nt.TEXTURE_2D,0,Mn,ln.width,ln.height,0,Yr,Qr,ln.data);else if(tr.isCompressedTexture)if(tr.isCompressedArrayTexture){Wr&&Ir&&it.texStorage3D(nt.TEXTURE_2D_ARRAY,kn,Mn,or[0].width,or[0].height,ln.depth);for(let Mr=0,vn=or.length;Mr<vn;Mr++)Ar=or[Mr],tr.format!==RGBAFormat?Yr!==null?Wr?dn&&it.compressedTexSubImage3D(nt.TEXTURE_2D_ARRAY,Mr,0,0,0,Ar.width,Ar.height,ln.depth,Yr,Ar.data,0,0):it.compressedTexImage3D(nt.TEXTURE_2D_ARRAY,Mr,Mn,Ar.width,Ar.height,ln.depth,0,Ar.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Wr?dn&&it.texSubImage3D(nt.TEXTURE_2D_ARRAY,Mr,0,0,0,Ar.width,Ar.height,ln.depth,Yr,Qr,Ar.data):it.texImage3D(nt.TEXTURE_2D_ARRAY,Mr,Mn,Ar.width,Ar.height,ln.depth,0,Yr,Qr,Ar.data)}else{Wr&&Ir&&it.texStorage2D(nt.TEXTURE_2D,kn,Mn,or[0].width,or[0].height);for(let Mr=0,vn=or.length;Mr<vn;Mr++)Ar=or[Mr],tr.format!==RGBAFormat?Yr!==null?Wr?dn&&it.compressedTexSubImage2D(nt.TEXTURE_2D,Mr,0,0,Ar.width,Ar.height,Yr,Ar.data):it.compressedTexImage2D(nt.TEXTURE_2D,Mr,Mn,Ar.width,Ar.height,0,Ar.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Wr?dn&&it.texSubImage2D(nt.TEXTURE_2D,Mr,0,0,Ar.width,Ar.height,Yr,Qr,Ar.data):it.texImage2D(nt.TEXTURE_2D,Mr,Mn,Ar.width,Ar.height,0,Yr,Qr,Ar.data)}else if(tr.isDataArrayTexture)Wr?(Ir&&it.texStorage3D(nt.TEXTURE_2D_ARRAY,kn,Mn,ln.width,ln.height,ln.depth),dn&&it.texSubImage3D(nt.TEXTURE_2D_ARRAY,0,0,0,0,ln.width,ln.height,ln.depth,Yr,Qr,ln.data)):it.texImage3D(nt.TEXTURE_2D_ARRAY,0,Mn,ln.width,ln.height,ln.depth,0,Yr,Qr,ln.data);else if(tr.isData3DTexture)Wr?(Ir&&it.texStorage3D(nt.TEXTURE_3D,kn,Mn,ln.width,ln.height,ln.depth),dn&&it.texSubImage3D(nt.TEXTURE_3D,0,0,0,0,ln.width,ln.height,ln.depth,Yr,Qr,ln.data)):it.texImage3D(nt.TEXTURE_3D,0,Mn,ln.width,ln.height,ln.depth,0,Yr,Qr,ln.data);else if(tr.isFramebufferTexture){if(Ir)if(Wr)it.texStorage2D(nt.TEXTURE_2D,kn,Mn,ln.width,ln.height);else{let Mr=ln.width,vn=ln.height;for(let kr=0;kr<kn;kr++)it.texImage2D(nt.TEXTURE_2D,kr,Mn,Mr,vn,0,Yr,Qr,null),Mr>>=1,vn>>=1}}else if(or.length>0&&Xn){Wr&&Ir&&it.texStorage2D(nt.TEXTURE_2D,kn,Mn,or[0].width,or[0].height);for(let Mr=0,vn=or.length;Mr<vn;Mr++)Ar=or[Mr],Wr?dn&&it.texSubImage2D(nt.TEXTURE_2D,Mr,0,0,Yr,Qr,Ar):it.texImage2D(nt.TEXTURE_2D,Mr,Mn,Yr,Qr,Ar);tr.generateMipmaps=!1}else Wr?(Ir&&it.texStorage2D(nt.TEXTURE_2D,kn,Mn,ln.width,ln.height),dn&&it.texSubImage2D(nt.TEXTURE_2D,0,0,0,Yr,Qr,ln)):it.texImage2D(nt.TEXTURE_2D,0,Mn,Yr,Qr,ln);Et(tr,Xn)&&Rt(Fr),pn.__version=qr.version,tr.onUpdate&&tr.onUpdate(tr)}er.__version=tr.version}function yr(er,tr,vr){if(tr.image.length!==6)return;const Fr=nr(er,tr),Kr=tr.source;it.bindTexture(nt.TEXTURE_CUBE_MAP,er.__webglTexture,nt.TEXTURE0+vr);const qr=st.get(Kr);if(Kr.version!==qr.__version||Fr===!0){it.activeTexture(nt.TEXTURE0+vr);const pn=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),En=tr.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(tr.colorSpace),Rn=tr.colorSpace===NoColorSpace||pn===En?nt.NONE:nt.BROWSER_DEFAULT_WEBGL;nt.pixelStorei(nt.UNPACK_FLIP_Y_WEBGL,tr.flipY),nt.pixelStorei(nt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,tr.premultiplyAlpha),nt.pixelStorei(nt.UNPACK_ALIGNMENT,tr.unpackAlignment),nt.pixelStorei(nt.UNPACK_COLORSPACE_CONVERSION_WEBGL,Rn);const Qn=tr.isCompressedTexture||tr.image[0].isCompressedTexture,Ln=tr.image[0]&&tr.image[0].isDataTexture,ln=[];for(let Mr=0;Mr<6;Mr++)!Qn&&!Ln?ln[Mr]=vt(tr.image[Mr],!1,!0,lt.maxCubemapSize):ln[Mr]=Ln?tr.image[Mr].image:tr.image[Mr],ln[Mr]=tn(tr,ln[Mr]);const Xn=ln[0],Yr=St(Xn)||dt,Qr=ct.convert(tr.format,tr.colorSpace),Mn=ct.convert(tr.type),Ar=Tt(tr.internalFormat,Qr,Mn,tr.colorSpace),or=dt&&tr.isVideoTexture!==!0,Wr=qr.__version===void 0||Fr===!0,Ir=Kr.dataReady;let dn=It(tr,Xn,Yr);hr(nt.TEXTURE_CUBE_MAP,tr,Yr);let kn;if(Qn){or&&Wr&&it.texStorage2D(nt.TEXTURE_CUBE_MAP,dn,Ar,Xn.width,Xn.height);for(let Mr=0;Mr<6;Mr++){kn=ln[Mr].mipmaps;for(let vn=0;vn<kn.length;vn++){const kr=kn[vn];tr.format!==RGBAFormat?Qr!==null?or?Ir&&it.compressedTexSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Mr,vn,0,0,kr.width,kr.height,Qr,kr.data):it.compressedTexImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Mr,vn,Ar,kr.width,kr.height,0,kr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):or?Ir&&it.texSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Mr,vn,0,0,kr.width,kr.height,Qr,Mn,kr.data):it.texImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Mr,vn,Ar,kr.width,kr.height,0,Qr,Mn,kr.data)}}}else{kn=tr.mipmaps,or&&Wr&&(kn.length>0&&dn++,it.texStorage2D(nt.TEXTURE_CUBE_MAP,dn,Ar,ln[0].width,ln[0].height));for(let Mr=0;Mr<6;Mr++)if(Ln){or?Ir&&it.texSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Mr,0,0,0,ln[Mr].width,ln[Mr].height,Qr,Mn,ln[Mr].data):it.texImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Mr,0,Ar,ln[Mr].width,ln[Mr].height,0,Qr,Mn,ln[Mr].data);for(let vn=0;vn<kn.length;vn++){const Er=kn[vn].image[Mr].image;or?Ir&&it.texSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Mr,vn+1,0,0,Er.width,Er.height,Qr,Mn,Er.data):it.texImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Mr,vn+1,Ar,Er.width,Er.height,0,Qr,Mn,Er.data)}}else{or?Ir&&it.texSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Mr,0,0,0,Qr,Mn,ln[Mr]):it.texImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Mr,0,Ar,Qr,Mn,ln[Mr]);for(let vn=0;vn<kn.length;vn++){const kr=kn[vn];or?Ir&&it.texSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Mr,vn+1,0,0,Qr,Mn,kr.image[Mr]):it.texImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+Mr,vn+1,Ar,Qr,Mn,kr.image[Mr])}}}Et(tr,Yr)&&Rt(nt.TEXTURE_CUBE_MAP),qr.__version=Kr.version,tr.onUpdate&&tr.onUpdate(tr)}er.__version=tr.version}function Cr(er,tr,vr,Fr,Kr,qr){const pn=ct.convert(vr.format,vr.colorSpace),En=ct.convert(vr.type),Rn=Tt(vr.internalFormat,pn,En,vr.colorSpace);if(!st.get(tr).__hasExternalTextures){const Ln=Math.max(1,tr.width>>qr),ln=Math.max(1,tr.height>>qr);Kr===nt.TEXTURE_3D||Kr===nt.TEXTURE_2D_ARRAY?it.texImage3D(Kr,qr,Rn,Ln,ln,tr.depth,0,pn,En,null):it.texImage2D(Kr,qr,Rn,Ln,ln,0,pn,En,null)}it.bindFramebuffer(nt.FRAMEBUFFER,er),Vr(tr)?ht.framebufferTexture2DMultisampleEXT(nt.FRAMEBUFFER,Fr,Kr,st.get(vr).__webglTexture,0,Hr(tr)):(Kr===nt.TEXTURE_2D||Kr>=nt.TEXTURE_CUBE_MAP_POSITIVE_X&&Kr<=nt.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&nt.framebufferTexture2D(nt.FRAMEBUFFER,Fr,Kr,st.get(vr).__webglTexture,qr),it.bindFramebuffer(nt.FRAMEBUFFER,null)}function Sr(er,tr,vr){if(nt.bindRenderbuffer(nt.RENDERBUFFER,er),tr.depthBuffer&&!tr.stencilBuffer){let Fr=dt===!0?nt.DEPTH_COMPONENT24:nt.DEPTH_COMPONENT16;if(vr||Vr(tr)){const Kr=tr.depthTexture;Kr&&Kr.isDepthTexture&&(Kr.type===FloatType?Fr=nt.DEPTH_COMPONENT32F:Kr.type===UnsignedIntType&&(Fr=nt.DEPTH_COMPONENT24));const qr=Hr(tr);Vr(tr)?ht.renderbufferStorageMultisampleEXT(nt.RENDERBUFFER,qr,Fr,tr.width,tr.height):nt.renderbufferStorageMultisample(nt.RENDERBUFFER,qr,Fr,tr.width,tr.height)}else nt.renderbufferStorage(nt.RENDERBUFFER,Fr,tr.width,tr.height);nt.framebufferRenderbuffer(nt.FRAMEBUFFER,nt.DEPTH_ATTACHMENT,nt.RENDERBUFFER,er)}else if(tr.depthBuffer&&tr.stencilBuffer){const Fr=Hr(tr);vr&&Vr(tr)===!1?nt.renderbufferStorageMultisample(nt.RENDERBUFFER,Fr,nt.DEPTH24_STENCIL8,tr.width,tr.height):Vr(tr)?ht.renderbufferStorageMultisampleEXT(nt.RENDERBUFFER,Fr,nt.DEPTH24_STENCIL8,tr.width,tr.height):nt.renderbufferStorage(nt.RENDERBUFFER,nt.DEPTH_STENCIL,tr.width,tr.height),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,nt.DEPTH_STENCIL_ATTACHMENT,nt.RENDERBUFFER,er)}else{const Fr=tr.isWebGLMultipleRenderTargets===!0?tr.texture:[tr.texture];for(let Kr=0;Kr<Fr.length;Kr++){const qr=Fr[Kr],pn=ct.convert(qr.format,qr.colorSpace),En=ct.convert(qr.type),Rn=Tt(qr.internalFormat,pn,En,qr.colorSpace),Qn=Hr(tr);vr&&Vr(tr)===!1?nt.renderbufferStorageMultisample(nt.RENDERBUFFER,Qn,Rn,tr.width,tr.height):Vr(tr)?ht.renderbufferStorageMultisampleEXT(nt.RENDERBUFFER,Qn,Rn,tr.width,tr.height):nt.renderbufferStorage(nt.RENDERBUFFER,Rn,tr.width,tr.height)}}nt.bindRenderbuffer(nt.RENDERBUFFER,null)}function xr(er,tr){if(tr&&tr.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(it.bindFramebuffer(nt.FRAMEBUFFER,er),!(tr.depthTexture&&tr.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!st.get(tr.depthTexture).__webglTexture||tr.depthTexture.image.width!==tr.width||tr.depthTexture.image.height!==tr.height)&&(tr.depthTexture.image.width=tr.width,tr.depthTexture.image.height=tr.height,tr.depthTexture.needsUpdate=!0),Ut(tr.depthTexture,0);const Fr=st.get(tr.depthTexture).__webglTexture,Kr=Hr(tr);if(tr.depthTexture.format===DepthFormat)Vr(tr)?ht.framebufferTexture2DMultisampleEXT(nt.FRAMEBUFFER,nt.DEPTH_ATTACHMENT,nt.TEXTURE_2D,Fr,0,Kr):nt.framebufferTexture2D(nt.FRAMEBUFFER,nt.DEPTH_ATTACHMENT,nt.TEXTURE_2D,Fr,0);else if(tr.depthTexture.format===DepthStencilFormat)Vr(tr)?ht.framebufferTexture2DMultisampleEXT(nt.FRAMEBUFFER,nt.DEPTH_STENCIL_ATTACHMENT,nt.TEXTURE_2D,Fr,0,Kr):nt.framebufferTexture2D(nt.FRAMEBUFFER,nt.DEPTH_STENCIL_ATTACHMENT,nt.TEXTURE_2D,Fr,0);else throw new Error("Unknown depthTexture format")}function gr(er){const tr=st.get(er),vr=er.isWebGLCubeRenderTarget===!0;if(er.depthTexture&&!tr.__autoAllocateDepthBuffer){if(vr)throw new Error("target.depthTexture not supported in Cube render targets");xr(tr.__webglFramebuffer,er)}else if(vr){tr.__webglDepthbuffer=[];for(let Fr=0;Fr<6;Fr++)it.bindFramebuffer(nt.FRAMEBUFFER,tr.__webglFramebuffer[Fr]),tr.__webglDepthbuffer[Fr]=nt.createRenderbuffer(),Sr(tr.__webglDepthbuffer[Fr],er,!1)}else it.bindFramebuffer(nt.FRAMEBUFFER,tr.__webglFramebuffer),tr.__webglDepthbuffer=nt.createRenderbuffer(),Sr(tr.__webglDepthbuffer,er,!1);it.bindFramebuffer(nt.FRAMEBUFFER,null)}function _r(er,tr,vr){const Fr=st.get(er);tr!==void 0&&Cr(Fr.__webglFramebuffer,er,er.texture,nt.COLOR_ATTACHMENT0,nt.TEXTURE_2D,0),vr!==void 0&&gr(er)}function fr(er){const tr=er.texture,vr=st.get(er),Fr=st.get(tr);er.addEventListener("dispose",jt),er.isWebGLMultipleRenderTargets!==!0&&(Fr.__webglTexture===void 0&&(Fr.__webglTexture=nt.createTexture()),Fr.__version=tr.version,ut.memory.textures++);const Kr=er.isWebGLCubeRenderTarget===!0,qr=er.isWebGLMultipleRenderTargets===!0,pn=St(er)||dt;if(Kr){vr.__webglFramebuffer=[];for(let En=0;En<6;En++)if(dt&&tr.mipmaps&&tr.mipmaps.length>0){vr.__webglFramebuffer[En]=[];for(let Rn=0;Rn<tr.mipmaps.length;Rn++)vr.__webglFramebuffer[En][Rn]=nt.createFramebuffer()}else vr.__webglFramebuffer[En]=nt.createFramebuffer()}else{if(dt&&tr.mipmaps&&tr.mipmaps.length>0){vr.__webglFramebuffer=[];for(let En=0;En<tr.mipmaps.length;En++)vr.__webglFramebuffer[En]=nt.createFramebuffer()}else vr.__webglFramebuffer=nt.createFramebuffer();if(qr)if(lt.drawBuffers){const En=er.texture;for(let Rn=0,Qn=En.length;Rn<Qn;Rn++){const Ln=st.get(En[Rn]);Ln.__webglTexture===void 0&&(Ln.__webglTexture=nt.createTexture(),ut.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(dt&&er.samples>0&&Vr(er)===!1){const En=qr?tr:[tr];vr.__webglMultisampledFramebuffer=nt.createFramebuffer(),vr.__webglColorRenderbuffer=[],it.bindFramebuffer(nt.FRAMEBUFFER,vr.__webglMultisampledFramebuffer);for(let Rn=0;Rn<En.length;Rn++){const Qn=En[Rn];vr.__webglColorRenderbuffer[Rn]=nt.createRenderbuffer(),nt.bindRenderbuffer(nt.RENDERBUFFER,vr.__webglColorRenderbuffer[Rn]);const Ln=ct.convert(Qn.format,Qn.colorSpace),ln=ct.convert(Qn.type),Xn=Tt(Qn.internalFormat,Ln,ln,Qn.colorSpace,er.isXRRenderTarget===!0),Yr=Hr(er);nt.renderbufferStorageMultisample(nt.RENDERBUFFER,Yr,Xn,er.width,er.height),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0+Rn,nt.RENDERBUFFER,vr.__webglColorRenderbuffer[Rn])}nt.bindRenderbuffer(nt.RENDERBUFFER,null),er.depthBuffer&&(vr.__webglDepthRenderbuffer=nt.createRenderbuffer(),Sr(vr.__webglDepthRenderbuffer,er,!0)),it.bindFramebuffer(nt.FRAMEBUFFER,null)}}if(Kr){it.bindTexture(nt.TEXTURE_CUBE_MAP,Fr.__webglTexture),hr(nt.TEXTURE_CUBE_MAP,tr,pn);for(let En=0;En<6;En++)if(dt&&tr.mipmaps&&tr.mipmaps.length>0)for(let Rn=0;Rn<tr.mipmaps.length;Rn++)Cr(vr.__webglFramebuffer[En][Rn],er,tr,nt.COLOR_ATTACHMENT0,nt.TEXTURE_CUBE_MAP_POSITIVE_X+En,Rn);else Cr(vr.__webglFramebuffer[En],er,tr,nt.COLOR_ATTACHMENT0,nt.TEXTURE_CUBE_MAP_POSITIVE_X+En,0);Et(tr,pn)&&Rt(nt.TEXTURE_CUBE_MAP),it.unbindTexture()}else if(qr){const En=er.texture;for(let Rn=0,Qn=En.length;Rn<Qn;Rn++){const Ln=En[Rn],ln=st.get(Ln);it.bindTexture(nt.TEXTURE_2D,ln.__webglTexture),hr(nt.TEXTURE_2D,Ln,pn),Cr(vr.__webglFramebuffer,er,Ln,nt.COLOR_ATTACHMENT0+Rn,nt.TEXTURE_2D,0),Et(Ln,pn)&&Rt(nt.TEXTURE_2D)}it.unbindTexture()}else{let En=nt.TEXTURE_2D;if((er.isWebGL3DRenderTarget||er.isWebGLArrayRenderTarget)&&(dt?En=er.isWebGL3DRenderTarget?nt.TEXTURE_3D:nt.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),it.bindTexture(En,Fr.__webglTexture),hr(En,tr,pn),dt&&tr.mipmaps&&tr.mipmaps.length>0)for(let Rn=0;Rn<tr.mipmaps.length;Rn++)Cr(vr.__webglFramebuffer[Rn],er,tr,nt.COLOR_ATTACHMENT0,En,Rn);else Cr(vr.__webglFramebuffer,er,tr,nt.COLOR_ATTACHMENT0,En,0);Et(tr,pn)&&Rt(En),it.unbindTexture()}er.depthBuffer&&gr(er)}function Nr(er){const tr=St(er)||dt,vr=er.isWebGLMultipleRenderTargets===!0?er.texture:[er.texture];for(let Fr=0,Kr=vr.length;Fr<Kr;Fr++){const qr=vr[Fr];if(Et(qr,tr)){const pn=er.isWebGLCubeRenderTarget?nt.TEXTURE_CUBE_MAP:nt.TEXTURE_2D,En=st.get(qr).__webglTexture;it.bindTexture(pn,En),Rt(pn),it.unbindTexture()}}}function Tr(er){if(dt&&er.samples>0&&Vr(er)===!1){const tr=er.isWebGLMultipleRenderTargets?er.texture:[er.texture],vr=er.width,Fr=er.height;let Kr=nt.COLOR_BUFFER_BIT;const qr=[],pn=er.stencilBuffer?nt.DEPTH_STENCIL_ATTACHMENT:nt.DEPTH_ATTACHMENT,En=st.get(er),Rn=er.isWebGLMultipleRenderTargets===!0;if(Rn)for(let Qn=0;Qn<tr.length;Qn++)it.bindFramebuffer(nt.FRAMEBUFFER,En.__webglMultisampledFramebuffer),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0+Qn,nt.RENDERBUFFER,null),it.bindFramebuffer(nt.FRAMEBUFFER,En.__webglFramebuffer),nt.framebufferTexture2D(nt.DRAW_FRAMEBUFFER,nt.COLOR_ATTACHMENT0+Qn,nt.TEXTURE_2D,null,0);it.bindFramebuffer(nt.READ_FRAMEBUFFER,En.__webglMultisampledFramebuffer),it.bindFramebuffer(nt.DRAW_FRAMEBUFFER,En.__webglFramebuffer);for(let Qn=0;Qn<tr.length;Qn++){qr.push(nt.COLOR_ATTACHMENT0+Qn),er.depthBuffer&&qr.push(pn);const Ln=En.__ignoreDepthValues!==void 0?En.__ignoreDepthValues:!1;if(Ln===!1&&(er.depthBuffer&&(Kr|=nt.DEPTH_BUFFER_BIT),er.stencilBuffer&&(Kr|=nt.STENCIL_BUFFER_BIT)),Rn&&nt.framebufferRenderbuffer(nt.READ_FRAMEBUFFER,nt.COLOR_ATTACHMENT0,nt.RENDERBUFFER,En.__webglColorRenderbuffer[Qn]),Ln===!0&&(nt.invalidateFramebuffer(nt.READ_FRAMEBUFFER,[pn]),nt.invalidateFramebuffer(nt.DRAW_FRAMEBUFFER,[pn])),Rn){const ln=st.get(tr[Qn]).__webglTexture;nt.framebufferTexture2D(nt.DRAW_FRAMEBUFFER,nt.COLOR_ATTACHMENT0,nt.TEXTURE_2D,ln,0)}nt.blitFramebuffer(0,0,vr,Fr,0,0,vr,Fr,Kr,nt.NEAREST),ft&&nt.invalidateFramebuffer(nt.READ_FRAMEBUFFER,qr)}if(it.bindFramebuffer(nt.READ_FRAMEBUFFER,null),it.bindFramebuffer(nt.DRAW_FRAMEBUFFER,null),Rn)for(let Qn=0;Qn<tr.length;Qn++){it.bindFramebuffer(nt.FRAMEBUFFER,En.__webglMultisampledFramebuffer),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0+Qn,nt.RENDERBUFFER,En.__webglColorRenderbuffer[Qn]);const Ln=st.get(tr[Qn]).__webglTexture;it.bindFramebuffer(nt.FRAMEBUFFER,En.__webglFramebuffer),nt.framebufferTexture2D(nt.DRAW_FRAMEBUFFER,nt.COLOR_ATTACHMENT0+Qn,nt.TEXTURE_2D,Ln,0)}it.bindFramebuffer(nt.DRAW_FRAMEBUFFER,En.__webglMultisampledFramebuffer)}}function Hr(er){return Math.min(lt.maxSamples,er.samples)}function Vr(er){const tr=st.get(er);return dt&&er.samples>0&&rt.has("WEBGL_multisampled_render_to_texture")===!0&&tr.__useRenderToTexture!==!1}function mn(er){const tr=ut.render.frame;pt.get(er)!==tr&&(pt.set(er,tr),er.update())}function tn(er,tr){const vr=er.colorSpace,Fr=er.format,Kr=er.type;return er.isCompressedTexture===!0||er.isVideoTexture===!0||er.format===_SRGBAFormat||vr!==LinearSRGBColorSpace&&vr!==NoColorSpace&&(ColorManagement.getTransfer(vr)===SRGBTransfer?dt===!1?rt.has("EXT_sRGB")===!0&&Fr===RGBAFormat?(er.format=_SRGBAFormat,er.minFilter=LinearFilter,er.generateMipmaps=!1):tr=ImageUtils.sRGBToLinear(tr):(Fr!==RGBAFormat||Kr!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",vr)),tr}this.allocateTextureUnit=$t,this.resetTextureUnits=Nt,this.setTexture2D=Ut,this.setTexture2DArray=zt,this.setTexture3D=Bt,this.setTextureCube=Ht,this.rebindTextures=_r,this.setupRenderTarget=fr,this.updateRenderTargetMipmap=Nr,this.updateMultisampleRenderTarget=Tr,this.setupDepthRenderbuffer=gr,this.setupFrameBufferTexture=Cr,this.useMultisampledRTT=Vr}function WebGLUtils(nt,rt,it){const st=it.isWebGL2;function lt(ct,ut=NoColorSpace){let dt;const ht=ColorManagement.getTransfer(ut);if(ct===UnsignedByteType)return nt.UNSIGNED_BYTE;if(ct===UnsignedShort4444Type)return nt.UNSIGNED_SHORT_4_4_4_4;if(ct===UnsignedShort5551Type)return nt.UNSIGNED_SHORT_5_5_5_1;if(ct===ByteType)return nt.BYTE;if(ct===ShortType)return nt.SHORT;if(ct===UnsignedShortType)return nt.UNSIGNED_SHORT;if(ct===IntType)return nt.INT;if(ct===UnsignedIntType)return nt.UNSIGNED_INT;if(ct===FloatType)return nt.FLOAT;if(ct===HalfFloatType)return st?nt.HALF_FLOAT:(dt=rt.get("OES_texture_half_float"),dt!==null?dt.HALF_FLOAT_OES:null);if(ct===AlphaFormat)return nt.ALPHA;if(ct===RGBAFormat)return nt.RGBA;if(ct===LuminanceFormat)return nt.LUMINANCE;if(ct===LuminanceAlphaFormat)return nt.LUMINANCE_ALPHA;if(ct===DepthFormat)return nt.DEPTH_COMPONENT;if(ct===DepthStencilFormat)return nt.DEPTH_STENCIL;if(ct===_SRGBAFormat)return dt=rt.get("EXT_sRGB"),dt!==null?dt.SRGB_ALPHA_EXT:null;if(ct===RedFormat)return nt.RED;if(ct===RedIntegerFormat)return nt.RED_INTEGER;if(ct===RGFormat)return nt.RG;if(ct===RGIntegerFormat)return nt.RG_INTEGER;if(ct===RGBAIntegerFormat)return nt.RGBA_INTEGER;if(ct===RGB_S3TC_DXT1_Format||ct===RGBA_S3TC_DXT1_Format||ct===RGBA_S3TC_DXT3_Format||ct===RGBA_S3TC_DXT5_Format)if(ht===SRGBTransfer)if(dt=rt.get("WEBGL_compressed_texture_s3tc_srgb"),dt!==null){if(ct===RGB_S3TC_DXT1_Format)return dt.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(ct===RGBA_S3TC_DXT1_Format)return dt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(ct===RGBA_S3TC_DXT3_Format)return dt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(ct===RGBA_S3TC_DXT5_Format)return dt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(dt=rt.get("WEBGL_compressed_texture_s3tc"),dt!==null){if(ct===RGB_S3TC_DXT1_Format)return dt.COMPRESSED_RGB_S3TC_DXT1_EXT;if(ct===RGBA_S3TC_DXT1_Format)return dt.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(ct===RGBA_S3TC_DXT3_Format)return dt.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(ct===RGBA_S3TC_DXT5_Format)return dt.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(ct===RGB_PVRTC_4BPPV1_Format||ct===RGB_PVRTC_2BPPV1_Format||ct===RGBA_PVRTC_4BPPV1_Format||ct===RGBA_PVRTC_2BPPV1_Format)if(dt=rt.get("WEBGL_compressed_texture_pvrtc"),dt!==null){if(ct===RGB_PVRTC_4BPPV1_Format)return dt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(ct===RGB_PVRTC_2BPPV1_Format)return dt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(ct===RGBA_PVRTC_4BPPV1_Format)return dt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(ct===RGBA_PVRTC_2BPPV1_Format)return dt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(ct===RGB_ETC1_Format)return dt=rt.get("WEBGL_compressed_texture_etc1"),dt!==null?dt.COMPRESSED_RGB_ETC1_WEBGL:null;if(ct===RGB_ETC2_Format||ct===RGBA_ETC2_EAC_Format)if(dt=rt.get("WEBGL_compressed_texture_etc"),dt!==null){if(ct===RGB_ETC2_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ETC2:dt.COMPRESSED_RGB8_ETC2;if(ct===RGBA_ETC2_EAC_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:dt.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(ct===RGBA_ASTC_4x4_Format||ct===RGBA_ASTC_5x4_Format||ct===RGBA_ASTC_5x5_Format||ct===RGBA_ASTC_6x5_Format||ct===RGBA_ASTC_6x6_Format||ct===RGBA_ASTC_8x5_Format||ct===RGBA_ASTC_8x6_Format||ct===RGBA_ASTC_8x8_Format||ct===RGBA_ASTC_10x5_Format||ct===RGBA_ASTC_10x6_Format||ct===RGBA_ASTC_10x8_Format||ct===RGBA_ASTC_10x10_Format||ct===RGBA_ASTC_12x10_Format||ct===RGBA_ASTC_12x12_Format)if(dt=rt.get("WEBGL_compressed_texture_astc"),dt!==null){if(ct===RGBA_ASTC_4x4_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:dt.COMPRESSED_RGBA_ASTC_4x4_KHR;if(ct===RGBA_ASTC_5x4_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:dt.COMPRESSED_RGBA_ASTC_5x4_KHR;if(ct===RGBA_ASTC_5x5_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:dt.COMPRESSED_RGBA_ASTC_5x5_KHR;if(ct===RGBA_ASTC_6x5_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:dt.COMPRESSED_RGBA_ASTC_6x5_KHR;if(ct===RGBA_ASTC_6x6_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:dt.COMPRESSED_RGBA_ASTC_6x6_KHR;if(ct===RGBA_ASTC_8x5_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:dt.COMPRESSED_RGBA_ASTC_8x5_KHR;if(ct===RGBA_ASTC_8x6_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:dt.COMPRESSED_RGBA_ASTC_8x6_KHR;if(ct===RGBA_ASTC_8x8_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:dt.COMPRESSED_RGBA_ASTC_8x8_KHR;if(ct===RGBA_ASTC_10x5_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:dt.COMPRESSED_RGBA_ASTC_10x5_KHR;if(ct===RGBA_ASTC_10x6_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:dt.COMPRESSED_RGBA_ASTC_10x6_KHR;if(ct===RGBA_ASTC_10x8_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:dt.COMPRESSED_RGBA_ASTC_10x8_KHR;if(ct===RGBA_ASTC_10x10_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:dt.COMPRESSED_RGBA_ASTC_10x10_KHR;if(ct===RGBA_ASTC_12x10_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:dt.COMPRESSED_RGBA_ASTC_12x10_KHR;if(ct===RGBA_ASTC_12x12_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:dt.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(ct===RGBA_BPTC_Format||ct===RGB_BPTC_SIGNED_Format||ct===RGB_BPTC_UNSIGNED_Format)if(dt=rt.get("EXT_texture_compression_bptc"),dt!==null){if(ct===RGBA_BPTC_Format)return ht===SRGBTransfer?dt.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:dt.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(ct===RGB_BPTC_SIGNED_Format)return dt.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(ct===RGB_BPTC_UNSIGNED_Format)return dt.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(ct===RED_RGTC1_Format||ct===SIGNED_RED_RGTC1_Format||ct===RED_GREEN_RGTC2_Format||ct===SIGNED_RED_GREEN_RGTC2_Format)if(dt=rt.get("EXT_texture_compression_rgtc"),dt!==null){if(ct===RGBA_BPTC_Format)return dt.COMPRESSED_RED_RGTC1_EXT;if(ct===SIGNED_RED_RGTC1_Format)return dt.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(ct===RED_GREEN_RGTC2_Format)return dt.COMPRESSED_RED_GREEN_RGTC2_EXT;if(ct===SIGNED_RED_GREEN_RGTC2_Format)return dt.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return ct===UnsignedInt248Type?st?nt.UNSIGNED_INT_24_8:(dt=rt.get("WEBGL_depth_texture"),dt!==null?dt.UNSIGNED_INT_24_8_WEBGL:null):nt[ct]!==void 0?nt[ct]:null}return{convert:lt}}class ArrayCamera extends PerspectiveCamera{constructor(rt=[]){super(),this.isArrayCamera=!0,this.cameras=rt}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(rt){return this._targetRay!==null&&this._targetRay.dispatchEvent(rt),this._grip!==null&&this._grip.dispatchEvent(rt),this._hand!==null&&this._hand.dispatchEvent(rt),this}connect(rt){if(rt&&rt.hand){const it=this._hand;if(it)for(const st of rt.hand.values())this._getHandJoint(it,st)}return this.dispatchEvent({type:"connected",data:rt}),this}disconnect(rt){return this.dispatchEvent({type:"disconnected",data:rt}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(rt,it,st){let lt=null,ct=null,ut=null;const dt=this._targetRay,ht=this._grip,ft=this._hand;if(rt&&it.session.visibilityState!=="visible-blurred"){if(ft&&rt.hand){ut=!0;for(const vt of rt.hand.values()){const St=it.getJointPose(vt,st),wt=this._getHandJoint(ft,vt);St!==null&&(wt.matrix.fromArray(St.transform.matrix),wt.matrix.decompose(wt.position,wt.rotation,wt.scale),wt.matrixWorldNeedsUpdate=!0,wt.jointRadius=St.radius),wt.visible=St!==null}const pt=ft.joints["index-finger-tip"],mt=ft.joints["thumb-tip"],gt=pt.position.distanceTo(mt.position),xt=.02,yt=.005;ft.inputState.pinching&&gt>xt+yt?(ft.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:rt.handedness,target:this})):!ft.inputState.pinching&&gt<=xt-yt&&(ft.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:rt.handedness,target:this}))}else ht!==null&&rt.gripSpace&&(ct=it.getPose(rt.gripSpace,st),ct!==null&&(ht.matrix.fromArray(ct.transform.matrix),ht.matrix.decompose(ht.position,ht.rotation,ht.scale),ht.matrixWorldNeedsUpdate=!0,ct.linearVelocity?(ht.hasLinearVelocity=!0,ht.linearVelocity.copy(ct.linearVelocity)):ht.hasLinearVelocity=!1,ct.angularVelocity?(ht.hasAngularVelocity=!0,ht.angularVelocity.copy(ct.angularVelocity)):ht.hasAngularVelocity=!1));dt!==null&&(lt=it.getPose(rt.targetRaySpace,st),lt===null&&ct!==null&&(lt=ct),lt!==null&&(dt.matrix.fromArray(lt.transform.matrix),dt.matrix.decompose(dt.position,dt.rotation,dt.scale),dt.matrixWorldNeedsUpdate=!0,lt.linearVelocity?(dt.hasLinearVelocity=!0,dt.linearVelocity.copy(lt.linearVelocity)):dt.hasLinearVelocity=!1,lt.angularVelocity?(dt.hasAngularVelocity=!0,dt.angularVelocity.copy(lt.angularVelocity)):dt.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return dt!==null&&(dt.visible=lt!==null),ht!==null&&(ht.visible=ct!==null),ft!==null&&(ft.visible=ut!==null),this}_getHandJoint(rt,it){if(rt.joints[it.jointName]===void 0){const st=new Group;st.matrixAutoUpdate=!1,st.visible=!1,rt.joints[it.jointName]=st,rt.add(st)}return rt.joints[it.jointName]}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(rt,it,st){if(this.texture===null){const lt=new Texture,ct=rt.properties.get(lt);ct.__webglTexture=it.texture,(it.depthNear!=st.depthNear||it.depthFar!=st.depthFar)&&(this.depthNear=it.depthNear,this.depthFar=it.depthFar),this.texture=lt}}render(rt,it){if(this.texture!==null){if(this.mesh===null){const st=it.cameras[0].viewport,lt=new ShaderMaterial({extensions:{fragDepth:!0},vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:st.z},depthHeight:{value:st.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),lt)}rt.render(this.mesh,it)}}reset(){this.texture=null,this.mesh=null}}class WebXRManager extends EventDispatcher{constructor(rt,it){super();const st=this;let lt=null,ct=1,ut=null,dt="local-floor",ht=1,ft=null,pt=null,mt=null,gt=null,xt=null,yt=null;const vt=new WebXRDepthSensing,St=it.getContextAttributes();let wt=null,Et=null;const Rt=[],Tt=[],It=new Vector2;let At=null;const Dt=new PerspectiveCamera;Dt.layers.enable(1),Dt.viewport=new Vector4;const jt=new PerspectiveCamera;jt.layers.enable(2),jt.viewport=new Vector4;const Ft=[Dt,jt],Lt=new ArrayCamera;Lt.layers.enable(1),Lt.layers.enable(2);let Mt=null,Ot=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(nr){let ir=Rt[nr];return ir===void 0&&(ir=new WebXRController,Rt[nr]=ir),ir.getTargetRaySpace()},this.getControllerGrip=function(nr){let ir=Rt[nr];return ir===void 0&&(ir=new WebXRController,Rt[nr]=ir),ir.getGripSpace()},this.getHand=function(nr){let ir=Rt[nr];return ir===void 0&&(ir=new WebXRController,Rt[nr]=ir),ir.getHandSpace()};function Nt(nr){const ir=Tt.indexOf(nr.inputSource);if(ir===-1)return;const yr=Rt[ir];yr!==void 0&&(yr.update(nr.inputSource,nr.frame,ft||ut),yr.dispatchEvent({type:nr.type,data:nr.inputSource}))}function $t(){lt.removeEventListener("select",Nt),lt.removeEventListener("selectstart",Nt),lt.removeEventListener("selectend",Nt),lt.removeEventListener("squeeze",Nt),lt.removeEventListener("squeezestart",Nt),lt.removeEventListener("squeezeend",Nt),lt.removeEventListener("end",$t),lt.removeEventListener("inputsourceschange",Vt);for(let nr=0;nr<Rt.length;nr++){const ir=Tt[nr];ir!==null&&(Tt[nr]=null,Rt[nr].disconnect(ir))}Mt=null,Ot=null,vt.reset(),rt.setRenderTarget(wt),xt=null,gt=null,mt=null,lt=null,Et=null,hr.stop(),st.isPresenting=!1,rt.setPixelRatio(At),rt.setSize(It.width,It.height,!1),st.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(nr){ct=nr,st.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(nr){dt=nr,st.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return ft||ut},this.setReferenceSpace=function(nr){ft=nr},this.getBaseLayer=function(){return gt!==null?gt:xt},this.getBinding=function(){return mt},this.getFrame=function(){return yt},this.getSession=function(){return lt},this.setSession=async function(nr){if(lt=nr,lt!==null){if(wt=rt.getRenderTarget(),lt.addEventListener("select",Nt),lt.addEventListener("selectstart",Nt),lt.addEventListener("selectend",Nt),lt.addEventListener("squeeze",Nt),lt.addEventListener("squeezestart",Nt),lt.addEventListener("squeezeend",Nt),lt.addEventListener("end",$t),lt.addEventListener("inputsourceschange",Vt),St.xrCompatible!==!0&&await it.makeXRCompatible(),At=rt.getPixelRatio(),rt.getSize(It),lt.renderState.layers===void 0||rt.capabilities.isWebGL2===!1){const ir={antialias:lt.renderState.layers===void 0?St.antialias:!0,alpha:!0,depth:St.depth,stencil:St.stencil,framebufferScaleFactor:ct};xt=new XRWebGLLayer(lt,it,ir),lt.updateRenderState({baseLayer:xt}),rt.setPixelRatio(1),rt.setSize(xt.framebufferWidth,xt.framebufferHeight,!1),Et=new WebGLRenderTarget(xt.framebufferWidth,xt.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:rt.outputColorSpace,stencilBuffer:St.stencil})}else{let ir=null,yr=null,Cr=null;St.depth&&(Cr=St.stencil?it.DEPTH24_STENCIL8:it.DEPTH_COMPONENT24,ir=St.stencil?DepthStencilFormat:DepthFormat,yr=St.stencil?UnsignedInt248Type:UnsignedIntType);const Sr={colorFormat:it.RGBA8,depthFormat:Cr,scaleFactor:ct};mt=new XRWebGLBinding(lt,it),gt=mt.createProjectionLayer(Sr),lt.updateRenderState({layers:[gt]}),rt.setPixelRatio(1),rt.setSize(gt.textureWidth,gt.textureHeight,!1),Et=new WebGLRenderTarget(gt.textureWidth,gt.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(gt.textureWidth,gt.textureHeight,yr,void 0,void 0,void 0,void 0,void 0,void 0,ir),stencilBuffer:St.stencil,colorSpace:rt.outputColorSpace,samples:St.antialias?4:0});const xr=rt.properties.get(Et);xr.__ignoreDepthValues=gt.ignoreDepthValues}Et.isXRRenderTarget=!0,this.setFoveation(ht),ft=null,ut=await lt.requestReferenceSpace(dt),hr.setContext(lt),hr.start(),st.isPresenting=!0,st.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(lt!==null)return lt.environmentBlendMode};function Vt(nr){for(let ir=0;ir<nr.removed.length;ir++){const yr=nr.removed[ir],Cr=Tt.indexOf(yr);Cr>=0&&(Tt[Cr]=null,Rt[Cr].disconnect(yr))}for(let ir=0;ir<nr.added.length;ir++){const yr=nr.added[ir];let Cr=Tt.indexOf(yr);if(Cr===-1){for(let xr=0;xr<Rt.length;xr++)if(xr>=Tt.length){Tt.push(yr),Cr=xr;break}else if(Tt[xr]===null){Tt[xr]=yr,Cr=xr;break}if(Cr===-1)break}const Sr=Rt[Cr];Sr&&Sr.connect(yr)}}const Ut=new Vector3,zt=new Vector3;function Bt(nr,ir,yr){Ut.setFromMatrixPosition(ir.matrixWorld),zt.setFromMatrixPosition(yr.matrixWorld);const Cr=Ut.distanceTo(zt),Sr=ir.projectionMatrix.elements,xr=yr.projectionMatrix.elements,gr=Sr[14]/(Sr[10]-1),_r=Sr[14]/(Sr[10]+1),fr=(Sr[9]+1)/Sr[5],Nr=(Sr[9]-1)/Sr[5],Tr=(Sr[8]-1)/Sr[0],Hr=(xr[8]+1)/xr[0],Vr=gr*Tr,mn=gr*Hr,tn=Cr/(-Tr+Hr),er=tn*-Tr;ir.matrixWorld.decompose(nr.position,nr.quaternion,nr.scale),nr.translateX(er),nr.translateZ(tn),nr.matrixWorld.compose(nr.position,nr.quaternion,nr.scale),nr.matrixWorldInverse.copy(nr.matrixWorld).invert();const tr=gr+tn,vr=_r+tn,Fr=Vr-er,Kr=mn+(Cr-er),qr=fr*_r/vr*tr,pn=Nr*_r/vr*tr;nr.projectionMatrix.makePerspective(Fr,Kr,qr,pn,tr,vr),nr.projectionMatrixInverse.copy(nr.projectionMatrix).invert()}function Ht(nr,ir){ir===null?nr.matrixWorld.copy(nr.matrix):nr.matrixWorld.multiplyMatrices(ir.matrixWorld,nr.matrix),nr.matrixWorldInverse.copy(nr.matrixWorld).invert()}this.updateCamera=function(nr){if(lt===null)return;vt.texture!==null&&(nr.near=vt.depthNear,nr.far=vt.depthFar),Lt.near=jt.near=Dt.near=nr.near,Lt.far=jt.far=Dt.far=nr.far,(Mt!==Lt.near||Ot!==Lt.far)&&(lt.updateRenderState({depthNear:Lt.near,depthFar:Lt.far}),Mt=Lt.near,Ot=Lt.far,Dt.near=Mt,Dt.far=Ot,jt.near=Mt,jt.far=Ot,Dt.updateProjectionMatrix(),jt.updateProjectionMatrix(),nr.updateProjectionMatrix());const ir=nr.parent,yr=Lt.cameras;Ht(Lt,ir);for(let Cr=0;Cr<yr.length;Cr++)Ht(yr[Cr],ir);yr.length===2?Bt(Lt,Dt,jt):Lt.projectionMatrix.copy(Dt.projectionMatrix),Gt(nr,Lt,ir)};function Gt(nr,ir,yr){yr===null?nr.matrix.copy(ir.matrixWorld):(nr.matrix.copy(yr.matrixWorld),nr.matrix.invert(),nr.matrix.multiply(ir.matrixWorld)),nr.matrix.decompose(nr.position,nr.quaternion,nr.scale),nr.updateMatrixWorld(!0),nr.projectionMatrix.copy(ir.projectionMatrix),nr.projectionMatrixInverse.copy(ir.projectionMatrixInverse),nr.isPerspectiveCamera&&(nr.fov=RAD2DEG*2*Math.atan(1/nr.projectionMatrix.elements[5]),nr.zoom=1)}this.getCamera=function(){return Lt},this.getFoveation=function(){if(!(gt===null&&xt===null))return ht},this.setFoveation=function(nr){ht=nr,gt!==null&&(gt.fixedFoveation=nr),xt!==null&&xt.fixedFoveation!==void 0&&(xt.fixedFoveation=nr)},this.hasDepthSensing=function(){return vt.texture!==null};let Xt=null;function Zt(nr,ir){if(pt=ir.getViewerPose(ft||ut),yt=ir,pt!==null){const yr=pt.views;xt!==null&&(rt.setRenderTargetFramebuffer(Et,xt.framebuffer),rt.setRenderTarget(Et));let Cr=!1;yr.length!==Lt.cameras.length&&(Lt.cameras.length=0,Cr=!0);for(let xr=0;xr<yr.length;xr++){const gr=yr[xr];let _r=null;if(xt!==null)_r=xt.getViewport(gr);else{const Nr=mt.getViewSubImage(gt,gr);_r=Nr.viewport,xr===0&&(rt.setRenderTargetTextures(Et,Nr.colorTexture,gt.ignoreDepthValues?void 0:Nr.depthStencilTexture),rt.setRenderTarget(Et))}let fr=Ft[xr];fr===void 0&&(fr=new PerspectiveCamera,fr.layers.enable(xr),fr.viewport=new Vector4,Ft[xr]=fr),fr.matrix.fromArray(gr.transform.matrix),fr.matrix.decompose(fr.position,fr.quaternion,fr.scale),fr.projectionMatrix.fromArray(gr.projectionMatrix),fr.projectionMatrixInverse.copy(fr.projectionMatrix).invert(),fr.viewport.set(_r.x,_r.y,_r.width,_r.height),xr===0&&(Lt.matrix.copy(fr.matrix),Lt.matrix.decompose(Lt.position,Lt.quaternion,Lt.scale)),Cr===!0&&Lt.cameras.push(fr)}const Sr=lt.enabledFeatures;if(Sr&&Sr.includes("depth-sensing")){const xr=mt.getDepthInformation(yr[0]);xr&&xr.isValid&&xr.texture&&vt.init(rt,xr,lt.renderState)}}for(let yr=0;yr<Rt.length;yr++){const Cr=Tt[yr],Sr=Rt[yr];Cr!==null&&Sr!==void 0&&Sr.update(Cr,ir,ft||ut)}vt.render(rt,Lt),Xt&&Xt(nr,ir),ir.detectedPlanes&&st.dispatchEvent({type:"planesdetected",data:ir}),yt=null}const hr=new WebGLAnimation;hr.setAnimationLoop(Zt),this.setAnimationLoop=function(nr){Xt=nr},this.dispose=function(){}}}function WebGLMaterials(nt,rt){function it(St,wt){St.matrixAutoUpdate===!0&&St.updateMatrix(),wt.value.copy(St.matrix)}function st(St,wt){wt.color.getRGB(St.fogColor.value,getUnlitUniformColorSpace(nt)),wt.isFog?(St.fogNear.value=wt.near,St.fogFar.value=wt.far):wt.isFogExp2&&(St.fogDensity.value=wt.density)}function lt(St,wt,Et,Rt,Tt){wt.isMeshBasicMaterial||wt.isMeshLambertMaterial?ct(St,wt):wt.isMeshToonMaterial?(ct(St,wt),mt(St,wt)):wt.isMeshPhongMaterial?(ct(St,wt),pt(St,wt)):wt.isMeshStandardMaterial?(ct(St,wt),gt(St,wt),wt.isMeshPhysicalMaterial&&xt(St,wt,Tt)):wt.isMeshMatcapMaterial?(ct(St,wt),yt(St,wt)):wt.isMeshDepthMaterial?ct(St,wt):wt.isMeshDistanceMaterial?(ct(St,wt),vt(St,wt)):wt.isMeshNormalMaterial?ct(St,wt):wt.isLineBasicMaterial?(ut(St,wt),wt.isLineDashedMaterial&&dt(St,wt)):wt.isPointsMaterial?ht(St,wt,Et,Rt):wt.isSpriteMaterial?ft(St,wt):wt.isShadowMaterial?(St.color.value.copy(wt.color),St.opacity.value=wt.opacity):wt.isShaderMaterial&&(wt.uniformsNeedUpdate=!1)}function ct(St,wt){St.opacity.value=wt.opacity,wt.color&&St.diffuse.value.copy(wt.color),wt.emissive&&St.emissive.value.copy(wt.emissive).multiplyScalar(wt.emissiveIntensity),wt.map&&(St.map.value=wt.map,it(wt.map,St.mapTransform)),wt.alphaMap&&(St.alphaMap.value=wt.alphaMap,it(wt.alphaMap,St.alphaMapTransform)),wt.bumpMap&&(St.bumpMap.value=wt.bumpMap,it(wt.bumpMap,St.bumpMapTransform),St.bumpScale.value=wt.bumpScale,wt.side===BackSide&&(St.bumpScale.value*=-1)),wt.normalMap&&(St.normalMap.value=wt.normalMap,it(wt.normalMap,St.normalMapTransform),St.normalScale.value.copy(wt.normalScale),wt.side===BackSide&&St.normalScale.value.negate()),wt.displacementMap&&(St.displacementMap.value=wt.displacementMap,it(wt.displacementMap,St.displacementMapTransform),St.displacementScale.value=wt.displacementScale,St.displacementBias.value=wt.displacementBias),wt.emissiveMap&&(St.emissiveMap.value=wt.emissiveMap,it(wt.emissiveMap,St.emissiveMapTransform)),wt.specularMap&&(St.specularMap.value=wt.specularMap,it(wt.specularMap,St.specularMapTransform)),wt.alphaTest>0&&(St.alphaTest.value=wt.alphaTest);const Et=rt.get(wt).envMap;if(Et&&(St.envMap.value=Et,St.flipEnvMap.value=Et.isCubeTexture&&Et.isRenderTargetTexture===!1?-1:1,St.reflectivity.value=wt.reflectivity,St.ior.value=wt.ior,St.refractionRatio.value=wt.refractionRatio),wt.lightMap){St.lightMap.value=wt.lightMap;const Rt=nt._useLegacyLights===!0?Math.PI:1;St.lightMapIntensity.value=wt.lightMapIntensity*Rt,it(wt.lightMap,St.lightMapTransform)}wt.aoMap&&(St.aoMap.value=wt.aoMap,St.aoMapIntensity.value=wt.aoMapIntensity,it(wt.aoMap,St.aoMapTransform))}function ut(St,wt){St.diffuse.value.copy(wt.color),St.opacity.value=wt.opacity,wt.map&&(St.map.value=wt.map,it(wt.map,St.mapTransform))}function dt(St,wt){St.dashSize.value=wt.dashSize,St.totalSize.value=wt.dashSize+wt.gapSize,St.scale.value=wt.scale}function ht(St,wt,Et,Rt){St.diffuse.value.copy(wt.color),St.opacity.value=wt.opacity,St.size.value=wt.size*Et,St.scale.value=Rt*.5,wt.map&&(St.map.value=wt.map,it(wt.map,St.uvTransform)),wt.alphaMap&&(St.alphaMap.value=wt.alphaMap,it(wt.alphaMap,St.alphaMapTransform)),wt.alphaTest>0&&(St.alphaTest.value=wt.alphaTest)}function ft(St,wt){St.diffuse.value.copy(wt.color),St.opacity.value=wt.opacity,St.rotation.value=wt.rotation,wt.map&&(St.map.value=wt.map,it(wt.map,St.mapTransform)),wt.alphaMap&&(St.alphaMap.value=wt.alphaMap,it(wt.alphaMap,St.alphaMapTransform)),wt.alphaTest>0&&(St.alphaTest.value=wt.alphaTest)}function pt(St,wt){St.specular.value.copy(wt.specular),St.shininess.value=Math.max(wt.shininess,1e-4)}function mt(St,wt){wt.gradientMap&&(St.gradientMap.value=wt.gradientMap)}function gt(St,wt){St.metalness.value=wt.metalness,wt.metalnessMap&&(St.metalnessMap.value=wt.metalnessMap,it(wt.metalnessMap,St.metalnessMapTransform)),St.roughness.value=wt.roughness,wt.roughnessMap&&(St.roughnessMap.value=wt.roughnessMap,it(wt.roughnessMap,St.roughnessMapTransform)),rt.get(wt).envMap&&(St.envMapIntensity.value=wt.envMapIntensity)}function xt(St,wt,Et){St.ior.value=wt.ior,wt.sheen>0&&(St.sheenColor.value.copy(wt.sheenColor).multiplyScalar(wt.sheen),St.sheenRoughness.value=wt.sheenRoughness,wt.sheenColorMap&&(St.sheenColorMap.value=wt.sheenColorMap,it(wt.sheenColorMap,St.sheenColorMapTransform)),wt.sheenRoughnessMap&&(St.sheenRoughnessMap.value=wt.sheenRoughnessMap,it(wt.sheenRoughnessMap,St.sheenRoughnessMapTransform))),wt.clearcoat>0&&(St.clearcoat.value=wt.clearcoat,St.clearcoatRoughness.value=wt.clearcoatRoughness,wt.clearcoatMap&&(St.clearcoatMap.value=wt.clearcoatMap,it(wt.clearcoatMap,St.clearcoatMapTransform)),wt.clearcoatRoughnessMap&&(St.clearcoatRoughnessMap.value=wt.clearcoatRoughnessMap,it(wt.clearcoatRoughnessMap,St.clearcoatRoughnessMapTransform)),wt.clearcoatNormalMap&&(St.clearcoatNormalMap.value=wt.clearcoatNormalMap,it(wt.clearcoatNormalMap,St.clearcoatNormalMapTransform),St.clearcoatNormalScale.value.copy(wt.clearcoatNormalScale),wt.side===BackSide&&St.clearcoatNormalScale.value.negate())),wt.iridescence>0&&(St.iridescence.value=wt.iridescence,St.iridescenceIOR.value=wt.iridescenceIOR,St.iridescenceThicknessMinimum.value=wt.iridescenceThicknessRange[0],St.iridescenceThicknessMaximum.value=wt.iridescenceThicknessRange[1],wt.iridescenceMap&&(St.iridescenceMap.value=wt.iridescenceMap,it(wt.iridescenceMap,St.iridescenceMapTransform)),wt.iridescenceThicknessMap&&(St.iridescenceThicknessMap.value=wt.iridescenceThicknessMap,it(wt.iridescenceThicknessMap,St.iridescenceThicknessMapTransform))),wt.transmission>0&&(St.transmission.value=wt.transmission,St.transmissionSamplerMap.value=Et.texture,St.transmissionSamplerSize.value.set(Et.width,Et.height),wt.transmissionMap&&(St.transmissionMap.value=wt.transmissionMap,it(wt.transmissionMap,St.transmissionMapTransform)),St.thickness.value=wt.thickness,wt.thicknessMap&&(St.thicknessMap.value=wt.thicknessMap,it(wt.thicknessMap,St.thicknessMapTransform)),St.attenuationDistance.value=wt.attenuationDistance,St.attenuationColor.value.copy(wt.attenuationColor)),wt.anisotropy>0&&(St.anisotropyVector.value.set(wt.anisotropy*Math.cos(wt.anisotropyRotation),wt.anisotropy*Math.sin(wt.anisotropyRotation)),wt.anisotropyMap&&(St.anisotropyMap.value=wt.anisotropyMap,it(wt.anisotropyMap,St.anisotropyMapTransform))),St.specularIntensity.value=wt.specularIntensity,St.specularColor.value.copy(wt.specularColor),wt.specularColorMap&&(St.specularColorMap.value=wt.specularColorMap,it(wt.specularColorMap,St.specularColorMapTransform)),wt.specularIntensityMap&&(St.specularIntensityMap.value=wt.specularIntensityMap,it(wt.specularIntensityMap,St.specularIntensityMapTransform))}function yt(St,wt){wt.matcap&&(St.matcap.value=wt.matcap)}function vt(St,wt){const Et=rt.get(wt).light;St.referencePosition.value.setFromMatrixPosition(Et.matrixWorld),St.nearDistance.value=Et.shadow.camera.near,St.farDistance.value=Et.shadow.camera.far}return{refreshFogUniforms:st,refreshMaterialUniforms:lt}}function WebGLUniformsGroups(nt,rt,it,st){let lt={},ct={},ut=[];const dt=it.isWebGL2?nt.getParameter(nt.MAX_UNIFORM_BUFFER_BINDINGS):0;function ht(Et,Rt){const Tt=Rt.program;st.uniformBlockBinding(Et,Tt)}function ft(Et,Rt){let Tt=lt[Et.id];Tt===void 0&&(yt(Et),Tt=pt(Et),lt[Et.id]=Tt,Et.addEventListener("dispose",St));const It=Rt.program;st.updateUBOMapping(Et,It);const At=rt.render.frame;ct[Et.id]!==At&&(gt(Et),ct[Et.id]=At)}function pt(Et){const Rt=mt();Et.__bindingPointIndex=Rt;const Tt=nt.createBuffer(),It=Et.__size,At=Et.usage;return nt.bindBuffer(nt.UNIFORM_BUFFER,Tt),nt.bufferData(nt.UNIFORM_BUFFER,It,At),nt.bindBuffer(nt.UNIFORM_BUFFER,null),nt.bindBufferBase(nt.UNIFORM_BUFFER,Rt,Tt),Tt}function mt(){for(let Et=0;Et<dt;Et++)if(ut.indexOf(Et)===-1)return ut.push(Et),Et;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function gt(Et){const Rt=lt[Et.id],Tt=Et.uniforms,It=Et.__cache;nt.bindBuffer(nt.UNIFORM_BUFFER,Rt);for(let At=0,Dt=Tt.length;At<Dt;At++){const jt=Array.isArray(Tt[At])?Tt[At]:[Tt[At]];for(let Ft=0,Lt=jt.length;Ft<Lt;Ft++){const Mt=jt[Ft];if(xt(Mt,At,Ft,It)===!0){const Ot=Mt.__offset,Nt=Array.isArray(Mt.value)?Mt.value:[Mt.value];let $t=0;for(let Vt=0;Vt<Nt.length;Vt++){const Ut=Nt[Vt],zt=vt(Ut);typeof Ut=="number"||typeof Ut=="boolean"?(Mt.__data[0]=Ut,nt.bufferSubData(nt.UNIFORM_BUFFER,Ot+$t,Mt.__data)):Ut.isMatrix3?(Mt.__data[0]=Ut.elements[0],Mt.__data[1]=Ut.elements[1],Mt.__data[2]=Ut.elements[2],Mt.__data[3]=0,Mt.__data[4]=Ut.elements[3],Mt.__data[5]=Ut.elements[4],Mt.__data[6]=Ut.elements[5],Mt.__data[7]=0,Mt.__data[8]=Ut.elements[6],Mt.__data[9]=Ut.elements[7],Mt.__data[10]=Ut.elements[8],Mt.__data[11]=0):(Ut.toArray(Mt.__data,$t),$t+=zt.storage/Float32Array.BYTES_PER_ELEMENT)}nt.bufferSubData(nt.UNIFORM_BUFFER,Ot,Mt.__data)}}}nt.bindBuffer(nt.UNIFORM_BUFFER,null)}function xt(Et,Rt,Tt,It){const At=Et.value,Dt=Rt+"_"+Tt;if(It[Dt]===void 0)return typeof At=="number"||typeof At=="boolean"?It[Dt]=At:It[Dt]=At.clone(),!0;{const jt=It[Dt];if(typeof At=="number"||typeof At=="boolean"){if(jt!==At)return It[Dt]=At,!0}else if(jt.equals(At)===!1)return jt.copy(At),!0}return!1}function yt(Et){const Rt=Et.uniforms;let Tt=0;const It=16;for(let Dt=0,jt=Rt.length;Dt<jt;Dt++){const Ft=Array.isArray(Rt[Dt])?Rt[Dt]:[Rt[Dt]];for(let Lt=0,Mt=Ft.length;Lt<Mt;Lt++){const Ot=Ft[Lt],Nt=Array.isArray(Ot.value)?Ot.value:[Ot.value];for(let $t=0,Vt=Nt.length;$t<Vt;$t++){const Ut=Nt[$t],zt=vt(Ut),Bt=Tt%It;Bt!==0&&It-Bt<zt.boundary&&(Tt+=It-Bt),Ot.__data=new Float32Array(zt.storage/Float32Array.BYTES_PER_ELEMENT),Ot.__offset=Tt,Tt+=zt.storage}}}const At=Tt%It;return At>0&&(Tt+=It-At),Et.__size=Tt,Et.__cache={},this}function vt(Et){const Rt={boundary:0,storage:0};return typeof Et=="number"||typeof Et=="boolean"?(Rt.boundary=4,Rt.storage=4):Et.isVector2?(Rt.boundary=8,Rt.storage=8):Et.isVector3||Et.isColor?(Rt.boundary=16,Rt.storage=12):Et.isVector4?(Rt.boundary=16,Rt.storage=16):Et.isMatrix3?(Rt.boundary=48,Rt.storage=48):Et.isMatrix4?(Rt.boundary=64,Rt.storage=64):Et.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Et),Rt}function St(Et){const Rt=Et.target;Rt.removeEventListener("dispose",St);const Tt=ut.indexOf(Rt.__bindingPointIndex);ut.splice(Tt,1),nt.deleteBuffer(lt[Rt.id]),delete lt[Rt.id],delete ct[Rt.id]}function wt(){for(const Et in lt)nt.deleteBuffer(lt[Et]);ut=[],lt={},ct={}}return{bind:ht,update:ft,dispose:wt}}class WebGLRenderer{constructor(rt={}){const{canvas:it=createCanvasElement(),context:st=null,depth:lt=!0,stencil:ct=!0,alpha:ut=!1,antialias:dt=!1,premultipliedAlpha:ht=!0,preserveDrawingBuffer:ft=!1,powerPreference:pt="default",failIfMajorPerformanceCaveat:mt=!1}=rt;this.isWebGLRenderer=!0;let gt;st!==null?gt=st.getContextAttributes().alpha:gt=ut;const xt=new Uint32Array(4),yt=new Int32Array(4);let vt=null,St=null;const wt=[],Et=[];this.domElement=it,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=SRGBColorSpace,this._useLegacyLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const Rt=this;let Tt=!1,It=0,At=0,Dt=null,jt=-1,Ft=null;const Lt=new Vector4,Mt=new Vector4;let Ot=null;const Nt=new Color(0);let $t=0,Vt=it.width,Ut=it.height,zt=1,Bt=null,Ht=null;const Gt=new Vector4(0,0,Vt,Ut),Xt=new Vector4(0,0,Vt,Ut);let Zt=!1;const hr=new Frustum;let nr=!1,ir=!1,yr=null;const Cr=new Matrix4,Sr=new Vector2,xr=new Vector3,gr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function _r(){return Dt===null?zt:1}let fr=st;function Nr(Lr,wn){for(let On=0;On<Lr.length;On++){const In=Lr[On],Br=it.getContext(In,wn);if(Br!==null)return Br}return null}try{const Lr={alpha:!0,depth:lt,stencil:ct,antialias:dt,premultipliedAlpha:ht,preserveDrawingBuffer:ft,powerPreference:pt,failIfMajorPerformanceCaveat:mt};if("setAttribute"in it&&it.setAttribute("data-engine",`three.js r${REVISION}`),it.addEventListener("webglcontextlost",kn,!1),it.addEventListener("webglcontextrestored",Mr,!1),it.addEventListener("webglcontextcreationerror",vn,!1),fr===null){const wn=["webgl2","webgl","experimental-webgl"];if(Rt.isWebGL1Renderer===!0&&wn.shift(),fr=Nr(wn,Lr),fr===null)throw Nr(wn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&fr instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),fr.getShaderPrecisionFormat===void 0&&(fr.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Lr){throw console.error("THREE.WebGLRenderer: "+Lr.message),Lr}let Tr,Hr,Vr,mn,tn,er,tr,vr,Fr,Kr,qr,pn,En,Rn,Qn,Ln,ln,Xn,Yr,Qr,Mn,Ar,or,Wr;function Ir(){Tr=new WebGLExtensions(fr),Hr=new WebGLCapabilities(fr,Tr,rt),Tr.init(Hr),Ar=new WebGLUtils(fr,Tr,Hr),Vr=new WebGLState(fr,Tr,Hr),mn=new WebGLInfo(fr),tn=new WebGLProperties,er=new WebGLTextures(fr,Tr,Vr,tn,Hr,Ar,mn),tr=new WebGLCubeMaps(Rt),vr=new WebGLCubeUVMaps(Rt),Fr=new WebGLAttributes(fr,Hr),or=new WebGLBindingStates(fr,Tr,Fr,Hr),Kr=new WebGLGeometries(fr,Fr,mn,or),qr=new WebGLObjects(fr,Kr,Fr,mn),Yr=new WebGLMorphtargets(fr,Hr,er),Ln=new WebGLClipping(tn),pn=new WebGLPrograms(Rt,tr,vr,Tr,Hr,or,Ln),En=new WebGLMaterials(Rt,tn),Rn=new WebGLRenderLists,Qn=new WebGLRenderStates(Tr,Hr),Xn=new WebGLBackground(Rt,tr,vr,Vr,qr,gt,ht),ln=new WebGLShadowMap(Rt,qr,Hr),Wr=new WebGLUniformsGroups(fr,mn,Hr,Vr),Qr=new WebGLBufferRenderer(fr,Tr,mn,Hr),Mn=new WebGLIndexedBufferRenderer(fr,Tr,mn,Hr),mn.programs=pn.programs,Rt.capabilities=Hr,Rt.extensions=Tr,Rt.properties=tn,Rt.renderLists=Rn,Rt.shadowMap=ln,Rt.state=Vr,Rt.info=mn}Ir();const dn=new WebXRManager(Rt,fr);this.xr=dn,this.getContext=function(){return fr},this.getContextAttributes=function(){return fr.getContextAttributes()},this.forceContextLoss=function(){const Lr=Tr.get("WEBGL_lose_context");Lr&&Lr.loseContext()},this.forceContextRestore=function(){const Lr=Tr.get("WEBGL_lose_context");Lr&&Lr.restoreContext()},this.getPixelRatio=function(){return zt},this.setPixelRatio=function(Lr){Lr!==void 0&&(zt=Lr,this.setSize(Vt,Ut,!1))},this.getSize=function(Lr){return Lr.set(Vt,Ut)},this.setSize=function(Lr,wn,On=!0){if(dn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Vt=Lr,Ut=wn,it.width=Math.floor(Lr*zt),it.height=Math.floor(wn*zt),On===!0&&(it.style.width=Lr+"px",it.style.height=wn+"px"),this.setViewport(0,0,Lr,wn)},this.getDrawingBufferSize=function(Lr){return Lr.set(Vt*zt,Ut*zt).floor()},this.setDrawingBufferSize=function(Lr,wn,On){Vt=Lr,Ut=wn,zt=On,it.width=Math.floor(Lr*On),it.height=Math.floor(wn*On),this.setViewport(0,0,Lr,wn)},this.getCurrentViewport=function(Lr){return Lr.copy(Lt)},this.getViewport=function(Lr){return Lr.copy(Gt)},this.setViewport=function(Lr,wn,On,In){Lr.isVector4?Gt.set(Lr.x,Lr.y,Lr.z,Lr.w):Gt.set(Lr,wn,On,In),Vr.viewport(Lt.copy(Gt).multiplyScalar(zt).floor())},this.getScissor=function(Lr){return Lr.copy(Xt)},this.setScissor=function(Lr,wn,On,In){Lr.isVector4?Xt.set(Lr.x,Lr.y,Lr.z,Lr.w):Xt.set(Lr,wn,On,In),Vr.scissor(Mt.copy(Xt).multiplyScalar(zt).floor())},this.getScissorTest=function(){return Zt},this.setScissorTest=function(Lr){Vr.setScissorTest(Zt=Lr)},this.setOpaqueSort=function(Lr){Bt=Lr},this.setTransparentSort=function(Lr){Ht=Lr},this.getClearColor=function(Lr){return Lr.copy(Xn.getClearColor())},this.setClearColor=function(){Xn.setClearColor.apply(Xn,arguments)},this.getClearAlpha=function(){return Xn.getClearAlpha()},this.setClearAlpha=function(){Xn.setClearAlpha.apply(Xn,arguments)},this.clear=function(Lr=!0,wn=!0,On=!0){let In=0;if(Lr){let Br=!1;if(Dt!==null){const gs=Dt.texture.format;Br=gs===RGBAIntegerFormat||gs===RGIntegerFormat||gs===RedIntegerFormat}if(Br){const gs=Dt.texture.type,os=gs===UnsignedByteType||gs===UnsignedIntType||gs===UnsignedShortType||gs===UnsignedInt248Type||gs===UnsignedShort4444Type||gs===UnsignedShort5551Type,ys=Xn.getClearColor(),Os=Xn.getClearAlpha(),Zs=ys.r,Ys=ys.g,un=ys.b;os?(xt[0]=Zs,xt[1]=Ys,xt[2]=un,xt[3]=Os,fr.clearBufferuiv(fr.COLOR,0,xt)):(yt[0]=Zs,yt[1]=Ys,yt[2]=un,yt[3]=Os,fr.clearBufferiv(fr.COLOR,0,yt))}else In|=fr.COLOR_BUFFER_BIT}wn&&(In|=fr.DEPTH_BUFFER_BIT),On&&(In|=fr.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),fr.clear(In)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){it.removeEventListener("webglcontextlost",kn,!1),it.removeEventListener("webglcontextrestored",Mr,!1),it.removeEventListener("webglcontextcreationerror",vn,!1),Rn.dispose(),Qn.dispose(),tn.dispose(),tr.dispose(),vr.dispose(),qr.dispose(),or.dispose(),Wr.dispose(),pn.dispose(),dn.dispose(),dn.removeEventListener("sessionstart",es),dn.removeEventListener("sessionend",Zn),yr&&(yr.dispose(),yr=null),Dn.stop()};function kn(Lr){Lr.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Tt=!0}function Mr(){console.log("THREE.WebGLRenderer: Context Restored."),Tt=!1;const Lr=mn.autoReset,wn=ln.enabled,On=ln.autoUpdate,In=ln.needsUpdate,Br=ln.type;Ir(),mn.autoReset=Lr,ln.enabled=wn,ln.autoUpdate=On,ln.needsUpdate=In,ln.type=Br}function vn(Lr){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Lr.statusMessage)}function kr(Lr){const wn=Lr.target;wn.removeEventListener("dispose",kr),Er(wn)}function Er(Lr){Ur(Lr),tn.remove(Lr)}function Ur(Lr){const wn=tn.get(Lr).programs;wn!==void 0&&(wn.forEach(function(On){pn.releaseProgram(On)}),Lr.isShaderMaterial&&pn.releaseShaderCache(Lr))}this.renderBufferDirect=function(Lr,wn,On,In,Br,gs){wn===null&&(wn=gr);const os=Br.isMesh&&Br.matrixWorld.determinant()<0,ys=Bo(Lr,wn,On,In,Br);Vr.setMaterial(In,os);let Os=On.index,Zs=1;if(In.wireframe===!0){if(Os=Kr.getWireframeAttribute(On),Os===void 0)return;Zs=2}const Ys=On.drawRange,un=On.attributes.position;let Vo=Ys.start*Zs,xn=(Ys.start+Ys.count)*Zs;gs!==null&&(Vo=Math.max(Vo,gs.start*Zs),xn=Math.min(xn,(gs.start+gs.count)*Zs)),Os!==null?(Vo=Math.max(Vo,0),xn=Math.min(xn,Os.count)):un!=null&&(Vo=Math.max(Vo,0),xn=Math.min(xn,un.count));const An=xn-Vo;if(An<0||An===1/0)return;or.setup(Br,In,ys,On,Os);let Hn,Un=Qr;if(Os!==null&&(Hn=Fr.get(Os),Un=Mn,Un.setIndex(Hn)),Br.isMesh)In.wireframe===!0?(Vr.setLineWidth(In.wireframeLinewidth*_r()),Un.setMode(fr.LINES)):Un.setMode(fr.TRIANGLES);else if(Br.isLine){let Gn=In.linewidth;Gn===void 0&&(Gn=1),Vr.setLineWidth(Gn*_r()),Br.isLineSegments?Un.setMode(fr.LINES):Br.isLineLoop?Un.setMode(fr.LINE_LOOP):Un.setMode(fr.LINE_STRIP)}else Br.isPoints?Un.setMode(fr.POINTS):Br.isSprite&&Un.setMode(fr.TRIANGLES);if(Br.isBatchedMesh)Un.renderMultiDraw(Br._multiDrawStarts,Br._multiDrawCounts,Br._multiDrawCount);else if(Br.isInstancedMesh)Un.renderInstances(Vo,An,Br.count);else if(On.isInstancedBufferGeometry){const Gn=On._maxInstanceCount!==void 0?On._maxInstanceCount:1/0,Hs=Math.min(On.instanceCount,Gn);Un.renderInstances(Vo,An,Hs)}else Un.render(Vo,An)};function on(Lr,wn,On){Lr.transparent===!0&&Lr.side===DoubleSide&&Lr.forceSinglePass===!1?(Lr.side=BackSide,Lr.needsUpdate=!0,Fo(Lr,wn,On),Lr.side=FrontSide,Lr.needsUpdate=!0,Fo(Lr,wn,On),Lr.side=DoubleSide):Fo(Lr,wn,On)}this.compile=function(Lr,wn,On=null){On===null&&(On=Lr),St=Qn.get(On),St.init(),Et.push(St),On.traverseVisible(function(Br){Br.isLight&&Br.layers.test(wn.layers)&&(St.pushLight(Br),Br.castShadow&&St.pushShadow(Br))}),Lr!==On&&Lr.traverseVisible(function(Br){Br.isLight&&Br.layers.test(wn.layers)&&(St.pushLight(Br),Br.castShadow&&St.pushShadow(Br))}),St.setupLights(Rt._useLegacyLights);const In=new Set;return Lr.traverse(function(Br){const gs=Br.material;if(gs)if(Array.isArray(gs))for(let os=0;os<gs.length;os++){const ys=gs[os];on(ys,On,Br),In.add(ys)}else on(gs,On,Br),In.add(gs)}),Et.pop(),St=null,In},this.compileAsync=function(Lr,wn,On=null){const In=this.compile(Lr,wn,On);return new Promise(Br=>{function gs(){if(In.forEach(function(os){tn.get(os).currentProgram.isReady()&&In.delete(os)}),In.size===0){Br(Lr);return}setTimeout(gs,10)}Tr.get("KHR_parallel_shader_compile")!==null?gs():setTimeout(gs,10)})};let fn=null;function Kn(Lr){fn&&fn(Lr)}function es(){Dn.stop()}function Zn(){Dn.start()}const Dn=new WebGLAnimation;Dn.setAnimationLoop(Kn),typeof self<"u"&&Dn.setContext(self),this.setAnimationLoop=function(Lr){fn=Lr,dn.setAnimationLoop(Lr),Lr===null?Dn.stop():Dn.start()},dn.addEventListener("sessionstart",es),dn.addEventListener("sessionend",Zn),this.render=function(Lr,wn){if(wn!==void 0&&wn.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Tt===!0)return;Lr.matrixWorldAutoUpdate===!0&&Lr.updateMatrixWorld(),wn.parent===null&&wn.matrixWorldAutoUpdate===!0&&wn.updateMatrixWorld(),dn.enabled===!0&&dn.isPresenting===!0&&(dn.cameraAutoUpdate===!0&&dn.updateCamera(wn),wn=dn.getCamera()),Lr.isScene===!0&&Lr.onBeforeRender(Rt,Lr,wn,Dt),St=Qn.get(Lr,Et.length),St.init(),Et.push(St),Cr.multiplyMatrices(wn.projectionMatrix,wn.matrixWorldInverse),hr.setFromProjectionMatrix(Cr),ir=this.localClippingEnabled,nr=Ln.init(this.clippingPlanes,ir),vt=Rn.get(Lr,wt.length),vt.init(),wt.push(vt),ss(Lr,wn,0,Rt.sortObjects),vt.finish(),Rt.sortObjects===!0&&vt.sort(Bt,Ht),this.info.render.frame++,nr===!0&&Ln.beginShadows();const On=St.state.shadowsArray;if(ln.render(On,Lr,wn),nr===!0&&Ln.endShadows(),this.info.autoReset===!0&&this.info.reset(),(dn.enabled===!1||dn.isPresenting===!1||dn.hasDepthSensing()===!1)&&Xn.render(vt,Lr),St.setupLights(Rt._useLegacyLights),wn.isArrayCamera){const In=wn.cameras;for(let Br=0,gs=In.length;Br<gs;Br++){const os=In[Br];$s(vt,Lr,os,os.viewport)}}else $s(vt,Lr,wn);Dt!==null&&(er.updateMultisampleRenderTarget(Dt),er.updateRenderTargetMipmap(Dt)),Lr.isScene===!0&&Lr.onAfterRender(Rt,Lr,wn),or.resetDefaultState(),jt=-1,Ft=null,Et.pop(),Et.length>0?St=Et[Et.length-1]:St=null,wt.pop(),wt.length>0?vt=wt[wt.length-1]:vt=null};function ss(Lr,wn,On,In){if(Lr.visible===!1)return;if(Lr.layers.test(wn.layers)){if(Lr.isGroup)On=Lr.renderOrder;else if(Lr.isLOD)Lr.autoUpdate===!0&&Lr.update(wn);else if(Lr.isLight)St.pushLight(Lr),Lr.castShadow&&St.pushShadow(Lr);else if(Lr.isSprite){if(!Lr.frustumCulled||hr.intersectsSprite(Lr)){In&&xr.setFromMatrixPosition(Lr.matrixWorld).applyMatrix4(Cr);const os=qr.update(Lr),ys=Lr.material;ys.visible&&vt.push(Lr,os,ys,On,xr.z,null)}}else if((Lr.isMesh||Lr.isLine||Lr.isPoints)&&(!Lr.frustumCulled||hr.intersectsObject(Lr))){const os=qr.update(Lr),ys=Lr.material;if(In&&(Lr.boundingSphere!==void 0?(Lr.boundingSphere===null&&Lr.computeBoundingSphere(),xr.copy(Lr.boundingSphere.center)):(os.boundingSphere===null&&os.computeBoundingSphere(),xr.copy(os.boundingSphere.center)),xr.applyMatrix4(Lr.matrixWorld).applyMatrix4(Cr)),Array.isArray(ys)){const Os=os.groups;for(let Zs=0,Ys=Os.length;Zs<Ys;Zs++){const un=Os[Zs],Vo=ys[un.materialIndex];Vo&&Vo.visible&&vt.push(Lr,os,Vo,On,xr.z,un)}}else ys.visible&&vt.push(Lr,os,ys,On,xr.z,null)}}const gs=Lr.children;for(let os=0,ys=gs.length;os<ys;os++)ss(gs[os],wn,On,In)}function $s(Lr,wn,On,In){const Br=Lr.opaque,gs=Lr.transmissive,os=Lr.transparent;St.setupLightsView(On),nr===!0&&Ln.setGlobalState(Rt.clippingPlanes,On),gs.length>0&&ws(Br,gs,wn,On),In&&Vr.viewport(Lt.copy(In)),Br.length>0&&As(Br,wn,On),gs.length>0&&As(gs,wn,On),os.length>0&&As(os,wn,On),Vr.buffers.depth.setTest(!0),Vr.buffers.depth.setMask(!0),Vr.buffers.color.setMask(!0),Vr.setPolygonOffset(!1)}function ws(Lr,wn,On,In){if((On.isScene===!0?On.overrideMaterial:null)!==null)return;const gs=Hr.isWebGL2;yr===null&&(yr=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:Tr.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:gs?4:0})),Rt.getDrawingBufferSize(Sr),gs?yr.setSize(Sr.x,Sr.y):yr.setSize(floorPowerOfTwo(Sr.x),floorPowerOfTwo(Sr.y));const os=Rt.getRenderTarget();Rt.setRenderTarget(yr),Rt.getClearColor(Nt),$t=Rt.getClearAlpha(),$t<1&&Rt.setClearColor(16777215,.5),Rt.clear();const ys=Rt.toneMapping;Rt.toneMapping=NoToneMapping,As(Lr,On,In),er.updateMultisampleRenderTarget(yr),er.updateRenderTargetMipmap(yr);let Os=!1;for(let Zs=0,Ys=wn.length;Zs<Ys;Zs++){const un=wn[Zs],Vo=un.object,xn=un.geometry,An=un.material,Hn=un.group;if(An.side===DoubleSide&&Vo.layers.test(In.layers)){const Un=An.side;An.side=BackSide,An.needsUpdate=!0,Vs(Vo,On,In,xn,An,Hn),An.side=Un,An.needsUpdate=!0,Os=!0}}Os===!0&&(er.updateMultisampleRenderTarget(yr),er.updateRenderTargetMipmap(yr)),Rt.setRenderTarget(os),Rt.setClearColor(Nt,$t),Rt.toneMapping=ys}function As(Lr,wn,On){const In=wn.isScene===!0?wn.overrideMaterial:null;for(let Br=0,gs=Lr.length;Br<gs;Br++){const os=Lr[Br],ys=os.object,Os=os.geometry,Zs=In===null?os.material:In,Ys=os.group;ys.layers.test(On.layers)&&Vs(ys,wn,On,Os,Zs,Ys)}}function Vs(Lr,wn,On,In,Br,gs){Lr.onBeforeRender(Rt,wn,On,In,Br,gs),Lr.modelViewMatrix.multiplyMatrices(On.matrixWorldInverse,Lr.matrixWorld),Lr.normalMatrix.getNormalMatrix(Lr.modelViewMatrix),Br.onBeforeRender(Rt,wn,On,In,Lr,gs),Br.transparent===!0&&Br.side===DoubleSide&&Br.forceSinglePass===!1?(Br.side=BackSide,Br.needsUpdate=!0,Rt.renderBufferDirect(On,wn,In,Br,Lr,gs),Br.side=FrontSide,Br.needsUpdate=!0,Rt.renderBufferDirect(On,wn,In,Br,Lr,gs),Br.side=DoubleSide):Rt.renderBufferDirect(On,wn,In,Br,Lr,gs),Lr.onAfterRender(Rt,wn,On,In,Br,gs)}function Fo(Lr,wn,On){wn.isScene!==!0&&(wn=gr);const In=tn.get(Lr),Br=St.state.lights,gs=St.state.shadowsArray,os=Br.state.version,ys=pn.getParameters(Lr,Br.state,gs,wn,On),Os=pn.getProgramCacheKey(ys);let Zs=In.programs;In.environment=Lr.isMeshStandardMaterial?wn.environment:null,In.fog=wn.fog,In.envMap=(Lr.isMeshStandardMaterial?vr:tr).get(Lr.envMap||In.environment),Zs===void 0&&(Lr.addEventListener("dispose",kr),Zs=new Map,In.programs=Zs);let Ys=Zs.get(Os);if(Ys!==void 0){if(In.currentProgram===Ys&&In.lightsStateVersion===os)return Ho(Lr,ys),Ys}else ys.uniforms=pn.getUniforms(Lr),Lr.onBuild(On,ys,Rt),Lr.onBeforeCompile(ys,Rt),Ys=pn.acquireProgram(ys,Os),Zs.set(Os,Ys),In.uniforms=ys.uniforms;const un=In.uniforms;return(!Lr.isShaderMaterial&&!Lr.isRawShaderMaterial||Lr.clipping===!0)&&(un.clippingPlanes=Ln.uniform),Ho(Lr,ys),In.needsLights=Nl(Lr),In.lightsStateVersion=os,In.needsLights&&(un.ambientLightColor.value=Br.state.ambient,un.lightProbe.value=Br.state.probe,un.directionalLights.value=Br.state.directional,un.directionalLightShadows.value=Br.state.directionalShadow,un.spotLights.value=Br.state.spot,un.spotLightShadows.value=Br.state.spotShadow,un.rectAreaLights.value=Br.state.rectArea,un.ltc_1.value=Br.state.rectAreaLTC1,un.ltc_2.value=Br.state.rectAreaLTC2,un.pointLights.value=Br.state.point,un.pointLightShadows.value=Br.state.pointShadow,un.hemisphereLights.value=Br.state.hemi,un.directionalShadowMap.value=Br.state.directionalShadowMap,un.directionalShadowMatrix.value=Br.state.directionalShadowMatrix,un.spotShadowMap.value=Br.state.spotShadowMap,un.spotLightMatrix.value=Br.state.spotLightMatrix,un.spotLightMap.value=Br.state.spotLightMap,un.pointShadowMap.value=Br.state.pointShadowMap,un.pointShadowMatrix.value=Br.state.pointShadowMatrix),In.currentProgram=Ys,In.uniformsList=null,Ys}function Lo(Lr){if(Lr.uniformsList===null){const wn=Lr.currentProgram.getUniforms();Lr.uniformsList=WebGLUniforms.seqWithValue(wn.seq,Lr.uniforms)}return Lr.uniformsList}function Ho(Lr,wn){const On=tn.get(Lr);On.outputColorSpace=wn.outputColorSpace,On.batching=wn.batching,On.instancing=wn.instancing,On.instancingColor=wn.instancingColor,On.skinning=wn.skinning,On.morphTargets=wn.morphTargets,On.morphNormals=wn.morphNormals,On.morphColors=wn.morphColors,On.morphTargetsCount=wn.morphTargetsCount,On.numClippingPlanes=wn.numClippingPlanes,On.numIntersection=wn.numClipIntersection,On.vertexAlphas=wn.vertexAlphas,On.vertexTangents=wn.vertexTangents,On.toneMapping=wn.toneMapping}function Bo(Lr,wn,On,In,Br){wn.isScene!==!0&&(wn=gr),er.resetTextureUnits();const gs=wn.fog,os=In.isMeshStandardMaterial?wn.environment:null,ys=Dt===null?Rt.outputColorSpace:Dt.isXRRenderTarget===!0?Dt.texture.colorSpace:LinearSRGBColorSpace,Os=(In.isMeshStandardMaterial?vr:tr).get(In.envMap||os),Zs=In.vertexColors===!0&&!!On.attributes.color&&On.attributes.color.itemSize===4,Ys=!!On.attributes.tangent&&(!!In.normalMap||In.anisotropy>0),un=!!On.morphAttributes.position,Vo=!!On.morphAttributes.normal,xn=!!On.morphAttributes.color;let An=NoToneMapping;In.toneMapped&&(Dt===null||Dt.isXRRenderTarget===!0)&&(An=Rt.toneMapping);const Hn=On.morphAttributes.position||On.morphAttributes.normal||On.morphAttributes.color,Un=Hn!==void 0?Hn.length:0,Gn=tn.get(In),Hs=St.state.lights;if(nr===!0&&(ir===!0||Lr!==Ft)){const To=Lr===Ft&&In.id===jt;Ln.setState(In,Lr,To)}let ps=!1;In.version===Gn.__version?(Gn.needsLights&&Gn.lightsStateVersion!==Hs.state.version||Gn.outputColorSpace!==ys||Br.isBatchedMesh&&Gn.batching===!1||!Br.isBatchedMesh&&Gn.batching===!0||Br.isInstancedMesh&&Gn.instancing===!1||!Br.isInstancedMesh&&Gn.instancing===!0||Br.isSkinnedMesh&&Gn.skinning===!1||!Br.isSkinnedMesh&&Gn.skinning===!0||Br.isInstancedMesh&&Gn.instancingColor===!0&&Br.instanceColor===null||Br.isInstancedMesh&&Gn.instancingColor===!1&&Br.instanceColor!==null||Gn.envMap!==Os||In.fog===!0&&Gn.fog!==gs||Gn.numClippingPlanes!==void 0&&(Gn.numClippingPlanes!==Ln.numPlanes||Gn.numIntersection!==Ln.numIntersection)||Gn.vertexAlphas!==Zs||Gn.vertexTangents!==Ys||Gn.morphTargets!==un||Gn.morphNormals!==Vo||Gn.morphColors!==xn||Gn.toneMapping!==An||Hr.isWebGL2===!0&&Gn.morphTargetsCount!==Un)&&(ps=!0):(ps=!0,Gn.__version=In.version);let Us=Gn.currentProgram;ps===!0&&(Us=Fo(In,wn,Br));let js=!1,yo=!1,Bs=!1;const Ws=Us.getUniforms(),io=Gn.uniforms;if(Vr.useProgram(Us.program)&&(js=!0,yo=!0,Bs=!0),In.id!==jt&&(jt=In.id,yo=!0),js||Ft!==Lr){Ws.setValue(fr,"projectionMatrix",Lr.projectionMatrix),Ws.setValue(fr,"viewMatrix",Lr.matrixWorldInverse);const To=Ws.map.cameraPosition;To!==void 0&&To.setValue(fr,xr.setFromMatrixPosition(Lr.matrixWorld)),Hr.logarithmicDepthBuffer&&Ws.setValue(fr,"logDepthBufFC",2/(Math.log(Lr.far+1)/Math.LN2)),(In.isMeshPhongMaterial||In.isMeshToonMaterial||In.isMeshLambertMaterial||In.isMeshBasicMaterial||In.isMeshStandardMaterial||In.isShaderMaterial)&&Ws.setValue(fr,"isOrthographic",Lr.isOrthographicCamera===!0),Ft!==Lr&&(Ft=Lr,yo=!0,Bs=!0)}if(Br.isSkinnedMesh){Ws.setOptional(fr,Br,"bindMatrix"),Ws.setOptional(fr,Br,"bindMatrixInverse");const To=Br.skeleton;To&&(Hr.floatVertexTextures?(To.boneTexture===null&&To.computeBoneTexture(),Ws.setValue(fr,"boneTexture",To.boneTexture,er)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}Br.isBatchedMesh&&(Ws.setOptional(fr,Br,"batchingTexture"),Ws.setValue(fr,"batchingTexture",Br._matricesTexture,er));const na=On.morphAttributes;if((na.position!==void 0||na.normal!==void 0||na.color!==void 0&&Hr.isWebGL2===!0)&&Yr.update(Br,On,Us),(yo||Gn.receiveShadow!==Br.receiveShadow)&&(Gn.receiveShadow=Br.receiveShadow,Ws.setValue(fr,"receiveShadow",Br.receiveShadow)),In.isMeshGouraudMaterial&&In.envMap!==null&&(io.envMap.value=Os,io.flipEnvMap.value=Os.isCubeTexture&&Os.isRenderTargetTexture===!1?-1:1),yo&&(Ws.setValue(fr,"toneMappingExposure",Rt.toneMappingExposure),Gn.needsLights&&Kl(io,Bs),gs&&In.fog===!0&&En.refreshFogUniforms(io,gs),En.refreshMaterialUniforms(io,In,zt,Ut,yr),WebGLUniforms.upload(fr,Lo(Gn),io,er)),In.isShaderMaterial&&In.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(fr,Lo(Gn),io,er),In.uniformsNeedUpdate=!1),In.isSpriteMaterial&&Ws.setValue(fr,"center",Br.center),Ws.setValue(fr,"modelViewMatrix",Br.modelViewMatrix),Ws.setValue(fr,"normalMatrix",Br.normalMatrix),Ws.setValue(fr,"modelMatrix",Br.matrixWorld),In.isShaderMaterial||In.isRawShaderMaterial){const To=In.uniformsGroups;for(let _l=0,Go=To.length;_l<Go;_l++)if(Hr.isWebGL2){const zl=To[_l];Wr.update(zl,Us),Wr.bind(zl,Us)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Us}function Kl(Lr,wn){Lr.ambientLightColor.needsUpdate=wn,Lr.lightProbe.needsUpdate=wn,Lr.directionalLights.needsUpdate=wn,Lr.directionalLightShadows.needsUpdate=wn,Lr.pointLights.needsUpdate=wn,Lr.pointLightShadows.needsUpdate=wn,Lr.spotLights.needsUpdate=wn,Lr.spotLightShadows.needsUpdate=wn,Lr.rectAreaLights.needsUpdate=wn,Lr.hemisphereLights.needsUpdate=wn}function Nl(Lr){return Lr.isMeshLambertMaterial||Lr.isMeshToonMaterial||Lr.isMeshPhongMaterial||Lr.isMeshStandardMaterial||Lr.isShadowMaterial||Lr.isShaderMaterial&&Lr.lights===!0}this.getActiveCubeFace=function(){return It},this.getActiveMipmapLevel=function(){return At},this.getRenderTarget=function(){return Dt},this.setRenderTargetTextures=function(Lr,wn,On){tn.get(Lr.texture).__webglTexture=wn,tn.get(Lr.depthTexture).__webglTexture=On;const In=tn.get(Lr);In.__hasExternalTextures=!0,In.__hasExternalTextures&&(In.__autoAllocateDepthBuffer=On===void 0,In.__autoAllocateDepthBuffer||Tr.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),In.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Lr,wn){const On=tn.get(Lr);On.__webglFramebuffer=wn,On.__useDefaultFramebuffer=wn===void 0},this.setRenderTarget=function(Lr,wn=0,On=0){Dt=Lr,It=wn,At=On;let In=!0,Br=null,gs=!1,os=!1;if(Lr){const Os=tn.get(Lr);Os.__useDefaultFramebuffer!==void 0?(Vr.bindFramebuffer(fr.FRAMEBUFFER,null),In=!1):Os.__webglFramebuffer===void 0?er.setupRenderTarget(Lr):Os.__hasExternalTextures&&er.rebindTextures(Lr,tn.get(Lr.texture).__webglTexture,tn.get(Lr.depthTexture).__webglTexture);const Zs=Lr.texture;(Zs.isData3DTexture||Zs.isDataArrayTexture||Zs.isCompressedArrayTexture)&&(os=!0);const Ys=tn.get(Lr).__webglFramebuffer;Lr.isWebGLCubeRenderTarget?(Array.isArray(Ys[wn])?Br=Ys[wn][On]:Br=Ys[wn],gs=!0):Hr.isWebGL2&&Lr.samples>0&&er.useMultisampledRTT(Lr)===!1?Br=tn.get(Lr).__webglMultisampledFramebuffer:Array.isArray(Ys)?Br=Ys[On]:Br=Ys,Lt.copy(Lr.viewport),Mt.copy(Lr.scissor),Ot=Lr.scissorTest}else Lt.copy(Gt).multiplyScalar(zt).floor(),Mt.copy(Xt).multiplyScalar(zt).floor(),Ot=Zt;if(Vr.bindFramebuffer(fr.FRAMEBUFFER,Br)&&Hr.drawBuffers&&In&&Vr.drawBuffers(Lr,Br),Vr.viewport(Lt),Vr.scissor(Mt),Vr.setScissorTest(Ot),gs){const Os=tn.get(Lr.texture);fr.framebufferTexture2D(fr.FRAMEBUFFER,fr.COLOR_ATTACHMENT0,fr.TEXTURE_CUBE_MAP_POSITIVE_X+wn,Os.__webglTexture,On)}else if(os){const Os=tn.get(Lr.texture),Zs=wn||0;fr.framebufferTextureLayer(fr.FRAMEBUFFER,fr.COLOR_ATTACHMENT0,Os.__webglTexture,On||0,Zs)}jt=-1},this.readRenderTargetPixels=function(Lr,wn,On,In,Br,gs,os){if(!(Lr&&Lr.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ys=tn.get(Lr).__webglFramebuffer;if(Lr.isWebGLCubeRenderTarget&&os!==void 0&&(ys=ys[os]),ys){Vr.bindFramebuffer(fr.FRAMEBUFFER,ys);try{const Os=Lr.texture,Zs=Os.format,Ys=Os.type;if(Zs!==RGBAFormat&&Ar.convert(Zs)!==fr.getParameter(fr.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const un=Ys===HalfFloatType&&(Tr.has("EXT_color_buffer_half_float")||Hr.isWebGL2&&Tr.has("EXT_color_buffer_float"));if(Ys!==UnsignedByteType&&Ar.convert(Ys)!==fr.getParameter(fr.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ys===FloatType&&(Hr.isWebGL2||Tr.has("OES_texture_float")||Tr.has("WEBGL_color_buffer_float")))&&!un){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}wn>=0&&wn<=Lr.width-In&&On>=0&&On<=Lr.height-Br&&fr.readPixels(wn,On,In,Br,Ar.convert(Zs),Ar.convert(Ys),gs)}finally{const Os=Dt!==null?tn.get(Dt).__webglFramebuffer:null;Vr.bindFramebuffer(fr.FRAMEBUFFER,Os)}}},this.copyFramebufferToTexture=function(Lr,wn,On=0){const In=Math.pow(2,-On),Br=Math.floor(wn.image.width*In),gs=Math.floor(wn.image.height*In);er.setTexture2D(wn,0),fr.copyTexSubImage2D(fr.TEXTURE_2D,On,0,0,Lr.x,Lr.y,Br,gs),Vr.unbindTexture()},this.copyTextureToTexture=function(Lr,wn,On,In=0){const Br=wn.image.width,gs=wn.image.height,os=Ar.convert(On.format),ys=Ar.convert(On.type);er.setTexture2D(On,0),fr.pixelStorei(fr.UNPACK_FLIP_Y_WEBGL,On.flipY),fr.pixelStorei(fr.UNPACK_PREMULTIPLY_ALPHA_WEBGL,On.premultiplyAlpha),fr.pixelStorei(fr.UNPACK_ALIGNMENT,On.unpackAlignment),wn.isDataTexture?fr.texSubImage2D(fr.TEXTURE_2D,In,Lr.x,Lr.y,Br,gs,os,ys,wn.image.data):wn.isCompressedTexture?fr.compressedTexSubImage2D(fr.TEXTURE_2D,In,Lr.x,Lr.y,wn.mipmaps[0].width,wn.mipmaps[0].height,os,wn.mipmaps[0].data):fr.texSubImage2D(fr.TEXTURE_2D,In,Lr.x,Lr.y,os,ys,wn.image),In===0&&On.generateMipmaps&&fr.generateMipmap(fr.TEXTURE_2D),Vr.unbindTexture()},this.copyTextureToTexture3D=function(Lr,wn,On,In,Br=0){if(Rt.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const gs=Lr.max.x-Lr.min.x+1,os=Lr.max.y-Lr.min.y+1,ys=Lr.max.z-Lr.min.z+1,Os=Ar.convert(In.format),Zs=Ar.convert(In.type);let Ys;if(In.isData3DTexture)er.setTexture3D(In,0),Ys=fr.TEXTURE_3D;else if(In.isDataArrayTexture||In.isCompressedArrayTexture)er.setTexture2DArray(In,0),Ys=fr.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}fr.pixelStorei(fr.UNPACK_FLIP_Y_WEBGL,In.flipY),fr.pixelStorei(fr.UNPACK_PREMULTIPLY_ALPHA_WEBGL,In.premultiplyAlpha),fr.pixelStorei(fr.UNPACK_ALIGNMENT,In.unpackAlignment);const un=fr.getParameter(fr.UNPACK_ROW_LENGTH),Vo=fr.getParameter(fr.UNPACK_IMAGE_HEIGHT),xn=fr.getParameter(fr.UNPACK_SKIP_PIXELS),An=fr.getParameter(fr.UNPACK_SKIP_ROWS),Hn=fr.getParameter(fr.UNPACK_SKIP_IMAGES),Un=On.isCompressedTexture?On.mipmaps[Br]:On.image;fr.pixelStorei(fr.UNPACK_ROW_LENGTH,Un.width),fr.pixelStorei(fr.UNPACK_IMAGE_HEIGHT,Un.height),fr.pixelStorei(fr.UNPACK_SKIP_PIXELS,Lr.min.x),fr.pixelStorei(fr.UNPACK_SKIP_ROWS,Lr.min.y),fr.pixelStorei(fr.UNPACK_SKIP_IMAGES,Lr.min.z),On.isDataTexture||On.isData3DTexture?fr.texSubImage3D(Ys,Br,wn.x,wn.y,wn.z,gs,os,ys,Os,Zs,Un.data):On.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),fr.compressedTexSubImage3D(Ys,Br,wn.x,wn.y,wn.z,gs,os,ys,Os,Un.data)):fr.texSubImage3D(Ys,Br,wn.x,wn.y,wn.z,gs,os,ys,Os,Zs,Un),fr.pixelStorei(fr.UNPACK_ROW_LENGTH,un),fr.pixelStorei(fr.UNPACK_IMAGE_HEIGHT,Vo),fr.pixelStorei(fr.UNPACK_SKIP_PIXELS,xn),fr.pixelStorei(fr.UNPACK_SKIP_ROWS,An),fr.pixelStorei(fr.UNPACK_SKIP_IMAGES,Hn),Br===0&&In.generateMipmaps&&fr.generateMipmap(Ys),Vr.unbindTexture()},this.initTexture=function(Lr){Lr.isCubeTexture?er.setTextureCube(Lr,0):Lr.isData3DTexture?er.setTexture3D(Lr,0):Lr.isDataArrayTexture||Lr.isCompressedArrayTexture?er.setTexture2DArray(Lr,0):er.setTexture2D(Lr,0),Vr.unbindTexture()},this.resetState=function(){It=0,At=0,Dt=null,Vr.reset(),or.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(rt){this._outputColorSpace=rt;const it=this.getContext();it.drawingBufferColorSpace=rt===DisplayP3ColorSpace?"display-p3":"srgb",it.unpackColorSpace=ColorManagement.workingColorSpace===LinearDisplayP3ColorSpace?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===SRGBColorSpace?sRGBEncoding:LinearEncoding}set outputEncoding(rt){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=rt===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(rt){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=rt}}class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class FogExp2{constructor(rt,it=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color(rt),this.density=it}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fog{constructor(rt,it=1,st=1e3){this.isFog=!0,this.name="",this.color=new Color(rt),this.near=it,this.far=st}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(rt,it){return super.copy(rt,it),rt.background!==null&&(this.background=rt.background.clone()),rt.environment!==null&&(this.environment=rt.environment.clone()),rt.fog!==null&&(this.fog=rt.fog.clone()),this.backgroundBlurriness=rt.backgroundBlurriness,this.backgroundIntensity=rt.backgroundIntensity,rt.overrideMaterial!==null&&(this.overrideMaterial=rt.overrideMaterial.clone()),this.matrixAutoUpdate=rt.matrixAutoUpdate,this}toJSON(rt){const it=super.toJSON(rt);return this.fog!==null&&(it.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(it.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(it.object.backgroundIntensity=this.backgroundIntensity),it}}class InterleavedBuffer{constructor(rt,it){this.isInterleavedBuffer=!0,this.array=rt,this.stride=it,this.count=rt!==void 0?rt.length/it:0,this.usage=StaticDrawUsage,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(rt){rt===!0&&this.version++}get updateRange(){return warnOnce("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(rt){return this.usage=rt,this}addUpdateRange(rt,it){this.updateRanges.push({start:rt,count:it})}clearUpdateRanges(){this.updateRanges.length=0}copy(rt){return this.array=new rt.array.constructor(rt.array),this.count=rt.count,this.stride=rt.stride,this.usage=rt.usage,this}copyAt(rt,it,st){rt*=this.stride,st*=it.stride;for(let lt=0,ct=this.stride;lt<ct;lt++)this.array[rt+lt]=it.array[st+lt];return this}set(rt,it=0){return this.array.set(rt,it),this}clone(rt){rt.arrayBuffers===void 0&&(rt.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),rt.arrayBuffers[this.array.buffer._uuid]===void 0&&(rt.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const it=new this.array.constructor(rt.arrayBuffers[this.array.buffer._uuid]),st=new this.constructor(it,this.stride);return st.setUsage(this.usage),st}onUpload(rt){return this.onUploadCallback=rt,this}toJSON(rt){return rt.arrayBuffers===void 0&&(rt.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),rt.arrayBuffers[this.array.buffer._uuid]===void 0&&(rt.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$6=new Vector3;class InterleavedBufferAttribute{constructor(rt,it,st,lt=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=rt,this.itemSize=it,this.offset=st,this.normalized=lt}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(rt){this.data.needsUpdate=rt}applyMatrix4(rt){for(let it=0,st=this.data.count;it<st;it++)_vector$6.fromBufferAttribute(this,it),_vector$6.applyMatrix4(rt),this.setXYZ(it,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix(rt){for(let it=0,st=this.count;it<st;it++)_vector$6.fromBufferAttribute(this,it),_vector$6.applyNormalMatrix(rt),this.setXYZ(it,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection(rt){for(let it=0,st=this.count;it<st;it++)_vector$6.fromBufferAttribute(this,it),_vector$6.transformDirection(rt),this.setXYZ(it,_vector$6.x,_vector$6.y,_vector$6.z);return this}getComponent(rt,it){let st=this.array[rt*this.data.stride+this.offset+it];return this.normalized&&(st=denormalize(st,this.array)),st}setComponent(rt,it,st){return this.normalized&&(st=normalize(st,this.array)),this.data.array[rt*this.data.stride+this.offset+it]=st,this}setX(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.data.array[rt*this.data.stride+this.offset]=it,this}setY(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.data.array[rt*this.data.stride+this.offset+1]=it,this}setZ(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.data.array[rt*this.data.stride+this.offset+2]=it,this}setW(rt,it){return this.normalized&&(it=normalize(it,this.array)),this.data.array[rt*this.data.stride+this.offset+3]=it,this}getX(rt){let it=this.data.array[rt*this.data.stride+this.offset];return this.normalized&&(it=denormalize(it,this.array)),it}getY(rt){let it=this.data.array[rt*this.data.stride+this.offset+1];return this.normalized&&(it=denormalize(it,this.array)),it}getZ(rt){let it=this.data.array[rt*this.data.stride+this.offset+2];return this.normalized&&(it=denormalize(it,this.array)),it}getW(rt){let it=this.data.array[rt*this.data.stride+this.offset+3];return this.normalized&&(it=denormalize(it,this.array)),it}setXY(rt,it,st){return rt=rt*this.data.stride+this.offset,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array)),this.data.array[rt+0]=it,this.data.array[rt+1]=st,this}setXYZ(rt,it,st,lt){return rt=rt*this.data.stride+this.offset,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array),lt=normalize(lt,this.array)),this.data.array[rt+0]=it,this.data.array[rt+1]=st,this.data.array[rt+2]=lt,this}setXYZW(rt,it,st,lt,ct){return rt=rt*this.data.stride+this.offset,this.normalized&&(it=normalize(it,this.array),st=normalize(st,this.array),lt=normalize(lt,this.array),ct=normalize(ct,this.array)),this.data.array[rt+0]=it,this.data.array[rt+1]=st,this.data.array[rt+2]=lt,this.data.array[rt+3]=ct,this}clone(rt){if(rt===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const it=[];for(let st=0;st<this.count;st++){const lt=st*this.data.stride+this.offset;for(let ct=0;ct<this.itemSize;ct++)it.push(this.data.array[lt+ct])}return new BufferAttribute(new this.array.constructor(it),this.itemSize,this.normalized)}else return rt.interleavedBuffers===void 0&&(rt.interleavedBuffers={}),rt.interleavedBuffers[this.data.uuid]===void 0&&(rt.interleavedBuffers[this.data.uuid]=this.data.clone(rt)),new InterleavedBufferAttribute(rt.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(rt){if(rt===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const it=[];for(let st=0;st<this.count;st++){const lt=st*this.data.stride+this.offset;for(let ct=0;ct<this.itemSize;ct++)it.push(this.data.array[lt+ct])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:it,normalized:this.normalized}}else return rt.interleavedBuffers===void 0&&(rt.interleavedBuffers={}),rt.interleavedBuffers[this.data.uuid]===void 0&&(rt.interleavedBuffers[this.data.uuid]=this.data.toJSON(rt)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(rt){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.map=rt.map,this.alphaMap=rt.alphaMap,this.rotation=rt.rotation,this.sizeAttenuation=rt.sizeAttenuation,this.fog=rt.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$2=new Vector3,_vB$2=new Vector3,_vC$2=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(rt=new SpriteMaterial){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const it=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),st=new InterleavedBuffer(it,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(st,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(st,2,3,!1))}this.geometry=_geometry,this.material=rt,this.center=new Vector2(.5,.5)}raycast(rt,it){rt.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(rt.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(rt.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),rt.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const st=this.material.rotation;let lt,ct;st!==0&&(ct=Math.cos(st),lt=Math.sin(st));const ut=this.center;transformVertex(_vA$2.set(-.5,-.5,0),_mvPosition,ut,_worldScale,lt,ct),transformVertex(_vB$2.set(.5,-.5,0),_mvPosition,ut,_worldScale,lt,ct),transformVertex(_vC$2.set(.5,.5,0),_mvPosition,ut,_worldScale,lt,ct),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let dt=rt.ray.intersectTriangle(_vA$2,_vB$2,_vC$2,!1,_intersectPoint);if(dt===null&&(transformVertex(_vB$2.set(-.5,.5,0),_mvPosition,ut,_worldScale,lt,ct),_uvB.set(0,1),dt=rt.ray.intersectTriangle(_vA$2,_vC$2,_vB$2,!1,_intersectPoint),dt===null))return;const ht=rt.ray.origin.distanceTo(_intersectPoint);ht<rt.near||ht>rt.far||it.push({distance:ht,point:_intersectPoint.clone(),uv:Triangle.getInterpolation(_intersectPoint,_vA$2,_vB$2,_vC$2,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(rt,it){return super.copy(rt,it),rt.center!==void 0&&this.center.copy(rt.center),this.material=rt.material,this}}function transformVertex(nt,rt,it,st,lt,ct){_alignedPosition.subVectors(nt,it).addScalar(.5).multiply(st),lt!==void 0?(_rotatedPosition.x=ct*_alignedPosition.x-lt*_alignedPosition.y,_rotatedPosition.y=lt*_alignedPosition.x+ct*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),nt.copy(rt),nt.x+=_rotatedPosition.x,nt.y+=_rotatedPosition.y,nt.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(rt){super.copy(rt,!1);const it=rt.levels;for(let st=0,lt=it.length;st<lt;st++){const ct=it[st];this.addLevel(ct.object.clone(),ct.distance,ct.hysteresis)}return this.autoUpdate=rt.autoUpdate,this}addLevel(rt,it=0,st=0){it=Math.abs(it);const lt=this.levels;let ct;for(ct=0;ct<lt.length&&!(it<lt[ct].distance);ct++);return lt.splice(ct,0,{distance:it,hysteresis:st,object:rt}),this.add(rt),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(rt){const it=this.levels;if(it.length>0){let st,lt;for(st=1,lt=it.length;st<lt;st++){let ct=it[st].distance;if(it[st].object.visible&&(ct-=ct*it[st].hysteresis),rt<ct)break}return it[st-1].object}return null}raycast(rt,it){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const lt=rt.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(lt).raycast(rt,it)}}update(rt){const it=this.levels;if(it.length>1){_v1$2.setFromMatrixPosition(rt.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const st=_v1$2.distanceTo(_v2$1)/rt.zoom;it[0].object.visible=!0;let lt,ct;for(lt=1,ct=it.length;lt<ct;lt++){let ut=it[lt].distance;if(it[lt].object.visible&&(ut-=ut*it[lt].hysteresis),st>=ut)it[lt-1].object.visible=!1,it[lt].object.visible=!0;else break}for(this._currentLevel=lt-1;lt<ct;lt++)it[lt].object.visible=!1}}toJSON(rt){const it=super.toJSON(rt);this.autoUpdate===!1&&(it.object.autoUpdate=!1),it.object.levels=[];const st=this.levels;for(let lt=0,ct=st.length;lt<ct;lt++){const ut=st[lt];it.object.levels.push({object:ut.object.uuid,distance:ut.distance,hysteresis:ut.hysteresis})}return it}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$4=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(rt,it){super(rt,it),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AttachedBindMode,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const rt=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const it=rt.getAttribute("position");for(let st=0;st<it.count;st++)this.getVertexPosition(st,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const rt=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const it=rt.getAttribute("position");for(let st=0;st<it.count;st++)this.getVertexPosition(st,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(rt,it){return super.copy(rt,it),this.bindMode=rt.bindMode,this.bindMatrix.copy(rt.bindMatrix),this.bindMatrixInverse.copy(rt.bindMatrixInverse),this.skeleton=rt.skeleton,rt.boundingBox!==null&&(this.boundingBox=rt.boundingBox.clone()),rt.boundingSphere!==null&&(this.boundingSphere=rt.boundingSphere.clone()),this}raycast(rt,it){const st=this.material,lt=this.matrixWorld;st!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$4.copy(this.boundingSphere),_sphere$4.applyMatrix4(lt),rt.ray.intersectsSphere(_sphere$4)!==!1&&(_inverseMatrix$2.copy(lt).invert(),_ray$2.copy(rt.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(rt,it,_ray$2)))}getVertexPosition(rt,it){return super.getVertexPosition(rt,it),this.applyBoneTransform(rt,it),it}bind(rt,it){this.skeleton=rt,it===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),it=this.matrixWorld),this.bindMatrix.copy(it),this.bindMatrixInverse.copy(it).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const rt=new Vector4,it=this.geometry.attributes.skinWeight;for(let st=0,lt=it.count;st<lt;st++){rt.fromBufferAttribute(it,st);const ct=1/rt.manhattanLength();ct!==1/0?rt.multiplyScalar(ct):rt.set(1,0,0,0),it.setXYZW(st,rt.x,rt.y,rt.z,rt.w)}}updateMatrixWorld(rt){super.updateMatrixWorld(rt),this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(rt,it){const st=this.skeleton,lt=this.geometry;_skinIndex.fromBufferAttribute(lt.attributes.skinIndex,rt),_skinWeight.fromBufferAttribute(lt.attributes.skinWeight,rt),_basePosition.copy(it).applyMatrix4(this.bindMatrix),it.set(0,0,0);for(let ct=0;ct<4;ct++){const ut=_skinWeight.getComponent(ct);if(ut!==0){const dt=_skinIndex.getComponent(ct);_matrix4.multiplyMatrices(st.bones[dt].matrixWorld,st.boneInverses[dt]),it.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),ut)}}return it.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(rt=null,it=1,st=1,lt,ct,ut,dt,ht,ft=NearestFilter,pt=NearestFilter,mt,gt){super(null,ut,dt,ht,ft,pt,lt,ct,mt,gt),this.isDataTexture=!0,this.image={data:rt,width:it,height:st},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix$1=new Matrix4;class Skeleton{constructor(rt=[],it=[]){this.uuid=generateUUID(),this.bones=rt.slice(0),this.boneInverses=it,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const rt=this.bones,it=this.boneInverses;if(this.boneMatrices=new Float32Array(rt.length*16),it.length===0)this.calculateInverses();else if(rt.length!==it.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let st=0,lt=this.bones.length;st<lt;st++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let rt=0,it=this.bones.length;rt<it;rt++){const st=new Matrix4;this.bones[rt]&&st.copy(this.bones[rt].matrixWorld).invert(),this.boneInverses.push(st)}}pose(){for(let rt=0,it=this.bones.length;rt<it;rt++){const st=this.bones[rt];st&&st.matrixWorld.copy(this.boneInverses[rt]).invert()}for(let rt=0,it=this.bones.length;rt<it;rt++){const st=this.bones[rt];st&&(st.parent&&st.parent.isBone?(st.matrix.copy(st.parent.matrixWorld).invert(),st.matrix.multiply(st.matrixWorld)):st.matrix.copy(st.matrixWorld),st.matrix.decompose(st.position,st.quaternion,st.scale))}}update(){const rt=this.bones,it=this.boneInverses,st=this.boneMatrices,lt=this.boneTexture;for(let ct=0,ut=rt.length;ct<ut;ct++){const dt=rt[ct]?rt[ct].matrixWorld:_identityMatrix$1;_offsetMatrix.multiplyMatrices(dt,it[ct]),_offsetMatrix.toArray(st,ct*16)}lt!==null&&(lt.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let rt=Math.sqrt(this.bones.length*4);rt=Math.ceil(rt/4)*4,rt=Math.max(rt,4);const it=new Float32Array(rt*rt*4);it.set(this.boneMatrices);const st=new DataTexture(it,rt,rt,RGBAFormat,FloatType);return st.needsUpdate=!0,this.boneMatrices=it,this.boneTexture=st,this}getBoneByName(rt){for(let it=0,st=this.bones.length;it<st;it++){const lt=this.bones[it];if(lt.name===rt)return lt}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(rt,it){this.uuid=rt.uuid;for(let st=0,lt=rt.bones.length;st<lt;st++){const ct=rt.bones[st];let ut=it[ct];ut===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",ct),ut=new Bone),this.bones.push(ut),this.boneInverses.push(new Matrix4().fromArray(rt.boneInverses[st]))}return this.init(),this}toJSON(){const rt={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};rt.uuid=this.uuid;const it=this.bones,st=this.boneInverses;for(let lt=0,ct=it.length;lt<ct;lt++){const ut=it[lt];rt.bones.push(ut.uuid);const dt=st[lt];rt.boneInverses.push(dt.toArray())}return rt}}class InstancedBufferAttribute extends BufferAttribute{constructor(rt,it,st,lt=1){super(rt,it,st),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=lt}copy(rt){return super.copy(rt),this.meshPerAttribute=rt.meshPerAttribute,this}toJSON(){const rt=super.toJSON();return rt.meshPerAttribute=this.meshPerAttribute,rt.isInstancedBufferAttribute=!0,rt}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh$1=new Mesh,_sphere$3=new Sphere;class InstancedMesh extends Mesh{constructor(rt,it,st){super(rt,it),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(st*16),16),this.instanceColor=null,this.count=st,this.boundingBox=null,this.boundingSphere=null;for(let lt=0;lt<st;lt++)this.setMatrixAt(lt,_identity)}computeBoundingBox(){const rt=this.geometry,it=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),rt.boundingBox===null&&rt.computeBoundingBox(),this.boundingBox.makeEmpty();for(let st=0;st<it;st++)this.getMatrixAt(st,_instanceLocalMatrix),_box3.copy(rt.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const rt=this.geometry,it=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere),rt.boundingSphere===null&&rt.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let st=0;st<it;st++)this.getMatrixAt(st,_instanceLocalMatrix),_sphere$3.copy(rt.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$3)}copy(rt,it){return super.copy(rt,it),this.instanceMatrix.copy(rt.instanceMatrix),rt.instanceColor!==null&&(this.instanceColor=rt.instanceColor.clone()),this.count=rt.count,rt.boundingBox!==null&&(this.boundingBox=rt.boundingBox.clone()),rt.boundingSphere!==null&&(this.boundingSphere=rt.boundingSphere.clone()),this}getColorAt(rt,it){it.fromArray(this.instanceColor.array,rt*3)}getMatrixAt(rt,it){it.fromArray(this.instanceMatrix.array,rt*16)}raycast(rt,it){const st=this.matrixWorld,lt=this.count;if(_mesh$1.geometry=this.geometry,_mesh$1.material=this.material,_mesh$1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$3.copy(this.boundingSphere),_sphere$3.applyMatrix4(st),rt.ray.intersectsSphere(_sphere$3)!==!1))for(let ct=0;ct<lt;ct++){this.getMatrixAt(ct,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(st,_instanceLocalMatrix),_mesh$1.matrixWorld=_instanceWorldMatrix,_mesh$1.raycast(rt,_instanceIntersects);for(let ut=0,dt=_instanceIntersects.length;ut<dt;ut++){const ht=_instanceIntersects[ut];ht.instanceId=ct,ht.object=this,it.push(ht)}_instanceIntersects.length=0}}setColorAt(rt,it){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3),3)),it.toArray(this.instanceColor.array,rt*3)}setMatrixAt(rt,it){it.toArray(this.instanceMatrix.array,rt*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function sortOpaque(nt,rt){return nt.z-rt.z}function sortTransparent(nt,rt){return rt.z-nt.z}class MultiDrawRenderList{constructor(){this.index=0,this.pool=[],this.list=[]}push(rt,it){const st=this.pool,lt=this.list;this.index>=st.length&&st.push({start:-1,count:-1,z:-1});const ct=st[this.index];lt.push(ct),this.index++,ct.start=rt.start,ct.count=rt.count,ct.z=it}reset(){this.list.length=0,this.index=0}}const ID_ATTR_NAME="batchId",_matrix=new Matrix4,_invMatrixWorld=new Matrix4,_identityMatrix=new Matrix4,_projScreenMatrix$2=new Matrix4,_frustum=new Frustum,_box$1=new Box3,_sphere$2=new Sphere,_vector$5=new Vector3,_renderList=new MultiDrawRenderList,_mesh=new Mesh,_batchIntersects=[];function copyAttributeData(nt,rt,it=0){const st=rt.itemSize;if(nt.isInterleavedBufferAttribute||nt.array.constructor!==rt.array.constructor){const lt=nt.count;for(let ct=0;ct<lt;ct++)for(let ut=0;ut<st;ut++)rt.setComponent(ct+it,ut,nt.getComponent(ct,ut))}else rt.array.set(nt.array,it*st);rt.needsUpdate=!0}class BatchedMesh extends Mesh{get maxGeometryCount(){return this._maxGeometryCount}constructor(rt,it,st=it*2,lt){super(new BufferGeometry,lt),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=rt,this._maxVertexCount=it,this._maxIndexCount=st,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(rt),this._multiDrawStarts=new Int32Array(rt),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let rt=Math.sqrt(this._maxGeometryCount*4);rt=Math.ceil(rt/4)*4,rt=Math.max(rt,4);const it=new Float32Array(rt*rt*4),st=new DataTexture(it,rt,rt,RGBAFormat,FloatType);this._matricesTexture=st}_initializeGeometry(rt){const it=this.geometry,st=this._maxVertexCount,lt=this._maxGeometryCount,ct=this._maxIndexCount;if(this._geometryInitialized===!1){for(const dt in rt.attributes){const ht=rt.getAttribute(dt),{array:ft,itemSize:pt,normalized:mt}=ht,gt=new ft.constructor(st*pt),xt=new ht.constructor(gt,pt,mt);xt.setUsage(ht.usage),it.setAttribute(dt,xt)}if(rt.getIndex()!==null){const dt=st>65536?new Uint32Array(ct):new Uint16Array(ct);it.setIndex(new BufferAttribute(dt,1))}const ut=lt>65536?new Uint32Array(st):new Uint16Array(st);it.setAttribute(ID_ATTR_NAME,new BufferAttribute(ut,1)),this._geometryInitialized=!0}}_validateGeometry(rt){if(rt.getAttribute(ID_ATTR_NAME))throw new Error(`BatchedMesh: Geometry cannot use attribute "${ID_ATTR_NAME}"`);const it=this.geometry;if(!!rt.getIndex()!=!!it.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const st in it.attributes){if(st===ID_ATTR_NAME)continue;if(!rt.hasAttribute(st))throw new Error(`BatchedMesh: Added geometry missing "${st}". All geometries must have consistent attributes.`);const lt=rt.getAttribute(st),ct=it.getAttribute(st);if(lt.itemSize!==ct.itemSize||lt.normalized!==ct.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(rt){return this.customSort=rt,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const rt=this._geometryCount,it=this.boundingBox,st=this._active;it.makeEmpty();for(let lt=0;lt<rt;lt++)st[lt]!==!1&&(this.getMatrixAt(lt,_matrix),this.getBoundingBoxAt(lt,_box$1).applyMatrix4(_matrix),it.union(_box$1))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const rt=this._geometryCount,it=this.boundingSphere,st=this._active;it.makeEmpty();for(let lt=0;lt<rt;lt++)st[lt]!==!1&&(this.getMatrixAt(lt,_matrix),this.getBoundingSphereAt(lt,_sphere$2).applyMatrix4(_matrix),it.union(_sphere$2))}addGeometry(rt,it=-1,st=-1){if(this._initializeGeometry(rt),this._validateGeometry(rt),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const lt={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let ct=null;const ut=this._reservedRanges,dt=this._drawRanges,ht=this._bounds;this._geometryCount!==0&&(ct=ut[ut.length-1]),it===-1?lt.vertexCount=rt.getAttribute("position").count:lt.vertexCount=it,ct===null?lt.vertexStart=0:lt.vertexStart=ct.vertexStart+ct.vertexCount;const ft=rt.getIndex(),pt=ft!==null;if(pt&&(st===-1?lt.indexCount=ft.count:lt.indexCount=st,ct===null?lt.indexStart=0:lt.indexStart=ct.indexStart+ct.indexCount),lt.indexStart!==-1&&lt.indexStart+lt.indexCount>this._maxIndexCount||lt.vertexStart+lt.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const mt=this._visibility,gt=this._active,xt=this._matricesTexture,yt=this._matricesTexture.image.data;mt.push(!0),gt.push(!0);const vt=this._geometryCount;this._geometryCount++,_identityMatrix.toArray(yt,vt*16),xt.needsUpdate=!0,ut.push(lt),dt.push({start:pt?lt.indexStart:lt.vertexStart,count:-1}),ht.push({boxInitialized:!1,box:new Box3,sphereInitialized:!1,sphere:new Sphere});const St=this.geometry.getAttribute(ID_ATTR_NAME);for(let wt=0;wt<lt.vertexCount;wt++)St.setX(lt.vertexStart+wt,vt);return St.needsUpdate=!0,this.setGeometryAt(vt,rt),vt}setGeometryAt(rt,it){if(rt>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(it);const st=this.geometry,lt=st.getIndex()!==null,ct=st.getIndex(),ut=it.getIndex(),dt=this._reservedRanges[rt];if(lt&&ut.count>dt.indexCount||it.attributes.position.count>dt.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const ht=dt.vertexStart,ft=dt.vertexCount;for(const xt in st.attributes){if(xt===ID_ATTR_NAME)continue;const yt=it.getAttribute(xt),vt=st.getAttribute(xt);copyAttributeData(yt,vt,ht);const St=yt.itemSize;for(let wt=yt.count,Et=ft;wt<Et;wt++){const Rt=ht+wt;for(let Tt=0;Tt<St;Tt++)vt.setComponent(Rt,Tt,0)}vt.needsUpdate=!0}if(lt){const xt=dt.indexStart;for(let yt=0;yt<ut.count;yt++)ct.setX(xt+yt,ht+ut.getX(yt));for(let yt=ut.count,vt=dt.indexCount;yt<vt;yt++)ct.setX(xt+yt,ht);ct.needsUpdate=!0}const pt=this._bounds[rt];it.boundingBox!==null?(pt.box.copy(it.boundingBox),pt.boxInitialized=!0):pt.boxInitialized=!1,it.boundingSphere!==null?(pt.sphere.copy(it.boundingSphere),pt.sphereInitialized=!0):pt.sphereInitialized=!1;const mt=this._drawRanges[rt],gt=it.getAttribute("position");return mt.count=lt?ut.count:gt.count,this._visibilityChanged=!0,rt}deleteGeometry(rt){const it=this._active;return rt>=it.length||it[rt]===!1?this:(it[rt]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(rt,it){if(this._active[rt]===!1)return null;const lt=this._bounds[rt],ct=lt.box,ut=this.geometry;if(lt.boxInitialized===!1){ct.makeEmpty();const dt=ut.index,ht=ut.attributes.position,ft=this._drawRanges[rt];for(let pt=ft.start,mt=ft.start+ft.count;pt<mt;pt++){let gt=pt;dt&&(gt=dt.getX(gt)),ct.expandByPoint(_vector$5.fromBufferAttribute(ht,gt))}lt.boxInitialized=!0}return it.copy(ct),it}getBoundingSphereAt(rt,it){if(this._active[rt]===!1)return null;const lt=this._bounds[rt],ct=lt.sphere,ut=this.geometry;if(lt.sphereInitialized===!1){ct.makeEmpty(),this.getBoundingBoxAt(rt,_box$1),_box$1.getCenter(ct.center);const dt=ut.index,ht=ut.attributes.position,ft=this._drawRanges[rt];let pt=0;for(let mt=ft.start,gt=ft.start+ft.count;mt<gt;mt++){let xt=mt;dt&&(xt=dt.getX(xt)),_vector$5.fromBufferAttribute(ht,xt),pt=Math.max(pt,ct.center.distanceToSquared(_vector$5))}ct.radius=Math.sqrt(pt),lt.sphereInitialized=!0}return it.copy(ct),it}setMatrixAt(rt,it){const st=this._active,lt=this._matricesTexture,ct=this._matricesTexture.image.data,ut=this._geometryCount;return rt>=ut||st[rt]===!1?this:(it.toArray(ct,rt*16),lt.needsUpdate=!0,this)}getMatrixAt(rt,it){const st=this._active,lt=this._matricesTexture.image.data,ct=this._geometryCount;return rt>=ct||st[rt]===!1?null:it.fromArray(lt,rt*16)}setVisibleAt(rt,it){const st=this._visibility,lt=this._active,ct=this._geometryCount;return rt>=ct||lt[rt]===!1||st[rt]===it?this:(st[rt]=it,this._visibilityChanged=!0,this)}getVisibleAt(rt){const it=this._visibility,st=this._active,lt=this._geometryCount;return rt>=lt||st[rt]===!1?!1:it[rt]}raycast(rt,it){const st=this._visibility,lt=this._active,ct=this._drawRanges,ut=this._geometryCount,dt=this.matrixWorld,ht=this.geometry;_mesh.material=this.material,_mesh.geometry.index=ht.index,_mesh.geometry.attributes=ht.attributes,_mesh.geometry.boundingBox===null&&(_mesh.geometry.boundingBox=new Box3),_mesh.geometry.boundingSphere===null&&(_mesh.geometry.boundingSphere=new Sphere);for(let ft=0;ft<ut;ft++){if(!st[ft]||!lt[ft])continue;const pt=ct[ft];_mesh.geometry.setDrawRange(pt.start,pt.count),this.getMatrixAt(ft,_mesh.matrixWorld).premultiply(dt),this.getBoundingBoxAt(ft,_mesh.geometry.boundingBox),this.getBoundingSphereAt(ft,_mesh.geometry.boundingSphere),_mesh.raycast(rt,_batchIntersects);for(let mt=0,gt=_batchIntersects.length;mt<gt;mt++){const xt=_batchIntersects[mt];xt.object=this,xt.batchId=ft,it.push(xt)}_batchIntersects.length=0}_mesh.material=null,_mesh.geometry.index=null,_mesh.geometry.attributes={},_mesh.geometry.setDrawRange(0,1/0)}copy(rt){return super.copy(rt),this.geometry=rt.geometry.clone(),this.perObjectFrustumCulled=rt.perObjectFrustumCulled,this.sortObjects=rt.sortObjects,this.boundingBox=rt.boundingBox!==null?rt.boundingBox.clone():null,this.boundingSphere=rt.boundingSphere!==null?rt.boundingSphere.clone():null,this._drawRanges=rt._drawRanges.map(it=>({...it})),this._reservedRanges=rt._reservedRanges.map(it=>({...it})),this._visibility=rt._visibility.slice(),this._active=rt._active.slice(),this._bounds=rt._bounds.map(it=>({boxInitialized:it.boxInitialized,box:it.box.clone(),sphereInitialized:it.sphereInitialized,sphere:it.sphere.clone()})),this._maxGeometryCount=rt._maxGeometryCount,this._maxVertexCount=rt._maxVertexCount,this._maxIndexCount=rt._maxIndexCount,this._geometryInitialized=rt._geometryInitialized,this._geometryCount=rt._geometryCount,this._multiDrawCounts=rt._multiDrawCounts.slice(),this._multiDrawStarts=rt._multiDrawStarts.slice(),this._matricesTexture=rt._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(rt,it,st,lt,ct){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const ut=lt.getIndex(),dt=ut===null?1:ut.array.BYTES_PER_ELEMENT,ht=this._active,ft=this._visibility,pt=this._multiDrawStarts,mt=this._multiDrawCounts,gt=this._drawRanges,xt=this.perObjectFrustumCulled;xt&&(_projScreenMatrix$2.multiplyMatrices(st.projectionMatrix,st.matrixWorldInverse).multiply(this.matrixWorld),_frustum.setFromProjectionMatrix(_projScreenMatrix$2,rt.coordinateSystem));let yt=0;if(this.sortObjects){_invMatrixWorld.copy(this.matrixWorld).invert(),_vector$5.setFromMatrixPosition(st.matrixWorld).applyMatrix4(_invMatrixWorld);for(let wt=0,Et=ft.length;wt<Et;wt++)if(ft[wt]&&ht[wt]){this.getMatrixAt(wt,_matrix),this.getBoundingSphereAt(wt,_sphere$2).applyMatrix4(_matrix);let Rt=!1;if(xt&&(Rt=!_frustum.intersectsSphere(_sphere$2)),!Rt){const Tt=_vector$5.distanceTo(_sphere$2.center);_renderList.push(gt[wt],Tt)}}const vt=_renderList.list,St=this.customSort;St===null?vt.sort(ct.transparent?sortTransparent:sortOpaque):St.call(this,vt,st);for(let wt=0,Et=vt.length;wt<Et;wt++){const Rt=vt[wt];pt[yt]=Rt.start*dt,mt[yt]=Rt.count,yt++}_renderList.reset()}else for(let vt=0,St=ft.length;vt<St;vt++)if(ft[vt]&&ht[vt]){let wt=!1;if(xt&&(this.getMatrixAt(vt,_matrix),this.getBoundingSphereAt(vt,_sphere$2).applyMatrix4(_matrix),wt=!_frustum.intersectsSphere(_sphere$2)),!wt){const Et=gt[vt];pt[yt]=Et.start*dt,mt[yt]=Et.count,yt++}}this._multiDrawCount=yt,this._visibilityChanged=!1}onBeforeShadow(rt,it,st,lt,ct,ut){this.onBeforeRender(rt,null,lt,ct,ut)}}class LineBasicMaterial extends Material{constructor(rt){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.map=rt.map,this.linewidth=rt.linewidth,this.linecap=rt.linecap,this.linejoin=rt.linejoin,this.fog=rt.fog,this}}const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere;class Line extends Object3D{constructor(rt=new BufferGeometry,it=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=rt,this.material=it,this.updateMorphTargets()}copy(rt,it){return super.copy(rt,it),this.material=Array.isArray(rt.material)?rt.material.slice():rt.material,this.geometry=rt.geometry,this}computeLineDistances(){const rt=this.geometry;if(rt.index===null){const it=rt.attributes.position,st=[0];for(let lt=1,ct=it.count;lt<ct;lt++)_start$1.fromBufferAttribute(it,lt-1),_end$1.fromBufferAttribute(it,lt),st[lt]=st[lt-1],st[lt]+=_start$1.distanceTo(_end$1);rt.setAttribute("lineDistance",new Float32BufferAttribute(st,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(rt,it){const st=this.geometry,lt=this.matrixWorld,ct=rt.params.Line.threshold,ut=st.drawRange;if(st.boundingSphere===null&&st.computeBoundingSphere(),_sphere$1.copy(st.boundingSphere),_sphere$1.applyMatrix4(lt),_sphere$1.radius+=ct,rt.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(lt).invert(),_ray$1.copy(rt.ray).applyMatrix4(_inverseMatrix$1);const dt=ct/((this.scale.x+this.scale.y+this.scale.z)/3),ht=dt*dt,ft=new Vector3,pt=new Vector3,mt=new Vector3,gt=new Vector3,xt=this.isLineSegments?2:1,yt=st.index,St=st.attributes.position;if(yt!==null){const wt=Math.max(0,ut.start),Et=Math.min(yt.count,ut.start+ut.count);for(let Rt=wt,Tt=Et-1;Rt<Tt;Rt+=xt){const It=yt.getX(Rt),At=yt.getX(Rt+1);if(ft.fromBufferAttribute(St,It),pt.fromBufferAttribute(St,At),_ray$1.distanceSqToSegment(ft,pt,gt,mt)>ht)continue;gt.applyMatrix4(this.matrixWorld);const jt=rt.ray.origin.distanceTo(gt);jt<rt.near||jt>rt.far||it.push({distance:jt,point:mt.clone().applyMatrix4(this.matrixWorld),index:Rt,face:null,faceIndex:null,object:this})}}else{const wt=Math.max(0,ut.start),Et=Math.min(St.count,ut.start+ut.count);for(let Rt=wt,Tt=Et-1;Rt<Tt;Rt+=xt){if(ft.fromBufferAttribute(St,Rt),pt.fromBufferAttribute(St,Rt+1),_ray$1.distanceSqToSegment(ft,pt,gt,mt)>ht)continue;gt.applyMatrix4(this.matrixWorld);const At=rt.ray.origin.distanceTo(gt);At<rt.near||At>rt.far||it.push({distance:At,point:mt.clone().applyMatrix4(this.matrixWorld),index:Rt,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const it=this.geometry.morphAttributes,st=Object.keys(it);if(st.length>0){const lt=it[st[0]];if(lt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ct=0,ut=lt.length;ct<ut;ct++){const dt=lt[ct].name||String(ct);this.morphTargetInfluences.push(0),this.morphTargetDictionary[dt]=ct}}}}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(rt,it){super(rt,it),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const rt=this.geometry;if(rt.index===null){const it=rt.attributes.position,st=[];for(let lt=0,ct=it.count;lt<ct;lt+=2)_start.fromBufferAttribute(it,lt),_end.fromBufferAttribute(it,lt+1),st[lt]=lt===0?0:st[lt-1],st[lt+1]=st[lt]+_start.distanceTo(_end);rt.setAttribute("lineDistance",new Float32BufferAttribute(st,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(rt,it){super(rt,it),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(rt){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.map=rt.map,this.alphaMap=rt.alphaMap,this.size=rt.size,this.sizeAttenuation=rt.sizeAttenuation,this.fog=rt.fog,this}}const _inverseMatrix=new Matrix4,_ray$4=new Ray,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(rt=new BufferGeometry,it=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=rt,this.material=it,this.updateMorphTargets()}copy(rt,it){return super.copy(rt,it),this.material=Array.isArray(rt.material)?rt.material.slice():rt.material,this.geometry=rt.geometry,this}raycast(rt,it){const st=this.geometry,lt=this.matrixWorld,ct=rt.params.Points.threshold,ut=st.drawRange;if(st.boundingSphere===null&&st.computeBoundingSphere(),_sphere.copy(st.boundingSphere),_sphere.applyMatrix4(lt),_sphere.radius+=ct,rt.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(lt).invert(),_ray$4.copy(rt.ray).applyMatrix4(_inverseMatrix);const dt=ct/((this.scale.x+this.scale.y+this.scale.z)/3),ht=dt*dt,ft=st.index,mt=st.attributes.position;if(ft!==null){const gt=Math.max(0,ut.start),xt=Math.min(ft.count,ut.start+ut.count);for(let yt=gt,vt=xt;yt<vt;yt++){const St=ft.getX(yt);_position$2.fromBufferAttribute(mt,St),testPoint(_position$2,St,ht,lt,rt,it,this)}}else{const gt=Math.max(0,ut.start),xt=Math.min(mt.count,ut.start+ut.count);for(let yt=gt,vt=xt;yt<vt;yt++)_position$2.fromBufferAttribute(mt,yt),testPoint(_position$2,yt,ht,lt,rt,it,this)}}updateMorphTargets(){const it=this.geometry.morphAttributes,st=Object.keys(it);if(st.length>0){const lt=it[st[0]];if(lt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ct=0,ut=lt.length;ct<ut;ct++){const dt=lt[ct].name||String(ct);this.morphTargetInfluences.push(0),this.morphTargetDictionary[dt]=ct}}}}}function testPoint(nt,rt,it,st,lt,ct,ut){const dt=_ray$4.distanceSqToPoint(nt);if(dt<it){const ht=new Vector3;_ray$4.closestPointToPoint(nt,ht),ht.applyMatrix4(st);const ft=lt.ray.origin.distanceTo(ht);if(ft<lt.near||ft>lt.far)return;ct.push({distance:ft,distanceToRay:Math.sqrt(dt),point:ht,index:rt,face:null,object:ut})}}class VideoTexture extends Texture{constructor(rt,it,st,lt,ct,ut,dt,ht,ft){super(rt,it,st,lt,ct,ut,dt,ht,ft),this.isVideoTexture=!0,this.minFilter=ut!==void 0?ut:LinearFilter,this.magFilter=ct!==void 0?ct:LinearFilter,this.generateMipmaps=!1;const pt=this;function mt(){pt.needsUpdate=!0,rt.requestVideoFrameCallback(mt)}"requestVideoFrameCallback"in rt&&rt.requestVideoFrameCallback(mt)}clone(){return new this.constructor(this.image).copy(this)}update(){const rt=this.image;"requestVideoFrameCallback"in rt===!1&&rt.readyState>=rt.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FramebufferTexture extends Texture{constructor(rt,it){super({width:rt,height:it}),this.isFramebufferTexture=!0,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(rt,it,st,lt,ct,ut,dt,ht,ft,pt,mt,gt){super(null,ut,dt,ht,ft,pt,lt,ct,mt,gt),this.isCompressedTexture=!0,this.image={width:it,height:st},this.mipmaps=rt,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(rt,it,st,lt,ct,ut){super(rt,it,st,ct,ut),this.isCompressedArrayTexture=!0,this.image.depth=lt,this.wrapR=ClampToEdgeWrapping}}class CompressedCubeTexture extends CompressedTexture{constructor(rt,it,st){super(void 0,rt[0].width,rt[0].height,it,st,CubeReflectionMapping),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=rt}}class CanvasTexture extends Texture{constructor(rt,it,st,lt,ct,ut,dt,ht,ft){super(rt,it,st,lt,ct,ut,dt,ht,ft),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(rt,it){const st=this.getUtoTmapping(rt);return this.getPoint(st,it)}getPoints(rt=5){const it=[];for(let st=0;st<=rt;st++)it.push(this.getPoint(st/rt));return it}getSpacedPoints(rt=5){const it=[];for(let st=0;st<=rt;st++)it.push(this.getPointAt(st/rt));return it}getLength(){const rt=this.getLengths();return rt[rt.length-1]}getLengths(rt=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===rt+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const it=[];let st,lt=this.getPoint(0),ct=0;it.push(0);for(let ut=1;ut<=rt;ut++)st=this.getPoint(ut/rt),ct+=st.distanceTo(lt),it.push(ct),lt=st;return this.cacheArcLengths=it,it}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(rt,it){const st=this.getLengths();let lt=0;const ct=st.length;let ut;it?ut=it:ut=rt*st[ct-1];let dt=0,ht=ct-1,ft;for(;dt<=ht;)if(lt=Math.floor(dt+(ht-dt)/2),ft=st[lt]-ut,ft<0)dt=lt+1;else if(ft>0)ht=lt-1;else{ht=lt;break}if(lt=ht,st[lt]===ut)return lt/(ct-1);const pt=st[lt],gt=st[lt+1]-pt,xt=(ut-pt)/gt;return(lt+xt)/(ct-1)}getTangent(rt,it){let lt=rt-1e-4,ct=rt+1e-4;lt<0&&(lt=0),ct>1&&(ct=1);const ut=this.getPoint(lt),dt=this.getPoint(ct),ht=it||(ut.isVector2?new Vector2:new Vector3);return ht.copy(dt).sub(ut).normalize(),ht}getTangentAt(rt,it){const st=this.getUtoTmapping(rt);return this.getTangent(st,it)}computeFrenetFrames(rt,it){const st=new Vector3,lt=[],ct=[],ut=[],dt=new Vector3,ht=new Matrix4;for(let xt=0;xt<=rt;xt++){const yt=xt/rt;lt[xt]=this.getTangentAt(yt,new Vector3)}ct[0]=new Vector3,ut[0]=new Vector3;let ft=Number.MAX_VALUE;const pt=Math.abs(lt[0].x),mt=Math.abs(lt[0].y),gt=Math.abs(lt[0].z);pt<=ft&&(ft=pt,st.set(1,0,0)),mt<=ft&&(ft=mt,st.set(0,1,0)),gt<=ft&&st.set(0,0,1),dt.crossVectors(lt[0],st).normalize(),ct[0].crossVectors(lt[0],dt),ut[0].crossVectors(lt[0],ct[0]);for(let xt=1;xt<=rt;xt++){if(ct[xt]=ct[xt-1].clone(),ut[xt]=ut[xt-1].clone(),dt.crossVectors(lt[xt-1],lt[xt]),dt.length()>Number.EPSILON){dt.normalize();const yt=Math.acos(clamp(lt[xt-1].dot(lt[xt]),-1,1));ct[xt].applyMatrix4(ht.makeRotationAxis(dt,yt))}ut[xt].crossVectors(lt[xt],ct[xt])}if(it===!0){let xt=Math.acos(clamp(ct[0].dot(ct[rt]),-1,1));xt/=rt,lt[0].dot(dt.crossVectors(ct[0],ct[rt]))>0&&(xt=-xt);for(let yt=1;yt<=rt;yt++)ct[yt].applyMatrix4(ht.makeRotationAxis(lt[yt],xt*yt)),ut[yt].crossVectors(lt[yt],ct[yt])}return{tangents:lt,normals:ct,binormals:ut}}clone(){return new this.constructor().copy(this)}copy(rt){return this.arcLengthDivisions=rt.arcLengthDivisions,this}toJSON(){const rt={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return rt.arcLengthDivisions=this.arcLengthDivisions,rt.type=this.type,rt}fromJSON(rt){return this.arcLengthDivisions=rt.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(rt=0,it=0,st=1,lt=1,ct=0,ut=Math.PI*2,dt=!1,ht=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=rt,this.aY=it,this.xRadius=st,this.yRadius=lt,this.aStartAngle=ct,this.aEndAngle=ut,this.aClockwise=dt,this.aRotation=ht}getPoint(rt,it){const st=it||new Vector2,lt=Math.PI*2;let ct=this.aEndAngle-this.aStartAngle;const ut=Math.abs(ct)<Number.EPSILON;for(;ct<0;)ct+=lt;for(;ct>lt;)ct-=lt;ct<Number.EPSILON&&(ut?ct=0:ct=lt),this.aClockwise===!0&&!ut&&(ct===lt?ct=-lt:ct=ct-lt);const dt=this.aStartAngle+rt*ct;let ht=this.aX+this.xRadius*Math.cos(dt),ft=this.aY+this.yRadius*Math.sin(dt);if(this.aRotation!==0){const pt=Math.cos(this.aRotation),mt=Math.sin(this.aRotation),gt=ht-this.aX,xt=ft-this.aY;ht=gt*pt-xt*mt+this.aX,ft=gt*mt+xt*pt+this.aY}return st.set(ht,ft)}copy(rt){return super.copy(rt),this.aX=rt.aX,this.aY=rt.aY,this.xRadius=rt.xRadius,this.yRadius=rt.yRadius,this.aStartAngle=rt.aStartAngle,this.aEndAngle=rt.aEndAngle,this.aClockwise=rt.aClockwise,this.aRotation=rt.aRotation,this}toJSON(){const rt=super.toJSON();return rt.aX=this.aX,rt.aY=this.aY,rt.xRadius=this.xRadius,rt.yRadius=this.yRadius,rt.aStartAngle=this.aStartAngle,rt.aEndAngle=this.aEndAngle,rt.aClockwise=this.aClockwise,rt.aRotation=this.aRotation,rt}fromJSON(rt){return super.fromJSON(rt),this.aX=rt.aX,this.aY=rt.aY,this.xRadius=rt.xRadius,this.yRadius=rt.yRadius,this.aStartAngle=rt.aStartAngle,this.aEndAngle=rt.aEndAngle,this.aClockwise=rt.aClockwise,this.aRotation=rt.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(rt,it,st,lt,ct,ut){super(rt,it,st,st,lt,ct,ut),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let nt=0,rt=0,it=0,st=0;function lt(ct,ut,dt,ht){nt=ct,rt=dt,it=-3*ct+3*ut-2*dt-ht,st=2*ct-2*ut+dt+ht}return{initCatmullRom:function(ct,ut,dt,ht,ft){lt(ut,dt,ft*(dt-ct),ft*(ht-ut))},initNonuniformCatmullRom:function(ct,ut,dt,ht,ft,pt,mt){let gt=(ut-ct)/ft-(dt-ct)/(ft+pt)+(dt-ut)/pt,xt=(dt-ut)/pt-(ht-ut)/(pt+mt)+(ht-dt)/mt;gt*=pt,xt*=pt,lt(ut,dt,gt,xt)},calc:function(ct){const ut=ct*ct,dt=ut*ct;return nt+rt*ct+it*ut+st*dt}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(rt=[],it=!1,st="centripetal",lt=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=rt,this.closed=it,this.curveType=st,this.tension=lt}getPoint(rt,it=new Vector3){const st=it,lt=this.points,ct=lt.length,ut=(ct-(this.closed?0:1))*rt;let dt=Math.floor(ut),ht=ut-dt;this.closed?dt+=dt>0?0:(Math.floor(Math.abs(dt)/ct)+1)*ct:ht===0&&dt===ct-1&&(dt=ct-2,ht=1);let ft,pt;this.closed||dt>0?ft=lt[(dt-1)%ct]:(tmp.subVectors(lt[0],lt[1]).add(lt[0]),ft=tmp);const mt=lt[dt%ct],gt=lt[(dt+1)%ct];if(this.closed||dt+2<ct?pt=lt[(dt+2)%ct]:(tmp.subVectors(lt[ct-1],lt[ct-2]).add(lt[ct-1]),pt=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const xt=this.curveType==="chordal"?.5:.25;let yt=Math.pow(ft.distanceToSquared(mt),xt),vt=Math.pow(mt.distanceToSquared(gt),xt),St=Math.pow(gt.distanceToSquared(pt),xt);vt<1e-4&&(vt=1),yt<1e-4&&(yt=vt),St<1e-4&&(St=vt),px.initNonuniformCatmullRom(ft.x,mt.x,gt.x,pt.x,yt,vt,St),py.initNonuniformCatmullRom(ft.y,mt.y,gt.y,pt.y,yt,vt,St),pz.initNonuniformCatmullRom(ft.z,mt.z,gt.z,pt.z,yt,vt,St)}else this.curveType==="catmullrom"&&(px.initCatmullRom(ft.x,mt.x,gt.x,pt.x,this.tension),py.initCatmullRom(ft.y,mt.y,gt.y,pt.y,this.tension),pz.initCatmullRom(ft.z,mt.z,gt.z,pt.z,this.tension));return st.set(px.calc(ht),py.calc(ht),pz.calc(ht)),st}copy(rt){super.copy(rt),this.points=[];for(let it=0,st=rt.points.length;it<st;it++){const lt=rt.points[it];this.points.push(lt.clone())}return this.closed=rt.closed,this.curveType=rt.curveType,this.tension=rt.tension,this}toJSON(){const rt=super.toJSON();rt.points=[];for(let it=0,st=this.points.length;it<st;it++){const lt=this.points[it];rt.points.push(lt.toArray())}return rt.closed=this.closed,rt.curveType=this.curveType,rt.tension=this.tension,rt}fromJSON(rt){super.fromJSON(rt),this.points=[];for(let it=0,st=rt.points.length;it<st;it++){const lt=rt.points[it];this.points.push(new Vector3().fromArray(lt))}return this.closed=rt.closed,this.curveType=rt.curveType,this.tension=rt.tension,this}}function CatmullRom(nt,rt,it,st,lt){const ct=(st-rt)*.5,ut=(lt-it)*.5,dt=nt*nt,ht=nt*dt;return(2*it-2*st+ct+ut)*ht+(-3*it+3*st-2*ct-ut)*dt+ct*nt+it}function QuadraticBezierP0(nt,rt){const it=1-nt;return it*it*rt}function QuadraticBezierP1(nt,rt){return 2*(1-nt)*nt*rt}function QuadraticBezierP2(nt,rt){return nt*nt*rt}function QuadraticBezier(nt,rt,it,st){return QuadraticBezierP0(nt,rt)+QuadraticBezierP1(nt,it)+QuadraticBezierP2(nt,st)}function CubicBezierP0(nt,rt){const it=1-nt;return it*it*it*rt}function CubicBezierP1(nt,rt){const it=1-nt;return 3*it*it*nt*rt}function CubicBezierP2(nt,rt){return 3*(1-nt)*nt*nt*rt}function CubicBezierP3(nt,rt){return nt*nt*nt*rt}function CubicBezier(nt,rt,it,st,lt){return CubicBezierP0(nt,rt)+CubicBezierP1(nt,it)+CubicBezierP2(nt,st)+CubicBezierP3(nt,lt)}class CubicBezierCurve extends Curve{constructor(rt=new Vector2,it=new Vector2,st=new Vector2,lt=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=rt,this.v1=it,this.v2=st,this.v3=lt}getPoint(rt,it=new Vector2){const st=it,lt=this.v0,ct=this.v1,ut=this.v2,dt=this.v3;return st.set(CubicBezier(rt,lt.x,ct.x,ut.x,dt.x),CubicBezier(rt,lt.y,ct.y,ut.y,dt.y)),st}copy(rt){return super.copy(rt),this.v0.copy(rt.v0),this.v1.copy(rt.v1),this.v2.copy(rt.v2),this.v3.copy(rt.v3),this}toJSON(){const rt=super.toJSON();return rt.v0=this.v0.toArray(),rt.v1=this.v1.toArray(),rt.v2=this.v2.toArray(),rt.v3=this.v3.toArray(),rt}fromJSON(rt){return super.fromJSON(rt),this.v0.fromArray(rt.v0),this.v1.fromArray(rt.v1),this.v2.fromArray(rt.v2),this.v3.fromArray(rt.v3),this}}class CubicBezierCurve3 extends Curve{constructor(rt=new Vector3,it=new Vector3,st=new Vector3,lt=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=rt,this.v1=it,this.v2=st,this.v3=lt}getPoint(rt,it=new Vector3){const st=it,lt=this.v0,ct=this.v1,ut=this.v2,dt=this.v3;return st.set(CubicBezier(rt,lt.x,ct.x,ut.x,dt.x),CubicBezier(rt,lt.y,ct.y,ut.y,dt.y),CubicBezier(rt,lt.z,ct.z,ut.z,dt.z)),st}copy(rt){return super.copy(rt),this.v0.copy(rt.v0),this.v1.copy(rt.v1),this.v2.copy(rt.v2),this.v3.copy(rt.v3),this}toJSON(){const rt=super.toJSON();return rt.v0=this.v0.toArray(),rt.v1=this.v1.toArray(),rt.v2=this.v2.toArray(),rt.v3=this.v3.toArray(),rt}fromJSON(rt){return super.fromJSON(rt),this.v0.fromArray(rt.v0),this.v1.fromArray(rt.v1),this.v2.fromArray(rt.v2),this.v3.fromArray(rt.v3),this}}class LineCurve extends Curve{constructor(rt=new Vector2,it=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=rt,this.v2=it}getPoint(rt,it=new Vector2){const st=it;return rt===1?st.copy(this.v2):(st.copy(this.v2).sub(this.v1),st.multiplyScalar(rt).add(this.v1)),st}getPointAt(rt,it){return this.getPoint(rt,it)}getTangent(rt,it=new Vector2){return it.subVectors(this.v2,this.v1).normalize()}getTangentAt(rt,it){return this.getTangent(rt,it)}copy(rt){return super.copy(rt),this.v1.copy(rt.v1),this.v2.copy(rt.v2),this}toJSON(){const rt=super.toJSON();return rt.v1=this.v1.toArray(),rt.v2=this.v2.toArray(),rt}fromJSON(rt){return super.fromJSON(rt),this.v1.fromArray(rt.v1),this.v2.fromArray(rt.v2),this}}class LineCurve3 extends Curve{constructor(rt=new Vector3,it=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=rt,this.v2=it}getPoint(rt,it=new Vector3){const st=it;return rt===1?st.copy(this.v2):(st.copy(this.v2).sub(this.v1),st.multiplyScalar(rt).add(this.v1)),st}getPointAt(rt,it){return this.getPoint(rt,it)}getTangent(rt,it=new Vector3){return it.subVectors(this.v2,this.v1).normalize()}getTangentAt(rt,it){return this.getTangent(rt,it)}copy(rt){return super.copy(rt),this.v1.copy(rt.v1),this.v2.copy(rt.v2),this}toJSON(){const rt=super.toJSON();return rt.v1=this.v1.toArray(),rt.v2=this.v2.toArray(),rt}fromJSON(rt){return super.fromJSON(rt),this.v1.fromArray(rt.v1),this.v2.fromArray(rt.v2),this}}class QuadraticBezierCurve extends Curve{constructor(rt=new Vector2,it=new Vector2,st=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=rt,this.v1=it,this.v2=st}getPoint(rt,it=new Vector2){const st=it,lt=this.v0,ct=this.v1,ut=this.v2;return st.set(QuadraticBezier(rt,lt.x,ct.x,ut.x),QuadraticBezier(rt,lt.y,ct.y,ut.y)),st}copy(rt){return super.copy(rt),this.v0.copy(rt.v0),this.v1.copy(rt.v1),this.v2.copy(rt.v2),this}toJSON(){const rt=super.toJSON();return rt.v0=this.v0.toArray(),rt.v1=this.v1.toArray(),rt.v2=this.v2.toArray(),rt}fromJSON(rt){return super.fromJSON(rt),this.v0.fromArray(rt.v0),this.v1.fromArray(rt.v1),this.v2.fromArray(rt.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(rt=new Vector3,it=new Vector3,st=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=rt,this.v1=it,this.v2=st}getPoint(rt,it=new Vector3){const st=it,lt=this.v0,ct=this.v1,ut=this.v2;return st.set(QuadraticBezier(rt,lt.x,ct.x,ut.x),QuadraticBezier(rt,lt.y,ct.y,ut.y),QuadraticBezier(rt,lt.z,ct.z,ut.z)),st}copy(rt){return super.copy(rt),this.v0.copy(rt.v0),this.v1.copy(rt.v1),this.v2.copy(rt.v2),this}toJSON(){const rt=super.toJSON();return rt.v0=this.v0.toArray(),rt.v1=this.v1.toArray(),rt.v2=this.v2.toArray(),rt}fromJSON(rt){return super.fromJSON(rt),this.v0.fromArray(rt.v0),this.v1.fromArray(rt.v1),this.v2.fromArray(rt.v2),this}}class SplineCurve extends Curve{constructor(rt=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=rt}getPoint(rt,it=new Vector2){const st=it,lt=this.points,ct=(lt.length-1)*rt,ut=Math.floor(ct),dt=ct-ut,ht=lt[ut===0?ut:ut-1],ft=lt[ut],pt=lt[ut>lt.length-2?lt.length-1:ut+1],mt=lt[ut>lt.length-3?lt.length-1:ut+2];return st.set(CatmullRom(dt,ht.x,ft.x,pt.x,mt.x),CatmullRom(dt,ht.y,ft.y,pt.y,mt.y)),st}copy(rt){super.copy(rt),this.points=[];for(let it=0,st=rt.points.length;it<st;it++){const lt=rt.points[it];this.points.push(lt.clone())}return this}toJSON(){const rt=super.toJSON();rt.points=[];for(let it=0,st=this.points.length;it<st;it++){const lt=this.points[it];rt.points.push(lt.toArray())}return rt}fromJSON(rt){super.fromJSON(rt),this.points=[];for(let it=0,st=rt.points.length;it<st;it++){const lt=rt.points[it];this.points.push(new Vector2().fromArray(lt))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(rt){this.curves.push(rt)}closePath(){const rt=this.curves[0].getPoint(0),it=this.curves[this.curves.length-1].getPoint(1);if(!rt.equals(it)){const st=rt.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Curves[st](it,rt))}return this}getPoint(rt,it){const st=rt*this.getLength(),lt=this.getCurveLengths();let ct=0;for(;ct<lt.length;){if(lt[ct]>=st){const ut=lt[ct]-st,dt=this.curves[ct],ht=dt.getLength(),ft=ht===0?0:1-ut/ht;return dt.getPointAt(ft,it)}ct++}return null}getLength(){const rt=this.getCurveLengths();return rt[rt.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const rt=[];let it=0;for(let st=0,lt=this.curves.length;st<lt;st++)it+=this.curves[st].getLength(),rt.push(it);return this.cacheLengths=rt,rt}getSpacedPoints(rt=40){const it=[];for(let st=0;st<=rt;st++)it.push(this.getPoint(st/rt));return this.autoClose&&it.push(it[0]),it}getPoints(rt=12){const it=[];let st;for(let lt=0,ct=this.curves;lt<ct.length;lt++){const ut=ct[lt],dt=ut.isEllipseCurve?rt*2:ut.isLineCurve||ut.isLineCurve3?1:ut.isSplineCurve?rt*ut.points.length:rt,ht=ut.getPoints(dt);for(let ft=0;ft<ht.length;ft++){const pt=ht[ft];st&&st.equals(pt)||(it.push(pt),st=pt)}}return this.autoClose&&it.length>1&&!it[it.length-1].equals(it[0])&&it.push(it[0]),it}copy(rt){super.copy(rt),this.curves=[];for(let it=0,st=rt.curves.length;it<st;it++){const lt=rt.curves[it];this.curves.push(lt.clone())}return this.autoClose=rt.autoClose,this}toJSON(){const rt=super.toJSON();rt.autoClose=this.autoClose,rt.curves=[];for(let it=0,st=this.curves.length;it<st;it++){const lt=this.curves[it];rt.curves.push(lt.toJSON())}return rt}fromJSON(rt){super.fromJSON(rt),this.autoClose=rt.autoClose,this.curves=[];for(let it=0,st=rt.curves.length;it<st;it++){const lt=rt.curves[it];this.curves.push(new Curves[lt.type]().fromJSON(lt))}return this}}class Path extends CurvePath{constructor(rt){super(),this.type="Path",this.currentPoint=new Vector2,rt&&this.setFromPoints(rt)}setFromPoints(rt){this.moveTo(rt[0].x,rt[0].y);for(let it=1,st=rt.length;it<st;it++)this.lineTo(rt[it].x,rt[it].y);return this}moveTo(rt,it){return this.currentPoint.set(rt,it),this}lineTo(rt,it){const st=new LineCurve(this.currentPoint.clone(),new Vector2(rt,it));return this.curves.push(st),this.currentPoint.set(rt,it),this}quadraticCurveTo(rt,it,st,lt){const ct=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(rt,it),new Vector2(st,lt));return this.curves.push(ct),this.currentPoint.set(st,lt),this}bezierCurveTo(rt,it,st,lt,ct,ut){const dt=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(rt,it),new Vector2(st,lt),new Vector2(ct,ut));return this.curves.push(dt),this.currentPoint.set(ct,ut),this}splineThru(rt){const it=[this.currentPoint.clone()].concat(rt),st=new SplineCurve(it);return this.curves.push(st),this.currentPoint.copy(rt[rt.length-1]),this}arc(rt,it,st,lt,ct,ut){const dt=this.currentPoint.x,ht=this.currentPoint.y;return this.absarc(rt+dt,it+ht,st,lt,ct,ut),this}absarc(rt,it,st,lt,ct,ut){return this.absellipse(rt,it,st,st,lt,ct,ut),this}ellipse(rt,it,st,lt,ct,ut,dt,ht){const ft=this.currentPoint.x,pt=this.currentPoint.y;return this.absellipse(rt+ft,it+pt,st,lt,ct,ut,dt,ht),this}absellipse(rt,it,st,lt,ct,ut,dt,ht){const ft=new EllipseCurve(rt,it,st,lt,ct,ut,dt,ht);if(this.curves.length>0){const mt=ft.getPoint(0);mt.equals(this.currentPoint)||this.lineTo(mt.x,mt.y)}this.curves.push(ft);const pt=ft.getPoint(1);return this.currentPoint.copy(pt),this}copy(rt){return super.copy(rt),this.currentPoint.copy(rt.currentPoint),this}toJSON(){const rt=super.toJSON();return rt.currentPoint=this.currentPoint.toArray(),rt}fromJSON(rt){return super.fromJSON(rt),this.currentPoint.fromArray(rt.currentPoint),this}}class LatheGeometry extends BufferGeometry{constructor(rt=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],it=12,st=0,lt=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:rt,segments:it,phiStart:st,phiLength:lt},it=Math.floor(it),lt=clamp(lt,0,Math.PI*2);const ct=[],ut=[],dt=[],ht=[],ft=[],pt=1/it,mt=new Vector3,gt=new Vector2,xt=new Vector3,yt=new Vector3,vt=new Vector3;let St=0,wt=0;for(let Et=0;Et<=rt.length-1;Et++)switch(Et){case 0:St=rt[Et+1].x-rt[Et].x,wt=rt[Et+1].y-rt[Et].y,xt.x=wt*1,xt.y=-St,xt.z=wt*0,vt.copy(xt),xt.normalize(),ht.push(xt.x,xt.y,xt.z);break;case rt.length-1:ht.push(vt.x,vt.y,vt.z);break;default:St=rt[Et+1].x-rt[Et].x,wt=rt[Et+1].y-rt[Et].y,xt.x=wt*1,xt.y=-St,xt.z=wt*0,yt.copy(xt),xt.x+=vt.x,xt.y+=vt.y,xt.z+=vt.z,xt.normalize(),ht.push(xt.x,xt.y,xt.z),vt.copy(yt)}for(let Et=0;Et<=it;Et++){const Rt=st+Et*pt*lt,Tt=Math.sin(Rt),It=Math.cos(Rt);for(let At=0;At<=rt.length-1;At++){mt.x=rt[At].x*Tt,mt.y=rt[At].y,mt.z=rt[At].x*It,ut.push(mt.x,mt.y,mt.z),gt.x=Et/it,gt.y=At/(rt.length-1),dt.push(gt.x,gt.y);const Dt=ht[3*At+0]*Tt,jt=ht[3*At+1],Ft=ht[3*At+0]*It;ft.push(Dt,jt,Ft)}}for(let Et=0;Et<it;Et++)for(let Rt=0;Rt<rt.length-1;Rt++){const Tt=Rt+Et*rt.length,It=Tt,At=Tt+rt.length,Dt=Tt+rt.length+1,jt=Tt+1;ct.push(It,At,jt),ct.push(Dt,jt,At)}this.setIndex(ct),this.setAttribute("position",new Float32BufferAttribute(ut,3)),this.setAttribute("uv",new Float32BufferAttribute(dt,2)),this.setAttribute("normal",new Float32BufferAttribute(ft,3))}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new LatheGeometry(rt.points,rt.segments,rt.phiStart,rt.phiLength)}}class CapsuleGeometry extends LatheGeometry{constructor(rt=1,it=1,st=4,lt=8){const ct=new Path;ct.absarc(0,-it/2,rt,Math.PI*1.5,0),ct.absarc(0,it/2,rt,0,Math.PI*.5),super(ct.getPoints(st),lt),this.type="CapsuleGeometry",this.parameters={radius:rt,length:it,capSegments:st,radialSegments:lt}}static fromJSON(rt){return new CapsuleGeometry(rt.radius,rt.length,rt.capSegments,rt.radialSegments)}}class CircleGeometry extends BufferGeometry{constructor(rt=1,it=32,st=0,lt=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:rt,segments:it,thetaStart:st,thetaLength:lt},it=Math.max(3,it);const ct=[],ut=[],dt=[],ht=[],ft=new Vector3,pt=new Vector2;ut.push(0,0,0),dt.push(0,0,1),ht.push(.5,.5);for(let mt=0,gt=3;mt<=it;mt++,gt+=3){const xt=st+mt/it*lt;ft.x=rt*Math.cos(xt),ft.y=rt*Math.sin(xt),ut.push(ft.x,ft.y,ft.z),dt.push(0,0,1),pt.x=(ut[gt]/rt+1)/2,pt.y=(ut[gt+1]/rt+1)/2,ht.push(pt.x,pt.y)}for(let mt=1;mt<=it;mt++)ct.push(mt,mt+1,0);this.setIndex(ct),this.setAttribute("position",new Float32BufferAttribute(ut,3)),this.setAttribute("normal",new Float32BufferAttribute(dt,3)),this.setAttribute("uv",new Float32BufferAttribute(ht,2))}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new CircleGeometry(rt.radius,rt.segments,rt.thetaStart,rt.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(rt=1,it=1,st=1,lt=32,ct=1,ut=!1,dt=0,ht=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:rt,radiusBottom:it,height:st,radialSegments:lt,heightSegments:ct,openEnded:ut,thetaStart:dt,thetaLength:ht};const ft=this;lt=Math.floor(lt),ct=Math.floor(ct);const pt=[],mt=[],gt=[],xt=[];let yt=0;const vt=[],St=st/2;let wt=0;Et(),ut===!1&&(rt>0&&Rt(!0),it>0&&Rt(!1)),this.setIndex(pt),this.setAttribute("position",new Float32BufferAttribute(mt,3)),this.setAttribute("normal",new Float32BufferAttribute(gt,3)),this.setAttribute("uv",new Float32BufferAttribute(xt,2));function Et(){const Tt=new Vector3,It=new Vector3;let At=0;const Dt=(it-rt)/st;for(let jt=0;jt<=ct;jt++){const Ft=[],Lt=jt/ct,Mt=Lt*(it-rt)+rt;for(let Ot=0;Ot<=lt;Ot++){const Nt=Ot/lt,$t=Nt*ht+dt,Vt=Math.sin($t),Ut=Math.cos($t);It.x=Mt*Vt,It.y=-Lt*st+St,It.z=Mt*Ut,mt.push(It.x,It.y,It.z),Tt.set(Vt,Dt,Ut).normalize(),gt.push(Tt.x,Tt.y,Tt.z),xt.push(Nt,1-Lt),Ft.push(yt++)}vt.push(Ft)}for(let jt=0;jt<lt;jt++)for(let Ft=0;Ft<ct;Ft++){const Lt=vt[Ft][jt],Mt=vt[Ft+1][jt],Ot=vt[Ft+1][jt+1],Nt=vt[Ft][jt+1];pt.push(Lt,Mt,Nt),pt.push(Mt,Ot,Nt),At+=6}ft.addGroup(wt,At,0),wt+=At}function Rt(Tt){const It=yt,At=new Vector2,Dt=new Vector3;let jt=0;const Ft=Tt===!0?rt:it,Lt=Tt===!0?1:-1;for(let Ot=1;Ot<=lt;Ot++)mt.push(0,St*Lt,0),gt.push(0,Lt,0),xt.push(.5,.5),yt++;const Mt=yt;for(let Ot=0;Ot<=lt;Ot++){const $t=Ot/lt*ht+dt,Vt=Math.cos($t),Ut=Math.sin($t);Dt.x=Ft*Ut,Dt.y=St*Lt,Dt.z=Ft*Vt,mt.push(Dt.x,Dt.y,Dt.z),gt.push(0,Lt,0),At.x=Vt*.5+.5,At.y=Ut*.5*Lt+.5,xt.push(At.x,At.y),yt++}for(let Ot=0;Ot<lt;Ot++){const Nt=It+Ot,$t=Mt+Ot;Tt===!0?pt.push($t,$t+1,Nt):pt.push($t+1,$t,Nt),jt+=3}ft.addGroup(wt,jt,Tt===!0?1:2),wt+=jt}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new CylinderGeometry(rt.radiusTop,rt.radiusBottom,rt.height,rt.radialSegments,rt.heightSegments,rt.openEnded,rt.thetaStart,rt.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(rt=1,it=1,st=32,lt=1,ct=!1,ut=0,dt=Math.PI*2){super(0,rt,it,st,lt,ct,ut,dt),this.type="ConeGeometry",this.parameters={radius:rt,height:it,radialSegments:st,heightSegments:lt,openEnded:ct,thetaStart:ut,thetaLength:dt}}static fromJSON(rt){return new ConeGeometry(rt.radius,rt.height,rt.radialSegments,rt.heightSegments,rt.openEnded,rt.thetaStart,rt.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(rt=[],it=[],st=1,lt=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:rt,indices:it,radius:st,detail:lt};const ct=[],ut=[];dt(lt),ft(st),pt(),this.setAttribute("position",new Float32BufferAttribute(ct,3)),this.setAttribute("normal",new Float32BufferAttribute(ct.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(ut,2)),lt===0?this.computeVertexNormals():this.normalizeNormals();function dt(Et){const Rt=new Vector3,Tt=new Vector3,It=new Vector3;for(let At=0;At<it.length;At+=3)xt(it[At+0],Rt),xt(it[At+1],Tt),xt(it[At+2],It),ht(Rt,Tt,It,Et)}function ht(Et,Rt,Tt,It){const At=It+1,Dt=[];for(let jt=0;jt<=At;jt++){Dt[jt]=[];const Ft=Et.clone().lerp(Tt,jt/At),Lt=Rt.clone().lerp(Tt,jt/At),Mt=At-jt;for(let Ot=0;Ot<=Mt;Ot++)Ot===0&&jt===At?Dt[jt][Ot]=Ft:Dt[jt][Ot]=Ft.clone().lerp(Lt,Ot/Mt)}for(let jt=0;jt<At;jt++)for(let Ft=0;Ft<2*(At-jt)-1;Ft++){const Lt=Math.floor(Ft/2);Ft%2===0?(gt(Dt[jt][Lt+1]),gt(Dt[jt+1][Lt]),gt(Dt[jt][Lt])):(gt(Dt[jt][Lt+1]),gt(Dt[jt+1][Lt+1]),gt(Dt[jt+1][Lt]))}}function ft(Et){const Rt=new Vector3;for(let Tt=0;Tt<ct.length;Tt+=3)Rt.x=ct[Tt+0],Rt.y=ct[Tt+1],Rt.z=ct[Tt+2],Rt.normalize().multiplyScalar(Et),ct[Tt+0]=Rt.x,ct[Tt+1]=Rt.y,ct[Tt+2]=Rt.z}function pt(){const Et=new Vector3;for(let Rt=0;Rt<ct.length;Rt+=3){Et.x=ct[Rt+0],Et.y=ct[Rt+1],Et.z=ct[Rt+2];const Tt=St(Et)/2/Math.PI+.5,It=wt(Et)/Math.PI+.5;ut.push(Tt,1-It)}yt(),mt()}function mt(){for(let Et=0;Et<ut.length;Et+=6){const Rt=ut[Et+0],Tt=ut[Et+2],It=ut[Et+4],At=Math.max(Rt,Tt,It),Dt=Math.min(Rt,Tt,It);At>.9&&Dt<.1&&(Rt<.2&&(ut[Et+0]+=1),Tt<.2&&(ut[Et+2]+=1),It<.2&&(ut[Et+4]+=1))}}function gt(Et){ct.push(Et.x,Et.y,Et.z)}function xt(Et,Rt){const Tt=Et*3;Rt.x=rt[Tt+0],Rt.y=rt[Tt+1],Rt.z=rt[Tt+2]}function yt(){const Et=new Vector3,Rt=new Vector3,Tt=new Vector3,It=new Vector3,At=new Vector2,Dt=new Vector2,jt=new Vector2;for(let Ft=0,Lt=0;Ft<ct.length;Ft+=9,Lt+=6){Et.set(ct[Ft+0],ct[Ft+1],ct[Ft+2]),Rt.set(ct[Ft+3],ct[Ft+4],ct[Ft+5]),Tt.set(ct[Ft+6],ct[Ft+7],ct[Ft+8]),At.set(ut[Lt+0],ut[Lt+1]),Dt.set(ut[Lt+2],ut[Lt+3]),jt.set(ut[Lt+4],ut[Lt+5]),It.copy(Et).add(Rt).add(Tt).divideScalar(3);const Mt=St(It);vt(At,Lt+0,Et,Mt),vt(Dt,Lt+2,Rt,Mt),vt(jt,Lt+4,Tt,Mt)}}function vt(Et,Rt,Tt,It){It<0&&Et.x===1&&(ut[Rt]=Et.x-1),Tt.x===0&&Tt.z===0&&(ut[Rt]=It/2/Math.PI+.5)}function St(Et){return Math.atan2(Et.z,-Et.x)}function wt(Et){return Math.atan2(-Et.y,Math.sqrt(Et.x*Et.x+Et.z*Et.z))}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new PolyhedronGeometry(rt.vertices,rt.indices,rt.radius,rt.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(rt=1,it=0){const st=(1+Math.sqrt(5))/2,lt=1/st,ct=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-lt,-st,0,-lt,st,0,lt,-st,0,lt,st,-lt,-st,0,-lt,st,0,lt,-st,0,lt,st,0,-st,0,-lt,st,0,-lt,-st,0,lt,st,0,lt],ut=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(ct,ut,rt,it),this.type="DodecahedronGeometry",this.parameters={radius:rt,detail:it}}static fromJSON(rt){return new DodecahedronGeometry(rt.radius,rt.detail)}}const _v0=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(rt=null,it=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:rt,thresholdAngle:it},rt!==null){const lt=Math.pow(10,4),ct=Math.cos(DEG2RAD*it),ut=rt.getIndex(),dt=rt.getAttribute("position"),ht=ut?ut.count:dt.count,ft=[0,0,0],pt=["a","b","c"],mt=new Array(3),gt={},xt=[];for(let yt=0;yt<ht;yt+=3){ut?(ft[0]=ut.getX(yt),ft[1]=ut.getX(yt+1),ft[2]=ut.getX(yt+2)):(ft[0]=yt,ft[1]=yt+1,ft[2]=yt+2);const{a:vt,b:St,c:wt}=_triangle;if(vt.fromBufferAttribute(dt,ft[0]),St.fromBufferAttribute(dt,ft[1]),wt.fromBufferAttribute(dt,ft[2]),_triangle.getNormal(_normal),mt[0]=`${Math.round(vt.x*lt)},${Math.round(vt.y*lt)},${Math.round(vt.z*lt)}`,mt[1]=`${Math.round(St.x*lt)},${Math.round(St.y*lt)},${Math.round(St.z*lt)}`,mt[2]=`${Math.round(wt.x*lt)},${Math.round(wt.y*lt)},${Math.round(wt.z*lt)}`,!(mt[0]===mt[1]||mt[1]===mt[2]||mt[2]===mt[0]))for(let Et=0;Et<3;Et++){const Rt=(Et+1)%3,Tt=mt[Et],It=mt[Rt],At=_triangle[pt[Et]],Dt=_triangle[pt[Rt]],jt=`${Tt}_${It}`,Ft=`${It}_${Tt}`;Ft in gt&&gt[Ft]?(_normal.dot(gt[Ft].normal)<=ct&&(xt.push(At.x,At.y,At.z),xt.push(Dt.x,Dt.y,Dt.z)),gt[Ft]=null):jt in gt||(gt[jt]={index0:ft[Et],index1:ft[Rt],normal:_normal.clone()})}}for(const yt in gt)if(gt[yt]){const{index0:vt,index1:St}=gt[yt];_v0.fromBufferAttribute(dt,vt),_v1$1.fromBufferAttribute(dt,St),xt.push(_v0.x,_v0.y,_v0.z),xt.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(xt,3))}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}}class Shape extends Path{constructor(rt){super(rt),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(rt){const it=[];for(let st=0,lt=this.holes.length;st<lt;st++)it[st]=this.holes[st].getPoints(rt);return it}extractPoints(rt){return{shape:this.getPoints(rt),holes:this.getPointsHoles(rt)}}copy(rt){super.copy(rt),this.holes=[];for(let it=0,st=rt.holes.length;it<st;it++){const lt=rt.holes[it];this.holes.push(lt.clone())}return this}toJSON(){const rt=super.toJSON();rt.uuid=this.uuid,rt.holes=[];for(let it=0,st=this.holes.length;it<st;it++){const lt=this.holes[it];rt.holes.push(lt.toJSON())}return rt}fromJSON(rt){super.fromJSON(rt),this.uuid=rt.uuid,this.holes=[];for(let it=0,st=rt.holes.length;it<st;it++){const lt=rt.holes[it];this.holes.push(new Path().fromJSON(lt))}return this}}const Earcut={triangulate:function(nt,rt,it=2){const st=rt&&rt.length,lt=st?rt[0]*it:nt.length;let ct=linkedList(nt,0,lt,it,!0);const ut=[];if(!ct||ct.next===ct.prev)return ut;let dt,ht,ft,pt,mt,gt,xt;if(st&&(ct=eliminateHoles(nt,rt,ct,it)),nt.length>80*it){dt=ft=nt[0],ht=pt=nt[1];for(let yt=it;yt<lt;yt+=it)mt=nt[yt],gt=nt[yt+1],mt<dt&&(dt=mt),gt<ht&&(ht=gt),mt>ft&&(ft=mt),gt>pt&&(pt=gt);xt=Math.max(ft-dt,pt-ht),xt=xt!==0?32767/xt:0}return earcutLinked(ct,ut,it,dt,ht,xt,0),ut}};function linkedList(nt,rt,it,st,lt){let ct,ut;if(lt===signedArea(nt,rt,it,st)>0)for(ct=rt;ct<it;ct+=st)ut=insertNode(ct,nt[ct],nt[ct+1],ut);else for(ct=it-st;ct>=rt;ct-=st)ut=insertNode(ct,nt[ct],nt[ct+1],ut);return ut&&equals(ut,ut.next)&&(removeNode(ut),ut=ut.next),ut}function filterPoints(nt,rt){if(!nt)return nt;rt||(rt=nt);let it=nt,st;do if(st=!1,!it.steiner&&(equals(it,it.next)||area(it.prev,it,it.next)===0)){if(removeNode(it),it=rt=it.prev,it===it.next)break;st=!0}else it=it.next;while(st||it!==rt);return rt}function earcutLinked(nt,rt,it,st,lt,ct,ut){if(!nt)return;!ut&&ct&&indexCurve(nt,st,lt,ct);let dt=nt,ht,ft;for(;nt.prev!==nt.next;){if(ht=nt.prev,ft=nt.next,ct?isEarHashed(nt,st,lt,ct):isEar(nt)){rt.push(ht.i/it|0),rt.push(nt.i/it|0),rt.push(ft.i/it|0),removeNode(nt),nt=ft.next,dt=ft.next;continue}if(nt=ft,nt===dt){ut?ut===1?(nt=cureLocalIntersections(filterPoints(nt),rt,it),earcutLinked(nt,rt,it,st,lt,ct,2)):ut===2&&splitEarcut(nt,rt,it,st,lt,ct):earcutLinked(filterPoints(nt),rt,it,st,lt,ct,1);break}}}function isEar(nt){const rt=nt.prev,it=nt,st=nt.next;if(area(rt,it,st)>=0)return!1;const lt=rt.x,ct=it.x,ut=st.x,dt=rt.y,ht=it.y,ft=st.y,pt=lt<ct?lt<ut?lt:ut:ct<ut?ct:ut,mt=dt<ht?dt<ft?dt:ft:ht<ft?ht:ft,gt=lt>ct?lt>ut?lt:ut:ct>ut?ct:ut,xt=dt>ht?dt>ft?dt:ft:ht>ft?ht:ft;let yt=st.next;for(;yt!==rt;){if(yt.x>=pt&&yt.x<=gt&&yt.y>=mt&&yt.y<=xt&&pointInTriangle(lt,dt,ct,ht,ut,ft,yt.x,yt.y)&&area(yt.prev,yt,yt.next)>=0)return!1;yt=yt.next}return!0}function isEarHashed(nt,rt,it,st){const lt=nt.prev,ct=nt,ut=nt.next;if(area(lt,ct,ut)>=0)return!1;const dt=lt.x,ht=ct.x,ft=ut.x,pt=lt.y,mt=ct.y,gt=ut.y,xt=dt<ht?dt<ft?dt:ft:ht<ft?ht:ft,yt=pt<mt?pt<gt?pt:gt:mt<gt?mt:gt,vt=dt>ht?dt>ft?dt:ft:ht>ft?ht:ft,St=pt>mt?pt>gt?pt:gt:mt>gt?mt:gt,wt=zOrder(xt,yt,rt,it,st),Et=zOrder(vt,St,rt,it,st);let Rt=nt.prevZ,Tt=nt.nextZ;for(;Rt&&Rt.z>=wt&&Tt&&Tt.z<=Et;){if(Rt.x>=xt&&Rt.x<=vt&&Rt.y>=yt&&Rt.y<=St&&Rt!==lt&&Rt!==ut&&pointInTriangle(dt,pt,ht,mt,ft,gt,Rt.x,Rt.y)&&area(Rt.prev,Rt,Rt.next)>=0||(Rt=Rt.prevZ,Tt.x>=xt&&Tt.x<=vt&&Tt.y>=yt&&Tt.y<=St&&Tt!==lt&&Tt!==ut&&pointInTriangle(dt,pt,ht,mt,ft,gt,Tt.x,Tt.y)&&area(Tt.prev,Tt,Tt.next)>=0))return!1;Tt=Tt.nextZ}for(;Rt&&Rt.z>=wt;){if(Rt.x>=xt&&Rt.x<=vt&&Rt.y>=yt&&Rt.y<=St&&Rt!==lt&&Rt!==ut&&pointInTriangle(dt,pt,ht,mt,ft,gt,Rt.x,Rt.y)&&area(Rt.prev,Rt,Rt.next)>=0)return!1;Rt=Rt.prevZ}for(;Tt&&Tt.z<=Et;){if(Tt.x>=xt&&Tt.x<=vt&&Tt.y>=yt&&Tt.y<=St&&Tt!==lt&&Tt!==ut&&pointInTriangle(dt,pt,ht,mt,ft,gt,Tt.x,Tt.y)&&area(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.nextZ}return!0}function cureLocalIntersections(nt,rt,it){let st=nt;do{const lt=st.prev,ct=st.next.next;!equals(lt,ct)&&intersects(lt,st,st.next,ct)&&locallyInside(lt,ct)&&locallyInside(ct,lt)&&(rt.push(lt.i/it|0),rt.push(st.i/it|0),rt.push(ct.i/it|0),removeNode(st),removeNode(st.next),st=nt=ct),st=st.next}while(st!==nt);return filterPoints(st)}function splitEarcut(nt,rt,it,st,lt,ct){let ut=nt;do{let dt=ut.next.next;for(;dt!==ut.prev;){if(ut.i!==dt.i&&isValidDiagonal(ut,dt)){let ht=splitPolygon(ut,dt);ut=filterPoints(ut,ut.next),ht=filterPoints(ht,ht.next),earcutLinked(ut,rt,it,st,lt,ct,0),earcutLinked(ht,rt,it,st,lt,ct,0);return}dt=dt.next}ut=ut.next}while(ut!==nt)}function eliminateHoles(nt,rt,it,st){const lt=[];let ct,ut,dt,ht,ft;for(ct=0,ut=rt.length;ct<ut;ct++)dt=rt[ct]*st,ht=ct<ut-1?rt[ct+1]*st:nt.length,ft=linkedList(nt,dt,ht,st,!1),ft===ft.next&&(ft.steiner=!0),lt.push(getLeftmost(ft));for(lt.sort(compareX),ct=0;ct<lt.length;ct++)it=eliminateHole(lt[ct],it);return it}function compareX(nt,rt){return nt.x-rt.x}function eliminateHole(nt,rt){const it=findHoleBridge(nt,rt);if(!it)return rt;const st=splitPolygon(it,nt);return filterPoints(st,st.next),filterPoints(it,it.next)}function findHoleBridge(nt,rt){let it=rt,st=-1/0,lt;const ct=nt.x,ut=nt.y;do{if(ut<=it.y&&ut>=it.next.y&&it.next.y!==it.y){const gt=it.x+(ut-it.y)*(it.next.x-it.x)/(it.next.y-it.y);if(gt<=ct&&gt>st&&(st=gt,lt=it.x<it.next.x?it:it.next,gt===ct))return lt}it=it.next}while(it!==rt);if(!lt)return null;const dt=lt,ht=lt.x,ft=lt.y;let pt=1/0,mt;it=lt;do ct>=it.x&&it.x>=ht&&ct!==it.x&&pointInTriangle(ut<ft?ct:st,ut,ht,ft,ut<ft?st:ct,ut,it.x,it.y)&&(mt=Math.abs(ut-it.y)/(ct-it.x),locallyInside(it,nt)&&(mt<pt||mt===pt&&(it.x>lt.x||it.x===lt.x&&sectorContainsSector(lt,it)))&&(lt=it,pt=mt)),it=it.next;while(it!==dt);return lt}function sectorContainsSector(nt,rt){return area(nt.prev,nt,rt.prev)<0&&area(rt.next,nt,nt.next)<0}function indexCurve(nt,rt,it,st){let lt=nt;do lt.z===0&&(lt.z=zOrder(lt.x,lt.y,rt,it,st)),lt.prevZ=lt.prev,lt.nextZ=lt.next,lt=lt.next;while(lt!==nt);lt.prevZ.nextZ=null,lt.prevZ=null,sortLinked(lt)}function sortLinked(nt){let rt,it,st,lt,ct,ut,dt,ht,ft=1;do{for(it=nt,nt=null,ct=null,ut=0;it;){for(ut++,st=it,dt=0,rt=0;rt<ft&&(dt++,st=st.nextZ,!!st);rt++);for(ht=ft;dt>0||ht>0&&st;)dt!==0&&(ht===0||!st||it.z<=st.z)?(lt=it,it=it.nextZ,dt--):(lt=st,st=st.nextZ,ht--),ct?ct.nextZ=lt:nt=lt,lt.prevZ=ct,ct=lt;it=st}ct.nextZ=null,ft*=2}while(ut>1);return nt}function zOrder(nt,rt,it,st,lt){return nt=(nt-it)*lt|0,rt=(rt-st)*lt|0,nt=(nt|nt<<8)&16711935,nt=(nt|nt<<4)&252645135,nt=(nt|nt<<2)&858993459,nt=(nt|nt<<1)&1431655765,rt=(rt|rt<<8)&16711935,rt=(rt|rt<<4)&252645135,rt=(rt|rt<<2)&858993459,rt=(rt|rt<<1)&1431655765,nt|rt<<1}function getLeftmost(nt){let rt=nt,it=nt;do(rt.x<it.x||rt.x===it.x&&rt.y<it.y)&&(it=rt),rt=rt.next;while(rt!==nt);return it}function pointInTriangle(nt,rt,it,st,lt,ct,ut,dt){return(lt-ut)*(rt-dt)>=(nt-ut)*(ct-dt)&&(nt-ut)*(st-dt)>=(it-ut)*(rt-dt)&&(it-ut)*(ct-dt)>=(lt-ut)*(st-dt)}function isValidDiagonal(nt,rt){return nt.next.i!==rt.i&&nt.prev.i!==rt.i&&!intersectsPolygon(nt,rt)&&(locallyInside(nt,rt)&&locallyInside(rt,nt)&&middleInside(nt,rt)&&(area(nt.prev,nt,rt.prev)||area(nt,rt.prev,rt))||equals(nt,rt)&&area(nt.prev,nt,nt.next)>0&&area(rt.prev,rt,rt.next)>0)}function area(nt,rt,it){return(rt.y-nt.y)*(it.x-rt.x)-(rt.x-nt.x)*(it.y-rt.y)}function equals(nt,rt){return nt.x===rt.x&&nt.y===rt.y}function intersects(nt,rt,it,st){const lt=sign(area(nt,rt,it)),ct=sign(area(nt,rt,st)),ut=sign(area(it,st,nt)),dt=sign(area(it,st,rt));return!!(lt!==ct&&ut!==dt||lt===0&&onSegment(nt,it,rt)||ct===0&&onSegment(nt,st,rt)||ut===0&&onSegment(it,nt,st)||dt===0&&onSegment(it,rt,st))}function onSegment(nt,rt,it){return rt.x<=Math.max(nt.x,it.x)&&rt.x>=Math.min(nt.x,it.x)&&rt.y<=Math.max(nt.y,it.y)&&rt.y>=Math.min(nt.y,it.y)}function sign(nt){return nt>0?1:nt<0?-1:0}function intersectsPolygon(nt,rt){let it=nt;do{if(it.i!==nt.i&&it.next.i!==nt.i&&it.i!==rt.i&&it.next.i!==rt.i&&intersects(it,it.next,nt,rt))return!0;it=it.next}while(it!==nt);return!1}function locallyInside(nt,rt){return area(nt.prev,nt,nt.next)<0?area(nt,rt,nt.next)>=0&&area(nt,nt.prev,rt)>=0:area(nt,rt,nt.prev)<0||area(nt,nt.next,rt)<0}function middleInside(nt,rt){let it=nt,st=!1;const lt=(nt.x+rt.x)/2,ct=(nt.y+rt.y)/2;do it.y>ct!=it.next.y>ct&&it.next.y!==it.y&&lt<(it.next.x-it.x)*(ct-it.y)/(it.next.y-it.y)+it.x&&(st=!st),it=it.next;while(it!==nt);return st}function splitPolygon(nt,rt){const it=new Node$1(nt.i,nt.x,nt.y),st=new Node$1(rt.i,rt.x,rt.y),lt=nt.next,ct=rt.prev;return nt.next=rt,rt.prev=nt,it.next=lt,lt.prev=it,st.next=it,it.prev=st,ct.next=st,st.prev=ct,st}function insertNode(nt,rt,it,st){const lt=new Node$1(nt,rt,it);return st?(lt.next=st.next,lt.prev=st,st.next.prev=lt,st.next=lt):(lt.prev=lt,lt.next=lt),lt}function removeNode(nt){nt.next.prev=nt.prev,nt.prev.next=nt.next,nt.prevZ&&(nt.prevZ.nextZ=nt.nextZ),nt.nextZ&&(nt.nextZ.prevZ=nt.prevZ)}function Node$1(nt,rt,it){this.i=nt,this.x=rt,this.y=it,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(nt,rt,it,st){let lt=0;for(let ct=rt,ut=it-st;ct<it;ct+=st)lt+=(nt[ut]-nt[ct])*(nt[ct+1]+nt[ut+1]),ut=ct;return lt}class ShapeUtils{static area(rt){const it=rt.length;let st=0;for(let lt=it-1,ct=0;ct<it;lt=ct++)st+=rt[lt].x*rt[ct].y-rt[ct].x*rt[lt].y;return st*.5}static isClockWise(rt){return ShapeUtils.area(rt)<0}static triangulateShape(rt,it){const st=[],lt=[],ct=[];removeDupEndPts(rt),addContour(st,rt);let ut=rt.length;it.forEach(removeDupEndPts);for(let ht=0;ht<it.length;ht++)lt.push(ut),ut+=it[ht].length,addContour(st,it[ht]);const dt=Earcut.triangulate(st,lt);for(let ht=0;ht<dt.length;ht+=3)ct.push(dt.slice(ht,ht+3));return ct}}function removeDupEndPts(nt){const rt=nt.length;rt>2&&nt[rt-1].equals(nt[0])&&nt.pop()}function addContour(nt,rt){for(let it=0;it<rt.length;it++)nt.push(rt[it].x),nt.push(rt[it].y)}class ExtrudeGeometry extends BufferGeometry{constructor(rt=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),it={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:rt,options:it},rt=Array.isArray(rt)?rt:[rt];const st=this,lt=[],ct=[];for(let dt=0,ht=rt.length;dt<ht;dt++){const ft=rt[dt];ut(ft)}this.setAttribute("position",new Float32BufferAttribute(lt,3)),this.setAttribute("uv",new Float32BufferAttribute(ct,2)),this.computeVertexNormals();function ut(dt){const ht=[],ft=it.curveSegments!==void 0?it.curveSegments:12,pt=it.steps!==void 0?it.steps:1,mt=it.depth!==void 0?it.depth:1;let gt=it.bevelEnabled!==void 0?it.bevelEnabled:!0,xt=it.bevelThickness!==void 0?it.bevelThickness:.2,yt=it.bevelSize!==void 0?it.bevelSize:xt-.1,vt=it.bevelOffset!==void 0?it.bevelOffset:0,St=it.bevelSegments!==void 0?it.bevelSegments:3;const wt=it.extrudePath,Et=it.UVGenerator!==void 0?it.UVGenerator:WorldUVGenerator;let Rt,Tt=!1,It,At,Dt,jt;wt&&(Rt=wt.getSpacedPoints(pt),Tt=!0,gt=!1,It=wt.computeFrenetFrames(pt,!1),At=new Vector3,Dt=new Vector3,jt=new Vector3),gt||(St=0,xt=0,yt=0,vt=0);const Ft=dt.extractPoints(ft);let Lt=Ft.shape;const Mt=Ft.holes;if(!ShapeUtils.isClockWise(Lt)){Lt=Lt.reverse();for(let fr=0,Nr=Mt.length;fr<Nr;fr++){const Tr=Mt[fr];ShapeUtils.isClockWise(Tr)&&(Mt[fr]=Tr.reverse())}}const Nt=ShapeUtils.triangulateShape(Lt,Mt),$t=Lt;for(let fr=0,Nr=Mt.length;fr<Nr;fr++){const Tr=Mt[fr];Lt=Lt.concat(Tr)}function Vt(fr,Nr,Tr){return Nr||console.error("THREE.ExtrudeGeometry: vec does not exist"),fr.clone().addScaledVector(Nr,Tr)}const Ut=Lt.length,zt=Nt.length;function Bt(fr,Nr,Tr){let Hr,Vr,mn;const tn=fr.x-Nr.x,er=fr.y-Nr.y,tr=Tr.x-fr.x,vr=Tr.y-fr.y,Fr=tn*tn+er*er,Kr=tn*vr-er*tr;if(Math.abs(Kr)>Number.EPSILON){const qr=Math.sqrt(Fr),pn=Math.sqrt(tr*tr+vr*vr),En=Nr.x-er/qr,Rn=Nr.y+tn/qr,Qn=Tr.x-vr/pn,Ln=Tr.y+tr/pn,ln=((Qn-En)*vr-(Ln-Rn)*tr)/(tn*vr-er*tr);Hr=En+tn*ln-fr.x,Vr=Rn+er*ln-fr.y;const Xn=Hr*Hr+Vr*Vr;if(Xn<=2)return new Vector2(Hr,Vr);mn=Math.sqrt(Xn/2)}else{let qr=!1;tn>Number.EPSILON?tr>Number.EPSILON&&(qr=!0):tn<-Number.EPSILON?tr<-Number.EPSILON&&(qr=!0):Math.sign(er)===Math.sign(vr)&&(qr=!0),qr?(Hr=-er,Vr=tn,mn=Math.sqrt(Fr)):(Hr=tn,Vr=er,mn=Math.sqrt(Fr/2))}return new Vector2(Hr/mn,Vr/mn)}const Ht=[];for(let fr=0,Nr=$t.length,Tr=Nr-1,Hr=fr+1;fr<Nr;fr++,Tr++,Hr++)Tr===Nr&&(Tr=0),Hr===Nr&&(Hr=0),Ht[fr]=Bt($t[fr],$t[Tr],$t[Hr]);const Gt=[];let Xt,Zt=Ht.concat();for(let fr=0,Nr=Mt.length;fr<Nr;fr++){const Tr=Mt[fr];Xt=[];for(let Hr=0,Vr=Tr.length,mn=Vr-1,tn=Hr+1;Hr<Vr;Hr++,mn++,tn++)mn===Vr&&(mn=0),tn===Vr&&(tn=0),Xt[Hr]=Bt(Tr[Hr],Tr[mn],Tr[tn]);Gt.push(Xt),Zt=Zt.concat(Xt)}for(let fr=0;fr<St;fr++){const Nr=fr/St,Tr=xt*Math.cos(Nr*Math.PI/2),Hr=yt*Math.sin(Nr*Math.PI/2)+vt;for(let Vr=0,mn=$t.length;Vr<mn;Vr++){const tn=Vt($t[Vr],Ht[Vr],Hr);Cr(tn.x,tn.y,-Tr)}for(let Vr=0,mn=Mt.length;Vr<mn;Vr++){const tn=Mt[Vr];Xt=Gt[Vr];for(let er=0,tr=tn.length;er<tr;er++){const vr=Vt(tn[er],Xt[er],Hr);Cr(vr.x,vr.y,-Tr)}}}const hr=yt+vt;for(let fr=0;fr<Ut;fr++){const Nr=gt?Vt(Lt[fr],Zt[fr],hr):Lt[fr];Tt?(Dt.copy(It.normals[0]).multiplyScalar(Nr.x),At.copy(It.binormals[0]).multiplyScalar(Nr.y),jt.copy(Rt[0]).add(Dt).add(At),Cr(jt.x,jt.y,jt.z)):Cr(Nr.x,Nr.y,0)}for(let fr=1;fr<=pt;fr++)for(let Nr=0;Nr<Ut;Nr++){const Tr=gt?Vt(Lt[Nr],Zt[Nr],hr):Lt[Nr];Tt?(Dt.copy(It.normals[fr]).multiplyScalar(Tr.x),At.copy(It.binormals[fr]).multiplyScalar(Tr.y),jt.copy(Rt[fr]).add(Dt).add(At),Cr(jt.x,jt.y,jt.z)):Cr(Tr.x,Tr.y,mt/pt*fr)}for(let fr=St-1;fr>=0;fr--){const Nr=fr/St,Tr=xt*Math.cos(Nr*Math.PI/2),Hr=yt*Math.sin(Nr*Math.PI/2)+vt;for(let Vr=0,mn=$t.length;Vr<mn;Vr++){const tn=Vt($t[Vr],Ht[Vr],Hr);Cr(tn.x,tn.y,mt+Tr)}for(let Vr=0,mn=Mt.length;Vr<mn;Vr++){const tn=Mt[Vr];Xt=Gt[Vr];for(let er=0,tr=tn.length;er<tr;er++){const vr=Vt(tn[er],Xt[er],Hr);Tt?Cr(vr.x,vr.y+Rt[pt-1].y,Rt[pt-1].x+Tr):Cr(vr.x,vr.y,mt+Tr)}}}nr(),ir();function nr(){const fr=lt.length/3;if(gt){let Nr=0,Tr=Ut*Nr;for(let Hr=0;Hr<zt;Hr++){const Vr=Nt[Hr];Sr(Vr[2]+Tr,Vr[1]+Tr,Vr[0]+Tr)}Nr=pt+St*2,Tr=Ut*Nr;for(let Hr=0;Hr<zt;Hr++){const Vr=Nt[Hr];Sr(Vr[0]+Tr,Vr[1]+Tr,Vr[2]+Tr)}}else{for(let Nr=0;Nr<zt;Nr++){const Tr=Nt[Nr];Sr(Tr[2],Tr[1],Tr[0])}for(let Nr=0;Nr<zt;Nr++){const Tr=Nt[Nr];Sr(Tr[0]+Ut*pt,Tr[1]+Ut*pt,Tr[2]+Ut*pt)}}st.addGroup(fr,lt.length/3-fr,0)}function ir(){const fr=lt.length/3;let Nr=0;yr($t,Nr),Nr+=$t.length;for(let Tr=0,Hr=Mt.length;Tr<Hr;Tr++){const Vr=Mt[Tr];yr(Vr,Nr),Nr+=Vr.length}st.addGroup(fr,lt.length/3-fr,1)}function yr(fr,Nr){let Tr=fr.length;for(;--Tr>=0;){const Hr=Tr;let Vr=Tr-1;Vr<0&&(Vr=fr.length-1);for(let mn=0,tn=pt+St*2;mn<tn;mn++){const er=Ut*mn,tr=Ut*(mn+1),vr=Nr+Hr+er,Fr=Nr+Vr+er,Kr=Nr+Vr+tr,qr=Nr+Hr+tr;xr(vr,Fr,Kr,qr)}}}function Cr(fr,Nr,Tr){ht.push(fr),ht.push(Nr),ht.push(Tr)}function Sr(fr,Nr,Tr){gr(fr),gr(Nr),gr(Tr);const Hr=lt.length/3,Vr=Et.generateTopUV(st,lt,Hr-3,Hr-2,Hr-1);_r(Vr[0]),_r(Vr[1]),_r(Vr[2])}function xr(fr,Nr,Tr,Hr){gr(fr),gr(Nr),gr(Hr),gr(Nr),gr(Tr),gr(Hr);const Vr=lt.length/3,mn=Et.generateSideWallUV(st,lt,Vr-6,Vr-3,Vr-2,Vr-1);_r(mn[0]),_r(mn[1]),_r(mn[3]),_r(mn[1]),_r(mn[2]),_r(mn[3])}function gr(fr){lt.push(ht[fr*3+0]),lt.push(ht[fr*3+1]),lt.push(ht[fr*3+2])}function _r(fr){ct.push(fr.x),ct.push(fr.y)}}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}toJSON(){const rt=super.toJSON(),it=this.parameters.shapes,st=this.parameters.options;return toJSON$1(it,st,rt)}static fromJSON(rt,it){const st=[];for(let ct=0,ut=rt.shapes.length;ct<ut;ct++){const dt=it[rt.shapes[ct]];st.push(dt)}const lt=rt.options.extrudePath;return lt!==void 0&&(rt.options.extrudePath=new Curves[lt.type]().fromJSON(lt)),new ExtrudeGeometry(st,rt.options)}}const WorldUVGenerator={generateTopUV:function(nt,rt,it,st,lt){const ct=rt[it*3],ut=rt[it*3+1],dt=rt[st*3],ht=rt[st*3+1],ft=rt[lt*3],pt=rt[lt*3+1];return[new Vector2(ct,ut),new Vector2(dt,ht),new Vector2(ft,pt)]},generateSideWallUV:function(nt,rt,it,st,lt,ct){const ut=rt[it*3],dt=rt[it*3+1],ht=rt[it*3+2],ft=rt[st*3],pt=rt[st*3+1],mt=rt[st*3+2],gt=rt[lt*3],xt=rt[lt*3+1],yt=rt[lt*3+2],vt=rt[ct*3],St=rt[ct*3+1],wt=rt[ct*3+2];return Math.abs(dt-pt)<Math.abs(ut-ft)?[new Vector2(ut,1-ht),new Vector2(ft,1-mt),new Vector2(gt,1-yt),new Vector2(vt,1-wt)]:[new Vector2(dt,1-ht),new Vector2(pt,1-mt),new Vector2(xt,1-yt),new Vector2(St,1-wt)]}};function toJSON$1(nt,rt,it){if(it.shapes=[],Array.isArray(nt))for(let st=0,lt=nt.length;st<lt;st++){const ct=nt[st];it.shapes.push(ct.uuid)}else it.shapes.push(nt.uuid);return it.options=Object.assign({},rt),rt.extrudePath!==void 0&&(it.options.extrudePath=rt.extrudePath.toJSON()),it}class IcosahedronGeometry extends PolyhedronGeometry{constructor(rt=1,it=0){const st=(1+Math.sqrt(5))/2,lt=[-1,st,0,1,st,0,-1,-st,0,1,-st,0,0,-1,st,0,1,st,0,-1,-st,0,1,-st,st,0,-1,st,0,1,-st,0,-1,-st,0,1],ct=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(lt,ct,rt,it),this.type="IcosahedronGeometry",this.parameters={radius:rt,detail:it}}static fromJSON(rt){return new IcosahedronGeometry(rt.radius,rt.detail)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(rt=1,it=0){const st=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],lt=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(st,lt,rt,it),this.type="OctahedronGeometry",this.parameters={radius:rt,detail:it}}static fromJSON(rt){return new OctahedronGeometry(rt.radius,rt.detail)}}class RingGeometry extends BufferGeometry{constructor(rt=.5,it=1,st=32,lt=1,ct=0,ut=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:rt,outerRadius:it,thetaSegments:st,phiSegments:lt,thetaStart:ct,thetaLength:ut},st=Math.max(3,st),lt=Math.max(1,lt);const dt=[],ht=[],ft=[],pt=[];let mt=rt;const gt=(it-rt)/lt,xt=new Vector3,yt=new Vector2;for(let vt=0;vt<=lt;vt++){for(let St=0;St<=st;St++){const wt=ct+St/st*ut;xt.x=mt*Math.cos(wt),xt.y=mt*Math.sin(wt),ht.push(xt.x,xt.y,xt.z),ft.push(0,0,1),yt.x=(xt.x/it+1)/2,yt.y=(xt.y/it+1)/2,pt.push(yt.x,yt.y)}mt+=gt}for(let vt=0;vt<lt;vt++){const St=vt*(st+1);for(let wt=0;wt<st;wt++){const Et=wt+St,Rt=Et,Tt=Et+st+1,It=Et+st+2,At=Et+1;dt.push(Rt,Tt,At),dt.push(Tt,It,At)}}this.setIndex(dt),this.setAttribute("position",new Float32BufferAttribute(ht,3)),this.setAttribute("normal",new Float32BufferAttribute(ft,3)),this.setAttribute("uv",new Float32BufferAttribute(pt,2))}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new RingGeometry(rt.innerRadius,rt.outerRadius,rt.thetaSegments,rt.phiSegments,rt.thetaStart,rt.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(rt=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),it=12){super(),this.type="ShapeGeometry",this.parameters={shapes:rt,curveSegments:it};const st=[],lt=[],ct=[],ut=[];let dt=0,ht=0;if(Array.isArray(rt)===!1)ft(rt);else for(let pt=0;pt<rt.length;pt++)ft(rt[pt]),this.addGroup(dt,ht,pt),dt+=ht,ht=0;this.setIndex(st),this.setAttribute("position",new Float32BufferAttribute(lt,3)),this.setAttribute("normal",new Float32BufferAttribute(ct,3)),this.setAttribute("uv",new Float32BufferAttribute(ut,2));function ft(pt){const mt=lt.length/3,gt=pt.extractPoints(it);let xt=gt.shape;const yt=gt.holes;ShapeUtils.isClockWise(xt)===!1&&(xt=xt.reverse());for(let St=0,wt=yt.length;St<wt;St++){const Et=yt[St];ShapeUtils.isClockWise(Et)===!0&&(yt[St]=Et.reverse())}const vt=ShapeUtils.triangulateShape(xt,yt);for(let St=0,wt=yt.length;St<wt;St++){const Et=yt[St];xt=xt.concat(Et)}for(let St=0,wt=xt.length;St<wt;St++){const Et=xt[St];lt.push(Et.x,Et.y,0),ct.push(0,0,1),ut.push(Et.x,Et.y)}for(let St=0,wt=vt.length;St<wt;St++){const Et=vt[St],Rt=Et[0]+mt,Tt=Et[1]+mt,It=Et[2]+mt;st.push(Rt,Tt,It),ht+=3}}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}toJSON(){const rt=super.toJSON(),it=this.parameters.shapes;return toJSON(it,rt)}static fromJSON(rt,it){const st=[];for(let lt=0,ct=rt.shapes.length;lt<ct;lt++){const ut=it[rt.shapes[lt]];st.push(ut)}return new ShapeGeometry(st,rt.curveSegments)}}function toJSON(nt,rt){if(rt.shapes=[],Array.isArray(nt))for(let it=0,st=nt.length;it<st;it++){const lt=nt[it];rt.shapes.push(lt.uuid)}else rt.shapes.push(nt.uuid);return rt}class SphereGeometry extends BufferGeometry{constructor(rt=1,it=32,st=16,lt=0,ct=Math.PI*2,ut=0,dt=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:rt,widthSegments:it,heightSegments:st,phiStart:lt,phiLength:ct,thetaStart:ut,thetaLength:dt},it=Math.max(3,Math.floor(it)),st=Math.max(2,Math.floor(st));const ht=Math.min(ut+dt,Math.PI);let ft=0;const pt=[],mt=new Vector3,gt=new Vector3,xt=[],yt=[],vt=[],St=[];for(let wt=0;wt<=st;wt++){const Et=[],Rt=wt/st;let Tt=0;wt===0&&ut===0?Tt=.5/it:wt===st&&ht===Math.PI&&(Tt=-.5/it);for(let It=0;It<=it;It++){const At=It/it;mt.x=-rt*Math.cos(lt+At*ct)*Math.sin(ut+Rt*dt),mt.y=rt*Math.cos(ut+Rt*dt),mt.z=rt*Math.sin(lt+At*ct)*Math.sin(ut+Rt*dt),yt.push(mt.x,mt.y,mt.z),gt.copy(mt).normalize(),vt.push(gt.x,gt.y,gt.z),St.push(At+Tt,1-Rt),Et.push(ft++)}pt.push(Et)}for(let wt=0;wt<st;wt++)for(let Et=0;Et<it;Et++){const Rt=pt[wt][Et+1],Tt=pt[wt][Et],It=pt[wt+1][Et],At=pt[wt+1][Et+1];(wt!==0||ut>0)&&xt.push(Rt,Tt,At),(wt!==st-1||ht<Math.PI)&&xt.push(Tt,It,At)}this.setIndex(xt),this.setAttribute("position",new Float32BufferAttribute(yt,3)),this.setAttribute("normal",new Float32BufferAttribute(vt,3)),this.setAttribute("uv",new Float32BufferAttribute(St,2))}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new SphereGeometry(rt.radius,rt.widthSegments,rt.heightSegments,rt.phiStart,rt.phiLength,rt.thetaStart,rt.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(rt=1,it=0){const st=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],lt=[2,1,0,0,3,2,1,3,0,2,3,1];super(st,lt,rt,it),this.type="TetrahedronGeometry",this.parameters={radius:rt,detail:it}}static fromJSON(rt){return new TetrahedronGeometry(rt.radius,rt.detail)}}class TorusGeometry extends BufferGeometry{constructor(rt=1,it=.4,st=12,lt=48,ct=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:rt,tube:it,radialSegments:st,tubularSegments:lt,arc:ct},st=Math.floor(st),lt=Math.floor(lt);const ut=[],dt=[],ht=[],ft=[],pt=new Vector3,mt=new Vector3,gt=new Vector3;for(let xt=0;xt<=st;xt++)for(let yt=0;yt<=lt;yt++){const vt=yt/lt*ct,St=xt/st*Math.PI*2;mt.x=(rt+it*Math.cos(St))*Math.cos(vt),mt.y=(rt+it*Math.cos(St))*Math.sin(vt),mt.z=it*Math.sin(St),dt.push(mt.x,mt.y,mt.z),pt.x=rt*Math.cos(vt),pt.y=rt*Math.sin(vt),gt.subVectors(mt,pt).normalize(),ht.push(gt.x,gt.y,gt.z),ft.push(yt/lt),ft.push(xt/st)}for(let xt=1;xt<=st;xt++)for(let yt=1;yt<=lt;yt++){const vt=(lt+1)*xt+yt-1,St=(lt+1)*(xt-1)+yt-1,wt=(lt+1)*(xt-1)+yt,Et=(lt+1)*xt+yt;ut.push(vt,St,Et),ut.push(St,wt,Et)}this.setIndex(ut),this.setAttribute("position",new Float32BufferAttribute(dt,3)),this.setAttribute("normal",new Float32BufferAttribute(ht,3)),this.setAttribute("uv",new Float32BufferAttribute(ft,2))}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new TorusGeometry(rt.radius,rt.tube,rt.radialSegments,rt.tubularSegments,rt.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(rt=1,it=.4,st=64,lt=8,ct=2,ut=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:rt,tube:it,tubularSegments:st,radialSegments:lt,p:ct,q:ut},st=Math.floor(st),lt=Math.floor(lt);const dt=[],ht=[],ft=[],pt=[],mt=new Vector3,gt=new Vector3,xt=new Vector3,yt=new Vector3,vt=new Vector3,St=new Vector3,wt=new Vector3;for(let Rt=0;Rt<=st;++Rt){const Tt=Rt/st*ct*Math.PI*2;Et(Tt,ct,ut,rt,xt),Et(Tt+.01,ct,ut,rt,yt),St.subVectors(yt,xt),wt.addVectors(yt,xt),vt.crossVectors(St,wt),wt.crossVectors(vt,St),vt.normalize(),wt.normalize();for(let It=0;It<=lt;++It){const At=It/lt*Math.PI*2,Dt=-it*Math.cos(At),jt=it*Math.sin(At);mt.x=xt.x+(Dt*wt.x+jt*vt.x),mt.y=xt.y+(Dt*wt.y+jt*vt.y),mt.z=xt.z+(Dt*wt.z+jt*vt.z),ht.push(mt.x,mt.y,mt.z),gt.subVectors(mt,xt).normalize(),ft.push(gt.x,gt.y,gt.z),pt.push(Rt/st),pt.push(It/lt)}}for(let Rt=1;Rt<=st;Rt++)for(let Tt=1;Tt<=lt;Tt++){const It=(lt+1)*(Rt-1)+(Tt-1),At=(lt+1)*Rt+(Tt-1),Dt=(lt+1)*Rt+Tt,jt=(lt+1)*(Rt-1)+Tt;dt.push(It,At,jt),dt.push(At,Dt,jt)}this.setIndex(dt),this.setAttribute("position",new Float32BufferAttribute(ht,3)),this.setAttribute("normal",new Float32BufferAttribute(ft,3)),this.setAttribute("uv",new Float32BufferAttribute(pt,2));function Et(Rt,Tt,It,At,Dt){const jt=Math.cos(Rt),Ft=Math.sin(Rt),Lt=It/Tt*Rt,Mt=Math.cos(Lt);Dt.x=At*(2+Mt)*.5*jt,Dt.y=At*(2+Mt)*Ft*.5,Dt.z=At*Math.sin(Lt)*.5}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}static fromJSON(rt){return new TorusKnotGeometry(rt.radius,rt.tube,rt.tubularSegments,rt.radialSegments,rt.p,rt.q)}}class TubeGeometry extends BufferGeometry{constructor(rt=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),it=64,st=1,lt=8,ct=!1){super(),this.type="TubeGeometry",this.parameters={path:rt,tubularSegments:it,radius:st,radialSegments:lt,closed:ct};const ut=rt.computeFrenetFrames(it,ct);this.tangents=ut.tangents,this.normals=ut.normals,this.binormals=ut.binormals;const dt=new Vector3,ht=new Vector3,ft=new Vector2;let pt=new Vector3;const mt=[],gt=[],xt=[],yt=[];vt(),this.setIndex(yt),this.setAttribute("position",new Float32BufferAttribute(mt,3)),this.setAttribute("normal",new Float32BufferAttribute(gt,3)),this.setAttribute("uv",new Float32BufferAttribute(xt,2));function vt(){for(let Rt=0;Rt<it;Rt++)St(Rt);St(ct===!1?it:0),Et(),wt()}function St(Rt){pt=rt.getPointAt(Rt/it,pt);const Tt=ut.normals[Rt],It=ut.binormals[Rt];for(let At=0;At<=lt;At++){const Dt=At/lt*Math.PI*2,jt=Math.sin(Dt),Ft=-Math.cos(Dt);ht.x=Ft*Tt.x+jt*It.x,ht.y=Ft*Tt.y+jt*It.y,ht.z=Ft*Tt.z+jt*It.z,ht.normalize(),gt.push(ht.x,ht.y,ht.z),dt.x=pt.x+st*ht.x,dt.y=pt.y+st*ht.y,dt.z=pt.z+st*ht.z,mt.push(dt.x,dt.y,dt.z)}}function wt(){for(let Rt=1;Rt<=it;Rt++)for(let Tt=1;Tt<=lt;Tt++){const It=(lt+1)*(Rt-1)+(Tt-1),At=(lt+1)*Rt+(Tt-1),Dt=(lt+1)*Rt+Tt,jt=(lt+1)*(Rt-1)+Tt;yt.push(It,At,jt),yt.push(At,Dt,jt)}}function Et(){for(let Rt=0;Rt<=it;Rt++)for(let Tt=0;Tt<=lt;Tt++)ft.x=Rt/it,ft.y=Tt/lt,xt.push(ft.x,ft.y)}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}toJSON(){const rt=super.toJSON();return rt.path=this.parameters.path.toJSON(),rt}static fromJSON(rt){return new TubeGeometry(new Curves[rt.path.type]().fromJSON(rt.path),rt.tubularSegments,rt.radius,rt.radialSegments,rt.closed)}}class WireframeGeometry extends BufferGeometry{constructor(rt=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:rt},rt!==null){const it=[],st=new Set,lt=new Vector3,ct=new Vector3;if(rt.index!==null){const ut=rt.attributes.position,dt=rt.index;let ht=rt.groups;ht.length===0&&(ht=[{start:0,count:dt.count,materialIndex:0}]);for(let ft=0,pt=ht.length;ft<pt;++ft){const mt=ht[ft],gt=mt.start,xt=mt.count;for(let yt=gt,vt=gt+xt;yt<vt;yt+=3)for(let St=0;St<3;St++){const wt=dt.getX(yt+St),Et=dt.getX(yt+(St+1)%3);lt.fromBufferAttribute(ut,wt),ct.fromBufferAttribute(ut,Et),isUniqueEdge(lt,ct,st)===!0&&(it.push(lt.x,lt.y,lt.z),it.push(ct.x,ct.y,ct.z))}}}else{const ut=rt.attributes.position;for(let dt=0,ht=ut.count/3;dt<ht;dt++)for(let ft=0;ft<3;ft++){const pt=3*dt+ft,mt=3*dt+(ft+1)%3;lt.fromBufferAttribute(ut,pt),ct.fromBufferAttribute(ut,mt),isUniqueEdge(lt,ct,st)===!0&&(it.push(lt.x,lt.y,lt.z),it.push(ct.x,ct.y,ct.z))}}this.setAttribute("position",new Float32BufferAttribute(it,3))}}copy(rt){return super.copy(rt),this.parameters=Object.assign({},rt.parameters),this}}function isUniqueEdge(nt,rt,it){const st=`${nt.x},${nt.y},${nt.z}-${rt.x},${rt.y},${rt.z}`,lt=`${rt.x},${rt.y},${rt.z}-${nt.x},${nt.y},${nt.z}`;return it.has(st)===!0||it.has(lt)===!0?!1:(it.add(st),it.add(lt),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(rt){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.fog=rt.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(rt){super(rt),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(rt){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.defines={STANDARD:""},this.color.copy(rt.color),this.roughness=rt.roughness,this.metalness=rt.metalness,this.map=rt.map,this.lightMap=rt.lightMap,this.lightMapIntensity=rt.lightMapIntensity,this.aoMap=rt.aoMap,this.aoMapIntensity=rt.aoMapIntensity,this.emissive.copy(rt.emissive),this.emissiveMap=rt.emissiveMap,this.emissiveIntensity=rt.emissiveIntensity,this.bumpMap=rt.bumpMap,this.bumpScale=rt.bumpScale,this.normalMap=rt.normalMap,this.normalMapType=rt.normalMapType,this.normalScale.copy(rt.normalScale),this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this.roughnessMap=rt.roughnessMap,this.metalnessMap=rt.metalnessMap,this.alphaMap=rt.alphaMap,this.envMap=rt.envMap,this.envMapIntensity=rt.envMapIntensity,this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this.wireframeLinecap=rt.wireframeLinecap,this.wireframeLinejoin=rt.wireframeLinejoin,this.flatShading=rt.flatShading,this.fog=rt.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(rt){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(it){this.ior=(1+.4*it)/(1-.4*it)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(rt)}get anisotropy(){return this._anisotropy}set anisotropy(rt){this._anisotropy>0!=rt>0&&this.version++,this._anisotropy=rt}get clearcoat(){return this._clearcoat}set clearcoat(rt){this._clearcoat>0!=rt>0&&this.version++,this._clearcoat=rt}get iridescence(){return this._iridescence}set iridescence(rt){this._iridescence>0!=rt>0&&this.version++,this._iridescence=rt}get sheen(){return this._sheen}set sheen(rt){this._sheen>0!=rt>0&&this.version++,this._sheen=rt}get transmission(){return this._transmission}set transmission(rt){this._transmission>0!=rt>0&&this.version++,this._transmission=rt}copy(rt){return super.copy(rt),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=rt.anisotropy,this.anisotropyRotation=rt.anisotropyRotation,this.anisotropyMap=rt.anisotropyMap,this.clearcoat=rt.clearcoat,this.clearcoatMap=rt.clearcoatMap,this.clearcoatRoughness=rt.clearcoatRoughness,this.clearcoatRoughnessMap=rt.clearcoatRoughnessMap,this.clearcoatNormalMap=rt.clearcoatNormalMap,this.clearcoatNormalScale.copy(rt.clearcoatNormalScale),this.ior=rt.ior,this.iridescence=rt.iridescence,this.iridescenceMap=rt.iridescenceMap,this.iridescenceIOR=rt.iridescenceIOR,this.iridescenceThicknessRange=[...rt.iridescenceThicknessRange],this.iridescenceThicknessMap=rt.iridescenceThicknessMap,this.sheen=rt.sheen,this.sheenColor.copy(rt.sheenColor),this.sheenColorMap=rt.sheenColorMap,this.sheenRoughness=rt.sheenRoughness,this.sheenRoughnessMap=rt.sheenRoughnessMap,this.transmission=rt.transmission,this.transmissionMap=rt.transmissionMap,this.thickness=rt.thickness,this.thicknessMap=rt.thicknessMap,this.attenuationDistance=rt.attenuationDistance,this.attenuationColor.copy(rt.attenuationColor),this.specularIntensity=rt.specularIntensity,this.specularIntensityMap=rt.specularIntensityMap,this.specularColor.copy(rt.specularColor),this.specularColorMap=rt.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(rt){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.specular.copy(rt.specular),this.shininess=rt.shininess,this.map=rt.map,this.lightMap=rt.lightMap,this.lightMapIntensity=rt.lightMapIntensity,this.aoMap=rt.aoMap,this.aoMapIntensity=rt.aoMapIntensity,this.emissive.copy(rt.emissive),this.emissiveMap=rt.emissiveMap,this.emissiveIntensity=rt.emissiveIntensity,this.bumpMap=rt.bumpMap,this.bumpScale=rt.bumpScale,this.normalMap=rt.normalMap,this.normalMapType=rt.normalMapType,this.normalScale.copy(rt.normalScale),this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this.specularMap=rt.specularMap,this.alphaMap=rt.alphaMap,this.envMap=rt.envMap,this.combine=rt.combine,this.reflectivity=rt.reflectivity,this.refractionRatio=rt.refractionRatio,this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this.wireframeLinecap=rt.wireframeLinecap,this.wireframeLinejoin=rt.wireframeLinejoin,this.flatShading=rt.flatShading,this.fog=rt.fog,this}}class MeshToonMaterial extends Material{constructor(rt){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.map=rt.map,this.gradientMap=rt.gradientMap,this.lightMap=rt.lightMap,this.lightMapIntensity=rt.lightMapIntensity,this.aoMap=rt.aoMap,this.aoMapIntensity=rt.aoMapIntensity,this.emissive.copy(rt.emissive),this.emissiveMap=rt.emissiveMap,this.emissiveIntensity=rt.emissiveIntensity,this.bumpMap=rt.bumpMap,this.bumpScale=rt.bumpScale,this.normalMap=rt.normalMap,this.normalMapType=rt.normalMapType,this.normalScale.copy(rt.normalScale),this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this.alphaMap=rt.alphaMap,this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this.wireframeLinecap=rt.wireframeLinecap,this.wireframeLinejoin=rt.wireframeLinejoin,this.fog=rt.fog,this}}class MeshNormalMaterial extends Material{constructor(rt){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(rt)}copy(rt){return super.copy(rt),this.bumpMap=rt.bumpMap,this.bumpScale=rt.bumpScale,this.normalMap=rt.normalMap,this.normalMapType=rt.normalMapType,this.normalScale.copy(rt.normalScale),this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this.flatShading=rt.flatShading,this}}class MeshLambertMaterial extends Material{constructor(rt){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.color.copy(rt.color),this.map=rt.map,this.lightMap=rt.lightMap,this.lightMapIntensity=rt.lightMapIntensity,this.aoMap=rt.aoMap,this.aoMapIntensity=rt.aoMapIntensity,this.emissive.copy(rt.emissive),this.emissiveMap=rt.emissiveMap,this.emissiveIntensity=rt.emissiveIntensity,this.bumpMap=rt.bumpMap,this.bumpScale=rt.bumpScale,this.normalMap=rt.normalMap,this.normalMapType=rt.normalMapType,this.normalScale.copy(rt.normalScale),this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this.specularMap=rt.specularMap,this.alphaMap=rt.alphaMap,this.envMap=rt.envMap,this.combine=rt.combine,this.reflectivity=rt.reflectivity,this.refractionRatio=rt.refractionRatio,this.wireframe=rt.wireframe,this.wireframeLinewidth=rt.wireframeLinewidth,this.wireframeLinecap=rt.wireframeLinecap,this.wireframeLinejoin=rt.wireframeLinejoin,this.flatShading=rt.flatShading,this.fog=rt.fog,this}}class MeshMatcapMaterial extends Material{constructor(rt){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(rt)}copy(rt){return super.copy(rt),this.defines={MATCAP:""},this.color.copy(rt.color),this.matcap=rt.matcap,this.map=rt.map,this.bumpMap=rt.bumpMap,this.bumpScale=rt.bumpScale,this.normalMap=rt.normalMap,this.normalMapType=rt.normalMapType,this.normalScale.copy(rt.normalScale),this.displacementMap=rt.displacementMap,this.displacementScale=rt.displacementScale,this.displacementBias=rt.displacementBias,this.alphaMap=rt.alphaMap,this.flatShading=rt.flatShading,this.fog=rt.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(rt){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(rt)}copy(rt){return super.copy(rt),this.scale=rt.scale,this.dashSize=rt.dashSize,this.gapSize=rt.gapSize,this}}function convertArray(nt,rt,it){return!nt||!it&&nt.constructor===rt?nt:typeof rt.BYTES_PER_ELEMENT=="number"?new rt(nt):Array.prototype.slice.call(nt)}function isTypedArray(nt){return ArrayBuffer.isView(nt)&&!(nt instanceof DataView)}function getKeyframeOrder(nt){function rt(lt,ct){return nt[lt]-nt[ct]}const it=nt.length,st=new Array(it);for(let lt=0;lt!==it;++lt)st[lt]=lt;return st.sort(rt),st}function sortedArray(nt,rt,it){const st=nt.length,lt=new nt.constructor(st);for(let ct=0,ut=0;ut!==st;++ct){const dt=it[ct]*rt;for(let ht=0;ht!==rt;++ht)lt[ut++]=nt[dt+ht]}return lt}function flattenJSON(nt,rt,it,st){let lt=1,ct=nt[0];for(;ct!==void 0&&ct[st]===void 0;)ct=nt[lt++];if(ct===void 0)return;let ut=ct[st];if(ut!==void 0)if(Array.isArray(ut))do ut=ct[st],ut!==void 0&&(rt.push(ct.time),it.push.apply(it,ut)),ct=nt[lt++];while(ct!==void 0);else if(ut.toArray!==void 0)do ut=ct[st],ut!==void 0&&(rt.push(ct.time),ut.toArray(it,it.length)),ct=nt[lt++];while(ct!==void 0);else do ut=ct[st],ut!==void 0&&(rt.push(ct.time),it.push(ut)),ct=nt[lt++];while(ct!==void 0)}function subclip(nt,rt,it,st,lt=30){const ct=nt.clone();ct.name=rt;const ut=[];for(let ht=0;ht<ct.tracks.length;++ht){const ft=ct.tracks[ht],pt=ft.getValueSize(),mt=[],gt=[];for(let xt=0;xt<ft.times.length;++xt){const yt=ft.times[xt]*lt;if(!(yt<it||yt>=st)){mt.push(ft.times[xt]);for(let vt=0;vt<pt;++vt)gt.push(ft.values[xt*pt+vt])}}mt.length!==0&&(ft.times=convertArray(mt,ft.times.constructor),ft.values=convertArray(gt,ft.values.constructor),ut.push(ft))}ct.tracks=ut;let dt=1/0;for(let ht=0;ht<ct.tracks.length;++ht)dt>ct.tracks[ht].times[0]&&(dt=ct.tracks[ht].times[0]);for(let ht=0;ht<ct.tracks.length;++ht)ct.tracks[ht].shift(-1*dt);return ct.resetDuration(),ct}function makeClipAdditive(nt,rt=0,it=nt,st=30){st<=0&&(st=30);const lt=it.tracks.length,ct=rt/st;for(let ut=0;ut<lt;++ut){const dt=it.tracks[ut],ht=dt.ValueTypeName;if(ht==="bool"||ht==="string")continue;const ft=nt.tracks.find(function(wt){return wt.name===dt.name&&wt.ValueTypeName===ht});if(ft===void 0)continue;let pt=0;const mt=dt.getValueSize();dt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(pt=mt/3);let gt=0;const xt=ft.getValueSize();ft.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(gt=xt/3);const yt=dt.times.length-1;let vt;if(ct<=dt.times[0]){const wt=pt,Et=mt-pt;vt=dt.values.slice(wt,Et)}else if(ct>=dt.times[yt]){const wt=yt*mt+pt,Et=wt+mt-pt;vt=dt.values.slice(wt,Et)}else{const wt=dt.createInterpolant(),Et=pt,Rt=mt-pt;wt.evaluate(ct),vt=wt.resultBuffer.slice(Et,Rt)}ht==="quaternion"&&new Quaternion().fromArray(vt).normalize().conjugate().toArray(vt);const St=ft.times.length;for(let wt=0;wt<St;++wt){const Et=wt*xt+gt;if(ht==="quaternion")Quaternion.multiplyQuaternionsFlat(ft.values,Et,vt,0,ft.values,Et);else{const Rt=xt-gt*2;for(let Tt=0;Tt<Rt;++Tt)ft.values[Et+Tt]-=vt[Tt]}}}return nt.blendMode=AdditiveAnimationBlendMode,nt}const AnimationUtils={convertArray,isTypedArray,getKeyframeOrder,sortedArray,flattenJSON,subclip,makeClipAdditive};class Interpolant{constructor(rt,it,st,lt){this.parameterPositions=rt,this._cachedIndex=0,this.resultBuffer=lt!==void 0?lt:new it.constructor(st),this.sampleValues=it,this.valueSize=st,this.settings=null,this.DefaultSettings_={}}evaluate(rt){const it=this.parameterPositions;let st=this._cachedIndex,lt=it[st],ct=it[st-1];e:{t:{let ut;r:{n:if(!(rt<lt)){for(let dt=st+2;;){if(lt===void 0){if(rt<ct)break n;return st=it.length,this._cachedIndex=st,this.copySampleValue_(st-1)}if(st===dt)break;if(ct=lt,lt=it[++st],rt<lt)break t}ut=it.length;break r}if(!(rt>=ct)){const dt=it[1];rt<dt&&(st=2,ct=dt);for(let ht=st-2;;){if(ct===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(st===ht)break;if(lt=ct,ct=it[--st-1],rt>=ct)break t}ut=st,st=0;break r}break e}for(;st<ut;){const dt=st+ut>>>1;rt<it[dt]?ut=dt:st=dt+1}if(lt=it[st],ct=it[st-1],ct===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(lt===void 0)return st=it.length,this._cachedIndex=st,this.copySampleValue_(st-1)}this._cachedIndex=st,this.intervalChanged_(st,ct,lt)}return this.interpolate_(st,ct,rt,lt)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(rt){const it=this.resultBuffer,st=this.sampleValues,lt=this.valueSize,ct=rt*lt;for(let ut=0;ut!==lt;++ut)it[ut]=st[ct+ut];return it}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(rt,it,st,lt){super(rt,it,st,lt),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(rt,it,st){const lt=this.parameterPositions;let ct=rt-2,ut=rt+1,dt=lt[ct],ht=lt[ut];if(dt===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:ct=rt,dt=2*it-st;break;case WrapAroundEnding:ct=lt.length-2,dt=it+lt[ct]-lt[ct+1];break;default:ct=rt,dt=st}if(ht===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:ut=rt,ht=2*st-it;break;case WrapAroundEnding:ut=1,ht=st+lt[1]-lt[0];break;default:ut=rt-1,ht=it}const ft=(st-it)*.5,pt=this.valueSize;this._weightPrev=ft/(it-dt),this._weightNext=ft/(ht-st),this._offsetPrev=ct*pt,this._offsetNext=ut*pt}interpolate_(rt,it,st,lt){const ct=this.resultBuffer,ut=this.sampleValues,dt=this.valueSize,ht=rt*dt,ft=ht-dt,pt=this._offsetPrev,mt=this._offsetNext,gt=this._weightPrev,xt=this._weightNext,yt=(st-it)/(lt-it),vt=yt*yt,St=vt*yt,wt=-gt*St+2*gt*vt-gt*yt,Et=(1+gt)*St+(-1.5-2*gt)*vt+(-.5+gt)*yt+1,Rt=(-1-xt)*St+(1.5+xt)*vt+.5*yt,Tt=xt*St-xt*vt;for(let It=0;It!==dt;++It)ct[It]=wt*ut[pt+It]+Et*ut[ft+It]+Rt*ut[ht+It]+Tt*ut[mt+It];return ct}}class LinearInterpolant extends Interpolant{constructor(rt,it,st,lt){super(rt,it,st,lt)}interpolate_(rt,it,st,lt){const ct=this.resultBuffer,ut=this.sampleValues,dt=this.valueSize,ht=rt*dt,ft=ht-dt,pt=(st-it)/(lt-it),mt=1-pt;for(let gt=0;gt!==dt;++gt)ct[gt]=ut[ft+gt]*mt+ut[ht+gt]*pt;return ct}}class DiscreteInterpolant extends Interpolant{constructor(rt,it,st,lt){super(rt,it,st,lt)}interpolate_(rt){return this.copySampleValue_(rt-1)}}class KeyframeTrack{constructor(rt,it,st,lt){if(rt===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(it===void 0||it.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+rt);this.name=rt,this.times=convertArray(it,this.TimeBufferType),this.values=convertArray(st,this.ValueBufferType),this.setInterpolation(lt||this.DefaultInterpolation)}static toJSON(rt){const it=rt.constructor;let st;if(it.toJSON!==this.toJSON)st=it.toJSON(rt);else{st={name:rt.name,times:convertArray(rt.times,Array),values:convertArray(rt.values,Array)};const lt=rt.getInterpolation();lt!==rt.DefaultInterpolation&&(st.interpolation=lt)}return st.type=rt.ValueTypeName,st}InterpolantFactoryMethodDiscrete(rt){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),rt)}InterpolantFactoryMethodLinear(rt){return new LinearInterpolant(this.times,this.values,this.getValueSize(),rt)}InterpolantFactoryMethodSmooth(rt){return new CubicInterpolant(this.times,this.values,this.getValueSize(),rt)}setInterpolation(rt){let it;switch(rt){case InterpolateDiscrete:it=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:it=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:it=this.InterpolantFactoryMethodSmooth;break}if(it===void 0){const st="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(rt!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(st);return console.warn("THREE.KeyframeTrack:",st),this}return this.createInterpolant=it,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(rt){if(rt!==0){const it=this.times;for(let st=0,lt=it.length;st!==lt;++st)it[st]+=rt}return this}scale(rt){if(rt!==1){const it=this.times;for(let st=0,lt=it.length;st!==lt;++st)it[st]*=rt}return this}trim(rt,it){const st=this.times,lt=st.length;let ct=0,ut=lt-1;for(;ct!==lt&&st[ct]<rt;)++ct;for(;ut!==-1&&st[ut]>it;)--ut;if(++ut,ct!==0||ut!==lt){ct>=ut&&(ut=Math.max(ut,1),ct=ut-1);const dt=this.getValueSize();this.times=st.slice(ct,ut),this.values=this.values.slice(ct*dt,ut*dt)}return this}validate(){let rt=!0;const it=this.getValueSize();it-Math.floor(it)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),rt=!1);const st=this.times,lt=this.values,ct=st.length;ct===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),rt=!1);let ut=null;for(let dt=0;dt!==ct;dt++){const ht=st[dt];if(typeof ht=="number"&&isNaN(ht)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,dt,ht),rt=!1;break}if(ut!==null&&ut>ht){console.error("THREE.KeyframeTrack: Out of order keys.",this,dt,ht,ut),rt=!1;break}ut=ht}if(lt!==void 0&&isTypedArray(lt))for(let dt=0,ht=lt.length;dt!==ht;++dt){const ft=lt[dt];if(isNaN(ft)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,dt,ft),rt=!1;break}}return rt}optimize(){const rt=this.times.slice(),it=this.values.slice(),st=this.getValueSize(),lt=this.getInterpolation()===InterpolateSmooth,ct=rt.length-1;let ut=1;for(let dt=1;dt<ct;++dt){let ht=!1;const ft=rt[dt],pt=rt[dt+1];if(ft!==pt&&(dt!==1||ft!==rt[0]))if(lt)ht=!0;else{const mt=dt*st,gt=mt-st,xt=mt+st;for(let yt=0;yt!==st;++yt){const vt=it[mt+yt];if(vt!==it[gt+yt]||vt!==it[xt+yt]){ht=!0;break}}}if(ht){if(dt!==ut){rt[ut]=rt[dt];const mt=dt*st,gt=ut*st;for(let xt=0;xt!==st;++xt)it[gt+xt]=it[mt+xt]}++ut}}if(ct>0){rt[ut]=rt[ct];for(let dt=ct*st,ht=ut*st,ft=0;ft!==st;++ft)it[ht+ft]=it[dt+ft];++ut}return ut!==rt.length?(this.times=rt.slice(0,ut),this.values=it.slice(0,ut*st)):(this.times=rt,this.values=it),this}clone(){const rt=this.times.slice(),it=this.values.slice(),st=this.constructor,lt=new st(this.name,rt,it);return lt.createInterpolant=this.createInterpolant,lt}}KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(rt,it,st,lt){super(rt,it,st,lt)}interpolate_(rt,it,st,lt){const ct=this.resultBuffer,ut=this.sampleValues,dt=this.valueSize,ht=(st-it)/(lt-it);let ft=rt*dt;for(let pt=ft+dt;ft!==pt;ft+=4)Quaternion.slerpFlat(ct,0,ut,ft-dt,ut,ft,ht);return ct}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(rt){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),rt)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(rt,it=-1,st,lt=NormalAnimationBlendMode){this.name=rt,this.tracks=st,this.duration=it,this.blendMode=lt,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(rt){const it=[],st=rt.tracks,lt=1/(rt.fps||1);for(let ut=0,dt=st.length;ut!==dt;++ut)it.push(parseKeyframeTrack(st[ut]).scale(lt));const ct=new this(rt.name,rt.duration,it,rt.blendMode);return ct.uuid=rt.uuid,ct}static toJSON(rt){const it=[],st=rt.tracks,lt={name:rt.name,duration:rt.duration,tracks:it,uuid:rt.uuid,blendMode:rt.blendMode};for(let ct=0,ut=st.length;ct!==ut;++ct)it.push(KeyframeTrack.toJSON(st[ct]));return lt}static CreateFromMorphTargetSequence(rt,it,st,lt){const ct=it.length,ut=[];for(let dt=0;dt<ct;dt++){let ht=[],ft=[];ht.push((dt+ct-1)%ct,dt,(dt+1)%ct),ft.push(0,1,0);const pt=getKeyframeOrder(ht);ht=sortedArray(ht,1,pt),ft=sortedArray(ft,1,pt),!lt&&ht[0]===0&&(ht.push(ct),ft.push(ft[0])),ut.push(new NumberKeyframeTrack(".morphTargetInfluences["+it[dt].name+"]",ht,ft).scale(1/st))}return new this(rt,-1,ut)}static findByName(rt,it){let st=rt;if(!Array.isArray(rt)){const lt=rt;st=lt.geometry&&lt.geometry.animations||lt.animations}for(let lt=0;lt<st.length;lt++)if(st[lt].name===it)return st[lt];return null}static CreateClipsFromMorphTargetSequences(rt,it,st){const lt={},ct=/^([\w-]*?)([\d]+)$/;for(let dt=0,ht=rt.length;dt<ht;dt++){const ft=rt[dt],pt=ft.name.match(ct);if(pt&&pt.length>1){const mt=pt[1];let gt=lt[mt];gt||(lt[mt]=gt=[]),gt.push(ft)}}const ut=[];for(const dt in lt)ut.push(this.CreateFromMorphTargetSequence(dt,lt[dt],it,st));return ut}static parseAnimation(rt,it){if(!rt)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const st=function(mt,gt,xt,yt,vt){if(xt.length!==0){const St=[],wt=[];flattenJSON(xt,St,wt,yt),St.length!==0&&vt.push(new mt(gt,St,wt))}},lt=[],ct=rt.name||"default",ut=rt.fps||30,dt=rt.blendMode;let ht=rt.length||-1;const ft=rt.hierarchy||[];for(let mt=0;mt<ft.length;mt++){const gt=ft[mt].keys;if(!(!gt||gt.length===0))if(gt[0].morphTargets){const xt={};let yt;for(yt=0;yt<gt.length;yt++)if(gt[yt].morphTargets)for(let vt=0;vt<gt[yt].morphTargets.length;vt++)xt[gt[yt].morphTargets[vt]]=-1;for(const vt in xt){const St=[],wt=[];for(let Et=0;Et!==gt[yt].morphTargets.length;++Et){const Rt=gt[yt];St.push(Rt.time),wt.push(Rt.morphTarget===vt?1:0)}lt.push(new NumberKeyframeTrack(".morphTargetInfluence["+vt+"]",St,wt))}ht=xt.length*ut}else{const xt=".bones["+it[mt].name+"]";st(VectorKeyframeTrack,xt+".position",gt,"pos",lt),st(QuaternionKeyframeTrack,xt+".quaternion",gt,"rot",lt),st(VectorKeyframeTrack,xt+".scale",gt,"scl",lt)}}return lt.length===0?null:new this(ct,ht,lt,dt)}resetDuration(){const rt=this.tracks;let it=0;for(let st=0,lt=rt.length;st!==lt;++st){const ct=this.tracks[st];it=Math.max(it,ct.times[ct.times.length-1])}return this.duration=it,this}trim(){for(let rt=0;rt<this.tracks.length;rt++)this.tracks[rt].trim(0,this.duration);return this}validate(){let rt=!0;for(let it=0;it<this.tracks.length;it++)rt=rt&&this.tracks[it].validate();return rt}optimize(){for(let rt=0;rt<this.tracks.length;rt++)this.tracks[rt].optimize();return this}clone(){const rt=[];for(let it=0;it<this.tracks.length;it++)rt.push(this.tracks[it].clone());return new this.constructor(this.name,this.duration,rt,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(nt){switch(nt.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+nt)}function parseKeyframeTrack(nt){if(nt.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const rt=getTrackTypeForValueTypeName(nt.type);if(nt.times===void 0){const it=[],st=[];flattenJSON(nt.keys,it,st,"value"),nt.times=it,nt.values=st}return rt.parse!==void 0?rt.parse(nt):new rt(nt.name,nt.times,nt.values,nt.interpolation)}const Cache={enabled:!1,files:{},add:function(nt,rt){this.enabled!==!1&&(this.files[nt]=rt)},get:function(nt){if(this.enabled!==!1)return this.files[nt]},remove:function(nt){delete this.files[nt]},clear:function(){this.files={}}};class LoadingManager{constructor(rt,it,st){const lt=this;let ct=!1,ut=0,dt=0,ht;const ft=[];this.onStart=void 0,this.onLoad=rt,this.onProgress=it,this.onError=st,this.itemStart=function(pt){dt++,ct===!1&&lt.onStart!==void 0&&lt.onStart(pt,ut,dt),ct=!0},this.itemEnd=function(pt){ut++,lt.onProgress!==void 0&&lt.onProgress(pt,ut,dt),ut===dt&&(ct=!1,lt.onLoad!==void 0&&lt.onLoad())},this.itemError=function(pt){lt.onError!==void 0&&lt.onError(pt)},this.resolveURL=function(pt){return ht?ht(pt):pt},this.setURLModifier=function(pt){return ht=pt,this},this.addHandler=function(pt,mt){return ft.push(pt,mt),this},this.removeHandler=function(pt){const mt=ft.indexOf(pt);return mt!==-1&&ft.splice(mt,2),this},this.getHandler=function(pt){for(let mt=0,gt=ft.length;mt<gt;mt+=2){const xt=ft[mt],yt=ft[mt+1];if(xt.global&&(xt.lastIndex=0),xt.test(pt))return yt}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(rt){this.manager=rt!==void 0?rt:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(rt,it){const st=this;return new Promise(function(lt,ct){st.load(rt,lt,it,ct)})}parse(){}setCrossOrigin(rt){return this.crossOrigin=rt,this}setWithCredentials(rt){return this.withCredentials=rt,this}setPath(rt){return this.path=rt,this}setResourcePath(rt){return this.resourcePath=rt,this}setRequestHeader(rt){return this.requestHeader=rt,this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(rt,it){super(rt),this.response=it}}class FileLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){rt===void 0&&(rt=""),this.path!==void 0&&(rt=this.path+rt),rt=this.manager.resolveURL(rt);const ct=Cache.get(rt);if(ct!==void 0)return this.manager.itemStart(rt),setTimeout(()=>{it&&it(ct),this.manager.itemEnd(rt)},0),ct;if(loading[rt]!==void 0){loading[rt].push({onLoad:it,onProgress:st,onError:lt});return}loading[rt]=[],loading[rt].push({onLoad:it,onProgress:st,onError:lt});const ut=new Request(rt,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),dt=this.mimeType,ht=this.responseType;fetch(ut).then(ft=>{if(ft.status===200||ft.status===0){if(ft.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||ft.body===void 0||ft.body.getReader===void 0)return ft;const pt=loading[rt],mt=ft.body.getReader(),gt=ft.headers.get("Content-Length")||ft.headers.get("X-File-Size"),xt=gt?parseInt(gt):0,yt=xt!==0;let vt=0;const St=new ReadableStream({start(wt){Et();function Et(){mt.read().then(({done:Rt,value:Tt})=>{if(Rt)wt.close();else{vt+=Tt.byteLength;const It=new ProgressEvent("progress",{lengthComputable:yt,loaded:vt,total:xt});for(let At=0,Dt=pt.length;At<Dt;At++){const jt=pt[At];jt.onProgress&&jt.onProgress(It)}wt.enqueue(Tt),Et()}})}}});return new Response(St)}else throw new HttpError(`fetch for "${ft.url}" responded with ${ft.status}: ${ft.statusText}`,ft)}).then(ft=>{switch(ht){case"arraybuffer":return ft.arrayBuffer();case"blob":return ft.blob();case"document":return ft.text().then(pt=>new DOMParser().parseFromString(pt,dt));case"json":return ft.json();default:if(dt===void 0)return ft.text();{const mt=/charset="?([^;"\s]*)"?/i.exec(dt),gt=mt&&mt[1]?mt[1].toLowerCase():void 0,xt=new TextDecoder(gt);return ft.arrayBuffer().then(yt=>xt.decode(yt))}}}).then(ft=>{Cache.add(rt,ft);const pt=loading[rt];delete loading[rt];for(let mt=0,gt=pt.length;mt<gt;mt++){const xt=pt[mt];xt.onLoad&&xt.onLoad(ft)}}).catch(ft=>{const pt=loading[rt];if(pt===void 0)throw this.manager.itemError(rt),ft;delete loading[rt];for(let mt=0,gt=pt.length;mt<gt;mt++){const xt=pt[mt];xt.onError&&xt.onError(ft)}this.manager.itemError(rt)}).finally(()=>{this.manager.itemEnd(rt)}),this.manager.itemStart(rt)}setResponseType(rt){return this.responseType=rt,this}setMimeType(rt){return this.mimeType=rt,this}}class AnimationLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=this,ut=new FileLoader(this.manager);ut.setPath(this.path),ut.setRequestHeader(this.requestHeader),ut.setWithCredentials(this.withCredentials),ut.load(rt,function(dt){try{it(ct.parse(JSON.parse(dt)))}catch(ht){lt?lt(ht):console.error(ht),ct.manager.itemError(rt)}},st,lt)}parse(rt){const it=[];for(let st=0;st<rt.length;st++){const lt=AnimationClip.parse(rt[st]);it.push(lt)}return it}}class CompressedTextureLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=this,ut=[],dt=new CompressedTexture,ht=new FileLoader(this.manager);ht.setPath(this.path),ht.setResponseType("arraybuffer"),ht.setRequestHeader(this.requestHeader),ht.setWithCredentials(ct.withCredentials);let ft=0;function pt(mt){ht.load(rt[mt],function(gt){const xt=ct.parse(gt,!0);ut[mt]={width:xt.width,height:xt.height,format:xt.format,mipmaps:xt.mipmaps},ft+=1,ft===6&&(xt.mipmapCount===1&&(dt.minFilter=LinearFilter),dt.image=ut,dt.format=xt.format,dt.needsUpdate=!0,it&&it(dt))},st,lt)}if(Array.isArray(rt))for(let mt=0,gt=rt.length;mt<gt;++mt)pt(mt);else ht.load(rt,function(mt){const gt=ct.parse(mt,!0);if(gt.isCubemap){const xt=gt.mipmaps.length/gt.mipmapCount;for(let yt=0;yt<xt;yt++){ut[yt]={mipmaps:[]};for(let vt=0;vt<gt.mipmapCount;vt++)ut[yt].mipmaps.push(gt.mipmaps[yt*gt.mipmapCount+vt]),ut[yt].format=gt.format,ut[yt].width=gt.width,ut[yt].height=gt.height}dt.image=ut}else dt.image.width=gt.width,dt.image.height=gt.height,dt.mipmaps=gt.mipmaps;gt.mipmapCount===1&&(dt.minFilter=LinearFilter),dt.format=gt.format,dt.needsUpdate=!0,it&&it(dt)},st,lt);return dt}}class ImageLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){this.path!==void 0&&(rt=this.path+rt),rt=this.manager.resolveURL(rt);const ct=this,ut=Cache.get(rt);if(ut!==void 0)return ct.manager.itemStart(rt),setTimeout(function(){it&&it(ut),ct.manager.itemEnd(rt)},0),ut;const dt=createElementNS("img");function ht(){pt(),Cache.add(rt,this),it&&it(this),ct.manager.itemEnd(rt)}function ft(mt){pt(),lt&&lt(mt),ct.manager.itemError(rt),ct.manager.itemEnd(rt)}function pt(){dt.removeEventListener("load",ht,!1),dt.removeEventListener("error",ft,!1)}return dt.addEventListener("load",ht,!1),dt.addEventListener("error",ft,!1),rt.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(dt.crossOrigin=this.crossOrigin),ct.manager.itemStart(rt),dt.src=rt,dt}}class CubeTextureLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=new CubeTexture;ct.colorSpace=SRGBColorSpace;const ut=new ImageLoader(this.manager);ut.setCrossOrigin(this.crossOrigin),ut.setPath(this.path);let dt=0;function ht(ft){ut.load(rt[ft],function(pt){ct.images[ft]=pt,dt++,dt===6&&(ct.needsUpdate=!0,it&&it(ct))},void 0,lt)}for(let ft=0;ft<rt.length;++ft)ht(ft);return ct}}class DataTextureLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=this,ut=new DataTexture,dt=new FileLoader(this.manager);return dt.setResponseType("arraybuffer"),dt.setRequestHeader(this.requestHeader),dt.setPath(this.path),dt.setWithCredentials(ct.withCredentials),dt.load(rt,function(ht){let ft;try{ft=ct.parse(ht)}catch(pt){if(lt!==void 0)lt(pt);else{console.error(pt);return}}ft.image!==void 0?ut.image=ft.image:ft.data!==void 0&&(ut.image.width=ft.width,ut.image.height=ft.height,ut.image.data=ft.data),ut.wrapS=ft.wrapS!==void 0?ft.wrapS:ClampToEdgeWrapping,ut.wrapT=ft.wrapT!==void 0?ft.wrapT:ClampToEdgeWrapping,ut.magFilter=ft.magFilter!==void 0?ft.magFilter:LinearFilter,ut.minFilter=ft.minFilter!==void 0?ft.minFilter:LinearFilter,ut.anisotropy=ft.anisotropy!==void 0?ft.anisotropy:1,ft.colorSpace!==void 0?ut.colorSpace=ft.colorSpace:ft.encoding!==void 0&&(ut.encoding=ft.encoding),ft.flipY!==void 0&&(ut.flipY=ft.flipY),ft.format!==void 0&&(ut.format=ft.format),ft.type!==void 0&&(ut.type=ft.type),ft.mipmaps!==void 0&&(ut.mipmaps=ft.mipmaps,ut.minFilter=LinearMipmapLinearFilter),ft.mipmapCount===1&&(ut.minFilter=LinearFilter),ft.generateMipmaps!==void 0&&(ut.generateMipmaps=ft.generateMipmaps),ut.needsUpdate=!0,it&&it(ut,ft)},st,lt),ut}}class TextureLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=new Texture,ut=new ImageLoader(this.manager);return ut.setCrossOrigin(this.crossOrigin),ut.setPath(this.path),ut.load(rt,function(dt){ct.image=dt,ct.needsUpdate=!0,it!==void 0&&it(ct)},st,lt),ct}}class Light extends Object3D{constructor(rt,it=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(rt),this.intensity=it}dispose(){}copy(rt,it){return super.copy(rt,it),this.color.copy(rt.color),this.intensity=rt.intensity,this}toJSON(rt){const it=super.toJSON(rt);return it.object.color=this.color.getHex(),it.object.intensity=this.intensity,this.groundColor!==void 0&&(it.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(it.object.distance=this.distance),this.angle!==void 0&&(it.object.angle=this.angle),this.decay!==void 0&&(it.object.decay=this.decay),this.penumbra!==void 0&&(it.object.penumbra=this.penumbra),this.shadow!==void 0&&(it.object.shadow=this.shadow.toJSON()),it}}class HemisphereLight extends Light{constructor(rt,it,st){super(rt,st),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color(it)}copy(rt,it){return super.copy(rt,it),this.groundColor.copy(rt.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(rt){this.camera=rt,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(rt){const it=this.camera,st=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(rt.matrixWorld),it.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(rt.target.matrixWorld),it.lookAt(_lookTarget$1),it.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(it.projectionMatrix,it.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),st.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),st.multiply(_projScreenMatrix$1)}getViewport(rt){return this._viewports[rt]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(rt){return this.camera=rt.camera.clone(),this.bias=rt.bias,this.radius=rt.radius,this.mapSize.copy(rt.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const rt={};return this.bias!==0&&(rt.bias=this.bias),this.normalBias!==0&&(rt.normalBias=this.normalBias),this.radius!==1&&(rt.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(rt.mapSize=this.mapSize.toArray()),rt.camera=this.camera.toJSON(!1).object,delete rt.camera.matrix,rt}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(rt){const it=this.camera,st=RAD2DEG*2*rt.angle*this.focus,lt=this.mapSize.width/this.mapSize.height,ct=rt.distance||it.far;(st!==it.fov||lt!==it.aspect||ct!==it.far)&&(it.fov=st,it.aspect=lt,it.far=ct,it.updateProjectionMatrix()),super.updateMatrices(rt)}copy(rt){return super.copy(rt),this.focus=rt.focus,this}}let SpotLight$1=class extends Light{constructor(rt,it,st=0,lt=Math.PI/3,ct=0,ut=2){super(rt,it),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=st,this.angle=lt,this.penumbra=ct,this.decay=ut,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(rt){this.intensity=rt/Math.PI}dispose(){this.shadow.dispose()}copy(rt,it){return super.copy(rt,it),this.distance=rt.distance,this.angle=rt.angle,this.penumbra=rt.penumbra,this.decay=rt.decay,this.target=rt.target.clone(),this.shadow=rt.shadow.clone(),this}};const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(rt,it=0){const st=this.camera,lt=this.matrix,ct=rt.distance||st.far;ct!==st.far&&(st.far=ct,st.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(rt.matrixWorld),st.position.copy(_lightPositionWorld),_lookTarget.copy(st.position),_lookTarget.add(this._cubeDirections[it]),st.up.copy(this._cubeUps[it]),st.lookAt(_lookTarget),st.updateMatrixWorld(),lt.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(st.projectionMatrix,st.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(rt,it,st=0,lt=2){super(rt,it),this.isPointLight=!0,this.type="PointLight",this.distance=st,this.decay=lt,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(rt){this.intensity=rt/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(rt,it){return super.copy(rt,it),this.distance=rt.distance,this.decay=rt.decay,this.shadow=rt.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(rt,it){super(rt,it),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(rt){return super.copy(rt),this.target=rt.target.clone(),this.shadow=rt.shadow.clone(),this}}class AmbientLight extends Light{constructor(rt,it){super(rt,it),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(rt,it,st=10,lt=10){super(rt,it),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=st,this.height=lt}get power(){return this.intensity*this.width*this.height*Math.PI}set power(rt){this.intensity=rt/(this.width*this.height*Math.PI)}copy(rt){return super.copy(rt),this.width=rt.width,this.height=rt.height,this}toJSON(rt){const it=super.toJSON(rt);return it.object.width=this.width,it.object.height=this.height,it}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let rt=0;rt<9;rt++)this.coefficients.push(new Vector3)}set(rt){for(let it=0;it<9;it++)this.coefficients[it].copy(rt[it]);return this}zero(){for(let rt=0;rt<9;rt++)this.coefficients[rt].set(0,0,0);return this}getAt(rt,it){const st=rt.x,lt=rt.y,ct=rt.z,ut=this.coefficients;return it.copy(ut[0]).multiplyScalar(.282095),it.addScaledVector(ut[1],.488603*lt),it.addScaledVector(ut[2],.488603*ct),it.addScaledVector(ut[3],.488603*st),it.addScaledVector(ut[4],1.092548*(st*lt)),it.addScaledVector(ut[5],1.092548*(lt*ct)),it.addScaledVector(ut[6],.315392*(3*ct*ct-1)),it.addScaledVector(ut[7],1.092548*(st*ct)),it.addScaledVector(ut[8],.546274*(st*st-lt*lt)),it}getIrradianceAt(rt,it){const st=rt.x,lt=rt.y,ct=rt.z,ut=this.coefficients;return it.copy(ut[0]).multiplyScalar(.886227),it.addScaledVector(ut[1],2*.511664*lt),it.addScaledVector(ut[2],2*.511664*ct),it.addScaledVector(ut[3],2*.511664*st),it.addScaledVector(ut[4],2*.429043*st*lt),it.addScaledVector(ut[5],2*.429043*lt*ct),it.addScaledVector(ut[6],.743125*ct*ct-.247708),it.addScaledVector(ut[7],2*.429043*st*ct),it.addScaledVector(ut[8],.429043*(st*st-lt*lt)),it}add(rt){for(let it=0;it<9;it++)this.coefficients[it].add(rt.coefficients[it]);return this}addScaledSH(rt,it){for(let st=0;st<9;st++)this.coefficients[st].addScaledVector(rt.coefficients[st],it);return this}scale(rt){for(let it=0;it<9;it++)this.coefficients[it].multiplyScalar(rt);return this}lerp(rt,it){for(let st=0;st<9;st++)this.coefficients[st].lerp(rt.coefficients[st],it);return this}equals(rt){for(let it=0;it<9;it++)if(!this.coefficients[it].equals(rt.coefficients[it]))return!1;return!0}copy(rt){return this.set(rt.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(rt,it=0){const st=this.coefficients;for(let lt=0;lt<9;lt++)st[lt].fromArray(rt,it+lt*3);return this}toArray(rt=[],it=0){const st=this.coefficients;for(let lt=0;lt<9;lt++)st[lt].toArray(rt,it+lt*3);return rt}static getBasisAt(rt,it){const st=rt.x,lt=rt.y,ct=rt.z;it[0]=.282095,it[1]=.488603*lt,it[2]=.488603*ct,it[3]=.488603*st,it[4]=1.092548*st*lt,it[5]=1.092548*lt*ct,it[6]=.315392*(3*ct*ct-1),it[7]=1.092548*st*ct,it[8]=.546274*(st*st-lt*lt)}}class LightProbe extends Light{constructor(rt=new SphericalHarmonics3,it=1){super(void 0,it),this.isLightProbe=!0,this.sh=rt}copy(rt){return super.copy(rt),this.sh.copy(rt.sh),this}fromJSON(rt){return this.intensity=rt.intensity,this.sh.fromArray(rt.sh),this}toJSON(rt){const it=super.toJSON(rt);return it.object.sh=this.sh.toArray(),it}}class MaterialLoader extends Loader{constructor(rt){super(rt),this.textures={}}load(rt,it,st,lt){const ct=this,ut=new FileLoader(ct.manager);ut.setPath(ct.path),ut.setRequestHeader(ct.requestHeader),ut.setWithCredentials(ct.withCredentials),ut.load(rt,function(dt){try{it(ct.parse(JSON.parse(dt)))}catch(ht){lt?lt(ht):console.error(ht),ct.manager.itemError(rt)}},st,lt)}parse(rt){const it=this.textures;function st(ct){return it[ct]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",ct),it[ct]}const lt=MaterialLoader.createMaterialFromType(rt.type);if(rt.uuid!==void 0&&(lt.uuid=rt.uuid),rt.name!==void 0&&(lt.name=rt.name),rt.color!==void 0&&lt.color!==void 0&&lt.color.setHex(rt.color),rt.roughness!==void 0&&(lt.roughness=rt.roughness),rt.metalness!==void 0&&(lt.metalness=rt.metalness),rt.sheen!==void 0&&(lt.sheen=rt.sheen),rt.sheenColor!==void 0&&(lt.sheenColor=new Color().setHex(rt.sheenColor)),rt.sheenRoughness!==void 0&&(lt.sheenRoughness=rt.sheenRoughness),rt.emissive!==void 0&&lt.emissive!==void 0&&lt.emissive.setHex(rt.emissive),rt.specular!==void 0&&lt.specular!==void 0&&lt.specular.setHex(rt.specular),rt.specularIntensity!==void 0&&(lt.specularIntensity=rt.specularIntensity),rt.specularColor!==void 0&&lt.specularColor!==void 0&&lt.specularColor.setHex(rt.specularColor),rt.shininess!==void 0&&(lt.shininess=rt.shininess),rt.clearcoat!==void 0&&(lt.clearcoat=rt.clearcoat),rt.clearcoatRoughness!==void 0&&(lt.clearcoatRoughness=rt.clearcoatRoughness),rt.iridescence!==void 0&&(lt.iridescence=rt.iridescence),rt.iridescenceIOR!==void 0&&(lt.iridescenceIOR=rt.iridescenceIOR),rt.iridescenceThicknessRange!==void 0&&(lt.iridescenceThicknessRange=rt.iridescenceThicknessRange),rt.transmission!==void 0&&(lt.transmission=rt.transmission),rt.thickness!==void 0&&(lt.thickness=rt.thickness),rt.attenuationDistance!==void 0&&(lt.attenuationDistance=rt.attenuationDistance),rt.attenuationColor!==void 0&&lt.attenuationColor!==void 0&&lt.attenuationColor.setHex(rt.attenuationColor),rt.anisotropy!==void 0&&(lt.anisotropy=rt.anisotropy),rt.anisotropyRotation!==void 0&&(lt.anisotropyRotation=rt.anisotropyRotation),rt.fog!==void 0&&(lt.fog=rt.fog),rt.flatShading!==void 0&&(lt.flatShading=rt.flatShading),rt.blending!==void 0&&(lt.blending=rt.blending),rt.combine!==void 0&&(lt.combine=rt.combine),rt.side!==void 0&&(lt.side=rt.side),rt.shadowSide!==void 0&&(lt.shadowSide=rt.shadowSide),rt.opacity!==void 0&&(lt.opacity=rt.opacity),rt.transparent!==void 0&&(lt.transparent=rt.transparent),rt.alphaTest!==void 0&&(lt.alphaTest=rt.alphaTest),rt.alphaHash!==void 0&&(lt.alphaHash=rt.alphaHash),rt.depthFunc!==void 0&&(lt.depthFunc=rt.depthFunc),rt.depthTest!==void 0&&(lt.depthTest=rt.depthTest),rt.depthWrite!==void 0&&(lt.depthWrite=rt.depthWrite),rt.colorWrite!==void 0&&(lt.colorWrite=rt.colorWrite),rt.blendSrc!==void 0&&(lt.blendSrc=rt.blendSrc),rt.blendDst!==void 0&&(lt.blendDst=rt.blendDst),rt.blendEquation!==void 0&&(lt.blendEquation=rt.blendEquation),rt.blendSrcAlpha!==void 0&&(lt.blendSrcAlpha=rt.blendSrcAlpha),rt.blendDstAlpha!==void 0&&(lt.blendDstAlpha=rt.blendDstAlpha),rt.blendEquationAlpha!==void 0&&(lt.blendEquationAlpha=rt.blendEquationAlpha),rt.blendColor!==void 0&&lt.blendColor!==void 0&&lt.blendColor.setHex(rt.blendColor),rt.blendAlpha!==void 0&&(lt.blendAlpha=rt.blendAlpha),rt.stencilWriteMask!==void 0&&(lt.stencilWriteMask=rt.stencilWriteMask),rt.stencilFunc!==void 0&&(lt.stencilFunc=rt.stencilFunc),rt.stencilRef!==void 0&&(lt.stencilRef=rt.stencilRef),rt.stencilFuncMask!==void 0&&(lt.stencilFuncMask=rt.stencilFuncMask),rt.stencilFail!==void 0&&(lt.stencilFail=rt.stencilFail),rt.stencilZFail!==void 0&&(lt.stencilZFail=rt.stencilZFail),rt.stencilZPass!==void 0&&(lt.stencilZPass=rt.stencilZPass),rt.stencilWrite!==void 0&&(lt.stencilWrite=rt.stencilWrite),rt.wireframe!==void 0&&(lt.wireframe=rt.wireframe),rt.wireframeLinewidth!==void 0&&(lt.wireframeLinewidth=rt.wireframeLinewidth),rt.wireframeLinecap!==void 0&&(lt.wireframeLinecap=rt.wireframeLinecap),rt.wireframeLinejoin!==void 0&&(lt.wireframeLinejoin=rt.wireframeLinejoin),rt.rotation!==void 0&&(lt.rotation=rt.rotation),rt.linewidth!==void 0&&(lt.linewidth=rt.linewidth),rt.dashSize!==void 0&&(lt.dashSize=rt.dashSize),rt.gapSize!==void 0&&(lt.gapSize=rt.gapSize),rt.scale!==void 0&&(lt.scale=rt.scale),rt.polygonOffset!==void 0&&(lt.polygonOffset=rt.polygonOffset),rt.polygonOffsetFactor!==void 0&&(lt.polygonOffsetFactor=rt.polygonOffsetFactor),rt.polygonOffsetUnits!==void 0&&(lt.polygonOffsetUnits=rt.polygonOffsetUnits),rt.dithering!==void 0&&(lt.dithering=rt.dithering),rt.alphaToCoverage!==void 0&&(lt.alphaToCoverage=rt.alphaToCoverage),rt.premultipliedAlpha!==void 0&&(lt.premultipliedAlpha=rt.premultipliedAlpha),rt.forceSinglePass!==void 0&&(lt.forceSinglePass=rt.forceSinglePass),rt.visible!==void 0&&(lt.visible=rt.visible),rt.toneMapped!==void 0&&(lt.toneMapped=rt.toneMapped),rt.userData!==void 0&&(lt.userData=rt.userData),rt.vertexColors!==void 0&&(typeof rt.vertexColors=="number"?lt.vertexColors=rt.vertexColors>0:lt.vertexColors=rt.vertexColors),rt.uniforms!==void 0)for(const ct in rt.uniforms){const ut=rt.uniforms[ct];switch(lt.uniforms[ct]={},ut.type){case"t":lt.uniforms[ct].value=st(ut.value);break;case"c":lt.uniforms[ct].value=new Color().setHex(ut.value);break;case"v2":lt.uniforms[ct].value=new Vector2().fromArray(ut.value);break;case"v3":lt.uniforms[ct].value=new Vector3().fromArray(ut.value);break;case"v4":lt.uniforms[ct].value=new Vector4().fromArray(ut.value);break;case"m3":lt.uniforms[ct].value=new Matrix3().fromArray(ut.value);break;case"m4":lt.uniforms[ct].value=new Matrix4().fromArray(ut.value);break;default:lt.uniforms[ct].value=ut.value}}if(rt.defines!==void 0&&(lt.defines=rt.defines),rt.vertexShader!==void 0&&(lt.vertexShader=rt.vertexShader),rt.fragmentShader!==void 0&&(lt.fragmentShader=rt.fragmentShader),rt.glslVersion!==void 0&&(lt.glslVersion=rt.glslVersion),rt.extensions!==void 0)for(const ct in rt.extensions)lt.extensions[ct]=rt.extensions[ct];if(rt.lights!==void 0&&(lt.lights=rt.lights),rt.clipping!==void 0&&(lt.clipping=rt.clipping),rt.size!==void 0&&(lt.size=rt.size),rt.sizeAttenuation!==void 0&&(lt.sizeAttenuation=rt.sizeAttenuation),rt.map!==void 0&&(lt.map=st(rt.map)),rt.matcap!==void 0&&(lt.matcap=st(rt.matcap)),rt.alphaMap!==void 0&&(lt.alphaMap=st(rt.alphaMap)),rt.bumpMap!==void 0&&(lt.bumpMap=st(rt.bumpMap)),rt.bumpScale!==void 0&&(lt.bumpScale=rt.bumpScale),rt.normalMap!==void 0&&(lt.normalMap=st(rt.normalMap)),rt.normalMapType!==void 0&&(lt.normalMapType=rt.normalMapType),rt.normalScale!==void 0){let ct=rt.normalScale;Array.isArray(ct)===!1&&(ct=[ct,ct]),lt.normalScale=new Vector2().fromArray(ct)}return rt.displacementMap!==void 0&&(lt.displacementMap=st(rt.displacementMap)),rt.displacementScale!==void 0&&(lt.displacementScale=rt.displacementScale),rt.displacementBias!==void 0&&(lt.displacementBias=rt.displacementBias),rt.roughnessMap!==void 0&&(lt.roughnessMap=st(rt.roughnessMap)),rt.metalnessMap!==void 0&&(lt.metalnessMap=st(rt.metalnessMap)),rt.emissiveMap!==void 0&&(lt.emissiveMap=st(rt.emissiveMap)),rt.emissiveIntensity!==void 0&&(lt.emissiveIntensity=rt.emissiveIntensity),rt.specularMap!==void 0&&(lt.specularMap=st(rt.specularMap)),rt.specularIntensityMap!==void 0&&(lt.specularIntensityMap=st(rt.specularIntensityMap)),rt.specularColorMap!==void 0&&(lt.specularColorMap=st(rt.specularColorMap)),rt.envMap!==void 0&&(lt.envMap=st(rt.envMap)),rt.envMapIntensity!==void 0&&(lt.envMapIntensity=rt.envMapIntensity),rt.reflectivity!==void 0&&(lt.reflectivity=rt.reflectivity),rt.refractionRatio!==void 0&&(lt.refractionRatio=rt.refractionRatio),rt.lightMap!==void 0&&(lt.lightMap=st(rt.lightMap)),rt.lightMapIntensity!==void 0&&(lt.lightMapIntensity=rt.lightMapIntensity),rt.aoMap!==void 0&&(lt.aoMap=st(rt.aoMap)),rt.aoMapIntensity!==void 0&&(lt.aoMapIntensity=rt.aoMapIntensity),rt.gradientMap!==void 0&&(lt.gradientMap=st(rt.gradientMap)),rt.clearcoatMap!==void 0&&(lt.clearcoatMap=st(rt.clearcoatMap)),rt.clearcoatRoughnessMap!==void 0&&(lt.clearcoatRoughnessMap=st(rt.clearcoatRoughnessMap)),rt.clearcoatNormalMap!==void 0&&(lt.clearcoatNormalMap=st(rt.clearcoatNormalMap)),rt.clearcoatNormalScale!==void 0&&(lt.clearcoatNormalScale=new Vector2().fromArray(rt.clearcoatNormalScale)),rt.iridescenceMap!==void 0&&(lt.iridescenceMap=st(rt.iridescenceMap)),rt.iridescenceThicknessMap!==void 0&&(lt.iridescenceThicknessMap=st(rt.iridescenceThicknessMap)),rt.transmissionMap!==void 0&&(lt.transmissionMap=st(rt.transmissionMap)),rt.thicknessMap!==void 0&&(lt.thicknessMap=st(rt.thicknessMap)),rt.anisotropyMap!==void 0&&(lt.anisotropyMap=st(rt.anisotropyMap)),rt.sheenColorMap!==void 0&&(lt.sheenColorMap=st(rt.sheenColorMap)),rt.sheenRoughnessMap!==void 0&&(lt.sheenRoughnessMap=st(rt.sheenRoughnessMap)),lt}setTextures(rt){return this.textures=rt,this}static createMaterialFromType(rt){const it={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new it[rt]}}class LoaderUtils{static decodeText(rt){if(typeof TextDecoder<"u")return new TextDecoder().decode(rt);let it="";for(let st=0,lt=rt.length;st<lt;st++)it+=String.fromCharCode(rt[st]);try{return decodeURIComponent(escape(it))}catch{return it}}static extractUrlBase(rt){const it=rt.lastIndexOf("/");return it===-1?"./":rt.slice(0,it+1)}static resolveURL(rt,it){return typeof rt!="string"||rt===""?"":(/^https?:\/\//i.test(it)&&/^\//.test(rt)&&(it=it.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(rt)||/^data:.*,.*$/i.test(rt)||/^blob:.*$/i.test(rt)?rt:it+rt)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(rt){return super.copy(rt),this.instanceCount=rt.instanceCount,this}toJSON(){const rt=super.toJSON();return rt.instanceCount=this.instanceCount,rt.isInstancedBufferGeometry=!0,rt}}class BufferGeometryLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=this,ut=new FileLoader(ct.manager);ut.setPath(ct.path),ut.setRequestHeader(ct.requestHeader),ut.setWithCredentials(ct.withCredentials),ut.load(rt,function(dt){try{it(ct.parse(JSON.parse(dt)))}catch(ht){lt?lt(ht):console.error(ht),ct.manager.itemError(rt)}},st,lt)}parse(rt){const it={},st={};function lt(xt,yt){if(it[yt]!==void 0)return it[yt];const St=xt.interleavedBuffers[yt],wt=ct(xt,St.buffer),Et=getTypedArray(St.type,wt),Rt=new InterleavedBuffer(Et,St.stride);return Rt.uuid=St.uuid,it[yt]=Rt,Rt}function ct(xt,yt){if(st[yt]!==void 0)return st[yt];const St=xt.arrayBuffers[yt],wt=new Uint32Array(St).buffer;return st[yt]=wt,wt}const ut=rt.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,dt=rt.data.index;if(dt!==void 0){const xt=getTypedArray(dt.type,dt.array);ut.setIndex(new BufferAttribute(xt,1))}const ht=rt.data.attributes;for(const xt in ht){const yt=ht[xt];let vt;if(yt.isInterleavedBufferAttribute){const St=lt(rt.data,yt.data);vt=new InterleavedBufferAttribute(St,yt.itemSize,yt.offset,yt.normalized)}else{const St=getTypedArray(yt.type,yt.array),wt=yt.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;vt=new wt(St,yt.itemSize,yt.normalized)}yt.name!==void 0&&(vt.name=yt.name),yt.usage!==void 0&&vt.setUsage(yt.usage),ut.setAttribute(xt,vt)}const ft=rt.data.morphAttributes;if(ft)for(const xt in ft){const yt=ft[xt],vt=[];for(let St=0,wt=yt.length;St<wt;St++){const Et=yt[St];let Rt;if(Et.isInterleavedBufferAttribute){const Tt=lt(rt.data,Et.data);Rt=new InterleavedBufferAttribute(Tt,Et.itemSize,Et.offset,Et.normalized)}else{const Tt=getTypedArray(Et.type,Et.array);Rt=new BufferAttribute(Tt,Et.itemSize,Et.normalized)}Et.name!==void 0&&(Rt.name=Et.name),vt.push(Rt)}ut.morphAttributes[xt]=vt}rt.data.morphTargetsRelative&&(ut.morphTargetsRelative=!0);const mt=rt.data.groups||rt.data.drawcalls||rt.data.offsets;if(mt!==void 0)for(let xt=0,yt=mt.length;xt!==yt;++xt){const vt=mt[xt];ut.addGroup(vt.start,vt.count,vt.materialIndex)}const gt=rt.data.boundingSphere;if(gt!==void 0){const xt=new Vector3;gt.center!==void 0&&xt.fromArray(gt.center),ut.boundingSphere=new Sphere(xt,gt.radius)}return rt.name&&(ut.name=rt.name),rt.userData&&(ut.userData=rt.userData),ut}}class ObjectLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=this,ut=this.path===""?LoaderUtils.extractUrlBase(rt):this.path;this.resourcePath=this.resourcePath||ut;const dt=new FileLoader(this.manager);dt.setPath(this.path),dt.setRequestHeader(this.requestHeader),dt.setWithCredentials(this.withCredentials),dt.load(rt,function(ht){let ft=null;try{ft=JSON.parse(ht)}catch(mt){lt!==void 0&&lt(mt),console.error("THREE:ObjectLoader: Can't parse "+rt+".",mt.message);return}const pt=ft.metadata;if(pt===void 0||pt.type===void 0||pt.type.toLowerCase()==="geometry"){lt!==void 0&&lt(new Error("THREE.ObjectLoader: Can't load "+rt)),console.error("THREE.ObjectLoader: Can't load "+rt);return}ct.parse(ft,it)},st,lt)}async loadAsync(rt,it){const st=this,lt=this.path===""?LoaderUtils.extractUrlBase(rt):this.path;this.resourcePath=this.resourcePath||lt;const ct=new FileLoader(this.manager);ct.setPath(this.path),ct.setRequestHeader(this.requestHeader),ct.setWithCredentials(this.withCredentials);const ut=await ct.loadAsync(rt,it),dt=JSON.parse(ut),ht=dt.metadata;if(ht===void 0||ht.type===void 0||ht.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+rt);return await st.parseAsync(dt)}parse(rt,it){const st=this.parseAnimations(rt.animations),lt=this.parseShapes(rt.shapes),ct=this.parseGeometries(rt.geometries,lt),ut=this.parseImages(rt.images,function(){it!==void 0&&it(ft)}),dt=this.parseTextures(rt.textures,ut),ht=this.parseMaterials(rt.materials,dt),ft=this.parseObject(rt.object,ct,ht,dt,st),pt=this.parseSkeletons(rt.skeletons,ft);if(this.bindSkeletons(ft,pt),it!==void 0){let mt=!1;for(const gt in ut)if(ut[gt].data instanceof HTMLImageElement){mt=!0;break}mt===!1&&it(ft)}return ft}async parseAsync(rt){const it=this.parseAnimations(rt.animations),st=this.parseShapes(rt.shapes),lt=this.parseGeometries(rt.geometries,st),ct=await this.parseImagesAsync(rt.images),ut=this.parseTextures(rt.textures,ct),dt=this.parseMaterials(rt.materials,ut),ht=this.parseObject(rt.object,lt,dt,ut,it),ft=this.parseSkeletons(rt.skeletons,ht);return this.bindSkeletons(ht,ft),ht}parseShapes(rt){const it={};if(rt!==void 0)for(let st=0,lt=rt.length;st<lt;st++){const ct=new Shape().fromJSON(rt[st]);it[ct.uuid]=ct}return it}parseSkeletons(rt,it){const st={},lt={};if(it.traverse(function(ct){ct.isBone&&(lt[ct.uuid]=ct)}),rt!==void 0)for(let ct=0,ut=rt.length;ct<ut;ct++){const dt=new Skeleton().fromJSON(rt[ct],lt);st[dt.uuid]=dt}return st}parseGeometries(rt,it){const st={};if(rt!==void 0){const lt=new BufferGeometryLoader;for(let ct=0,ut=rt.length;ct<ut;ct++){let dt;const ht=rt[ct];switch(ht.type){case"BufferGeometry":case"InstancedBufferGeometry":dt=lt.parse(ht);break;default:ht.type in Geometries?dt=Geometries[ht.type].fromJSON(ht,it):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${ht.type}"`)}dt.uuid=ht.uuid,ht.name!==void 0&&(dt.name=ht.name),ht.userData!==void 0&&(dt.userData=ht.userData),st[ht.uuid]=dt}}return st}parseMaterials(rt,it){const st={},lt={};if(rt!==void 0){const ct=new MaterialLoader;ct.setTextures(it);for(let ut=0,dt=rt.length;ut<dt;ut++){const ht=rt[ut];st[ht.uuid]===void 0&&(st[ht.uuid]=ct.parse(ht)),lt[ht.uuid]=st[ht.uuid]}}return lt}parseAnimations(rt){const it={};if(rt!==void 0)for(let st=0;st<rt.length;st++){const lt=rt[st],ct=AnimationClip.parse(lt);it[ct.uuid]=ct}return it}parseImages(rt,it){const st=this,lt={};let ct;function ut(ht){return st.manager.itemStart(ht),ct.load(ht,function(){st.manager.itemEnd(ht)},void 0,function(){st.manager.itemError(ht),st.manager.itemEnd(ht)})}function dt(ht){if(typeof ht=="string"){const ft=ht,pt=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(ft)?ft:st.resourcePath+ft;return ut(pt)}else return ht.data?{data:getTypedArray(ht.type,ht.data),width:ht.width,height:ht.height}:null}if(rt!==void 0&&rt.length>0){const ht=new LoadingManager(it);ct=new ImageLoader(ht),ct.setCrossOrigin(this.crossOrigin);for(let ft=0,pt=rt.length;ft<pt;ft++){const mt=rt[ft],gt=mt.url;if(Array.isArray(gt)){const xt=[];for(let yt=0,vt=gt.length;yt<vt;yt++){const St=gt[yt],wt=dt(St);wt!==null&&(wt instanceof HTMLImageElement?xt.push(wt):xt.push(new DataTexture(wt.data,wt.width,wt.height)))}lt[mt.uuid]=new Source(xt)}else{const xt=dt(mt.url);lt[mt.uuid]=new Source(xt)}}}return lt}async parseImagesAsync(rt){const it=this,st={};let lt;async function ct(ut){if(typeof ut=="string"){const dt=ut,ht=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(dt)?dt:it.resourcePath+dt;return await lt.loadAsync(ht)}else return ut.data?{data:getTypedArray(ut.type,ut.data),width:ut.width,height:ut.height}:null}if(rt!==void 0&&rt.length>0){lt=new ImageLoader(this.manager),lt.setCrossOrigin(this.crossOrigin);for(let ut=0,dt=rt.length;ut<dt;ut++){const ht=rt[ut],ft=ht.url;if(Array.isArray(ft)){const pt=[];for(let mt=0,gt=ft.length;mt<gt;mt++){const xt=ft[mt],yt=await ct(xt);yt!==null&&(yt instanceof HTMLImageElement?pt.push(yt):pt.push(new DataTexture(yt.data,yt.width,yt.height)))}st[ht.uuid]=new Source(pt)}else{const pt=await ct(ht.url);st[ht.uuid]=new Source(pt)}}}return st}parseTextures(rt,it){function st(ct,ut){return typeof ct=="number"?ct:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",ct),ut[ct])}const lt={};if(rt!==void 0)for(let ct=0,ut=rt.length;ct<ut;ct++){const dt=rt[ct];dt.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',dt.uuid),it[dt.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",dt.image);const ht=it[dt.image],ft=ht.data;let pt;Array.isArray(ft)?(pt=new CubeTexture,ft.length===6&&(pt.needsUpdate=!0)):(ft&&ft.data?pt=new DataTexture:pt=new Texture,ft&&(pt.needsUpdate=!0)),pt.source=ht,pt.uuid=dt.uuid,dt.name!==void 0&&(pt.name=dt.name),dt.mapping!==void 0&&(pt.mapping=st(dt.mapping,TEXTURE_MAPPING)),dt.channel!==void 0&&(pt.channel=dt.channel),dt.offset!==void 0&&pt.offset.fromArray(dt.offset),dt.repeat!==void 0&&pt.repeat.fromArray(dt.repeat),dt.center!==void 0&&pt.center.fromArray(dt.center),dt.rotation!==void 0&&(pt.rotation=dt.rotation),dt.wrap!==void 0&&(pt.wrapS=st(dt.wrap[0],TEXTURE_WRAPPING),pt.wrapT=st(dt.wrap[1],TEXTURE_WRAPPING)),dt.format!==void 0&&(pt.format=dt.format),dt.internalFormat!==void 0&&(pt.internalFormat=dt.internalFormat),dt.type!==void 0&&(pt.type=dt.type),dt.colorSpace!==void 0&&(pt.colorSpace=dt.colorSpace),dt.encoding!==void 0&&(pt.encoding=dt.encoding),dt.minFilter!==void 0&&(pt.minFilter=st(dt.minFilter,TEXTURE_FILTER)),dt.magFilter!==void 0&&(pt.magFilter=st(dt.magFilter,TEXTURE_FILTER)),dt.anisotropy!==void 0&&(pt.anisotropy=dt.anisotropy),dt.flipY!==void 0&&(pt.flipY=dt.flipY),dt.generateMipmaps!==void 0&&(pt.generateMipmaps=dt.generateMipmaps),dt.premultiplyAlpha!==void 0&&(pt.premultiplyAlpha=dt.premultiplyAlpha),dt.unpackAlignment!==void 0&&(pt.unpackAlignment=dt.unpackAlignment),dt.compareFunction!==void 0&&(pt.compareFunction=dt.compareFunction),dt.userData!==void 0&&(pt.userData=dt.userData),lt[dt.uuid]=pt}return lt}parseObject(rt,it,st,lt,ct){let ut;function dt(gt){return it[gt]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",gt),it[gt]}function ht(gt){if(gt!==void 0){if(Array.isArray(gt)){const xt=[];for(let yt=0,vt=gt.length;yt<vt;yt++){const St=gt[yt];st[St]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",St),xt.push(st[St])}return xt}return st[gt]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",gt),st[gt]}}function ft(gt){return lt[gt]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",gt),lt[gt]}let pt,mt;switch(rt.type){case"Scene":ut=new Scene,rt.background!==void 0&&(Number.isInteger(rt.background)?ut.background=new Color(rt.background):ut.background=ft(rt.background)),rt.environment!==void 0&&(ut.environment=ft(rt.environment)),rt.fog!==void 0&&(rt.fog.type==="Fog"?ut.fog=new Fog(rt.fog.color,rt.fog.near,rt.fog.far):rt.fog.type==="FogExp2"&&(ut.fog=new FogExp2(rt.fog.color,rt.fog.density)),rt.fog.name!==""&&(ut.fog.name=rt.fog.name)),rt.backgroundBlurriness!==void 0&&(ut.backgroundBlurriness=rt.backgroundBlurriness),rt.backgroundIntensity!==void 0&&(ut.backgroundIntensity=rt.backgroundIntensity);break;case"PerspectiveCamera":ut=new PerspectiveCamera(rt.fov,rt.aspect,rt.near,rt.far),rt.focus!==void 0&&(ut.focus=rt.focus),rt.zoom!==void 0&&(ut.zoom=rt.zoom),rt.filmGauge!==void 0&&(ut.filmGauge=rt.filmGauge),rt.filmOffset!==void 0&&(ut.filmOffset=rt.filmOffset),rt.view!==void 0&&(ut.view=Object.assign({},rt.view));break;case"OrthographicCamera":ut=new OrthographicCamera(rt.left,rt.right,rt.top,rt.bottom,rt.near,rt.far),rt.zoom!==void 0&&(ut.zoom=rt.zoom),rt.view!==void 0&&(ut.view=Object.assign({},rt.view));break;case"AmbientLight":ut=new AmbientLight(rt.color,rt.intensity);break;case"DirectionalLight":ut=new DirectionalLight(rt.color,rt.intensity);break;case"PointLight":ut=new PointLight(rt.color,rt.intensity,rt.distance,rt.decay);break;case"RectAreaLight":ut=new RectAreaLight(rt.color,rt.intensity,rt.width,rt.height);break;case"SpotLight":ut=new SpotLight$1(rt.color,rt.intensity,rt.distance,rt.angle,rt.penumbra,rt.decay);break;case"HemisphereLight":ut=new HemisphereLight(rt.color,rt.groundColor,rt.intensity);break;case"LightProbe":ut=new LightProbe().fromJSON(rt);break;case"SkinnedMesh":pt=dt(rt.geometry),mt=ht(rt.material),ut=new SkinnedMesh(pt,mt),rt.bindMode!==void 0&&(ut.bindMode=rt.bindMode),rt.bindMatrix!==void 0&&ut.bindMatrix.fromArray(rt.bindMatrix),rt.skeleton!==void 0&&(ut.skeleton=rt.skeleton);break;case"Mesh":pt=dt(rt.geometry),mt=ht(rt.material),ut=new Mesh(pt,mt);break;case"InstancedMesh":pt=dt(rt.geometry),mt=ht(rt.material);const gt=rt.count,xt=rt.instanceMatrix,yt=rt.instanceColor;ut=new InstancedMesh(pt,mt,gt),ut.instanceMatrix=new InstancedBufferAttribute(new Float32Array(xt.array),16),yt!==void 0&&(ut.instanceColor=new InstancedBufferAttribute(new Float32Array(yt.array),yt.itemSize));break;case"BatchedMesh":pt=dt(rt.geometry),mt=ht(rt.material),ut=new BatchedMesh(rt.maxGeometryCount,rt.maxVertexCount,rt.maxIndexCount,mt),ut.geometry=pt,ut.perObjectFrustumCulled=rt.perObjectFrustumCulled,ut.sortObjects=rt.sortObjects,ut._drawRanges=rt.drawRanges,ut._reservedRanges=rt.reservedRanges,ut._visibility=rt.visibility,ut._active=rt.active,ut._bounds=rt.bounds.map(vt=>{const St=new Box3;St.min.fromArray(vt.boxMin),St.max.fromArray(vt.boxMax);const wt=new Sphere;return wt.radius=vt.sphereRadius,wt.center.fromArray(vt.sphereCenter),{boxInitialized:vt.boxInitialized,box:St,sphereInitialized:vt.sphereInitialized,sphere:wt}}),ut._maxGeometryCount=rt.maxGeometryCount,ut._maxVertexCount=rt.maxVertexCount,ut._maxIndexCount=rt.maxIndexCount,ut._geometryInitialized=rt.geometryInitialized,ut._geometryCount=rt.geometryCount,ut._matricesTexture=ft(rt.matricesTexture.uuid);break;case"LOD":ut=new LOD;break;case"Line":ut=new Line(dt(rt.geometry),ht(rt.material));break;case"LineLoop":ut=new LineLoop(dt(rt.geometry),ht(rt.material));break;case"LineSegments":ut=new LineSegments(dt(rt.geometry),ht(rt.material));break;case"PointCloud":case"Points":ut=new Points(dt(rt.geometry),ht(rt.material));break;case"Sprite":ut=new Sprite(ht(rt.material));break;case"Group":ut=new Group;break;case"Bone":ut=new Bone;break;default:ut=new Object3D}if(ut.uuid=rt.uuid,rt.name!==void 0&&(ut.name=rt.name),rt.matrix!==void 0?(ut.matrix.fromArray(rt.matrix),rt.matrixAutoUpdate!==void 0&&(ut.matrixAutoUpdate=rt.matrixAutoUpdate),ut.matrixAutoUpdate&&ut.matrix.decompose(ut.position,ut.quaternion,ut.scale)):(rt.position!==void 0&&ut.position.fromArray(rt.position),rt.rotation!==void 0&&ut.rotation.fromArray(rt.rotation),rt.quaternion!==void 0&&ut.quaternion.fromArray(rt.quaternion),rt.scale!==void 0&&ut.scale.fromArray(rt.scale)),rt.up!==void 0&&ut.up.fromArray(rt.up),rt.castShadow!==void 0&&(ut.castShadow=rt.castShadow),rt.receiveShadow!==void 0&&(ut.receiveShadow=rt.receiveShadow),rt.shadow&&(rt.shadow.bias!==void 0&&(ut.shadow.bias=rt.shadow.bias),rt.shadow.normalBias!==void 0&&(ut.shadow.normalBias=rt.shadow.normalBias),rt.shadow.radius!==void 0&&(ut.shadow.radius=rt.shadow.radius),rt.shadow.mapSize!==void 0&&ut.shadow.mapSize.fromArray(rt.shadow.mapSize),rt.shadow.camera!==void 0&&(ut.shadow.camera=this.parseObject(rt.shadow.camera))),rt.visible!==void 0&&(ut.visible=rt.visible),rt.frustumCulled!==void 0&&(ut.frustumCulled=rt.frustumCulled),rt.renderOrder!==void 0&&(ut.renderOrder=rt.renderOrder),rt.userData!==void 0&&(ut.userData=rt.userData),rt.layers!==void 0&&(ut.layers.mask=rt.layers),rt.children!==void 0){const gt=rt.children;for(let xt=0;xt<gt.length;xt++)ut.add(this.parseObject(gt[xt],it,st,lt,ct))}if(rt.animations!==void 0){const gt=rt.animations;for(let xt=0;xt<gt.length;xt++){const yt=gt[xt];ut.animations.push(ct[yt])}}if(rt.type==="LOD"){rt.autoUpdate!==void 0&&(ut.autoUpdate=rt.autoUpdate);const gt=rt.levels;for(let xt=0;xt<gt.length;xt++){const yt=gt[xt],vt=ut.getObjectByProperty("uuid",yt.object);vt!==void 0&&ut.addLevel(vt,yt.distance,yt.hysteresis)}}return ut}bindSkeletons(rt,it){Object.keys(it).length!==0&&rt.traverse(function(st){if(st.isSkinnedMesh===!0&&st.skeleton!==void 0){const lt=it[st.skeleton];lt===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",st.skeleton):st.bind(lt,st.bindMatrix)}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};class ImageBitmapLoader extends Loader{constructor(rt){super(rt),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(rt){return this.options=rt,this}load(rt,it,st,lt){rt===void 0&&(rt=""),this.path!==void 0&&(rt=this.path+rt),rt=this.manager.resolveURL(rt);const ct=this,ut=Cache.get(rt);if(ut!==void 0){if(ct.manager.itemStart(rt),ut.then){ut.then(ft=>{it&&it(ft),ct.manager.itemEnd(rt)}).catch(ft=>{lt&&lt(ft)});return}return setTimeout(function(){it&&it(ut),ct.manager.itemEnd(rt)},0),ut}const dt={};dt.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",dt.headers=this.requestHeader;const ht=fetch(rt,dt).then(function(ft){return ft.blob()}).then(function(ft){return createImageBitmap(ft,Object.assign(ct.options,{colorSpaceConversion:"none"}))}).then(function(ft){return Cache.add(rt,ft),it&&it(ft),ct.manager.itemEnd(rt),ft}).catch(function(ft){lt&&lt(ft),Cache.remove(rt),ct.manager.itemError(rt),ct.manager.itemEnd(rt)});Cache.add(rt,ht),ct.manager.itemStart(rt)}}let _context,AudioContext$1=class{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(rt){_context=rt}};class AudioLoader extends Loader{constructor(rt){super(rt)}load(rt,it,st,lt){const ct=this,ut=new FileLoader(this.manager);ut.setResponseType("arraybuffer"),ut.setPath(this.path),ut.setRequestHeader(this.requestHeader),ut.setWithCredentials(this.withCredentials),ut.load(rt,function(ht){try{const ft=ht.slice(0);AudioContext$1.getContext().decodeAudioData(ft,function(mt){it(mt)}).catch(dt)}catch(ft){dt(ft)}},st,lt);function dt(ht){lt?lt(ht):console.error(ht),ct.manager.itemError(rt)}}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(rt){const it=this._cache;if(it.focus!==rt.focus||it.fov!==rt.fov||it.aspect!==rt.aspect*this.aspect||it.near!==rt.near||it.far!==rt.far||it.zoom!==rt.zoom||it.eyeSep!==this.eyeSep){it.focus=rt.focus,it.fov=rt.fov,it.aspect=rt.aspect*this.aspect,it.near=rt.near,it.far=rt.far,it.zoom=rt.zoom,it.eyeSep=this.eyeSep,_projectionMatrix.copy(rt.projectionMatrix);const lt=it.eyeSep/2,ct=lt*it.near/it.focus,ut=it.near*Math.tan(DEG2RAD*it.fov*.5)/it.zoom;let dt,ht;_eyeLeft.elements[12]=-lt,_eyeRight.elements[12]=lt,dt=-ut*it.aspect+ct,ht=ut*it.aspect+ct,_projectionMatrix.elements[0]=2*it.near/(ht-dt),_projectionMatrix.elements[8]=(ht+dt)/(ht-dt),this.cameraL.projectionMatrix.copy(_projectionMatrix),dt=-ut*it.aspect-ct,ht=ut*it.aspect-ct,_projectionMatrix.elements[0]=2*it.near/(ht-dt),_projectionMatrix.elements[8]=(ht+dt)/(ht-dt),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(rt.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(rt.matrixWorld).multiply(_eyeRight)}}class Clock{constructor(rt=!0){this.autoStart=rt,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let rt=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const it=now();rt=(it-this.oldTime)/1e3,this.oldTime=it,this.elapsedTime+=rt}return rt}}function now(){return(typeof performance>"u"?Date:performance).now()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext$1.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(rt){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=rt,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(rt){return this.gain.gain.setTargetAtTime(rt,this.context.currentTime,.01),this}updateMatrixWorld(rt){super.updateMatrixWorld(rt);const it=this.context.listener,st=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),it.positionX){const lt=this.context.currentTime+this.timeDelta;it.positionX.linearRampToValueAtTime(_position$1.x,lt),it.positionY.linearRampToValueAtTime(_position$1.y,lt),it.positionZ.linearRampToValueAtTime(_position$1.z,lt),it.forwardX.linearRampToValueAtTime(_orientation$1.x,lt),it.forwardY.linearRampToValueAtTime(_orientation$1.y,lt),it.forwardZ.linearRampToValueAtTime(_orientation$1.z,lt),it.upX.linearRampToValueAtTime(st.x,lt),it.upY.linearRampToValueAtTime(st.y,lt),it.upZ.linearRampToValueAtTime(st.z,lt)}else it.setPosition(_position$1.x,_position$1.y,_position$1.z),it.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,st.x,st.y,st.z)}}let Audio$1=class extends Object3D{constructor(rt){super(),this.type="Audio",this.listener=rt,this.context=rt.context,this.gain=this.context.createGain(),this.gain.connect(rt.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(rt){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=rt,this.connect(),this}setMediaElementSource(rt){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(rt),this.connect(),this}setMediaStreamSource(rt){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(rt),this.connect(),this}setBuffer(rt){return this.buffer=rt,this.sourceType="buffer",this.autoplay&&this.play(),this}play(rt=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+rt;const it=this.context.createBufferSource();return it.buffer=this.buffer,it.loop=this.loop,it.loopStart=this.loopStart,it.loopEnd=this.loopEnd,it.onended=this.onEnded.bind(this),it.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=it,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let rt=1,it=this.filters.length;rt<it;rt++)this.filters[rt-1].connect(this.filters[rt]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let rt=1,it=this.filters.length;rt<it;rt++)this.filters[rt-1].disconnect(this.filters[rt]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(rt){return rt||(rt=[]),this._connected===!0?(this.disconnect(),this.filters=rt.slice(),this.connect()):this.filters=rt.slice(),this}setDetune(rt){return this.detune=rt,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(rt){return this.setFilters(rt?[rt]:[])}setPlaybackRate(rt){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=rt,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(rt){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=rt,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(rt){return this.loopStart=rt,this}setLoopEnd(rt){return this.loopEnd=rt,this}getVolume(){return this.gain.gain.value}setVolume(rt){return this.gain.gain.setTargetAtTime(rt,this.context.currentTime,.01),this}};const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio$1{constructor(rt){super(rt),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(rt){return this.panner.refDistance=rt,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(rt){return this.panner.rolloffFactor=rt,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(rt){return this.panner.distanceModel=rt,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(rt){return this.panner.maxDistance=rt,this}setDirectionalCone(rt,it,st){return this.panner.coneInnerAngle=rt,this.panner.coneOuterAngle=it,this.panner.coneOuterGain=st,this}updateMatrixWorld(rt){if(super.updateMatrixWorld(rt),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const it=this.panner;if(it.positionX){const st=this.context.currentTime+this.listener.timeDelta;it.positionX.linearRampToValueAtTime(_position.x,st),it.positionY.linearRampToValueAtTime(_position.y,st),it.positionZ.linearRampToValueAtTime(_position.z,st),it.orientationX.linearRampToValueAtTime(_orientation.x,st),it.orientationY.linearRampToValueAtTime(_orientation.y,st),it.orientationZ.linearRampToValueAtTime(_orientation.z,st)}else it.setPosition(_position.x,_position.y,_position.z),it.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}let AudioAnalyser$1=class{constructor(rt,it=2048){this.analyser=rt.context.createAnalyser(),this.analyser.fftSize=it,this.data=new Uint8Array(this.analyser.frequencyBinCount),rt.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let rt=0;const it=this.getFrequencyData();for(let st=0;st<it.length;st++)rt+=it[st];return rt/it.length}};class PropertyMixer{constructor(rt,it,st){this.binding=rt,this.valueSize=st;let lt,ct,ut;switch(it){case"quaternion":lt=this._slerp,ct=this._slerpAdditive,ut=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(st*6),this._workIndex=5;break;case"string":case"bool":lt=this._select,ct=this._select,ut=this._setAdditiveIdentityOther,this.buffer=new Array(st*5);break;default:lt=this._lerp,ct=this._lerpAdditive,ut=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(st*5)}this._mixBufferRegion=lt,this._mixBufferRegionAdditive=ct,this._setIdentity=ut,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(rt,it){const st=this.buffer,lt=this.valueSize,ct=rt*lt+lt;let ut=this.cumulativeWeight;if(ut===0){for(let dt=0;dt!==lt;++dt)st[ct+dt]=st[dt];ut=it}else{ut+=it;const dt=it/ut;this._mixBufferRegion(st,ct,0,dt,lt)}this.cumulativeWeight=ut}accumulateAdditive(rt){const it=this.buffer,st=this.valueSize,lt=st*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(it,lt,0,rt,st),this.cumulativeWeightAdditive+=rt}apply(rt){const it=this.valueSize,st=this.buffer,lt=rt*it+it,ct=this.cumulativeWeight,ut=this.cumulativeWeightAdditive,dt=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,ct<1){const ht=it*this._origIndex;this._mixBufferRegion(st,lt,ht,1-ct,it)}ut>0&&this._mixBufferRegionAdditive(st,lt,this._addIndex*it,1,it);for(let ht=it,ft=it+it;ht!==ft;++ht)if(st[ht]!==st[ht+it]){dt.setValue(st,lt);break}}saveOriginalState(){const rt=this.binding,it=this.buffer,st=this.valueSize,lt=st*this._origIndex;rt.getValue(it,lt);for(let ct=st,ut=lt;ct!==ut;++ct)it[ct]=it[lt+ct%st];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const rt=this.valueSize*3;this.binding.setValue(this.buffer,rt)}_setAdditiveIdentityNumeric(){const rt=this._addIndex*this.valueSize,it=rt+this.valueSize;for(let st=rt;st<it;st++)this.buffer[st]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const rt=this._origIndex*this.valueSize,it=this._addIndex*this.valueSize;for(let st=0;st<this.valueSize;st++)this.buffer[it+st]=this.buffer[rt+st]}_select(rt,it,st,lt,ct){if(lt>=.5)for(let ut=0;ut!==ct;++ut)rt[it+ut]=rt[st+ut]}_slerp(rt,it,st,lt){Quaternion.slerpFlat(rt,it,rt,it,rt,st,lt)}_slerpAdditive(rt,it,st,lt,ct){const ut=this._workIndex*ct;Quaternion.multiplyQuaternionsFlat(rt,ut,rt,it,rt,st),Quaternion.slerpFlat(rt,it,rt,it,rt,ut,lt)}_lerp(rt,it,st,lt,ct){const ut=1-lt;for(let dt=0;dt!==ct;++dt){const ht=it+dt;rt[ht]=rt[ht]*ut+rt[st+dt]*lt}}_lerpAdditive(rt,it,st,lt,ct){for(let ut=0;ut!==ct;++ut){const dt=it+ut;rt[dt]=rt[dt]+rt[st+ut]*lt}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(rt,it,st){const lt=st||PropertyBinding.parseTrackName(it);this._targetGroup=rt,this._bindings=rt.subscribe_(it,lt)}getValue(rt,it){this.bind();const st=this._targetGroup.nCachedObjects_,lt=this._bindings[st];lt!==void 0&&lt.getValue(rt,it)}setValue(rt,it){const st=this._bindings;for(let lt=this._targetGroup.nCachedObjects_,ct=st.length;lt!==ct;++lt)st[lt].setValue(rt,it)}bind(){const rt=this._bindings;for(let it=this._targetGroup.nCachedObjects_,st=rt.length;it!==st;++it)rt[it].bind()}unbind(){const rt=this._bindings;for(let it=this._targetGroup.nCachedObjects_,st=rt.length;it!==st;++it)rt[it].unbind()}}class PropertyBinding{constructor(rt,it,st){this.path=it,this.parsedPath=st||PropertyBinding.parseTrackName(it),this.node=PropertyBinding.findNode(rt,this.parsedPath.nodeName),this.rootNode=rt,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(rt,it,st){return rt&&rt.isAnimationObjectGroup?new PropertyBinding.Composite(rt,it,st):new PropertyBinding(rt,it,st)}static sanitizeNodeName(rt){return rt.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(rt){const it=_trackRe.exec(rt);if(it===null)throw new Error("PropertyBinding: Cannot parse trackName: "+rt);const st={nodeName:it[2],objectName:it[3],objectIndex:it[4],propertyName:it[5],propertyIndex:it[6]},lt=st.nodeName&&st.nodeName.lastIndexOf(".");if(lt!==void 0&&lt!==-1){const ct=st.nodeName.substring(lt+1);_supportedObjectNames.indexOf(ct)!==-1&&(st.nodeName=st.nodeName.substring(0,lt),st.objectName=ct)}if(st.propertyName===null||st.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+rt);return st}static findNode(rt,it){if(it===void 0||it===""||it==="."||it===-1||it===rt.name||it===rt.uuid)return rt;if(rt.skeleton){const st=rt.skeleton.getBoneByName(it);if(st!==void 0)return st}if(rt.children){const st=function(ct){for(let ut=0;ut<ct.length;ut++){const dt=ct[ut];if(dt.name===it||dt.uuid===it)return dt;const ht=st(dt.children);if(ht)return ht}return null},lt=st(rt.children);if(lt)return lt}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(rt,it){rt[it]=this.targetObject[this.propertyName]}_getValue_array(rt,it){const st=this.resolvedProperty;for(let lt=0,ct=st.length;lt!==ct;++lt)rt[it++]=st[lt]}_getValue_arrayElement(rt,it){rt[it]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(rt,it){this.resolvedProperty.toArray(rt,it)}_setValue_direct(rt,it){this.targetObject[this.propertyName]=rt[it]}_setValue_direct_setNeedsUpdate(rt,it){this.targetObject[this.propertyName]=rt[it],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(rt,it){this.targetObject[this.propertyName]=rt[it],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(rt,it){const st=this.resolvedProperty;for(let lt=0,ct=st.length;lt!==ct;++lt)st[lt]=rt[it++]}_setValue_array_setNeedsUpdate(rt,it){const st=this.resolvedProperty;for(let lt=0,ct=st.length;lt!==ct;++lt)st[lt]=rt[it++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(rt,it){const st=this.resolvedProperty;for(let lt=0,ct=st.length;lt!==ct;++lt)st[lt]=rt[it++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(rt,it){this.resolvedProperty[this.propertyIndex]=rt[it]}_setValue_arrayElement_setNeedsUpdate(rt,it){this.resolvedProperty[this.propertyIndex]=rt[it],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(rt,it){this.resolvedProperty[this.propertyIndex]=rt[it],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(rt,it){this.resolvedProperty.fromArray(rt,it)}_setValue_fromArray_setNeedsUpdate(rt,it){this.resolvedProperty.fromArray(rt,it),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(rt,it){this.resolvedProperty.fromArray(rt,it),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(rt,it){this.bind(),this.getValue(rt,it)}_setValue_unbound(rt,it){this.bind(),this.setValue(rt,it)}bind(){let rt=this.node;const it=this.parsedPath,st=it.objectName,lt=it.propertyName;let ct=it.propertyIndex;if(rt||(rt=PropertyBinding.findNode(this.rootNode,it.nodeName),this.node=rt),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!rt){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(st){let ft=it.objectIndex;switch(st){case"materials":if(!rt.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!rt.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}rt=rt.material.materials;break;case"bones":if(!rt.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}rt=rt.skeleton.bones;for(let pt=0;pt<rt.length;pt++)if(rt[pt].name===ft){ft=pt;break}break;case"map":if("map"in rt){rt=rt.map;break}if(!rt.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!rt.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}rt=rt.material.map;break;default:if(rt[st]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}rt=rt[st]}if(ft!==void 0){if(rt[ft]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,rt);return}rt=rt[ft]}}const ut=rt[lt];if(ut===void 0){const ft=it.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+ft+"."+lt+" but it wasn't found.",rt);return}let dt=this.Versioning.None;this.targetObject=rt,rt.needsUpdate!==void 0?dt=this.Versioning.NeedsUpdate:rt.matrixWorldNeedsUpdate!==void 0&&(dt=this.Versioning.MatrixWorldNeedsUpdate);let ht=this.BindingType.Direct;if(ct!==void 0){if(lt==="morphTargetInfluences"){if(!rt.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!rt.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}rt.morphTargetDictionary[ct]!==void 0&&(ct=rt.morphTargetDictionary[ct])}ht=this.BindingType.ArrayElement,this.resolvedProperty=ut,this.propertyIndex=ct}else ut.fromArray!==void 0&&ut.toArray!==void 0?(ht=this.BindingType.HasFromToArray,this.resolvedProperty=ut):Array.isArray(ut)?(ht=this.BindingType.EntireArray,this.resolvedProperty=ut):this.propertyName=lt;this.getValue=this.GetterByBindingType[ht],this.setValue=this.SetterByBindingTypeAndVersioning[ht][dt]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const rt={};this._indicesByUUID=rt;for(let st=0,lt=arguments.length;st!==lt;++st)rt[arguments[st].uuid]=st;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const it=this;this.stats={objects:{get total(){return it._objects.length},get inUse(){return this.total-it.nCachedObjects_}},get bindingsPerObject(){return it._bindings.length}}}add(){const rt=this._objects,it=this._indicesByUUID,st=this._paths,lt=this._parsedPaths,ct=this._bindings,ut=ct.length;let dt,ht=rt.length,ft=this.nCachedObjects_;for(let pt=0,mt=arguments.length;pt!==mt;++pt){const gt=arguments[pt],xt=gt.uuid;let yt=it[xt];if(yt===void 0){yt=ht++,it[xt]=yt,rt.push(gt);for(let vt=0,St=ut;vt!==St;++vt)ct[vt].push(new PropertyBinding(gt,st[vt],lt[vt]))}else if(yt<ft){dt=rt[yt];const vt=--ft,St=rt[vt];it[St.uuid]=yt,rt[yt]=St,it[xt]=vt,rt[vt]=gt;for(let wt=0,Et=ut;wt!==Et;++wt){const Rt=ct[wt],Tt=Rt[vt];let It=Rt[yt];Rt[yt]=Tt,It===void 0&&(It=new PropertyBinding(gt,st[wt],lt[wt])),Rt[vt]=It}}else rt[yt]!==dt&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=ft}remove(){const rt=this._objects,it=this._indicesByUUID,st=this._bindings,lt=st.length;let ct=this.nCachedObjects_;for(let ut=0,dt=arguments.length;ut!==dt;++ut){const ht=arguments[ut],ft=ht.uuid,pt=it[ft];if(pt!==void 0&&pt>=ct){const mt=ct++,gt=rt[mt];it[gt.uuid]=pt,rt[pt]=gt,it[ft]=mt,rt[mt]=ht;for(let xt=0,yt=lt;xt!==yt;++xt){const vt=st[xt],St=vt[mt],wt=vt[pt];vt[pt]=St,vt[mt]=wt}}}this.nCachedObjects_=ct}uncache(){const rt=this._objects,it=this._indicesByUUID,st=this._bindings,lt=st.length;let ct=this.nCachedObjects_,ut=rt.length;for(let dt=0,ht=arguments.length;dt!==ht;++dt){const ft=arguments[dt],pt=ft.uuid,mt=it[pt];if(mt!==void 0)if(delete it[pt],mt<ct){const gt=--ct,xt=rt[gt],yt=--ut,vt=rt[yt];it[xt.uuid]=mt,rt[mt]=xt,it[vt.uuid]=gt,rt[gt]=vt,rt.pop();for(let St=0,wt=lt;St!==wt;++St){const Et=st[St],Rt=Et[gt],Tt=Et[yt];Et[mt]=Rt,Et[gt]=Tt,Et.pop()}}else{const gt=--ut,xt=rt[gt];gt>0&&(it[xt.uuid]=mt),rt[mt]=xt,rt.pop();for(let yt=0,vt=lt;yt!==vt;++yt){const St=st[yt];St[mt]=St[gt],St.pop()}}}this.nCachedObjects_=ct}subscribe_(rt,it){const st=this._bindingsIndicesByPath;let lt=st[rt];const ct=this._bindings;if(lt!==void 0)return ct[lt];const ut=this._paths,dt=this._parsedPaths,ht=this._objects,ft=ht.length,pt=this.nCachedObjects_,mt=new Array(ft);lt=ct.length,st[rt]=lt,ut.push(rt),dt.push(it),ct.push(mt);for(let gt=pt,xt=ht.length;gt!==xt;++gt){const yt=ht[gt];mt[gt]=new PropertyBinding(yt,rt,it)}return mt}unsubscribe_(rt){const it=this._bindingsIndicesByPath,st=it[rt];if(st!==void 0){const lt=this._paths,ct=this._parsedPaths,ut=this._bindings,dt=ut.length-1,ht=ut[dt],ft=rt[dt];it[ft]=st,ut[st]=ht,ut.pop(),ct[st]=ct[dt],ct.pop(),lt[st]=lt[dt],lt.pop()}}}class AnimationAction{constructor(rt,it,st=null,lt=it.blendMode){this._mixer=rt,this._clip=it,this._localRoot=st,this.blendMode=lt;const ct=it.tracks,ut=ct.length,dt=new Array(ut),ht={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let ft=0;ft!==ut;++ft){const pt=ct[ft].createInterpolant(null);dt[ft]=pt,pt.settings=ht}this._interpolantSettings=ht,this._interpolants=dt,this._propertyBindings=new Array(ut),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(rt){return this._startTime=rt,this}setLoop(rt,it){return this.loop=rt,this.repetitions=it,this}setEffectiveWeight(rt){return this.weight=rt,this._effectiveWeight=this.enabled?rt:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(rt){return this._scheduleFading(rt,0,1)}fadeOut(rt){return this._scheduleFading(rt,1,0)}crossFadeFrom(rt,it,st){if(rt.fadeOut(it),this.fadeIn(it),st){const lt=this._clip.duration,ct=rt._clip.duration,ut=ct/lt,dt=lt/ct;rt.warp(1,ut,it),this.warp(dt,1,it)}return this}crossFadeTo(rt,it,st){return rt.crossFadeFrom(this,it,st)}stopFading(){const rt=this._weightInterpolant;return rt!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(rt)),this}setEffectiveTimeScale(rt){return this.timeScale=rt,this._effectiveTimeScale=this.paused?0:rt,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(rt){return this.timeScale=this._clip.duration/rt,this.stopWarping()}syncWith(rt){return this.time=rt.time,this.timeScale=rt.timeScale,this.stopWarping()}halt(rt){return this.warp(this._effectiveTimeScale,0,rt)}warp(rt,it,st){const lt=this._mixer,ct=lt.time,ut=this.timeScale;let dt=this._timeScaleInterpolant;dt===null&&(dt=lt._lendControlInterpolant(),this._timeScaleInterpolant=dt);const ht=dt.parameterPositions,ft=dt.sampleValues;return ht[0]=ct,ht[1]=ct+st,ft[0]=rt/ut,ft[1]=it/ut,this}stopWarping(){const rt=this._timeScaleInterpolant;return rt!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(rt)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(rt,it,st,lt){if(!this.enabled){this._updateWeight(rt);return}const ct=this._startTime;if(ct!==null){const ht=(rt-ct)*st;ht<0||st===0?it=0:(this._startTime=null,it=st*ht)}it*=this._updateTimeScale(rt);const ut=this._updateTime(it),dt=this._updateWeight(rt);if(dt>0){const ht=this._interpolants,ft=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let pt=0,mt=ht.length;pt!==mt;++pt)ht[pt].evaluate(ut),ft[pt].accumulateAdditive(dt);break;case NormalAnimationBlendMode:default:for(let pt=0,mt=ht.length;pt!==mt;++pt)ht[pt].evaluate(ut),ft[pt].accumulate(lt,dt)}}}_updateWeight(rt){let it=0;if(this.enabled){it=this.weight;const st=this._weightInterpolant;if(st!==null){const lt=st.evaluate(rt)[0];it*=lt,rt>st.parameterPositions[1]&&(this.stopFading(),lt===0&&(this.enabled=!1))}}return this._effectiveWeight=it,it}_updateTimeScale(rt){let it=0;if(!this.paused){it=this.timeScale;const st=this._timeScaleInterpolant;if(st!==null){const lt=st.evaluate(rt)[0];it*=lt,rt>st.parameterPositions[1]&&(this.stopWarping(),it===0?this.paused=!0:this.timeScale=it)}}return this._effectiveTimeScale=it,it}_updateTime(rt){const it=this._clip.duration,st=this.loop;let lt=this.time+rt,ct=this._loopCount;const ut=st===LoopPingPong;if(rt===0)return ct===-1?lt:ut&&(ct&1)===1?it-lt:lt;if(st===LoopOnce){ct===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(lt>=it)lt=it;else if(lt<0)lt=0;else{this.time=lt;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=lt,this._mixer.dispatchEvent({type:"finished",action:this,direction:rt<0?-1:1})}}else{if(ct===-1&&(rt>=0?(ct=0,this._setEndings(!0,this.repetitions===0,ut)):this._setEndings(this.repetitions===0,!0,ut)),lt>=it||lt<0){const dt=Math.floor(lt/it);lt-=it*dt,ct+=Math.abs(dt);const ht=this.repetitions-ct;if(ht<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,lt=rt>0?it:0,this.time=lt,this._mixer.dispatchEvent({type:"finished",action:this,direction:rt>0?1:-1});else{if(ht===1){const ft=rt<0;this._setEndings(ft,!ft,ut)}else this._setEndings(!1,!1,ut);this._loopCount=ct,this.time=lt,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:dt})}}else this.time=lt;if(ut&&(ct&1)===1)return it-lt}return lt}_setEndings(rt,it,st){const lt=this._interpolantSettings;st?(lt.endingStart=ZeroSlopeEnding,lt.endingEnd=ZeroSlopeEnding):(rt?lt.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:lt.endingStart=WrapAroundEnding,it?lt.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:lt.endingEnd=WrapAroundEnding)}_scheduleFading(rt,it,st){const lt=this._mixer,ct=lt.time;let ut=this._weightInterpolant;ut===null&&(ut=lt._lendControlInterpolant(),this._weightInterpolant=ut);const dt=ut.parameterPositions,ht=ut.sampleValues;return dt[0]=ct,ht[0]=it,dt[1]=ct+rt,ht[1]=st,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher{constructor(rt){super(),this._root=rt,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(rt,it){const st=rt._localRoot||this._root,lt=rt._clip.tracks,ct=lt.length,ut=rt._propertyBindings,dt=rt._interpolants,ht=st.uuid,ft=this._bindingsByRootAndName;let pt=ft[ht];pt===void 0&&(pt={},ft[ht]=pt);for(let mt=0;mt!==ct;++mt){const gt=lt[mt],xt=gt.name;let yt=pt[xt];if(yt!==void 0)++yt.referenceCount,ut[mt]=yt;else{if(yt=ut[mt],yt!==void 0){yt._cacheIndex===null&&(++yt.referenceCount,this._addInactiveBinding(yt,ht,xt));continue}const vt=it&&it._propertyBindings[mt].binding.parsedPath;yt=new PropertyMixer(PropertyBinding.create(st,xt,vt),gt.ValueTypeName,gt.getValueSize()),++yt.referenceCount,this._addInactiveBinding(yt,ht,xt),ut[mt]=yt}dt[mt].resultBuffer=yt.buffer}}_activateAction(rt){if(!this._isActiveAction(rt)){if(rt._cacheIndex===null){const st=(rt._localRoot||this._root).uuid,lt=rt._clip.uuid,ct=this._actionsByClip[lt];this._bindAction(rt,ct&&ct.knownActions[0]),this._addInactiveAction(rt,lt,st)}const it=rt._propertyBindings;for(let st=0,lt=it.length;st!==lt;++st){const ct=it[st];ct.useCount++===0&&(this._lendBinding(ct),ct.saveOriginalState())}this._lendAction(rt)}}_deactivateAction(rt){if(this._isActiveAction(rt)){const it=rt._propertyBindings;for(let st=0,lt=it.length;st!==lt;++st){const ct=it[st];--ct.useCount===0&&(ct.restoreOriginalState(),this._takeBackBinding(ct))}this._takeBackAction(rt)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const rt=this;this.stats={actions:{get total(){return rt._actions.length},get inUse(){return rt._nActiveActions}},bindings:{get total(){return rt._bindings.length},get inUse(){return rt._nActiveBindings}},controlInterpolants:{get total(){return rt._controlInterpolants.length},get inUse(){return rt._nActiveControlInterpolants}}}}_isActiveAction(rt){const it=rt._cacheIndex;return it!==null&&it<this._nActiveActions}_addInactiveAction(rt,it,st){const lt=this._actions,ct=this._actionsByClip;let ut=ct[it];if(ut===void 0)ut={knownActions:[rt],actionByRoot:{}},rt._byClipCacheIndex=0,ct[it]=ut;else{const dt=ut.knownActions;rt._byClipCacheIndex=dt.length,dt.push(rt)}rt._cacheIndex=lt.length,lt.push(rt),ut.actionByRoot[st]=rt}_removeInactiveAction(rt){const it=this._actions,st=it[it.length-1],lt=rt._cacheIndex;st._cacheIndex=lt,it[lt]=st,it.pop(),rt._cacheIndex=null;const ct=rt._clip.uuid,ut=this._actionsByClip,dt=ut[ct],ht=dt.knownActions,ft=ht[ht.length-1],pt=rt._byClipCacheIndex;ft._byClipCacheIndex=pt,ht[pt]=ft,ht.pop(),rt._byClipCacheIndex=null;const mt=dt.actionByRoot,gt=(rt._localRoot||this._root).uuid;delete mt[gt],ht.length===0&&delete ut[ct],this._removeInactiveBindingsForAction(rt)}_removeInactiveBindingsForAction(rt){const it=rt._propertyBindings;for(let st=0,lt=it.length;st!==lt;++st){const ct=it[st];--ct.referenceCount===0&&this._removeInactiveBinding(ct)}}_lendAction(rt){const it=this._actions,st=rt._cacheIndex,lt=this._nActiveActions++,ct=it[lt];rt._cacheIndex=lt,it[lt]=rt,ct._cacheIndex=st,it[st]=ct}_takeBackAction(rt){const it=this._actions,st=rt._cacheIndex,lt=--this._nActiveActions,ct=it[lt];rt._cacheIndex=lt,it[lt]=rt,ct._cacheIndex=st,it[st]=ct}_addInactiveBinding(rt,it,st){const lt=this._bindingsByRootAndName,ct=this._bindings;let ut=lt[it];ut===void 0&&(ut={},lt[it]=ut),ut[st]=rt,rt._cacheIndex=ct.length,ct.push(rt)}_removeInactiveBinding(rt){const it=this._bindings,st=rt.binding,lt=st.rootNode.uuid,ct=st.path,ut=this._bindingsByRootAndName,dt=ut[lt],ht=it[it.length-1],ft=rt._cacheIndex;ht._cacheIndex=ft,it[ft]=ht,it.pop(),delete dt[ct],Object.keys(dt).length===0&&delete ut[lt]}_lendBinding(rt){const it=this._bindings,st=rt._cacheIndex,lt=this._nActiveBindings++,ct=it[lt];rt._cacheIndex=lt,it[lt]=rt,ct._cacheIndex=st,it[st]=ct}_takeBackBinding(rt){const it=this._bindings,st=rt._cacheIndex,lt=--this._nActiveBindings,ct=it[lt];rt._cacheIndex=lt,it[lt]=rt,ct._cacheIndex=st,it[st]=ct}_lendControlInterpolant(){const rt=this._controlInterpolants,it=this._nActiveControlInterpolants++;let st=rt[it];return st===void 0&&(st=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),st.__cacheIndex=it,rt[it]=st),st}_takeBackControlInterpolant(rt){const it=this._controlInterpolants,st=rt.__cacheIndex,lt=--this._nActiveControlInterpolants,ct=it[lt];rt.__cacheIndex=lt,it[lt]=rt,ct.__cacheIndex=st,it[st]=ct}clipAction(rt,it,st){const lt=it||this._root,ct=lt.uuid;let ut=typeof rt=="string"?AnimationClip.findByName(lt,rt):rt;const dt=ut!==null?ut.uuid:rt,ht=this._actionsByClip[dt];let ft=null;if(st===void 0&&(ut!==null?st=ut.blendMode:st=NormalAnimationBlendMode),ht!==void 0){const mt=ht.actionByRoot[ct];if(mt!==void 0&&mt.blendMode===st)return mt;ft=ht.knownActions[0],ut===null&&(ut=ft._clip)}if(ut===null)return null;const pt=new AnimationAction(this,ut,it,st);return this._bindAction(pt,ft),this._addInactiveAction(pt,dt,ct),pt}existingAction(rt,it){const st=it||this._root,lt=st.uuid,ct=typeof rt=="string"?AnimationClip.findByName(st,rt):rt,ut=ct?ct.uuid:rt,dt=this._actionsByClip[ut];return dt!==void 0&&dt.actionByRoot[lt]||null}stopAllAction(){const rt=this._actions,it=this._nActiveActions;for(let st=it-1;st>=0;--st)rt[st].stop();return this}update(rt){rt*=this.timeScale;const it=this._actions,st=this._nActiveActions,lt=this.time+=rt,ct=Math.sign(rt),ut=this._accuIndex^=1;for(let ft=0;ft!==st;++ft)it[ft]._update(lt,rt,ct,ut);const dt=this._bindings,ht=this._nActiveBindings;for(let ft=0;ft!==ht;++ft)dt[ft].apply(ut);return this}setTime(rt){this.time=0;for(let it=0;it<this._actions.length;it++)this._actions[it].time=0;return this.update(rt)}getRoot(){return this._root}uncacheClip(rt){const it=this._actions,st=rt.uuid,lt=this._actionsByClip,ct=lt[st];if(ct!==void 0){const ut=ct.knownActions;for(let dt=0,ht=ut.length;dt!==ht;++dt){const ft=ut[dt];this._deactivateAction(ft);const pt=ft._cacheIndex,mt=it[it.length-1];ft._cacheIndex=null,ft._byClipCacheIndex=null,mt._cacheIndex=pt,it[pt]=mt,it.pop(),this._removeInactiveBindingsForAction(ft)}delete lt[st]}}uncacheRoot(rt){const it=rt.uuid,st=this._actionsByClip;for(const ut in st){const dt=st[ut].actionByRoot,ht=dt[it];ht!==void 0&&(this._deactivateAction(ht),this._removeInactiveAction(ht))}const lt=this._bindingsByRootAndName,ct=lt[it];if(ct!==void 0)for(const ut in ct){const dt=ct[ut];dt.restoreOriginalState(),this._removeInactiveBinding(dt)}}uncacheAction(rt,it){const st=this.existingAction(rt,it);st!==null&&(this._deactivateAction(st),this._removeInactiveAction(st))}}class Uniform{constructor(rt){this.value=rt}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let _id=0;class UniformsGroup extends EventDispatcher{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_id++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(rt){return this.uniforms.push(rt),this}remove(rt){const it=this.uniforms.indexOf(rt);return it!==-1&&this.uniforms.splice(it,1),this}setName(rt){return this.name=rt,this}setUsage(rt){return this.usage=rt,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(rt){this.name=rt.name,this.usage=rt.usage;const it=rt.uniforms;this.uniforms.length=0;for(let st=0,lt=it.length;st<lt;st++){const ct=Array.isArray(it[st])?it[st]:[it[st]];for(let ut=0;ut<ct.length;ut++)this.uniforms.push(ct[ut].clone())}return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(rt,it,st=1){super(rt,it),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=st}copy(rt){return super.copy(rt),this.meshPerAttribute=rt.meshPerAttribute,this}clone(rt){const it=super.clone(rt);return it.meshPerAttribute=this.meshPerAttribute,it}toJSON(rt){const it=super.toJSON(rt);return it.isInstancedInterleavedBuffer=!0,it.meshPerAttribute=this.meshPerAttribute,it}}class GLBufferAttribute{constructor(rt,it,st,lt,ct){this.isGLBufferAttribute=!0,this.name="",this.buffer=rt,this.type=it,this.itemSize=st,this.elementSize=lt,this.count=ct,this.version=0}set needsUpdate(rt){rt===!0&&this.version++}setBuffer(rt){return this.buffer=rt,this}setType(rt,it){return this.type=rt,this.elementSize=it,this}setItemSize(rt){return this.itemSize=rt,this}setCount(rt){return this.count=rt,this}}class Raycaster{constructor(rt,it,st=0,lt=1/0){this.ray=new Ray(rt,it),this.near=st,this.far=lt,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(rt,it){this.ray.set(rt,it)}setFromCamera(rt,it){it.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(it.matrixWorld),this.ray.direction.set(rt.x,rt.y,.5).unproject(it).sub(this.ray.origin).normalize(),this.camera=it):it.isOrthographicCamera?(this.ray.origin.set(rt.x,rt.y,(it.near+it.far)/(it.near-it.far)).unproject(it),this.ray.direction.set(0,0,-1).transformDirection(it.matrixWorld),this.camera=it):console.error("THREE.Raycaster: Unsupported camera type: "+it.type)}intersectObject(rt,it=!0,st=[]){return intersectObject(rt,this,st,it),st.sort(ascSort),st}intersectObjects(rt,it=!0,st=[]){for(let lt=0,ct=rt.length;lt<ct;lt++)intersectObject(rt[lt],this,st,it);return st.sort(ascSort),st}}function ascSort(nt,rt){return nt.distance-rt.distance}function intersectObject(nt,rt,it,st){if(nt.layers.test(rt.layers)&&nt.raycast(rt,it),st===!0){const lt=nt.children;for(let ct=0,ut=lt.length;ct<ut;ct++)intersectObject(lt[ct],rt,it,!0)}}class Spherical{constructor(rt=1,it=0,st=0){return this.radius=rt,this.phi=it,this.theta=st,this}set(rt,it,st){return this.radius=rt,this.phi=it,this.theta=st,this}copy(rt){return this.radius=rt.radius,this.phi=rt.phi,this.theta=rt.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(rt){return this.setFromCartesianCoords(rt.x,rt.y,rt.z)}setFromCartesianCoords(rt,it,st){return this.radius=Math.sqrt(rt*rt+it*it+st*st),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(rt,st),this.phi=Math.acos(clamp(it/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(rt=1,it=0,st=0){return this.radius=rt,this.theta=it,this.y=st,this}set(rt,it,st){return this.radius=rt,this.theta=it,this.y=st,this}copy(rt){return this.radius=rt.radius,this.theta=rt.theta,this.y=rt.y,this}setFromVector3(rt){return this.setFromCartesianCoords(rt.x,rt.y,rt.z)}setFromCartesianCoords(rt,it,st){return this.radius=Math.sqrt(rt*rt+st*st),this.theta=Math.atan2(rt,st),this.y=it,this}clone(){return new this.constructor().copy(this)}}const _vector$4=new Vector2;class Box2{constructor(rt=new Vector2(1/0,1/0),it=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=rt,this.max=it}set(rt,it){return this.min.copy(rt),this.max.copy(it),this}setFromPoints(rt){this.makeEmpty();for(let it=0,st=rt.length;it<st;it++)this.expandByPoint(rt[it]);return this}setFromCenterAndSize(rt,it){const st=_vector$4.copy(it).multiplyScalar(.5);return this.min.copy(rt).sub(st),this.max.copy(rt).add(st),this}clone(){return new this.constructor().copy(this)}copy(rt){return this.min.copy(rt.min),this.max.copy(rt.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(rt){return this.isEmpty()?rt.set(0,0):rt.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(rt){return this.isEmpty()?rt.set(0,0):rt.subVectors(this.max,this.min)}expandByPoint(rt){return this.min.min(rt),this.max.max(rt),this}expandByVector(rt){return this.min.sub(rt),this.max.add(rt),this}expandByScalar(rt){return this.min.addScalar(-rt),this.max.addScalar(rt),this}containsPoint(rt){return!(rt.x<this.min.x||rt.x>this.max.x||rt.y<this.min.y||rt.y>this.max.y)}containsBox(rt){return this.min.x<=rt.min.x&&rt.max.x<=this.max.x&&this.min.y<=rt.min.y&&rt.max.y<=this.max.y}getParameter(rt,it){return it.set((rt.x-this.min.x)/(this.max.x-this.min.x),(rt.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(rt){return!(rt.max.x<this.min.x||rt.min.x>this.max.x||rt.max.y<this.min.y||rt.min.y>this.max.y)}clampPoint(rt,it){return it.copy(rt).clamp(this.min,this.max)}distanceToPoint(rt){return this.clampPoint(rt,_vector$4).distanceTo(rt)}intersect(rt){return this.min.max(rt.min),this.max.min(rt.max),this.isEmpty()&&this.makeEmpty(),this}union(rt){return this.min.min(rt.min),this.max.max(rt.max),this}translate(rt){return this.min.add(rt),this.max.add(rt),this}equals(rt){return rt.min.equals(this.min)&&rt.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(rt=new Vector3,it=new Vector3){this.start=rt,this.end=it}set(rt,it){return this.start.copy(rt),this.end.copy(it),this}copy(rt){return this.start.copy(rt.start),this.end.copy(rt.end),this}getCenter(rt){return rt.addVectors(this.start,this.end).multiplyScalar(.5)}delta(rt){return rt.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(rt,it){return this.delta(it).multiplyScalar(rt).add(this.start)}closestPointToPointParameter(rt,it){_startP.subVectors(rt,this.start),_startEnd.subVectors(this.end,this.start);const st=_startEnd.dot(_startEnd);let ct=_startEnd.dot(_startP)/st;return it&&(ct=clamp(ct,0,1)),ct}closestPointToPoint(rt,it,st){const lt=this.closestPointToPointParameter(rt,it);return this.delta(st).multiplyScalar(lt).add(this.start)}applyMatrix4(rt){return this.start.applyMatrix4(rt),this.end.applyMatrix4(rt),this}equals(rt){return rt.start.equals(this.start)&&rt.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(rt,it){super(),this.light=rt,this.matrix=rt.matrixWorld,this.matrixAutoUpdate=!1,this.color=it,this.type="SpotLightHelper";const st=new BufferGeometry,lt=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let ut=0,dt=1,ht=32;ut<ht;ut++,dt++){const ft=ut/ht*Math.PI*2,pt=dt/ht*Math.PI*2;lt.push(Math.cos(ft),Math.sin(ft),1,Math.cos(pt),Math.sin(pt),1)}st.setAttribute("position",new Float32BufferAttribute(lt,3));const ct=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(st,ct),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const rt=this.light.distance?this.light.distance:1e3,it=rt*Math.tan(this.light.angle);this.cone.scale.set(it,it,rt),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(rt){const it=getBoneList(rt),st=new BufferGeometry,lt=[],ct=[],ut=new Color(0,0,1),dt=new Color(0,1,0);for(let ft=0;ft<it.length;ft++){const pt=it[ft];pt.parent&&pt.parent.isBone&&(lt.push(0,0,0),lt.push(0,0,0),ct.push(ut.r,ut.g,ut.b),ct.push(dt.r,dt.g,dt.b))}st.setAttribute("position",new Float32BufferAttribute(lt,3)),st.setAttribute("color",new Float32BufferAttribute(ct,3));const ht=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(st,ht),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=rt,this.bones=it,this.matrix=rt.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(rt){const it=this.bones,st=this.geometry,lt=st.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let ct=0,ut=0;ct<it.length;ct++){const dt=it[ct];dt.parent&&dt.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,dt.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),lt.setXYZ(ut,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,dt.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),lt.setXYZ(ut+1,_vector$2.x,_vector$2.y,_vector$2.z),ut+=2)}st.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(rt)}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(nt){const rt=[];nt.isBone===!0&&rt.push(nt);for(let it=0;it<nt.children.length;it++)rt.push.apply(rt,getBoneList(nt.children[it]));return rt}class PointLightHelper extends Mesh{constructor(rt,it,st){const lt=new SphereGeometry(it,4,2),ct=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(lt,ct),this.light=rt,this.color=st,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor(rt,it,st){super(),this.light=rt,this.matrix=rt.matrixWorld,this.matrixAutoUpdate=!1,this.color=st,this.type="HemisphereLightHelper";const lt=new OctahedronGeometry(it);lt.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const ct=lt.getAttribute("position"),ut=new Float32Array(ct.count*3);lt.setAttribute("color",new BufferAttribute(ut,3)),this.add(new Mesh(lt,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const rt=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const it=rt.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let st=0,lt=it.count;st<lt;st++){const ct=st<lt/2?_color1:_color2;it.setXYZ(st,ct.r,ct.g,ct.b)}it.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),rt.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(rt=10,it=10,st=4473924,lt=8947848){st=new Color(st),lt=new Color(lt);const ct=it/2,ut=rt/it,dt=rt/2,ht=[],ft=[];for(let gt=0,xt=0,yt=-dt;gt<=it;gt++,yt+=ut){ht.push(-dt,0,yt,dt,0,yt),ht.push(yt,0,-dt,yt,0,dt);const vt=gt===ct?st:lt;vt.toArray(ft,xt),xt+=3,vt.toArray(ft,xt),xt+=3,vt.toArray(ft,xt),xt+=3,vt.toArray(ft,xt),xt+=3}const pt=new BufferGeometry;pt.setAttribute("position",new Float32BufferAttribute(ht,3)),pt.setAttribute("color",new Float32BufferAttribute(ft,3));const mt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(pt,mt),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(rt=10,it=16,st=8,lt=64,ct=4473924,ut=8947848){ct=new Color(ct),ut=new Color(ut);const dt=[],ht=[];if(it>1)for(let mt=0;mt<it;mt++){const gt=mt/it*(Math.PI*2),xt=Math.sin(gt)*rt,yt=Math.cos(gt)*rt;dt.push(0,0,0),dt.push(xt,0,yt);const vt=mt&1?ct:ut;ht.push(vt.r,vt.g,vt.b),ht.push(vt.r,vt.g,vt.b)}for(let mt=0;mt<st;mt++){const gt=mt&1?ct:ut,xt=rt-rt/st*mt;for(let yt=0;yt<lt;yt++){let vt=yt/lt*(Math.PI*2),St=Math.sin(vt)*xt,wt=Math.cos(vt)*xt;dt.push(St,0,wt),ht.push(gt.r,gt.g,gt.b),vt=(yt+1)/lt*(Math.PI*2),St=Math.sin(vt)*xt,wt=Math.cos(vt)*xt,dt.push(St,0,wt),ht.push(gt.r,gt.g,gt.b)}}const ft=new BufferGeometry;ft.setAttribute("position",new Float32BufferAttribute(dt,3)),ft.setAttribute("color",new Float32BufferAttribute(ht,3));const pt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(ft,pt),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(rt,it,st){super(),this.light=rt,this.matrix=rt.matrixWorld,this.matrixAutoUpdate=!1,this.color=st,this.type="DirectionalLightHelper",it===void 0&&(it=1);let lt=new BufferGeometry;lt.setAttribute("position",new Float32BufferAttribute([-it,it,0,it,it,0,it,-it,0,-it,-it,0,-it,it,0],3));const ct=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(lt,ct),this.add(this.lightPlane),lt=new BufferGeometry,lt.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(lt,ct),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(rt){const it=new BufferGeometry,st=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),lt=[],ct=[],ut={};dt("n1","n2"),dt("n2","n4"),dt("n4","n3"),dt("n3","n1"),dt("f1","f2"),dt("f2","f4"),dt("f4","f3"),dt("f3","f1"),dt("n1","f1"),dt("n2","f2"),dt("n3","f3"),dt("n4","f4"),dt("p","n1"),dt("p","n2"),dt("p","n3"),dt("p","n4"),dt("u1","u2"),dt("u2","u3"),dt("u3","u1"),dt("c","t"),dt("p","c"),dt("cn1","cn2"),dt("cn3","cn4"),dt("cf1","cf2"),dt("cf3","cf4");function dt(yt,vt){ht(yt),ht(vt)}function ht(yt){lt.push(0,0,0),ct.push(0,0,0),ut[yt]===void 0&&(ut[yt]=[]),ut[yt].push(lt.length/3-1)}it.setAttribute("position",new Float32BufferAttribute(lt,3)),it.setAttribute("color",new Float32BufferAttribute(ct,3)),super(it,st),this.type="CameraHelper",this.camera=rt,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=rt.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=ut,this.update();const ft=new Color(16755200),pt=new Color(16711680),mt=new Color(43775),gt=new Color(16777215),xt=new Color(3355443);this.setColors(ft,pt,mt,gt,xt)}setColors(rt,it,st,lt,ct){const dt=this.geometry.getAttribute("color");dt.setXYZ(0,rt.r,rt.g,rt.b),dt.setXYZ(1,rt.r,rt.g,rt.b),dt.setXYZ(2,rt.r,rt.g,rt.b),dt.setXYZ(3,rt.r,rt.g,rt.b),dt.setXYZ(4,rt.r,rt.g,rt.b),dt.setXYZ(5,rt.r,rt.g,rt.b),dt.setXYZ(6,rt.r,rt.g,rt.b),dt.setXYZ(7,rt.r,rt.g,rt.b),dt.setXYZ(8,rt.r,rt.g,rt.b),dt.setXYZ(9,rt.r,rt.g,rt.b),dt.setXYZ(10,rt.r,rt.g,rt.b),dt.setXYZ(11,rt.r,rt.g,rt.b),dt.setXYZ(12,rt.r,rt.g,rt.b),dt.setXYZ(13,rt.r,rt.g,rt.b),dt.setXYZ(14,rt.r,rt.g,rt.b),dt.setXYZ(15,rt.r,rt.g,rt.b),dt.setXYZ(16,rt.r,rt.g,rt.b),dt.setXYZ(17,rt.r,rt.g,rt.b),dt.setXYZ(18,rt.r,rt.g,rt.b),dt.setXYZ(19,rt.r,rt.g,rt.b),dt.setXYZ(20,rt.r,rt.g,rt.b),dt.setXYZ(21,rt.r,rt.g,rt.b),dt.setXYZ(22,rt.r,rt.g,rt.b),dt.setXYZ(23,rt.r,rt.g,rt.b),dt.setXYZ(24,it.r,it.g,it.b),dt.setXYZ(25,it.r,it.g,it.b),dt.setXYZ(26,it.r,it.g,it.b),dt.setXYZ(27,it.r,it.g,it.b),dt.setXYZ(28,it.r,it.g,it.b),dt.setXYZ(29,it.r,it.g,it.b),dt.setXYZ(30,it.r,it.g,it.b),dt.setXYZ(31,it.r,it.g,it.b),dt.setXYZ(32,st.r,st.g,st.b),dt.setXYZ(33,st.r,st.g,st.b),dt.setXYZ(34,st.r,st.g,st.b),dt.setXYZ(35,st.r,st.g,st.b),dt.setXYZ(36,st.r,st.g,st.b),dt.setXYZ(37,st.r,st.g,st.b),dt.setXYZ(38,lt.r,lt.g,lt.b),dt.setXYZ(39,lt.r,lt.g,lt.b),dt.setXYZ(40,ct.r,ct.g,ct.b),dt.setXYZ(41,ct.r,ct.g,ct.b),dt.setXYZ(42,ct.r,ct.g,ct.b),dt.setXYZ(43,ct.r,ct.g,ct.b),dt.setXYZ(44,ct.r,ct.g,ct.b),dt.setXYZ(45,ct.r,ct.g,ct.b),dt.setXYZ(46,ct.r,ct.g,ct.b),dt.setXYZ(47,ct.r,ct.g,ct.b),dt.setXYZ(48,ct.r,ct.g,ct.b),dt.setXYZ(49,ct.r,ct.g,ct.b),dt.needsUpdate=!0}update(){const rt=this.geometry,it=this.pointMap,st=1,lt=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",it,rt,_camera,0,0,-1),setPoint("t",it,rt,_camera,0,0,1),setPoint("n1",it,rt,_camera,-st,-lt,-1),setPoint("n2",it,rt,_camera,st,-lt,-1),setPoint("n3",it,rt,_camera,-st,lt,-1),setPoint("n4",it,rt,_camera,st,lt,-1),setPoint("f1",it,rt,_camera,-st,-lt,1),setPoint("f2",it,rt,_camera,st,-lt,1),setPoint("f3",it,rt,_camera,-st,lt,1),setPoint("f4",it,rt,_camera,st,lt,1),setPoint("u1",it,rt,_camera,st*.7,lt*1.1,-1),setPoint("u2",it,rt,_camera,-st*.7,lt*1.1,-1),setPoint("u3",it,rt,_camera,0,lt*2,-1),setPoint("cf1",it,rt,_camera,-st,0,1),setPoint("cf2",it,rt,_camera,st,0,1),setPoint("cf3",it,rt,_camera,0,-lt,1),setPoint("cf4",it,rt,_camera,0,lt,1),setPoint("cn1",it,rt,_camera,-st,0,-1),setPoint("cn2",it,rt,_camera,st,0,-1),setPoint("cn3",it,rt,_camera,0,-lt,-1),setPoint("cn4",it,rt,_camera,0,lt,-1),rt.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(nt,rt,it,st,lt,ct,ut){_vector.set(lt,ct,ut).unproject(st);const dt=rt[nt];if(dt!==void 0){const ht=it.getAttribute("position");for(let ft=0,pt=dt.length;ft<pt;ft++)ht.setXYZ(dt[ft],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(rt,it=16776960){const st=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),lt=new Float32Array(8*3),ct=new BufferGeometry;ct.setIndex(new BufferAttribute(st,1)),ct.setAttribute("position",new BufferAttribute(lt,3)),super(ct,new LineBasicMaterial({color:it,toneMapped:!1})),this.object=rt,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(rt){if(rt!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const it=_box.min,st=_box.max,lt=this.geometry.attributes.position,ct=lt.array;ct[0]=st.x,ct[1]=st.y,ct[2]=st.z,ct[3]=it.x,ct[4]=st.y,ct[5]=st.z,ct[6]=it.x,ct[7]=it.y,ct[8]=st.z,ct[9]=st.x,ct[10]=it.y,ct[11]=st.z,ct[12]=st.x,ct[13]=st.y,ct[14]=it.z,ct[15]=it.x,ct[16]=st.y,ct[17]=it.z,ct[18]=it.x,ct[19]=it.y,ct[20]=it.z,ct[21]=st.x,ct[22]=it.y,ct[23]=it.z,lt.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(rt){return this.object=rt,this.update(),this}copy(rt,it){return super.copy(rt,it),this.object=rt.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(rt,it=16776960){const st=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),lt=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],ct=new BufferGeometry;ct.setIndex(new BufferAttribute(st,1)),ct.setAttribute("position",new Float32BufferAttribute(lt,3)),super(ct,new LineBasicMaterial({color:it,toneMapped:!1})),this.box=rt,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(rt){const it=this.box;it.isEmpty()||(it.getCenter(this.position),it.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(rt))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line{constructor(rt,it=1,st=16776960){const lt=st,ct=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],ut=new BufferGeometry;ut.setAttribute("position",new Float32BufferAttribute(ct,3)),ut.computeBoundingSphere(),super(ut,new LineBasicMaterial({color:lt,toneMapped:!1})),this.type="PlaneHelper",this.plane=rt,this.size=it;const dt=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],ht=new BufferGeometry;ht.setAttribute("position",new Float32BufferAttribute(dt,3)),ht.computeBoundingSphere(),this.add(new Mesh(ht,new MeshBasicMaterial({color:lt,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(rt){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(rt)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(rt=new Vector3(0,0,1),it=new Vector3(0,0,0),st=1,lt=16776960,ct=st*.2,ut=ct*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(it),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:lt,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:lt,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(rt),this.setLength(st,ct,ut)}setDirection(rt){if(rt.y>.99999)this.quaternion.set(0,0,0,1);else if(rt.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(rt.z,0,-rt.x).normalize();const it=Math.acos(rt.y);this.quaternion.setFromAxisAngle(_axis,it)}}setLength(rt,it=rt*.2,st=it*.2){this.line.scale.set(1,Math.max(1e-4,rt-it),1),this.line.updateMatrix(),this.cone.scale.set(st,it,st),this.cone.position.y=rt,this.cone.updateMatrix()}setColor(rt){this.line.material.color.set(rt),this.cone.material.color.set(rt)}copy(rt){return super.copy(rt,!1),this.line.copy(rt.line),this.cone.copy(rt.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(rt=1){const it=[0,0,0,rt,0,0,0,0,0,0,rt,0,0,0,0,0,0,rt],st=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],lt=new BufferGeometry;lt.setAttribute("position",new Float32BufferAttribute(it,3)),lt.setAttribute("color",new Float32BufferAttribute(st,3));const ct=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(lt,ct),this.type="AxesHelper"}setColors(rt,it,st){const lt=new Color,ct=this.geometry.attributes.color.array;return lt.set(rt),lt.toArray(ct,0),lt.toArray(ct,3),lt.set(it),lt.toArray(ct,6),lt.toArray(ct,9),lt.set(st),lt.toArray(ct,12),lt.toArray(ct,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(rt,it){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(rt,it),this}lineTo(rt,it){return this.currentPath.lineTo(rt,it),this}quadraticCurveTo(rt,it,st,lt){return this.currentPath.quadraticCurveTo(rt,it,st,lt),this}bezierCurveTo(rt,it,st,lt,ct,ut){return this.currentPath.bezierCurveTo(rt,it,st,lt,ct,ut),this}splineThru(rt){return this.currentPath.splineThru(rt),this}toShapes(rt){function it(wt){const Et=[];for(let Rt=0,Tt=wt.length;Rt<Tt;Rt++){const It=wt[Rt],At=new Shape;At.curves=It.curves,Et.push(At)}return Et}function st(wt,Et){const Rt=Et.length;let Tt=!1;for(let It=Rt-1,At=0;At<Rt;It=At++){let Dt=Et[It],jt=Et[At],Ft=jt.x-Dt.x,Lt=jt.y-Dt.y;if(Math.abs(Lt)>Number.EPSILON){if(Lt<0&&(Dt=Et[At],Ft=-Ft,jt=Et[It],Lt=-Lt),wt.y<Dt.y||wt.y>jt.y)continue;if(wt.y===Dt.y){if(wt.x===Dt.x)return!0}else{const Mt=Lt*(wt.x-Dt.x)-Ft*(wt.y-Dt.y);if(Mt===0)return!0;if(Mt<0)continue;Tt=!Tt}}else{if(wt.y!==Dt.y)continue;if(jt.x<=wt.x&&wt.x<=Dt.x||Dt.x<=wt.x&&wt.x<=jt.x)return!0}}return Tt}const lt=ShapeUtils.isClockWise,ct=this.subPaths;if(ct.length===0)return[];let ut,dt,ht;const ft=[];if(ct.length===1)return dt=ct[0],ht=new Shape,ht.curves=dt.curves,ft.push(ht),ft;let pt=!lt(ct[0].getPoints());pt=rt?!pt:pt;const mt=[],gt=[];let xt=[],yt=0,vt;gt[yt]=void 0,xt[yt]=[];for(let wt=0,Et=ct.length;wt<Et;wt++)dt=ct[wt],vt=dt.getPoints(),ut=lt(vt),ut=rt?!ut:ut,ut?(!pt&&gt[yt]&&yt++,gt[yt]={s:new Shape,p:vt},gt[yt].s.curves=dt.curves,pt&&yt++,xt[yt]=[]):xt[yt].push({h:dt,p:vt[0]});if(!gt[0])return it(ct);if(gt.length>1){let wt=!1,Et=0;for(let Rt=0,Tt=gt.length;Rt<Tt;Rt++)mt[Rt]=[];for(let Rt=0,Tt=gt.length;Rt<Tt;Rt++){const It=xt[Rt];for(let At=0;At<It.length;At++){const Dt=It[At];let jt=!0;for(let Ft=0;Ft<gt.length;Ft++)st(Dt.p,gt[Ft].p)&&(Rt!==Ft&&Et++,jt?(jt=!1,mt[Ft].push(Dt)):wt=!0);jt&&mt[Rt].push(Dt)}}Et>0&&wt===!1&&(xt=mt)}let St;for(let wt=0,Et=gt.length;wt<Et;wt++){ht=gt[wt].s,ft.push(ht),St=xt[wt];for(let Rt=0,Tt=St.length;Rt<Tt;Rt++)ht.holes.push(St[Rt].h)}return ft}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);const THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AgXToneMapping,AlphaFormat,AlwaysCompare,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,AttachedBindMode,Audio:Audio$1,AudioAnalyser:AudioAnalyser$1,AudioContext:AudioContext$1,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,BatchedMesh,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleGeometry,ClampToEdgeWrapping,Clock,Color,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedCubeTexture,CompressedTexture,CompressedTextureLoader,ConeGeometry,ConstantAlphaFactor,ConstantColorFactor,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DetachedBindMode,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DisplayP3ColorSpace,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualCompare,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,Float64BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,GLBufferAttribute,GLSL1,GLSL3,GreaterCompare,GreaterDepth,GreaterEqualCompare,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheGeometry,Layers,LessCompare,LessDepth,LessEqualCompare,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearDisplayP3ColorSpace,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace,LinearToneMapping,LinearTransfer,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverCompare,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualCompare,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronGeometry,OneFactor,OneMinusConstantAlphaFactor,OneMinusConstantColorFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,P3Primaries,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGB_BPTC_SIGNED_Format,RGB_BPTC_UNSIGNED_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,Rec709Primaries,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RenderTarget,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace,SRGBTransfer,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight:SpotLight$1,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronGeometry,Texture,TextureLoader,TorusGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeGeometry,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoTexture,WebGL1Renderer,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCoordinateSystem,WebGLCubeRenderTarget,WebGLMultipleRenderTargets,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WebGPUCoordinateSystem,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,_SRGBAFormat,createCanvasElement,sRGBEncoding},Symbol.toStringTag,{value:"Module"}));var constants={exports:{}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production_min.ConcurrentRoot=1;reactReconcilerConstants_production_min.ContinuousEventPriority=4;reactReconcilerConstants_production_min.DefaultEventPriority=16;reactReconcilerConstants_production_min.DiscreteEventPriority=1;reactReconcilerConstants_production_min.IdleEventPriority=536870912;reactReconcilerConstants_production_min.LegacyRoot=0;constants.exports=reactReconcilerConstants_production_min;var constantsExports=constants.exports;function createStore$1(nt){let rt;const it=new Set,st=(ft,pt)=>{const mt=typeof ft=="function"?ft(rt):ft;if(mt!==rt){const gt=rt;rt=pt?mt:Object.assign({},rt,mt),it.forEach(xt=>xt(rt,gt))}},lt=()=>rt,ct=(ft,pt=lt,mt=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let gt=pt(rt);function xt(){const yt=pt(rt);if(!mt(gt,yt)){const vt=gt;ft(gt=yt,vt)}}return it.add(xt),()=>it.delete(xt)},ht={setState:st,getState:lt,subscribe:(ft,pt,mt)=>pt||mt?ct(ft,pt,mt):(it.add(ft),()=>it.delete(ft)),destroy:()=>it.clear()};return rt=nt(st,lt,ht),ht}const isSSR=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$1=isSSR?reactExports.useEffect:reactExports.useLayoutEffect;function create(nt){const rt=typeof nt=="function"?createStore$1(nt):nt,it=(st=rt.getState,lt=Object.is)=>{const[,ct]=reactExports.useReducer(St=>St+1,0),ut=rt.getState(),dt=reactExports.useRef(ut),ht=reactExports.useRef(st),ft=reactExports.useRef(lt),pt=reactExports.useRef(!1),mt=reactExports.useRef();mt.current===void 0&&(mt.current=st(ut));let gt,xt=!1;(dt.current!==ut||ht.current!==st||ft.current!==lt||pt.current)&&(gt=st(ut),xt=!lt(mt.current,gt)),useIsomorphicLayoutEffect$1(()=>{xt&&(mt.current=gt),dt.current=ut,ht.current=st,ft.current=lt,pt.current=!1});const yt=reactExports.useRef(ut);useIsomorphicLayoutEffect$1(()=>{const St=()=>{try{const Et=rt.getState(),Rt=ht.current(Et);ft.current(mt.current,Rt)||(dt.current=Et,mt.current=Rt,ct())}catch{pt.current=!0,ct()}},wt=rt.subscribe(St);return rt.getState()!==yt.current&&St(),wt},[]);const vt=xt?gt:mt.current;return reactExports.useDebugValue(vt),vt};return Object.assign(it,rt),it[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const st=[it,rt];return{next(){const lt=st.length<=0;return{value:st.shift(),done:lt}}}},it}var reactReconciler={exports:{}},scheduler$1={exports:{}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(nt){function rt(Bt,Ht){var Gt=Bt.length;Bt.push(Ht);e:for(;0<Gt;){var Xt=Gt-1>>>1,Zt=Bt[Xt];if(0<lt(Zt,Ht))Bt[Xt]=Ht,Bt[Gt]=Zt,Gt=Xt;else break e}}function it(Bt){return Bt.length===0?null:Bt[0]}function st(Bt){if(Bt.length===0)return null;var Ht=Bt[0],Gt=Bt.pop();if(Gt!==Ht){Bt[0]=Gt;e:for(var Xt=0,Zt=Bt.length,hr=Zt>>>1;Xt<hr;){var nr=2*(Xt+1)-1,ir=Bt[nr],yr=nr+1,Cr=Bt[yr];if(0>lt(ir,Gt))yr<Zt&&0>lt(Cr,ir)?(Bt[Xt]=Cr,Bt[yr]=Gt,Xt=yr):(Bt[Xt]=ir,Bt[nr]=Gt,Xt=nr);else if(yr<Zt&&0>lt(Cr,Gt))Bt[Xt]=Cr,Bt[yr]=Gt,Xt=yr;else break e}}return Ht}function lt(Bt,Ht){var Gt=Bt.sortIndex-Ht.sortIndex;return Gt!==0?Gt:Bt.id-Ht.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ct=performance;nt.unstable_now=function(){return ct.now()}}else{var ut=Date,dt=ut.now();nt.unstable_now=function(){return ut.now()-dt}}var ht=[],ft=[],pt=1,mt=null,gt=3,xt=!1,yt=!1,vt=!1,St=typeof setTimeout=="function"?setTimeout:null,wt=typeof clearTimeout=="function"?clearTimeout:null,Et=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Rt(Bt){for(var Ht=it(ft);Ht!==null;){if(Ht.callback===null)st(ft);else if(Ht.startTime<=Bt)st(ft),Ht.sortIndex=Ht.expirationTime,rt(ht,Ht);else break;Ht=it(ft)}}function Tt(Bt){if(vt=!1,Rt(Bt),!yt)if(it(ht)!==null)yt=!0,Ut(It);else{var Ht=it(ft);Ht!==null&&zt(Tt,Ht.startTime-Bt)}}function It(Bt,Ht){yt=!1,vt&&(vt=!1,wt(jt),jt=-1),xt=!0;var Gt=gt;try{for(Rt(Ht),mt=it(ht);mt!==null&&(!(mt.expirationTime>Ht)||Bt&&!Mt());){var Xt=mt.callback;if(typeof Xt=="function"){mt.callback=null,gt=mt.priorityLevel;var Zt=Xt(mt.expirationTime<=Ht);Ht=nt.unstable_now(),typeof Zt=="function"?mt.callback=Zt:mt===it(ht)&&st(ht),Rt(Ht)}else st(ht);mt=it(ht)}if(mt!==null)var hr=!0;else{var nr=it(ft);nr!==null&&zt(Tt,nr.startTime-Ht),hr=!1}return hr}finally{mt=null,gt=Gt,xt=!1}}var At=!1,Dt=null,jt=-1,Ft=5,Lt=-1;function Mt(){return!(nt.unstable_now()-Lt<Ft)}function Ot(){if(Dt!==null){var Bt=nt.unstable_now();Lt=Bt;var Ht=!0;try{Ht=Dt(!0,Bt)}finally{Ht?Nt():(At=!1,Dt=null)}}else At=!1}var Nt;if(typeof Et=="function")Nt=function(){Et(Ot)};else if(typeof MessageChannel<"u"){var $t=new MessageChannel,Vt=$t.port2;$t.port1.onmessage=Ot,Nt=function(){Vt.postMessage(null)}}else Nt=function(){St(Ot,0)};function Ut(Bt){Dt=Bt,At||(At=!0,Nt())}function zt(Bt,Ht){jt=St(function(){Bt(nt.unstable_now())},Ht)}nt.unstable_IdlePriority=5,nt.unstable_ImmediatePriority=1,nt.unstable_LowPriority=4,nt.unstable_NormalPriority=3,nt.unstable_Profiling=null,nt.unstable_UserBlockingPriority=2,nt.unstable_cancelCallback=function(Bt){Bt.callback=null},nt.unstable_continueExecution=function(){yt||xt||(yt=!0,Ut(It))},nt.unstable_forceFrameRate=function(Bt){0>Bt||125<Bt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ft=0<Bt?Math.floor(1e3/Bt):5},nt.unstable_getCurrentPriorityLevel=function(){return gt},nt.unstable_getFirstCallbackNode=function(){return it(ht)},nt.unstable_next=function(Bt){switch(gt){case 1:case 2:case 3:var Ht=3;break;default:Ht=gt}var Gt=gt;gt=Ht;try{return Bt()}finally{gt=Gt}},nt.unstable_pauseExecution=function(){},nt.unstable_requestPaint=function(){},nt.unstable_runWithPriority=function(Bt,Ht){switch(Bt){case 1:case 2:case 3:case 4:case 5:break;default:Bt=3}var Gt=gt;gt=Bt;try{return Ht()}finally{gt=Gt}},nt.unstable_scheduleCallback=function(Bt,Ht,Gt){var Xt=nt.unstable_now();switch(typeof Gt=="object"&&Gt!==null?(Gt=Gt.delay,Gt=typeof Gt=="number"&&0<Gt?Xt+Gt:Xt):Gt=Xt,Bt){case 1:var Zt=-1;break;case 2:Zt=250;break;case 5:Zt=1073741823;break;case 4:Zt=1e4;break;default:Zt=5e3}return Zt=Gt+Zt,Bt={id:pt++,callback:Ht,priorityLevel:Bt,startTime:Gt,expirationTime:Zt,sortIndex:-1},Gt>Xt?(Bt.sortIndex=Gt,rt(ft,Bt),it(ht)===null&&Bt===it(ft)&&(vt?(wt(jt),jt=-1):vt=!0,zt(Tt,Gt-Xt))):(Bt.sortIndex=Zt,rt(ht,Bt),yt||xt||(yt=!0,Ut(It))),Bt},nt.unstable_shouldYield=Mt,nt.unstable_wrapCallback=function(Bt){var Ht=gt;return function(){var Gt=gt;gt=Ht;try{return Bt.apply(this,arguments)}finally{gt=Gt}}}}(scheduler_production_min$1)),scheduler_production_min$1}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler$1.exports=requireScheduler_production_min()),scheduler$1.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function(rt){var it={},st=reactExports,lt=requireScheduler(),ct=Object.assign;function ut(Pt){for(var kt="https://reactjs.org/docs/error-decoder.html?invariant="+Pt,Wt=1;Wt<arguments.length;Wt++)kt+="&args[]="+encodeURIComponent(arguments[Wt]);return"Minified React error #"+Pt+"; visit "+kt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dt=st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ht=Symbol.for("react.element"),ft=Symbol.for("react.portal"),pt=Symbol.for("react.fragment"),mt=Symbol.for("react.strict_mode"),gt=Symbol.for("react.profiler"),xt=Symbol.for("react.provider"),yt=Symbol.for("react.context"),vt=Symbol.for("react.forward_ref"),St=Symbol.for("react.suspense"),wt=Symbol.for("react.suspense_list"),Et=Symbol.for("react.memo"),Rt=Symbol.for("react.lazy"),Tt=Symbol.for("react.offscreen"),It=Symbol.iterator;function At(Pt){return Pt===null||typeof Pt!="object"?null:(Pt=It&&Pt[It]||Pt["@@iterator"],typeof Pt=="function"?Pt:null)}function Dt(Pt){if(Pt==null)return null;if(typeof Pt=="function")return Pt.displayName||Pt.name||null;if(typeof Pt=="string")return Pt;switch(Pt){case pt:return"Fragment";case ft:return"Portal";case gt:return"Profiler";case mt:return"StrictMode";case St:return"Suspense";case wt:return"SuspenseList"}if(typeof Pt=="object")switch(Pt.$$typeof){case yt:return(Pt.displayName||"Context")+".Consumer";case xt:return(Pt._context.displayName||"Context")+".Provider";case vt:var kt=Pt.render;return Pt=Pt.displayName,Pt||(Pt=kt.displayName||kt.name||"",Pt=Pt!==""?"ForwardRef("+Pt+")":"ForwardRef"),Pt;case Et:return kt=Pt.displayName||null,kt!==null?kt:Dt(Pt.type)||"Memo";case Rt:kt=Pt._payload,Pt=Pt._init;try{return Dt(Pt(kt))}catch{}}return null}function jt(Pt){var kt=Pt.type;switch(Pt.tag){case 24:return"Cache";case 9:return(kt.displayName||"Context")+".Consumer";case 10:return(kt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return Pt=kt.render,Pt=Pt.displayName||Pt.name||"",kt.displayName||(Pt!==""?"ForwardRef("+Pt+")":"ForwardRef");case 7:return"Fragment";case 5:return kt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dt(kt);case 8:return kt===mt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof kt=="function")return kt.displayName||kt.name||null;if(typeof kt=="string")return kt}return null}function Ft(Pt){var kt=Pt,Wt=Pt;if(Pt.alternate)for(;kt.return;)kt=kt.return;else{Pt=kt;do kt=Pt,kt.flags&4098&&(Wt=kt.return),Pt=kt.return;while(Pt)}return kt.tag===3?Wt:null}function Lt(Pt){if(Ft(Pt)!==Pt)throw Error(ut(188))}function Mt(Pt){var kt=Pt.alternate;if(!kt){if(kt=Ft(Pt),kt===null)throw Error(ut(188));return kt!==Pt?null:Pt}for(var Wt=Pt,Kt=kt;;){var Qt=Wt.return;if(Qt===null)break;var lr=Qt.alternate;if(lr===null){if(Kt=Qt.return,Kt!==null){Wt=Kt;continue}break}if(Qt.child===lr.child){for(lr=Qt.child;lr;){if(lr===Wt)return Lt(Qt),Pt;if(lr===Kt)return Lt(Qt),kt;lr=lr.sibling}throw Error(ut(188))}if(Wt.return!==Kt.return)Wt=Qt,Kt=lr;else{for(var Gr=!1,_n=Qt.child;_n;){if(_n===Wt){Gr=!0,Wt=Qt,Kt=lr;break}if(_n===Kt){Gr=!0,Kt=Qt,Wt=lr;break}_n=_n.sibling}if(!Gr){for(_n=lr.child;_n;){if(_n===Wt){Gr=!0,Wt=lr,Kt=Qt;break}if(_n===Kt){Gr=!0,Kt=lr,Wt=Qt;break}_n=_n.sibling}if(!Gr)throw Error(ut(189))}}if(Wt.alternate!==Kt)throw Error(ut(190))}if(Wt.tag!==3)throw Error(ut(188));return Wt.stateNode.current===Wt?Pt:kt}function Ot(Pt){return Pt=Mt(Pt),Pt!==null?Nt(Pt):null}function Nt(Pt){if(Pt.tag===5||Pt.tag===6)return Pt;for(Pt=Pt.child;Pt!==null;){var kt=Nt(Pt);if(kt!==null)return kt;Pt=Pt.sibling}return null}function $t(Pt){if(Pt.tag===5||Pt.tag===6)return Pt;for(Pt=Pt.child;Pt!==null;){if(Pt.tag!==4){var kt=$t(Pt);if(kt!==null)return kt}Pt=Pt.sibling}return null}var Vt=Array.isArray,Ut=rt.getPublicInstance,zt=rt.getRootHostContext,Bt=rt.getChildHostContext,Ht=rt.prepareForCommit,Gt=rt.resetAfterCommit,Xt=rt.createInstance,Zt=rt.appendInitialChild,hr=rt.finalizeInitialChildren,nr=rt.prepareUpdate,ir=rt.shouldSetTextContent,yr=rt.createTextInstance,Cr=rt.scheduleTimeout,Sr=rt.cancelTimeout,xr=rt.noTimeout,gr=rt.isPrimaryRenderer,_r=rt.supportsMutation,fr=rt.supportsPersistence,Nr=rt.supportsHydration,Tr=rt.getInstanceFromNode,Hr=rt.preparePortalMount,Vr=rt.getCurrentEventPriority,mn=rt.detachDeletedInstance,tn=rt.supportsMicrotasks,er=rt.scheduleMicrotask,tr=rt.supportsTestSelectors,vr=rt.findFiberRoot,Fr=rt.getBoundingRect,Kr=rt.getTextContent,qr=rt.isHiddenSubtree,pn=rt.matchAccessibilityRole,En=rt.setFocusIfFocusable,Rn=rt.setupIntersectionObserver,Qn=rt.appendChild,Ln=rt.appendChildToContainer,ln=rt.commitTextUpdate,Xn=rt.commitMount,Yr=rt.commitUpdate,Qr=rt.insertBefore,Mn=rt.insertInContainerBefore,Ar=rt.removeChild,or=rt.removeChildFromContainer,Wr=rt.resetTextContent,Ir=rt.hideInstance,dn=rt.hideTextInstance,kn=rt.unhideInstance,Mr=rt.unhideTextInstance,vn=rt.clearContainer,kr=rt.cloneInstance,Er=rt.createContainerChildSet,Ur=rt.appendChildToContainerChildSet,on=rt.finalizeContainerChildren,fn=rt.replaceContainerChildren,Kn=rt.cloneHiddenInstance,es=rt.cloneHiddenTextInstance,Zn=rt.canHydrateInstance,Dn=rt.canHydrateTextInstance,ss=rt.canHydrateSuspenseInstance,$s=rt.isSuspenseInstancePending,ws=rt.isSuspenseInstanceFallback,As=rt.registerSuspenseInstanceRetry,Vs=rt.getNextHydratableSibling,Fo=rt.getFirstHydratableChild,Lo=rt.getFirstHydratableChildWithinContainer,Ho=rt.getFirstHydratableChildWithinSuspenseInstance,Bo=rt.hydrateInstance,Kl=rt.hydrateTextInstance,Nl=rt.hydrateSuspenseInstance,Lr=rt.getNextHydratableInstanceAfterSuspenseInstance,wn=rt.commitHydratedContainer,On=rt.commitHydratedSuspenseInstance,In=rt.clearSuspenseBoundary,Br=rt.clearSuspenseBoundaryFromContainer,gs=rt.shouldDeleteUnhydratedTailInstances,os=rt.didNotMatchHydratedContainerTextInstance,ys=rt.didNotMatchHydratedTextInstance,Os;function Zs(Pt){if(Os===void 0)try{throw Error()}catch(Wt){var kt=Wt.stack.trim().match(/\n( *(at )?)/);Os=kt&&kt[1]||""}return`
`+Os+Pt}var Ys=!1;function un(Pt,kt){if(!Pt||Ys)return"";Ys=!0;var Wt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(kt)if(kt=function(){throw Error()},Object.defineProperty(kt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(kt,[])}catch(ms){var Kt=ms}Reflect.construct(Pt,[],kt)}else{try{kt.call()}catch(ms){Kt=ms}Pt.call(kt.prototype)}else{try{throw Error()}catch(ms){Kt=ms}Pt()}}catch(ms){if(ms&&Kt&&typeof ms.stack=="string"){for(var Qt=ms.stack.split(`
`),lr=Kt.stack.split(`
`),Gr=Qt.length-1,_n=lr.length-1;1<=Gr&&0<=_n&&Qt[Gr]!==lr[_n];)_n--;for(;1<=Gr&&0<=_n;Gr--,_n--)if(Qt[Gr]!==lr[_n]){if(Gr!==1||_n!==1)do if(Gr--,_n--,0>_n||Qt[Gr]!==lr[_n]){var qn=`
`+Qt[Gr].replace(" at new "," at ");return Pt.displayName&&qn.includes("<anonymous>")&&(qn=qn.replace("<anonymous>",Pt.displayName)),qn}while(1<=Gr&&0<=_n);break}}}finally{Ys=!1,Error.prepareStackTrace=Wt}return(Pt=Pt?Pt.displayName||Pt.name:"")?Zs(Pt):""}var Vo=Object.prototype.hasOwnProperty,xn=[],An=-1;function Hn(Pt){return{current:Pt}}function Un(Pt){0>An||(Pt.current=xn[An],xn[An]=null,An--)}function Gn(Pt,kt){An++,xn[An]=Pt.current,Pt.current=kt}var Hs={},ps=Hn(Hs),Us=Hn(!1),js=Hs;function yo(Pt,kt){var Wt=Pt.type.contextTypes;if(!Wt)return Hs;var Kt=Pt.stateNode;if(Kt&&Kt.__reactInternalMemoizedUnmaskedChildContext===kt)return Kt.__reactInternalMemoizedMaskedChildContext;var Qt={},lr;for(lr in Wt)Qt[lr]=kt[lr];return Kt&&(Pt=Pt.stateNode,Pt.__reactInternalMemoizedUnmaskedChildContext=kt,Pt.__reactInternalMemoizedMaskedChildContext=Qt),Qt}function Bs(Pt){return Pt=Pt.childContextTypes,Pt!=null}function Ws(){Un(Us),Un(ps)}function io(Pt,kt,Wt){if(ps.current!==Hs)throw Error(ut(168));Gn(ps,kt),Gn(Us,Wt)}function na(Pt,kt,Wt){var Kt=Pt.stateNode;if(kt=kt.childContextTypes,typeof Kt.getChildContext!="function")return Wt;Kt=Kt.getChildContext();for(var Qt in Kt)if(!(Qt in kt))throw Error(ut(108,jt(Pt)||"Unknown",Qt));return ct({},Wt,Kt)}function To(Pt){return Pt=(Pt=Pt.stateNode)&&Pt.__reactInternalMemoizedMergedChildContext||Hs,js=ps.current,Gn(ps,Pt),Gn(Us,Us.current),!0}function _l(Pt,kt,Wt){var Kt=Pt.stateNode;if(!Kt)throw Error(ut(169));Wt?(Pt=na(Pt,kt,js),Kt.__reactInternalMemoizedMergedChildContext=Pt,Un(Us),Un(ps),Gn(ps,Pt)):Un(Us),Gn(Us,Wt)}var Go=Math.clz32?Math.clz32:$l,zl=Math.log,Yl=Math.LN2;function $l(Pt){return Pt>>>=0,Pt===0?32:31-(zl(Pt)/Yl|0)|0}var Ml=64,Hl=4194304;function Fl(Pt){switch(Pt&-Pt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Pt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return Pt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return Pt}}function zo(Pt,kt){var Wt=Pt.pendingLanes;if(Wt===0)return 0;var Kt=0,Qt=Pt.suspendedLanes,lr=Pt.pingedLanes,Gr=Wt&268435455;if(Gr!==0){var _n=Gr&~Qt;_n!==0?Kt=Fl(_n):(lr&=Gr,lr!==0&&(Kt=Fl(lr)))}else Gr=Wt&~Qt,Gr!==0?Kt=Fl(Gr):lr!==0&&(Kt=Fl(lr));if(Kt===0)return 0;if(kt!==0&&kt!==Kt&&!(kt&Qt)&&(Qt=Kt&-Kt,lr=kt&-kt,Qt>=lr||Qt===16&&(lr&4194240)!==0))return kt;if(Kt&4&&(Kt|=Wt&16),kt=Pt.entangledLanes,kt!==0)for(Pt=Pt.entanglements,kt&=Kt;0<kt;)Wt=31-Go(kt),Qt=1<<Wt,Kt|=Pt[Wt],kt&=~Qt;return Kt}function _p(Pt,kt){switch(Pt){case 1:case 2:case 4:return kt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return kt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ap(Pt,kt){for(var Wt=Pt.suspendedLanes,Kt=Pt.pingedLanes,Qt=Pt.expirationTimes,lr=Pt.pendingLanes;0<lr;){var Gr=31-Go(lr),_n=1<<Gr,qn=Qt[Gr];qn===-1?(!(_n&Wt)||_n&Kt)&&(Qt[Gr]=_p(_n,kt)):qn<=kt&&(Pt.expiredLanes|=_n),lr&=~_n}}function Qu(Pt){return Pt=Pt.pendingLanes&-1073741825,Pt!==0?Pt:Pt&1073741824?1073741824:0}function $u(Pt){for(var kt=[],Wt=0;31>Wt;Wt++)kt.push(Pt);return kt}function Ju(Pt,kt,Wt){Pt.pendingLanes|=kt,kt!==536870912&&(Pt.suspendedLanes=0,Pt.pingedLanes=0),Pt=Pt.eventTimes,kt=31-Go(kt),Pt[kt]=Wt}function xp(Pt,kt){var Wt=Pt.pendingLanes&~kt;Pt.pendingLanes=kt,Pt.suspendedLanes=0,Pt.pingedLanes=0,Pt.expiredLanes&=kt,Pt.mutableReadLanes&=kt,Pt.entangledLanes&=kt,kt=Pt.entanglements;var Kt=Pt.eventTimes;for(Pt=Pt.expirationTimes;0<Wt;){var Qt=31-Go(Wt),lr=1<<Qt;kt[Qt]=0,Kt[Qt]=-1,Pt[Qt]=-1,Wt&=~lr}}function kp(Pt,kt){var Wt=Pt.entangledLanes|=kt;for(Pt=Pt.entanglements;Wt;){var Kt=31-Go(Wt),Qt=1<<Kt;Qt&kt|Pt[Kt]&kt&&(Pt[Kt]|=kt),Wt&=~Qt}}var Mo=0;function Is(Pt){return Pt&=-Pt,1<Pt?4<Pt?Pt&268435455?16:536870912:4:1}var jr=lt.unstable_scheduleCallback,cs=lt.unstable_cancelCallback,uo=lt.unstable_shouldYield,Wl=lt.unstable_requestPaint,Uo=lt.unstable_now,ju=lt.unstable_ImmediatePriority,sm=lt.unstable_UserBlockingPriority,Wp=lt.unstable_NormalPriority,Jp=lt.unstable_IdlePriority,Fp=null,Ll=null;function em(Pt){if(Ll&&typeof Ll.onCommitFiberRoot=="function")try{Ll.onCommitFiberRoot(Fp,Pt,void 0,(Pt.current.flags&128)===128)}catch{}}function mu(Pt,kt){return Pt===kt&&(Pt!==0||1/Pt===1/kt)||Pt!==Pt&&kt!==kt}var Wo=typeof Object.is=="function"?Object.is:mu,gu=null,Bl=!1,Qs=!1;function Sp(Pt){gu===null?gu=[Pt]:gu.push(Pt)}function ga(Pt){Bl=!0,Sp(Pt)}function iu(){if(!Qs&&gu!==null){Qs=!0;var Pt=0,kt=Mo;try{var Wt=gu;for(Mo=1;Pt<Wt.length;Pt++){var Kt=Wt[Pt];do Kt=Kt(!0);while(Kt!==null)}gu=null,Bl=!1}catch(Qt){throw gu!==null&&(gu=gu.slice(Pt+1)),jr(ju,iu),Qt}finally{Mo=kt,Qs=!1}}return null}var _d=dt.ReactCurrentBatchConfig;function _o(Pt,kt){if(Wo(Pt,kt))return!0;if(typeof Pt!="object"||Pt===null||typeof kt!="object"||kt===null)return!1;var Wt=Object.keys(Pt),Kt=Object.keys(kt);if(Wt.length!==Kt.length)return!1;for(Kt=0;Kt<Wt.length;Kt++){var Qt=Wt[Kt];if(!Vo.call(kt,Qt)||!Wo(Pt[Qt],kt[Qt]))return!1}return!0}function Bp(Pt){switch(Pt.tag){case 5:return Zs(Pt.type);case 16:return Zs("Lazy");case 13:return Zs("Suspense");case 19:return Zs("SuspenseList");case 0:case 2:case 15:return Pt=un(Pt.type,!1),Pt;case 11:return Pt=un(Pt.type.render,!1),Pt;case 1:return Pt=un(Pt.type,!0),Pt;default:return""}}function su(Pt,kt){if(Pt&&Pt.defaultProps){kt=ct({},kt),Pt=Pt.defaultProps;for(var Wt in Pt)kt[Wt]===void 0&&(kt[Wt]=Pt[Wt]);return kt}return kt}var vu=Hn(null),wp=null,_a=null,Ul=null;function Au(){Ul=_a=wp=null}function Gp(Pt,kt,Wt){gr?(Gn(vu,kt._currentValue),kt._currentValue=Wt):(Gn(vu,kt._currentValue2),kt._currentValue2=Wt)}function Ip(Pt){var kt=vu.current;Un(vu),gr?Pt._currentValue=kt:Pt._currentValue2=kt}function Up(Pt,kt,Wt){for(;Pt!==null;){var Kt=Pt.alternate;if((Pt.childLanes&kt)!==kt?(Pt.childLanes|=kt,Kt!==null&&(Kt.childLanes|=kt)):Kt!==null&&(Kt.childLanes&kt)!==kt&&(Kt.childLanes|=kt),Pt===Wt)break;Pt=Pt.return}}function nn(Pt,kt){wp=Pt,Ul=_a=null,Pt=Pt.dependencies,Pt!==null&&Pt.firstContext!==null&&(Pt.lanes&kt&&(oo=!0),Pt.firstContext=null)}function xs(Pt){var kt=gr?Pt._currentValue:Pt._currentValue2;if(Ul!==Pt)if(Pt={context:Pt,memoizedValue:kt,next:null},_a===null){if(wp===null)throw Error(ut(308));_a=Pt,wp.dependencies={lanes:0,firstContext:Pt}}else _a=_a.next=Pt;return kt}var yu=null,Fs=!1;function Vp(Pt){Pt.updateQueue={baseState:Pt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ds(Pt,kt){Pt=Pt.updateQueue,kt.updateQueue===Pt&&(kt.updateQueue={baseState:Pt.baseState,firstBaseUpdate:Pt.firstBaseUpdate,lastBaseUpdate:Pt.lastBaseUpdate,shared:Pt.shared,effects:Pt.effects})}function Yo(Pt,kt){return{eventTime:Pt,lane:kt,tag:0,payload:null,callback:null,next:null}}function _u(Pt,kt){var Wt=Pt.updateQueue;Wt!==null&&(Wt=Wt.shared,ru!==null&&Pt.mode&1&&!(jo&2)?(Pt=Wt.interleaved,Pt===null?(kt.next=kt,yu===null?yu=[Wt]:yu.push(Wt)):(kt.next=Pt.next,Pt.next=kt),Wt.interleaved=kt):(Pt=Wt.pending,Pt===null?kt.next=kt:(kt.next=Pt.next,Pt.next=kt),Wt.pending=kt))}function ou(Pt,kt,Wt){if(kt=kt.updateQueue,kt!==null&&(kt=kt.shared,(Wt&4194240)!==0)){var Kt=kt.lanes;Kt&=Pt.pendingLanes,Wt|=Kt,kt.lanes=Wt,kp(Pt,Wt)}}function qp(Pt,kt){var Wt=Pt.updateQueue,Kt=Pt.alternate;if(Kt!==null&&(Kt=Kt.updateQueue,Wt===Kt)){var Qt=null,lr=null;if(Wt=Wt.firstBaseUpdate,Wt!==null){do{var Gr={eventTime:Wt.eventTime,lane:Wt.lane,tag:Wt.tag,payload:Wt.payload,callback:Wt.callback,next:null};lr===null?Qt=lr=Gr:lr=lr.next=Gr,Wt=Wt.next}while(Wt!==null);lr===null?Qt=lr=kt:lr=lr.next=kt}else Qt=lr=kt;Wt={baseState:Kt.baseState,firstBaseUpdate:Qt,lastBaseUpdate:lr,shared:Kt.shared,effects:Kt.effects},Pt.updateQueue=Wt;return}Pt=Wt.lastBaseUpdate,Pt===null?Wt.firstBaseUpdate=kt:Pt.next=kt,Wt.lastBaseUpdate=kt}function Lp(Pt,kt,Wt,Kt){var Qt=Pt.updateQueue;Fs=!1;var lr=Qt.firstBaseUpdate,Gr=Qt.lastBaseUpdate,_n=Qt.shared.pending;if(_n!==null){Qt.shared.pending=null;var qn=_n,ms=qn.next;qn.next=null,Gr===null?lr=ms:Gr.next=ms,Gr=qn;var Gs=Pt.alternate;Gs!==null&&(Gs=Gs.updateQueue,_n=Gs.lastBaseUpdate,_n!==Gr&&(_n===null?Gs.firstBaseUpdate=ms:_n.next=ms,Gs.lastBaseUpdate=qn))}if(lr!==null){var Ao=Qt.baseState;Gr=0,Gs=ms=qn=null,_n=lr;do{var go=_n.lane,Al=_n.eventTime;if((Kt&go)===go){Gs!==null&&(Gs=Gs.next={eventTime:Al,lane:0,tag:_n.tag,payload:_n.payload,callback:_n.callback,next:null});e:{var lo=Pt,Yu=_n;switch(go=kt,Al=Wt,Yu.tag){case 1:if(lo=Yu.payload,typeof lo=="function"){Ao=lo.call(Al,Ao,go);break e}Ao=lo;break e;case 3:lo.flags=lo.flags&-65537|128;case 0:if(lo=Yu.payload,go=typeof lo=="function"?lo.call(Al,Ao,go):lo,go==null)break e;Ao=ct({},Ao,go);break e;case 2:Fs=!0}}_n.callback!==null&&_n.lane!==0&&(Pt.flags|=64,go=Qt.effects,go===null?Qt.effects=[_n]:go.push(_n))}else Al={eventTime:Al,lane:go,tag:_n.tag,payload:_n.payload,callback:_n.callback,next:null},Gs===null?(ms=Gs=Al,qn=Ao):Gs=Gs.next=Al,Gr|=go;if(_n=_n.next,_n===null){if(_n=Qt.shared.pending,_n===null)break;go=_n,_n=go.next,go.next=null,Qt.lastBaseUpdate=go,Qt.shared.pending=null}}while(!0);if(Gs===null&&(qn=Ao),Qt.baseState=qn,Qt.firstBaseUpdate=ms,Qt.lastBaseUpdate=Gs,kt=Qt.shared.interleaved,kt!==null){Qt=kt;do Gr|=Qt.lane,Qt=Qt.next;while(Qt!==kt)}else lr===null&&(Qt.shared.lanes=0);Pm|=Gr,Pt.lanes=Gr,Pt.memoizedState=Ao}}function Ep(Pt,kt,Wt){if(Pt=kt.effects,kt.effects=null,Pt!==null)for(kt=0;kt<Pt.length;kt++){var Kt=Pt[kt],Qt=Kt.callback;if(Qt!==null){if(Kt.callback=null,Kt=Wt,typeof Qt!="function")throw Error(ut(191,Qt));Qt.call(Kt)}}}var tm=new st.Component().refs;function Kp(Pt,kt,Wt,Kt){kt=Pt.memoizedState,Wt=Wt(Kt,kt),Wt=Wt==null?kt:ct({},kt,Wt),Pt.memoizedState=Wt,Pt.lanes===0&&(Pt.updateQueue.baseState=Wt)}var zp={isMounted:function(Pt){return(Pt=Pt._reactInternals)?Ft(Pt)===Pt:!1},enqueueSetState:function(Pt,kt,Wt){Pt=Pt._reactInternals;var Kt=np(),Qt=dm(Pt),lr=Yo(Kt,Qt);lr.payload=kt,Wt!=null&&(lr.callback=Wt),_u(Pt,lr),kt=Np(Pt,Qt,Kt),kt!==null&&ou(kt,Pt,Qt)},enqueueReplaceState:function(Pt,kt,Wt){Pt=Pt._reactInternals;var Kt=np(),Qt=dm(Pt),lr=Yo(Kt,Qt);lr.tag=1,lr.payload=kt,Wt!=null&&(lr.callback=Wt),_u(Pt,lr),kt=Np(Pt,Qt,Kt),kt!==null&&ou(kt,Pt,Qt)},enqueueForceUpdate:function(Pt,kt){Pt=Pt._reactInternals;var Wt=np(),Kt=dm(Pt),Qt=Yo(Wt,Kt);Qt.tag=2,kt!=null&&(Qt.callback=kt),_u(Pt,Qt),kt=Np(Pt,Kt,Wt),kt!==null&&ou(kt,Pt,Kt)}};function Xp(Pt,kt,Wt,Kt,Qt,lr,Gr){return Pt=Pt.stateNode,typeof Pt.shouldComponentUpdate=="function"?Pt.shouldComponentUpdate(Kt,lr,Gr):kt.prototype&&kt.prototype.isPureReactComponent?!_o(Wt,Kt)||!_o(Qt,lr):!0}function ip(Pt,kt,Wt){var Kt=!1,Qt=Hs,lr=kt.contextType;return typeof lr=="object"&&lr!==null?lr=xs(lr):(Qt=Bs(kt)?js:ps.current,Kt=kt.contextTypes,lr=(Kt=Kt!=null)?yo(Pt,Qt):Hs),kt=new kt(Wt,lr),Pt.memoizedState=kt.state!==null&&kt.state!==void 0?kt.state:null,kt.updater=zp,Pt.stateNode=kt,kt._reactInternals=Pt,Kt&&(Pt=Pt.stateNode,Pt.__reactInternalMemoizedUnmaskedChildContext=Qt,Pt.__reactInternalMemoizedMaskedChildContext=lr),kt}function rm(Pt,kt,Wt,Kt){Pt=kt.state,typeof kt.componentWillReceiveProps=="function"&&kt.componentWillReceiveProps(Wt,Kt),typeof kt.UNSAFE_componentWillReceiveProps=="function"&&kt.UNSAFE_componentWillReceiveProps(Wt,Kt),kt.state!==Pt&&zp.enqueueReplaceState(kt,kt.state,null)}function Rp(Pt,kt,Wt,Kt){var Qt=Pt.stateNode;Qt.props=Wt,Qt.state=Pt.memoizedState,Qt.refs=tm,Vp(Pt);var lr=kt.contextType;typeof lr=="object"&&lr!==null?Qt.context=xs(lr):(lr=Bs(kt)?js:ps.current,Qt.context=yo(Pt,lr)),Qt.state=Pt.memoizedState,lr=kt.getDerivedStateFromProps,typeof lr=="function"&&(Kp(Pt,kt,lr,Wt),Qt.state=Pt.memoizedState),typeof kt.getDerivedStateFromProps=="function"||typeof Qt.getSnapshotBeforeUpdate=="function"||typeof Qt.UNSAFE_componentWillMount!="function"&&typeof Qt.componentWillMount!="function"||(kt=Qt.state,typeof Qt.componentWillMount=="function"&&Qt.componentWillMount(),typeof Qt.UNSAFE_componentWillMount=="function"&&Qt.UNSAFE_componentWillMount(),kt!==Qt.state&&zp.enqueueReplaceState(Qt,Qt.state,null),Lp(Pt,Wt,Qt,Kt),Qt.state=Pt.memoizedState),typeof Qt.componentDidMount=="function"&&(Pt.flags|=4194308)}var Fu=[],Bu=0,Cp=null,Tp=0,Ql=[],Xl=0,Uu=null,Jl=1,lu="";function ku(Pt,kt){Fu[Bu++]=Tp,Fu[Bu++]=Cp,Cp=Pt,Tp=kt}function Vu(Pt,kt,Wt){Ql[Xl++]=Jl,Ql[Xl++]=lu,Ql[Xl++]=Uu,Uu=Pt;var Kt=Jl;Pt=lu;var Qt=32-Go(Kt)-1;Kt&=~(1<<Qt),Wt+=1;var lr=32-Go(kt)+Qt;if(30<lr){var Gr=Qt-Qt%5;lr=(Kt&(1<<Gr)-1).toString(32),Kt>>=Gr,Qt-=Gr,Jl=1<<32-Go(kt)+Qt|Wt<<Qt|Kt,lu=lr+Pt}else Jl=1<<lr|Wt<<Qt|Kt,lu=Pt}function sp(Pt){Pt.return!==null&&(ku(Pt,1),Vu(Pt,1,0))}function op(Pt){for(;Pt===Cp;)Cp=Fu[--Bu],Fu[Bu]=null,Tp=Fu[--Bu],Fu[Bu]=null;for(;Pt===Uu;)Uu=Ql[--Xl],Ql[Xl]=null,lu=Ql[--Xl],Ql[Xl]=null,Jl=Ql[--Xl],Ql[Xl]=null}var Rl=null,Il=null,Dr=!1,pr=!1,dr=null;function mr(Pt,kt){var Wt=$p(5,null,null,0);Wt.elementType="DELETED",Wt.stateNode=kt,Wt.return=Pt,kt=Pt.deletions,kt===null?(Pt.deletions=[Wt],Pt.flags|=16):kt.push(Wt)}function wr(Pt,kt){switch(Pt.tag){case 5:return kt=Zn(kt,Pt.type,Pt.pendingProps),kt!==null?(Pt.stateNode=kt,Rl=Pt,Il=Fo(kt),!0):!1;case 6:return kt=Dn(kt,Pt.pendingProps),kt!==null?(Pt.stateNode=kt,Rl=Pt,Il=null,!0):!1;case 13:if(kt=ss(kt),kt!==null){var Wt=Uu!==null?{id:Jl,overflow:lu}:null;return Pt.memoizedState={dehydrated:kt,treeContext:Wt,retryLane:1073741824},Wt=$p(18,null,null,0),Wt.stateNode=kt,Wt.return=Pt,Pt.child=Wt,Rl=Pt,Il=null,!0}return!1;default:return!1}}function rn(Pt){return(Pt.mode&1)!==0&&(Pt.flags&128)===0}function hn(Pt){if(Dr){var kt=Il;if(kt){var Wt=kt;if(!wr(Pt,kt)){if(rn(Pt))throw Error(ut(418));kt=Vs(Wt);var Kt=Rl;kt&&wr(Pt,kt)?mr(Kt,Wt):(Pt.flags=Pt.flags&-4097|2,Dr=!1,Rl=Pt)}}else{if(rn(Pt))throw Error(ut(418));Pt.flags=Pt.flags&-4097|2,Dr=!1,Rl=Pt}}}function zn(Pt){for(Pt=Pt.return;Pt!==null&&Pt.tag!==5&&Pt.tag!==3&&Pt.tag!==13;)Pt=Pt.return;Rl=Pt}function Wn(Pt){if(!Nr||Pt!==Rl)return!1;if(!Dr)return zn(Pt),Dr=!0,!1;if(Pt.tag!==3&&(Pt.tag!==5||gs(Pt.type)&&!ir(Pt.type,Pt.memoizedProps))){var kt=Il;if(kt){if(rn(Pt)){for(Pt=Il;Pt;)Pt=Vs(Pt);throw Error(ut(418))}for(;kt;)mr(Pt,kt),kt=Vs(kt)}}if(zn(Pt),Pt.tag===13){if(!Nr)throw Error(ut(316));if(Pt=Pt.memoizedState,Pt=Pt!==null?Pt.dehydrated:null,!Pt)throw Error(ut(317));Il=Lr(Pt)}else Il=Rl?Vs(Pt.stateNode):null;return!0}function us(){Nr&&(Il=Rl=null,pr=Dr=!1)}function ds(Pt){dr===null?dr=[Pt]:dr.push(Pt)}function hs(Pt,kt,Wt){if(Pt=Wt.ref,Pt!==null&&typeof Pt!="function"&&typeof Pt!="object"){if(Wt._owner){if(Wt=Wt._owner,Wt){if(Wt.tag!==1)throw Error(ut(309));var Kt=Wt.stateNode}if(!Kt)throw Error(ut(147,Pt));var Qt=Kt,lr=""+Pt;return kt!==null&&kt.ref!==null&&typeof kt.ref=="function"&&kt.ref._stringRef===lr?kt.ref:(kt=function(Gr){var _n=Qt.refs;_n===tm&&(_n=Qt.refs={}),Gr===null?delete _n[lr]:_n[lr]=Gr},kt._stringRef=lr,kt)}if(typeof Pt!="string")throw Error(ut(284));if(!Wt._owner)throw Error(ut(290,Pt))}return Pt}function Jr(Pt,kt){throw Pt=Object.prototype.toString.call(kt),Error(ut(31,Pt==="[object Object]"?"object with keys {"+Object.keys(kt).join(", ")+"}":Pt))}function yn(Pt){var kt=Pt._init;return kt(Pt._payload)}function Rs(Pt){function kt($n,Tn){if(Pt){var Vn=$n.deletions;Vn===null?($n.deletions=[Tn],$n.flags|=16):Vn.push(Tn)}}function Wt($n,Tn){if(!Pt)return null;for(;Tn!==null;)kt($n,Tn),Tn=Tn.sibling;return null}function Kt($n,Tn){for($n=new Map;Tn!==null;)Tn.key!==null?$n.set(Tn.key,Tn):$n.set(Tn.index,Tn),Tn=Tn.sibling;return $n}function Qt($n,Tn){return $n=fm($n,Tn),$n.index=0,$n.sibling=null,$n}function lr($n,Tn,Vn){return $n.index=Vn,Pt?(Vn=$n.alternate,Vn!==null?(Vn=Vn.index,Vn<Tn?($n.flags|=2,Tn):Vn):($n.flags|=2,Tn)):($n.flags|=1048576,Tn)}function Gr($n){return Pt&&$n.alternate===null&&($n.flags|=2),$n}function _n($n,Tn,Vn,Ns){return Tn===null||Tn.tag!==6?(Tn=fv(Vn,$n.mode,Ns),Tn.return=$n,Tn):(Tn=Qt(Tn,Vn),Tn.return=$n,Tn)}function qn($n,Tn,Vn,Ns){var no=Vn.type;return no===pt?Gs($n,Tn,Vn.props.children,Ns,Vn.key):Tn!==null&&(Tn.elementType===no||typeof no=="object"&&no!==null&&no.$$typeof===Rt&&yn(no)===Tn.type)?(Ns=Qt(Tn,Vn.props),Ns.ref=hs($n,Tn,Vn),Ns.return=$n,Ns):(Ns=Qm(Vn.type,Vn.key,Vn.props,null,$n.mode,Ns),Ns.ref=hs($n,Tn,Vn),Ns.return=$n,Ns)}function ms($n,Tn,Vn,Ns){return Tn===null||Tn.tag!==4||Tn.stateNode.containerInfo!==Vn.containerInfo||Tn.stateNode.implementation!==Vn.implementation?(Tn=pv(Vn,$n.mode,Ns),Tn.return=$n,Tn):(Tn=Qt(Tn,Vn.children||[]),Tn.return=$n,Tn)}function Gs($n,Tn,Vn,Ns,no){return Tn===null||Tn.tag!==7?(Tn=wm(Vn,$n.mode,Ns,no),Tn.return=$n,Tn):(Tn=Qt(Tn,Vn),Tn.return=$n,Tn)}function Ao($n,Tn,Vn){if(typeof Tn=="string"&&Tn!==""||typeof Tn=="number")return Tn=fv(""+Tn,$n.mode,Vn),Tn.return=$n,Tn;if(typeof Tn=="object"&&Tn!==null){switch(Tn.$$typeof){case ht:return Vn=Qm(Tn.type,Tn.key,Tn.props,null,$n.mode,Vn),Vn.ref=hs($n,null,Tn),Vn.return=$n,Vn;case ft:return Tn=pv(Tn,$n.mode,Vn),Tn.return=$n,Tn;case Rt:var Ns=Tn._init;return Ao($n,Ns(Tn._payload),Vn)}if(Vt(Tn)||At(Tn))return Tn=wm(Tn,$n.mode,Vn,null),Tn.return=$n,Tn;Jr($n,Tn)}return null}function go($n,Tn,Vn,Ns){var no=Tn!==null?Tn.key:null;if(typeof Vn=="string"&&Vn!==""||typeof Vn=="number")return no!==null?null:_n($n,Tn,""+Vn,Ns);if(typeof Vn=="object"&&Vn!==null){switch(Vn.$$typeof){case ht:return Vn.key===no?qn($n,Tn,Vn,Ns):null;case ft:return Vn.key===no?ms($n,Tn,Vn,Ns):null;case Rt:return no=Vn._init,go($n,Tn,no(Vn._payload),Ns)}if(Vt(Vn)||At(Vn))return no!==null?null:Gs($n,Tn,Vn,Ns,null);Jr($n,Vn)}return null}function Al($n,Tn,Vn,Ns,no){if(typeof Ns=="string"&&Ns!==""||typeof Ns=="number")return $n=$n.get(Vn)||null,_n(Tn,$n,""+Ns,no);if(typeof Ns=="object"&&Ns!==null){switch(Ns.$$typeof){case ht:return $n=$n.get(Ns.key===null?Vn:Ns.key)||null,qn(Tn,$n,Ns,no);case ft:return $n=$n.get(Ns.key===null?Vn:Ns.key)||null,ms(Tn,$n,Ns,no);case Rt:var $o=Ns._init;return Al($n,Tn,Vn,$o(Ns._payload),no)}if(Vt(Ns)||At(Ns))return $n=$n.get(Vn)||null,Gs(Tn,$n,Ns,no,null);Jr(Tn,Ns)}return null}function lo($n,Tn,Vn,Ns){for(var no=null,$o=null,ko=Tn,$a=Tn=0,Pu=null;ko!==null&&$a<Vn.length;$a++){ko.index>$a?(Pu=ko,ko=null):Pu=ko.sibling;var yl=go($n,ko,Vn[$a],Ns);if(yl===null){ko===null&&(ko=Pu);break}Pt&&ko&&yl.alternate===null&&kt($n,ko),Tn=lr(yl,Tn,$a),$o===null?no=yl:$o.sibling=yl,$o=yl,ko=Pu}if($a===Vn.length)return Wt($n,ko),Dr&&ku($n,$a),no;if(ko===null){for(;$a<Vn.length;$a++)ko=Ao($n,Vn[$a],Ns),ko!==null&&(Tn=lr(ko,Tn,$a),$o===null?no=ko:$o.sibling=ko,$o=ko);return Dr&&ku($n,$a),no}for(ko=Kt($n,ko);$a<Vn.length;$a++)Pu=Al(ko,$n,$a,Vn[$a],Ns),Pu!==null&&(Pt&&Pu.alternate!==null&&ko.delete(Pu.key===null?$a:Pu.key),Tn=lr(Pu,Tn,$a),$o===null?no=Pu:$o.sibling=Pu,$o=Pu);return Pt&&ko.forEach(function(pm){return kt($n,pm)}),Dr&&ku($n,$a),no}function Yu($n,Tn,Vn,Ns){var no=At(Vn);if(typeof no!="function")throw Error(ut(150));if(Vn=no.call(Vn),Vn==null)throw Error(ut(151));for(var $o=no=null,ko=Tn,$a=Tn=0,Pu=null,yl=Vn.next();ko!==null&&!yl.done;$a++,yl=Vn.next()){ko.index>$a?(Pu=ko,ko=null):Pu=ko.sibling;var pm=go($n,ko,yl.value,Ns);if(pm===null){ko===null&&(ko=Pu);break}Pt&&ko&&pm.alternate===null&&kt($n,ko),Tn=lr(pm,Tn,$a),$o===null?no=pm:$o.sibling=pm,$o=pm,ko=Pu}if(yl.done)return Wt($n,ko),Dr&&ku($n,$a),no;if(ko===null){for(;!yl.done;$a++,yl=Vn.next())yl=Ao($n,yl.value,Ns),yl!==null&&(Tn=lr(yl,Tn,$a),$o===null?no=yl:$o.sibling=yl,$o=yl);return Dr&&ku($n,$a),no}for(ko=Kt($n,ko);!yl.done;$a++,yl=Vn.next())yl=Al(ko,$n,$a,yl.value,Ns),yl!==null&&(Pt&&yl.alternate!==null&&ko.delete(yl.key===null?$a:yl.key),Tn=lr(yl,Tn,$a),$o===null?no=yl:$o.sibling=yl,$o=yl);return Pt&&ko.forEach(function(Gv){return kt($n,Gv)}),Dr&&ku($n,$a),no}function jp($n,Tn,Vn,Ns){if(typeof Vn=="object"&&Vn!==null&&Vn.type===pt&&Vn.key===null&&(Vn=Vn.props.children),typeof Vn=="object"&&Vn!==null){switch(Vn.$$typeof){case ht:e:{for(var no=Vn.key,$o=Tn;$o!==null;){if($o.key===no){if(no=Vn.type,no===pt){if($o.tag===7){Wt($n,$o.sibling),Tn=Qt($o,Vn.props.children),Tn.return=$n,$n=Tn;break e}}else if($o.elementType===no||typeof no=="object"&&no!==null&&no.$$typeof===Rt&&yn(no)===$o.type){Wt($n,$o.sibling),Tn=Qt($o,Vn.props),Tn.ref=hs($n,$o,Vn),Tn.return=$n,$n=Tn;break e}Wt($n,$o);break}else kt($n,$o);$o=$o.sibling}Vn.type===pt?(Tn=wm(Vn.props.children,$n.mode,Ns,Vn.key),Tn.return=$n,$n=Tn):(Ns=Qm(Vn.type,Vn.key,Vn.props,null,$n.mode,Ns),Ns.ref=hs($n,Tn,Vn),Ns.return=$n,$n=Ns)}return Gr($n);case ft:e:{for($o=Vn.key;Tn!==null;){if(Tn.key===$o)if(Tn.tag===4&&Tn.stateNode.containerInfo===Vn.containerInfo&&Tn.stateNode.implementation===Vn.implementation){Wt($n,Tn.sibling),Tn=Qt(Tn,Vn.children||[]),Tn.return=$n,$n=Tn;break e}else{Wt($n,Tn);break}else kt($n,Tn);Tn=Tn.sibling}Tn=pv(Vn,$n.mode,Ns),Tn.return=$n,$n=Tn}return Gr($n);case Rt:return $o=Vn._init,jp($n,Tn,$o(Vn._payload),Ns)}if(Vt(Vn))return lo($n,Tn,Vn,Ns);if(At(Vn))return Yu($n,Tn,Vn,Ns);Jr($n,Vn)}return typeof Vn=="string"&&Vn!==""||typeof Vn=="number"?(Vn=""+Vn,Tn!==null&&Tn.tag===6?(Wt($n,Tn.sibling),Tn=Qt(Tn,Vn),Tn.return=$n,$n=Tn):(Wt($n,Tn),Tn=fv(Vn,$n.mode,Ns),Tn.return=$n,$n=Tn),Gr($n)):Wt($n,Tn)}return jp}var Ls=Rs(!0),Sn=Rs(!1),Ss={},fs=Hn(Ss),Ks=Hn(Ss),Js=Hn(Ss);function Ms(Pt){if(Pt===Ss)throw Error(ut(174));return Pt}function Cs(Pt,kt){Gn(Js,kt),Gn(Ks,Pt),Gn(fs,Ss),Pt=zt(kt),Un(fs),Gn(fs,Pt)}function Xs(){Un(fs),Un(Ks),Un(Js)}function so(Pt){var kt=Ms(Js.current),Wt=Ms(fs.current);kt=Bt(Wt,Pt.type,kt),Wt!==kt&&(Gn(Ks,Pt),Gn(fs,kt))}function po(Pt){Ks.current===Pt&&(Un(fs),Un(Ks))}var Es=Hn(0);function zs(Pt){for(var kt=Pt;kt!==null;){if(kt.tag===13){var Wt=kt.memoizedState;if(Wt!==null&&(Wt=Wt.dehydrated,Wt===null||$s(Wt)||ws(Wt)))return kt}else if(kt.tag===19&&kt.memoizedProps.revealOrder!==void 0){if(kt.flags&128)return kt}else if(kt.child!==null){kt.child.return=kt,kt=kt.child;continue}if(kt===Pt)break;for(;kt.sibling===null;){if(kt.return===null||kt.return===Pt)return null;kt=kt.return}kt.sibling.return=kt.return,kt=kt.sibling}return null}var Qo=[];function qo(){for(var Pt=0;Pt<Qo.length;Pt++){var kt=Qo[Pt];gr?kt._workInProgressVersionPrimary=null:kt._workInProgressVersionSecondary=null}Qo.length=0}var ro=dt.ReactCurrentDispatcher,Po=dt.ReactCurrentBatchConfig,Do=0,mo=null,xo=null,ho=null,Cl=!1,ls=!1,vo=0,Ko=0;function wo(){throw Error(ut(321))}function Pl(Pt,kt){if(kt===null)return!1;for(var Wt=0;Wt<kt.length&&Wt<Pt.length;Wt++)if(!Wo(Pt[Wt],kt[Wt]))return!1;return!0}function qs(Pt,kt,Wt,Kt,Qt,lr){if(Do=lr,mo=kt,kt.memoizedState=null,kt.updateQueue=null,kt.lanes=0,ro.current=Pt===null||Pt.memoizedState===null?Xu:Vl,Pt=Wt(Kt,Qt),ls){lr=0;do{if(ls=!1,vo=0,25<=lr)throw Error(ut(301));lr+=1,ho=xo=null,kt.updateQueue=null,ro.current=Tu,Pt=Wt(Kt,Qt)}while(ls)}if(ro.current=Du,kt=xo!==null&&xo.next!==null,Do=0,ho=xo=mo=null,Cl=!1,kt)throw Error(ut(300));return Pt}function Oo(){var Pt=vo!==0;return vo=0,Pt}function ks(){var Pt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ho===null?mo.memoizedState=ho=Pt:ho=ho.next=Pt,ho}function Eo(){if(xo===null){var Pt=mo.alternate;Pt=Pt!==null?Pt.memoizedState:null}else Pt=xo.next;var kt=ho===null?mo.memoizedState:ho.next;if(kt!==null)ho=kt,xo=Pt;else{if(Pt===null)throw Error(ut(310));xo=Pt,Pt={memoizedState:xo.memoizedState,baseState:xo.baseState,baseQueue:xo.baseQueue,queue:xo.queue,next:null},ho===null?mo.memoizedState=ho=Pt:ho=ho.next=Pt}return ho}function xa(Pt,kt){return typeof kt=="function"?kt(Pt):kt}function tu(Pt){var kt=Eo(),Wt=kt.queue;if(Wt===null)throw Error(ut(311));Wt.lastRenderedReducer=Pt;var Kt=xo,Qt=Kt.baseQueue,lr=Wt.pending;if(lr!==null){if(Qt!==null){var Gr=Qt.next;Qt.next=lr.next,lr.next=Gr}Kt.baseQueue=Qt=lr,Wt.pending=null}if(Qt!==null){lr=Qt.next,Kt=Kt.baseState;var _n=Gr=null,qn=null,ms=lr;do{var Gs=ms.lane;if((Do&Gs)===Gs)qn!==null&&(qn=qn.next={lane:0,action:ms.action,hasEagerState:ms.hasEagerState,eagerState:ms.eagerState,next:null}),Kt=ms.hasEagerState?ms.eagerState:Pt(Kt,ms.action);else{var Ao={lane:Gs,action:ms.action,hasEagerState:ms.hasEagerState,eagerState:ms.eagerState,next:null};qn===null?(_n=qn=Ao,Gr=Kt):qn=qn.next=Ao,mo.lanes|=Gs,Pm|=Gs}ms=ms.next}while(ms!==null&&ms!==lr);qn===null?Gr=Kt:qn.next=_n,Wo(Kt,kt.memoizedState)||(oo=!0),kt.memoizedState=Kt,kt.baseState=Gr,kt.baseQueue=qn,Wt.lastRenderedState=Kt}if(Pt=Wt.interleaved,Pt!==null){Qt=Pt;do lr=Qt.lane,mo.lanes|=lr,Pm|=lr,Qt=Qt.next;while(Qt!==Pt)}else Qt===null&&(Wt.lanes=0);return[kt.memoizedState,Wt.dispatch]}function zu(Pt){var kt=Eo(),Wt=kt.queue;if(Wt===null)throw Error(ut(311));Wt.lastRenderedReducer=Pt;var Kt=Wt.dispatch,Qt=Wt.pending,lr=kt.memoizedState;if(Qt!==null){Wt.pending=null;var Gr=Qt=Qt.next;do lr=Pt(lr,Gr.action),Gr=Gr.next;while(Gr!==Qt);Wo(lr,kt.memoizedState)||(oo=!0),kt.memoizedState=lr,kt.baseQueue===null&&(kt.baseState=lr),Wt.lastRenderedState=lr}return[lr,Kt]}function Hu(){}function Iu(Pt,kt){var Wt=mo,Kt=Eo(),Qt=kt(),lr=!Wo(Kt.memoizedState,Qt);if(lr&&(Kt.memoizedState=Qt,oo=!0),Kt=Kt.queue,Su(_h.bind(null,Wt,Kt,Pt),[Pt]),Kt.getSnapshot!==kt||lr||ho!==null&&ho.memoizedState.tag&1){if(Wt.flags|=2048,xu(9,cu.bind(null,Wt,Kt,Qt,kt),void 0,null),ru===null)throw Error(ut(349));Do&30||lp(Wt,kt,Qt)}return Qt}function lp(Pt,kt,Wt){Pt.flags|=16384,Pt={getSnapshot:kt,value:Wt},kt=mo.updateQueue,kt===null?(kt={lastEffect:null,stores:null},mo.updateQueue=kt,kt.stores=[Pt]):(Wt=kt.stores,Wt===null?kt.stores=[Pt]:Wt.push(Pt))}function cu(Pt,kt,Wt,Kt){kt.value=Wt,kt.getSnapshot=Kt,xl(kt)&&Np(Pt,1,-1)}function _h(Pt,kt,Wt){return Wt(function(){xl(kt)&&Np(Pt,1,-1)})}function xl(Pt){var kt=Pt.getSnapshot;Pt=Pt.value;try{var Wt=kt();return!Wo(Pt,Wt)}catch{return!0}}function Lu(Pt){var kt=ks();return typeof Pt=="function"&&(Pt=Pt()),kt.memoizedState=kt.baseState=Pt,Pt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:Pt},kt.queue=Pt,Pt=Pt.dispatch=hp.bind(null,mo,Pt),[kt.memoizedState,Pt]}function xu(Pt,kt,Wt,Kt){return Pt={tag:Pt,create:kt,destroy:Wt,deps:Kt,next:null},kt=mo.updateQueue,kt===null?(kt={lastEffect:null,stores:null},mo.updateQueue=kt,kt.lastEffect=Pt.next=Pt):(Wt=kt.lastEffect,Wt===null?kt.lastEffect=Pt.next=Pt:(Kt=Wt.next,Wt.next=Pt,Pt.next=Kt,kt.lastEffect=Pt)),Pt}function Dl(){return Eo().memoizedState}function uu(Pt,kt,Wt,Kt){var Qt=ks();mo.flags|=Pt,Qt.memoizedState=xu(1|kt,Wt,void 0,Kt===void 0?null:Kt)}function Wu(Pt,kt,Wt,Kt){var Qt=Eo();Kt=Kt===void 0?null:Kt;var lr=void 0;if(xo!==null){var Gr=xo.memoizedState;if(lr=Gr.destroy,Kt!==null&&Pl(Kt,Gr.deps)){Qt.memoizedState=xu(kt,Wt,lr,Kt);return}}mo.flags|=Pt,Qt.memoizedState=xu(1|kt,Wt,lr,Kt)}function Gu(Pt,kt){return uu(8390656,8,Pt,kt)}function Su(Pt,kt){return Wu(2048,8,Pt,kt)}function du(Pt,kt){return Wu(4,2,Pt,kt)}function wu(Pt,kt){return Wu(4,4,Pt,kt)}function qu(Pt,kt){if(typeof kt=="function")return Pt=Pt(),kt(Pt),function(){kt(null)};if(kt!=null)return Pt=Pt(),kt.current=Pt,function(){kt.current=null}}function hu(Pt,kt,Wt){return Wt=Wt!=null?Wt.concat([Pt]):null,Wu(4,4,qu.bind(null,kt,Pt),Wt)}function Eu(){}function Xo(Pt,kt){var Wt=Eo();kt=kt===void 0?null:kt;var Kt=Wt.memoizedState;return Kt!==null&&kt!==null&&Pl(kt,Kt[1])?Kt[0]:(Wt.memoizedState=[Pt,kt],Pt)}function Gl(Pt,kt){var Wt=Eo();kt=kt===void 0?null:kt;var Kt=Wt.memoizedState;return Kt!==null&&kt!==null&&Pl(kt,Kt[1])?Kt[0]:(Pt=Pt(),Wt.memoizedState=[Pt,kt],Pt)}function up(Pt,kt){var Wt=Mo;Mo=Wt!==0&&4>Wt?Wt:4,Pt(!0);var Kt=Po.transition;Po.transition={};try{Pt(!1),kt()}finally{Mo=Wt,Po.transition=Kt}}function Ru(){return Eo().memoizedState}function dp(Pt,kt,Wt){var Kt=dm(Pt);Wt={lane:Kt,action:Wt,hasEagerState:!1,eagerState:null,next:null},Zo(Pt)?Ku(kt,Wt):(fu(Pt,kt,Wt),Wt=np(),Pt=Np(Pt,Kt,Wt),Pt!==null&&Cu(Pt,kt,Kt))}function hp(Pt,kt,Wt){var Kt=dm(Pt),Qt={lane:Kt,action:Wt,hasEagerState:!1,eagerState:null,next:null};if(Zo(Pt))Ku(kt,Qt);else{fu(Pt,kt,Qt);var lr=Pt.alternate;if(Pt.lanes===0&&(lr===null||lr.lanes===0)&&(lr=kt.lastRenderedReducer,lr!==null))try{var Gr=kt.lastRenderedState,_n=lr(Gr,Wt);if(Qt.hasEagerState=!0,Qt.eagerState=_n,Wo(_n,Gr))return}catch{}finally{}Wt=np(),Pt=Np(Pt,Kt,Wt),Pt!==null&&Cu(Pt,kt,Kt)}}function Zo(Pt){var kt=Pt.alternate;return Pt===mo||kt!==null&&kt===mo}function Ku(Pt,kt){ls=Cl=!0;var Wt=Pt.pending;Wt===null?kt.next=kt:(kt.next=Wt.next,Wt.next=kt),Pt.pending=kt}function fu(Pt,kt,Wt){ru!==null&&Pt.mode&1&&!(jo&2)?(Pt=kt.interleaved,Pt===null?(Wt.next=Wt,yu===null?yu=[kt]:yu.push(kt)):(Wt.next=Pt.next,Pt.next=Wt),kt.interleaved=Wt):(Pt=kt.pending,Pt===null?Wt.next=Wt:(Wt.next=Pt.next,Pt.next=Wt),kt.pending=Wt)}function Cu(Pt,kt,Wt){if(Wt&4194240){var Kt=kt.lanes;Kt&=Pt.pendingLanes,Wt|=Kt,kt.lanes=Wt,kp(Pt,Wt)}}var Du={readContext:xs,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},Xu={readContext:xs,useCallback:function(Pt,kt){return ks().memoizedState=[Pt,kt===void 0?null:kt],Pt},useContext:xs,useEffect:Gu,useImperativeHandle:function(Pt,kt,Wt){return Wt=Wt!=null?Wt.concat([Pt]):null,uu(4194308,4,qu.bind(null,kt,Pt),Wt)},useLayoutEffect:function(Pt,kt){return uu(4194308,4,Pt,kt)},useInsertionEffect:function(Pt,kt){return uu(4,2,Pt,kt)},useMemo:function(Pt,kt){var Wt=ks();return kt=kt===void 0?null:kt,Pt=Pt(),Wt.memoizedState=[Pt,kt],Pt},useReducer:function(Pt,kt,Wt){var Kt=ks();return kt=Wt!==void 0?Wt(kt):kt,Kt.memoizedState=Kt.baseState=kt,Pt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pt,lastRenderedState:kt},Kt.queue=Pt,Pt=Pt.dispatch=dp.bind(null,mo,Pt),[Kt.memoizedState,Pt]},useRef:function(Pt){var kt=ks();return Pt={current:Pt},kt.memoizedState=Pt},useState:Lu,useDebugValue:Eu,useDeferredValue:function(Pt){var kt=Lu(Pt),Wt=kt[0],Kt=kt[1];return Gu(function(){var Qt=Po.transition;Po.transition={};try{Kt(Pt)}finally{Po.transition=Qt}},[Pt]),Wt},useTransition:function(){var Pt=Lu(!1),kt=Pt[0];return Pt=up.bind(null,Pt[1]),ks().memoizedState=Pt,[kt,Pt]},useMutableSource:function(){},useSyncExternalStore:function(Pt,kt,Wt){var Kt=mo,Qt=ks();if(Dr){if(Wt===void 0)throw Error(ut(407));Wt=Wt()}else{if(Wt=kt(),ru===null)throw Error(ut(349));Do&30||lp(Kt,kt,Wt)}Qt.memoizedState=Wt;var lr={value:Wt,getSnapshot:kt};return Qt.queue=lr,Gu(_h.bind(null,Kt,lr,Pt),[Pt]),Kt.flags|=2048,xu(9,cu.bind(null,Kt,lr,Wt,kt),void 0,null),Wt},useId:function(){var Pt=ks(),kt=ru.identifierPrefix;if(Dr){var Wt=lu,Kt=Jl;Wt=(Kt&~(1<<32-Go(Kt)-1)).toString(32)+Wt,kt=":"+kt+"R"+Wt,Wt=vo++,0<Wt&&(kt+="H"+Wt.toString(32)),kt+=":"}else Wt=Ko++,kt=":"+kt+"r"+Wt.toString(32)+":";return Pt.memoizedState=kt},unstable_isNewReconciler:!1},Vl={readContext:xs,useCallback:Xo,useContext:xs,useEffect:Su,useImperativeHandle:hu,useInsertionEffect:du,useLayoutEffect:wu,useMemo:Gl,useReducer:tu,useRef:Dl,useState:function(){return tu(xa)},useDebugValue:Eu,useDeferredValue:function(Pt){var kt=tu(xa),Wt=kt[0],Kt=kt[1];return Su(function(){var Qt=Po.transition;Po.transition={};try{Kt(Pt)}finally{Po.transition=Qt}},[Pt]),Wt},useTransition:function(){var Pt=tu(xa)[0],kt=Eo().memoizedState;return[Pt,kt]},useMutableSource:Hu,useSyncExternalStore:Iu,useId:Ru,unstable_isNewReconciler:!1},Tu={readContext:xs,useCallback:Xo,useContext:xs,useEffect:Su,useImperativeHandle:hu,useInsertionEffect:du,useLayoutEffect:wu,useMemo:Gl,useReducer:zu,useRef:Dl,useState:function(){return zu(xa)},useDebugValue:Eu,useDeferredValue:function(Pt){var kt=zu(xa),Wt=kt[0],Kt=kt[1];return Su(function(){var Qt=Po.transition;Po.transition={};try{Kt(Pt)}finally{Po.transition=Qt}},[Pt]),Wt},useTransition:function(){var Pt=zu(xa)[0],kt=Eo().memoizedState;return[Pt,kt]},useMutableSource:Hu,useSyncExternalStore:Iu,useId:Ru,unstable_isNewReconciler:!1};function ns(Pt,kt){try{var Wt="",Kt=kt;do Wt+=Bp(Kt),Kt=Kt.return;while(Kt);var Qt=Wt}catch(lr){Qt=`
Error generating stack: `+lr.message+`
`+lr.stack}return{value:Pt,source:kt,stack:Qt}}function Jo(Pt,kt){try{console.error(kt.value)}catch(Wt){setTimeout(function(){throw Wt})}}var Mp=typeof WeakMap=="function"?WeakMap:Map;function Dp(Pt,kt,Wt){Wt=Yo(-1,Wt),Wt.tag=3,Wt.payload={element:null};var Kt=kt.value;return Wt.callback=function(){Wm||(Wm=!0,sv=Kt),Jo(Pt,kt)},Wt}function fp(Pt,kt,Wt){Wt=Yo(-1,Wt),Wt.tag=3;var Kt=Pt.type.getDerivedStateFromError;if(typeof Kt=="function"){var Qt=kt.value;Wt.payload=function(){return Kt(Qt)},Wt.callback=function(){Jo(Pt,kt)}}var lr=Pt.stateNode;return lr!==null&&typeof lr.componentDidCatch=="function"&&(Wt.callback=function(){Jo(Pt,kt),typeof Kt!="function"&&(lm===null?lm=new Set([this]):lm.add(this));var Gr=kt.stack;this.componentDidCatch(kt.value,{componentStack:Gr!==null?Gr:""})}),Wt}function pp(Pt,kt,Wt){var Kt=Pt.pingCache;if(Kt===null){Kt=Pt.pingCache=new Mp;var Qt=new Set;Kt.set(kt,Qt)}else Qt=Kt.get(kt),Qt===void 0&&(Qt=new Set,Kt.set(kt,Qt));Qt.has(Wt)||(Qt.add(Wt),Pt=jv.bind(null,Pt,kt,Wt),kt.then(Pt,Pt))}function Op(Pt){do{var kt;if((kt=Pt.tag===13)&&(kt=Pt.memoizedState,kt=kt!==null?kt.dehydrated!==null:!0),kt)return Pt;Pt=Pt.return}while(Pt!==null);return null}function Hp(Pt,kt,Wt,Kt,Qt){return Pt.mode&1?(Pt.flags|=65536,Pt.lanes=Qt,Pt):(Pt===kt?Pt.flags|=65536:(Pt.flags|=128,Wt.flags|=131072,Wt.flags&=-52805,Wt.tag===1&&(Wt.alternate===null?Wt.tag=17:(kt=Yo(-1,1),kt.tag=2,_u(Wt,kt))),Wt.lanes|=1),Pt)}function _c(Pt){Pt.flags|=4}function _f(Pt,kt){if(Pt!==null&&Pt.child===kt.child)return!0;if(kt.flags&16)return!1;for(Pt=kt.child;Pt!==null;){if(Pt.flags&12854||Pt.subtreeFlags&12854)return!1;Pt=Pt.sibling}return!0}var Yn,cr,qt,Yt;if(_r)Yn=function(Pt,kt){for(var Wt=kt.child;Wt!==null;){if(Wt.tag===5||Wt.tag===6)Zt(Pt,Wt.stateNode);else if(Wt.tag!==4&&Wt.child!==null){Wt.child.return=Wt,Wt=Wt.child;continue}if(Wt===kt)break;for(;Wt.sibling===null;){if(Wt.return===null||Wt.return===kt)return;Wt=Wt.return}Wt.sibling.return=Wt.return,Wt=Wt.sibling}},cr=function(){},qt=function(Pt,kt,Wt,Kt,Qt){if(Pt=Pt.memoizedProps,Pt!==Kt){var lr=kt.stateNode,Gr=Ms(fs.current);Wt=nr(lr,Wt,Pt,Kt,Qt,Gr),(kt.updateQueue=Wt)&&_c(kt)}},Yt=function(Pt,kt,Wt,Kt){Wt!==Kt&&_c(kt)};else if(fr){Yn=function(Pt,kt,Wt,Kt){for(var Qt=kt.child;Qt!==null;){if(Qt.tag===5){var lr=Qt.stateNode;Wt&&Kt&&(lr=Kn(lr,Qt.type,Qt.memoizedProps,Qt)),Zt(Pt,lr)}else if(Qt.tag===6)lr=Qt.stateNode,Wt&&Kt&&(lr=es(lr,Qt.memoizedProps,Qt)),Zt(Pt,lr);else if(Qt.tag!==4){if(Qt.tag===22&&Qt.memoizedState!==null)lr=Qt.child,lr!==null&&(lr.return=Qt),Yn(Pt,Qt,!0,!0);else if(Qt.child!==null){Qt.child.return=Qt,Qt=Qt.child;continue}}if(Qt===kt)break;for(;Qt.sibling===null;){if(Qt.return===null||Qt.return===kt)return;Qt=Qt.return}Qt.sibling.return=Qt.return,Qt=Qt.sibling}};var ur=function(Pt,kt,Wt,Kt){for(var Qt=kt.child;Qt!==null;){if(Qt.tag===5){var lr=Qt.stateNode;Wt&&Kt&&(lr=Kn(lr,Qt.type,Qt.memoizedProps,Qt)),Ur(Pt,lr)}else if(Qt.tag===6)lr=Qt.stateNode,Wt&&Kt&&(lr=es(lr,Qt.memoizedProps,Qt)),Ur(Pt,lr);else if(Qt.tag!==4){if(Qt.tag===22&&Qt.memoizedState!==null)lr=Qt.child,lr!==null&&(lr.return=Qt),ur(Pt,Qt,!0,!0);else if(Qt.child!==null){Qt.child.return=Qt,Qt=Qt.child;continue}}if(Qt===kt)break;for(;Qt.sibling===null;){if(Qt.return===null||Qt.return===kt)return;Qt=Qt.return}Qt.sibling.return=Qt.return,Qt=Qt.sibling}};cr=function(Pt,kt){var Wt=kt.stateNode;if(!_f(Pt,kt)){Pt=Wt.containerInfo;var Kt=Er(Pt);ur(Kt,kt,!1,!1),Wt.pendingChildren=Kt,_c(kt),on(Pt,Kt)}},qt=function(Pt,kt,Wt,Kt,Qt){var lr=Pt.stateNode,Gr=Pt.memoizedProps;if((Pt=_f(Pt,kt))&&Gr===Kt)kt.stateNode=lr;else{var _n=kt.stateNode,qn=Ms(fs.current),ms=null;Gr!==Kt&&(ms=nr(_n,Wt,Gr,Kt,Qt,qn)),Pt&&ms===null?kt.stateNode=lr:(lr=kr(lr,ms,Wt,Gr,Kt,kt,Pt,_n),hr(lr,Wt,Kt,Qt,qn)&&_c(kt),kt.stateNode=lr,Pt?_c(kt):Yn(lr,kt,!1,!1))}},Yt=function(Pt,kt,Wt,Kt){Wt!==Kt?(Pt=Ms(Js.current),Wt=Ms(fs.current),kt.stateNode=yr(Kt,Pt,Wt,kt),_c(kt)):kt.stateNode=Pt.stateNode}}else cr=function(){},qt=function(){},Yt=function(){};function Xr(Pt,kt){if(!Dr)switch(Pt.tailMode){case"hidden":kt=Pt.tail;for(var Wt=null;kt!==null;)kt.alternate!==null&&(Wt=kt),kt=kt.sibling;Wt===null?Pt.tail=null:Wt.sibling=null;break;case"collapsed":Wt=Pt.tail;for(var Kt=null;Wt!==null;)Wt.alternate!==null&&(Kt=Wt),Wt=Wt.sibling;Kt===null?kt||Pt.tail===null?Pt.tail=null:Pt.tail.sibling=null:Kt.sibling=null}}function Nn(Pt){var kt=Pt.alternate!==null&&Pt.alternate.child===Pt.child,Wt=0,Kt=0;if(kt)for(var Qt=Pt.child;Qt!==null;)Wt|=Qt.lanes|Qt.childLanes,Kt|=Qt.subtreeFlags&14680064,Kt|=Qt.flags&14680064,Qt.return=Pt,Qt=Qt.sibling;else for(Qt=Pt.child;Qt!==null;)Wt|=Qt.lanes|Qt.childLanes,Kt|=Qt.subtreeFlags,Kt|=Qt.flags,Qt.return=Pt,Qt=Qt.sibling;return Pt.subtreeFlags|=Kt,Pt.childLanes=Wt,kt}function Ts(Pt,kt,Wt){var Kt=kt.pendingProps;switch(op(kt),kt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(kt),null;case 1:return Bs(kt.type)&&Ws(),Nn(kt),null;case 3:return Kt=kt.stateNode,Xs(),Un(Us),Un(ps),qo(),Kt.pendingContext&&(Kt.context=Kt.pendingContext,Kt.pendingContext=null),(Pt===null||Pt.child===null)&&(Wn(kt)?_c(kt):Pt===null||Pt.memoizedState.isDehydrated&&!(kt.flags&256)||(kt.flags|=1024,dr!==null&&(cv(dr),dr=null))),cr(Pt,kt),Nn(kt),null;case 5:po(kt),Wt=Ms(Js.current);var Qt=kt.type;if(Pt!==null&&kt.stateNode!=null)qt(Pt,kt,Qt,Kt,Wt),Pt.ref!==kt.ref&&(kt.flags|=512,kt.flags|=2097152);else{if(!Kt){if(kt.stateNode===null)throw Error(ut(166));return Nn(kt),null}if(Pt=Ms(fs.current),Wn(kt)){if(!Nr)throw Error(ut(175));Pt=Bo(kt.stateNode,kt.type,kt.memoizedProps,Wt,Pt,kt,!pr),kt.updateQueue=Pt,Pt!==null&&_c(kt)}else{var lr=Xt(Qt,Kt,Wt,Pt,kt);Yn(lr,kt,!1,!1),kt.stateNode=lr,hr(lr,Qt,Kt,Wt,Pt)&&_c(kt)}kt.ref!==null&&(kt.flags|=512,kt.flags|=2097152)}return Nn(kt),null;case 6:if(Pt&&kt.stateNode!=null)Yt(Pt,kt,Pt.memoizedProps,Kt);else{if(typeof Kt!="string"&&kt.stateNode===null)throw Error(ut(166));if(Pt=Ms(Js.current),Wt=Ms(fs.current),Wn(kt)){if(!Nr)throw Error(ut(176));if(Pt=kt.stateNode,Kt=kt.memoizedProps,(Wt=Kl(Pt,Kt,kt,!pr))&&(Qt=Rl,Qt!==null))switch(lr=(Qt.mode&1)!==0,Qt.tag){case 3:os(Qt.stateNode.containerInfo,Pt,Kt,lr);break;case 5:ys(Qt.type,Qt.memoizedProps,Qt.stateNode,Pt,Kt,lr)}Wt&&_c(kt)}else kt.stateNode=yr(Kt,Pt,Wt,kt)}return Nn(kt),null;case 13:if(Un(Es),Kt=kt.memoizedState,Dr&&Il!==null&&kt.mode&1&&!(kt.flags&128)){for(Pt=Il;Pt;)Pt=Vs(Pt);return us(),kt.flags|=98560,kt}if(Kt!==null&&Kt.dehydrated!==null){if(Kt=Wn(kt),Pt===null){if(!Kt)throw Error(ut(318));if(!Nr)throw Error(ut(344));if(Pt=kt.memoizedState,Pt=Pt!==null?Pt.dehydrated:null,!Pt)throw Error(ut(317));Nl(Pt,kt)}else us(),!(kt.flags&128)&&(kt.memoizedState=null),kt.flags|=4;return Nn(kt),null}return dr!==null&&(cv(dr),dr=null),kt.flags&128?(kt.lanes=Wt,kt):(Kt=Kt!==null,Wt=!1,Pt===null?Wn(kt):Wt=Pt.memoizedState!==null,Kt&&!Wt&&(kt.child.flags|=8192,kt.mode&1&&(Pt===null||Es.current&1?pu===0&&(pu=3):dv())),kt.updateQueue!==null&&(kt.flags|=4),Nn(kt),null);case 4:return Xs(),cr(Pt,kt),Pt===null&&Hr(kt.stateNode.containerInfo),Nn(kt),null;case 10:return Ip(kt.type._context),Nn(kt),null;case 17:return Bs(kt.type)&&Ws(),Nn(kt),null;case 19:if(Un(Es),Qt=kt.memoizedState,Qt===null)return Nn(kt),null;if(Kt=(kt.flags&128)!==0,lr=Qt.rendering,lr===null)if(Kt)Xr(Qt,!1);else{if(pu!==0||Pt!==null&&Pt.flags&128)for(Pt=kt.child;Pt!==null;){if(lr=zs(Pt),lr!==null){for(kt.flags|=128,Xr(Qt,!1),Pt=lr.updateQueue,Pt!==null&&(kt.updateQueue=Pt,kt.flags|=4),kt.subtreeFlags=0,Pt=Wt,Kt=kt.child;Kt!==null;)Wt=Kt,Qt=Pt,Wt.flags&=14680066,lr=Wt.alternate,lr===null?(Wt.childLanes=0,Wt.lanes=Qt,Wt.child=null,Wt.subtreeFlags=0,Wt.memoizedProps=null,Wt.memoizedState=null,Wt.updateQueue=null,Wt.dependencies=null,Wt.stateNode=null):(Wt.childLanes=lr.childLanes,Wt.lanes=lr.lanes,Wt.child=lr.child,Wt.subtreeFlags=0,Wt.deletions=null,Wt.memoizedProps=lr.memoizedProps,Wt.memoizedState=lr.memoizedState,Wt.updateQueue=lr.updateQueue,Wt.type=lr.type,Qt=lr.dependencies,Wt.dependencies=Qt===null?null:{lanes:Qt.lanes,firstContext:Qt.firstContext}),Kt=Kt.sibling;return Gn(Es,Es.current&1|2),kt.child}Pt=Pt.sibling}Qt.tail!==null&&Uo()>iv&&(kt.flags|=128,Kt=!0,Xr(Qt,!1),kt.lanes=4194304)}else{if(!Kt)if(Pt=zs(lr),Pt!==null){if(kt.flags|=128,Kt=!0,Pt=Pt.updateQueue,Pt!==null&&(kt.updateQueue=Pt,kt.flags|=4),Xr(Qt,!0),Qt.tail===null&&Qt.tailMode==="hidden"&&!lr.alternate&&!Dr)return Nn(kt),null}else 2*Uo()-Qt.renderingStartTime>iv&&Wt!==1073741824&&(kt.flags|=128,Kt=!0,Xr(Qt,!1),kt.lanes=4194304);Qt.isBackwards?(lr.sibling=kt.child,kt.child=lr):(Pt=Qt.last,Pt!==null?Pt.sibling=lr:kt.child=lr,Qt.last=lr)}return Qt.tail!==null?(kt=Qt.tail,Qt.rendering=kt,Qt.tail=kt.sibling,Qt.renderingStartTime=Uo(),kt.sibling=null,Pt=Es.current,Gn(Es,Kt?Pt&1|2:Pt&1),kt):(Nn(kt),null);case 22:case 23:return uv(),Kt=kt.memoizedState!==null,Pt!==null&&Pt.memoizedState!==null!==Kt&&(kt.flags|=8192),Kt&&kt.mode&1?Pp&1073741824&&(Nn(kt),_r&&kt.subtreeFlags&6&&(kt.flags|=8192)):Nn(kt),null;case 24:return null;case 25:return null}throw Error(ut(156,kt.tag))}var Ro=dt.ReactCurrentOwner,oo=!1;function Io(Pt,kt,Wt,Kt){kt.child=Pt===null?Sn(kt,null,Wt,Kt):Ls(kt,Pt.child,Wt,Kt)}function mp(Pt,kt,Wt,Kt,Qt){Wt=Wt.render;var lr=kt.ref;return nn(kt,Qt),Kt=qs(Pt,kt,Wt,Kt,lr,Qt),Wt=Oo(),Pt!==null&&!oo?(kt.updateQueue=Pt.updateQueue,kt.flags&=-2053,Pt.lanes&=~Qt,tp(Pt,kt,Qt)):(Dr&&Wt&&sp(kt),kt.flags|=1,Io(Pt,kt,Kt,Qt),kt.child)}function Zp(Pt,kt,Wt,Kt,Qt){if(Pt===null){var lr=Wt.type;return typeof lr=="function"&&!hv(lr)&&lr.defaultProps===void 0&&Wt.compare===null&&Wt.defaultProps===void 0?(kt.tag=15,kt.type=lr,km(Pt,kt,lr,Kt,Qt)):(Pt=Qm(Wt.type,null,Kt,kt,kt.mode,Qt),Pt.ref=kt.ref,Pt.return=kt,kt.child=Pt)}if(lr=Pt.child,!(Pt.lanes&Qt)){var Gr=lr.memoizedProps;if(Wt=Wt.compare,Wt=Wt!==null?Wt:_o,Wt(Gr,Kt)&&Pt.ref===kt.ref)return tp(Pt,kt,Qt)}return kt.flags|=1,Pt=fm(lr,Kt),Pt.ref=kt.ref,Pt.return=kt,kt.child=Pt}function km(Pt,kt,Wt,Kt,Qt){if(Pt!==null&&_o(Pt.memoizedProps,Kt)&&Pt.ref===kt.ref)if(oo=!1,(Pt.lanes&Qt)!==0)Pt.flags&131072&&(oo=!0);else return kt.lanes=Pt.lanes,tp(Pt,kt,Qt);return Lm(Pt,kt,Wt,Kt,Qt)}function Im(Pt,kt,Wt){var Kt=kt.pendingProps,Qt=Kt.children,lr=Pt!==null?Pt.memoizedState:null;if(Kt.mode==="hidden")if(!(kt.mode&1))kt.memoizedState={baseLanes:0,cachePool:null},Gn(Mm,Pp),Pp|=Wt;else if(Wt&1073741824)kt.memoizedState={baseLanes:0,cachePool:null},Kt=lr!==null?lr.baseLanes:Wt,Gn(Mm,Pp),Pp|=Kt;else return Pt=lr!==null?lr.baseLanes|Wt:Wt,kt.lanes=kt.childLanes=1073741824,kt.memoizedState={baseLanes:Pt,cachePool:null},kt.updateQueue=null,Gn(Mm,Pp),Pp|=Pt,null;else lr!==null?(Kt=lr.baseLanes|Wt,kt.memoizedState=null):Kt=Wt,Gn(Mm,Pp),Pp|=Kt;return Io(Pt,kt,Qt,Wt),kt.child}function Zu(Pt,kt){var Wt=kt.ref;(Pt===null&&Wt!==null||Pt!==null&&Pt.ref!==Wt)&&(kt.flags|=512,kt.flags|=2097152)}function Lm(Pt,kt,Wt,Kt,Qt){var lr=Bs(Wt)?js:ps.current;return lr=yo(kt,lr),nn(kt,Qt),Wt=qs(Pt,kt,Wt,Kt,lr,Qt),Kt=Oo(),Pt!==null&&!oo?(kt.updateQueue=Pt.updateQueue,kt.flags&=-2053,Pt.lanes&=~Qt,tp(Pt,kt,Qt)):(Dr&&Kt&&sp(kt),kt.flags|=1,Io(Pt,kt,Wt,Qt),kt.child)}function gm(Pt,kt,Wt,Kt,Qt){if(Bs(Wt)){var lr=!0;To(kt)}else lr=!1;if(nn(kt,Qt),kt.stateNode===null)Pt!==null&&(Pt.alternate=null,kt.alternate=null,kt.flags|=2),ip(kt,Wt,Kt),Rp(kt,Wt,Kt,Qt),Kt=!0;else if(Pt===null){var Gr=kt.stateNode,_n=kt.memoizedProps;Gr.props=_n;var qn=Gr.context,ms=Wt.contextType;typeof ms=="object"&&ms!==null?ms=xs(ms):(ms=Bs(Wt)?js:ps.current,ms=yo(kt,ms));var Gs=Wt.getDerivedStateFromProps,Ao=typeof Gs=="function"||typeof Gr.getSnapshotBeforeUpdate=="function";Ao||typeof Gr.UNSAFE_componentWillReceiveProps!="function"&&typeof Gr.componentWillReceiveProps!="function"||(_n!==Kt||qn!==ms)&&rm(kt,Gr,Kt,ms),Fs=!1;var go=kt.memoizedState;Gr.state=go,Lp(kt,Kt,Gr,Qt),qn=kt.memoizedState,_n!==Kt||go!==qn||Us.current||Fs?(typeof Gs=="function"&&(Kp(kt,Wt,Gs,Kt),qn=kt.memoizedState),(_n=Fs||Xp(kt,Wt,_n,Kt,go,qn,ms))?(Ao||typeof Gr.UNSAFE_componentWillMount!="function"&&typeof Gr.componentWillMount!="function"||(typeof Gr.componentWillMount=="function"&&Gr.componentWillMount(),typeof Gr.UNSAFE_componentWillMount=="function"&&Gr.UNSAFE_componentWillMount()),typeof Gr.componentDidMount=="function"&&(kt.flags|=4194308)):(typeof Gr.componentDidMount=="function"&&(kt.flags|=4194308),kt.memoizedProps=Kt,kt.memoizedState=qn),Gr.props=Kt,Gr.state=qn,Gr.context=ms,Kt=_n):(typeof Gr.componentDidMount=="function"&&(kt.flags|=4194308),Kt=!1)}else{Gr=kt.stateNode,Ds(Pt,kt),_n=kt.memoizedProps,ms=kt.type===kt.elementType?_n:su(kt.type,_n),Gr.props=ms,Ao=kt.pendingProps,go=Gr.context,qn=Wt.contextType,typeof qn=="object"&&qn!==null?qn=xs(qn):(qn=Bs(Wt)?js:ps.current,qn=yo(kt,qn));var Al=Wt.getDerivedStateFromProps;(Gs=typeof Al=="function"||typeof Gr.getSnapshotBeforeUpdate=="function")||typeof Gr.UNSAFE_componentWillReceiveProps!="function"&&typeof Gr.componentWillReceiveProps!="function"||(_n!==Ao||go!==qn)&&rm(kt,Gr,Kt,qn),Fs=!1,go=kt.memoizedState,Gr.state=go,Lp(kt,Kt,Gr,Qt);var lo=kt.memoizedState;_n!==Ao||go!==lo||Us.current||Fs?(typeof Al=="function"&&(Kp(kt,Wt,Al,Kt),lo=kt.memoizedState),(ms=Fs||Xp(kt,Wt,ms,Kt,go,lo,qn)||!1)?(Gs||typeof Gr.UNSAFE_componentWillUpdate!="function"&&typeof Gr.componentWillUpdate!="function"||(typeof Gr.componentWillUpdate=="function"&&Gr.componentWillUpdate(Kt,lo,qn),typeof Gr.UNSAFE_componentWillUpdate=="function"&&Gr.UNSAFE_componentWillUpdate(Kt,lo,qn)),typeof Gr.componentDidUpdate=="function"&&(kt.flags|=4),typeof Gr.getSnapshotBeforeUpdate=="function"&&(kt.flags|=1024)):(typeof Gr.componentDidUpdate!="function"||_n===Pt.memoizedProps&&go===Pt.memoizedState||(kt.flags|=4),typeof Gr.getSnapshotBeforeUpdate!="function"||_n===Pt.memoizedProps&&go===Pt.memoizedState||(kt.flags|=1024),kt.memoizedProps=Kt,kt.memoizedState=lo),Gr.props=Kt,Gr.state=lo,Gr.context=qn,Kt=ms):(typeof Gr.componentDidUpdate!="function"||_n===Pt.memoizedProps&&go===Pt.memoizedState||(kt.flags|=4),typeof Gr.getSnapshotBeforeUpdate!="function"||_n===Pt.memoizedProps&&go===Pt.memoizedState||(kt.flags|=1024),Kt=!1)}return Em(Pt,kt,Wt,Kt,lr,Qt)}function Em(Pt,kt,Wt,Kt,Qt,lr){Zu(Pt,kt);var Gr=(kt.flags&128)!==0;if(!Kt&&!Gr)return Qt&&_l(kt,Wt,!1),tp(Pt,kt,lr);Kt=kt.stateNode,Ro.current=kt;var _n=Gr&&typeof Wt.getDerivedStateFromError!="function"?null:Kt.render();return kt.flags|=1,Pt!==null&&Gr?(kt.child=Ls(kt,Pt.child,null,lr),kt.child=Ls(kt,null,_n,lr)):Io(Pt,kt,_n,lr),kt.memoizedState=Kt.state,Qt&&_l(kt,Wt,!0),kt.child}function vm(Pt){var kt=Pt.stateNode;kt.pendingContext?io(Pt,kt.pendingContext,kt.pendingContext!==kt.context):kt.context&&io(Pt,kt.context,!1),Cs(Pt,kt.containerInfo)}function nm(Pt,kt,Wt,Kt,Qt){return us(),ds(Qt),kt.flags|=256,Io(Pt,kt,Wt,Kt),kt.child}var Rm={dehydrated:null,treeContext:null,retryLane:0};function Cm(Pt){return{baseLanes:Pt,cachePool:null}}function ep(Pt,kt,Wt){var Kt=kt.pendingProps,Qt=Es.current,lr=!1,Gr=(kt.flags&128)!==0,_n;if((_n=Gr)||(_n=Pt!==null&&Pt.memoizedState===null?!1:(Qt&2)!==0),_n?(lr=!0,kt.flags&=-129):(Pt===null||Pt.memoizedState!==null)&&(Qt|=1),Gn(Es,Qt&1),Pt===null)return hn(kt),Pt=kt.memoizedState,Pt!==null&&(Pt=Pt.dehydrated,Pt!==null)?(kt.mode&1?ws(Pt)?kt.lanes=8:kt.lanes=1073741824:kt.lanes=1,null):(Qt=Kt.children,Pt=Kt.fallback,lr?(Kt=kt.mode,lr=kt.child,Qt={mode:"hidden",children:Qt},!(Kt&1)&&lr!==null?(lr.childLanes=0,lr.pendingProps=Qt):lr=Jm(Qt,Kt,0,null),Pt=wm(Pt,Kt,Wt,null),lr.return=kt,Pt.return=kt,lr.sibling=Pt,kt.child=lr,kt.child.memoizedState=Cm(Wt),kt.memoizedState=Rm,Pt):om(kt,Qt));if(Qt=Pt.memoizedState,Qt!==null){if(_n=Qt.dehydrated,_n!==null){if(Gr)return kt.flags&256?(kt.flags&=-257,Yp(Pt,kt,Wt,Error(ut(422)))):kt.memoizedState!==null?(kt.child=Pt.child,kt.flags|=128,null):(lr=Kt.fallback,Qt=kt.mode,Kt=Jm({mode:"visible",children:Kt.children},Qt,0,null),lr=wm(lr,Qt,Wt,null),lr.flags|=2,Kt.return=kt,lr.return=kt,Kt.sibling=lr,kt.child=Kt,kt.mode&1&&Ls(kt,Pt.child,null,Wt),kt.child.memoizedState=Cm(Wt),kt.memoizedState=Rm,lr);if(!(kt.mode&1))kt=Yp(Pt,kt,Wt,null);else if(ws(_n))kt=Yp(Pt,kt,Wt,Error(ut(419)));else if(Kt=(Wt&Pt.childLanes)!==0,oo||Kt){if(Kt=ru,Kt!==null){switch(Wt&-Wt){case 4:lr=2;break;case 16:lr=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:lr=32;break;case 536870912:lr=268435456;break;default:lr=0}Kt=lr&(Kt.suspendedLanes|Wt)?0:lr,Kt!==0&&Kt!==Qt.retryLane&&(Qt.retryLane=Kt,Np(Pt,Kt,-1))}dv(),kt=Yp(Pt,kt,Wt,Error(ut(421)))}else $s(_n)?(kt.flags|=128,kt.child=Pt.child,kt=Fv.bind(null,Pt),As(_n,kt),kt=null):(Wt=Qt.treeContext,Nr&&(Il=Ho(_n),Rl=kt,Dr=!0,dr=null,pr=!1,Wt!==null&&(Ql[Xl++]=Jl,Ql[Xl++]=lu,Ql[Xl++]=Uu,Jl=Wt.id,lu=Wt.overflow,Uu=kt)),kt=om(kt,kt.pendingProps.children),kt.flags|=4096);return kt}return lr?(Kt=Vm(Pt,kt,Kt.children,Kt.fallback,Wt),lr=kt.child,Qt=Pt.child.memoizedState,lr.memoizedState=Qt===null?Cm(Wt):{baseLanes:Qt.baseLanes|Wt,cachePool:null},lr.childLanes=Pt.childLanes&~Wt,kt.memoizedState=Rm,Kt):(Wt=Tm(Pt,kt,Kt.children,Wt),kt.memoizedState=null,Wt)}return lr?(Kt=Vm(Pt,kt,Kt.children,Kt.fallback,Wt),lr=kt.child,Qt=Pt.child.memoizedState,lr.memoizedState=Qt===null?Cm(Wt):{baseLanes:Qt.baseLanes|Wt,cachePool:null},lr.childLanes=Pt.childLanes&~Wt,kt.memoizedState=Rm,Kt):(Wt=Tm(Pt,kt,Kt.children,Wt),kt.memoizedState=null,Wt)}function om(Pt,kt){return kt=Jm({mode:"visible",children:kt},Pt.mode,0,null),kt.return=Pt,Pt.child=kt}function Tm(Pt,kt,Wt,Kt){var Qt=Pt.child;return Pt=Qt.sibling,Wt=fm(Qt,{mode:"visible",children:Wt}),!(kt.mode&1)&&(Wt.lanes=Kt),Wt.return=kt,Wt.sibling=null,Pt!==null&&(Kt=kt.deletions,Kt===null?(kt.deletions=[Pt],kt.flags|=16):Kt.push(Pt)),kt.child=Wt}function Vm(Pt,kt,Wt,Kt,Qt){var lr=kt.mode;Pt=Pt.child;var Gr=Pt.sibling,_n={mode:"hidden",children:Wt};return!(lr&1)&&kt.child!==Pt?(Wt=kt.child,Wt.childLanes=0,Wt.pendingProps=_n,kt.deletions=null):(Wt=fm(Pt,_n),Wt.subtreeFlags=Pt.subtreeFlags&14680064),Gr!==null?Kt=fm(Gr,Kt):(Kt=wm(Kt,lr,Qt,null),Kt.flags|=2),Kt.return=kt,Wt.return=kt,Wt.sibling=Kt,kt.child=Wt,Kt}function Yp(Pt,kt,Wt,Kt){return Kt!==null&&ds(Kt),Ls(kt,Pt.child,null,Wt),Pt=om(kt,kt.pendingProps.children),Pt.flags|=2,kt.memoizedState=null,Pt}function Dm(Pt,kt,Wt){Pt.lanes|=kt;var Kt=Pt.alternate;Kt!==null&&(Kt.lanes|=kt),Up(Pt.return,kt,Wt)}function Om(Pt,kt,Wt,Kt,Qt){var lr=Pt.memoizedState;lr===null?Pt.memoizedState={isBackwards:kt,rendering:null,renderingStartTime:0,last:Kt,tail:Wt,tailMode:Qt}:(lr.isBackwards=kt,lr.rendering=null,lr.renderingStartTime=0,lr.last=Kt,lr.tail=Wt,lr.tailMode=Qt)}function Nm(Pt,kt,Wt){var Kt=kt.pendingProps,Qt=Kt.revealOrder,lr=Kt.tail;if(Io(Pt,kt,Kt.children,Wt),Kt=Es.current,Kt&2)Kt=Kt&1|2,kt.flags|=128;else{if(Pt!==null&&Pt.flags&128)e:for(Pt=kt.child;Pt!==null;){if(Pt.tag===13)Pt.memoizedState!==null&&Dm(Pt,Wt,kt);else if(Pt.tag===19)Dm(Pt,Wt,kt);else if(Pt.child!==null){Pt.child.return=Pt,Pt=Pt.child;continue}if(Pt===kt)break e;for(;Pt.sibling===null;){if(Pt.return===null||Pt.return===kt)break e;Pt=Pt.return}Pt.sibling.return=Pt.return,Pt=Pt.sibling}Kt&=1}if(Gn(Es,Kt),!(kt.mode&1))kt.memoizedState=null;else switch(Qt){case"forwards":for(Wt=kt.child,Qt=null;Wt!==null;)Pt=Wt.alternate,Pt!==null&&zs(Pt)===null&&(Qt=Wt),Wt=Wt.sibling;Wt=Qt,Wt===null?(Qt=kt.child,kt.child=null):(Qt=Wt.sibling,Wt.sibling=null),Om(kt,!1,Qt,Wt,lr);break;case"backwards":for(Wt=null,Qt=kt.child,kt.child=null;Qt!==null;){if(Pt=Qt.alternate,Pt!==null&&zs(Pt)===null){kt.child=Qt;break}Pt=Qt.sibling,Qt.sibling=Wt,Wt=Qt,Qt=Pt}Om(kt,!0,Wt,null,lr);break;case"together":Om(kt,!1,null,null,void 0);break;default:kt.memoizedState=null}return kt.child}function tp(Pt,kt,Wt){if(Pt!==null&&(kt.dependencies=Pt.dependencies),Pm|=kt.lanes,!(Wt&kt.childLanes))return null;if(Pt!==null&&kt.child!==Pt.child)throw Error(ut(153));if(kt.child!==null){for(Pt=kt.child,Wt=fm(Pt,Pt.pendingProps),kt.child=Wt,Wt.return=kt;Pt.sibling!==null;)Pt=Pt.sibling,Wt=Wt.sibling=fm(Pt,Pt.pendingProps),Wt.return=kt;Wt.sibling=null}return kt.child}function ev(Pt,kt,Wt){switch(kt.tag){case 3:vm(kt),us();break;case 5:so(kt);break;case 1:Bs(kt.type)&&To(kt);break;case 4:Cs(kt,kt.stateNode.containerInfo);break;case 10:Gp(kt,kt.type._context,kt.memoizedProps.value);break;case 13:var Kt=kt.memoizedState;if(Kt!==null)return Kt.dehydrated!==null?(Gn(Es,Es.current&1),kt.flags|=128,null):Wt&kt.child.childLanes?ep(Pt,kt,Wt):(Gn(Es,Es.current&1),Pt=tp(Pt,kt,Wt),Pt!==null?Pt.sibling:null);Gn(Es,Es.current&1);break;case 19:if(Kt=(Wt&kt.childLanes)!==0,Pt.flags&128){if(Kt)return Nm(Pt,kt,Wt);kt.flags|=128}var Qt=kt.memoizedState;if(Qt!==null&&(Qt.rendering=null,Qt.tail=null,Qt.lastEffect=null),Gn(Es,Es.current),Kt)break;return null;case 22:case 23:return kt.lanes=0,Im(Pt,kt,Wt)}return tp(Pt,kt,Wt)}function Jt(Pt,kt){switch(op(kt),kt.tag){case 1:return Bs(kt.type)&&Ws(),Pt=kt.flags,Pt&65536?(kt.flags=Pt&-65537|128,kt):null;case 3:return Xs(),Un(Us),Un(ps),qo(),Pt=kt.flags,Pt&65536&&!(Pt&128)?(kt.flags=Pt&-65537|128,kt):null;case 5:return po(kt),null;case 13:if(Un(Es),Pt=kt.memoizedState,Pt!==null&&Pt.dehydrated!==null){if(kt.alternate===null)throw Error(ut(340));us()}return Pt=kt.flags,Pt&65536?(kt.flags=Pt&-65537|128,kt):null;case 19:return Un(Es),null;case 4:return Xs(),null;case 10:return Ip(kt.type._context),null;case 22:case 23:return uv(),null;case 24:return null;default:return null}}var rr=!1,sr=!1,Rr=typeof WeakSet=="function"?WeakSet:Set,Pr=null;function zr(Pt,kt){var Wt=Pt.ref;if(Wt!==null)if(typeof Wt=="function")try{Wt(null)}catch(Kt){yp(Pt,kt,Kt)}else Wt.current=null}function en(Pt,kt,Wt){try{Wt()}catch(Kt){yp(Pt,kt,Kt)}}var sn=!1;function Cn(Pt,kt){for(Ht(Pt.containerInfo),Pr=kt;Pr!==null;)if(Pt=Pr,kt=Pt.child,(Pt.subtreeFlags&1028)!==0&&kt!==null)kt.return=Pt,Pr=kt;else for(;Pr!==null;){Pt=Pr;try{var Wt=Pt.alternate;if(Pt.flags&1024)switch(Pt.tag){case 0:case 11:case 15:break;case 1:if(Wt!==null){var Kt=Wt.memoizedProps,Qt=Wt.memoizedState,lr=Pt.stateNode,Gr=lr.getSnapshotBeforeUpdate(Pt.elementType===Pt.type?Kt:su(Pt.type,Kt),Qt);lr.__reactInternalSnapshotBeforeUpdate=Gr}break;case 3:_r&&vn(Pt.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(ut(163))}}catch(_n){yp(Pt,Pt.return,_n)}if(kt=Pt.sibling,kt!==null){kt.return=Pt.return,Pr=kt;break}Pr=Pt.return}return Wt=sn,sn=!1,Wt}function Or(Pt,kt,Wt){var Kt=kt.updateQueue;if(Kt=Kt!==null?Kt.lastEffect:null,Kt!==null){var Qt=Kt=Kt.next;do{if((Qt.tag&Pt)===Pt){var lr=Qt.destroy;Qt.destroy=void 0,lr!==void 0&&en(kt,Wt,lr)}Qt=Qt.next}while(Qt!==Kt)}}function Zr(Pt,kt){if(kt=kt.updateQueue,kt=kt!==null?kt.lastEffect:null,kt!==null){var Wt=kt=kt.next;do{if((Wt.tag&Pt)===Pt){var Kt=Wt.create;Wt.destroy=Kt()}Wt=Wt.next}while(Wt!==kt)}}function $r(Pt){var kt=Pt.ref;if(kt!==null){var Wt=Pt.stateNode;switch(Pt.tag){case 5:Pt=Ut(Wt);break;default:Pt=Wt}typeof kt=="function"?kt(Pt):kt.current=Pt}}function gn(Pt,kt,Wt){if(Ll&&typeof Ll.onCommitFiberUnmount=="function")try{Ll.onCommitFiberUnmount(Fp,kt)}catch{}switch(kt.tag){case 0:case 11:case 14:case 15:if(Pt=kt.updateQueue,Pt!==null&&(Pt=Pt.lastEffect,Pt!==null)){var Kt=Pt=Pt.next;do{var Qt=Kt,lr=Qt.destroy;Qt=Qt.tag,lr!==void 0&&(Qt&2||Qt&4)&&en(kt,Wt,lr),Kt=Kt.next}while(Kt!==Pt)}break;case 1:if(zr(kt,Wt),Pt=kt.stateNode,typeof Pt.componentWillUnmount=="function")try{Pt.props=kt.memoizedProps,Pt.state=kt.memoizedState,Pt.componentWillUnmount()}catch(Gr){yp(kt,Wt,Gr)}break;case 5:zr(kt,Wt);break;case 4:_r?Bn(Pt,kt,Wt):fr&&fr&&(kt=kt.stateNode.containerInfo,Wt=Er(kt),fn(kt,Wt))}}function Pn(Pt,kt,Wt){for(var Kt=kt;;)if(gn(Pt,Kt,Wt),Kt.child===null||_r&&Kt.tag===4){if(Kt===kt)break;for(;Kt.sibling===null;){if(Kt.return===null||Kt.return===kt)return;Kt=Kt.return}Kt.sibling.return=Kt.return,Kt=Kt.sibling}else Kt.child.return=Kt,Kt=Kt.child}function _i(Pt){var kt=Pt.alternate;kt!==null&&(Pt.alternate=null,_i(kt)),Pt.child=null,Pt.deletions=null,Pt.sibling=null,Pt.tag===5&&(kt=Pt.stateNode,kt!==null&&mn(kt)),Pt.stateNode=null,Pt.return=null,Pt.dependencies=null,Pt.memoizedProps=null,Pt.memoizedState=null,Pt.pendingProps=null,Pt.stateNode=null,Pt.updateQueue=null}function Jn(Pt){return Pt.tag===5||Pt.tag===3||Pt.tag===4}function ts(Pt){e:for(;;){for(;Pt.sibling===null;){if(Pt.return===null||Jn(Pt.return))return null;Pt=Pt.return}for(Pt.sibling.return=Pt.return,Pt=Pt.sibling;Pt.tag!==5&&Pt.tag!==6&&Pt.tag!==18;){if(Pt.flags&2||Pt.child===null||Pt.tag===4)continue e;Pt.child.return=Pt,Pt=Pt.child}if(!(Pt.flags&2))return Pt.stateNode}}function rs(Pt){if(_r){e:{for(var kt=Pt.return;kt!==null;){if(Jn(kt))break e;kt=kt.return}throw Error(ut(160))}var Wt=kt;switch(Wt.tag){case 5:kt=Wt.stateNode,Wt.flags&32&&(Wr(kt),Wt.flags&=-33),Wt=ts(Pt),jn(Pt,Wt,kt);break;case 3:case 4:kt=Wt.stateNode.containerInfo,Wt=ts(Pt),Fn(Pt,Wt,kt);break;default:throw Error(ut(161))}}}function Fn(Pt,kt,Wt){var Kt=Pt.tag;if(Kt===5||Kt===6)Pt=Pt.stateNode,kt?Mn(Wt,Pt,kt):Ln(Wt,Pt);else if(Kt!==4&&(Pt=Pt.child,Pt!==null))for(Fn(Pt,kt,Wt),Pt=Pt.sibling;Pt!==null;)Fn(Pt,kt,Wt),Pt=Pt.sibling}function jn(Pt,kt,Wt){var Kt=Pt.tag;if(Kt===5||Kt===6)Pt=Pt.stateNode,kt?Qr(Wt,Pt,kt):Qn(Wt,Pt);else if(Kt!==4&&(Pt=Pt.child,Pt!==null))for(jn(Pt,kt,Wt),Pt=Pt.sibling;Pt!==null;)jn(Pt,kt,Wt),Pt=Pt.sibling}function Bn(Pt,kt,Wt){for(var Kt=kt,Qt=!1,lr,Gr;;){if(!Qt){Qt=Kt.return;e:for(;;){if(Qt===null)throw Error(ut(160));switch(lr=Qt.stateNode,Qt.tag){case 5:Gr=!1;break e;case 3:lr=lr.containerInfo,Gr=!0;break e;case 4:lr=lr.containerInfo,Gr=!0;break e}Qt=Qt.return}Qt=!0}if(Kt.tag===5||Kt.tag===6)Pn(Pt,Kt,Wt),Gr?or(lr,Kt.stateNode):Ar(lr,Kt.stateNode);else if(Kt.tag===18)Gr?Br(lr,Kt.stateNode):In(lr,Kt.stateNode);else if(Kt.tag===4){if(Kt.child!==null){lr=Kt.stateNode.containerInfo,Gr=!0,Kt.child.return=Kt,Kt=Kt.child;continue}}else if(gn(Pt,Kt,Wt),Kt.child!==null){Kt.child.return=Kt,Kt=Kt.child;continue}if(Kt===kt)break;for(;Kt.sibling===null;){if(Kt.return===null||Kt.return===kt)return;Kt=Kt.return,Kt.tag===4&&(Qt=!1)}Kt.sibling.return=Kt.return,Kt=Kt.sibling}}function vs(Pt,kt){if(_r){switch(kt.tag){case 0:case 11:case 14:case 15:Or(3,kt,kt.return),Zr(3,kt),Or(5,kt,kt.return);return;case 1:return;case 5:var Wt=kt.stateNode;if(Wt!=null){var Kt=kt.memoizedProps;Pt=Pt!==null?Pt.memoizedProps:Kt;var Qt=kt.type,lr=kt.updateQueue;kt.updateQueue=null,lr!==null&&Yr(Wt,lr,Qt,Pt,Kt,kt)}return;case 6:if(kt.stateNode===null)throw Error(ut(162));Wt=kt.memoizedProps,ln(kt.stateNode,Pt!==null?Pt.memoizedProps:Wt,Wt);return;case 3:Nr&&Pt!==null&&Pt.memoizedState.isDehydrated&&wn(kt.stateNode.containerInfo);return;case 12:return;case 13:Ps(kt);return;case 19:Ps(kt);return;case 17:return}throw Error(ut(163))}switch(kt.tag){case 0:case 11:case 14:case 15:Or(3,kt,kt.return),Zr(3,kt),Or(5,kt,kt.return);return;case 12:return;case 13:Ps(kt);return;case 19:Ps(kt);return;case 3:Nr&&Pt!==null&&Pt.memoizedState.isDehydrated&&wn(kt.stateNode.containerInfo);break;case 22:case 23:return}e:if(fr){switch(kt.tag){case 1:case 5:case 6:break e;case 3:case 4:kt=kt.stateNode,fn(kt.containerInfo,kt.pendingChildren);break e}throw Error(ut(163))}}function Ps(Pt){var kt=Pt.updateQueue;if(kt!==null){Pt.updateQueue=null;var Wt=Pt.stateNode;Wt===null&&(Wt=Pt.stateNode=new Rr),kt.forEach(function(Kt){var Qt=Bv.bind(null,Pt,Kt);Wt.has(Kt)||(Wt.add(Kt),Kt.then(Qt,Qt))})}}function fo(Pt,kt){for(Pr=kt;Pr!==null;){kt=Pr;var Wt=kt.deletions;if(Wt!==null)for(var Kt=0;Kt<Wt.length;Kt++){var Qt=Wt[Kt];try{var lr=Pt;_r?Bn(lr,Qt,kt):Pn(lr,Qt,kt);var Gr=Qt.alternate;Gr!==null&&(Gr.return=null),Qt.return=null}catch(no){yp(Qt,kt,no)}}if(Wt=kt.child,kt.subtreeFlags&12854&&Wt!==null)Wt.return=kt,Pr=Wt;else for(;Pr!==null;){kt=Pr;try{var _n=kt.flags;if(_n&32&&_r&&Wr(kt.stateNode),_n&512){var qn=kt.alternate;if(qn!==null){var ms=qn.ref;ms!==null&&(typeof ms=="function"?ms(null):ms.current=null)}}if(_n&8192)switch(kt.tag){case 13:if(kt.memoizedState!==null){var Gs=kt.alternate;(Gs===null||Gs.memoizedState===null)&&(nv=Uo())}break;case 22:var Ao=kt.memoizedState!==null,go=kt.alternate,Al=go!==null&&go.memoizedState!==null;if(Wt=kt,_r){e:if(Kt=Wt,Qt=Ao,lr=null,_r)for(var lo=Kt;;){if(lo.tag===5){if(lr===null){lr=lo;var Yu=lo.stateNode;Qt?Ir(Yu):kn(lo.stateNode,lo.memoizedProps)}}else if(lo.tag===6){if(lr===null){var jp=lo.stateNode;Qt?dn(jp):Mr(jp,lo.memoizedProps)}}else if((lo.tag!==22&&lo.tag!==23||lo.memoizedState===null||lo===Kt)&&lo.child!==null){lo.child.return=lo,lo=lo.child;continue}if(lo===Kt)break;for(;lo.sibling===null;){if(lo.return===null||lo.return===Kt)break e;lr===lo&&(lr=null),lo=lo.return}lr===lo&&(lr=null),lo.sibling.return=lo.return,lo=lo.sibling}}if(Ao&&!Al&&Wt.mode&1){Pr=Wt;for(var $n=Wt.child;$n!==null;){for(Wt=Pr=$n;Pr!==null;){Kt=Pr;var Tn=Kt.child;switch(Kt.tag){case 0:case 11:case 14:case 15:Or(4,Kt,Kt.return);break;case 1:zr(Kt,Kt.return);var Vn=Kt.stateNode;if(typeof Vn.componentWillUnmount=="function"){var Ns=Kt.return;try{Vn.props=Kt.memoizedProps,Vn.state=Kt.memoizedState,Vn.componentWillUnmount()}catch(no){yp(Kt,Ns,no)}}break;case 5:zr(Kt,Kt.return);break;case 22:if(Kt.memoizedState!==null){No(Wt);continue}}Tn!==null?(Tn.return=Kt,Pr=Tn):No(Wt)}$n=$n.sibling}}}switch(_n&4102){case 2:rs(kt),kt.flags&=-3;break;case 6:rs(kt),kt.flags&=-3,vs(kt.alternate,kt);break;case 4096:kt.flags&=-4097;break;case 4100:kt.flags&=-4097,vs(kt.alternate,kt);break;case 4:vs(kt.alternate,kt)}}catch(no){yp(kt,kt.return,no)}if(Wt=kt.sibling,Wt!==null){Wt.return=kt.return,Pr=Wt;break}Pr=kt.return}}}function eo(Pt,kt,Wt){Pr=Pt,Sl(Pt)}function Sl(Pt,kt,Wt){for(var Kt=(Pt.mode&1)!==0;Pr!==null;){var Qt=Pr,lr=Qt.child;if(Qt.tag===22&&Kt){var Gr=Qt.memoizedState!==null||rr;if(!Gr){var _n=Qt.alternate,qn=_n!==null&&_n.memoizedState!==null||sr;_n=rr;var ms=sr;if(rr=Gr,(sr=qn)&&!ms)for(Pr=Qt;Pr!==null;)Gr=Pr,qn=Gr.child,Gr.tag===22&&Gr.memoizedState!==null?Zl(Qt):qn!==null?(qn.return=Gr,Pr=qn):Zl(Qt);for(;lr!==null;)Pr=lr,Sl(lr),lr=lr.sibling;Pr=Qt,rr=_n,sr=ms}El(Pt)}else Qt.subtreeFlags&8772&&lr!==null?(lr.return=Qt,Pr=lr):El(Pt)}}function El(Pt){for(;Pr!==null;){var kt=Pr;if(kt.flags&8772){var Wt=kt.alternate;try{if(kt.flags&8772)switch(kt.tag){case 0:case 11:case 15:sr||Zr(5,kt);break;case 1:var Kt=kt.stateNode;if(kt.flags&4&&!sr)if(Wt===null)Kt.componentDidMount();else{var Qt=kt.elementType===kt.type?Wt.memoizedProps:su(kt.type,Wt.memoizedProps);Kt.componentDidUpdate(Qt,Wt.memoizedState,Kt.__reactInternalSnapshotBeforeUpdate)}var lr=kt.updateQueue;lr!==null&&Ep(kt,lr,Kt);break;case 3:var Gr=kt.updateQueue;if(Gr!==null){if(Wt=null,kt.child!==null)switch(kt.child.tag){case 5:Wt=Ut(kt.child.stateNode);break;case 1:Wt=kt.child.stateNode}Ep(kt,Gr,Wt)}break;case 5:var _n=kt.stateNode;Wt===null&&kt.flags&4&&Xn(_n,kt.type,kt.memoizedProps,kt);break;case 6:break;case 4:break;case 12:break;case 13:if(Nr&&kt.memoizedState===null){var qn=kt.alternate;if(qn!==null){var ms=qn.memoizedState;if(ms!==null){var Gs=ms.dehydrated;Gs!==null&&On(Gs)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(ut(163))}sr||kt.flags&512&&$r(kt)}catch(Ao){yp(kt,kt.return,Ao)}}if(kt===Pt){Pr=null;break}if(Wt=kt.sibling,Wt!==null){Wt.return=kt.return,Pr=Wt;break}Pr=kt.return}}function No(Pt){for(;Pr!==null;){var kt=Pr;if(kt===Pt){Pr=null;break}var Wt=kt.sibling;if(Wt!==null){Wt.return=kt.return,Pr=Wt;break}Pr=kt.return}}function Zl(Pt){for(;Pr!==null;){var kt=Pr;try{switch(kt.tag){case 0:case 11:case 15:var Wt=kt.return;try{Zr(4,kt)}catch(qn){yp(kt,Wt,qn)}break;case 1:var Kt=kt.stateNode;if(typeof Kt.componentDidMount=="function"){var Qt=kt.return;try{Kt.componentDidMount()}catch(qn){yp(kt,Qt,qn)}}var lr=kt.return;try{$r(kt)}catch(qn){yp(kt,lr,qn)}break;case 5:var Gr=kt.return;try{$r(kt)}catch(qn){yp(kt,Gr,qn)}}}catch(qn){yp(kt,kt.return,qn)}if(kt===Pt){Pr=null;break}var _n=kt.sibling;if(_n!==null){_n.return=kt.return,Pr=_n;break}Pr=kt.return}}var Co=0,Ol=1,Mu=2,Ou=3,rp=4;if(typeof Symbol=="function"&&Symbol.for){var Tl=Symbol.for;Co=Tl("selector.component"),Ol=Tl("selector.has_pseudo_class"),Mu=Tl("selector.role"),Ou=Tl("selector.test_id"),rp=Tl("selector.text")}function Qp(Pt){var kt=Tr(Pt);if(kt!=null){if(typeof kt.memoizedProps["data-testname"]!="string")throw Error(ut(364));return kt}if(Pt=vr(Pt),Pt===null)throw Error(ut(362));return Pt.stateNode.current}function im(Pt,kt){switch(kt.$$typeof){case Co:if(Pt.type===kt.value)return!0;break;case Ol:e:{kt=kt.value,Pt=[Pt,0];for(var Wt=0;Wt<Pt.length;){var Kt=Pt[Wt++],Qt=Pt[Wt++],lr=kt[Qt];if(Kt.tag!==5||!qr(Kt)){for(;lr!=null&&im(Kt,lr);)Qt++,lr=kt[Qt];if(Qt===kt.length){kt=!0;break e}else for(Kt=Kt.child;Kt!==null;)Pt.push(Kt,Qt),Kt=Kt.sibling}}kt=!1}return kt;case Mu:if(Pt.tag===5&&pn(Pt.stateNode,kt.value))return!0;break;case rp:if((Pt.tag===5||Pt.tag===6)&&(Pt=Kr(Pt),Pt!==null&&0<=Pt.indexOf(kt.value)))return!0;break;case Ou:if(Pt.tag===5&&(Pt=Pt.memoizedProps["data-testname"],typeof Pt=="string"&&Pt.toLowerCase()===kt.value.toLowerCase()))return!0;break;default:throw Error(ut(365))}return!1}function ym(Pt){switch(Pt.$$typeof){case Co:return"<"+(Dt(Pt.value)||"Unknown")+">";case Ol:return":has("+(ym(Pt)||"")+")";case Mu:return'[role="'+Pt.value+'"]';case rp:return'"'+Pt.value+'"';case Ou:return'[data-testname="'+Pt.value+'"]';default:throw Error(ut(365))}}function $m(Pt,kt){var Wt=[];Pt=[Pt,0];for(var Kt=0;Kt<Pt.length;){var Qt=Pt[Kt++],lr=Pt[Kt++],Gr=kt[lr];if(Qt.tag!==5||!qr(Qt)){for(;Gr!=null&&im(Qt,Gr);)lr++,Gr=kt[lr];if(lr===kt.length)Wt.push(Qt);else for(Qt=Qt.child;Qt!==null;)Pt.push(Qt,lr),Qt=Qt.sibling}}return Wt}function jm(Pt,kt){if(!tr)throw Error(ut(363));Pt=Qp(Pt),Pt=$m(Pt,kt),kt=[],Pt=Array.from(Pt);for(var Wt=0;Wt<Pt.length;){var Kt=Pt[Wt++];if(Kt.tag===5)qr(Kt)||kt.push(Kt.stateNode);else for(Kt=Kt.child;Kt!==null;)Pt.push(Kt),Kt=Kt.sibling}return kt}var Lv=Math.ceil,zm=dt.ReactCurrentDispatcher,tv=dt.ReactCurrentOwner,eu=dt.ReactCurrentBatchConfig,jo=0,ru=null,nu=null,Nu=0,Pp=0,Mm=Hn(0),pu=0,Fm=null,Pm=0,Hm=0,rv=0,Bm=null,gp=null,nv=0,iv=1/0;function Am(){iv=Uo()+500}var Wm=!1,sv=null,lm=null,Gm=!1,um=null,qm=0,Um=0,ov=null,Km=-1,Xm=0;function np(){return jo&6?Uo():Km!==-1?Km:Km=Uo()}function dm(Pt){return Pt.mode&1?jo&2&&Nu!==0?Nu&-Nu:_d.transition!==null?(Xm===0&&(Pt=Ml,Ml<<=1,!(Ml&4194240)&&(Ml=64),Xm=Pt),Xm):(Pt=Mo,Pt!==0?Pt:Vr()):1}function Np(Pt,kt,Wt){if(50<Um)throw Um=0,ov=null,Error(ut(185));var Kt=Zm(Pt,kt);return Kt===null?null:(Ju(Kt,kt,Wt),(!(jo&2)||Kt!==ru)&&(Kt===ru&&(!(jo&2)&&(Hm|=kt),pu===4&&hm(Kt,Nu)),vp(Kt,Wt),kt===1&&jo===0&&!(Pt.mode&1)&&(Am(),Bl&&iu())),Kt)}function Zm(Pt,kt){Pt.lanes|=kt;var Wt=Pt.alternate;for(Wt!==null&&(Wt.lanes|=kt),Wt=Pt,Pt=Pt.return;Pt!==null;)Pt.childLanes|=kt,Wt=Pt.alternate,Wt!==null&&(Wt.childLanes|=kt),Wt=Pt,Pt=Pt.return;return Wt.tag===3?Wt.stateNode:null}function vp(Pt,kt){var Wt=Pt.callbackNode;Ap(Pt,kt);var Kt=zo(Pt,Pt===ru?Nu:0);if(Kt===0)Wt!==null&&cs(Wt),Pt.callbackNode=null,Pt.callbackPriority=0;else if(kt=Kt&-Kt,Pt.callbackPriority!==kt){if(Wt!=null&&cs(Wt),kt===1)Pt.tag===0?ga(yv.bind(null,Pt)):Sp(yv.bind(null,Pt)),tn?er(function(){jo===0&&iu()}):jr(ju,iu),Wt=null;else{switch(Is(Kt)){case 1:Wt=ju;break;case 4:Wt=sm;break;case 16:Wt=Wp;break;case 536870912:Wt=Jp;break;default:Wt=Wp}Wt=Mv(Wt,vv.bind(null,Pt))}Pt.callbackPriority=kt,Pt.callbackNode=Wt}}function vv(Pt,kt){if(Km=-1,Xm=0,jo&6)throw Error(ut(327));var Wt=Pt.callbackNode;if(Sm()&&Pt.callbackNode!==Wt)return null;var Kt=zo(Pt,Pt===ru?Nu:0);if(Kt===0)return null;if(Kt&30||Kt&Pt.expiredLanes||kt)kt=Ym(Pt,Kt);else{kt=Kt;var Qt=jo;jo|=2;var lr=Sv();(ru!==Pt||Nu!==kt)&&(Am(),_m(Pt,kt));do try{Nv();break}catch(_n){xv(Pt,_n)}while(!0);Au(),zm.current=lr,jo=Qt,nu!==null?kt=0:(ru=null,Nu=0,kt=pu)}if(kt!==0){if(kt===2&&(Qt=Qu(Pt),Qt!==0&&(Kt=Qt,kt=lv(Pt,Qt))),kt===1)throw Wt=Fm,_m(Pt,0),hm(Pt,Kt),vp(Pt,Uo()),Wt;if(kt===6)hm(Pt,Kt);else{if(Qt=Pt.current.alternate,!(Kt&30)&&!Dv(Qt)&&(kt=Ym(Pt,Kt),kt===2&&(lr=Qu(Pt),lr!==0&&(Kt=lr,kt=lv(Pt,lr))),kt===1))throw Wt=Fm,_m(Pt,0),hm(Pt,Kt),vp(Pt,Uo()),Wt;switch(Pt.finishedWork=Qt,Pt.finishedLanes=Kt,kt){case 0:case 1:throw Error(ut(345));case 2:xm(Pt,gp);break;case 3:if(hm(Pt,Kt),(Kt&130023424)===Kt&&(kt=nv+500-Uo(),10<kt)){if(zo(Pt,0)!==0)break;if(Qt=Pt.suspendedLanes,(Qt&Kt)!==Kt){np(),Pt.pingedLanes|=Pt.suspendedLanes&Qt;break}Pt.timeoutHandle=Cr(xm.bind(null,Pt,gp),kt);break}xm(Pt,gp);break;case 4:if(hm(Pt,Kt),(Kt&4194240)===Kt)break;for(kt=Pt.eventTimes,Qt=-1;0<Kt;){var Gr=31-Go(Kt);lr=1<<Gr,Gr=kt[Gr],Gr>Qt&&(Qt=Gr),Kt&=~lr}if(Kt=Qt,Kt=Uo()-Kt,Kt=(120>Kt?120:480>Kt?480:1080>Kt?1080:1920>Kt?1920:3e3>Kt?3e3:4320>Kt?4320:1960*Lv(Kt/1960))-Kt,10<Kt){Pt.timeoutHandle=Cr(xm.bind(null,Pt,gp),Kt);break}xm(Pt,gp);break;case 5:xm(Pt,gp);break;default:throw Error(ut(329))}}}return vp(Pt,Uo()),Pt.callbackNode===Wt?vv.bind(null,Pt):null}function lv(Pt,kt){var Wt=Bm;return Pt.current.memoizedState.isDehydrated&&(_m(Pt,kt).flags|=256),Pt=Ym(Pt,kt),Pt!==2&&(kt=gp,gp=Wt,kt!==null&&cv(kt)),Pt}function cv(Pt){gp===null?gp=Pt:gp.push.apply(gp,Pt)}function Dv(Pt){for(var kt=Pt;;){if(kt.flags&16384){var Wt=kt.updateQueue;if(Wt!==null&&(Wt=Wt.stores,Wt!==null))for(var Kt=0;Kt<Wt.length;Kt++){var Qt=Wt[Kt],lr=Qt.getSnapshot;Qt=Qt.value;try{if(!Wo(lr(),Qt))return!1}catch{return!1}}}if(Wt=kt.child,kt.subtreeFlags&16384&&Wt!==null)Wt.return=kt,kt=Wt;else{if(kt===Pt)break;for(;kt.sibling===null;){if(kt.return===null||kt.return===Pt)return!0;kt=kt.return}kt.sibling.return=kt.return,kt=kt.sibling}}return!0}function hm(Pt,kt){for(kt&=~rv,kt&=~Hm,Pt.suspendedLanes|=kt,Pt.pingedLanes&=~kt,Pt=Pt.expirationTimes;0<kt;){var Wt=31-Go(kt),Kt=1<<Wt;Pt[Wt]=-1,kt&=~Kt}}function yv(Pt){if(jo&6)throw Error(ut(327));Sm();var kt=zo(Pt,0);if(!(kt&1))return vp(Pt,Uo()),null;var Wt=Ym(Pt,kt);if(Pt.tag!==0&&Wt===2){var Kt=Qu(Pt);Kt!==0&&(kt=Kt,Wt=lv(Pt,Kt))}if(Wt===1)throw Wt=Fm,_m(Pt,0),hm(Pt,kt),vp(Pt,Uo()),Wt;if(Wt===6)throw Error(ut(345));return Pt.finishedWork=Pt.current.alternate,Pt.finishedLanes=kt,xm(Pt,gp),vp(Pt,Uo()),null}function _v(Pt){um!==null&&um.tag===0&&!(jo&6)&&Sm();var kt=jo;jo|=1;var Wt=eu.transition,Kt=Mo;try{if(eu.transition=null,Mo=1,Pt)return Pt()}finally{Mo=Kt,eu.transition=Wt,jo=kt,!(jo&6)&&iu()}}function uv(){Pp=Mm.current,Un(Mm)}function _m(Pt,kt){Pt.finishedWork=null,Pt.finishedLanes=0;var Wt=Pt.timeoutHandle;if(Wt!==xr&&(Pt.timeoutHandle=xr,Sr(Wt)),nu!==null)for(Wt=nu.return;Wt!==null;){var Kt=Wt;switch(op(Kt),Kt.tag){case 1:Kt=Kt.type.childContextTypes,Kt!=null&&Ws();break;case 3:Xs(),Un(Us),Un(ps),qo();break;case 5:po(Kt);break;case 4:Xs();break;case 13:Un(Es);break;case 19:Un(Es);break;case 10:Ip(Kt.type._context);break;case 22:case 23:uv()}Wt=Wt.return}if(ru=Pt,nu=Pt=fm(Pt.current,null),Nu=Pp=kt,pu=0,Fm=null,rv=Hm=Pm=0,gp=Bm=null,yu!==null){for(kt=0;kt<yu.length;kt++)if(Wt=yu[kt],Kt=Wt.interleaved,Kt!==null){Wt.interleaved=null;var Qt=Kt.next,lr=Wt.pending;if(lr!==null){var Gr=lr.next;lr.next=Qt,Kt.next=Gr}Wt.pending=Kt}yu=null}return Pt}function xv(Pt,kt){do{var Wt=nu;try{if(Au(),ro.current=Du,Cl){for(var Kt=mo.memoizedState;Kt!==null;){var Qt=Kt.queue;Qt!==null&&(Qt.pending=null),Kt=Kt.next}Cl=!1}if(Do=0,ho=xo=mo=null,ls=!1,vo=0,tv.current=null,Wt===null||Wt.return===null){pu=1,Fm=kt,nu=null;break}e:{var lr=Pt,Gr=Wt.return,_n=Wt,qn=kt;if(kt=Nu,_n.flags|=32768,qn!==null&&typeof qn=="object"&&typeof qn.then=="function"){var ms=qn,Gs=_n,Ao=Gs.tag;if(!(Gs.mode&1)&&(Ao===0||Ao===11||Ao===15)){var go=Gs.alternate;go?(Gs.updateQueue=go.updateQueue,Gs.memoizedState=go.memoizedState,Gs.lanes=go.lanes):(Gs.updateQueue=null,Gs.memoizedState=null)}var Al=Op(Gr);if(Al!==null){Al.flags&=-257,Hp(Al,Gr,_n,lr,kt),Al.mode&1&&pp(lr,ms,kt),kt=Al,qn=ms;var lo=kt.updateQueue;if(lo===null){var Yu=new Set;Yu.add(qn),kt.updateQueue=Yu}else lo.add(qn);break e}else{if(!(kt&1)){pp(lr,ms,kt),dv();break e}qn=Error(ut(426))}}else if(Dr&&_n.mode&1){var jp=Op(Gr);if(jp!==null){!(jp.flags&65536)&&(jp.flags|=256),Hp(jp,Gr,_n,lr,kt),ds(qn);break e}}lr=qn,pu!==4&&(pu=2),Bm===null?Bm=[lr]:Bm.push(lr),qn=ns(qn,_n),_n=Gr;do{switch(_n.tag){case 3:_n.flags|=65536,kt&=-kt,_n.lanes|=kt;var $n=Dp(_n,qn,kt);qp(_n,$n);break e;case 1:lr=qn;var Tn=_n.type,Vn=_n.stateNode;if(!(_n.flags&128)&&(typeof Tn.getDerivedStateFromError=="function"||Vn!==null&&typeof Vn.componentDidCatch=="function"&&(lm===null||!lm.has(Vn)))){_n.flags|=65536,kt&=-kt,_n.lanes|=kt;var Ns=fp(_n,lr,kt);qp(_n,Ns);break e}}_n=_n.return}while(_n!==null)}Ev(Wt)}catch(no){kt=no,nu===Wt&&Wt!==null&&(nu=Wt=Wt.return);continue}break}while(!0)}function Sv(){var Pt=zm.current;return zm.current=Du,Pt===null?Du:Pt}function dv(){(pu===0||pu===3||pu===2)&&(pu=4),ru===null||!(Pm&268435455)&&!(Hm&268435455)||hm(ru,Nu)}function Ym(Pt,kt){var Wt=jo;jo|=2;var Kt=Sv();ru===Pt&&Nu===kt||_m(Pt,kt);do try{Ov();break}catch(Qt){xv(Pt,Qt)}while(!0);if(Au(),jo=Wt,zm.current=Kt,nu!==null)throw Error(ut(261));return ru=null,Nu=0,pu}function Ov(){for(;nu!==null;)wv(nu)}function Nv(){for(;nu!==null&&!uo();)wv(nu)}function wv(Pt){var kt=Tv(Pt.alternate,Pt,Pp);Pt.memoizedProps=Pt.pendingProps,kt===null?Ev(Pt):nu=kt,tv.current=null}function Ev(Pt){var kt=Pt;do{var Wt=kt.alternate;if(Pt=kt.return,kt.flags&32768){if(Wt=Jt(Wt,kt),Wt!==null){Wt.flags&=32767,nu=Wt;return}if(Pt!==null)Pt.flags|=32768,Pt.subtreeFlags=0,Pt.deletions=null;else{pu=6,nu=null;return}}else if(Wt=Ts(Wt,kt,Pp),Wt!==null){nu=Wt;return}if(kt=kt.sibling,kt!==null){nu=kt;return}nu=kt=Pt}while(kt!==null);pu===0&&(pu=5)}function xm(Pt,kt){var Wt=Mo,Kt=eu.transition;try{eu.transition=null,Mo=1,$v(Pt,kt,Wt)}finally{eu.transition=Kt,Mo=Wt}return null}function $v(Pt,kt,Wt){do Sm();while(um!==null);if(jo&6)throw Error(ut(327));var Kt=Pt.finishedWork,Qt=Pt.finishedLanes;if(Kt===null)return null;if(Pt.finishedWork=null,Pt.finishedLanes=0,Kt===Pt.current)throw Error(ut(177));Pt.callbackNode=null,Pt.callbackPriority=0;var lr=Kt.lanes|Kt.childLanes;if(xp(Pt,lr),Pt===ru&&(nu=ru=null,Nu=0),!(Kt.subtreeFlags&2064)&&!(Kt.flags&2064)||Gm||(Gm=!0,Mv(Wp,function(){return Sm(),null})),lr=(Kt.flags&15990)!==0,Kt.subtreeFlags&15990||lr){lr=eu.transition,eu.transition=null;var Gr=Mo;Mo=1;var _n=jo;jo|=4,tv.current=null,Cn(Pt,Kt),fo(Pt,Kt),Gt(Pt.containerInfo),Pt.current=Kt,eo(Kt),Wl(),jo=_n,Mo=Gr,eu.transition=lr}else Pt.current=Kt;if(Gm&&(Gm=!1,um=Pt,qm=Qt),lr=Pt.pendingLanes,lr===0&&(lm=null),em(Kt.stateNode),vp(Pt,Uo()),kt!==null)for(Wt=Pt.onRecoverableError,Kt=0;Kt<kt.length;Kt++)Wt(kt[Kt]);if(Wm)throw Wm=!1,Pt=sv,sv=null,Pt;return qm&1&&Pt.tag!==0&&Sm(),lr=Pt.pendingLanes,lr&1?Pt===ov?Um++:(Um=0,ov=Pt):Um=0,iu(),null}function Sm(){if(um!==null){var Pt=Is(qm),kt=eu.transition,Wt=Mo;try{if(eu.transition=null,Mo=16>Pt?16:Pt,um===null)var Kt=!1;else{if(Pt=um,um=null,qm=0,jo&6)throw Error(ut(331));var Qt=jo;for(jo|=4,Pr=Pt.current;Pr!==null;){var lr=Pr,Gr=lr.child;if(Pr.flags&16){var _n=lr.deletions;if(_n!==null){for(var qn=0;qn<_n.length;qn++){var ms=_n[qn];for(Pr=ms;Pr!==null;){var Gs=Pr;switch(Gs.tag){case 0:case 11:case 15:Or(8,Gs,lr)}var Ao=Gs.child;if(Ao!==null)Ao.return=Gs,Pr=Ao;else for(;Pr!==null;){Gs=Pr;var go=Gs.sibling,Al=Gs.return;if(_i(Gs),Gs===ms){Pr=null;break}if(go!==null){go.return=Al,Pr=go;break}Pr=Al}}}var lo=lr.alternate;if(lo!==null){var Yu=lo.child;if(Yu!==null){lo.child=null;do{var jp=Yu.sibling;Yu.sibling=null,Yu=jp}while(Yu!==null)}}Pr=lr}}if(lr.subtreeFlags&2064&&Gr!==null)Gr.return=lr,Pr=Gr;else e:for(;Pr!==null;){if(lr=Pr,lr.flags&2048)switch(lr.tag){case 0:case 11:case 15:Or(9,lr,lr.return)}var $n=lr.sibling;if($n!==null){$n.return=lr.return,Pr=$n;break e}Pr=lr.return}}var Tn=Pt.current;for(Pr=Tn;Pr!==null;){Gr=Pr;var Vn=Gr.child;if(Gr.subtreeFlags&2064&&Vn!==null)Vn.return=Gr,Pr=Vn;else e:for(Gr=Tn;Pr!==null;){if(_n=Pr,_n.flags&2048)try{switch(_n.tag){case 0:case 11:case 15:Zr(9,_n)}}catch(no){yp(_n,_n.return,no)}if(_n===Gr){Pr=null;break e}var Ns=_n.sibling;if(Ns!==null){Ns.return=_n.return,Pr=Ns;break e}Pr=_n.return}}if(jo=Qt,iu(),Ll&&typeof Ll.onPostCommitFiberRoot=="function")try{Ll.onPostCommitFiberRoot(Fp,Pt)}catch{}Kt=!0}return Kt}finally{Mo=Wt,eu.transition=kt}}return!1}function Rv(Pt,kt,Wt){kt=ns(Wt,kt),kt=Dp(Pt,kt,1),_u(Pt,kt),kt=np(),Pt=Zm(Pt,1),Pt!==null&&(Ju(Pt,1,kt),vp(Pt,kt))}function yp(Pt,kt,Wt){if(Pt.tag===3)Rv(Pt,Pt,Wt);else for(;kt!==null;){if(kt.tag===3){Rv(kt,Pt,Wt);break}else if(kt.tag===1){var Kt=kt.stateNode;if(typeof kt.type.getDerivedStateFromError=="function"||typeof Kt.componentDidCatch=="function"&&(lm===null||!lm.has(Kt))){Pt=ns(Wt,Pt),Pt=fp(kt,Pt,1),_u(kt,Pt),Pt=np(),kt=Zm(kt,1),kt!==null&&(Ju(kt,1,Pt),vp(kt,Pt));break}}kt=kt.return}}function jv(Pt,kt,Wt){var Kt=Pt.pingCache;Kt!==null&&Kt.delete(kt),kt=np(),Pt.pingedLanes|=Pt.suspendedLanes&Wt,ru===Pt&&(Nu&Wt)===Wt&&(pu===4||pu===3&&(Nu&130023424)===Nu&&500>Uo()-nv?_m(Pt,0):rv|=Wt),vp(Pt,kt)}function Cv(Pt,kt){kt===0&&(Pt.mode&1?(kt=Hl,Hl<<=1,!(Hl&130023424)&&(Hl=4194304)):kt=1);var Wt=np();Pt=Zm(Pt,kt),Pt!==null&&(Ju(Pt,kt,Wt),vp(Pt,Wt))}function Fv(Pt){var kt=Pt.memoizedState,Wt=0;kt!==null&&(Wt=kt.retryLane),Cv(Pt,Wt)}function Bv(Pt,kt){var Wt=0;switch(Pt.tag){case 13:var Kt=Pt.stateNode,Qt=Pt.memoizedState;Qt!==null&&(Wt=Qt.retryLane);break;case 19:Kt=Pt.stateNode;break;default:throw Error(ut(314))}Kt!==null&&Kt.delete(kt),Cv(Pt,Wt)}var Tv;Tv=function(Pt,kt,Wt){if(Pt!==null)if(Pt.memoizedProps!==kt.pendingProps||Us.current)oo=!0;else{if(!(Pt.lanes&Wt)&&!(kt.flags&128))return oo=!1,ev(Pt,kt,Wt);oo=!!(Pt.flags&131072)}else oo=!1,Dr&&kt.flags&1048576&&Vu(kt,Tp,kt.index);switch(kt.lanes=0,kt.tag){case 2:var Kt=kt.type;Pt!==null&&(Pt.alternate=null,kt.alternate=null,kt.flags|=2),Pt=kt.pendingProps;var Qt=yo(kt,ps.current);nn(kt,Wt),Qt=qs(null,kt,Kt,Pt,Qt,Wt);var lr=Oo();return kt.flags|=1,typeof Qt=="object"&&Qt!==null&&typeof Qt.render=="function"&&Qt.$$typeof===void 0?(kt.tag=1,kt.memoizedState=null,kt.updateQueue=null,Bs(Kt)?(lr=!0,To(kt)):lr=!1,kt.memoizedState=Qt.state!==null&&Qt.state!==void 0?Qt.state:null,Vp(kt),Qt.updater=zp,kt.stateNode=Qt,Qt._reactInternals=kt,Rp(kt,Kt,Pt,Wt),kt=Em(null,kt,Kt,!0,lr,Wt)):(kt.tag=0,Dr&&lr&&sp(kt),Io(null,kt,Qt,Wt),kt=kt.child),kt;case 16:Kt=kt.elementType;e:{switch(Pt!==null&&(Pt.alternate=null,kt.alternate=null,kt.flags|=2),Pt=kt.pendingProps,Qt=Kt._init,Kt=Qt(Kt._payload),kt.type=Kt,Qt=kt.tag=Vv(Kt),Pt=su(Kt,Pt),Qt){case 0:kt=Lm(null,kt,Kt,Pt,Wt);break e;case 1:kt=gm(null,kt,Kt,Pt,Wt);break e;case 11:kt=mp(null,kt,Kt,Pt,Wt);break e;case 14:kt=Zp(null,kt,Kt,su(Kt.type,Pt),Wt);break e}throw Error(ut(306,Kt,""))}return kt;case 0:return Kt=kt.type,Qt=kt.pendingProps,Qt=kt.elementType===Kt?Qt:su(Kt,Qt),Lm(Pt,kt,Kt,Qt,Wt);case 1:return Kt=kt.type,Qt=kt.pendingProps,Qt=kt.elementType===Kt?Qt:su(Kt,Qt),gm(Pt,kt,Kt,Qt,Wt);case 3:e:{if(vm(kt),Pt===null)throw Error(ut(387));Kt=kt.pendingProps,lr=kt.memoizedState,Qt=lr.element,Ds(Pt,kt),Lp(kt,Kt,null,Wt);var Gr=kt.memoizedState;if(Kt=Gr.element,Nr&&lr.isDehydrated)if(lr={element:Kt,isDehydrated:!1,cache:Gr.cache,transitions:Gr.transitions},kt.updateQueue.baseState=lr,kt.memoizedState=lr,kt.flags&256){Qt=Error(ut(423)),kt=nm(Pt,kt,Kt,Wt,Qt);break e}else if(Kt!==Qt){Qt=Error(ut(424)),kt=nm(Pt,kt,Kt,Wt,Qt);break e}else for(Nr&&(Il=Lo(kt.stateNode.containerInfo),Rl=kt,Dr=!0,dr=null,pr=!1),Wt=Sn(kt,null,Kt,Wt),kt.child=Wt;Wt;)Wt.flags=Wt.flags&-3|4096,Wt=Wt.sibling;else{if(us(),Kt===Qt){kt=tp(Pt,kt,Wt);break e}Io(Pt,kt,Kt,Wt)}kt=kt.child}return kt;case 5:return so(kt),Pt===null&&hn(kt),Kt=kt.type,Qt=kt.pendingProps,lr=Pt!==null?Pt.memoizedProps:null,Gr=Qt.children,ir(Kt,Qt)?Gr=null:lr!==null&&ir(Kt,lr)&&(kt.flags|=32),Zu(Pt,kt),Io(Pt,kt,Gr,Wt),kt.child;case 6:return Pt===null&&hn(kt),null;case 13:return ep(Pt,kt,Wt);case 4:return Cs(kt,kt.stateNode.containerInfo),Kt=kt.pendingProps,Pt===null?kt.child=Ls(kt,null,Kt,Wt):Io(Pt,kt,Kt,Wt),kt.child;case 11:return Kt=kt.type,Qt=kt.pendingProps,Qt=kt.elementType===Kt?Qt:su(Kt,Qt),mp(Pt,kt,Kt,Qt,Wt);case 7:return Io(Pt,kt,kt.pendingProps,Wt),kt.child;case 8:return Io(Pt,kt,kt.pendingProps.children,Wt),kt.child;case 12:return Io(Pt,kt,kt.pendingProps.children,Wt),kt.child;case 10:e:{if(Kt=kt.type._context,Qt=kt.pendingProps,lr=kt.memoizedProps,Gr=Qt.value,Gp(kt,Kt,Gr),lr!==null)if(Wo(lr.value,Gr)){if(lr.children===Qt.children&&!Us.current){kt=tp(Pt,kt,Wt);break e}}else for(lr=kt.child,lr!==null&&(lr.return=kt);lr!==null;){var _n=lr.dependencies;if(_n!==null){Gr=lr.child;for(var qn=_n.firstContext;qn!==null;){if(qn.context===Kt){if(lr.tag===1){qn=Yo(-1,Wt&-Wt),qn.tag=2;var ms=lr.updateQueue;if(ms!==null){ms=ms.shared;var Gs=ms.pending;Gs===null?qn.next=qn:(qn.next=Gs.next,Gs.next=qn),ms.pending=qn}}lr.lanes|=Wt,qn=lr.alternate,qn!==null&&(qn.lanes|=Wt),Up(lr.return,Wt,kt),_n.lanes|=Wt;break}qn=qn.next}}else if(lr.tag===10)Gr=lr.type===kt.type?null:lr.child;else if(lr.tag===18){if(Gr=lr.return,Gr===null)throw Error(ut(341));Gr.lanes|=Wt,_n=Gr.alternate,_n!==null&&(_n.lanes|=Wt),Up(Gr,Wt,kt),Gr=lr.sibling}else Gr=lr.child;if(Gr!==null)Gr.return=lr;else for(Gr=lr;Gr!==null;){if(Gr===kt){Gr=null;break}if(lr=Gr.sibling,lr!==null){lr.return=Gr.return,Gr=lr;break}Gr=Gr.return}lr=Gr}Io(Pt,kt,Qt.children,Wt),kt=kt.child}return kt;case 9:return Qt=kt.type,Kt=kt.pendingProps.children,nn(kt,Wt),Qt=xs(Qt),Kt=Kt(Qt),kt.flags|=1,Io(Pt,kt,Kt,Wt),kt.child;case 14:return Kt=kt.type,Qt=su(Kt,kt.pendingProps),Qt=su(Kt.type,Qt),Zp(Pt,kt,Kt,Qt,Wt);case 15:return km(Pt,kt,kt.type,kt.pendingProps,Wt);case 17:return Kt=kt.type,Qt=kt.pendingProps,Qt=kt.elementType===Kt?Qt:su(Kt,Qt),Pt!==null&&(Pt.alternate=null,kt.alternate=null,kt.flags|=2),kt.tag=1,Bs(Kt)?(Pt=!0,To(kt)):Pt=!1,nn(kt,Wt),ip(kt,Kt,Qt),Rp(kt,Kt,Qt,Wt),Em(null,kt,Kt,!0,Pt,Wt);case 19:return Nm(Pt,kt,Wt);case 22:return Im(Pt,kt,Wt)}throw Error(ut(156,kt.tag))};function Mv(Pt,kt){return jr(Pt,kt)}function Uv(Pt,kt,Wt,Kt){this.tag=Pt,this.key=Wt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=kt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Kt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $p(Pt,kt,Wt,Kt){return new Uv(Pt,kt,Wt,Kt)}function hv(Pt){return Pt=Pt.prototype,!(!Pt||!Pt.isReactComponent)}function Vv(Pt){if(typeof Pt=="function")return hv(Pt)?1:0;if(Pt!=null){if(Pt=Pt.$$typeof,Pt===vt)return 11;if(Pt===Et)return 14}return 2}function fm(Pt,kt){var Wt=Pt.alternate;return Wt===null?(Wt=$p(Pt.tag,kt,Pt.key,Pt.mode),Wt.elementType=Pt.elementType,Wt.type=Pt.type,Wt.stateNode=Pt.stateNode,Wt.alternate=Pt,Pt.alternate=Wt):(Wt.pendingProps=kt,Wt.type=Pt.type,Wt.flags=0,Wt.subtreeFlags=0,Wt.deletions=null),Wt.flags=Pt.flags&14680064,Wt.childLanes=Pt.childLanes,Wt.lanes=Pt.lanes,Wt.child=Pt.child,Wt.memoizedProps=Pt.memoizedProps,Wt.memoizedState=Pt.memoizedState,Wt.updateQueue=Pt.updateQueue,kt=Pt.dependencies,Wt.dependencies=kt===null?null:{lanes:kt.lanes,firstContext:kt.firstContext},Wt.sibling=Pt.sibling,Wt.index=Pt.index,Wt.ref=Pt.ref,Wt}function Qm(Pt,kt,Wt,Kt,Qt,lr){var Gr=2;if(Kt=Pt,typeof Pt=="function")hv(Pt)&&(Gr=1);else if(typeof Pt=="string")Gr=5;else e:switch(Pt){case pt:return wm(Wt.children,Qt,lr,kt);case mt:Gr=8,Qt|=8;break;case gt:return Pt=$p(12,Wt,kt,Qt|2),Pt.elementType=gt,Pt.lanes=lr,Pt;case St:return Pt=$p(13,Wt,kt,Qt),Pt.elementType=St,Pt.lanes=lr,Pt;case wt:return Pt=$p(19,Wt,kt,Qt),Pt.elementType=wt,Pt.lanes=lr,Pt;case Tt:return Jm(Wt,Qt,lr,kt);default:if(typeof Pt=="object"&&Pt!==null)switch(Pt.$$typeof){case xt:Gr=10;break e;case yt:Gr=9;break e;case vt:Gr=11;break e;case Et:Gr=14;break e;case Rt:Gr=16,Kt=null;break e}throw Error(ut(130,Pt==null?Pt:typeof Pt,""))}return kt=$p(Gr,Wt,kt,Qt),kt.elementType=Pt,kt.type=Kt,kt.lanes=lr,kt}function wm(Pt,kt,Wt,Kt){return Pt=$p(7,Pt,Kt,kt),Pt.lanes=Wt,Pt}function Jm(Pt,kt,Wt,Kt){return Pt=$p(22,Pt,Kt,kt),Pt.elementType=Tt,Pt.lanes=Wt,Pt.stateNode={},Pt}function fv(Pt,kt,Wt){return Pt=$p(6,Pt,null,kt),Pt.lanes=Wt,Pt}function pv(Pt,kt,Wt){return kt=$p(4,Pt.children!==null?Pt.children:[],Pt.key,kt),kt.lanes=Wt,kt.stateNode={containerInfo:Pt.containerInfo,pendingChildren:null,implementation:Pt.implementation},kt}function zv(Pt,kt,Wt,Kt,Qt){this.tag=kt,this.containerInfo=Pt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=xr,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$u(0),this.expirationTimes=$u(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$u(0),this.identifierPrefix=Kt,this.onRecoverableError=Qt,Nr&&(this.mutableSourceEagerHydrationData=null)}function Pv(Pt,kt,Wt,Kt,Qt,lr,Gr,_n,qn){return Pt=new zv(Pt,kt,Wt,_n,qn),kt===1?(kt=1,lr===!0&&(kt|=8)):kt=0,lr=$p(3,null,null,kt),Pt.current=lr,lr.stateNode=Pt,lr.memoizedState={element:Kt,isDehydrated:Wt,cache:null,transitions:null},Vp(lr),Pt}function Av(Pt){if(!Pt)return Hs;Pt=Pt._reactInternals;e:{if(Ft(Pt)!==Pt||Pt.tag!==1)throw Error(ut(170));var kt=Pt;do{switch(kt.tag){case 3:kt=kt.stateNode.context;break e;case 1:if(Bs(kt.type)){kt=kt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}kt=kt.return}while(kt!==null);throw Error(ut(171))}if(Pt.tag===1){var Wt=Pt.type;if(Bs(Wt))return na(Pt,Wt,kt)}return kt}function kv(Pt){var kt=Pt._reactInternals;if(kt===void 0)throw typeof Pt.render=="function"?Error(ut(188)):(Pt=Object.keys(Pt).join(","),Error(ut(268,Pt)));return Pt=Ot(kt),Pt===null?null:Pt.stateNode}function Iv(Pt,kt){if(Pt=Pt.memoizedState,Pt!==null&&Pt.dehydrated!==null){var Wt=Pt.retryLane;Pt.retryLane=Wt!==0&&Wt<kt?Wt:kt}}function mv(Pt,kt){Iv(Pt,kt),(Pt=Pt.alternate)&&Iv(Pt,kt)}function Hv(Pt){return Pt=Ot(Pt),Pt===null?null:Pt.stateNode}function Wv(){return null}return it.attemptContinuousHydration=function(Pt){if(Pt.tag===13){var kt=np();Np(Pt,134217728,kt),mv(Pt,134217728)}},it.attemptHydrationAtCurrentPriority=function(Pt){if(Pt.tag===13){var kt=np(),Wt=dm(Pt);Np(Pt,Wt,kt),mv(Pt,Wt)}},it.attemptSynchronousHydration=function(Pt){switch(Pt.tag){case 3:var kt=Pt.stateNode;if(kt.current.memoizedState.isDehydrated){var Wt=Fl(kt.pendingLanes);Wt!==0&&(kp(kt,Wt|1),vp(kt,Uo()),!(jo&6)&&(Am(),iu()))}break;case 13:var Kt=np();_v(function(){return Np(Pt,1,Kt)}),mv(Pt,1)}},it.batchedUpdates=function(Pt,kt){var Wt=jo;jo|=1;try{return Pt(kt)}finally{jo=Wt,jo===0&&(Am(),Bl&&iu())}},it.createComponentSelector=function(Pt){return{$$typeof:Co,value:Pt}},it.createContainer=function(Pt,kt,Wt,Kt,Qt,lr,Gr){return Pv(Pt,kt,!1,null,Wt,Kt,Qt,lr,Gr)},it.createHasPseudoClassSelector=function(Pt){return{$$typeof:Ol,value:Pt}},it.createHydrationContainer=function(Pt,kt,Wt,Kt,Qt,lr,Gr,_n,qn){return Pt=Pv(Wt,Kt,!0,Pt,Qt,lr,Gr,_n,qn),Pt.context=Av(null),Wt=Pt.current,Kt=np(),Qt=dm(Wt),lr=Yo(Kt,Qt),lr.callback=kt??null,_u(Wt,lr),Pt.current.lanes=Qt,Ju(Pt,Qt,Kt),vp(Pt,Kt),Pt},it.createPortal=function(Pt,kt,Wt){var Kt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ft,key:Kt==null?null:""+Kt,children:Pt,containerInfo:kt,implementation:Wt}},it.createRoleSelector=function(Pt){return{$$typeof:Mu,value:Pt}},it.createTestNameSelector=function(Pt){return{$$typeof:Ou,value:Pt}},it.createTextSelector=function(Pt){return{$$typeof:rp,value:Pt}},it.deferredUpdates=function(Pt){var kt=Mo,Wt=eu.transition;try{return eu.transition=null,Mo=16,Pt()}finally{Mo=kt,eu.transition=Wt}},it.discreteUpdates=function(Pt,kt,Wt,Kt,Qt){var lr=Mo,Gr=eu.transition;try{return eu.transition=null,Mo=1,Pt(kt,Wt,Kt,Qt)}finally{Mo=lr,eu.transition=Gr,jo===0&&Am()}},it.findAllNodes=jm,it.findBoundingRects=function(Pt,kt){if(!tr)throw Error(ut(363));kt=jm(Pt,kt),Pt=[];for(var Wt=0;Wt<kt.length;Wt++)Pt.push(Fr(kt[Wt]));for(kt=Pt.length-1;0<kt;kt--){Wt=Pt[kt];for(var Kt=Wt.x,Qt=Kt+Wt.width,lr=Wt.y,Gr=lr+Wt.height,_n=kt-1;0<=_n;_n--)if(kt!==_n){var qn=Pt[_n],ms=qn.x,Gs=ms+qn.width,Ao=qn.y,go=Ao+qn.height;if(Kt>=ms&&lr>=Ao&&Qt<=Gs&&Gr<=go){Pt.splice(kt,1);break}else if(Kt!==ms||Wt.width!==qn.width||go<lr||Ao>Gr){if(!(lr!==Ao||Wt.height!==qn.height||Gs<Kt||ms>Qt)){ms>Kt&&(qn.width+=ms-Kt,qn.x=Kt),Gs<Qt&&(qn.width=Qt-ms),Pt.splice(kt,1);break}}else{Ao>lr&&(qn.height+=Ao-lr,qn.y=lr),go<Gr&&(qn.height=Gr-Ao),Pt.splice(kt,1);break}}}return Pt},it.findHostInstance=kv,it.findHostInstanceWithNoPortals=function(Pt){return Pt=Mt(Pt),Pt=Pt!==null?$t(Pt):null,Pt===null?null:Pt.stateNode},it.findHostInstanceWithWarning=function(Pt){return kv(Pt)},it.flushControlled=function(Pt){var kt=jo;jo|=1;var Wt=eu.transition,Kt=Mo;try{eu.transition=null,Mo=1,Pt()}finally{Mo=Kt,eu.transition=Wt,jo=kt,jo===0&&(Am(),iu())}},it.flushPassiveEffects=Sm,it.flushSync=_v,it.focusWithin=function(Pt,kt){if(!tr)throw Error(ut(363));for(Pt=Qp(Pt),kt=$m(Pt,kt),kt=Array.from(kt),Pt=0;Pt<kt.length;){var Wt=kt[Pt++];if(!qr(Wt)){if(Wt.tag===5&&En(Wt.stateNode))return!0;for(Wt=Wt.child;Wt!==null;)kt.push(Wt),Wt=Wt.sibling}}return!1},it.getCurrentUpdatePriority=function(){return Mo},it.getFindAllNodesFailureDescription=function(Pt,kt){if(!tr)throw Error(ut(363));var Wt=0,Kt=[];Pt=[Qp(Pt),0];for(var Qt=0;Qt<Pt.length;){var lr=Pt[Qt++],Gr=Pt[Qt++],_n=kt[Gr];if((lr.tag!==5||!qr(lr))&&(im(lr,_n)&&(Kt.push(ym(_n)),Gr++,Gr>Wt&&(Wt=Gr)),Gr<kt.length))for(lr=lr.child;lr!==null;)Pt.push(lr,Gr),lr=lr.sibling}if(Wt<kt.length){for(Pt=[];Wt<kt.length;Wt++)Pt.push(ym(kt[Wt]));return`findAllNodes was able to match part of the selector:
  `+(Kt.join(" > ")+`

No matching component was found for:
  `)+Pt.join(" > ")}return null},it.getPublicRootInstance=function(Pt){if(Pt=Pt.current,!Pt.child)return null;switch(Pt.child.tag){case 5:return Ut(Pt.child.stateNode);default:return Pt.child.stateNode}},it.injectIntoDevTools=function(Pt){if(Pt={bundleType:Pt.bundleType,version:Pt.version,rendererPackageName:Pt.rendererPackageName,rendererConfig:Pt.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dt.ReactCurrentDispatcher,findHostInstanceByFiber:Hv,findFiberByHostInstance:Pt.findFiberByHostInstance||Wv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")Pt=!1;else{var kt=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(kt.isDisabled||!kt.supportsFiber)Pt=!0;else{try{Fp=kt.inject(Pt),Ll=kt}catch{}Pt=!!kt.checkDCE}}return Pt},it.isAlreadyRendering=function(){return!1},it.observeVisibleRects=function(Pt,kt,Wt,Kt){if(!tr)throw Error(ut(363));Pt=jm(Pt,kt);var Qt=Rn(Pt,Wt,Kt).disconnect;return{disconnect:function(){Qt()}}},it.registerMutableSourceForHydration=function(Pt,kt){var Wt=kt._getVersion;Wt=Wt(kt._source),Pt.mutableSourceEagerHydrationData==null?Pt.mutableSourceEagerHydrationData=[kt,Wt]:Pt.mutableSourceEagerHydrationData.push(kt,Wt)},it.runWithPriority=function(Pt,kt){var Wt=Mo;try{return Mo=Pt,kt()}finally{Mo=Wt}},it.shouldError=function(){return null},it.shouldSuspend=function(){return!1},it.updateContainer=function(Pt,kt,Wt,Kt){var Qt=kt.current,lr=np(),Gr=dm(Qt);return Wt=Av(Wt),kt.context===null?kt.context=Wt:kt.pendingContext=Wt,kt=Yo(lr,Gr),kt.payload={element:Pt},Kt=Kt===void 0?null:Kt,Kt!==null&&(kt.callback=Kt),_u(Qt,kt),Pt=Np(Qt,Gr,lr),Pt!==null&&ou(Pt,Qt,Gr),Gr},it};reactReconciler.exports=reactReconciler_production_min;var reactReconcilerExports=reactReconciler.exports;const Reconciler=getDefaultExportFromCjs(reactReconcilerExports);var scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(nt){function rt(Bt,Ht){var Gt=Bt.length;Bt.push(Ht);e:for(;0<Gt;){var Xt=Gt-1>>>1,Zt=Bt[Xt];if(0<lt(Zt,Ht))Bt[Xt]=Ht,Bt[Gt]=Zt,Gt=Xt;else break e}}function it(Bt){return Bt.length===0?null:Bt[0]}function st(Bt){if(Bt.length===0)return null;var Ht=Bt[0],Gt=Bt.pop();if(Gt!==Ht){Bt[0]=Gt;e:for(var Xt=0,Zt=Bt.length,hr=Zt>>>1;Xt<hr;){var nr=2*(Xt+1)-1,ir=Bt[nr],yr=nr+1,Cr=Bt[yr];if(0>lt(ir,Gt))yr<Zt&&0>lt(Cr,ir)?(Bt[Xt]=Cr,Bt[yr]=Gt,Xt=yr):(Bt[Xt]=ir,Bt[nr]=Gt,Xt=nr);else if(yr<Zt&&0>lt(Cr,Gt))Bt[Xt]=Cr,Bt[yr]=Gt,Xt=yr;else break e}}return Ht}function lt(Bt,Ht){var Gt=Bt.sortIndex-Ht.sortIndex;return Gt!==0?Gt:Bt.id-Ht.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ct=performance;nt.unstable_now=function(){return ct.now()}}else{var ut=Date,dt=ut.now();nt.unstable_now=function(){return ut.now()-dt}}var ht=[],ft=[],pt=1,mt=null,gt=3,xt=!1,yt=!1,vt=!1,St=typeof setTimeout=="function"?setTimeout:null,wt=typeof clearTimeout=="function"?clearTimeout:null,Et=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Rt(Bt){for(var Ht=it(ft);Ht!==null;){if(Ht.callback===null)st(ft);else if(Ht.startTime<=Bt)st(ft),Ht.sortIndex=Ht.expirationTime,rt(ht,Ht);else break;Ht=it(ft)}}function Tt(Bt){if(vt=!1,Rt(Bt),!yt)if(it(ht)!==null)yt=!0,Ut(It);else{var Ht=it(ft);Ht!==null&&zt(Tt,Ht.startTime-Bt)}}function It(Bt,Ht){yt=!1,vt&&(vt=!1,wt(jt),jt=-1),xt=!0;var Gt=gt;try{for(Rt(Ht),mt=it(ht);mt!==null&&(!(mt.expirationTime>Ht)||Bt&&!Mt());){var Xt=mt.callback;if(typeof Xt=="function"){mt.callback=null,gt=mt.priorityLevel;var Zt=Xt(mt.expirationTime<=Ht);Ht=nt.unstable_now(),typeof Zt=="function"?mt.callback=Zt:mt===it(ht)&&st(ht),Rt(Ht)}else st(ht);mt=it(ht)}if(mt!==null)var hr=!0;else{var nr=it(ft);nr!==null&&zt(Tt,nr.startTime-Ht),hr=!1}return hr}finally{mt=null,gt=Gt,xt=!1}}var At=!1,Dt=null,jt=-1,Ft=5,Lt=-1;function Mt(){return!(nt.unstable_now()-Lt<Ft)}function Ot(){if(Dt!==null){var Bt=nt.unstable_now();Lt=Bt;var Ht=!0;try{Ht=Dt(!0,Bt)}finally{Ht?Nt():(At=!1,Dt=null)}}else At=!1}var Nt;if(typeof Et=="function")Nt=function(){Et(Ot)};else if(typeof MessageChannel<"u"){var $t=new MessageChannel,Vt=$t.port2;$t.port1.onmessage=Ot,Nt=function(){Vt.postMessage(null)}}else Nt=function(){St(Ot,0)};function Ut(Bt){Dt=Bt,At||(At=!0,Nt())}function zt(Bt,Ht){jt=St(function(){Bt(nt.unstable_now())},Ht)}nt.unstable_IdlePriority=5,nt.unstable_ImmediatePriority=1,nt.unstable_LowPriority=4,nt.unstable_NormalPriority=3,nt.unstable_Profiling=null,nt.unstable_UserBlockingPriority=2,nt.unstable_cancelCallback=function(Bt){Bt.callback=null},nt.unstable_continueExecution=function(){yt||xt||(yt=!0,Ut(It))},nt.unstable_forceFrameRate=function(Bt){0>Bt||125<Bt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ft=0<Bt?Math.floor(1e3/Bt):5},nt.unstable_getCurrentPriorityLevel=function(){return gt},nt.unstable_getFirstCallbackNode=function(){return it(ht)},nt.unstable_next=function(Bt){switch(gt){case 1:case 2:case 3:var Ht=3;break;default:Ht=gt}var Gt=gt;gt=Ht;try{return Bt()}finally{gt=Gt}},nt.unstable_pauseExecution=function(){},nt.unstable_requestPaint=function(){},nt.unstable_runWithPriority=function(Bt,Ht){switch(Bt){case 1:case 2:case 3:case 4:case 5:break;default:Bt=3}var Gt=gt;gt=Bt;try{return Ht()}finally{gt=Gt}},nt.unstable_scheduleCallback=function(Bt,Ht,Gt){var Xt=nt.unstable_now();switch(typeof Gt=="object"&&Gt!==null?(Gt=Gt.delay,Gt=typeof Gt=="number"&&0<Gt?Xt+Gt:Xt):Gt=Xt,Bt){case 1:var Zt=-1;break;case 2:Zt=250;break;case 5:Zt=1073741823;break;case 4:Zt=1e4;break;default:Zt=5e3}return Zt=Gt+Zt,Bt={id:pt++,callback:Ht,priorityLevel:Bt,startTime:Gt,expirationTime:Zt,sortIndex:-1},Gt>Xt?(Bt.sortIndex=Gt,rt(ft,Bt),it(ht)===null&&Bt===it(ft)&&(vt?(wt(jt),jt=-1):vt=!0,zt(Tt,Gt-Xt))):(Bt.sortIndex=Zt,rt(ht,Bt),yt||xt||(yt=!0,Ut(It))),Bt},nt.unstable_shouldYield=Mt,nt.unstable_wrapCallback=function(Bt){var Ht=gt;return function(){var Gt=gt;gt=Ht;try{return Bt.apply(this,arguments)}finally{gt=Gt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;const isPromise=nt=>typeof nt=="object"&&typeof nt.then=="function",globalCache=[];function shallowEqualArrays(nt,rt,it=(st,lt)=>st===lt){if(nt===rt)return!0;if(!nt||!rt)return!1;const st=nt.length;if(rt.length!==st)return!1;for(let lt=0;lt<st;lt++)if(!it(nt[lt],rt[lt]))return!1;return!0}function query(nt,rt=null,it=!1,st={}){rt===null&&(rt=[nt]);for(const ct of globalCache)if(shallowEqualArrays(rt,ct.keys,ct.equal)){if(it)return;if(Object.prototype.hasOwnProperty.call(ct,"error"))throw ct.error;if(Object.prototype.hasOwnProperty.call(ct,"response"))return st.lifespan&&st.lifespan>0&&(ct.timeout&&clearTimeout(ct.timeout),ct.timeout=setTimeout(ct.remove,st.lifespan)),ct.response;if(!it)throw ct.promise}const lt={keys:rt,equal:st.equal,remove:()=>{const ct=globalCache.indexOf(lt);ct!==-1&&globalCache.splice(ct,1)},promise:(isPromise(nt)?nt:nt(...rt)).then(ct=>{lt.response=ct,st.lifespan&&st.lifespan>0&&(lt.timeout=setTimeout(lt.remove,st.lifespan))}).catch(ct=>lt.error=ct)};if(globalCache.push(lt),!it)throw lt.promise}const suspend=(nt,rt,it)=>query(nt,rt,!1,it),preload=(nt,rt,it)=>void query(nt,rt,!0,it),clear=nt=>{if(nt===void 0||nt.length===0)globalCache.splice(0,globalCache.length);else{const rt=globalCache.find(it=>shallowEqualArrays(nt,it.keys,it.equal));rt&&rt.remove()}},catalogue={},extend=nt=>void Object.assign(catalogue,nt);function createRenderer(nt,rt){function it(pt,{args:mt=[],attach:gt,...xt},yt){let vt=`${pt[0].toUpperCase()}${pt.slice(1)}`,St;if(pt==="primitive"){if(xt.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const wt=xt.object;St=prepare(wt,{type:pt,root:yt,attach:gt,primitive:!0})}else{const wt=catalogue[vt];if(!wt)throw new Error(`R3F: ${vt} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(mt))throw new Error("R3F: The args prop must be an array!");St=prepare(new wt(...mt),{type:pt,root:yt,attach:gt,memoizedProps:{args:mt}})}return St.__r3f.attach===void 0&&(St instanceof BufferGeometry?St.__r3f.attach="geometry":St instanceof Material&&(St.__r3f.attach="material")),vt!=="inject"&&applyProps$1(St,xt),St}function st(pt,mt){let gt=!1;if(mt){var xt,yt;(xt=mt.__r3f)!=null&&xt.attach?attach(pt,mt,mt.__r3f.attach):mt.isObject3D&&pt.isObject3D&&(pt.add(mt),gt=!0),gt||(yt=pt.__r3f)==null||yt.objects.push(mt),mt.__r3f||prepare(mt,{}),mt.__r3f.parent=pt,updateInstance(mt),invalidateInstance(mt)}}function lt(pt,mt,gt){let xt=!1;if(mt){var yt,vt;if((yt=mt.__r3f)!=null&&yt.attach)attach(pt,mt,mt.__r3f.attach);else if(mt.isObject3D&&pt.isObject3D){mt.parent=pt,mt.dispatchEvent({type:"added"});const St=pt.children.filter(Et=>Et!==mt),wt=St.indexOf(gt);pt.children=[...St.slice(0,wt),mt,...St.slice(wt)],xt=!0}xt||(vt=pt.__r3f)==null||vt.objects.push(mt),mt.__r3f||prepare(mt,{}),mt.__r3f.parent=pt,updateInstance(mt),invalidateInstance(mt)}}function ct(pt,mt,gt=!1){pt&&[...pt].forEach(xt=>ut(mt,xt,gt))}function ut(pt,mt,gt){if(mt){var xt,yt,vt;if(mt.__r3f&&(mt.__r3f.parent=null),(xt=pt.__r3f)!=null&&xt.objects&&(pt.__r3f.objects=pt.__r3f.objects.filter(Tt=>Tt!==mt)),(yt=mt.__r3f)!=null&&yt.attach)detach(pt,mt,mt.__r3f.attach);else if(mt.isObject3D&&pt.isObject3D){var St;pt.remove(mt),(St=mt.__r3f)!=null&&St.root&&removeInteractivity(findInitialRoot(mt),mt)}const Et=(vt=mt.__r3f)==null?void 0:vt.primitive,Rt=!Et&&(gt===void 0?mt.dispose!==null:gt);if(!Et){var wt;ct((wt=mt.__r3f)==null?void 0:wt.objects,mt,Rt),ct(mt.children,mt,Rt)}if(delete mt.__r3f,Rt&&mt.dispose&&mt.type!=="Scene"){const Tt=()=>{try{mt.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,Tt):Tt()}invalidateInstance(pt)}}function dt(pt,mt,gt,xt){var yt;const vt=(yt=pt.__r3f)==null?void 0:yt.parent;if(!vt)return;const St=it(mt,gt,pt.__r3f.root);if(pt.children){for(const wt of pt.children)wt.__r3f&&st(St,wt);pt.children=pt.children.filter(wt=>!wt.__r3f)}pt.__r3f.objects.forEach(wt=>st(St,wt)),pt.__r3f.objects=[],pt.__r3f.autoRemovedBeforeAppend||ut(vt,pt),St.parent&&(St.__r3f.autoRemovedBeforeAppend=!0),st(vt,St),St.raycast&&St.__r3f.eventCount&&findInitialRoot(St).getState().internal.interaction.push(St),[xt,xt.alternate].forEach(wt=>{wt!==null&&(wt.stateNode=St,wt.ref&&(typeof wt.ref=="function"?wt.ref(St):wt.ref.current=St))})}const ht=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Reconciler({createInstance:it,removeChild:ut,appendChild:st,appendInitialChild:st,insertBefore:lt,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(pt,mt)=>{if(!mt)return;const gt=pt.getState().scene;gt.__r3f&&(gt.__r3f.root=pt,st(gt,mt))},removeChildFromContainer:(pt,mt)=>{mt&&ut(pt.getState().scene,mt)},insertInContainerBefore:(pt,mt,gt)=>{if(!mt||!gt)return;const xt=pt.getState().scene;xt.__r3f&&lt(xt,mt,gt)},getRootHostContext:()=>null,getChildHostContext:pt=>pt,finalizeInitialChildren(pt){var mt;return!!((mt=pt==null?void 0:pt.__r3f)!=null?mt:{}).handlers},prepareUpdate(pt,mt,gt,xt){var yt;if(((yt=pt==null?void 0:pt.__r3f)!=null?yt:{}).primitive&&xt.object&&xt.object!==pt)return[!0];{const{args:St=[],children:wt,...Et}=xt,{args:Rt=[],children:Tt,...It}=gt;if(!Array.isArray(St))throw new Error("R3F: the args prop must be an array!");if(St.some((Dt,jt)=>Dt!==Rt[jt]))return[!0];const At=diffProps(pt,Et,It,!0);return At.changes.length?[!1,At]:null}},commitUpdate(pt,[mt,gt],xt,yt,vt,St){mt?dt(pt,xt,vt,St):applyProps$1(pt,gt)},commitMount(pt,mt,gt,xt){var yt;const vt=(yt=pt.__r3f)!=null?yt:{};pt.raycast&&vt.handlers&&vt.eventCount&&findInitialRoot(pt).getState().internal.interaction.push(pt)},getPublicInstance:pt=>pt,prepareForCommit:()=>null,preparePortalMount:pt=>prepare(pt.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(pt){var mt;const{attach:gt,parent:xt}=(mt=pt.__r3f)!=null?mt:{};gt&&xt&&detach(xt,pt,gt),pt.isObject3D&&(pt.visible=!1),invalidateInstance(pt)},unhideInstance(pt,mt){var gt;const{attach:xt,parent:yt}=(gt=pt.__r3f)!=null?gt:{};xt&&yt&&attach(yt,pt,xt),(pt.isObject3D&&mt.visible==null||mt.visible)&&(pt.visible=!0),invalidateInstance(pt)},createTextInstance:ht,hideTextInstance:ht,unhideTextInstance:ht,getCurrentEventPriority:()=>rt?rt():constantsExports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&is.fun(performance.now)?performance.now:is.fun(Date.now)?Date.now:()=>0,scheduleTimeout:is.fun(setTimeout)?setTimeout:void 0,cancelTimeout:is.fun(clearTimeout)?clearTimeout:void 0}),applyProps:applyProps$1}}var _window$document,_window$navigator;const hasColorSpace=nt=>"colorSpace"in nt||"outputColorSpace"in nt,getColorManagement=()=>{var nt;return(nt=catalogue.ColorManagement)!=null?nt:null},isOrthographicCamera=nt=>nt&&nt.isOrthographicCamera,isRef=nt=>nt&&nt.hasOwnProperty("current"),useIsomorphicLayoutEffect=typeof window<"u"&&((_window$document=window.document)!=null&&_window$document.createElement||((_window$navigator=window.navigator)==null?void 0:_window$navigator.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(nt){const rt=reactExports.useRef(nt);return useIsomorphicLayoutEffect(()=>void(rt.current=nt),[nt]),rt}function Block({set:nt}){return useIsomorphicLayoutEffect(()=>(nt(new Promise(()=>null)),()=>nt(!1)),[nt]),null}class ErrorBoundary extends reactExports.Component{constructor(...rt){super(...rt),this.state={error:!1}}componentDidCatch(rt){this.props.set(rt)}render(){return this.state.error?null:this.props.children}}ErrorBoundary.getDerivedStateFromError=()=>({error:!0});const DEFAULT="__default",DEFAULTS=new Map,isDiffSet=nt=>nt&&!!nt.memoized&&!!nt.changes;function calculateDpr(nt){var rt;const it=typeof window<"u"?(rt=window.devicePixelRatio)!=null?rt:2:1;return Array.isArray(nt)?Math.min(Math.max(nt[0],it),nt[1]):nt}const getRootState=nt=>{var rt;return(rt=nt.__r3f)==null?void 0:rt.root.getState()};function findInitialRoot(nt){let rt=nt.__r3f.root;for(;rt.getState().previousRoot;)rt=rt.getState().previousRoot;return rt}const is={obj:nt=>nt===Object(nt)&&!is.arr(nt)&&typeof nt!="function",fun:nt=>typeof nt=="function",str:nt=>typeof nt=="string",num:nt=>typeof nt=="number",boo:nt=>typeof nt=="boolean",und:nt=>nt===void 0,arr:nt=>Array.isArray(nt),equ(nt,rt,{arrays:it="shallow",objects:st="reference",strict:lt=!0}={}){if(typeof nt!=typeof rt||!!nt!=!!rt)return!1;if(is.str(nt)||is.num(nt))return nt===rt;const ct=is.obj(nt);if(ct&&st==="reference")return nt===rt;const ut=is.arr(nt);if(ut&&it==="reference")return nt===rt;if((ut||ct)&&nt===rt)return!0;let dt;for(dt in nt)if(!(dt in rt))return!1;if(ct&&it==="shallow"&&st==="shallow"){for(dt in lt?rt:nt)if(!is.equ(nt[dt],rt[dt],{strict:lt,objects:"reference"}))return!1}else for(dt in lt?rt:nt)if(nt[dt]!==rt[dt])return!1;if(is.und(dt)){if(ut&&nt.length===0&&rt.length===0||ct&&Object.keys(nt).length===0&&Object.keys(rt).length===0)return!0;if(nt!==rt)return!1}return!0}};function buildGraph(nt){const rt={nodes:{},materials:{}};return nt&&nt.traverse(it=>{it.name&&(rt.nodes[it.name]=it),it.material&&!rt.materials[it.material.name]&&(rt.materials[it.material.name]=it.material)}),rt}function dispose(nt){nt.dispose&&nt.type!=="Scene"&&nt.dispose();for(const rt in nt)rt.dispose==null||rt.dispose(),delete nt[rt]}function prepare(nt,rt){const it=nt;return it.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...rt},nt}function resolve(nt,rt){let it=nt;if(rt.includes("-")){const st=rt.split("-"),lt=st.pop();return it=st.reduce((ct,ut)=>ct[ut],nt),{target:it,key:lt}}else return{target:it,key:rt}}const INDEX_REGEX=/-\d+$/;function attach(nt,rt,it){if(is.str(it)){if(INDEX_REGEX.test(it)){const ct=it.replace(INDEX_REGEX,""),{target:ut,key:dt}=resolve(nt,ct);Array.isArray(ut[dt])||(ut[dt]=[])}const{target:st,key:lt}=resolve(nt,it);rt.__r3f.previousAttach=st[lt],st[lt]=rt}else rt.__r3f.previousAttach=it(nt,rt)}function detach(nt,rt,it){var st,lt;if(is.str(it)){const{target:ct,key:ut}=resolve(nt,it),dt=rt.__r3f.previousAttach;dt===void 0?delete ct[ut]:ct[ut]=dt}else(st=rt.__r3f)==null||st.previousAttach==null||st.previousAttach(nt,rt);(lt=rt.__r3f)==null||delete lt.previousAttach}function diffProps(nt,{children:rt,key:it,ref:st,...lt},{children:ct,key:ut,ref:dt,...ht}={},ft=!1){var pt;const mt=(pt=nt==null?void 0:nt.__r3f)!=null?pt:{},gt=Object.entries(lt),xt=[];if(ft){const vt=Object.keys(ht);for(let St=0;St<vt.length;St++)lt.hasOwnProperty(vt[St])||gt.unshift([vt[St],DEFAULT+"remove"])}gt.forEach(([vt,St])=>{var wt;if((wt=nt.__r3f)!=null&&wt.primitive&&vt==="object"||is.equ(St,ht[vt]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(vt))return xt.push([vt,St,!0,[]]);let Et=[];vt.includes("-")&&(Et=vt.split("-")),xt.push([vt,St,!1,Et]);for(const Rt in lt){const Tt=lt[Rt];Rt.startsWith(`${vt}-`)&&xt.push([Rt,Tt,!1,Rt.split("-")])}});const yt={...lt};return mt.memoizedProps&&mt.memoizedProps.args&&(yt.args=mt.memoizedProps.args),mt.memoizedProps&&mt.memoizedProps.attach&&(yt.attach=mt.memoizedProps.attach),{memoized:yt,changes:xt}}const __DEV__=typeof process<"u"&&!1;function applyProps$1(nt,rt){var it,st,lt;const ct=(it=nt.__r3f)!=null?it:{},ut=ct.root,dt=(st=ut==null||ut.getState==null?void 0:ut.getState())!=null?st:{},{memoized:ht,changes:ft}=isDiffSet(rt)?rt:diffProps(nt,rt),pt=ct.eventCount;nt.__r3f&&(nt.__r3f.memoizedProps=ht);for(let gt=0;gt<ft.length;gt++){let[xt,yt,vt,St]=ft[gt];if(hasColorSpace(nt)){const Tt="srgb",It="srgb-linear";xt==="encoding"?(xt="colorSpace",yt=yt===3001?Tt:It):xt==="outputEncoding"&&(xt="outputColorSpace",yt=yt===3001?Tt:It)}let wt=nt,Et=wt[xt];if(St.length&&(Et=St.reduce((Rt,Tt)=>Rt[Tt],nt),!(Et&&Et.set))){const[Rt,...Tt]=St.reverse();wt=Tt.reverse().reduce((It,At)=>It[At],nt),xt=Rt}if(yt===DEFAULT+"remove")if(wt.constructor){let Rt=DEFAULTS.get(wt.constructor);Rt||(Rt=new wt.constructor,DEFAULTS.set(wt.constructor,Rt)),yt=Rt[xt]}else yt=0;if(vt)yt?ct.handlers[xt]=yt:delete ct.handlers[xt],ct.eventCount=Object.keys(ct.handlers).length;else if(Et&&Et.set&&(Et.copy||Et instanceof Layers)){if(Array.isArray(yt))Et.fromArray?Et.fromArray(yt):Et.set(...yt);else if(Et.copy&&yt&&yt.constructor&&(__DEV__?Et.constructor.name===yt.constructor.name:Et.constructor===yt.constructor))Et.copy(yt);else if(yt!==void 0){const Rt=Et instanceof Color;!Rt&&Et.setScalar?Et.setScalar(yt):Et instanceof Layers&&yt instanceof Layers?Et.mask=yt.mask:Et.set(yt),!getColorManagement()&&!dt.linear&&Rt&&Et.convertSRGBToLinear()}}else if(wt[xt]=yt,wt[xt]instanceof Texture&&wt[xt].format===RGBAFormat&&wt[xt].type===UnsignedByteType){const Rt=wt[xt];hasColorSpace(Rt)&&hasColorSpace(dt.gl)?Rt.colorSpace=dt.gl.outputColorSpace:Rt.encoding=dt.gl.outputEncoding}invalidateInstance(nt)}if(ct.parent&&nt.raycast&&pt!==ct.eventCount){const gt=findInitialRoot(nt).getState().internal,xt=gt.interaction.indexOf(nt);xt>-1&&gt.interaction.splice(xt,1),ct.eventCount&&gt.interaction.push(nt)}return!(ft.length===1&&ft[0][0]==="onUpdate")&&ft.length&&(lt=nt.__r3f)!=null&&lt.parent&&updateInstance(nt),nt}function invalidateInstance(nt){var rt,it;const st=(rt=nt.__r3f)==null||(it=rt.root)==null||it.getState==null?void 0:it.getState();st&&st.internal.frames===0&&st.invalidate()}function updateInstance(nt){nt.onUpdate==null||nt.onUpdate(nt)}function updateCamera(nt,rt){nt.manual||(isOrthographicCamera(nt)?(nt.left=rt.width/-2,nt.right=rt.width/2,nt.top=rt.height/2,nt.bottom=rt.height/-2):nt.aspect=rt.width/rt.height,nt.updateProjectionMatrix(),nt.updateMatrixWorld())}function makeId(nt){return(nt.eventObject||nt.object).uuid+"/"+nt.index+nt.instanceId}function getEventPriority(){var nt;const rt=typeof self<"u"&&self||typeof window<"u"&&window;if(!rt)return constantsExports.DefaultEventPriority;switch((nt=rt.event)==null?void 0:nt.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}}function releaseInternalPointerCapture(nt,rt,it,st){const lt=it.get(rt);lt&&(it.delete(rt),it.size===0&&(nt.delete(st),lt.target.releasePointerCapture(st)))}function removeInteractivity(nt,rt){const{internal:it}=nt.getState();it.interaction=it.interaction.filter(st=>st!==rt),it.initialHits=it.initialHits.filter(st=>st!==rt),it.hovered.forEach((st,lt)=>{(st.eventObject===rt||st.object===rt)&&it.hovered.delete(lt)}),it.capturedMap.forEach((st,lt)=>{releaseInternalPointerCapture(it.capturedMap,rt,st,lt)})}function createEvents(nt){function rt(ht){const{internal:ft}=nt.getState(),pt=ht.offsetX-ft.initialClick[0],mt=ht.offsetY-ft.initialClick[1];return Math.round(Math.sqrt(pt*pt+mt*mt))}function it(ht){return ht.filter(ft=>["Move","Over","Enter","Out","Leave"].some(pt=>{var mt;return(mt=ft.__r3f)==null?void 0:mt.handlers["onPointer"+pt]}))}function st(ht,ft){const pt=nt.getState(),mt=new Set,gt=[],xt=ft?ft(pt.internal.interaction):pt.internal.interaction;for(let wt=0;wt<xt.length;wt++){const Et=getRootState(xt[wt]);Et&&(Et.raycaster.camera=void 0)}pt.previousRoot||pt.events.compute==null||pt.events.compute(ht,pt);function yt(wt){const Et=getRootState(wt);if(!Et||!Et.events.enabled||Et.raycaster.camera===null)return[];if(Et.raycaster.camera===void 0){var Rt;Et.events.compute==null||Et.events.compute(ht,Et,(Rt=Et.previousRoot)==null?void 0:Rt.getState()),Et.raycaster.camera===void 0&&(Et.raycaster.camera=null)}return Et.raycaster.camera?Et.raycaster.intersectObject(wt,!0):[]}let vt=xt.flatMap(yt).sort((wt,Et)=>{const Rt=getRootState(wt.object),Tt=getRootState(Et.object);return!Rt||!Tt?wt.distance-Et.distance:Tt.events.priority-Rt.events.priority||wt.distance-Et.distance}).filter(wt=>{const Et=makeId(wt);return mt.has(Et)?!1:(mt.add(Et),!0)});pt.events.filter&&(vt=pt.events.filter(vt,pt));for(const wt of vt){let Et=wt.object;for(;Et;){var St;(St=Et.__r3f)!=null&&St.eventCount&&gt.push({...wt,eventObject:Et}),Et=Et.parent}}if("pointerId"in ht&&pt.internal.capturedMap.has(ht.pointerId))for(let wt of pt.internal.capturedMap.get(ht.pointerId).values())mt.has(makeId(wt.intersection))||gt.push(wt.intersection);return gt}function lt(ht,ft,pt,mt){const gt=nt.getState();if(ht.length){const xt={stopped:!1};for(const yt of ht){const vt=getRootState(yt.object)||gt,{raycaster:St,pointer:wt,camera:Et,internal:Rt}=vt,Tt=new Vector3(wt.x,wt.y,0).unproject(Et),It=Lt=>{var Mt,Ot;return(Mt=(Ot=Rt.capturedMap.get(Lt))==null?void 0:Ot.has(yt.eventObject))!=null?Mt:!1},At=Lt=>{const Mt={intersection:yt,target:ft.target};Rt.capturedMap.has(Lt)?Rt.capturedMap.get(Lt).set(yt.eventObject,Mt):Rt.capturedMap.set(Lt,new Map([[yt.eventObject,Mt]])),ft.target.setPointerCapture(Lt)},Dt=Lt=>{const Mt=Rt.capturedMap.get(Lt);Mt&&releaseInternalPointerCapture(Rt.capturedMap,yt.eventObject,Mt,Lt)};let jt={};for(let Lt in ft){let Mt=ft[Lt];typeof Mt!="function"&&(jt[Lt]=Mt)}let Ft={...yt,...jt,pointer:wt,intersections:ht,stopped:xt.stopped,delta:pt,unprojectedPoint:Tt,ray:St.ray,camera:Et,stopPropagation(){const Lt="pointerId"in ft&&Rt.capturedMap.get(ft.pointerId);if((!Lt||Lt.has(yt.eventObject))&&(Ft.stopped=xt.stopped=!0,Rt.hovered.size&&Array.from(Rt.hovered.values()).find(Mt=>Mt.eventObject===yt.eventObject))){const Mt=ht.slice(0,ht.indexOf(yt));ct([...Mt,yt])}},target:{hasPointerCapture:It,setPointerCapture:At,releasePointerCapture:Dt},currentTarget:{hasPointerCapture:It,setPointerCapture:At,releasePointerCapture:Dt},nativeEvent:ft};if(mt(Ft),xt.stopped===!0)break}}return ht}function ct(ht){const{internal:ft}=nt.getState();for(const pt of ft.hovered.values())if(!ht.length||!ht.find(mt=>mt.object===pt.object&&mt.index===pt.index&&mt.instanceId===pt.instanceId)){const gt=pt.eventObject.__r3f,xt=gt==null?void 0:gt.handlers;if(ft.hovered.delete(makeId(pt)),gt!=null&&gt.eventCount){const yt={...pt,intersections:ht};xt.onPointerOut==null||xt.onPointerOut(yt),xt.onPointerLeave==null||xt.onPointerLeave(yt)}}}function ut(ht,ft){for(let pt=0;pt<ft.length;pt++){const mt=ft[pt].__r3f;mt==null||mt.handlers.onPointerMissed==null||mt.handlers.onPointerMissed(ht)}}function dt(ht){switch(ht){case"onPointerLeave":case"onPointerCancel":return()=>ct([]);case"onLostPointerCapture":return ft=>{const{internal:pt}=nt.getState();"pointerId"in ft&&pt.capturedMap.has(ft.pointerId)&&requestAnimationFrame(()=>{pt.capturedMap.has(ft.pointerId)&&(pt.capturedMap.delete(ft.pointerId),ct([]))})}}return function(pt){const{onPointerMissed:mt,internal:gt}=nt.getState();gt.lastEvent.current=pt;const xt=ht==="onPointerMove",yt=ht==="onClick"||ht==="onContextMenu"||ht==="onDoubleClick",St=st(pt,xt?it:void 0),wt=yt?rt(pt):0;ht==="onPointerDown"&&(gt.initialClick=[pt.offsetX,pt.offsetY],gt.initialHits=St.map(Rt=>Rt.eventObject)),yt&&!St.length&&wt<=2&&(ut(pt,gt.interaction),mt&&mt(pt)),xt&&ct(St);function Et(Rt){const Tt=Rt.eventObject,It=Tt.__r3f,At=It==null?void 0:It.handlers;if(It!=null&&It.eventCount)if(xt){if(At.onPointerOver||At.onPointerEnter||At.onPointerOut||At.onPointerLeave){const Dt=makeId(Rt),jt=gt.hovered.get(Dt);jt?jt.stopped&&Rt.stopPropagation():(gt.hovered.set(Dt,Rt),At.onPointerOver==null||At.onPointerOver(Rt),At.onPointerEnter==null||At.onPointerEnter(Rt))}At.onPointerMove==null||At.onPointerMove(Rt)}else{const Dt=At[ht];Dt?(!yt||gt.initialHits.includes(Tt))&&(ut(pt,gt.interaction.filter(jt=>!gt.initialHits.includes(jt))),Dt(Rt)):yt&&gt.initialHits.includes(Tt)&&ut(pt,gt.interaction.filter(jt=>!gt.initialHits.includes(jt)))}}lt(St,pt,wt,Et)}}return{handlePointer:dt}}const isRenderer=nt=>!!(nt!=null&&nt.render),context=reactExports.createContext(null),createStore=(nt,rt)=>{const it=create((dt,ht)=>{const ft=new Vector3,pt=new Vector3,mt=new Vector3;function gt(wt=ht().camera,Et=pt,Rt=ht().size){const{width:Tt,height:It,top:At,left:Dt}=Rt,jt=Tt/It;Et instanceof Vector3?mt.copy(Et):mt.set(...Et);const Ft=wt.getWorldPosition(ft).distanceTo(mt);if(isOrthographicCamera(wt))return{width:Tt/wt.zoom,height:It/wt.zoom,top:At,left:Dt,factor:1,distance:Ft,aspect:jt};{const Lt=wt.fov*Math.PI/180,Mt=2*Math.tan(Lt/2)*Ft,Ot=Mt*(Tt/It);return{width:Ot,height:Mt,top:At,left:Dt,factor:Tt/Ot,distance:Ft,aspect:jt}}}let xt;const yt=wt=>dt(Et=>({performance:{...Et.performance,current:wt}})),vt=new Vector2;return{set:dt,get:ht,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(wt=1)=>nt(ht(),wt),advance:(wt,Et)=>rt(wt,Et,ht()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:vt,mouse:vt,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const wt=ht();xt&&clearTimeout(xt),wt.performance.current!==wt.performance.min&&yt(wt.performance.min),xt=setTimeout(()=>yt(ht().performance.max),wt.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:gt},setEvents:wt=>dt(Et=>({...Et,events:{...Et.events,...wt}})),setSize:(wt,Et,Rt,Tt,It)=>{const At=ht().camera,Dt={width:wt,height:Et,top:Tt||0,left:It||0,updateStyle:Rt};dt(jt=>({size:Dt,viewport:{...jt.viewport,...gt(At,pt,Dt)}}))},setDpr:wt=>dt(Et=>{const Rt=calculateDpr(wt);return{viewport:{...Et.viewport,dpr:Rt,initialDpr:Et.viewport.initialDpr||Rt}}}),setFrameloop:(wt="always")=>{const Et=ht().clock;Et.stop(),Et.elapsedTime=0,wt!=="never"&&(Et.start(),Et.elapsedTime=0),dt(()=>({frameloop:wt}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:reactExports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(wt,Et,Rt)=>{const Tt=ht().internal;return Tt.priority=Tt.priority+(Et>0?1:0),Tt.subscribers.push({ref:wt,priority:Et,store:Rt}),Tt.subscribers=Tt.subscribers.sort((It,At)=>It.priority-At.priority),()=>{const It=ht().internal;It!=null&&It.subscribers&&(It.priority=It.priority-(Et>0?1:0),It.subscribers=It.subscribers.filter(At=>At.ref!==wt))}}}}}),st=it.getState();let lt=st.size,ct=st.viewport.dpr,ut=st.camera;return it.subscribe(()=>{const{camera:dt,size:ht,viewport:ft,gl:pt,set:mt}=it.getState();if(ht.width!==lt.width||ht.height!==lt.height||ft.dpr!==ct){var gt;lt=ht,ct=ft.dpr,updateCamera(dt,ht),pt.setPixelRatio(ft.dpr);const xt=(gt=ht.updateStyle)!=null?gt:typeof HTMLCanvasElement<"u"&&pt.domElement instanceof HTMLCanvasElement;pt.setSize(ht.width,ht.height,xt)}dt!==ut&&(ut=dt,mt(xt=>({viewport:{...xt.viewport,...xt.viewport.getCurrentViewport(dt)}})))}),it.subscribe(dt=>nt(dt)),it};let i$5,globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;function run(nt,rt){if(nt.size)for(const{callback:it}of nt.values())it(rt)}function flushGlobalEffects(nt,rt){switch(nt){case"before":return run(globalEffects,rt);case"after":return run(globalAfterEffects,rt);case"tail":return run(globalTailEffects,rt)}}let subscribers,subscription;function render$1(nt,rt,it){let st=rt.clock.getDelta();for(rt.frameloop==="never"&&typeof nt=="number"&&(st=nt-rt.clock.elapsedTime,rt.clock.oldTime=rt.clock.elapsedTime,rt.clock.elapsedTime=nt),subscribers=rt.internal.subscribers,i$5=0;i$5<subscribers.length;i$5++)subscription=subscribers[i$5],subscription.ref.current(subscription.store.getState(),st,it);return!rt.internal.priority&&rt.gl.render&&rt.gl.render(rt.scene,rt.camera),rt.internal.frames=Math.max(0,rt.internal.frames-1),rt.frameloop==="always"?1:rt.internal.frames}function createLoop(nt){let rt=!1,it,st,lt;function ct(ht){st=requestAnimationFrame(ct),rt=!0,it=0,flushGlobalEffects("before",ht);for(const pt of nt.values()){var ft;lt=pt.store.getState(),lt.internal.active&&(lt.frameloop==="always"||lt.internal.frames>0)&&!((ft=lt.gl.xr)!=null&&ft.isPresenting)&&(it+=render$1(ht,lt))}if(flushGlobalEffects("after",ht),it===0)return flushGlobalEffects("tail",ht),rt=!1,cancelAnimationFrame(st)}function ut(ht,ft=1){var pt;if(!ht)return nt.forEach(mt=>ut(mt.store.getState()),ft);(pt=ht.gl.xr)!=null&&pt.isPresenting||!ht.internal.active||ht.frameloop==="never"||(ht.internal.frames=Math.min(60,ht.internal.frames+ft),rt||(rt=!0,requestAnimationFrame(ct)))}function dt(ht,ft=!0,pt,mt){if(ft&&flushGlobalEffects("before",ht),pt)render$1(ht,pt,mt);else for(const gt of nt.values())render$1(ht,gt.store.getState());ft&&flushGlobalEffects("after",ht)}return{loop:ct,invalidate:ut,advance:dt}}function useStore(){const nt=reactExports.useContext(context);if(!nt)throw new Error("R3F: Hooks can only be used within the Canvas component!");return nt}function useThree(nt=it=>it,rt){return useStore()(nt,rt)}function useFrame(nt,rt=0){const it=useStore(),st=it.getState().internal.subscribe,lt=useMutableCallback(nt);return useIsomorphicLayoutEffect(()=>st(lt,rt,it),[rt,st,it]),null}const memoizedLoaders=new WeakMap;function loadingFn(nt,rt){return function(it,...st){let lt=memoizedLoaders.get(it);return lt||(lt=new it,memoizedLoaders.set(it,lt)),nt&&nt(lt),Promise.all(st.map(ct=>new Promise((ut,dt)=>lt.load(ct,ht=>{ht.scene&&Object.assign(ht,buildGraph(ht.scene)),ut(ht)},rt,ht=>dt(new Error(`Could not load ${ct}: ${ht==null?void 0:ht.message}`)))))).finally(()=>lt.dispose==null?void 0:lt.dispose())}}function useLoader(nt,rt,it,st){const lt=Array.isArray(rt)?rt:[rt],ct=suspend(loadingFn(it,st),[nt,...lt],{equal:is.equ});return Array.isArray(rt)?ct:ct[0]}useLoader.preload=function(nt,rt,it){const st=Array.isArray(rt)?rt:[rt];return preload(loadingFn(it),[nt,...st])};useLoader.clear=function(nt,rt){const it=Array.isArray(rt)?rt:[rt];return clear([nt,...it])};const roots=new Map,{invalidate,advance}=createLoop(roots),{reconciler,applyProps}=createRenderer(roots,getEventPriority),shallowLoose={objects:"shallow",strict:!1},createRendererInstance=(nt,rt)=>{const it=typeof nt=="function"?nt(rt):nt;return isRenderer(it)?it:new WebGLRenderer({powerPreference:"high-performance",canvas:rt,antialias:!0,alpha:!0,...nt})};function computeInitialSize(nt,rt){const it=typeof HTMLCanvasElement<"u"&&nt instanceof HTMLCanvasElement;if(rt){const{width:st,height:lt,top:ct,left:ut,updateStyle:dt=it}=rt;return{width:st,height:lt,top:ct,left:ut,updateStyle:dt}}else if(typeof HTMLCanvasElement<"u"&&nt instanceof HTMLCanvasElement&&nt.parentElement){const{width:st,height:lt,top:ct,left:ut}=nt.parentElement.getBoundingClientRect();return{width:st,height:lt,top:ct,left:ut,updateStyle:it}}else if(typeof OffscreenCanvas<"u"&&nt instanceof OffscreenCanvas)return{width:nt.width,height:nt.height,top:0,left:0,updateStyle:it};return{width:0,height:0,top:0,left:0}}function createRoot(nt){const rt=roots.get(nt),it=rt==null?void 0:rt.fiber,st=rt==null?void 0:rt.store;rt&&console.warn("R3F.createRoot should only be called once!");const lt=typeof reportError=="function"?reportError:console.error,ct=st||createStore(invalidate,advance),ut=it||reconciler.createContainer(ct,constantsExports.ConcurrentRoot,null,!1,null,"",lt,null);rt||roots.set(nt,{fiber:ut,store:ct});let dt,ht=!1,ft;return{configure(pt={}){let{gl:mt,size:gt,scene:xt,events:yt,onCreated:vt,shadows:St=!1,linear:wt=!1,flat:Et=!1,legacy:Rt=!1,orthographic:Tt=!1,frameloop:It="always",dpr:At=[1,2],performance:Dt,raycaster:jt,camera:Ft,onPointerMissed:Lt}=pt,Mt=ct.getState(),Ot=Mt.gl;Mt.gl||Mt.set({gl:Ot=createRendererInstance(mt,nt)});let Nt=Mt.raycaster;Nt||Mt.set({raycaster:Nt=new Raycaster});const{params:$t,...Vt}=jt||{};if(is.equ(Vt,Nt,shallowLoose)||applyProps(Nt,{...Vt}),is.equ($t,Nt.params,shallowLoose)||applyProps(Nt,{params:{...Nt.params,...$t}}),!Mt.camera||Mt.camera===ft&&!is.equ(ft,Ft,shallowLoose)){ft=Ft;const Zt=Ft instanceof Camera,hr=Zt?Ft:Tt?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);Zt||(hr.position.z=5,Ft&&applyProps(hr,Ft),!Mt.camera&&!(Ft!=null&&Ft.rotation)&&hr.lookAt(0,0,0)),Mt.set({camera:hr}),Nt.camera=hr}if(!Mt.scene){let Zt;xt instanceof Scene?Zt=xt:(Zt=new Scene,xt&&applyProps(Zt,xt)),Mt.set({scene:prepare(Zt)})}if(!Mt.xr){var Ut;const Zt=(ir,yr)=>{const Cr=ct.getState();Cr.frameloop!=="never"&&advance(ir,!0,Cr,yr)},hr=()=>{const ir=ct.getState();ir.gl.xr.enabled=ir.gl.xr.isPresenting,ir.gl.xr.setAnimationLoop(ir.gl.xr.isPresenting?Zt:null),ir.gl.xr.isPresenting||invalidate(ir)},nr={connect(){const ir=ct.getState().gl;ir.xr.addEventListener("sessionstart",hr),ir.xr.addEventListener("sessionend",hr)},disconnect(){const ir=ct.getState().gl;ir.xr.removeEventListener("sessionstart",hr),ir.xr.removeEventListener("sessionend",hr)}};typeof((Ut=Ot.xr)==null?void 0:Ut.addEventListener)=="function"&&nr.connect(),Mt.set({xr:nr})}if(Ot.shadowMap){const Zt=Ot.shadowMap.enabled,hr=Ot.shadowMap.type;if(Ot.shadowMap.enabled=!!St,is.boo(St))Ot.shadowMap.type=PCFSoftShadowMap;else if(is.str(St)){var zt;const nr={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};Ot.shadowMap.type=(zt=nr[St])!=null?zt:PCFSoftShadowMap}else is.obj(St)&&Object.assign(Ot.shadowMap,St);(Zt!==Ot.shadowMap.enabled||hr!==Ot.shadowMap.type)&&(Ot.shadowMap.needsUpdate=!0)}const Bt=getColorManagement();Bt&&("enabled"in Bt?Bt.enabled=!Rt:"legacyMode"in Bt&&(Bt.legacyMode=Rt)),applyProps(Ot,{outputEncoding:wt?3e3:3001,toneMapping:Et?NoToneMapping:ACESFilmicToneMapping}),Mt.legacy!==Rt&&Mt.set(()=>({legacy:Rt})),Mt.linear!==wt&&Mt.set(()=>({linear:wt})),Mt.flat!==Et&&Mt.set(()=>({flat:Et})),mt&&!is.fun(mt)&&!isRenderer(mt)&&!is.equ(mt,Ot,shallowLoose)&&applyProps(Ot,mt),yt&&!Mt.events.handlers&&Mt.set({events:yt(ct)});const Xt=computeInitialSize(nt,gt);return is.equ(Xt,Mt.size,shallowLoose)||Mt.setSize(Xt.width,Xt.height,Xt.updateStyle,Xt.top,Xt.left),At&&Mt.viewport.dpr!==calculateDpr(At)&&Mt.setDpr(At),Mt.frameloop!==It&&Mt.setFrameloop(It),Mt.onPointerMissed||Mt.set({onPointerMissed:Lt}),Dt&&!is.equ(Dt,Mt.performance,shallowLoose)&&Mt.set(Zt=>({performance:{...Zt.performance,...Dt}})),dt=vt,ht=!0,this},render(pt){return ht||this.configure(),reconciler.updateContainer(reactExports.createElement(Provider,{store:ct,children:pt,onCreated:dt,rootElement:nt}),ut,null,()=>{}),ct},unmount(){unmountComponentAtNode(nt)}}}function Provider({store:nt,children:rt,onCreated:it,rootElement:st}){return useIsomorphicLayoutEffect(()=>{const lt=nt.getState();lt.set(ct=>({internal:{...ct.internal,active:!0}})),it&&it(lt),nt.getState().events.connected||lt.events.connect==null||lt.events.connect(st)},[]),reactExports.createElement(context.Provider,{value:nt},rt)}function unmountComponentAtNode(nt,rt){const it=roots.get(nt),st=it==null?void 0:it.fiber;if(st){const lt=it==null?void 0:it.store.getState();lt&&(lt.internal.active=!1),reconciler.updateContainer(null,st,null,()=>{lt&&setTimeout(()=>{try{var ct,ut,dt,ht;lt.events.disconnect==null||lt.events.disconnect(),(ct=lt.gl)==null||(ut=ct.renderLists)==null||ut.dispose==null||ut.dispose(),(dt=lt.gl)==null||dt.forceContextLoss==null||dt.forceContextLoss(),(ht=lt.gl)!=null&&ht.xr&&lt.xr.disconnect(),dispose(lt),roots.delete(nt),rt&&rt(nt)}catch{}},500)})}}reconciler.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version});function debounce$1(nt,rt,it){var st,lt,ct,ut,dt;rt==null&&(rt=100);function ht(){var pt=Date.now()-ut;pt<rt&&pt>=0?st=setTimeout(ht,rt-pt):(st=null,it||(dt=nt.apply(ct,lt),ct=lt=null))}var ft=function(){ct=this,lt=arguments,ut=Date.now();var pt=it&&!st;return st||(st=setTimeout(ht,rt)),pt&&(dt=nt.apply(ct,lt),ct=lt=null),dt};return ft.clear=function(){st&&(clearTimeout(st),st=null)},ft.flush=function(){st&&(dt=nt.apply(ct,lt),ct=lt=null,clearTimeout(st),st=null)},ft}debounce$1.debounce=debounce$1;var debounce_1=debounce$1;const createDebounce=getDefaultExportFromCjs(debounce_1);function useMeasure(nt){let{debounce:rt,scroll:it,polyfill:st,offsetSize:lt}=nt===void 0?{debounce:0,scroll:!1,offsetSize:!1}:nt;const ct=st||(typeof window>"u"?class{}:window.ResizeObserver);if(!ct)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[ut,dt]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),ht=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:ut}),ft=rt?typeof rt=="number"?rt:rt.scroll:null,pt=rt?typeof rt=="number"?rt:rt.resize:null,mt=reactExports.useRef(!1);reactExports.useEffect(()=>(mt.current=!0,()=>void(mt.current=!1)));const[gt,xt,yt]=reactExports.useMemo(()=>{const Et=()=>{if(!ht.current.element)return;const{left:Rt,top:Tt,width:It,height:At,bottom:Dt,right:jt,x:Ft,y:Lt}=ht.current.element.getBoundingClientRect(),Mt={left:Rt,top:Tt,width:It,height:At,bottom:Dt,right:jt,x:Ft,y:Lt};ht.current.element instanceof HTMLElement&&lt&&(Mt.height=ht.current.element.offsetHeight,Mt.width=ht.current.element.offsetWidth),Object.freeze(Mt),mt.current&&!areBoundsEqual(ht.current.lastBounds,Mt)&&dt(ht.current.lastBounds=Mt)};return[Et,pt?createDebounce(Et,pt):Et,ft?createDebounce(Et,ft):Et]},[dt,lt,ft,pt]);function vt(){ht.current.scrollContainers&&(ht.current.scrollContainers.forEach(Et=>Et.removeEventListener("scroll",yt,!0)),ht.current.scrollContainers=null),ht.current.resizeObserver&&(ht.current.resizeObserver.disconnect(),ht.current.resizeObserver=null)}function St(){ht.current.element&&(ht.current.resizeObserver=new ct(yt),ht.current.resizeObserver.observe(ht.current.element),it&&ht.current.scrollContainers&&ht.current.scrollContainers.forEach(Et=>Et.addEventListener("scroll",yt,{capture:!0,passive:!0})))}const wt=Et=>{!Et||Et===ht.current.element||(vt(),ht.current.element=Et,ht.current.scrollContainers=findScrollContainers(Et),St())};return useOnWindowScroll(yt,!!it),useOnWindowResize(xt),reactExports.useEffect(()=>{vt(),St()},[it,yt,xt]),reactExports.useEffect(()=>vt,[]),[wt,ut,gt]}function useOnWindowResize(nt){reactExports.useEffect(()=>{const rt=nt;return window.addEventListener("resize",rt),()=>void window.removeEventListener("resize",rt)},[nt])}function useOnWindowScroll(nt,rt){reactExports.useEffect(()=>{if(rt){const it=nt;return window.addEventListener("scroll",it,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",it,!0)}},[nt,rt])}function findScrollContainers(nt){const rt=[];if(!nt||nt===document.body)return rt;const{overflow:it,overflowX:st,overflowY:lt}=window.getComputedStyle(nt);return[it,st,lt].some(ct=>ct==="auto"||ct==="scroll")&&rt.push(nt),[...rt,...findScrollContainers(nt.parentElement)]}const keys=["x","y","top","bottom","left","right","width","height"],areBoundsEqual=(nt,rt)=>keys.every(it=>nt[it]===rt[it]);var __defProp$8=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp$7=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp$3=(nt,rt,it)=>rt in nt?__defProp$8(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,__spreadValues=(nt,rt)=>{for(var it in rt||(rt={}))__hasOwnProp$7.call(rt,it)&&__defNormalProp$3(nt,it,rt[it]);if(__getOwnPropSymbols)for(var it of __getOwnPropSymbols(rt))__propIsEnum.call(rt,it)&&__defNormalProp$3(nt,it,rt[it]);return nt},__spreadProps=(nt,rt)=>__defProps(nt,__getOwnPropDescs(rt));function traverseFiber(nt,rt,it){if(!nt)return;if(it(nt)===!0)return nt;let st=rt?nt.return:nt.child;for(;st;){const lt=traverseFiber(st,rt,it);if(lt)return lt;st=rt?null:st.sibling}}function wrapContext(nt){try{return Object.defineProperties(nt,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return nt}}const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner,ReactCurrentDispatcher}=reactExports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function useFiber(){const nt=reactExports.useContext(FiberContext);if(nt===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const rt=reactExports.useId();return reactExports.useMemo(()=>{for(const st of[ReactCurrentOwner==null?void 0:ReactCurrentOwner.current,nt,nt==null?void 0:nt.alternate]){if(!st)continue;const lt=traverseFiber(st,!1,ct=>{let ut=ct.memoizedState;for(;ut;){if(ut.memoizedState===rt)return!0;ut=ut.next}});if(lt)return lt}},[nt,rt])}function useContextMap(){var nt,rt;const it=useFiber(),[st]=reactExports.useState(()=>new Map);st.clear();let lt=it;for(;lt;){const ct=(nt=lt.type)==null?void 0:nt._context;ct&&ct!==FiberContext&&!st.has(ct)&&st.set(ct,(rt=ReactCurrentDispatcher==null?void 0:ReactCurrentDispatcher.current)==null?void 0:rt.readContext(wrapContext(ct))),lt=lt.return}return st}function useContextBridge(){const nt=useContextMap();return reactExports.useMemo(()=>Array.from(nt.keys()).reduce((rt,it)=>st=>reactExports.createElement(rt,null,reactExports.createElement(it.Provider,__spreadProps(__spreadValues({},st),{value:nt.get(it)}))),rt=>reactExports.createElement(FiberProvider,__spreadValues({},rt))),[nt])}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(nt){const{handlePointer:rt}=createEvents(nt);return{priority:1,enabled:!0,compute(it,st,lt){st.pointer.set(it.offsetX/st.size.width*2-1,-(it.offsetY/st.size.height)*2+1),st.raycaster.setFromCamera(st.pointer,st.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((it,st)=>({...it,[st]:rt(st)}),{}),update:()=>{var it;const{events:st,internal:lt}=nt.getState();(it=lt.lastEvent)!=null&&it.current&&st.handlers&&st.handlers.onPointerMove(lt.lastEvent.current)},connect:it=>{var st;const{set:lt,events:ct}=nt.getState();ct.disconnect==null||ct.disconnect(),lt(ut=>({events:{...ut.events,connected:it}})),Object.entries((st=ct.handlers)!=null?st:[]).forEach(([ut,dt])=>{const[ht,ft]=DOM_EVENTS[ut];it.addEventListener(ht,dt,{passive:ft})})},disconnect:()=>{const{set:it,events:st}=nt.getState();if(st.connected){var lt;Object.entries((lt=st.handlers)!=null?lt:[]).forEach(([ct,ut])=>{if(st&&st.connected instanceof HTMLElement){const[dt]=DOM_EVENTS[ct];st.connected.removeEventListener(dt,ut)}}),it(ct=>({events:{...ct.events,connected:void 0}}))}}}}const CanvasImpl=reactExports.forwardRef(function({children:rt,fallback:it,resize:st,style:lt,gl:ct,events:ut=createPointerEvents,eventSource:dt,eventPrefix:ht,shadows:ft,linear:pt,flat:mt,legacy:gt,orthographic:xt,frameloop:yt,dpr:vt,performance:St,raycaster:wt,camera:Et,scene:Rt,onPointerMissed:Tt,onCreated:It,...At},Dt){reactExports.useMemo(()=>extend(THREE),[]);const jt=useContextBridge(),[Ft,Lt]=useMeasure({scroll:!0,debounce:{scroll:50,resize:0},...st}),Mt=reactExports.useRef(null),Ot=reactExports.useRef(null);reactExports.useImperativeHandle(Dt,()=>Mt.current);const Nt=useMutableCallback(Tt),[$t,Vt]=reactExports.useState(!1),[Ut,zt]=reactExports.useState(!1);if($t)throw $t;if(Ut)throw Ut;const Bt=reactExports.useRef(null);useIsomorphicLayoutEffect(()=>{const Gt=Mt.current;Lt.width>0&&Lt.height>0&&Gt&&(Bt.current||(Bt.current=createRoot(Gt)),Bt.current.configure({gl:ct,events:ut,shadows:ft,linear:pt,flat:mt,legacy:gt,orthographic:xt,frameloop:yt,dpr:vt,performance:St,raycaster:wt,camera:Et,scene:Rt,size:Lt,onPointerMissed:(...Xt)=>Nt.current==null?void 0:Nt.current(...Xt),onCreated:Xt=>{Xt.events.connect==null||Xt.events.connect(dt?isRef(dt)?dt.current:dt:Ot.current),ht&&Xt.setEvents({compute:(Zt,hr)=>{const nr=Zt[ht+"X"],ir=Zt[ht+"Y"];hr.pointer.set(nr/hr.size.width*2-1,-(ir/hr.size.height)*2+1),hr.raycaster.setFromCamera(hr.pointer,hr.camera)}}),It==null||It(Xt)}}),Bt.current.render(reactExports.createElement(jt,null,reactExports.createElement(ErrorBoundary,{set:zt},reactExports.createElement(reactExports.Suspense,{fallback:reactExports.createElement(Block,{set:Vt})},rt)))))}),reactExports.useEffect(()=>{const Gt=Mt.current;if(Gt)return()=>unmountComponentAtNode(Gt)},[]);const Ht=dt?"none":"auto";return reactExports.createElement("div",_extends({ref:Ot,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Ht,...lt}},At),reactExports.createElement("div",{ref:Ft,style:{width:"100%",height:"100%"}},reactExports.createElement("canvas",{ref:Mt,style:{display:"block"}},it)))}),Canvas=reactExports.forwardRef(function(rt,it){return reactExports.createElement(FiberProvider,null,reactExports.createElement(CanvasImpl,_extends({},rt,{ref:it})))});function mergeRefs(nt){return function(rt){nt.forEach(function(it){typeof it=="function"?it(rt):it!=null&&(it.current=rt)})}}var __defProp$7=Object.defineProperty,__defNormalProp$2=(nt,rt,it)=>rt in nt?__defProp$7(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,__publicField$2=(nt,rt,it)=>(__defNormalProp$2(nt,typeof rt!="symbol"?rt+"":rt,it),it);const _ray=new Ray,_plane=new Plane,TILT_LIMIT=Math.cos(70*(Math.PI/180)),moduloWrapAround=(nt,rt)=>(nt%rt+rt)%rt;let OrbitControls$1=class extends EventDispatcher{constructor(rt,it){super(),__publicField$2(this,"object"),__publicField$2(this,"domElement"),__publicField$2(this,"enabled",!0),__publicField$2(this,"target",new Vector3),__publicField$2(this,"minDistance",0),__publicField$2(this,"maxDistance",1/0),__publicField$2(this,"minZoom",0),__publicField$2(this,"maxZoom",1/0),__publicField$2(this,"minPolarAngle",0),__publicField$2(this,"maxPolarAngle",Math.PI),__publicField$2(this,"minAzimuthAngle",-1/0),__publicField$2(this,"maxAzimuthAngle",1/0),__publicField$2(this,"enableDamping",!1),__publicField$2(this,"dampingFactor",.05),__publicField$2(this,"enableZoom",!0),__publicField$2(this,"zoomSpeed",1),__publicField$2(this,"enableRotate",!0),__publicField$2(this,"rotateSpeed",1),__publicField$2(this,"enablePan",!0),__publicField$2(this,"panSpeed",1),__publicField$2(this,"screenSpacePanning",!0),__publicField$2(this,"keyPanSpeed",7),__publicField$2(this,"zoomToCursor",!1),__publicField$2(this,"autoRotate",!1),__publicField$2(this,"autoRotateSpeed",2),__publicField$2(this,"reverseOrbit",!1),__publicField$2(this,"reverseHorizontalOrbit",!1),__publicField$2(this,"reverseVerticalOrbit",!1),__publicField$2(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),__publicField$2(this,"mouseButtons",{LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN}),__publicField$2(this,"touches",{ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN}),__publicField$2(this,"target0"),__publicField$2(this,"position0"),__publicField$2(this,"zoom0"),__publicField$2(this,"_domElementKeyEvents",null),__publicField$2(this,"getPolarAngle"),__publicField$2(this,"getAzimuthalAngle"),__publicField$2(this,"setPolarAngle"),__publicField$2(this,"setAzimuthalAngle"),__publicField$2(this,"getDistance"),__publicField$2(this,"listenToKeyEvents"),__publicField$2(this,"stopListenToKeyEvents"),__publicField$2(this,"saveState"),__publicField$2(this,"reset"),__publicField$2(this,"update"),__publicField$2(this,"connect"),__publicField$2(this,"dispose"),this.object=rt,this.domElement=it,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>pt.phi,this.getAzimuthalAngle=()=>pt.theta,this.setPolarAngle=or=>{let Wr=moduloWrapAround(or,2*Math.PI),Ir=pt.phi;Ir<0&&(Ir+=2*Math.PI),Wr<0&&(Wr+=2*Math.PI);let dn=Math.abs(Wr-Ir);2*Math.PI-dn<dn&&(Wr<Ir?Wr+=2*Math.PI:Ir+=2*Math.PI),mt.phi=Wr-Ir,st.update()},this.setAzimuthalAngle=or=>{let Wr=moduloWrapAround(or,2*Math.PI),Ir=pt.theta;Ir<0&&(Ir+=2*Math.PI),Wr<0&&(Wr+=2*Math.PI);let dn=Math.abs(Wr-Ir);2*Math.PI-dn<dn&&(Wr<Ir?Wr+=2*Math.PI:Ir+=2*Math.PI),mt.theta=Wr-Ir,st.update()},this.getDistance=()=>st.object.position.distanceTo(st.target),this.listenToKeyEvents=or=>{or.addEventListener("keydown",Qn),this._domElementKeyEvents=or},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Qn),this._domElementKeyEvents=null},this.saveState=()=>{st.target0.copy(st.target),st.position0.copy(st.object.position),st.zoom0=st.object.zoom},this.reset=()=>{st.target.copy(st.target0),st.object.position.copy(st.position0),st.object.zoom=st.zoom0,st.object.updateProjectionMatrix(),st.dispatchEvent(lt),st.update(),ht=dt.NONE},this.update=(()=>{const or=new Vector3,Wr=new Vector3(0,1,0),Ir=new Quaternion().setFromUnitVectors(rt.up,Wr),dn=Ir.clone().invert(),kn=new Vector3,Mr=new Quaternion,vn=2*Math.PI;return function(){const Er=st.object.position;Ir.setFromUnitVectors(rt.up,Wr),dn.copy(Ir).invert(),or.copy(Er).sub(st.target),or.applyQuaternion(Ir),pt.setFromVector3(or),st.autoRotate&&ht===dt.NONE&&$t(Ot()),st.enableDamping?(pt.theta+=mt.theta*st.dampingFactor,pt.phi+=mt.phi*st.dampingFactor):(pt.theta+=mt.theta,pt.phi+=mt.phi);let Ur=st.minAzimuthAngle,on=st.maxAzimuthAngle;isFinite(Ur)&&isFinite(on)&&(Ur<-Math.PI?Ur+=vn:Ur>Math.PI&&(Ur-=vn),on<-Math.PI?on+=vn:on>Math.PI&&(on-=vn),Ur<=on?pt.theta=Math.max(Ur,Math.min(on,pt.theta)):pt.theta=pt.theta>(Ur+on)/2?Math.max(Ur,pt.theta):Math.min(on,pt.theta)),pt.phi=Math.max(st.minPolarAngle,Math.min(st.maxPolarAngle,pt.phi)),pt.makeSafe(),st.enableDamping===!0?st.target.addScaledVector(xt,st.dampingFactor):st.target.add(xt),st.zoomToCursor&&Ft||st.object.isOrthographicCamera?pt.radius=Zt(pt.radius):pt.radius=Zt(pt.radius*gt),or.setFromSpherical(pt),or.applyQuaternion(dn),Er.copy(st.target).add(or),st.object.matrixAutoUpdate||st.object.updateMatrix(),st.object.lookAt(st.target),st.enableDamping===!0?(mt.theta*=1-st.dampingFactor,mt.phi*=1-st.dampingFactor,xt.multiplyScalar(1-st.dampingFactor)):(mt.set(0,0,0),xt.set(0,0,0));let fn=!1;if(st.zoomToCursor&&Ft){let Kn=null;if(st.object instanceof PerspectiveCamera&&st.object.isPerspectiveCamera){const es=or.length();Kn=Zt(es*gt);const Zn=es-Kn;st.object.position.addScaledVector(Dt,Zn),st.object.updateMatrixWorld()}else if(st.object.isOrthographicCamera){const es=new Vector3(jt.x,jt.y,0);es.unproject(st.object),st.object.zoom=Math.max(st.minZoom,Math.min(st.maxZoom,st.object.zoom/gt)),st.object.updateProjectionMatrix(),fn=!0;const Zn=new Vector3(jt.x,jt.y,0);Zn.unproject(st.object),st.object.position.sub(Zn).add(es),st.object.updateMatrixWorld(),Kn=or.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),st.zoomToCursor=!1;Kn!==null&&(st.screenSpacePanning?st.target.set(0,0,-1).transformDirection(st.object.matrix).multiplyScalar(Kn).add(st.object.position):(_ray.origin.copy(st.object.position),_ray.direction.set(0,0,-1).transformDirection(st.object.matrix),Math.abs(st.object.up.dot(_ray.direction))<TILT_LIMIT?rt.lookAt(st.target):(_plane.setFromNormalAndCoplanarPoint(st.object.up,st.target),_ray.intersectPlane(_plane,st.target))))}else st.object instanceof OrthographicCamera&&st.object.isOrthographicCamera&&(fn=gt!==1,fn&&(st.object.zoom=Math.max(st.minZoom,Math.min(st.maxZoom,st.object.zoom/gt)),st.object.updateProjectionMatrix()));return gt=1,Ft=!1,fn||kn.distanceToSquared(st.object.position)>ft||8*(1-Mr.dot(st.object.quaternion))>ft?(st.dispatchEvent(lt),kn.copy(st.object.position),Mr.copy(st.object.quaternion),fn=!1,!0):!1}})(),this.connect=or=>{or===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),st.domElement=or,st.domElement.style.touchAction="none",st.domElement.addEventListener("contextmenu",Xn),st.domElement.addEventListener("pointerdown",vr),st.domElement.addEventListener("pointercancel",qr),st.domElement.addEventListener("wheel",Rn)},this.dispose=()=>{var or,Wr,Ir,dn,kn,Mr;(or=st.domElement)==null||or.removeEventListener("contextmenu",Xn),(Wr=st.domElement)==null||Wr.removeEventListener("pointerdown",vr),(Ir=st.domElement)==null||Ir.removeEventListener("pointercancel",qr),(dn=st.domElement)==null||dn.removeEventListener("wheel",Rn),(kn=st.domElement)==null||kn.ownerDocument.removeEventListener("pointermove",Fr),(Mr=st.domElement)==null||Mr.ownerDocument.removeEventListener("pointerup",Kr),st._domElementKeyEvents!==null&&st._domElementKeyEvents.removeEventListener("keydown",Qn)};const st=this,lt={type:"change"},ct={type:"start"},ut={type:"end"},dt={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let ht=dt.NONE;const ft=1e-6,pt=new Spherical,mt=new Spherical;let gt=1;const xt=new Vector3,yt=new Vector2,vt=new Vector2,St=new Vector2,wt=new Vector2,Et=new Vector2,Rt=new Vector2,Tt=new Vector2,It=new Vector2,At=new Vector2,Dt=new Vector3,jt=new Vector2;let Ft=!1;const Lt=[],Mt={};function Ot(){return 2*Math.PI/60/60*st.autoRotateSpeed}function Nt(){return Math.pow(.95,st.zoomSpeed)}function $t(or){st.reverseOrbit||st.reverseHorizontalOrbit?mt.theta+=or:mt.theta-=or}function Vt(or){st.reverseOrbit||st.reverseVerticalOrbit?mt.phi+=or:mt.phi-=or}const Ut=(()=>{const or=new Vector3;return function(Ir,dn){or.setFromMatrixColumn(dn,0),or.multiplyScalar(-Ir),xt.add(or)}})(),zt=(()=>{const or=new Vector3;return function(Ir,dn){st.screenSpacePanning===!0?or.setFromMatrixColumn(dn,1):(or.setFromMatrixColumn(dn,0),or.crossVectors(st.object.up,or)),or.multiplyScalar(Ir),xt.add(or)}})(),Bt=(()=>{const or=new Vector3;return function(Ir,dn){const kn=st.domElement;if(kn&&st.object instanceof PerspectiveCamera&&st.object.isPerspectiveCamera){const Mr=st.object.position;or.copy(Mr).sub(st.target);let vn=or.length();vn*=Math.tan(st.object.fov/2*Math.PI/180),Ut(2*Ir*vn/kn.clientHeight,st.object.matrix),zt(2*dn*vn/kn.clientHeight,st.object.matrix)}else kn&&st.object instanceof OrthographicCamera&&st.object.isOrthographicCamera?(Ut(Ir*(st.object.right-st.object.left)/st.object.zoom/kn.clientWidth,st.object.matrix),zt(dn*(st.object.top-st.object.bottom)/st.object.zoom/kn.clientHeight,st.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),st.enablePan=!1)}})();function Ht(or){st.object instanceof PerspectiveCamera&&st.object.isPerspectiveCamera||st.object instanceof OrthographicCamera&&st.object.isOrthographicCamera?gt/=or:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),st.enableZoom=!1)}function Gt(or){st.object instanceof PerspectiveCamera&&st.object.isPerspectiveCamera||st.object instanceof OrthographicCamera&&st.object.isOrthographicCamera?gt*=or:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),st.enableZoom=!1)}function Xt(or){if(!st.zoomToCursor||!st.domElement)return;Ft=!0;const Wr=st.domElement.getBoundingClientRect(),Ir=or.clientX-Wr.left,dn=or.clientY-Wr.top,kn=Wr.width,Mr=Wr.height;jt.x=Ir/kn*2-1,jt.y=-(dn/Mr)*2+1,Dt.set(jt.x,jt.y,1).unproject(st.object).sub(st.object.position).normalize()}function Zt(or){return Math.max(st.minDistance,Math.min(st.maxDistance,or))}function hr(or){yt.set(or.clientX,or.clientY)}function nr(or){Xt(or),Tt.set(or.clientX,or.clientY)}function ir(or){wt.set(or.clientX,or.clientY)}function yr(or){vt.set(or.clientX,or.clientY),St.subVectors(vt,yt).multiplyScalar(st.rotateSpeed);const Wr=st.domElement;Wr&&($t(2*Math.PI*St.x/Wr.clientHeight),Vt(2*Math.PI*St.y/Wr.clientHeight)),yt.copy(vt),st.update()}function Cr(or){It.set(or.clientX,or.clientY),At.subVectors(It,Tt),At.y>0?Ht(Nt()):At.y<0&&Gt(Nt()),Tt.copy(It),st.update()}function Sr(or){Et.set(or.clientX,or.clientY),Rt.subVectors(Et,wt).multiplyScalar(st.panSpeed),Bt(Rt.x,Rt.y),wt.copy(Et),st.update()}function xr(or){Xt(or),or.deltaY<0?Gt(Nt()):or.deltaY>0&&Ht(Nt()),st.update()}function gr(or){let Wr=!1;switch(or.code){case st.keys.UP:Bt(0,st.keyPanSpeed),Wr=!0;break;case st.keys.BOTTOM:Bt(0,-st.keyPanSpeed),Wr=!0;break;case st.keys.LEFT:Bt(st.keyPanSpeed,0),Wr=!0;break;case st.keys.RIGHT:Bt(-st.keyPanSpeed,0),Wr=!0;break}Wr&&(or.preventDefault(),st.update())}function _r(){if(Lt.length==1)yt.set(Lt[0].pageX,Lt[0].pageY);else{const or=.5*(Lt[0].pageX+Lt[1].pageX),Wr=.5*(Lt[0].pageY+Lt[1].pageY);yt.set(or,Wr)}}function fr(){if(Lt.length==1)wt.set(Lt[0].pageX,Lt[0].pageY);else{const or=.5*(Lt[0].pageX+Lt[1].pageX),Wr=.5*(Lt[0].pageY+Lt[1].pageY);wt.set(or,Wr)}}function Nr(){const or=Lt[0].pageX-Lt[1].pageX,Wr=Lt[0].pageY-Lt[1].pageY,Ir=Math.sqrt(or*or+Wr*Wr);Tt.set(0,Ir)}function Tr(){st.enableZoom&&Nr(),st.enablePan&&fr()}function Hr(){st.enableZoom&&Nr(),st.enableRotate&&_r()}function Vr(or){if(Lt.length==1)vt.set(or.pageX,or.pageY);else{const Ir=Ar(or),dn=.5*(or.pageX+Ir.x),kn=.5*(or.pageY+Ir.y);vt.set(dn,kn)}St.subVectors(vt,yt).multiplyScalar(st.rotateSpeed);const Wr=st.domElement;Wr&&($t(2*Math.PI*St.x/Wr.clientHeight),Vt(2*Math.PI*St.y/Wr.clientHeight)),yt.copy(vt)}function mn(or){if(Lt.length==1)Et.set(or.pageX,or.pageY);else{const Wr=Ar(or),Ir=.5*(or.pageX+Wr.x),dn=.5*(or.pageY+Wr.y);Et.set(Ir,dn)}Rt.subVectors(Et,wt).multiplyScalar(st.panSpeed),Bt(Rt.x,Rt.y),wt.copy(Et)}function tn(or){const Wr=Ar(or),Ir=or.pageX-Wr.x,dn=or.pageY-Wr.y,kn=Math.sqrt(Ir*Ir+dn*dn);It.set(0,kn),At.set(0,Math.pow(It.y/Tt.y,st.zoomSpeed)),Ht(At.y),Tt.copy(It)}function er(or){st.enableZoom&&tn(or),st.enablePan&&mn(or)}function tr(or){st.enableZoom&&tn(or),st.enableRotate&&Vr(or)}function vr(or){var Wr,Ir;st.enabled!==!1&&(Lt.length===0&&((Wr=st.domElement)==null||Wr.ownerDocument.addEventListener("pointermove",Fr),(Ir=st.domElement)==null||Ir.ownerDocument.addEventListener("pointerup",Kr)),Yr(or),or.pointerType==="touch"?Ln(or):pn(or))}function Fr(or){st.enabled!==!1&&(or.pointerType==="touch"?ln(or):En(or))}function Kr(or){var Wr,Ir,dn;Qr(or),Lt.length===0&&((Wr=st.domElement)==null||Wr.releasePointerCapture(or.pointerId),(Ir=st.domElement)==null||Ir.ownerDocument.removeEventListener("pointermove",Fr),(dn=st.domElement)==null||dn.ownerDocument.removeEventListener("pointerup",Kr)),st.dispatchEvent(ut),ht=dt.NONE}function qr(or){Qr(or)}function pn(or){let Wr;switch(or.button){case 0:Wr=st.mouseButtons.LEFT;break;case 1:Wr=st.mouseButtons.MIDDLE;break;case 2:Wr=st.mouseButtons.RIGHT;break;default:Wr=-1}switch(Wr){case MOUSE.DOLLY:if(st.enableZoom===!1)return;nr(or),ht=dt.DOLLY;break;case MOUSE.ROTATE:if(or.ctrlKey||or.metaKey||or.shiftKey){if(st.enablePan===!1)return;ir(or),ht=dt.PAN}else{if(st.enableRotate===!1)return;hr(or),ht=dt.ROTATE}break;case MOUSE.PAN:if(or.ctrlKey||or.metaKey||or.shiftKey){if(st.enableRotate===!1)return;hr(or),ht=dt.ROTATE}else{if(st.enablePan===!1)return;ir(or),ht=dt.PAN}break;default:ht=dt.NONE}ht!==dt.NONE&&st.dispatchEvent(ct)}function En(or){if(st.enabled!==!1)switch(ht){case dt.ROTATE:if(st.enableRotate===!1)return;yr(or);break;case dt.DOLLY:if(st.enableZoom===!1)return;Cr(or);break;case dt.PAN:if(st.enablePan===!1)return;Sr(or);break}}function Rn(or){st.enabled===!1||st.enableZoom===!1||ht!==dt.NONE&&ht!==dt.ROTATE||(or.preventDefault(),st.dispatchEvent(ct),xr(or),st.dispatchEvent(ut))}function Qn(or){st.enabled===!1||st.enablePan===!1||gr(or)}function Ln(or){switch(Mn(or),Lt.length){case 1:switch(st.touches.ONE){case TOUCH.ROTATE:if(st.enableRotate===!1)return;_r(),ht=dt.TOUCH_ROTATE;break;case TOUCH.PAN:if(st.enablePan===!1)return;fr(),ht=dt.TOUCH_PAN;break;default:ht=dt.NONE}break;case 2:switch(st.touches.TWO){case TOUCH.DOLLY_PAN:if(st.enableZoom===!1&&st.enablePan===!1)return;Tr(),ht=dt.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(st.enableZoom===!1&&st.enableRotate===!1)return;Hr(),ht=dt.TOUCH_DOLLY_ROTATE;break;default:ht=dt.NONE}break;default:ht=dt.NONE}ht!==dt.NONE&&st.dispatchEvent(ct)}function ln(or){switch(Mn(or),ht){case dt.TOUCH_ROTATE:if(st.enableRotate===!1)return;Vr(or),st.update();break;case dt.TOUCH_PAN:if(st.enablePan===!1)return;mn(or),st.update();break;case dt.TOUCH_DOLLY_PAN:if(st.enableZoom===!1&&st.enablePan===!1)return;er(or),st.update();break;case dt.TOUCH_DOLLY_ROTATE:if(st.enableZoom===!1&&st.enableRotate===!1)return;tr(or),st.update();break;default:ht=dt.NONE}}function Xn(or){st.enabled!==!1&&or.preventDefault()}function Yr(or){Lt.push(or)}function Qr(or){delete Mt[or.pointerId];for(let Wr=0;Wr<Lt.length;Wr++)if(Lt[Wr].pointerId==or.pointerId){Lt.splice(Wr,1);return}}function Mn(or){let Wr=Mt[or.pointerId];Wr===void 0&&(Wr=new Vector2,Mt[or.pointerId]=Wr),Wr.set(or.pageX,or.pageY)}function Ar(or){const Wr=or.pointerId===Lt[0].pointerId?Lt[1]:Lt[0];return Mt[Wr.pointerId]}it!==void 0&&this.connect(it),this.update()}};const HorizontalBlurShader={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},VerticalBlurShader={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},getVersion=()=>parseInt(REVISION.replace(/\D+/g,"")),version$1=getVersion(),OrbitControls=reactExports.forwardRef(({makeDefault:nt,camera:rt,regress:it,domElement:st,enableDamping:lt=!0,keyEvents:ct=!1,onChange:ut,onStart:dt,onEnd:ht,...ft},pt)=>{const mt=useThree(At=>At.invalidate),gt=useThree(At=>At.camera),xt=useThree(At=>At.gl),yt=useThree(At=>At.events),vt=useThree(At=>At.setEvents),St=useThree(At=>At.set),wt=useThree(At=>At.get),Et=useThree(At=>At.performance),Rt=rt||gt,Tt=st||yt.connected||xt.domElement,It=reactExports.useMemo(()=>new OrbitControls$1(Rt),[Rt]);return useFrame(()=>{It.enabled&&It.update()},-1),reactExports.useEffect(()=>(ct&&It.connect(ct===!0?Tt:ct),It.connect(Tt),()=>void It.dispose()),[ct,Tt,it,It,mt]),reactExports.useEffect(()=>{const At=Ft=>{mt(),it&&Et.regress(),ut&&ut(Ft)},Dt=Ft=>{dt&&dt(Ft)},jt=Ft=>{ht&&ht(Ft)};return It.addEventListener("change",At),It.addEventListener("start",Dt),It.addEventListener("end",jt),()=>{It.removeEventListener("start",Dt),It.removeEventListener("end",jt),It.removeEventListener("change",At)}},[ut,dt,ht,It,mt,vt]),reactExports.useEffect(()=>{if(nt){const At=wt().controls;return St({controls:It}),()=>St({controls:At})}},[nt,It]),reactExports.createElement("primitive",_extends({ref:pt,object:It,enableDamping:lt},ft))}),ContactShadows=reactExports.forwardRef(({scale:nt=10,frames:rt=1/0,opacity:it=1,width:st=1,height:lt=1,blur:ct=1,near:ut=0,far:dt=10,resolution:ht=512,smooth:ft=!0,color:pt="#000000",depthWrite:mt=!1,renderOrder:gt,...xt},yt)=>{const vt=reactExports.useRef(null),St=useThree($t=>$t.scene),wt=useThree($t=>$t.gl),Et=reactExports.useRef(null);st=st*(Array.isArray(nt)?nt[0]:nt||1),lt=lt*(Array.isArray(nt)?nt[1]:nt||1);const[Rt,Tt,It,At,Dt,jt,Ft]=reactExports.useMemo(()=>{const $t=new WebGLRenderTarget(ht,ht),Vt=new WebGLRenderTarget(ht,ht);Vt.texture.generateMipmaps=$t.texture.generateMipmaps=!1;const Ut=new PlaneGeometry(st,lt).rotateX(Math.PI/2),zt=new Mesh(Ut),Bt=new MeshDepthMaterial;Bt.depthTest=Bt.depthWrite=!1,Bt.onBeforeCompile=Xt=>{Xt.uniforms={...Xt.uniforms,ucolor:{value:new Color(pt)}},Xt.fragmentShader=Xt.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),Xt.fragmentShader=Xt.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Ht=new ShaderMaterial(HorizontalBlurShader),Gt=new ShaderMaterial(VerticalBlurShader);return Gt.depthTest=Ht.depthTest=!1,[$t,Ut,Bt,zt,Ht,Gt,Vt]},[ht,st,lt,nt,pt]),Lt=$t=>{At.visible=!0,At.material=Dt,Dt.uniforms.tDiffuse.value=Rt.texture,Dt.uniforms.h.value=$t*1/256,wt.setRenderTarget(Ft),wt.render(At,Et.current),At.material=jt,jt.uniforms.tDiffuse.value=Ft.texture,jt.uniforms.v.value=$t*1/256,wt.setRenderTarget(Rt),wt.render(At,Et.current),At.visible=!1};let Mt=0,Ot,Nt;return useFrame(()=>{Et.current&&(rt===1/0||Mt<rt)&&(Mt++,Ot=St.background,Nt=St.overrideMaterial,vt.current.visible=!1,St.background=null,St.overrideMaterial=It,wt.setRenderTarget(Rt),wt.render(St,Et.current),Lt(ct),ft&&Lt(ct*.4),wt.setRenderTarget(null),vt.current.visible=!0,St.overrideMaterial=Nt,St.background=Ot)}),reactExports.useImperativeHandle(yt,()=>vt.current,[]),reactExports.createElement("group",_extends({"rotation-x":Math.PI/2},xt,{ref:vt}),reactExports.createElement("mesh",{renderOrder:gt,geometry:Tt,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},reactExports.createElement("meshBasicMaterial",{transparent:!0,map:Rt.texture,opacity:it,depthWrite:mt})),reactExports.createElement("orthographicCamera",{ref:Et,args:[-st/2,st/2,lt/2,-lt/2,ut,dt]}))});class SpotLightMaterial extends ShaderMaterial{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new Vector3(0,0,0)},lightColor:{value:new Color("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new Vector2(0,0)}},transparent:!0,depthWrite:!1,vertexShader:`
        varying vec3 vNormal;
        varying float vViewZ;
        varying float vIntensity;
        uniform vec3 spotPosition;
        uniform float attenuation;

        #include <common>
        #include <logdepthbuf_pars_vertex>

        void main() {
          // compute intensity
          vNormal = normalize(normalMatrix * normal);
          vec4 worldPosition = modelMatrix * vec4(position, 1);
          vec4 viewPosition = viewMatrix * worldPosition;
          vViewZ = viewPosition.z;

          vIntensity = 1.0 - saturate(distance(worldPosition.xyz, spotPosition) / attenuation);

          gl_Position = projectionMatrix * viewPosition;

          #include <logdepthbuf_vertex>
        }
      `,fragmentShader:`
        varying vec3 vNormal;
        varying float vViewZ;
        varying float vIntensity;

        uniform vec3 lightColor;
        uniform float anglePower;
        uniform sampler2D depth;
        uniform vec2 resolution;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float opacity;

        #include <packing>
        #include <logdepthbuf_pars_fragment>

        float readDepth(sampler2D depthSampler, vec2 uv) {
          float fragCoordZ = texture(depthSampler, uv).r;

          // https://github.com/mrdoob/three.js/issues/23072
          #ifdef USE_LOGDEPTHBUF
            float viewZ = 1.0 - exp2(fragCoordZ * log(cameraFar + 1.0) / log(2.0));
          #else
            float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);
          #endif

          return viewZ;
        }

        void main() {
          #include <logdepthbuf_fragment>

          vec3 normal = vec3(vNormal.x, vNormal.y, abs(vNormal.z));
          float angleIntensity = pow(dot(normal, vec3(0, 0, 1)), anglePower);
          float intensity = vIntensity * angleIntensity;

          // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry
          bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;
          if (isSoft) {
            vec2 uv = gl_FragCoord.xy / resolution;
            intensity *= smoothstep(0.0, 1.0, vViewZ - readDepth(depth, uv));
          }

          gl_FragColor = vec4(lightColor, intensity * opacity);

          #include <tonemapping_fragment>
          #include <${version$1>=154?"colorspace_fragment":"encodings_fragment"}>
        }
      `})}}function VolumetricMesh({opacity:nt=1,radiusTop:rt,radiusBottom:it,depthBuffer:st,color:lt="white",distance:ct=5,angle:ut=.15,attenuation:dt=5,anglePower:ht=5}){const ft=reactExports.useRef(null),pt=useThree(St=>St.size),mt=useThree(St=>St.camera),gt=useThree(St=>St.viewport.dpr),[xt]=reactExports.useState(()=>new SpotLightMaterial),[yt]=reactExports.useState(()=>new Vector3);rt=rt===void 0?.1:rt,it=it===void 0?ut*7:it,useFrame(()=>{xt.uniforms.spotPosition.value.copy(ft.current.getWorldPosition(yt)),ft.current.lookAt(ft.current.parent.target.getWorldPosition(yt))});const vt=reactExports.useMemo(()=>{const St=new CylinderGeometry(rt,it,ct,128,64,!0);return St.applyMatrix4(new Matrix4().makeTranslation(0,-ct/2,0)),St.applyMatrix4(new Matrix4().makeRotationX(-Math.PI/2)),St},[ct,rt,it]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("mesh",{ref:ft,geometry:vt,raycast:()=>null},reactExports.createElement("primitive",{object:xt,attach:"material","uniforms-opacity-value":nt,"uniforms-lightColor-value":lt,"uniforms-attenuation-value":dt,"uniforms-anglePower-value":ht,"uniforms-depth-value":st,"uniforms-cameraNear-value":mt.near,"uniforms-cameraFar-value":mt.far,"uniforms-resolution-value":st?[pt.width*gt,pt.height*gt]:[0,0]})))}const SpotLight=reactExports.forwardRef(({opacity:nt=1,radiusTop:rt,radiusBottom:it,depthBuffer:st,color:lt="white",distance:ct=5,angle:ut=.15,attenuation:dt=5,anglePower:ht=5,volumetric:ft=!0,debug:pt=!1,children:mt,...gt},xt)=>{const yt=reactExports.useRef(null);return reactExports.createElement("group",null,pt&&yt.current&&reactExports.createElement("spotLightHelper",{args:[yt.current]}),reactExports.createElement("spotLight",_extends({ref:mergeRefs([xt,yt]),angle:ut,color:lt,distance:ct,castShadow:!0},gt),ft&&reactExports.createElement(VolumetricMesh,{debug:pt,opacity:nt,radiusTop:rt,radiusBottom:it,depthBuffer:st,color:lt,distance:ct,angle:ut,attenuation:dt,anglePower:ht})),mt&&reactExports.cloneElement(mt,{spotlightRef:yt,debug:pt}))}),scriptRel="modulepreload",assetsURL=function(nt){return"/"+nt},seen={},__vitePreload=function(rt,it,st){let lt=Promise.resolve();if(it&&it.length>0){const ct=document.getElementsByTagName("link");lt=Promise.all(it.map(ut=>{if(ut=assetsURL(ut),ut in seen)return;seen[ut]=!0;const dt=ut.endsWith(".css"),ht=dt?'[rel="stylesheet"]':"";if(!!st)for(let mt=ct.length-1;mt>=0;mt--){const gt=ct[mt];if(gt.href===ut&&(!dt||gt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${ut}"]${ht}`))return;const pt=document.createElement("link");if(pt.rel=dt?"stylesheet":scriptRel,dt||(pt.as="script",pt.crossOrigin=""),pt.href=ut,document.head.appendChild(pt),dt)return new Promise((mt,gt)=>{pt.addEventListener("load",mt),pt.addEventListener("error",()=>gt(new Error(`Unable to preload CSS for ${ut}`)))})}))}return lt.then(()=>rt()).catch(ct=>{const ut=new Event("vite:preloadError",{cancelable:!0});if(ut.payload=ct,window.dispatchEvent(ut),!ut.defaultPrevented)throw ct})},_object_pattern=/^[og]\s*(.+)?/,_material_library_pattern=/^mtllib /,_material_use_pattern=/^usemtl /,_map_use_pattern=/^usemap /,_face_vertex_data_separator_pattern=/\s+/,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_ab=new Vector3,_cb=new Vector3,_color=new Color;function ParserState(){const nt={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(rt,it){if(this.object&&this.object.fromDeclaration===!1){this.object.name=rt,this.object.fromDeclaration=it!==!1;return}const st=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:rt||"",fromDeclaration:it!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(lt,ct){const ut=this._finalize(!1);ut&&(ut.inherited||ut.groupCount<=0)&&this.materials.splice(ut.index,1);const dt={index:this.materials.length,name:lt||"",mtllib:Array.isArray(ct)&&ct.length>0?ct[ct.length-1]:"",smooth:ut!==void 0?ut.smooth:this.smooth,groupStart:ut!==void 0?ut.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(ht){const ft={index:typeof ht=="number"?ht:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return ft.clone=this.clone.bind(ft),ft}};return this.materials.push(dt),dt},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(lt){const ct=this.currentMaterial();if(ct&&ct.groupEnd===-1&&(ct.groupEnd=this.geometry.vertices.length/3,ct.groupCount=ct.groupEnd-ct.groupStart,ct.inherited=!1),lt&&this.materials.length>1)for(let ut=this.materials.length-1;ut>=0;ut--)this.materials[ut].groupCount<=0&&this.materials.splice(ut,1);return lt&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),ct}},st&&st.name&&typeof st.clone=="function"){const lt=st.clone(0);lt.inherited=!0,this.object.materials.push(lt)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(rt,it){const st=parseInt(rt,10);return(st>=0?st-1:st+it/3)*3},parseNormalIndex:function(rt,it){const st=parseInt(rt,10);return(st>=0?st-1:st+it/3)*3},parseUVIndex:function(rt,it){const st=parseInt(rt,10);return(st>=0?st-1:st+it/2)*2},addVertex:function(rt,it,st){const lt=this.vertices,ct=this.object.geometry.vertices;ct.push(lt[rt+0],lt[rt+1],lt[rt+2]),ct.push(lt[it+0],lt[it+1],lt[it+2]),ct.push(lt[st+0],lt[st+1],lt[st+2])},addVertexPoint:function(rt){const it=this.vertices;this.object.geometry.vertices.push(it[rt+0],it[rt+1],it[rt+2])},addVertexLine:function(rt){const it=this.vertices;this.object.geometry.vertices.push(it[rt+0],it[rt+1],it[rt+2])},addNormal:function(rt,it,st){const lt=this.normals,ct=this.object.geometry.normals;ct.push(lt[rt+0],lt[rt+1],lt[rt+2]),ct.push(lt[it+0],lt[it+1],lt[it+2]),ct.push(lt[st+0],lt[st+1],lt[st+2])},addFaceNormal:function(rt,it,st){const lt=this.vertices,ct=this.object.geometry.normals;_vA.fromArray(lt,rt),_vB.fromArray(lt,it),_vC.fromArray(lt,st),_cb.subVectors(_vC,_vB),_ab.subVectors(_vA,_vB),_cb.cross(_ab),_cb.normalize(),ct.push(_cb.x,_cb.y,_cb.z),ct.push(_cb.x,_cb.y,_cb.z),ct.push(_cb.x,_cb.y,_cb.z)},addColor:function(rt,it,st){const lt=this.colors,ct=this.object.geometry.colors;lt[rt]!==void 0&&ct.push(lt[rt+0],lt[rt+1],lt[rt+2]),lt[it]!==void 0&&ct.push(lt[it+0],lt[it+1],lt[it+2]),lt[st]!==void 0&&ct.push(lt[st+0],lt[st+1],lt[st+2])},addUV:function(rt,it,st){const lt=this.uvs,ct=this.object.geometry.uvs;ct.push(lt[rt+0],lt[rt+1]),ct.push(lt[it+0],lt[it+1]),ct.push(lt[st+0],lt[st+1])},addDefaultUV:function(){const rt=this.object.geometry.uvs;rt.push(0,0),rt.push(0,0),rt.push(0,0)},addUVLine:function(rt){const it=this.uvs;this.object.geometry.uvs.push(it[rt+0],it[rt+1])},addFace:function(rt,it,st,lt,ct,ut,dt,ht,ft){const pt=this.vertices.length;let mt=this.parseVertexIndex(rt,pt),gt=this.parseVertexIndex(it,pt),xt=this.parseVertexIndex(st,pt);if(this.addVertex(mt,gt,xt),this.addColor(mt,gt,xt),dt!==void 0&&dt!==""){const yt=this.normals.length;mt=this.parseNormalIndex(dt,yt),gt=this.parseNormalIndex(ht,yt),xt=this.parseNormalIndex(ft,yt),this.addNormal(mt,gt,xt)}else this.addFaceNormal(mt,gt,xt);if(lt!==void 0&&lt!==""){const yt=this.uvs.length;mt=this.parseUVIndex(lt,yt),gt=this.parseUVIndex(ct,yt),xt=this.parseUVIndex(ut,yt),this.addUV(mt,gt,xt),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(rt){this.object.geometry.type="Points";const it=this.vertices.length;for(let st=0,lt=rt.length;st<lt;st++){const ct=this.parseVertexIndex(rt[st],it);this.addVertexPoint(ct),this.addColor(ct)}},addLineGeometry:function(rt,it){this.object.geometry.type="Line";const st=this.vertices.length,lt=this.uvs.length;for(let ct=0,ut=rt.length;ct<ut;ct++)this.addVertexLine(this.parseVertexIndex(rt[ct],st));for(let ct=0,ut=it.length;ct<ut;ct++)this.addUVLine(this.parseUVIndex(it[ct],lt))}};return nt.startObject("",!1),nt}class OBJLoader extends Loader{constructor(rt){super(rt),this.materials=null}load(rt,it,st,lt){const ct=this,ut=new FileLoader(this.manager);ut.setPath(this.path),ut.setRequestHeader(this.requestHeader),ut.setWithCredentials(this.withCredentials),ut.load(rt,function(dt){try{it(ct.parse(dt))}catch(ht){lt?lt(ht):console.error(ht),ct.manager.itemError(rt)}},st,lt)}setMaterials(rt){return this.materials=rt,this}parse(rt){const it=new ParserState;rt.indexOf(`\r
`)!==-1&&(rt=rt.replace(/\r\n/g,`
`)),rt.indexOf(`\\
`)!==-1&&(rt=rt.replace(/\\\n/g,""));const st=rt.split(`
`);let lt=[];for(let dt=0,ht=st.length;dt<ht;dt++){const ft=st[dt].trimStart();if(ft.length===0)continue;const pt=ft.charAt(0);if(pt!=="#")if(pt==="v"){const mt=ft.split(_face_vertex_data_separator_pattern);switch(mt[0]){case"v":it.vertices.push(parseFloat(mt[1]),parseFloat(mt[2]),parseFloat(mt[3])),mt.length>=7?(_color.setRGB(parseFloat(mt[4]),parseFloat(mt[5]),parseFloat(mt[6])).convertSRGBToLinear(),it.colors.push(_color.r,_color.g,_color.b)):it.colors.push(void 0,void 0,void 0);break;case"vn":it.normals.push(parseFloat(mt[1]),parseFloat(mt[2]),parseFloat(mt[3]));break;case"vt":it.uvs.push(parseFloat(mt[1]),parseFloat(mt[2]));break}}else if(pt==="f"){const gt=ft.slice(1).trim().split(_face_vertex_data_separator_pattern),xt=[];for(let vt=0,St=gt.length;vt<St;vt++){const wt=gt[vt];if(wt.length>0){const Et=wt.split("/");xt.push(Et)}}const yt=xt[0];for(let vt=1,St=xt.length-1;vt<St;vt++){const wt=xt[vt],Et=xt[vt+1];it.addFace(yt[0],wt[0],Et[0],yt[1],wt[1],Et[1],yt[2],wt[2],Et[2])}}else if(pt==="l"){const mt=ft.substring(1).trim().split(" ");let gt=[];const xt=[];if(ft.indexOf("/")===-1)gt=mt;else for(let yt=0,vt=mt.length;yt<vt;yt++){const St=mt[yt].split("/");St[0]!==""&&gt.push(St[0]),St[1]!==""&&xt.push(St[1])}it.addLineGeometry(gt,xt)}else if(pt==="p"){const gt=ft.slice(1).trim().split(" ");it.addPointGeometry(gt)}else if((lt=_object_pattern.exec(ft))!==null){const mt=(" "+lt[0].slice(1).trim()).slice(1);it.startObject(mt)}else if(_material_use_pattern.test(ft))it.object.startMaterial(ft.substring(7).trim(),it.materialLibraries);else if(_material_library_pattern.test(ft))it.materialLibraries.push(ft.substring(7).trim());else if(_map_use_pattern.test(ft))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(pt==="s"){if(lt=ft.split(" "),lt.length>1){const gt=lt[1].trim().toLowerCase();it.object.smooth=gt!=="0"&&gt!=="off"}else it.object.smooth=!0;const mt=it.object.currentMaterial();mt&&(mt.smooth=it.object.smooth)}else{if(ft==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+ft+'"')}}it.finalize();const ct=new Group;if(ct.materialLibraries=[].concat(it.materialLibraries),!(it.objects.length===1&&it.objects[0].geometry.vertices.length===0)===!0)for(let dt=0,ht=it.objects.length;dt<ht;dt++){const ft=it.objects[dt],pt=ft.geometry,mt=ft.materials,gt=pt.type==="Line",xt=pt.type==="Points";let yt=!1;if(pt.vertices.length===0)continue;const vt=new BufferGeometry;vt.setAttribute("position",new Float32BufferAttribute(pt.vertices,3)),pt.normals.length>0&&vt.setAttribute("normal",new Float32BufferAttribute(pt.normals,3)),pt.colors.length>0&&(yt=!0,vt.setAttribute("color",new Float32BufferAttribute(pt.colors,3))),pt.hasUVIndices===!0&&vt.setAttribute("uv",new Float32BufferAttribute(pt.uvs,2));const St=[];for(let Et=0,Rt=mt.length;Et<Rt;Et++){const Tt=mt[Et],It=Tt.name+"_"+Tt.smooth+"_"+yt;let At=it.materials[It];if(this.materials!==null){if(At=this.materials.create(Tt.name),gt&&At&&!(At instanceof LineBasicMaterial)){const Dt=new LineBasicMaterial;Material.prototype.copy.call(Dt,At),Dt.color.copy(At.color),At=Dt}else if(xt&&At&&!(At instanceof PointsMaterial)){const Dt=new PointsMaterial({size:10,sizeAttenuation:!1});Material.prototype.copy.call(Dt,At),Dt.color.copy(At.color),Dt.map=At.map,At=Dt}}At===void 0&&(gt?At=new LineBasicMaterial:xt?At=new PointsMaterial({size:1,sizeAttenuation:!1}):At=new MeshPhongMaterial,At.name=Tt.name,At.flatShading=!Tt.smooth,At.vertexColors=yt,it.materials[It]=At),St.push(At)}let wt;if(St.length>1){for(let Et=0,Rt=mt.length;Et<Rt;Et++){const Tt=mt[Et];vt.addGroup(Tt.groupStart,Tt.groupCount,Et)}gt?wt=new LineSegments(vt,St):xt?wt=new Points(vt,St):wt=new Mesh(vt,St)}else gt?wt=new LineSegments(vt,St[0]):xt?wt=new Points(vt,St[0]):wt=new Mesh(vt,St[0]);wt.name=ft.name,ct.add(wt)}else if(it.vertices.length>0){const dt=new PointsMaterial({size:1,sizeAttenuation:!1}),ht=new BufferGeometry;ht.setAttribute("position",new Float32BufferAttribute(it.vertices,3)),it.colors.length>0&&it.colors[0]!==void 0&&(ht.setAttribute("color",new Float32BufferAttribute(it.colors,3)),dt.vertexColors=!0);const ft=new Points(ht,dt);ct.add(ft)}return ct}}const ThreeD=()=>{const nt=Recoil_index_20(selectedInbodyState),rt=Recoil_index_20(targetInbodyState),it=Recoil_index_20(toggleModelState),st=Recoil_index_20(pinNumberState),lt=Recoil_index_24(modalState),ct=Recoil_index_20(userState),[ut,dt]=reactExports.useState(""),ht=Recoil_index_20(muscleRoundState),ft=gt=>ht[gt];reactExports.useEffect(()=>{it==="left"?dt(`/3D/${ct.info.gender}_${Math.round(nt.weight/10)*10}_${ft(nt.muscle)}_.obj`):rt!=null&&rt.weight?dt(`/3D/${ct.info.gender}_${Math.round(rt.weight/10)*10}_${ft(rt.muscle)}_.obj`):dt(`/3D/${ct.info.gender}_${Math.round(nt.weight/10)*10}_${ft(nt.muscle)}_.obj`)},[nt,rt,it]);const pt=useLoader(OBJLoader,ut),mt=()=>{lt({type:"pinNumber",data:""})};return jsxRuntimeExports.jsxs("div",{className:"absolute flex items-center justify-center -z-10",children:[jsxRuntimeExports.jsxs(Canvas,{style:{width:"100vw",height:"75vh",backgroundColor:"#E5E7EB",filter:st?null:"blur(20px)"},camera:{position:[0,0,8],fov:60},children:[jsxRuntimeExports.jsx("mesh",{position:[1,6,0],children:jsxRuntimeExports.jsx(SpotLight,{color:"white",castShadow:!0,penumbra:.2,radiusTop:.1,radiusBottom:40,distance:80,angle:.45,attenuation:20,anglePower:4,intensity:1,opacity:.5})}),jsxRuntimeExports.jsx("mesh",{position:[-2,6,1],children:jsxRuntimeExports.jsx(SpotLight,{color:"white",castShadow:!0,penumbra:.2,radiusTop:.1,radiusBottom:40,distance:80,angle:.45,attenuation:20,anglePower:4,intensity:1,opacity:.5})}),jsxRuntimeExports.jsx(OrbitControls,{autoRotate:!0,autoRotateSpeed:4}),jsxRuntimeExports.jsx("hemisphereLight",{color:"white",groundColor:"brown",intensity:.75}),jsxRuntimeExports.jsx("spotLight",{position:[50,50,10],angle:.15,penumbra:1}),jsxRuntimeExports.jsx(ContactShadows,{scale:20,position:[0,-2.7,0],blur:2,far:100}),jsxRuntimeExports.jsx("primitive",{scale:3,object:pt,position:[0,-2.7,0]})]}),jsxRuntimeExports.jsx("div",{className:st?"hidden":"absolute flex items-center justify-center h-16 bg-white border-2 rounded-full",onClick:mt,children:jsxRuntimeExports.jsx(LockClosedIcon$3,{className:"w-16 h-12"})})]})},InBodyNodata=()=>{const nt=Recoil_index_24(modalState),rt=()=>{nt({type:"modelDetail",data:""})};return jsxRuntimeExports.jsx("div",{className:"fixed transform -translate-y-1/2 top-1/2 inset-x-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-lg",children:["아래의"," ",jsxRuntimeExports.jsx("span",{onClick:rt,className:"font-semibold text-teal-700",children:"상세 정보 보기"}),"를 클릭 후"]}),jsxRuntimeExports.jsx("p",{className:"text-lg",children:"인바디 정보를 등록해주세요"})]})})},LoadingSpinner=()=>jsxRuntimeExports.jsx("div",{className:"fixed inset-x-0 overflow-auto transform -translate-y-1/2 top-1/2",children:jsxRuntimeExports.jsx("img",{src:"/loading/로고흰색배경.gif",alt:"",className:"w-1/2 mx-auto"})}),HomePage=()=>{const[nt,rt]=Recoil_index_22(modalState),it=Recoil_index_20(baseUrlState),st=Recoil_index_20(userState),[lt,ct]=Recoil_index_22(inbodyListState),[ut,dt]=Recoil_index_22(selectedInbodyState),ht=Recoil_index_20(loadingState),ft=Recoil_index_20(toggleModelState),pt=()=>{rt({type:"modelDetail",data:""})},mt=()=>{axios({method:"get",url:`${it}api/inbody/${st.info.userId}`,headers:{Authorization:`Bearer ${st.token}`}}).then(gt=>{ct(gt.data.data_body);const xt=gt.data.data_body[gt.data.data_body.length-1].inbody_id;axios({method:"get",url:`${it}api/inbody/${st.info.userId}/${xt}`,headers:{Authorization:`Bearer ${st.token}`}}).then(yt=>{dt(yt.data.data_body)}).catch(yt=>{console.log(yt)})}).catch(gt=>{console.log(gt)})};return reactExports.useEffect(()=>{ft==="left"&&mt()},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("img",{src:"/fullLogo.png",alt:"",className:"h-14"})}),jsxRuntimeExports.jsx("hr",{}),jsxRuntimeExports.jsx(ToggleTap,{leftTitle:"현재",rightTitle:"목표",state:toggleModelState}),ht&&jsxRuntimeExports.jsx(LoadingSpinner,{}),!ht&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:lt.length?jsxRuntimeExports.jsx(ThreeD,{}):jsxRuntimeExports.jsx(InBodyNodata,{})}),jsxRuntimeExports.jsx("div",{className:"fixed w-full bg-white bottom-[57px]",children:jsxRuntimeExports.jsx("div",{className:"p-2 m-4 text-center text-white bg-teal-700 rounded-md",children:jsxRuntimeExports.jsx(Button,{btnCss:"w-full",buttonName:ft==="left"?"상세 정보 보기":"데이터 입력",onClick:pt})})})]})},PasswordChangePage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),{watch:it,getValues:st,register:lt,handleSubmit:ct,reset:ut,setError:dt,clearErrors:ht,formState:{errors:ft}}=useForm({mode:"onChange",defaultValues:{currentPassword:"",newPassword:"",newPasswordCheck:""}});reactExports.useEffect(()=>{it("newPassword")!==it("newPasswordCheck")&&it("newPasswordCheck")?dt("newPasswordCheck",{type:"password-mismatch",message:"비밀번호가 일치하지 않습니다"}):ht("newPasswordCheck")},[it("newPassword"),it("newPasswordCheck")]);const pt=mt=>{axios({method:"patch",url:`${nt}api/users/${rt.info.userId}/password`,headers:{Authorization:`Bearer ${rt.token}`},data:{current_password:mt.currentPassword,new_password:mt.newPassword,new_passwordCheck:mt.newPasswordCheck}}).then(gt=>{gt.data.data_header.success_code===0?(localStorage.clear(),window.location.reload("/")):(alert("비밀번호 변경 실패 재입력!!"),ut())})};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"비밀번호 변경"}),jsxRuntimeExports.jsx("div",{className:"m-4",children:jsxRuntimeExports.jsxs("form",{onSubmit:ct(pt),className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsx("label",{htmlFor:"currentPassword",children:"현재 비밀번호"}),jsxRuntimeExports.jsx("input",{className:"p-2 border-2 rounded-md",id:"currentPassword",placeholder:"기존 비밀번호",type:"password",autoComplete:"on",...lt("currentPassword",{required:!0})}),jsxRuntimeExports.jsx("label",{htmlFor:"newPassword",children:"새 비밀번호"}),jsxRuntimeExports.jsx("input",{className:"p-2 border-2 rounded-md",id:"newPassword",type:"password",autoComplete:"on",placeholder:"새 비밀번호",...lt("newPassword",{required:!0,pattern:{value:/^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,20}$/,message:"영문, 숫자, 특수문자 포함 8 ~ 20자로 입력해주세요"}})}),ft.newPassword&&jsxRuntimeExports.jsx("p",{children:ft.newPassword.message}),jsxRuntimeExports.jsx("label",{htmlFor:"newPasswordCheck",children:"새 비밀번호 확인"}),jsxRuntimeExports.jsx("input",{className:"p-2 border-2 rounded-md",id:"newPasswordCheck",type:"password",autoComplete:"on",placeholder:"새 비밀번호 확인",...lt("newPasswordCheck",{required:!0,validate:{matchPassword:mt=>{const{newPassword:gt}=st();return gt===mt||"비밀번호가 일치하지 않습니다"}}})}),ft.newPasswordCheck&&jsxRuntimeExports.jsx("p",{children:ft.newPasswordCheck.message}),jsxRuntimeExports.jsx("input",{type:"submit",className:"p-2 text-white bg-teal-700 border rounded-md"})]})})]})},userHistoryState=Recoil_index_8({key:"userHistoryState",default:[]}),selectedHistoryListState=Recoil_index_8({key:"selectedHistoryListState",default:[]}),HistoryDetailBox=({data:nt})=>{const[rt,it]=reactExports.useState(!1),[st,lt]=Recoil_index_22(selectedHistoryListState),ct=["일","월","화","수","목","금","토"],ut=new Date(nt.date),dt=ct[ut.getDay()],[ht,ft]=reactExports.useState([]),pt=mt=>{st.includes(mt)?lt(st.filter(gt=>gt!==mt)):lt([...st,mt])};return reactExports.useEffect(()=>{const mt=nt.user_training_list.map(gt=>gt.category);ft([...new Set(mt)])},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",onClick:()=>it(!rt),children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Description,{Title:`${ut.getMonth()+1}월 ${ut.getDate()}일 (${dt})`,subTitle:ht.join(" ")})}),rt?jsxRuntimeExports.jsx(ChevronUpIcon$1,{className:"w-6 h-6 my-auto"}):jsxRuntimeExports.jsx(ChevronDownIcon$1,{className:"w-6 h-6 my-auto"})]}),jsxRuntimeExports.jsx("div",{className:`${rt?"":"hidden"} flex flex-col gap-2 pt-2`,children:nt.user_training_list.map((mt,gt)=>jsxRuntimeExports.jsxs("div",{className:"gap-2",children:[jsxRuntimeExports.jsx("hr",{className:"pb-2"}),jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",onChange:()=>pt(mt),checked:st.includes(mt),className:"w-5 h-5 mt-1 mr-2 accent-teal-600"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ps-1 pe-2",children:mt.category}),"|",jsxRuntimeExports.jsx("span",{className:"px-2",children:mt.name})]}),mt.sets.map((xt,yt)=>jsxRuntimeExports.jsxs("div",{className:"flex gap-2 text-sm text-gray-500 ps-1",children:[jsxRuntimeExports.jsxs("p",{children:[yt+1,"세트"]}),jsxRuntimeExports.jsxs("p",{children:[xt.kg,"kg"]}),jsxRuntimeExports.jsxs("p",{children:[xt.count,"회"]})]},yt))]})]})]},gt))})]})};HistoryDetailBox.propTypes={data:PropTypes.object};const HistoryList=()=>{const nt=Recoil_index_20(userHistoryState);return jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2 pb-4",children:nt.map((rt,it)=>jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-gray-200 rounded-lg",children:jsxRuntimeExports.jsx(HistoryDetailBox,{data:rt})},it))})},HistoryNoData=()=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-6 mt-48",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-1 text-gray-500",children:[jsxRuntimeExports.jsx("p",{children:"운동 기록이 없습니다."}),jsxRuntimeExports.jsx("p",{children:"지금 바로 운동을 계획해보세요!"})]}),jsxRuntimeExports.jsx("div",{className:"w-1/2 p-2 font-semibold text-center text-teal-700 border border-teal-700 rounded-full",children:jsxRuntimeExports.jsx(Link,{to:"/diary/training/choice/basic",children:jsxRuntimeExports.jsx("button",{children:"운동하러 가기"})})})]}),TrainingLoadPage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),{basepage:st}=useParams(),[lt,ct]=Recoil_index_22(userHistoryState),ut=Recoil_index_20(selectedHistoryListState),dt=Recoil_index_25(selectedHistoryListState),ht=Recoil_index_20(selectedRoutineState),ft=useNavigate(),pt=async()=>{await axios.post(`${nt}api/management/training/add?year=${it[0]}&month=${it[1]}&day=${it[2]}`,ut).then(yt=>{dt(),ft(`/diary/training/${it[0]}/${it[1]}/${it[2]}`)}).catch(yt=>{console.log(yt)})},mt=async()=>{await axios.post(`${nt}api/management/routine/add?routine_id=${ht.routineId}`,ut).then(yt=>{dt(),ft("/diary/training/myroutine/edit")}).catch(yt=>{console.log(yt)})},gt=()=>jsxRuntimeExports.jsx("div",{className:"p-2 text-center border-teal-700 rounded-md  bg-teal-700 text-white",children:jsxRuntimeExports.jsx(Button,{buttonName:"확인",onClick:()=>st==="basic"?pt():mt()})}),xt=async()=>{await axios.get(`${nt}api/management/training/user/${rt.info.userId}`).then(yt=>{ct(yt.data.reverse())}).catch(yt=>{console.log(yt)})};return reactExports.useEffect(()=>{xt()},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:`${st==="basic"?"불러오기":"전체 운동 기록"}`}),jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsx(Description,{size:"base",subsize:"sm"})})]}),jsxRuntimeExports.jsx("div",{className:"mx-4 mb-32",children:lt.length?jsxRuntimeExports.jsx(HistoryList,{}):jsxRuntimeExports.jsx(HistoryNoData,{})}),jsxRuntimeExports.jsx("div",{className:"fixed w-full bg-white bottom-[57px]",children:jsxRuntimeExports.jsx("div",{className:"m-4",children:gt()})})]})},Search=({onSubmit:nt,onChange:rt,placeholder:it,onBlur:st})=>jsxRuntimeExports.jsx("div",{className:"m-4",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2 p-2 bg-gray-200 border-2 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsx(MagnifyingGlassIcon$1,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("form",{onSubmit:nt,onBlur:st,children:jsxRuntimeExports.jsx("input",{onChange:rt,placeholder:it,className:"bg-gray-200 outline-none w-72"})})]})});Search.propTypes={onSubmit:PropTypes.func,onChange:PropTypes.func,placeholder:PropTypes.string,onBlur:PropTypes.func};const selectedRoutineTrainingState=Recoil_index_8({key:"selectedRoutineTrainingState",default:[]}),TrainingChoicePage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),[st,lt]=reactExports.useState(""),[ct,ut]=reactExports.useState([]),[dt,ht]=reactExports.useState(""),[ft,pt]=reactExports.useState([]),{basepage:mt}=useParams(),gt=Recoil_index_24(selectedRoutineTrainingState),xt=useNavigate(),yt=It=>{lt(It.target.value)},vt=async It=>{It.preventDefault(),await axios.get(`${nt}api/management/training/list?category=${dt}&keyword=${st}`).then(At=>{ut(At.data)}).catch(At=>{console.log(At)})},St=async()=>{await axios.get(`${nt}api/management/training/list?category=${dt}&keyword=${st}`).then(It=>{ut(It.data)}).catch(It=>{console.log(It)})},wt=It=>{dt===It.target.innerText?ht(""):ht(It.target.innerText)},Et=It=>{ft.includes(It)?pt(ft.filter(At=>At!==It)):pt([...ft,It])},Rt=async()=>{await axios.post(`${nt}api/management/training?user_id=${rt.info.userId}&year=${it[0]}&month=${it[1]}&day=${it[2]}`,ft).then(It=>{xt(`/diary/training/${it[0]}/${it[1]}/${it[2]}`)}).catch(It=>{console.log(It)})},Tt=()=>{gt(ft),xt("/diary/training/myroutine/edit")};return reactExports.useEffect(()=>{St()},[dt]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"운동 선택하기"}),jsxRuntimeExports.jsx(Search,{onSubmit:vt,onChange:yt,placeholder:"찾으시는 운동을 검색해보세요.",onBlur:vt}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between px-4 pb-4",children:[jsxRuntimeExports.jsx(Button,{btnCss:`basis-1/6 border-2 rounded-xl ${dt==="하체"?"bg-teal-700 text-white":""}`,buttonName:"하체",onClick:wt}),jsxRuntimeExports.jsx(Button,{btnCss:`basis-1/6 border-2 rounded-xl ${dt==="가슴"?"bg-teal-700 text-white":""}`,buttonName:"가슴",onClick:wt}),jsxRuntimeExports.jsx(Button,{btnCss:`basis-1/6 border-2 rounded-xl ${dt==="등"?"bg-teal-700 text-white":""}`,buttonName:"등",onClick:wt}),jsxRuntimeExports.jsx(Button,{btnCss:`basis-1/6 border-2 rounded-xl ${dt==="어깨"?"bg-teal-700 text-white":""}`,buttonName:"어깨",onClick:wt}),jsxRuntimeExports.jsx(Button,{btnCss:`basis-1/6 border-2 rounded-xl ${dt==="팔"?"bg-teal-700 text-white":""}`,buttonName:"팔",onClick:wt})]})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2 mx-4 mb-32",children:ct.map(It=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",onChange:()=>Et(It.training_id),checked:ft.includes(It.training_id),className:"w-6 ml-4 accent-teal-600"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 py-2 pl-4",children:[jsxRuntimeExports.jsx("img",{src:It.image,alt:"img",className:"w-8 h-8"}),jsxRuntimeExports.jsx("p",{children:It.name})]})]}),jsxRuntimeExports.jsx("hr",{})]},It.training_id))}),jsxRuntimeExports.jsx("div",{className:"fixed w-full bg-white bottom-[57px]",children:jsxRuntimeExports.jsx("div",{className:`p-2 m-4 text-center border border-teal-700 rounded-md ${ft.length?"bg-teal-700 text-white":"text-teal-700"}`,children:ft.length?jsxRuntimeExports.jsx(Button,{buttonName:`${ft.length}개의 운동 추가하기`,onClick:()=>{mt==="basic"?Rt():Tt()}}):jsxRuntimeExports.jsx(Button,{buttonName:"운동을 선택하세요",disabled:!0})})})]})},userRoutineState=Recoil_index_8({key:"userRoutineState",default:[]}),RoutineNoData=()=>{const nt=Recoil_index_24(modalState),rt=()=>{nt({type:"routineCreate",data:""})};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-6 mt-48",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-1 text-gray-500",children:[jsxRuntimeExports.jsx("p",{children:"저장된 루틴이 없습니다."}),jsxRuntimeExports.jsx("p",{children:"루틴을 만들어 바로 운동해보세요!"})]}),jsxRuntimeExports.jsx("div",{className:"w-1/2 p-2 font-semibold text-center text-teal-700 border border-teal-700 rounded-full",children:jsxRuntimeExports.jsx("button",{onClick:rt,children:"루틴 만들기"})})]})},RoutineDetailBox=({data:nt,idx:rt})=>{const it=Recoil_index_20(baseUrlState),st=Recoil_index_24(modalState),lt=Recoil_index_24(selectedRoutineState),ct=Recoil_index_24(selectedRoutineInfoState),ut=async()=>{ct(nt),await axios.get(`${it}api/management/routine/detail?routine_id=${nt.routineId}`).then(ft=>{lt(ft.data)}).catch(ft=>{console.log(ft)})},dt=()=>{st({type:"routineDetail",data:""})},ht=()=>{st({type:"routineEditMenu",data:""})};return jsxRuntimeExports.jsxs("div",{className:"flex justify-between",onClick:ut,children:[jsxRuntimeExports.jsx("div",{onClick:dt,children:jsxRuntimeExports.jsx(Description,{Title:nt.title,subTitle:`${rt+1}번 운동 목록`})}),jsxRuntimeExports.jsx(EllipsisVerticalIcon$1,{className:"w-6 h-6 my-auto",onClick:ht})]})};RoutineDetailBox.propTypes={data:PropTypes.object,idx:PropTypes.number};const RoutineList=()=>{const nt=Recoil_index_20(userRoutineState);return jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:nt.map((rt,it)=>jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-gray-200 rounded-lg",children:jsxRuntimeExports.jsx(RoutineDetailBox,{data:rt,idx:it})},rt.routineId))})},MyRoutinePage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),st=useNavigate(),[lt,ct]=Recoil_index_22(userRoutineState),[ut,dt]=Recoil_index_22(modalState),ht=()=>{st(`/diary/training/${it[0]}/${it[1]}/${it[2]}`)},ft=()=>{dt({type:"routineCreate",data:""})},pt=async()=>{await axios.get(`${nt}api/management/routine/${rt.info.userId}`).then(mt=>{ct(mt.data)}).catch(mt=>{console.log(mt)})};return reactExports.useEffect(()=>{pt()},[ut]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"absolute my-4",children:jsxRuntimeExports.jsx(ChevronLeftIcon$1,{className:"w-6 h-6 ml-2",onClick:ht})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"나만의 루틴"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 m-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("p",{children:["전체 ",lt.length,"개"]}),jsxRuntimeExports.jsx("button",{onClick:ft,children:jsxRuntimeExports.jsx(PlusIcon$1,{className:"w-6 h-6"})})]}),lt.length?jsxRuntimeExports.jsx(RoutineList,{}):jsxRuntimeExports.jsx(RoutineNoData,{})]})]})},EditRoutineSetBox=({set:nt,setIdx:rt})=>{const it=Recoil_index_20(baseUrlState),st=Recoil_index_24(selectedRoutineState),lt=Recoil_index_20(selectedRoutineInfoState),[ct,ut]=reactExports.useState(nt.kg),[dt,ht]=reactExports.useState(nt.count),[ft,pt]=reactExports.useState(!0),mt=St=>{ut(St.target.value)},gt=St=>{ht(St.target.value)},xt=async St=>{St.preventDefault(),await axios.put(`${it}api/management/routine/set`,{routineTrainingListId:nt.routineTrainingListId,kg:ct,count:nt.count}).then(wt=>{console.log("kg 수정 성공"),pt(!ft)}).catch(wt=>{console.log(wt)})},yt=async St=>{St.preventDefault(),await axios.put(`${it}api/management/routine/set`,{routineTrainingListId:nt.routineTrainingListId,kg:nt.kg,count:dt}).then(wt=>{console.log("count 수정 성공"),pt(!ft)}).catch(wt=>{console.log(wt)})},vt=async()=>{await axios.get(`${it}api/management/routine/detail?routine_id=${lt.routineId}`).then(St=>{st(St.data)}).catch(St=>{console.log(St)})};return reactExports.useEffect(()=>{vt()},[ft]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("td",{children:rt+1}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("form",{onSubmit:xt,onBlur:xt,children:jsxRuntimeExports.jsx("input",{className:"w-16 mx-2 text-center border",value:ct,onChange:mt})})}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("form",{onSubmit:yt,onBlur:yt,children:jsxRuntimeExports.jsx("input",{className:"w-16 mx-2 text-center border",value:dt,onChange:gt})})})]})};EditRoutineSetBox.propTypes={set:PropTypes.object,setIdx:PropTypes.number};const EditRoutineDetailBox=({data:nt,idx:rt})=>{const it=Recoil_index_20(baseUrlState),st=Recoil_index_24(selectedRoutineState),lt=Recoil_index_20(selectedRoutineInfoState),[ct,ut]=reactExports.useState(!0),dt=()=>nt.sets.reduce((gt,xt)=>gt+xt.count*xt.kg,0),ht=async()=>{await axios.delete(`${it}api/management/routine/delete?routine_id=${nt.routineId}&training_id=${nt.trainingId}`).then(gt=>{console.log("루틴 내 운동 삭제 성공"),ut(!ct)}).catch(gt=>{console.log(gt)})},ft=async()=>{await axios.delete(`${it}api/management/routine/set/${nt.routineTrainingListId}`).then(gt=>{console.log("루틴 내 운동 세트 삭제"),ut(!ct)}).catch(gt=>{console.log(gt)})},pt=async()=>{await axios.post(`${it}api/management/routine/set`,{routineId:nt.routineId,trainingId:nt.trainingId}).then(gt=>{console.log("루틴 내 운동 세트 추가"),ut(!ct)}).catch(gt=>{console.log(gt)})},mt=async()=>{await axios.get(`${it}api/management/routine/detail?routine_id=${lt.routineId}`).then(gt=>{st(gt.data)}).catch(gt=>{console.log(gt)})};return reactExports.useEffect(()=>{mt()},[ct]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-teal-700",children:rt+1})," ",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("span",{className:"ps-1 pe-2",children:nt.category}),"|",jsxRuntimeExports.jsx("span",{className:"px-2",children:nt.name})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center",onClick:()=>ht(),children:jsxRuntimeExports.jsx(BsFillTrash3Fill,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("hr",{className:"my-2"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mx-2 my-1 text-sm font-semibold",children:[jsxRuntimeExports.jsx("p",{children:"총 볼륨 "}),jsxRuntimeExports.jsxs("p",{children:[dt(),"kg"]})]}),jsxRuntimeExports.jsx("hr",{className:"my-2"}),jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"text-gray-400 ",children:[jsxRuntimeExports.jsx("th",{children:"세트"}),jsxRuntimeExports.jsx("th",{children:"kg"}),jsxRuntimeExports.jsx("th",{children:"회"})]})}),jsxRuntimeExports.jsx("tbody",{children:nt.sets.map((gt,xt)=>jsxRuntimeExports.jsx("tr",{className:"text-center",children:jsxRuntimeExports.jsx(EditRoutineSetBox,{set:gt,setIdx:xt})},xt))})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 pt-4 pb-2 text-center divide-x-2",children:[jsxRuntimeExports.jsxs("button",{className:"flex justify-center gap-2",onClick:()=>ft(),children:[jsxRuntimeExports.jsx(MinusIcon$1,{className:"w-6 h-6"}),"세트 삭제"]}),jsxRuntimeExports.jsxs("button",{className:"flex justify-center gap-2 text-teal-700",onClick:()=>pt(),children:[jsxRuntimeExports.jsx(PlusIcon$1,{className:"w-6 h-6"}),"세트 추가"]})]})]})};EditRoutineDetailBox.propTypes={data:PropTypes.object,idx:PropTypes.number};const RoutineEditPage=()=>{const nt=Recoil_index_20(baseUrlState),[rt,it]=Recoil_index_22(selectedRoutineState),st=Recoil_index_20(selectedRoutineInfoState),[lt,ct]=Recoil_index_22(selectedRoutineTrainingState),[ut,dt]=reactExports.useState(st.title),ht=xt=>{dt(xt.target.value)},ft=async()=>{await axios.get(`${nt}api/management/routine/detail?routine_id=${st.routineId}`).then(xt=>{it(xt.data)}).catch(xt=>{console.log(xt)})},pt=async()=>{await axios.patch(`${nt}api/management/routine/update/${st.routineId}?title=${ut}`).then(xt=>{}).catch(xt=>{console.log(xt)})},mt=async()=>{lt.length&&await axios.post(`${nt}api/management/routine?routine_id=${st.routineId}`,lt).then(xt=>{ct([])}).catch(xt=>{console.log(xt)})},gt=()=>{st.title!==ut&&pt()};return reactExports.useEffect(()=>{mt()},[]),reactExports.useEffect(()=>{ft()},[lt]),jsxRuntimeExports.jsxs("div",{className:"bg-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsx(Link,{to:"/diary/training/myroutine",children:jsxRuntimeExports.jsx("div",{className:"absolute right-0",children:jsxRuntimeExports.jsx(XMarkIcon$1,{className:"w-6 h-6 my-4 mr-2"})})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"루틴 편집"}),jsxRuntimeExports.jsx("div",{className:"m-4",children:jsxRuntimeExports.jsx(Input,{value:ut,onChange:ht})}),jsxRuntimeExports.jsx("hr",{className:"mt-4"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 pt-4 pb-32 mx-4",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-x-0 bg-gray-100 h-2/3 -z-10"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:rt.routine_training_list.map((xt,yt)=>jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-white rounded-lg",children:jsxRuntimeExports.jsx(EditRoutineDetailBox,{data:xt,idx:yt})},yt))}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 pt-2 mb-4 text-center divide-x-4",children:[jsxRuntimeExports.jsx(Link,{to:"/diary/training/choice/routine",children:"운동추가"}),jsxRuntimeExports.jsx(Link,{to:"/diary/training/load/routine",children:"불러오기"})]})]}),jsxRuntimeExports.jsx("div",{className:"fixed w-full bg-white bottom-[57px]",children:jsxRuntimeExports.jsx("div",{className:"p-2 m-4 text-center text-white bg-teal-700 rounded-md",children:jsxRuntimeExports.jsx(Link,{to:"/diary/training/myroutine",children:jsxRuntimeExports.jsx(Button,{buttonName:"루틴으로 저장하기",onClick:()=>gt()})})})})]})},ChallengeRegistrationPage=()=>{const[nt,rt]=reactExports.useState(""),[it,st]=reactExports.useState(""),[lt,ct]=reactExports.useState(""),ut=new Date().toISOString().slice(0,10),[dt,ht]=reactExports.useState(`${ut}T00:00`),[ft,pt]=reactExports.useState(`${ut}T00:00`),mt=Recoil_index_20(baseUrlState),gt=Recoil_index_20(userState),xt="ap-northeast-2",yt="3dbody-image";let vt="";const[St,wt]=reactExports.useState({}),[Et,Rt]=reactExports.useState(""),[Tt,It]=reactExports.useState({}),[At,Dt]=reactExports.useState(""),jt=new S3Client({region:xt,credentials:{accessKeyId:"AKIAQ3EGP36XU5CEUPOS",secretAccessKey:"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"}}),Ft=Ht=>{wt(Ht.currentTarget.files[0]),Rt(`${uuid$1()}_${Ht.currentTarget.files[0].name}`)},Lt=Ht=>{It(Ht.currentTarget.files[0]),Dt(`${uuid$1()}_${Ht.currentTarget.files[0].name}`)},Mt=Ht=>{rt(Ht.currentTarget.value)},Ot=Ht=>{st(Ht.currentTarget.value)},Nt=Ht=>{ct(Ht.currentTarget.value)},$t=Ht=>{ht(Ht.currentTarget.value)},Vt=Ht=>{Ht.currentTarget.value<dt?alert("종료일이 시작일보다 빠릅니다."):pt(Ht.currentTarget.value)},Ut=async Ht=>{Ht.preventDefault(),await axios.post(`${mt}api/challenge`,{thumbnail:`https://do9nz79ez57wg.cloudfront.net/${Et}`,image:`https://do9nz79ez57wg.cloudfront.net/${At}`,title:nt,summary:it,content:lt,start_date:dt,end_date:ft,user_id:gt.info.userId}).then(()=>{window.location.replace("/challenge")})},zt=async Ht=>{Ht.preventDefault(),Et.includes("jpg")||Et.includes("jpeg")?vt="image/jpeg":Et.includes("png")?vt="image/png":Et.includes("gif")&&(vt="image/gif");const Gt={Bucket:yt,Key:Et,Body:St,ContentType:vt};jt.send(new PutObjectCommand(Gt)).then(()=>{alert("등록되었습니다.")})},Bt=async Ht=>{Ht.preventDefault(),At.includes("jpg")||At.includes("jpeg")?vt="image/jpeg":At.includes("png")?vt="image/png":At.includes("gif")&&(vt="image/gif");const Gt={Bucket:yt,Key:At,Body:Tt,ContentType:vt};jt.send(new PutObjectCommand(Gt)).then(()=>{alert("등록되었습니다.")})};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute flex justify-between w-full",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"챌린지 등록"}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"pt-4",children:[jsxRuntimeExports.jsxs("form",{onSubmit:zt,className:"flex items-center mx-4 mt-2 text-center",children:[jsxRuntimeExports.jsxs("label",{className:"relative w-full p-2 overflow-hidden text-left bg-white border rounded-md",children:[St.name?jsxRuntimeExports.jsx("span",{className:"text-black",children:St.name}):jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"썸네일을 선택해주세요."}),jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",onChange:Ft})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"h-10 text-white bg-teal-700 border rounded-lg w-14",children:"등록"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Bt,className:"flex items-center mx-4 mt-1 text-center",children:[jsxRuntimeExports.jsxs("label",{className:"relative w-full p-2 overflow-hidden text-left bg-white border rounded-md",children:[Tt.name?jsxRuntimeExports.jsx("span",{className:"text-black",children:Tt.name}):jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"포스터를 선택해주세요."}),jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",onChange:Lt})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"h-10 text-white bg-teal-700 border rounded-lg w-14",children:"등록"})]})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Ut,children:[jsxRuntimeExports.jsx("div",{className:"pt-4 mx-4",children:jsxRuntimeExports.jsx("input",{type:"text",value:nt,onChange:Mt,className:"p-2 border-2 rounded-md",placeholder:"제목"})}),jsxRuntimeExports.jsx("div",{className:"mx-4 my-2",children:jsxRuntimeExports.jsx("input",{type:"text",value:it,onChange:Ot,className:"p-2 border-2 rounded-md",placeholder:"한줄 설명"})}),jsxRuntimeExports.jsx("div",{className:"mx-4",children:jsxRuntimeExports.jsx("textarea",{value:lt,onChange:Nt,className:"w-full h-40 p-2 border-2 rounded-md",placeholder:"내용을 입력하세요."})}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("div",{className:"mx-4 my-2",children:[jsxRuntimeExports.jsx("label",{children:"시작일"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",value:dt,onChange:$t,className:"p-2 border-2 rounded-md"})]}),jsxRuntimeExports.jsxs("div",{className:"mx-4 my-2",children:[jsxRuntimeExports.jsx("label",{children:"종료일"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",value:ft,onChange:Vt,className:"p-2 border-2 rounded-md"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("button",{className:"w-10/12 p-2 mt-3 mb-4 text-center text-white bg-teal-700 border-2 border-teal-700 rounded-full",children:"등록하기"})})]})]})]})},ChallengeUpdatePage=()=>{const{challengeId:nt}=useParams(),it=useLocation().state.value,[st,lt]=reactExports.useState(`${it.title}`),[ct,ut]=reactExports.useState(`${it.summary}`),[dt,ht]=reactExports.useState(`${it.content}`),[ft,pt]=reactExports.useState(`${it.start_date}`),[mt,gt]=reactExports.useState(`${it.end_date}`),xt=Recoil_index_20(baseUrlState),yt=Recoil_index_20(userState),vt="ap-northeast-2",St="3dbody-image";let wt="";const[Et,Rt]=reactExports.useState({}),[Tt,It]=reactExports.useState(""),[At,Dt]=reactExports.useState({}),[jt,Ft]=reactExports.useState(""),Lt=new S3Client({region:vt,credentials:{accessKeyId:"AKIAQ3EGP36XU5CEUPOS",secretAccessKey:"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"}}),Mt=Xt=>{Rt(Xt.currentTarget.files[0]),It(`${uuid$1()}_${Xt.currentTarget.files[0].name}`)},Ot=Xt=>{Dt(Xt.currentTarget.files[0]),Ft(`${uuid$1()}_${Xt.currentTarget.files[0].name}`)},Nt=Xt=>{lt(Xt.currentTarget.value)},$t=Xt=>{ut(Xt.currentTarget.value)},Vt=Xt=>{ht(Xt.currentTarget.value)},Ut=Xt=>{Xt.currentTarget.value>mt?alert("종료일이 시작일보다 빠릅니다."):pt(Xt.currentTarget.value)},zt=Xt=>{Xt.currentTarget.value<ft?alert("종료일이 시작일보다 빠릅니다."):gt(Xt.currentTarget.value)},Bt=async Xt=>{Xt.preventDefault(),await axios.put(`${xt}api/challenge/${nt}`,{thumbnail:`https://do9nz79ez57wg.cloudfront.net/${Tt}`,image:`https://do9nz79ez57wg.cloudfront.net/${jt}`,title:st,summary:ct,content:dt,start_date:ft,end_date:mt,user_id:yt.info.userId}).then(()=>{window.location.replace("/challenge")})},Ht=async Xt=>{Xt.preventDefault(),Tt.includes("jpg")||Tt.includes("jpeg")?wt="image/jpeg":Tt.includes("png")?wt="image/png":Tt.includes("gif")&&(wt="image/gif");const Zt={Bucket:St,Key:Tt,Body:Et,ContentType:wt};Lt.send(new PutObjectCommand(Zt)).then(()=>{alert("등록되었습니다.")})},Gt=async Xt=>{Xt.preventDefault(),jt.includes("jpg")||jt.includes("jpeg")?wt="image/jpeg":jt.includes("png")?wt="image/png":jt.includes("gif")&&(wt="image/gif");const Zt={Bucket:St,Key:jt,Body:At,ContentType:wt};Lt.send(new PutObjectCommand(Zt)).then(()=>{alert("등록되었습니다.")})};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute flex justify-between w-full",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"챌린지 수정"}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"pt-4",children:[jsxRuntimeExports.jsxs("form",{onSubmit:Ht,className:"flex items-center mx-4 mt-2 text-center",children:[jsxRuntimeExports.jsxs("label",{className:"relative w-full p-2 overflow-hidden text-left bg-white border rounded-md",children:[Et.name?jsxRuntimeExports.jsx("span",{className:"text-black",children:Et.name}):jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"썸네일을 선택해주세요."}),jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",onChange:Mt})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"h-10 text-white bg-teal-700 border rounded-lg w-14",children:"등록"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Gt,className:"flex items-center mx-4 mt-1 text-center",children:[jsxRuntimeExports.jsxs("label",{className:"relative w-full p-2 overflow-hidden text-left bg-white border rounded-md",children:[At.name?jsxRuntimeExports.jsx("span",{className:"text-black",children:At.name}):jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"포스터를 선택해주세요."}),jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",onChange:Ot})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"h-10 text-white bg-teal-700 border rounded-lg w-14",children:"등록"})]})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Bt,children:[jsxRuntimeExports.jsx("div",{className:"pt-4 mx-4",children:jsxRuntimeExports.jsx("input",{type:"text",value:st,onChange:Nt,className:"p-2 border-2 rounded-md",placeholder:"제목"})}),jsxRuntimeExports.jsx("div",{className:"mx-4 my-2",children:jsxRuntimeExports.jsx("input",{type:"text",value:ct,onChange:$t,className:"p-2 border-2 rounded-md",placeholder:"한줄 설명"})}),jsxRuntimeExports.jsx("div",{className:"mx-4",children:jsxRuntimeExports.jsx("textarea",{value:dt,onChange:Vt,className:"w-full h-40 p-2 border-2 rounded-md",placeholder:"내용을 입력하세요."})}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("div",{className:"mx-4 my-2",children:[jsxRuntimeExports.jsx("label",{children:"시작일"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",value:ft,onChange:Ut,className:"p-2 border-2 rounded-md"})]}),jsxRuntimeExports.jsxs("div",{className:"mx-4 my-2",children:[jsxRuntimeExports.jsx("label",{children:"종료일"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",value:mt,onChange:zt,className:"p-2 border-2 rounded-md"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("button",{className:"w-10/12 p-2 mt-3 mb-4 text-center text-white bg-teal-700 border-2 border-teal-700 rounded-full",children:"등록하기"})})]})]})]})};var events$1={exports:{}},R$1=typeof Reflect=="object"?Reflect:null,ReflectApply=R$1&&typeof R$1.apply=="function"?R$1.apply:function(rt,it,st){return Function.prototype.apply.call(rt,it,st)},ReflectOwnKeys;R$1&&typeof R$1.ownKeys=="function"?ReflectOwnKeys=R$1.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(rt){return Object.getOwnPropertyNames(rt).concat(Object.getOwnPropertySymbols(rt))}:ReflectOwnKeys=function(rt){return Object.getOwnPropertyNames(rt)};function ProcessEmitWarning(nt){console&&console.warn&&console.warn(nt)}var NumberIsNaN=Number.isNaN||function(rt){return rt!==rt};function EventEmitter(){EventEmitter.init.call(this)}events$1.exports=EventEmitter;events$1.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(nt){if(typeof nt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof nt)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(nt){if(typeof nt!="number"||nt<0||NumberIsNaN(nt))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+nt+".");defaultMaxListeners=nt}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(rt){if(typeof rt!="number"||rt<0||NumberIsNaN(rt))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+rt+".");return this._maxListeners=rt,this};function _getMaxListeners(nt){return nt._maxListeners===void 0?EventEmitter.defaultMaxListeners:nt._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function(rt){for(var it=[],st=1;st<arguments.length;st++)it.push(arguments[st]);var lt=rt==="error",ct=this._events;if(ct!==void 0)lt=lt&&ct.error===void 0;else if(!lt)return!1;if(lt){var ut;if(it.length>0&&(ut=it[0]),ut instanceof Error)throw ut;var dt=new Error("Unhandled error."+(ut?" ("+ut.message+")":""));throw dt.context=ut,dt}var ht=ct[rt];if(ht===void 0)return!1;if(typeof ht=="function")ReflectApply(ht,this,it);else for(var ft=ht.length,pt=arrayClone(ht,ft),st=0;st<ft;++st)ReflectApply(pt[st],this,it);return!0};function _addListener(nt,rt,it,st){var lt,ct,ut;if(checkListener(it),ct=nt._events,ct===void 0?(ct=nt._events=Object.create(null),nt._eventsCount=0):(ct.newListener!==void 0&&(nt.emit("newListener",rt,it.listener?it.listener:it),ct=nt._events),ut=ct[rt]),ut===void 0)ut=ct[rt]=it,++nt._eventsCount;else if(typeof ut=="function"?ut=ct[rt]=st?[it,ut]:[ut,it]:st?ut.unshift(it):ut.push(it),lt=_getMaxListeners(nt),lt>0&&ut.length>lt&&!ut.warned){ut.warned=!0;var dt=new Error("Possible EventEmitter memory leak detected. "+ut.length+" "+String(rt)+" listeners added. Use emitter.setMaxListeners() to increase limit");dt.name="MaxListenersExceededWarning",dt.emitter=nt,dt.type=rt,dt.count=ut.length,ProcessEmitWarning(dt)}return nt}EventEmitter.prototype.addListener=function(rt,it){return _addListener(this,rt,it,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(rt,it){return _addListener(this,rt,it,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(nt,rt,it){var st={fired:!1,wrapFn:void 0,target:nt,type:rt,listener:it},lt=onceWrapper.bind(st);return lt.listener=it,st.wrapFn=lt,lt}EventEmitter.prototype.once=function(rt,it){return checkListener(it),this.on(rt,_onceWrap(this,rt,it)),this};EventEmitter.prototype.prependOnceListener=function(rt,it){return checkListener(it),this.prependListener(rt,_onceWrap(this,rt,it)),this};EventEmitter.prototype.removeListener=function(rt,it){var st,lt,ct,ut,dt;if(checkListener(it),lt=this._events,lt===void 0)return this;if(st=lt[rt],st===void 0)return this;if(st===it||st.listener===it)--this._eventsCount===0?this._events=Object.create(null):(delete lt[rt],lt.removeListener&&this.emit("removeListener",rt,st.listener||it));else if(typeof st!="function"){for(ct=-1,ut=st.length-1;ut>=0;ut--)if(st[ut]===it||st[ut].listener===it){dt=st[ut].listener,ct=ut;break}if(ct<0)return this;ct===0?st.shift():spliceOne(st,ct),st.length===1&&(lt[rt]=st[0]),lt.removeListener!==void 0&&this.emit("removeListener",rt,dt||it)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function(rt){var it,st,lt;if(st=this._events,st===void 0)return this;if(st.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):st[rt]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete st[rt]),this;if(arguments.length===0){var ct=Object.keys(st),ut;for(lt=0;lt<ct.length;++lt)ut=ct[lt],ut!=="removeListener"&&this.removeAllListeners(ut);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(it=st[rt],typeof it=="function")this.removeListener(rt,it);else if(it!==void 0)for(lt=it.length-1;lt>=0;lt--)this.removeListener(rt,it[lt]);return this};function _listeners(nt,rt,it){var st=nt._events;if(st===void 0)return[];var lt=st[rt];return lt===void 0?[]:typeof lt=="function"?it?[lt.listener||lt]:[lt]:it?unwrapListeners(lt):arrayClone(lt,lt.length)}EventEmitter.prototype.listeners=function(rt){return _listeners(this,rt,!0)};EventEmitter.prototype.rawListeners=function(rt){return _listeners(this,rt,!1)};EventEmitter.listenerCount=function(nt,rt){return typeof nt.listenerCount=="function"?nt.listenerCount(rt):listenerCount.call(nt,rt)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(nt){var rt=this._events;if(rt!==void 0){var it=rt[nt];if(typeof it=="function")return 1;if(it!==void 0)return it.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(nt,rt){for(var it=new Array(rt),st=0;st<rt;++st)it[st]=nt[st];return it}function spliceOne(nt,rt){for(;rt+1<nt.length;rt++)nt[rt]=nt[rt+1];nt.pop()}function unwrapListeners(nt){for(var rt=new Array(nt.length),it=0;it<rt.length;++it)rt[it]=nt[it].listener||nt[it];return rt}function once(nt,rt){return new Promise(function(it,st){function lt(ut){nt.removeListener(rt,ct),st(ut)}function ct(){typeof nt.removeListener=="function"&&nt.removeListener("error",lt),it([].slice.call(arguments))}eventTargetAgnosticAddListener(nt,rt,ct,{once:!0}),rt!=="error"&&addErrorHandlerIfEventEmitter(nt,lt,{once:!0})})}function addErrorHandlerIfEventEmitter(nt,rt,it){typeof nt.on=="function"&&eventTargetAgnosticAddListener(nt,"error",rt,it)}function eventTargetAgnosticAddListener(nt,rt,it,st){if(typeof nt.on=="function")st.once?nt.once(rt,it):nt.on(rt,it);else if(typeof nt.addEventListener=="function")nt.addEventListener(rt,function lt(ct){st.once&&nt.removeEventListener(rt,lt),it(ct)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof nt)}var eventsExports=events$1.exports;const EventEmitter$1=getDefaultExportFromCjs(eventsExports);var videosdk={exports:{}};(function(nt,rt){var it={};/*! For license information please see videosdk.js.LICENSE.txt */(function(st,lt){nt.exports=lt()})(self,()=>(()=>{var st={4180:ut=>{ut.exports=(()=>{var dt={43:function(mt,gt,xt){var yt,vt;(function(St,wt){yt=function(){var Et=function(){},Rt="undefined",Tt=typeof window!==Rt&&typeof window.navigator!==Rt&&/Trident\/|MSIE /.test(window.navigator.userAgent),It=["trace","debug","info","warn","error"];function At(Ut,zt){var Bt=Ut[zt];if(typeof Bt.bind=="function")return Bt.bind(Ut);try{return Function.prototype.bind.call(Bt,Ut)}catch{return function(){return Function.prototype.apply.apply(Bt,[Ut,arguments])}}}function Dt(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function jt(Ut){return Ut==="debug"&&(Ut="log"),typeof console!==Rt&&(Ut==="trace"&&Tt?Dt:console[Ut]!==void 0?At(console,Ut):console.log!==void 0?At(console,"log"):Et)}function Ft(Ut,zt){for(var Bt=0;Bt<It.length;Bt++){var Ht=It[Bt];this[Ht]=Bt<Ut?Et:this.methodFactory(Ht,Ut,zt)}this.log=this.debug}function Lt(Ut,zt,Bt){return function(){typeof console!==Rt&&(Ft.call(this,zt,Bt),this[Ut].apply(this,arguments))}}function Mt(Ut,zt,Bt){return jt(Ut)||Lt.apply(this,arguments)}function Ot(Ut,zt,Bt){var Ht,Gt=this,Xt="loglevel";function Zt(){var nr;if(typeof window!==Rt&&Xt){try{nr=window.localStorage[Xt]}catch{}if(typeof nr===Rt)try{var ir=window.document.cookie,yr=ir.indexOf(encodeURIComponent(Xt)+"=");yr!==-1&&(nr=/^([^;]+)/.exec(ir.slice(yr))[1])}catch{}return Gt.levels[nr]===void 0&&(nr=void 0),nr}}typeof Ut=="string"?Xt+=":"+Ut:typeof Ut=="symbol"&&(Xt=void 0),Gt.name=Ut,Gt.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Gt.methodFactory=Bt||Mt,Gt.getLevel=function(){return Ht},Gt.setLevel=function(nr,ir){if(typeof nr=="string"&&Gt.levels[nr.toUpperCase()]!==void 0&&(nr=Gt.levels[nr.toUpperCase()]),!(typeof nr=="number"&&nr>=0&&nr<=Gt.levels.SILENT))throw"log.setLevel() called with invalid level: "+nr;if(Ht=nr,ir!==!1&&function(yr){var Cr=(It[yr]||"silent").toUpperCase();if(typeof window!==Rt&&Xt){try{return void(window.localStorage[Xt]=Cr)}catch{}try{window.document.cookie=encodeURIComponent(Xt)+"="+Cr+";"}catch{}}}(nr),Ft.call(Gt,nr,Ut),typeof console===Rt&&nr<Gt.levels.SILENT)return"No console available for logging"},Gt.setDefaultLevel=function(nr){Zt()||Gt.setLevel(nr,!1)},Gt.enableAll=function(nr){Gt.setLevel(Gt.levels.TRACE,nr)},Gt.disableAll=function(nr){Gt.setLevel(Gt.levels.SILENT,nr)};var hr=Zt();hr==null&&(hr=zt??"WARN"),Gt.setLevel(hr,!1)}var Nt=new Ot,$t={};Nt.getLogger=function(Ut){if(typeof Ut!="symbol"&&typeof Ut!="string"||Ut==="")throw new TypeError("You must supply a name when creating a logger.");var zt=$t[Ut];return zt||(zt=$t[Ut]=new Ot(Ut,Nt.getLevel(),Nt.methodFactory)),zt};var Vt=typeof window!==Rt?window.log:void 0;return Nt.noConflict=function(){return typeof window!==Rt&&window.log===Nt&&(window.log=Vt),Nt},Nt.getLoggers=function(){return $t},Nt.default=Nt,Nt},(vt=yt.call(gt,xt,gt,mt))===void 0||(mt.exports=vt)})()}},ht={};function ft(mt){var gt=ht[mt];if(gt!==void 0)return gt.exports;var xt=ht[mt]={exports:{}};return dt[mt].call(xt.exports,xt,xt.exports,ft),xt.exports}ft.d=(mt,gt)=>{for(var xt in gt)ft.o(gt,xt)&&!ft.o(mt,xt)&&Object.defineProperty(mt,xt,{enumerable:!0,get:gt[xt]})},ft.o=(mt,gt)=>Object.prototype.hasOwnProperty.call(mt,gt),ft.r=mt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(mt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(mt,"__esModule",{value:!0})};var pt={};return(()=>{ft.r(pt),ft.d(pt,{VideoSDKMetrics:()=>Xn});const mt="inbound",gt="outbound",xt={codec_id_in:"",codec_in:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_in:0,delta_rtt_ms_out:null,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,timestamp_in:null,ssrc:"",total_concealment_events:0,delta_concealment_events:0,total_inserted_samples_for_decelaration:0,delta_inserted_samples_for_decelaration:0,total_removed_samples_for_accelaration:0,delta_removed_samples_for_accelaration:0,direction:mt},yt={codec_id_out:"",codec_out:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,timestamp_out:null,ssrc:"",direction:gt},vt={codec_id_in:"",size_in:{width:null,height:null,framerate:null},codec_in:{mime_type:null,clock_rate:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,ssrc:"",direction:mt},St={codec_id_out:"",size_out:{width:null,height:null,framerate:null},codec_out:{mime_type:null,clock_rate:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,limitation_out:{reason:null,durations:null,resolutionChanges:0},timestamp_out:null,ssrc:"",direction:gt},wt="inbound-rtp",Et="bytesReceived",Rt="bytesSent",Tt="currentRoundTripTime",It="roundTripTime",At="fractionLost",Dt="frameHeight",jt="frameWidth",Ft="qualityLimitationReason",Lt="qualityLimitationDurations",Mt="qualityLimitationResolutionChanges",Ot="jitter",Nt="packetsLost",$t="packetsReceived",Vt="packetsSent",Ut="responsesReceived",zt="selected",Bt="totalRoundTripTime",Ht="roundTripTimeMeasurements",Gt="framesDecoded",Xt="framesEncoded",Zt="totalDecodeTime",hr="totalEncodeTime",nr="pliCount",ir="nackCount",yr="audio",Cr="video",Sr={0:"ETHERNET",2:"CELLULAR_5G",3:"WIFI",5:"CELLULAR_4G",10:"CELLULAR"},xr="audio",gr="video",_r="network",fr="data";var Nr=ft(43);const Tr=()=>`${new Date().toISOString()} | metrics`,Hr=(Yr,Qr,Mn)=>`${Yr} | ${Qr} | ${Mn}`;Nr.setDefaultLevel(Nr.levels.TRACE);const Vr=(Yr,Qr,Mn)=>{Mn?Nr.debug(Hr(Tr(),Yr,Qr),Mn):Nr.debug(Hr(Tr(),Yr,Qr))},mn=(Yr,Qr)=>{Nr.warn(Hr(Tr(),Yr,Qr))},tn=(Yr,Qr)=>{Nr.error(Hr(Tr(),Yr,Qr))},er="extractor   ",tr=(Yr,Qr,Mn)=>{if(!Qr)return null;const Ar={};let or=Qr.audio[Yr];or||(or=Mn===mt?{...xt}:{...yt}),Ar.audio=or;let Wr=Qr.video[Yr];return Wr||(Wr=Mn===mt?{...vt}:{...St}),Ar.video=Wr,Ar},vr=(Yr,Qr,Mn,Ar)=>{let or=!1;const Wr=Ar[Qr].total_rtt_ms_out,Ir=Ar[Qr].total_rtt_measure_out,dn=Mn?Mn[Qr].total_rtt_ms_out:0,kn=Mn?Mn[Qr].total_rtt_measure_out:0,Mr={rtt:null,totalRTT:Wr,totalRTTMeasurements:Ir};if(Yr.timestamp===Ar[Qr].timestamp_out||!Object.prototype.hasOwnProperty.call(Yr,It)||Object.prototype.hasOwnProperty.call(Yr,Ht)&&(or=!0,Number(Yr.roundTripTimeMeasurements)===0||Number(Yr.roundTripTimeMeasurements)-kn===Ir))return Mr;const vn=1e3*Number(Yr.roundTripTime);let kr=Wr+vn,Er=Ir+1;return or&&(kr=1e3*Number(Yr.totalRoundTripTime)-dn,Er=Number(Yr.roundTripTimeMeasurements)-kn),{rtt:vn,totalRTT:kr,totalRTTMeasurements:Er}},Fr=(Yr,Qr,Mn)=>Yr.timestamp===Mn[Qr].timestamp_out?null:Object.prototype.hasOwnProperty.call(Yr,Ot)?1e3*(Number(Yr.jitter)||0):null,Kr=(Yr,Qr,Mn,Ar)=>{if(!Object.prototype.hasOwnProperty.call(Yr,Vt)||!Object.prototype.hasOwnProperty.call(Yr,Rt))return{packetsSent:Mn[Qr].total_packets_out,packetsLost:Mn[Qr].total_packets_lost_out,bytesSent:Mn[Qr].total_KBytes_out};const or=Number(Yr.packetsSent)||0-(Ar?Ar[Qr].total_packets_out:0),Wr=or-Mn[Qr].total_packets_out,Ir=Number(Yr.bytesSent)/1024-(Ar?Ar[Qr].total_KBytes_out:0),dn=Ir-Mn[Qr].total_KBytes_out,kn=Yr.timestamp||Date.now(),Mr=Ar?Ar.timestamp:null;let vn=Mn.timestamp;!vn&&Mr&&(vn=Mr);const kr=vn?kn-vn:0;return{packetsSent:or,deltaPacketsSent:Wr,KBytesSent:Ir,deltaKBytesSent:dn,kbsSent:kr>0?.008*dn*1024/kr*1e3:0}},qr=(Yr,Qr,Mn,Ar)=>{let or=Mn[Qr].total_packets_lost_out,Wr=0,Ir=0;return Object.prototype.hasOwnProperty.call(Yr,Nt)&&(or=Number(Yr.packetsLost)||0-(Ar?Ar[Qr].total_packets_lost_out:0),Wr=or-Mn[Qr].total_packets_lost_out),Object.prototype.hasOwnProperty.call(Yr,At)&&(Ir=Number(100*Yr.fractionLost)),{packetsLost:or,deltaPacketsLost:Wr,fractionLost:Ir}},pn=(Yr,Qr,Mn,Ar)=>{if(!Object.prototype.hasOwnProperty.call(Yr,$t)||!Object.prototype.hasOwnProperty.call(Yr,Nt)||!Object.prototype.hasOwnProperty.call(Yr,Et))return{percent_packets_lost:Mn[Qr].percent_packets_lost_in,packetsReceived:Mn[Qr].total_packets_in,packetsLost:Mn[Qr].total_packets_lost_in,bytesReceived:Mn[Qr].total_KBytes_in};const or=(Number(Yr.packetsReceived)||0)-(Ar?Ar[Qr].total_packets_in:0),Wr=(Number(Yr.packetsLost)||0)-(Ar?Ar[Qr].total_packets_lost_in:0),Ir=Wr-Mn[Qr].total_packets_lost_in,dn=or-Mn[Qr].total_packets_in,kn=or!==Mn[Qr].total_packets_in?100*Ir/(Ir+dn):0,Mr=Number(Yr.bytesReceived)/1024-(Ar?Ar[Qr].total_KBytes_in:0),vn=Mr-Mn[Qr].total_KBytes_in,kr=Yr.timestamp||Date.now(),Er=Ar?Ar.timestamp:null;let Ur=Mn.timestamp;!Ur&&Er&&(Ur=Er);const on=Ur?kr-Ur:0;return{percentPacketsLost:kn,packetsReceived:or,deltaPacketsReceived:dn,packetsLost:Wr,deltaPacketsLost:Ir,KBytesReceived:Mr,deltaKBytesReceived:vn,kbsReceived:on>0?.008*vn*1024/on*1e3:0}},En=Yr=>Yr.candidateType!=="relay"?"":Yr.relayProtocol||"",Rn=Yr=>Object.prototype.hasOwnProperty.call(Yr,Dt)&&Object.prototype.hasOwnProperty.call(Yr,jt)?{width:Yr.frameWidth||null,height:Yr.frameHeight||null,framerate:Yr.framesPerSecond}:{width:null,height:null,framerate:null};class Qn{constructor(Qr,Mn){this._callbacks={onStatsCollected:null},this._id=`collector-${Mn}`,this._moduleName=this._id,this._probeId=Mn,this._config=Qr,this._state="idle",this._statsReports=[]}registerCallback(Qr,Mn,Ar){Qr in this._callbacks?(this._callbacks[Qr]={callback:Mn,context:Ar},Vr(this._moduleName,`registered callback '${Qr}'`)):tn(this._moduleName,`can't register callback for '${Qr}' - not found`)}unregisterCallback(Qr){Qr in this._callbacks?(this._callbacks[Qr]=null,delete this._callbacks[Qr],Vr(this._moduleName,`unregistered callback '${Qr}'`)):tn(this._moduleName,`can't unregister callback for '${Qr}' - not found`)}analyze(Qr,Mn){const Ar=(Wr=>{const Ir={name:"",meetingId:"",peerId:"",timestamp:null,count:0,audio:{},video:{},network:{infrastructure:3},data:{delta_kbs_bandwidth_in:0,delta_kbs_bandwidth_out:0,delta_rtt_connectivity_ms:null,total_rtt_connectivity_ms:0}};if(Wr){const dn={...Wr,audio:{},video:{},data:{...Wr.data},network:{...Wr.network}};return Object.keys(Wr.audio).forEach(kn=>{dn.audio[kn]={...Wr.audio[kn]}}),Object.keys(Wr.video).forEach(kn=>{dn.video[kn]={...Wr.video[kn]}}),dn}return{...Ir,audio:{},video:{},data:{...Ir.data},network:{...Ir.network}}})(Mn);Ar.name=this._config.name,Ar.meetingId=this._config.meetingId,Ar.peerId=this._config.peerId,Ar.count=Mn?Mn.count+1:1;let or=null;return Qr.forEach(Wr=>{!or&&Wr.timestamp&&(or=Wr.timestamp),((Ir,dn,kn,Mr)=>{if(!Ir)return[];switch(Ir.type){case"candidate-pair":let vn=!1;if(Ir.nominated&&Ir.state==="succeeded"&&(vn=!0,Vr(er,`analyze() - got stats ${Ir.type} for ${kn}`,Ir),zt in Ir&&!Ir.selected&&(vn=!1)),vn){Ir.localCandidateId,Ir.remoteCandidateId;const Er=((on,fn,Kn)=>{const es=(on.bytesReceived||0)/1024-(Kn?Kn.data.total_KBytes_in:0),Zn=(on.bytesSent||0)/1024-(Kn?Kn.data.total_KBytes_out:0),Dn=on.timestamp||Date.now(),ss=es-fn.data.total_KBytes_in,$s=Zn-fn.data.total_KBytes_out,ws=Kn?Kn.timestamp:null;let As=fn.timestamp;!As&&ws&&(As=ws);const Vs=As?Dn-As:0;return{total_KBytes_received:es,total_KBytes_sent:Zn,delta_KBytes_received:ss,delta_KBytes_sent:$s,kbs_speed_received:Vs>0?.008*ss*1024/Vs*1e3:0,kbs_speed_sent:Vs>0?.008*$s*1024/Vs*1e3:0}})(Ir,dn,Mr),Ur=((on=>{on.availableIncomingBitrate,on.availableOutgoingBitrate})(Ir),((on,fn,Kn,es)=>{if(!Object.prototype.hasOwnProperty.call(on,Tt))return{rtt:null,totalRTT:es.data.total_rtt_connectivity_ms,totalRTTMeasurements:es.data.total_rtt_connectivity_measure};const Zn=1e3*Number(on.currentRoundTripTime);let Dn=es.data.total_rtt_connectivity_ms+Zn,ss=es.data.total_rtt_connectivity_measure+1;return Object.prototype.hasOwnProperty.call(on,Bt)&&(Dn=1e3*Number(on.totalRoundTripTime)-(Kn?Kn.data.total_rtt_connectivity_ms:0)),Object.prototype.hasOwnProperty.call(on,Ut)&&(ss=Number(on.responsesReceived)-(Kn?Kn.data.total_rtt_connectivity_measure:0)),{rtt:Zn,totalRTT:Dn,totalRTTMeasurements:ss}})(Ir,0,Mr,dn));return[{type:fr,value:{total_KBytes_in:Er.total_KBytes_received}},{type:fr,value:{total_KBytes_out:Er.total_KBytes_sent}},{type:fr,value:{delta_KBytes_in:Er.delta_KBytes_received}},{type:fr,value:{delta_KBytes_out:Er.delta_KBytes_sent}},{type:fr,value:{delta_kbs_in:Er.kbs_speed_received}},{type:fr,value:{delta_kbs_out:Er.kbs_speed_sent}},{type:fr,value:{delta_rtt_connectivity_ms:Ur.rtt}}]}break;case"local-candidate":if(Ir.id===dn.network.local_candidate_id)return[{type:_r,value:{infrastructure:Ir.networkType}},{type:_r,value:{local_candidate_protocol:Ir.protocol||""}},{type:_r,value:{local_candidate_relay_protocol:En(Ir)}}];break;case wt:{Vr(er,`analyze() - got stats ${Ir.type} for ${kn}`,Ir);const Er=Ir.ssrc,Ur=tr(Er,dn,mt);Ur&&(Ur.timestamp=dn.timestamp);const on=tr(Er,Mr,mt);if(on&&(on.timestamp=Mr.timestamp),Ir.mediaType===yr){const fn=pn(Ir,yr,Ur,on),Kn=Fr(Ir,yr,Ur),es=Ir.codecId||"",Zn=((Dn,ss,$s,ws)=>{const As=Number(Dn.concealmentEvents)||0,Vs=As-($s.audio.total_concealment_events||0),Fo=Number(Dn.insertedSamplesForDeceleration)||0,Lo=Fo-($s.audio.total_inserted_samples_for_decelaration||0),Ho=Number(Dn.removedSamplesForAcceleration)||0;return{totalConcealmentEvents:As,deltaConcealmentEvents:Vs,totalInsertedSamplesForDecelaration:Fo,deltaInsertedSamplesForDecelaration:Lo,totalRemovedSamplesForAccelaration:Ho,deltaRemovedSampleForAccelaration:Ho-($s.audio.total_removed_samples_for_accelaration||0)}})(Ir,0,Ur);return[{ssrc:Er,type:xr,value:{codec_id_in:es}},{ssrc:Er,type:xr,value:{total_packets_in:fn.packetsReceived}},{ssrc:Er,type:xr,value:{delta_packets_in:fn.deltaPacketsReceived}},{ssrc:Er,type:xr,value:{total_packets_lost_in:fn.packetsLost}},{ssrc:Er,type:xr,value:{delta_packets_lost_in:fn.deltaPacketsLost}},{ssrc:Er,type:xr,value:{percent_packets_lost_in:fn.percentPacketsLost}},{ssrc:Er,type:xr,value:{total_KBytes_in:fn.KBytesReceived}},{ssrc:Er,type:xr,value:{delta_KBytes_in:fn.deltaKBytesReceived}},{ssrc:Er,type:xr,value:{delta_kbs_in:fn.kbsReceived}},{ssrc:Er,type:xr,value:{delta_jitter_ms_in:Kn}},{ssrc:Er,type:xr,value:{total_concealment_events:Zn.totalConcealmentEvents}},{ssrc:Er,type:xr,value:{delta_concealment_events:Zn.deltaConcealmentEvents}},{ssrc:Er,type:xr,value:{total_inserted_samples_for_decelaration:Zn.totalInsertedSamplesForDecelaration}},{ssrc:Er,type:xr,value:{delta_inserted_samples_for_decelaration:Zn.deltaInsertedSamplesForDecelaration}},{ssrc:Er,type:xr,value:{total_removed_samples_for_accelaration:Zn.totalRemovedSamplesForAccelaration}},{ssrc:Er,type:xr,value:{delta_removed_samples_for_accelaration:Zn.deltaRemovedSampleForAccelaration}},{ssrc:Er,type:xr,value:{track_in:Ir.trackId}},{ssrc:Er,type:xr,value:{track_id_in:Ir.trackIdentifier}},{ssrc:Er,type:xr,value:{media_source_id:Ir.mediaSourceId}}]}if(Ir.mediaType===Cr){((Dn,ss)=>{if(!Object.prototype.hasOwnProperty.call(Dn,Gt)||!Object.prototype.hasOwnProperty.call(Dn,Zt))return{delta_ms_decode_frame:ss.video.delta_ms_decode_frame_in,frames_decoded:ss.video.total_frames_decoded_in,total_decode_time:ss.video.total_time_decoded_in};Dn.framesDecoded,Dn.totalDecodeTime,ss.video.total_time_decoded_in,ss.video.total_frames_decoded_in})(Ir,Ur);const fn=pn(Ir,Cr,Ur,on),Kn=Fr(Ir,Cr,Ur),es=(Ir.decoderImplementation,Ir.codecId||null),Zn=Rn(Ir);return((Dn,ss,$s)=>{if(!Object.prototype.hasOwnProperty.call(Dn,nr)||!Object.prototype.hasOwnProperty.call(Dn,ir))return{pliCount:ss.total_pli_sent_in,nackCount:ss.total_nack_sent_in,deltaPliCount:0,deltaNackCount:0};Dn.pliCount,$s&&$s.video.total_pli_sent_in,Dn.nackCount,$s&&$s.video.total_nack_sent_in,ss.video.total_pli_sent_in,ss.video.total_nack_sent_in})(Ir,Ur,on),[{ssrc:Er,type:gr,value:{codec_id_in:es}},{ssrc:Er,type:gr,value:{total_packets_in:fn.packetsReceived}},{ssrc:Er,type:gr,value:{delta_packets_in:fn.deltaPacketsReceived}},{ssrc:Er,type:gr,value:{total_packets_lost_in:fn.packetsLost}},{ssrc:Er,type:gr,value:{delta_packets_lost_in:fn.deltaPacketsLost}},{ssrc:Er,type:gr,value:{percent_packets_lost_in:fn.percentPacketsLost}},{ssrc:Er,type:gr,value:{total_KBytes_in:fn.KBytesReceived}},{ssrc:Er,type:gr,value:{delta_KBytes_in:fn.deltaKBytesReceived}},{ssrc:Er,type:gr,value:{delta_kbs_in:fn.kbsReceived}},{ssrc:Er,type:gr,value:{delta_jitter_ms_in:Kn}},{ssrc:Er,type:gr,value:{size_in:Zn}},{ssrc:Er,type:gr,value:{track_in:Ir.trackId}},{ssrc:Er,type:gr,value:{track_id_in:Ir.trackIdentifier}},{ssrc:Er,type:gr,value:{media_source_id:Ir.mediaSourceId}}]}break}case"outbound-rtp":{Vr(er,`analyze() - got stats ${Ir.type} for ${kn}`,Ir);const Er=Ir.ssrc,Ur=tr(Er,dn,gt);Ur&&(Ur.timestamp=dn.timestamp);const on=tr(Er,Mr,gt);if(on&&(on.timestamp=Mr.timestamp),Ir.mediaType===yr){const fn=Ir.codecId||null,Kn=Kr(Ir,yr,Ur,on);return[{ssrc:Er,type:xr,value:{codec_id_out:fn}},{ssrc:Er,type:xr,value:{total_packets_out:Kn.packetsSent}},{ssrc:Er,type:xr,value:{delta_packets_out:Kn.deltaPacketsSent}},{ssrc:Er,type:xr,value:{total_KBytes_out:Kn.KBytesSent}},{ssrc:Er,type:xr,value:{delta_KBytes_out:Kn.deltaKBytesSent}},{ssrc:Er,type:xr,value:{delta_kbs_out:Kn.kbsSent}},{ssrc:Er,type:xr,value:{track_out:Ir.trackId}},{ssrc:Er,type:xr,value:{track_id_out:Ir.trackIdentifier}},{ssrc:Er,type:xr,value:{media_source_id:Ir.mediaSourceId}}]}if(Ir.mediaType===Cr){Ir.encoderImplementation;const fn=Ir.codecId||null,Kn=(((Dn,ss)=>{if(!Object.prototype.hasOwnProperty.call(Dn,Xt)||!Object.prototype.hasOwnProperty.call(Dn,hr))return{delta_ms_encode_frame:ss.video.delta_ms_encode_frame_out,frames_encoded:ss.video.total_frames_encoded_out,total_encode_time:ss.video.total_time_encoded_out};Dn.framesEncoded,Dn.totalEncodeTime,ss.video.total_time_encoded_out,ss.video.total_frames_encoded_out})(Ir,Ur),Rn(Ir)),es=(Dn=>{const ss=Object.prototype.hasOwnProperty.call(Dn,Ft)?Dn.qualityLimitationReason:null,$s=Object.prototype.hasOwnProperty.call(Dn,Mt)?Dn.qualityLimitationResolutionChanges:null,ws=Object.prototype.hasOwnProperty.call(Dn,Lt)?Dn.qualityLimitationDurations:null;return ws&&Object.keys(ws).forEach(As=>{ws[As]>1e3&&(ws[As]=Number(ws[As]/1e3))}),{reason:ss,durations:ws,resolutionChanges:$s}})(Ir),Zn=(((Dn,ss,$s)=>{if(!Object.prototype.hasOwnProperty.call(Dn,nr)||!Object.prototype.hasOwnProperty.call(Dn,ir))return{pliCount:ss.total_pli_received_out,nackCount:ss.total_nack_received_out,deltaPliCount:0,deltaNackCount:0};Dn.pliCount,$s&&$s.video.total_pli_received_out,Dn.nackCount,$s&&$s.video.total_nack_received_out,ss.video.total_pli_received_out,ss.video.total_nack_received_out})(Ir,Ur,on),Kr(Ir,Cr,Ur,on));return[{ssrc:Er,type:gr,value:{codec_id_out:fn}},{ssrc:Er,type:gr,value:{total_packets_out:Zn.packetsSent}},{ssrc:Er,type:gr,value:{delta_packets_out:Zn.deltaPacketsSent}},{ssrc:Er,type:gr,value:{total_KBytes_out:Zn.KBytesSent}},{ssrc:Er,type:gr,value:{delta_KBytes_out:Zn.deltaKBytesSent}},{ssrc:Er,type:gr,value:{delta_kbs_out:Zn.kbsSent}},{ssrc:Er,type:gr,value:{size_out:Kn}},{ssrc:Er,type:gr,value:{limitation_out:es}},{ssrc:Er,type:gr,value:{track_out:Ir.trackId}},{ssrc:Er,type:gr,value:{track_id_out:Ir.trackIdentifier}},{ssrc:Er,type:gr,value:{media_source_id:Ir.mediaSourceId}}]}break}case"media-source":{Vr(er,`analyze() - got stats ${Ir.type} for ${kn}`,Ir);const Er=[];return Object.keys(dn.audio).forEach(Ur=>{const on=dn.audio[Ur];if(on.media_source_id===Ir.id){Vr(er,`analyze() - got stats ${Ir.type} for ${kn}`,Ir);var fn=Ir.trackIdentifier;Er.push({ssrc:on.ssrc,type:xr,value:{track_id_out:fn}})}}),Object.keys(dn.video).forEach(Ur=>{const on=dn.video[Ur];if(on.media_source_id===Ir.id){Vr(er,`analyze() - got stats ${Ir.type} for ${kn}`,Ir);var fn=Ir.trackIdentifier;Er.push({ssrc:on.ssrc,type:gr,value:{track_id_out:fn}})}}),Er}case"track":{Vr(er,`analyze() - got stats ${Ir.type} for ${kn}`,Ir);const Er=[];return Object.keys(dn.audio).forEach(Ur=>{const on=dn.audio[Ur];if(on.track_in===Ir.id||on.track_out===Ir.id){Vr(er,`analyze() - got stats ${Ir.type} for ${kn}`,Ir);var fn=Ir.trackIdentifier;Ir.id===on.track_in?Er.push({ssrc:on.ssrc,type:xr,value:{track_id_in:fn}}):Er.push({ssrc:on.ssrc,type:xr,value:{track_id_out:fn}})}}),Object.keys(dn.video).forEach(Ur=>{const on=dn.video[Ur];if(on.track_in===Ir.id||on.track_out===Ir.id){Vr(er,`analyze() - got stats ${Ir.type} for ${kn}`,Ir);var fn=Ir.trackIdentifier;Ir.id===on.track_in?Er.push({ssrc:on.ssrc,type:gr,value:{track_id_in:fn}}):Er.push({ssrc:on.ssrc,type:gr,value:{track_id_out:fn}})}}),Er}case"codec":const kr=[];return Object.keys(dn.audio).forEach(Er=>{const Ur=dn.audio[Er];if(Ur.codec_id_in===Ir.id||Ur.codec_id_out===Ir.id){Vr(er,`analyze() - got stats ${Ir.type} for ${kn}`,Ir);const on=(fn=>({channels:fn.channels||null,clock_rate:fn.clockRate||null,mime_type:fn.mimeType||null,sdp_fmtp_line:fn.sdpFmtpLine||null}))(Ir);Ir.id===Ur.codec_id_in?kr.push({ssrc:Ur.ssrc,type:xr,value:{codec_in:on}}):kr.push({ssrc:Ur.ssrc,type:xr,value:{codec_out:on}})}}),Object.keys(dn.video).forEach(Er=>{const Ur=dn.video[Er];if(Ur.codec_id_in===Ir.id||Ur.codec_id_out===Ir.id){Vr(er,`analyze() - got stats ${Ir.type} for ${kn}`,Ir);const on=(fn=>({clock_rate:fn.clockRate||null,mime_type:fn.mimeType||null}))(Ir);Ir.id===Ur.codec_id_in?kr.push({ssrc:Ur.ssrc,type:gr,value:{codec_in:on}}):kr.push({ssrc:Ur.ssrc,type:gr,value:{codec_out:on}})}}),kr;case"remote-inbound-rtp":{Vr(er,`analyze() - got stats ${Ir.type} for ${kn}`,Ir);const Er=Ir.ssrc,Ur=tr(Er,dn,gt),on=tr(Er,Mr,gt);if(Ir.kind===yr){const fn=vr(Ir,yr,on,Ur),Kn=Fr(Ir,yr,Ur),es=qr(Ir,yr,Ur,on);return[{ssrc:Er,type:xr,value:{delta_rtt_ms_out:fn.rtt}},{ssrc:Er,type:xr,value:{delta_jitter_ms_out:Kn}},{ssrc:Er,type:xr,value:{timestamp_out:Ir.timestamp}},{ssrc:Er,type:xr,value:{total_packets_lost_out:es.packetsLost}},{ssrc:Er,type:xr,value:{delta_packets_lost_out:es.deltaPacketsLost}},{ssrc:Er,type:xr,value:{percent_packets_lost_out:es.fractionLost}}]}if(Ir.kind===Cr){const fn=vr(Ir,Cr,on,Ur),Kn=Fr(Ir,Cr,Ur),es=qr(Ir,Cr,Ur,on);return[{ssrc:Er,type:gr,value:{delta_rtt_ms_out:fn.rtt}},{ssrc:Er,type:gr,value:{delta_jitter_ms_out:Kn}},{ssrc:Er,type:gr,value:{timestamp_out:Ir.timestamp}},{ssrc:Er,type:gr,value:{total_packets_lost_out:es.packetsLost}},{ssrc:Er,type:gr,value:{delta_packets_lost_out:es.deltaPacketsLost}}]}break}case"remote-outbound-rtp":{Vr(er,`analyze() - got stats ${Ir.type} for ${kn}`,Ir);const Er=Ir.ssrc,Ur=tr(Er,dn,gt),on=tr(Er,Mr,gt);if(Ir.kind===yr){const fn=vr(Ir,yr,on,Ur);return[{ssrc:Er,type:xr,value:{delta_rtt_ms_in:fn.rtt}},{ssrc:Er,type:xr,value:{timestamp_in:Ir.timestamp}}]}break}}return[]})(Wr,Ar,Ar.name,null).forEach(Ir=>{if(Ir.value&&Ir.type)if(Ir.ssrc){let Mr=Ar[Ir.type][Ir.ssrc];Mr||(dn=Ir.type,kn=Wr.type,Mr=dn===yr?kn===wt?{...xt}:{...yt}:kn===wt?{...vt}:{...St},Mr.ssrc=Ir.ssrc,Ar[Ir.type][Ir.ssrc]=Mr),Object.keys(Ir.value).forEach(vn=>{Ir.value[vn]!==void 0&&(Mr[vn]=Ir.value[vn])})}else Object.keys(Ir.value).forEach(Mr=>{Ir.value[Mr]!==void 0&&(Ar[Ir.type][Mr]=Ir.value[Mr])});var dn,kn})}),Ar.timestamp=or,Ar}async collectStats(){try{const Qr=await this._config.monitoringObject.getStats(),Mn=this.analyze(Qr,this._statsReports.slice().pop()||null);return this._statsReports.push(Mn),this.fireOnStatsCollected(Mn),Qr}catch(Qr){return tn(this._moduleName,`got error ${Qr}`),null}}fireOnStatsCollected(Qr){if(this._callbacks.onStatsCollected){const Mn={};Mn.meetingId=Qr.meetingId,Mn.peerId=Qr.peerId,Mn.name=Qr.name,Mn.audio=[],Mn.video=[],Object.values(Qr.audio).forEach(Ar=>{const or={};or.network=Sr[Qr.network.infrastructure],or.timestamp=Qr.timestamp,Ar.direction==mt?(or.codec=Ar.codec_in.mime_type,or.jitter=Ar.delta_jitter_ms_in,or.bitrate=Ar.delta_kbs_in,or.packetsLost=Ar.delta_packets_lost_in,or.rtt=Qr.data.delta_rtt_connectivity_ms||0,or.totalPackets=Ar.delta_packets_in,or.concealmentEvents=Ar.delta_concealment_events,or.removedSampleForAccelaration=Ar.delta_removed_samples_for_accelaration,or.insertedSamplesForDecelaration=Ar.delta_inserted_samples_for_decelaration,or.trackId=Ar.track_id_in):Ar.direction==gt&&(or.codec=Ar.codec_out.mime_type,or.jitter=Ar.delta_jitter_ms_out,or.bitrate=Ar.delta_kbs_out,or.packetsLost=Ar.delta_packets_lost_out,or.rtt=Qr.data.delta_rtt_connectivity_ms||0,or.totalPackets=Ar.delta_packets_out,or.trackId=Ar.track_id_out),Mn.audio.push(or)}),Object.values(Qr.video).forEach(Ar=>{const or={};or.network=Sr[Qr.network.infrastructure],or.timestamp=Qr.timestamp,Ar.direction==mt?(or.codec=Ar.codec_in.mime_type,or.jitter=Ar.delta_jitter_ms_in,or.bitrate=Ar.delta_kbs_in,or.packetsLost=Ar.delta_packets_lost_in,or.rtt=Qr.data.delta_rtt_connectivity_ms||0,or.totalPackets=Ar.delta_packets_in,or.size=Ar.size_in,or.trackId=Ar.track_id_in):Ar.direction==gt&&(or.codec=Ar.codec_out.mime_type,or.jitter=Ar.delta_jitter_ms_out,or.bitrate=Ar.delta_kbs_out,or.packetsLost=Ar.delta_packets_lost_out,or.rtt=Qr.data.delta_rtt_connectivity_ms||0,or.totalPackets=Ar.delta_packets_out,or.limitation=Ar.limitation_out,or.size=Ar.size_out,or.trackId=Ar.track_id_out),Mn.video.push(or)}),this._callbacks.onStatsCollected.callback(Mn)}}}class Ln{constructor(Qr){this._id=Qr.name&&Qr.name.substr(0,12).padEnd(12," "),this._moduleName=this._id,this._config=Qr,this._collector=new Qn(this._config,this._id)}get id(){return this._id}start(){this._collectorIntervalId?mn("Probe already started."):(Vr(this._moduleName,"Probe Started"),this._collectorIntervalId=setInterval(()=>{Vr(this._moduleName,"Collector collecting stats"),this._collector.collectStats()},this._config.refreshEvery))}stop(){this._collectorIntervalId?(clearInterval(this._collectorIntervalId),Vr(this._moduleName,"Probe Stopped")):mn("Probe not running, Please start first.")}set onStatsCollected(Qr){Qr?this._collector.registerCallback("onStatsCollected",Qr):this._collector.unregisterCallback("onStatsCollected")}}const ln={refreshEvery:2e3,startAfter:0,stopAfter:-1,verbose:!1,peerId:"peerId",meetingId:"meetingId",name:"name"};class Xn{constructor(Qr){var Mn;this._config={defaultConfig:ln,...Qr},this._probes=[],Mn=this._config.verbose||!1,Nr.setLevel(Mn?Nr.levels.TRACE:Nr.levels.INFO),Vr("VideoSDKMetrics","VideoSDKMetrics initialized")}get probes(){return this._probes}addNewProbe(Qr,Mn){if(!Qr)throw new Error("undefined monitoring object");const Ar={monitoringObject:Qr,...Mn,...this._config},or=new Ln(Ar);return this._probes.push(or),or}removeExistingProbe(Qr){if(!Qr)throw new Error("undefined probe");Qr.stop(),this._probes=this._probes.filter(Mn=>Qr.id!==Mn.id)}startAllProbes(){this._probes.forEach((Qr,Mn)=>{Qr.start()})}stopAllProbes(){this._probes.forEach(Qr=>Qr.stop())}}})(),pt})()},7329:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.Logger=void 0;const ft=ht(1227),pt="awaitqueue";dt.Logger=class{constructor(mt){mt?(this._debug=(0,ft.default)(`${pt}:${mt}`),this._warn=(0,ft.default)(`${pt}:WARN:${mt}`),this._error=(0,ft.default)(`${pt}:ERROR:${mt}`)):(this._debug=(0,ft.default)(pt),this._warn=(0,ft.default)(`${pt}:WARN`),this._error=(0,ft.default)(`${pt}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},2186:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.AwaitQueue=dt.AwaitQueueRemovedTaskError=dt.AwaitQueueStoppedError=void 0;const ft=new(ht(7329)).Logger;class pt extends Error{constructor(xt){super(xt??"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,pt)}}dt.AwaitQueueStoppedError=pt;class mt extends Error{constructor(xt){super(xt??"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,mt)}}dt.AwaitQueueRemovedTaskError=mt,dt.AwaitQueue=class{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(gt,xt){if(xt=xt??gt.name,ft.debug(`push() [name:${xt}]`),typeof gt!="function")throw new TypeError("given task is not a function");if(xt)try{Object.defineProperty(gt,"name",{value:xt})}catch{}return new Promise((yt,vt)=>{const St={id:this.nextTaskId++,task:gt,name:xt,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:wt=>{if(St.completed)return;St.completed=!0,this.pendingTasks.delete(St.id),ft.debug(`resolving task [name:${St.name}]`),yt(wt);const[Et]=this.pendingTasks.values();Et&&!Et.executedAt&&this.execute(Et)},reject:wt=>{if(!St.completed&&(St.completed=!0,this.pendingTasks.delete(St.id),ft.debug(`rejecting task [name:${St.name}]: %s`,String(wt)),vt(wt),!this.stopping)){const[Et]=this.pendingTasks.values();Et&&!Et.executedAt&&this.execute(Et)}}};this.pendingTasks.set(St.id,St),this.pendingTasks.size===1&&this.execute(St)})}stop(){ft.debug("stop()"),this.stopping=!0;for(const gt of this.pendingTasks.values())ft.debug(`stop() | stopping task [name:${gt.name}]`),gt.reject(new pt);this.stopping=!1}remove(gt){ft.debug(`remove() [taskIdx:${gt}]`);const xt=Array.from(this.pendingTasks.values())[gt];xt?xt.reject(new mt):ft.debug(`stop() | no task with given idx [taskIdx:${gt}]`)}dump(){const gt=Date.now();let xt=0;return Array.from(this.pendingTasks.values()).map(yt=>({idx:xt++,task:yt.task,name:yt.name,enqueuedTime:yt.executedAt?yt.executedAt-yt.enqueuedAt:gt-yt.enqueuedAt,executionTime:yt.executedAt?gt-yt.executedAt:0}))}async execute(gt){if(ft.debug(`execute() [name:${gt.name}]`),gt.executedAt)throw new Error("task already being executed");gt.executedAt=Date.now();try{const xt=await gt.task();gt.resolve(xt)}catch(xt){gt.reject(xt)}}}},8962:(ut,dt,ht)=>{ht.d(dt,{v:()=>ft});var ft={networkPriorities:{audio:"high",dominatingVideo:"high",otherVideos:"medium",screenShare:"medium"},aspectRatios:{fourThree:{label:"fourThree",value:1.333},oneSixNine:{label:"oneSixNine",value:1.777}},audioProfiles:{speech_low_quality:{sampleRate:16e3,bitRate:24,sampleSize:16,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:16e3,packetTime:20,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},speech_standard:{sampleRate:32e3,bitRate:24,sampleSize:24,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:32e3,packetTime:30,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},music_standard:{sampleRate:48e3,bitRate:40,sampleSize:32,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},standard_stereo:{sampleRate:48e3,sampleSize:32,bitRate:64,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2},high_quality:{sampleRate:48e3,sampleSize:32,bitRate:128,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},high_quality_stereo:{sampleRate:48e3,sampleSize:32,bitRate:192,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2}},videoProfiles:{h90p_w160p:{width:160,height:90,bitRate:6e4,frameRate:15,aspectRatio:"oneSixNine"},h180p_w320p:{width:320,height:180,bitRate:12e4,frameRate:15,aspectRatio:"oneSixNine"},h216p_w384p:{width:384,height:216,bitRate:18e4,frameRate:15,aspectRatio:"oneSixNine"},h360p_w640p:{width:640,height:360,bitRate:3e5,frameRate:20,aspectRatio:"oneSixNine"},h540p_w960p:{width:960,height:540,bitRate:6e5,frameRate:25,aspectRatio:"oneSixNine"},h720p_w1280p:{width:1280,height:720,bitRate:2e6,frameRate:30,aspectRatio:"oneSixNine"},h1080p_w1920p:{width:1920,height:1080,bitRate:3e6,frameRate:30,aspectRatio:"oneSixNine"},h1440p_w2560p:{width:2560,height:1440,bitRate:5e6,frameRate:30,aspectRatio:"oneSixNine"},h2160p_w3840p:{width:3840,height:2160,bitRate:8e6,frameRate:30,aspectRatio:"oneSixNine"},h120p_w160p:{width:160,height:120,bitRate:8e4,frameRate:15,aspectRatio:"fourThree"},h180p_w240p:{width:240,height:180,bitRate:1e5,frameRate:15,aspectRatio:"fourThree"},h240p_w320p:{width:320,height:240,bitRate:15e4,frameRate:15,aspectRatio:"fourThree"},h360p_w480p:{width:480,height:360,bitRate:225e3,frameRate:20,aspectRatio:"fourThree"},h480p_w640p:{width:640,height:480,bitRate:3e5,frameRate:25,aspectRatio:"fourThree"},h540p_w720p:{width:720,height:540,bitRate:45e4,frameRate:30,aspectRatio:"fourThree"},h720p_w960p:{width:960,height:720,bitRate:15e5,frameRate:30,aspectRatio:"fourThree"},h1080p_w1440p:{width:1440,height:1080,bitRate:25e5,frameRate:30,aspectRatio:"fourThree"},h1440p_w1920p:{width:1920,height:1440,bitRate:35e5,frameRate:30,aspectRatio:"fourThree"}},screenShareProfiles:{h360p_30fps:{width:640,height:360,bitRate:2e5,frameRate:3},h720p_5fps:{width:1280,height:720,bitRate:4e5,frameRate:5},h720p_15fps:{width:1280,height:720,bitRate:1e6,frameRate:15},h1080p_15fps:{width:1920,height:1080,bitRate:15e5,frameRate:15},h1080p_30fps:{width:1920,height:1080,bitRate:1e6,frameRate:15}},simulcastProfiles:{3840:[{scaleResolutionDownBy:12,maxBitRate:15e4},{scaleResolutionDownBy:6,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:1e7}],1920:[{scaleResolutionDownBy:6,maxBitRate:15e4},{scaleResolutionDownBy:3,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:35e5}],1280:[{scaleResolutionDownBy:4,maxBitRate:15e4},{scaleResolutionDownBy:2,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:12e5}],640:[{scaleResolutionDownBy:2,maxBitRate:15e4},{scaleResolutionDownBy:1,maxBitRate:5e5}],320:[{scaleResolutionDownBy:1,maxBitRate:15e4}]},requestTimeout:2e4,requestRetries:3,transportOptions:{tcp:!0},videoKSVCEncodings:[{scalabilityMode:"S3T3_KEY"}],videoSVCEncodings:[{scalabilityMode:"S3T3",dtx:!0}]}},6900:(ut,dt,ht)=>{ht.d(dt,{H:()=>pt,R:()=>ft});var ft={INVALID_API_KEY:4001,INVALID_TOKEN:4002,INVALID_MEETING_ID:4003,INVALID_PARTICIPANT_ID:4004,DUPLICATE_PARTICIPANT:4005,ACCOUNT_DEACTIVATED:4006,ACCOUNT_DISCONTINUED:4007,INVALID_PERMISSIONS:4008,MAX_PARTCIPANT_REACHED:4009,MAX_SPEAKER_REACHED:4010,START_RECORDING_FAILED:4011,STOP_RECORDING_FAILED:4012,START_LIVESTREAM_FAILED:4013,STOP_LIVESTREAM_FAILED:4014,INVALID_LIVESTREAM_CONFIG:4015,START_HLS_FAILED:4016,STOP_HLS_FAILED:4017,RECORDING_FAILED:5001,LIVESTREAM_FAILED:5002,HLS_FAILED:5003,ERROR_GET_VIDEO_MEDIA:3011,ERROR_GET_AUDIO_MEDIA:3012,ERROR_GET_DISPLAY_MEDIA:3013,ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:3014,ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:3015,ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:3016},pt={ERROR_GET_VIDEO_MEDIA:{code:3011,message:"Your browser/Device does not support Video."},ERROR_GET_AUDIO_MEDIA:{code:3012,message:"Your browser/Device does not support Audio."},ERROR_GET_DISPLAY_MEDIA:{code:3013,message:"Your browser/Device does not support Screen Sharing."},ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:{code:3014,message:"Video capture permission denied."},ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:{code:3015,message:"Audio capture permission denied."},ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:{code:3016,message:"Screen sharing permission denied."}}},6380:(ut,dt,ht)=>{ht.d(dt,{o:()=>ft});var ft={HLS_STARTING:"HLS_STARTING",HLS_STARTED:"HLS_STARTED",HLS_PLAYABLE:"HLS_PLAYABLE",HLS_STOPPING:"HLS_STOPPING",HLS_STOPPED:"HLS_STOPPED"}},3430:(ut,dt,ht)=>{ht.d(dt,{S:()=>ft});var ft={CONFERENCE:"CONFERENCE",VIEWER:"VIEWER"}},8225:(ut,dt,ht)=>{ht.r(dt),ht.d(dt,{VideoSDK:()=>tp,ZujoSDK:()=>ev});var ft=ht(1002),pt=ht(5861),mt=ht(5671),gt=ht(3144),xt=ht(4942),yt=ht(4687),vt=ht.n(yt),St=ht(1206),wt=ht.n(St);function Et(Jt,rr){var sr=Object.keys(Jt);if(Object.getOwnPropertySymbols){var Rr=Object.getOwnPropertySymbols(Jt);rr&&(Rr=Rr.filter(function(Pr){return Object.getOwnPropertyDescriptor(Jt,Pr).enumerable})),sr.push.apply(sr,Rr)}return sr}function Rt(Jt){for(var rr=1;rr<arguments.length;rr++){var sr=arguments[rr]!=null?arguments[rr]:{};rr%2?Et(Object(sr),!0).forEach(function(Rr){(0,xt.Z)(Jt,Rr,sr[Rr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Jt,Object.getOwnPropertyDescriptors(sr)):Et(Object(sr)).forEach(function(Rr){Object.defineProperty(Jt,Rr,Object.getOwnPropertyDescriptor(sr,Rr))})}return Jt}function Tt(Jt){return"Minified Redux error #"+Jt+"; visit https://redux.js.org/Errors?code="+Jt+" for the full message or use the non-minified dev environment for full errors. "}var It=typeof Symbol=="function"&&Symbol.observable||"@@observable",At=function(){return Math.random().toString(36).substring(7).split("").join(".")},Dt={INIT:"@@redux/INIT"+At(),REPLACE:"@@redux/REPLACE"+At(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+At()}};function jt(Jt){if(typeof Jt!="object"||Jt===null)return!1;for(var rr=Jt;Object.getPrototypeOf(rr)!==null;)rr=Object.getPrototypeOf(rr);return Object.getPrototypeOf(Jt)===rr}function Ft(Jt,rr,sr){var Rr;if(typeof rr=="function"&&typeof sr=="function"||typeof sr=="function"&&typeof arguments[3]=="function")throw new Error(Tt(0));if(typeof rr=="function"&&sr===void 0&&(sr=rr,rr=void 0),sr!==void 0){if(typeof sr!="function")throw new Error(Tt(1));return sr(Ft)(Jt,rr)}if(typeof Jt!="function")throw new Error(Tt(2));var Pr=Jt,zr=rr,en=[],sn=en,Cn=!1;function Or(){sn===en&&(sn=en.slice())}function Zr(){if(Cn)throw new Error(Tt(3));return zr}function $r(Pn){if(typeof Pn!="function")throw new Error(Tt(4));if(Cn)throw new Error(Tt(5));var _i=!0;return Or(),sn.push(Pn),function(){if(_i){if(Cn)throw new Error(Tt(6));_i=!1,Or();var Jn=sn.indexOf(Pn);sn.splice(Jn,1),en=null}}}function gn(Pn){if(!jt(Pn))throw new Error(Tt(7));if(Pn.type===void 0)throw new Error(Tt(8));if(Cn)throw new Error(Tt(9));try{Cn=!0,zr=Pr(zr,Pn)}finally{Cn=!1}for(var _i=en=sn,Jn=0;Jn<_i.length;Jn++)(0,_i[Jn])();return Pn}return gn({type:Dt.INIT}),(Rr={dispatch:gn,subscribe:$r,getState:Zr,replaceReducer:function(Pn){if(typeof Pn!="function")throw new Error(Tt(10));Pr=Pn,gn({type:Dt.REPLACE})}})[It]=function(){var Pn,_i=$r;return(Pn={subscribe:function(Jn){if(typeof Jn!="object"||Jn===null)throw new Error(Tt(11));function ts(){Jn.next&&Jn.next(Zr())}return ts(),{unsubscribe:_i(ts)}}})[It]=function(){return this},Pn},Rr}function Lt(){for(var Jt=arguments.length,rr=new Array(Jt),sr=0;sr<Jt;sr++)rr[sr]=arguments[sr];return rr.length===0?function(Rr){return Rr}:rr.length===1?rr[0]:rr.reduce(function(Rr,Pr){return function(){return Rr(Pr.apply(void 0,arguments))}})}function Mt(){for(var Jt=arguments.length,rr=new Array(Jt),sr=0;sr<Jt;sr++)rr[sr]=arguments[sr];return function(Rr){return function(){var Pr=Rr.apply(void 0,arguments),zr=function(){throw new Error(Tt(15))},en={getState:Pr.getState,dispatch:function(){return zr.apply(void 0,arguments)}},sn=rr.map(function(Cn){return Cn(en)});return zr=Lt.apply(void 0,sn)(Pr.dispatch),Rt(Rt({},Pr),{},{dispatch:zr})}}}function Ot(Jt){return function(rr){var sr=rr.dispatch,Rr=rr.getState;return function(Pr){return function(zr){return typeof zr=="function"?zr(sr,Rr,Jt):Pr(zr)}}}}var Nt=Ot();Nt.withExtraArgument=Ot;const $t=Nt;var Vt=ht(3196),Ut=ht.n(Vt);function zt(Jt,rr){var sr=Object.keys(Jt);if(Object.getOwnPropertySymbols){var Rr=Object.getOwnPropertySymbols(Jt);rr&&(Rr=Rr.filter(function(Pr){return Object.getOwnPropertyDescriptor(Jt,Pr).enumerable})),sr.push.apply(sr,Rr)}return sr}function Bt(Jt){for(var rr=1;rr<arguments.length;rr++){var sr=arguments[rr]!=null?arguments[rr]:{};rr%2?zt(Object(sr),!0).forEach(function(Rr){(0,xt.Z)(Jt,Rr,sr[Rr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Jt,Object.getOwnPropertyDescriptors(sr)):zt(Object(sr)).forEach(function(Rr){Object.defineProperty(Jt,Rr,Object.getOwnPropertyDescriptor(sr,Rr))})}return Jt}var Ht={url:null,state:"new",activeSpeakerId:null,statsPeerId:null,faceDetection:!1};const Gt=function(){var Jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ht,rr=arguments.length>1?arguments[1]:void 0;switch(rr.type){case"SET_ROOM_URL":var sr=rr.payload.url;return Bt(Bt({},Jt),{},{url:sr});case"SET_ROOM_STATE":var Rr=rr.payload.state;return Bt(Bt({},Jt),{},Rr==="connected"?{state:Rr}:{state:Rr,activeSpeakerId:null,statsPeerId:null});case"SET_ROOM_ACTIVE_SPEAKER":var Pr=rr.payload.peerId;return Bt(Bt({},Jt),{},{activeSpeakerId:Pr});case"SET_ROOM_STATS_PEER_ID":var zr=rr.payload.peerId;return Jt.statsPeerId===zr?Bt(Bt({},Jt),{},{statsPeerId:null}):Bt(Bt({},Jt),{},{statsPeerId:zr});case"SET_FACE_DETECTION":var en=rr.payload;return Bt(Bt({},Jt),{},{faceDetection:en});case"REMOVE_PEER":var sn=rr.payload.peerId,Cn=Bt({},Jt);return sn&&sn===Jt.activeSpeakerId&&(Cn.activeSpeakerId=null),sn&&sn===Jt.statsPeerId&&(Cn.statsPeerId=null),Cn;default:return Jt}};function Xt(Jt,rr){var sr=Object.keys(Jt);if(Object.getOwnPropertySymbols){var Rr=Object.getOwnPropertySymbols(Jt);rr&&(Rr=Rr.filter(function(Pr){return Object.getOwnPropertyDescriptor(Jt,Pr).enumerable})),sr.push.apply(sr,Rr)}return sr}function Zt(Jt){for(var rr=1;rr<arguments.length;rr++){var sr=arguments[rr]!=null?arguments[rr]:{};rr%2?Xt(Object(sr),!0).forEach(function(Rr){(0,xt.Z)(Jt,Rr,sr[Rr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Jt,Object.getOwnPropertyDescriptors(sr)):Xt(Object(sr)).forEach(function(Rr){Object.defineProperty(Jt,Rr,Object.getOwnPropertyDescriptor(sr,Rr))})}return Jt}var hr={id:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1};const nr=function(){var Jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hr,rr=arguments.length>1?arguments[1]:void 0;switch(rr.type){case"SET_ROOM_STATE":return rr.payload.state==="closed"?Zt(Zt({},Jt),{},{webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1}):Jt;case"SET_ME":var sr=rr.payload,Rr=sr.peerId,Pr=sr.displayName,zr=sr.displayNameSet,en=sr.device;return Zt(Zt({},Jt),{},{id:Rr,displayName:Pr,displayNameSet:zr,device:en});case"SET_MEDIA_CAPABILITIES":var sn=rr.payload,Cn=sn.canSendMic,Or=sn.canSendWebcam;return Zt(Zt({},Jt),{},{canSendMic:Cn,canSendWebcam:Or});case"SET_CAN_CHANGE_WEBCAM":var Zr=rr.payload;return Zt(Zt({},Jt),{},{canChangeWebcam:Zr});case"SET_WEBCAM_IN_PROGRESS":var $r=rr.payload.flag;return Zt(Zt({},Jt),{},{webcamInProgress:$r});case"SET_SHARE_IN_PROGRESS":var gn=rr.payload.flag;return Zt(Zt({},Jt),{},{shareInProgress:gn});case"SET_DISPLAY_NAME":var Pn=rr.payload.displayName;return Pn||(Pn=Jt.displayName),Zt(Zt({},Jt),{},{displayName:Pn,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var _i=rr.payload.enabled;return Zt(Zt({},Jt),{},{audioOnly:_i});case"SET_AUDIO_ONLY_IN_PROGRESS":var Jn=rr.payload.flag;return Zt(Zt({},Jt),{},{audioOnlyInProgress:Jn});case"SET_AUDIO_MUTED_STATE":var ts=rr.payload.enabled;return Zt(Zt({},Jt),{},{audioMuted:ts});case"SET_RESTART_ICE_IN_PROGRESS":var rs=rr.payload.flag;return Zt(Zt({},Jt),{},{restartIceInProgress:rs});default:return Jt}};function ir(Jt,rr){var sr=Object.keys(Jt);if(Object.getOwnPropertySymbols){var Rr=Object.getOwnPropertySymbols(Jt);rr&&(Rr=Rr.filter(function(Pr){return Object.getOwnPropertyDescriptor(Jt,Pr).enumerable})),sr.push.apply(sr,Rr)}return sr}function yr(Jt){for(var rr=1;rr<arguments.length;rr++){var sr=arguments[rr]!=null?arguments[rr]:{};rr%2?ir(Object(sr),!0).forEach(function(Rr){(0,xt.Z)(Jt,Rr,sr[Rr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Jt,Object.getOwnPropertyDescriptors(sr)):ir(Object(sr)).forEach(function(Rr){Object.defineProperty(Jt,Rr,Object.getOwnPropertyDescriptor(sr,Rr))})}return Jt}var Cr={};const Sr=function(){var Jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Cr,rr=arguments.length>1?arguments[1]:void 0;switch(rr.type){case"SET_ROOM_STATE":return rr.payload.state==="closed"?{}:Jt;case"ADD_PRODUCER":var sr=rr.payload.producer;return yr(yr({},Jt),{},(0,xt.Z)({},sr.id,sr));case"REMOVE_PRODUCER":var Rr=rr.payload.producerId,Pr=yr({},Jt);return delete Pr[Rr],Pr;case"SET_PRODUCER_PAUSED":var zr=rr.payload.producerId,en=yr(yr({},Jt[zr]),{},{paused:!0});return yr(yr({},Jt),{},(0,xt.Z)({},zr,en));case"SET_PRODUCER_RESUMED":var sn=rr.payload.producerId,Cn=yr(yr({},Jt[sn]),{},{paused:!1});return yr(yr({},Jt),{},(0,xt.Z)({},sn,Cn));case"SET_PRODUCER_TRACK":var Or=rr.payload,Zr=Or.producerId,$r=Or.track,gn=yr(yr({},Jt[Zr]),{},{track:$r});return yr(yr({},Jt),{},(0,xt.Z)({},Zr,gn));case"SET_PRODUCER_SCORE":var Pn=rr.payload,_i=Pn.producerId,Jn=Pn.score,ts=Jt[_i];if(!ts)return Jt;var rs=yr(yr({},ts),{},{score:Jn});return yr(yr({},Jt),{},(0,xt.Z)({},_i,rs));default:return Jt}};function xr(Jt,rr){var sr=Object.keys(Jt);if(Object.getOwnPropertySymbols){var Rr=Object.getOwnPropertySymbols(Jt);rr&&(Rr=Rr.filter(function(Pr){return Object.getOwnPropertyDescriptor(Jt,Pr).enumerable})),sr.push.apply(sr,Rr)}return sr}function gr(Jt){for(var rr=1;rr<arguments.length;rr++){var sr=arguments[rr]!=null?arguments[rr]:{};rr%2?xr(Object(sr),!0).forEach(function(Rr){(0,xt.Z)(Jt,Rr,sr[Rr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Jt,Object.getOwnPropertyDescriptors(sr)):xr(Object(sr)).forEach(function(Rr){Object.defineProperty(Jt,Rr,Object.getOwnPropertyDescriptor(sr,Rr))})}return Jt}var _r={};const fr=function(){var Jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_r,rr=arguments.length>1?arguments[1]:void 0;switch(rr.type){case"SET_ROOM_STATE":return rr.payload.state==="closed"?{}:Jt;case"ADD_DATA_PRODUCER":var sr=rr.payload.dataProducer;return gr(gr({},Jt),{},(0,xt.Z)({},sr.id,sr));case"REMOVE_DATA_PRODUCER":var Rr=rr.payload.dataProducerId,Pr=gr({},Jt);return delete Pr[Rr],Pr;default:return Jt}};var Nr=ht(2982);function Tr(Jt,rr){var sr=Object.keys(Jt);if(Object.getOwnPropertySymbols){var Rr=Object.getOwnPropertySymbols(Jt);rr&&(Rr=Rr.filter(function(Pr){return Object.getOwnPropertyDescriptor(Jt,Pr).enumerable})),sr.push.apply(sr,Rr)}return sr}function Hr(Jt){for(var rr=1;rr<arguments.length;rr++){var sr=arguments[rr]!=null?arguments[rr]:{};rr%2?Tr(Object(sr),!0).forEach(function(Rr){(0,xt.Z)(Jt,Rr,sr[Rr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Jt,Object.getOwnPropertyDescriptors(sr)):Tr(Object(sr)).forEach(function(Rr){Object.defineProperty(Jt,Rr,Object.getOwnPropertyDescriptor(sr,Rr))})}return Jt}var Vr={};function mn(Jt,rr){var sr=Object.keys(Jt);if(Object.getOwnPropertySymbols){var Rr=Object.getOwnPropertySymbols(Jt);rr&&(Rr=Rr.filter(function(Pr){return Object.getOwnPropertyDescriptor(Jt,Pr).enumerable})),sr.push.apply(sr,Rr)}return sr}function tn(Jt){for(var rr=1;rr<arguments.length;rr++){var sr=arguments[rr]!=null?arguments[rr]:{};rr%2?mn(Object(sr),!0).forEach(function(Rr){(0,xt.Z)(Jt,Rr,sr[Rr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Jt,Object.getOwnPropertyDescriptors(sr)):mn(Object(sr)).forEach(function(Rr){Object.defineProperty(Jt,Rr,Object.getOwnPropertyDescriptor(sr,Rr))})}return Jt}var er={};function tr(Jt,rr){var sr=Object.keys(Jt);if(Object.getOwnPropertySymbols){var Rr=Object.getOwnPropertySymbols(Jt);rr&&(Rr=Rr.filter(function(Pr){return Object.getOwnPropertyDescriptor(Jt,Pr).enumerable})),sr.push.apply(sr,Rr)}return sr}function vr(Jt){for(var rr=1;rr<arguments.length;rr++){var sr=arguments[rr]!=null?arguments[rr]:{};rr%2?tr(Object(sr),!0).forEach(function(Rr){(0,xt.Z)(Jt,Rr,sr[Rr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Jt,Object.getOwnPropertyDescriptors(sr)):tr(Object(sr)).forEach(function(Rr){Object.defineProperty(Jt,Rr,Object.getOwnPropertyDescriptor(sr,Rr))})}return Jt}var Fr={},Kr=[];const qr=function(Jt){for(var rr=Object.keys(Jt),sr={},Rr=0;Rr<rr.length;Rr++){var Pr=rr[Rr];typeof Jt[Pr]=="function"&&(sr[Pr]=Jt[Pr])}var zr,en=Object.keys(sr);try{(function(sn){Object.keys(sn).forEach(function(Cn){var Or=sn[Cn];if(Or(void 0,{type:Dt.INIT})===void 0)throw new Error(Tt(12));if(Or(void 0,{type:Dt.PROBE_UNKNOWN_ACTION()})===void 0)throw new Error(Tt(13))})})(sr)}catch(sn){zr=sn}return function(sn,Cn){if(sn===void 0&&(sn={}),zr)throw zr;for(var Or=!1,Zr={},$r=0;$r<en.length;$r++){var gn=en[$r],Pn=sr[gn],_i=sn[gn],Jn=Pn(_i,Cn);if(Jn===void 0)throw Cn&&Cn.type,new Error(Tt(14));Zr[gn]=Jn,Or=Or||Jn!==_i}return(Or=Or||en.length!==Object.keys(sn).length)?Zr:sn}}({room:Gt,me:nr,producers:Sr,dataProducers:fr,peers:function(){var Jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vr,rr=arguments.length>1?arguments[1]:void 0;switch(rr.type){case"SET_ROOM_STATE":return rr.payload.state==="closed"?{}:Jt;case"ADD_PEER":var sr=rr.payload.peer;return Hr(Hr({},Jt),{},(0,xt.Z)({},sr.id,sr));case"REMOVE_PEER":var Rr=rr.payload.peerId,Pr=Hr({},Jt);return delete Pr[Rr],Pr;case"SET_PEER_DISPLAY_NAME":var zr=rr.payload,en=zr.displayName,sn=Jt[zr.peerId];if(!sn)throw new Error("no Peer found");var Cn=Hr(Hr({},sn),{},{displayName:en});return Hr(Hr({},Jt),{},(0,xt.Z)({},Cn.id,Cn));case"ADD_CONSUMER":var Or=rr.payload,Zr=Or.consumer,$r=Jt[Or.peerId];if(!$r)throw new Error("no Peer found for new Consumer");var gn=[].concat((0,Nr.Z)($r.consumers),[Zr.id]),Pn=Hr(Hr({},$r),{},{consumers:gn});return Hr(Hr({},Jt),{},(0,xt.Z)({},Pn.id,Pn));case"REMOVE_CONSUMER":var _i=rr.payload,Jn=_i.consumerId,ts=Jt[_i.peerId];if(!ts)return Jt;var rs=ts.consumers.indexOf(Jn);if(rs===-1)throw new Error("Consumer not found");var Fn=ts.consumers.slice();Fn.splice(rs,1);var jn=Hr(Hr({},ts),{},{consumers:Fn});return Hr(Hr({},Jt),{},(0,xt.Z)({},jn.id,jn));case"ADD_DATA_CONSUMER":var Bn=rr.payload,vs=Bn.dataConsumer,Ps=Bn.peerId;if(!Ps)return Jt;var fo=Jt[Ps];if(!fo)throw new Error("no Peer found for new DataConsumer");var eo=[].concat((0,Nr.Z)(fo.dataConsumers),[vs.id]),Sl=Hr(Hr({},fo),{},{dataConsumers:eo});return Hr(Hr({},Jt),{},(0,xt.Z)({},Sl.id,Sl));case"REMOVE_DATA_CONSUMER":var El=rr.payload,No=El.dataConsumerId,Zl=El.peerId;if(!Zl)return Jt;var Co=Jt[Zl];if(!Co)return Jt;var Ol=Co.dataConsumers.indexOf(No);if(Ol===-1)throw new Error("DataConsumer not found");var Mu=Co.dataConsumers.slice();Mu.splice(Ol,1);var Ou=Hr(Hr({},Co),{},{dataConsumers:Mu});return Hr(Hr({},Jt),{},(0,xt.Z)({},Ou.id,Ou));default:return Jt}},consumers:function(){var Jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:er,rr=arguments.length>1?arguments[1]:void 0;switch(rr.type){case"SET_ROOM_STATE":return rr.payload.state==="closed"?{}:Jt;case"ADD_CONSUMER":var sr=rr.payload.consumer;return tn(tn({},Jt),{},(0,xt.Z)({},sr.id,sr));case"REMOVE_CONSUMER":var Rr=rr.payload.consumerId,Pr=tn({},Jt);return delete Pr[Rr],Pr;case"SET_CONSUMER_PAUSED":var zr,en=rr.payload,sn=en.consumerId,Cn=en.originator,Or=Jt[sn];return zr=tn(tn({},Or),{},Cn==="local"?{locallyPaused:!0}:{remotelyPaused:!0}),tn(tn({},Jt),{},(0,xt.Z)({},sn,zr));case"SET_CONSUMER_RESUMED":var Zr,$r=rr.payload,gn=$r.consumerId,Pn=$r.originator,_i=Jt[gn];return Zr=tn(tn({},_i),{},Pn==="local"?{locallyPaused:!1}:{remotelyPaused:!1}),tn(tn({},Jt),{},(0,xt.Z)({},gn,Zr));case"SET_CONSUMER_CURRENT_LAYERS":var Jn=rr.payload,ts=Jn.consumerId,rs=Jn.spatialLayer,Fn=Jn.temporalLayer,jn=tn(tn({},Jt[ts]),{},{currentSpatialLayer:rs,currentTemporalLayer:Fn});return tn(tn({},Jt),{},(0,xt.Z)({},ts,jn));case"SET_CONSUMER_PREFERRED_LAYERS":var Bn=rr.payload,vs=Bn.consumerId,Ps=Bn.spatialLayer,fo=Bn.temporalLayer,eo=tn(tn({},Jt[vs]),{},{preferredSpatialLayer:Ps,preferredTemporalLayer:fo});return tn(tn({},Jt),{},(0,xt.Z)({},vs,eo));case"SET_CONSUMER_PRIORITY":var Sl=rr.payload,El=Sl.consumerId,No=Sl.priority,Zl=tn(tn({},Jt[El]),{},{priority:No});return tn(tn({},Jt),{},(0,xt.Z)({},El,Zl));case"SET_CONSUMER_TRACK":var Co=rr.payload,Ol=Co.consumerId,Mu=Co.track,Ou=tn(tn({},Jt[Ol]),{},{track:Mu});return tn(tn({},Jt),{},(0,xt.Z)({},Ol,Ou));case"SET_CONSUMER_SCORE":var rp=rr.payload,Tl=rp.consumerId,Qp=rp.score,im=Jt[Tl];if(!im)return Jt;var ym=tn(tn({},im),{},{score:Qp});return tn(tn({},Jt),{},(0,xt.Z)({},Tl,ym));default:return Jt}},dataConsumers:function(){var Jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fr,rr=arguments.length>1?arguments[1]:void 0;switch(rr.type){case"SET_ROOM_STATE":return rr.payload.state==="closed"?{}:Jt;case"ADD_DATA_CONSUMER":var sr=rr.payload.dataConsumer;return vr(vr({},Jt),{},(0,xt.Z)({},sr.id,sr));case"REMOVE_DATA_CONSUMER":var Rr=rr.payload.dataConsumerId,Pr=vr({},Jt);return delete Pr[Rr],Pr;default:return Jt}},notifications:function(){var Jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Kr,rr=arguments.length>1?arguments[1]:void 0;switch(rr.type){case"ADD_NOTIFICATION":var sr=rr.payload.notification;return[].concat((0,Nr.Z)(Jt),[sr]);case"REMOVE_NOTIFICATION":var Rr=rr.payload.notificationId;return Jt.filter(function(Pr){return Pr.id!==Rr});case"REMOVE_ALL_NOTIFICATIONS":return[];default:return Jt}}});var pn=ht(3003);function En(Jt,rr,sr){if(!rr.has(Jt))throw new TypeError("attempted to "+sr+" private field on non-instance");return rr.get(Jt)}function Rn(Jt,rr){return function(sr,Rr){return Rr.get?Rr.get.call(sr):Rr.value}(Jt,En(Jt,rr,"get"))}function Qn(Jt,rr,sr){return function(Rr,Pr,zr){if(Pr.set)Pr.set.call(Rr,zr);else{if(!Pr.writable)throw new TypeError("attempted to set read only private field");Pr.value=zr}}(Jt,En(Jt,rr,"set"),sr),sr}var Ln=ht(7187),ln=ht(885),Xn=(ht(3003).default,(0,gt.Z)(function Jt(){(0,mt.Z)(this,Jt),this.roomClient=null})),Yr=new(function(){function Jt(){(0,mt.Z)(this,Jt),Jt.instance||(Jt.instance=new Xn)}return(0,gt.Z)(Jt,[{key:"getInstance",value:function(){return Jt.instance}}]),Jt}());Object.freeze(Yr);var Qr=Yr.getInstance(),Mn=function(){function Jt(rr){(0,mt.Z)(this,Jt),this.id=rr.id,this.kind=rr.track.kind,this.codec=rr.codec,this.track=rr.track,this.producerOrConsumer=rr.instance,rr.appData&&rr.appData.share===!0&&rr.track.kind==="video"&&(this.kind="share"),rr.appData&&rr.appData.share===!0&&rr.track.kind==="audio"&&(this.kind="shareAudio")}return(0,gt.Z)(Jt,[{key:"pause",value:function(){Qr.roomClient._pauseConsumer(this.producerOrConsumer)}},{key:"resume",value:function(){Qr.roomClient._resumeConsumer(this.producerOrConsumer)}},{key:"paused",get:function(){return this.producerOrConsumer.paused}}]),Jt}();function Ar(Jt,rr){var sr=typeof Symbol<"u"&&Jt[Symbol.iterator]||Jt["@@iterator"];if(!sr){if(Array.isArray(Jt)||(sr=function(Cn,Or){if(Cn){if(typeof Cn=="string")return or(Cn,Or);var Zr=Object.prototype.toString.call(Cn).slice(8,-1);if(Zr==="Object"&&Cn.constructor&&(Zr=Cn.constructor.name),Zr==="Map"||Zr==="Set")return Array.from(Cn);if(Zr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Zr))return or(Cn,Or)}}(Jt))||rr&&Jt&&typeof Jt.length=="number"){sr&&(Jt=sr);var Rr=0,Pr=function(){};return{s:Pr,n:function(){return Rr>=Jt.length?{done:!0}:{done:!1,value:Jt[Rr++]}},e:function(Cn){throw Cn},f:Pr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var zr,en=!0,sn=!1;return{s:function(){sr=sr.call(Jt)},n:function(){var Cn=sr.next();return en=Cn.done,Cn},e:function(Cn){sn=!0,zr=Cn},f:function(){try{en||sr.return==null||sr.return()}finally{if(sn)throw zr}}}}function or(Jt,rr){(rr==null||rr>Jt.length)&&(rr=Jt.length);for(var sr=0,Rr=new Array(rr);sr<rr;sr++)Rr[sr]=Jt[sr];return Rr}var Wr="stream-enabled",Ir="stream-disabled",dn="media-status-changed",kn="video-quality-changed",Mr=function(){function Jt(zr){var en=this;(0,mt.Z)(this,Jt),(0,xt.Z)(this,"captureImage",(0,pt.Z)(vt().mark(function sn(){var Cn,Or,Zr,$r,gn,Pn,_i,Jn,ts=arguments;return vt().wrap(function(rs){for(;;)switch(rs.prev=rs.next){case 0:Or=(Cn=ts.length>0&&ts[0]!==void 0?ts[0]:{}).height,Zr=Cn.width,rs.prev=1,$r=(0,Nr.Z)(en.streams.values()),gn=Ar($r),rs.prev=4,_i=vt().mark(function Fn(){var jn,Bn,vs,Ps,fo;return vt().wrap(function(eo){for(;;)switch(eo.prev=eo.next){case 0:if((jn=Pn.value).kind!="video"){eo.next=19;break}return eo.prev=2,(Bn=new MediaStream).addTrack(jn.track),(vs=document.createElement("video")).srcObject=Bn,vs.playsInline=!0,(Ps=document.createElement("canvas")).id="canvasId",eo.next=12,new Promise(function(Sl,El){vs.addEventListener("loadeddata",(0,pt.Z)(vt().mark(function No(){var Zl,Co,Ol,Mu,Ou,rp;return vt().wrap(function(Tl){for(;;)switch(Tl.prev=Tl.next){case 0:return Zl=vs.videoWidth,Co=vs.videoHeight,Ol=16/9,Or==null&&Zr==null&&(Or=Co,Zr=Zl),Or==null&&Or==null||(Or<=0||Or>Co)&&(Or=Co),Zr==null&&Zr==null||(Zr<=0||Zr>Zl)&&(Zr=Zl),Or==null&&(Or=Zr/Ol),Zr==null&&(Zr=Or*Ol),Ps.width=Zr,Ps.height=Or,Tl.prev=9,Tl.next=12,vs.play();case 12:document.body.appendChild(vs),Mu=(Ps.width-Zl*Ol)/2,Ou=(Ps.height-Co*Ol)/2,Ps.getContext("2d").clearRect(0,0,Mu/2,Ou/2),Ps.getContext("2d").drawImage(vs,0,0),rp=Ps.toDataURL("image/jpeg").split(";base64,")[1],document.body.appendChild(Ps),document.body.removeChild(Ps),document.body.removeChild(vs),Sl(rp),Tl.next=28;break;case 24:Tl.prev=24,Tl.t0=Tl.catch(9),El(Tl.t0),console.log("error in video",Tl.t0);case 28:case"end":return Tl.stop()}},No,null,[[9,24]])})))});case 12:return fo=eo.sent,eo.abrupt("return",{v:fo});case 16:eo.prev=16,eo.t0=eo.catch(2),console.error("err on image capture",eo.t0);case 19:case"end":return eo.stop()}},Fn,null,[[2,16]])}),gn.s();case 7:if((Pn=gn.n()).done){rs.next=14;break}return rs.delegateYield(_i(),"t0",9);case 9:if(!(Jn=rs.t0)){rs.next=12;break}return rs.abrupt("return",Jn.v);case 12:rs.next=7;break;case 14:rs.next=19;break;case 16:rs.prev=16,rs.t1=rs.catch(4),gn.e(rs.t1);case 19:return rs.prev=19,gn.f(),rs.finish(19);case 22:throw new Error("Camera must be on to capture an image");case 25:rs.prev=25,rs.t2=rs.catch(1),console.error("Error in captureImage::",rs.t2),Qr.roomClient._videosdkLogs&&Qr.roomClient._videosdkLogs.pushLogs({logText:"Error on image capture",logType:"ERROR",attributes:{error:rs.t2.message}});case 29:case"end":return rs.stop()}},sn,null,[[1,25],[4,16,19,22]])}))),this.id=zr.id,this.displayName=zr.displayName,this.streams=new Map,this.quality="low",this.local=zr.local||!1,this.pinState={cam:!1,share:!1},this.webcamOn=!1,this.micOn=!1,this.mode=zr.mode,this.metaData=zr.metaData,this.eventEmitter=new Ln.EventEmitter}var rr,sr,Rr,Pr;return(0,gt.Z)(Jt,[{key:"_setPinState",value:function(zr){zr.cam!=null&&(this.pinState.cam=zr.cam),zr.share!=null&&(this.pinState.share=zr.share)}},{key:"remove",value:function(){Qr.roomClient.removePeer(this.id)}},{key:"enableMic",value:function(){Qr.roomClient.enablePeerMic(this.id)}},{key:"disableMic",value:function(){Qr.roomClient.disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){Qr.roomClient.enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){Qr.roomClient.disablePeerWebcam(this.id)}},{key:"addStream",value:function(zr){this.streams.set(zr.id,zr),zr.kind!=="video"||this.local||Qr.roomClient.setConsumerQuality(zr.id,this.quality),this.eventEmitter.emit(Wr,zr)}},{key:"updateStream",value:function(zr){this.streams.set(zr.id,zr),this.eventEmitter.emit(Wr,zr)}},{key:"deleteStream",value:function(zr){var en=this.streams.get(zr);if(en!=null)return this.streams.delete(zr),this.eventEmitter.emit(Ir,en),en}},{key:"updateParticipantMediaState",value:function(zr,en){zr=="audio"?this.micOn=en:zr=="video"&&(this.webcamOn=en),this.eventEmitter.emit(dn,{peerId:this.id,kind:zr,newStatus:en})}},{key:"videoQualityChanged",value:function(zr,en){this.eventEmitter.emit(kn,{peerId:this.id,prevQuality:zr,currentQuality:en})}},{key:"setQuality",value:function(zr){this.quality===zr||this.local||(this.quality=zr,(0,Nr.Z)(this.streams.entries()).forEach(function(en){var sn=en[1];sn.kind==="video"&&Qr.roomClient.setConsumerQuality(sn.id,zr)}))}},{key:"setViewPort",value:function(zr,en){(0,Nr.Z)(this.streams.entries()).forEach(function(sn){var Cn=sn[1];Cn.kind==="video"&&Qr.roomClient.setViewPort(Cn.producerOrConsumer,zr,en)})}},{key:"pin",value:function(zr){switch(zr){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!0,share:!0});break;case"CAM":this._setPinState({cam:!0});break;case"SHARE":this._setPinState({share:!0});break;default:throw new Error("Unknown pin type")}Qr.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"unpin",value:function(zr){switch(zr){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!1,share:!1});break;case"CAM":this._setPinState({cam:!1});break;case"SHARE":this._setPinState({share:!1});break;default:throw new Error("Unknown unpin type")}Qr.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"switchTo",value:(Pr=(0,pt.Z)(vt().mark(function zr(en){var sn,Cn,Or;return vt().wrap(function(Zr){for(;;)switch(Zr.prev=Zr.next){case 0:return sn=en.meetingId,Cn=en.payload,Or=en.token,Zr.next=3,Qr.roomClient.switchPeerRoom({peerId:this.id,roomId:sn,payload:Cn,token:Or});case 3:case"end":return Zr.stop()}},zr,this)})),function(zr){return Pr.apply(this,arguments)})},{key:"getVideoStats",value:(Rr=(0,pt.Z)(vt().mark(function zr(){var en,sn,Cn,Or,Zr;return vt().wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:if(!this.local){$r.next=6;break}return $r.next=3,Qr.roomClient.getVideoRemoteStats();case 3:return $r.abrupt("return",$r.sent);case 6:en=(0,Nr.Z)(this.streams.entries()),sn=Ar(en),$r.prev=8,sn.s();case 10:if((Cn=sn.n()).done){$r.next=18;break}if(Or=(0,ln.Z)(Cn.value,2),Zr=Or[0],Or[1].kind!="video"){$r.next=16;break}return $r.next=15,Qr.roomClient.getConsumerRemoteStats(Zr);case 15:return $r.abrupt("return",$r.sent);case 16:$r.next=10;break;case 18:$r.next=23;break;case 20:$r.prev=20,$r.t0=$r.catch(8),sn.e($r.t0);case 23:return $r.prev=23,sn.f(),$r.finish(23);case 26:case"end":return $r.stop()}},zr,this,[[8,20,23,26]])})),function(){return Rr.apply(this,arguments)})},{key:"getShareStats",value:(sr=(0,pt.Z)(vt().mark(function zr(){var en,sn,Cn,Or,Zr;return vt().wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:if(!this.local){$r.next=6;break}return $r.next=3,Qr.roomClient.getShareRemoteStats();case 3:return $r.abrupt("return",$r.sent);case 6:en=(0,Nr.Z)(this.streams.entries()),sn=Ar(en),$r.prev=8,sn.s();case 10:if((Cn=sn.n()).done){$r.next=18;break}if(Or=(0,ln.Z)(Cn.value,2),Zr=Or[0],Or[1].kind!="share"){$r.next=16;break}return $r.next=15,Qr.roomClient.getConsumerRemoteStats(Zr);case 15:return $r.abrupt("return",$r.sent);case 16:$r.next=10;break;case 18:$r.next=23;break;case 20:$r.prev=20,$r.t0=$r.catch(8),sn.e($r.t0);case 23:return $r.prev=23,sn.f(),$r.finish(23);case 26:case"end":return $r.stop()}},zr,this,[[8,20,23,26]])})),function(){return sr.apply(this,arguments)})},{key:"getAudioStats",value:(rr=(0,pt.Z)(vt().mark(function zr(){var en,sn,Cn,Or,Zr;return vt().wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:if(this.micOn){$r.next=2;break}return $r.abrupt("return",[]);case 2:if(!this.local){$r.next=8;break}return $r.next=5,Qr.roomClient.getAudioRemoteStats();case 5:return $r.abrupt("return",$r.sent);case 8:en=(0,Nr.Z)(this.streams.entries()),sn=Ar(en),$r.prev=10,sn.s();case 12:if((Cn=sn.n()).done){$r.next=20;break}if(Or=(0,ln.Z)(Cn.value,2),Zr=Or[0],Or[1].kind!="audio"){$r.next=18;break}return $r.next=17,Qr.roomClient.getConsumerRemoteStats(Zr);case 17:return $r.abrupt("return",$r.sent);case 18:$r.next=12;break;case 20:$r.next=25;break;case 22:$r.prev=22,$r.t0=$r.catch(10),sn.e($r.t0);case 25:return $r.prev=25,sn.f(),$r.finish(25);case 28:case"end":return $r.stop()}},zr,this,[[10,22,25,28]])})),function(){return rr.apply(this,arguments)})},{key:"consumeMicStreams",value:function(){Qr.roomClient.consumeMicStreams(this.id)}},{key:"consumeWebcamStreams",value:function(){Qr.roomClient.consumeWebcamStreams(this.id)}},{key:"stopConsumingWebcamStreams",value:function(){Qr.roomClient.stopConsumingWebcamStreams(this.id)}},{key:"stopConsumingMicStreams",value:function(){Qr.roomClient.stopConsumingMicStreams(this.id)}},{key:"on",value:function(zr,en){switch(zr){case Wr:case Ir:case dn:case kn:this.eventEmitter.on(zr,en);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(zr,en){switch(zr){case Wr:case Ir:case dn:case kn:this.eventEmitter.off(zr,en);break;default:throw new Error("Invalid event type")}}}]),Jt}();function vn(Jt,rr,sr){(function(Rr,Pr){if(Pr.has(Rr))throw new TypeError("Cannot initialize the same private elements twice on an object")})(Jt,rr),rr.set(Jt,sr)}var kr=new WeakMap,Er=function(){function Jt(sr,Rr){var Pr=sr.id,zr=sr.displayName;(0,mt.Z)(this,Jt),vn(this,kr,{writable:!0,value:void 0}),this.id=Pr,this.displayName=zr,Qn(this,kr,Rr)}var rr;return(0,gt.Z)(Jt,[{key:"switchTo",value:(rr=(0,pt.Z)(vt().mark(function sr(Rr){var Pr,zr,en;return vt().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:return Pr=Rr.meetingId,zr=Rr.payload,en=Rr.token,sn.next=3,Qr.roomClient.connectionSwitchPeerRoom({roomId:Pr,connectionRoomId:Rn(this,kr),payload:zr,peerId:this.id,token:en});case 3:case"end":return sn.stop()}},sr,this)})),function(sr){return rr.apply(this,arguments)})}]),Jt}(),Ur="participant-joined",on="participant-left",fn="chat-message",Kn=function(){function Jt(sr,Rr){var Pr=this;(0,mt.Z)(this,Jt),this.eventEmitter=new Ln.EventEmitter,this.id=sr,this.participants=new Map,Rr.forEach(function(zr){Pr.participants.set(zr.id,new Er(zr,Pr.id))})}var rr;return(0,gt.Z)(Jt,[{key:"participantJoin",value:function(sr){var Rr=new Er(sr,this.id);this.participants.set(sr.id,Rr),this.eventEmitter.emit(Ur,Rr)}},{key:"participantLeft",value:function(sr){this.participants.delete(sr),this.eventEmitter.emit(on,sr)}},{key:"sendChatMessage",value:function(sr){Qr.roomClient.connectionSendChatMessage({roomId:this.id,message:sr})}},{key:"sendChatMessageEvent",value:function(sr){var Rr=sr.participantId,Pr=sr.message;this.eventEmitter.emit(fn,{participantId:Rr,message:Pr})}},{key:"end",value:(rr=(0,pt.Z)(vt().mark(function sr(){return vt().wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return Rr.next=2,Qr.roomClient.connectionEndMeeting({roomId:this.id});case 2:case"end":return Rr.stop()}},sr,this)})),function(){return rr.apply(this,arguments)})},{key:"on",value:function(sr,Rr){switch(sr){case Ur:case on:case fn:this.eventEmitter.on(sr,Rr);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(sr,Rr){switch(sr){case Ur:case on:case fn:this.eventEmitter.off(sr,Rr);break;default:throw new Error("Invalid event type")}}}]),Jt}(),es=function(){function Jt(rr){var sr=rr.roomId,Rr=rr.peers,Pr=rr.payload;(0,mt.Z)(this,Jt),this.id=sr,this.payload=Pr,this.meeting=new Kn(sr,Rr)}return(0,gt.Z)(Jt,[{key:"close",value:function(){Qr.roomClient.closeConnection(this.id)}}]),Jt}();function Zn(Jt,rr){Dn(Jt,rr),rr.add(Jt)}function Dn(Jt,rr){if(rr.has(Jt))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ss(Jt,rr,sr){if(!rr.has(Jt))throw new TypeError("attempted to get private field on non-instance");return sr}var $s="error",ws="meeting-joined",As="meeting-left",Vs="participant-mode-changed",Fo="participant-joined",Lo="participant-left",Ho="speaker-changed",Bo="presenter-changed",Kl="main-participant-changed",Nl="chat-message",Lr="entry-requested",wn="entry-responded",On="recording-state-changed",In="recording-started",Br="recording-stopped",gs="livestream-state-changed",os="livestream-started",ys="livestream-stopped",Os="hls-state-changed",Zs="hls-started",Ys="hls-stopped",un="whiteboard-started",Vo="whiteboard-stopped",xn="video-state-changed",An="video-seeked",Hn="mic-requested",Un="webcam-requested",Gn="stream-enabled",Hs="stream-disabled",ps="pin-state-changed",Us="connection-open",js="connection-close",yo="switch-meeting",Bs="meeting-state-changed",Ws=new WeakMap,io=new WeakSet,na=new WeakSet,To=function(){function Jt(Or,Zr,$r){var gn,Pn,_i,Jn,ts,rs,Fn=this;(0,mt.Z)(this,Jt),Zn(this,na),Zn(this,io),_i={writable:!0,value:void 0},Dn(gn=this,Pn=Ws),Pn.set(gn,_i),(0,xt.Z)(this,"pubSub",{publish:(rs=(0,pt.Z)(vt().mark(function jn(Bn,vs,Ps,fo){return vt().wrap(function(eo){for(;;)switch(eo.prev=eo.next){case 0:if(fo==null){eo.next=3;break}if((0,ft.Z)(fo)=="object"){eo.next=3;break}throw new Error('"payload" can only be object.');case 3:return eo.next=5,Fn.roomClient.pubsubPublish(Bn,vs,Ps,fo);case 5:case"end":return eo.stop()}},jn)})),function(jn,Bn,vs,Ps){return rs.apply(this,arguments)}),subscribe:(ts=(0,pt.Z)(vt().mark(function jn(Bn,vs){var Ps;return vt().wrap(function(fo){for(;;)switch(fo.prev=fo.next){case 0:if(!Rn(Fn,Ws).listeners(Bn).includes(vs)){fo.next=2;break}return fo.abrupt("return");case 2:return fo.next=4,Fn.roomClient.pubsubSubscribe(Bn);case 4:return Ps=fo.sent,Rn(Fn,Ws).on(Bn,vs),fo.abrupt("return",Ps);case 7:case"end":return fo.stop()}},jn)})),function(jn,Bn){return ts.apply(this,arguments)}),unsubscribe:(Jn=(0,pt.Z)(vt().mark(function jn(Bn,vs){return vt().wrap(function(Ps){for(;;)switch(Ps.prev=Ps.next){case 0:if(Rn(Fn,Ws).off(Bn,vs),Rn(Fn,Ws).listeners(Bn).length!=0){Ps.next=4;break}return Ps.next=4,Fn.roomClient.pubsubUnsubscribe(Bn);case 4:case"end":return Ps.stop()}},jn)})),function(jn,Bn){return Jn.apply(this,arguments)})}),(0,xt.Z)(this,"uploadBase64File",function(){var jn=(0,pt.Z)(vt().mark(function Bn(vs){var Ps,fo,eo,Sl,El,No,Zl;return vt().wrap(function(Co){for(;;)switch(Co.prev=Co.next){case 0:if(Ps=vs.base64Data,fo=vs.token,eo=vs.fileName,Co.prev=1,Ps&&fo&&eo){Co.next=4;break}throw new Error("please provide base64Data, token and fileName");case 4:return Sl="https://".concat(Fn.baseUrl,"/base64-upload?roomId=").concat(Fn.id),El={fileName:eo,base64Data:Ps},Co.next=8,fetch(Sl,{method:"POST",body:JSON.stringify(El),headers:{"Content-Type":"application/json",Authorization:fo}});case 8:return No=Co.sent,Co.next=11,No.json();case 11:return Zl=Co.sent,Co.abrupt("return",Zl.url);case 15:Co.prev=15,Co.t0=Co.catch(1),console.error("Error while Uploading Base64 File::",Co.t0),Fn.roomClient._videosdkLogs&&Fn.roomClient._videosdkLogs.pushLogs({logText:"Error while Uploading Base64 File",logType:"ERROR",attributes:{error:Co.t0.message}});case 19:case"end":return Co.stop()}},Bn,null,[[1,15]])}));return function(Bn){return jn.apply(this,arguments)}}()),(0,xt.Z)(this,"fetchBase64File",function(){var jn=(0,pt.Z)(vt().mark(function Bn(vs){var Ps,fo,eo,Sl,El;return vt().wrap(function(No){for(;;)switch(No.prev=No.next){case 0:if(Ps=vs.url,fo=vs.token,No.prev=1,Ps&&fo){No.next=4;break}throw new Error("please provide url and token");case 4:return No.next=6,fetch(Ps,{headers:{Authorization:fo}});case 6:return eo=No.sent,No.next=9,eo.arrayBuffer();case 9:return Sl=No.sent,El=window.btoa(new Uint8Array(Sl).reduce(function(Zl,Co){return Zl+String.fromCharCode(Co)},"")),No.abrupt("return",El);case 14:No.prev=14,No.t0=No.catch(1),console.error("Error while fetching Base64 File::",No.t0),Fn.roomClient._videosdkLogs&&Fn.roomClient._videosdkLogs.pushLogs({logText:"Error while fetching Base64 File",logType:"ERROR",attributes:{error:No.t0.message}});case 18:case"end":return No.stop()}},Bn,null,[[1,14]])}));return function(Bn){return jn.apply(this,arguments)}}()),this.id=Or,this.roomClient=$r,this.activeSpeakerId=null,this.activePresenterId=null,this.mainParticipantId=null,this.connections=new Map,this.localParticipant=Zr,this.participants=new Map,this.baseUrl=null,this.livestreamState="LIVESTREAM_STOPPED",this.recordingState="RECORDING_STOPPED",this.hlsState="HLS_STOPPED",this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null},this.messages=[],this.eventEmitter=new Ln.EventEmitter,Qn(this,Ws,new Ln.EventEmitter),this.eventEmitter.setMaxListeners(9999),Rn(this,Ws).setMaxListeners(9999),this.roomClient.on("ERROR",function(jn){return Fn.handleError(jn)}),this.roomClient.on("ADD_PEER",function(jn){return Fn.handlePeerAdd(jn)}),this.roomClient.on("REMOVE_PEER",function(jn){return Fn.handlePeerRemove(jn)}),this.roomClient.on("ADD_PRODUCER",function(jn){return Fn.handleProducerAdd(jn)}),this.roomClient.on("UPDATE_PRODUCER",function(jn){return Fn.handleUpdateProducer(jn)}),this.roomClient.on("REMOVE_PRODUCER",function(jn){return Fn.handleProducerRemove(jn)}),this.roomClient.on("ADD_CONSUMER",function(jn){return Fn.handleConsumerAdd(jn)}),this.roomClient.on("REMOVE_CONSUMER",function(jn){return Fn.handleConsumerRemove(jn)}),this.roomClient.on("PARTICIPANT_MEDIA_STATE_CHANGED",function(jn){return Fn.handleParticipantMediaStateChanged(jn)}),this.roomClient.on("CHAT_MESSAGE",function(jn){return Fn.handleNewChatMessage(jn)}),this.roomClient.on("SET_ROOM_ACTIVE_SPEAKER",function(jn){return Fn.handleSpeakerChange(jn)}),this.roomClient.on("ENTRY_REQUESTED",function(jn){return Fn.handleEntryRequested(jn)}),this.roomClient.on("ENTRY_RESPONDED",function(jn){return Fn.handleEntryResponded(jn)}),this.roomClient.on("MEETING_JOINED",function(jn){return Fn.handleMeetingJoined(jn)}),this.roomClient.on("MEETING_LEFT",function(jn){return Fn.handleMeetingLeft(jn)}),this.roomClient.on("RECORDING_STATE_CHANGED",function(jn){Fn.handleRecordingStateChanged(jn)}),this.roomClient.on("RECORDING_STARTED",function(jn){return Fn.handleRecordingStarted(jn)}),this.roomClient.on("RECORDING_STOPPED",function(jn){return Fn.handleRecordingStopped(jn)}),this.roomClient.on("LIVESTREAM_STATE_CHANGED",function(jn){Fn.handleLivestreamStateChanged(jn)}),this.roomClient.on("LIVESTREAM_STARTED",function(jn){return Fn.handleLivestreamStarted(jn)}),this.roomClient.on("LIVESTREAM_STOPPED",function(jn){return Fn.handleLivestreamStopped(jn)}),this.roomClient.on("HLS_STATE_CHANGED",function(jn){Fn.handleHlsStateChanged(jn)}),this.roomClient.on("HLS_STARTED",function(jn){Fn.handleHlsStarted(jn)}),this.roomClient.on("HLS_STOPPED",function(jn){Fn.handleHlsStopped(jn)}),this.roomClient.on("WHITEBOARD_STARTED",function(jn){return Fn.handleWhiteboardStarted(jn)}),this.roomClient.on("WHITEBOARD_STOPPED",function(jn){return Fn.handleWhiteboardStopped(jn)}),this.roomClient.on("VIDEO_STATE_CHANGED",function(jn){return Fn.handleVideoStateChanged(jn)}),this.roomClient.on("VIDEO_SEEKED",function(jn){return Fn.handleVideoSeeked(jn)}),this.roomClient.on("PIN_STATE_CHANGED",function(jn){Fn.handlePinStateChanged(jn)}),this.roomClient.on("MIC_REQUESTED",function(jn){return Fn.handleMicRequested(jn)}),this.roomClient.on("WEBCAM_REQUESTED",function(jn){return Fn.handleWebcamRequested(jn)}),this.roomClient.on("CONNECTION_OPEN",function(jn){return Fn.handleConnectionOpen(jn)}),this.roomClient.on("CONNECTION_CLOSE",function(jn){return Fn.handleConnectionClose(jn)}),this.roomClient.on("CONNECTION_PARTICIPANT_JOIN",function(jn){return Fn.handleConnectionParticipantJoin(jn)}),this.roomClient.on("SWITCH_ROOM",function(jn){return Fn.handleSwitchMeeting(jn)}),this.roomClient.on("CONNECTION_CHAT_MESSAGE",function(jn){return Fn.handleConnectionChatMessage(jn)}),this.roomClient.on("CONNECTION_PARTICIPANT_LEFT",function(jn){Fn.handleConnectionParticipantLeft(jn)}),this.roomClient.on("PUBSUB_MESSAGE",function(jn){return ss(Fn,io,_l).call(Fn,jn)}),this.roomClient.on("PEER_MODE_CHANGED",function(jn){return ss(Fn,na,Go).call(Fn,jn)}),this.updateMainParticipant(this.localParticipant.id),this.roomClient.on("MEETING_STATE_CHANGED",function(jn){return Fn.handleMeetingStateChanged(jn)}),this.roomClient.on("VIDEO_QUALITY_CHANGED",function(jn){return Fn.handleVideoQualityChanged(jn)})}var rr,sr,Rr,Pr,zr,en,sn,Cn;return(0,gt.Z)(Jt,[{key:"handleError",value:function(Or){this.eventEmitter.emit($s,Or)}},{key:"join",value:function(){this.roomClient.join()}},{key:"changeMode",value:function(Or){this.roomClient.changeMode(Or)}},{key:"leave",value:function(){this.roomClient.close({sendLeft:!0})}},{key:"end",value:function(){this.roomClient.closeRoom()}},{key:"respondEntry",value:function(Or,Zr){this.roomClient.respondEntry(Or,Zr)}},{key:"pinnedParticipants",get:function(){return this.roomClient._pinnedParticipants}},{key:"muteMic",value:function(){this.roomClient.disableMic()}},{key:"unmuteMic",value:function(){var Or=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableMic(Or)}},{key:"publishAudio",value:(Cn=(0,pt.Z)(vt().mark(function Or(){var Zr,$r=arguments;return vt().wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:return Zr=$r.length>0&&$r[0]!==void 0?$r[0]:void 0,gn.next=3,this.roomClient.enableMic(Zr);case 3:return gn.abrupt("return");case 4:case"end":return gn.stop()}},Or,this)})),function(){return Cn.apply(this,arguments)})},{key:"unpublishAudio",value:(sn=(0,pt.Z)(vt().mark(function Or(){return vt().wrap(function(Zr){for(;;)switch(Zr.prev=Zr.next){case 0:return Zr.next=2,this.roomClient.disableMic();case 2:return Zr.abrupt("return");case 3:case"end":return Zr.stop()}},Or,this)})),function(){return sn.apply(this,arguments)})},{key:"disableWebcam",value:function(){this.roomClient.disableWebcam()}},{key:"enableWebcam",value:function(){var Or=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableWebcam(Or)}},{key:"publishVideo",value:(en=(0,pt.Z)(vt().mark(function Or(){var Zr,$r=arguments;return vt().wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:return Zr=$r.length>0&&$r[0]!==void 0?$r[0]:void 0,this.roomClient.enableWebcam(Zr),gn.abrupt("return");case 3:case"end":return gn.stop()}},Or,this)})),function(){return en.apply(this,arguments)})},{key:"unpublishVideo",value:(zr=(0,pt.Z)(vt().mark(function Or(){return vt().wrap(function(Zr){for(;;)switch(Zr.prev=Zr.next){case 0:return this.roomClient.disableWebcam(),Zr.abrupt("return");case 2:case"end":return Zr.stop()}},Or,this)})),function(){return zr.apply(this,arguments)})},{key:"disableScreenShare",value:function(){this.roomClient.disableShare()}},{key:"enableScreenShare",value:function(){var Or=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(Or)}},{key:"pubblishScreenShare",value:function(){var Or=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(Or)}},{key:"unpublishScreenShare",value:function(){this.roomClient.disableShare()}},{key:"sendChatMessage",value:function(Or){this.roomClient.sendChatMessage(Or);var Zr={text:Or,timestamp:new Date().getTime(),senderId:this.localParticipant.id,senderName:this.localParticipant.displayName};this.handleNewChatMessage(Zr)}},{key:"startRecording",value:function(Or,Zr,$r){this.roomClient.startRecording(Or,Zr,$r)}},{key:"stopRecording",value:function(){this.roomClient.stopRecording()}},{key:"startLivestream",value:function(Or,Zr){this.roomClient.startLivestream(Or,Zr)}},{key:"stopLivestream",value:function(){this.roomClient.stopLivestream()}},{key:"startHls",value:(Pr=(0,pt.Z)(vt().mark(function Or(Zr){return vt().wrap(function($r){for(;;)switch($r.prev=$r.next){case 0:return $r.next=2,this.roomClient.startHls(Zr);case 2:case"end":return $r.stop()}},Or,this)})),function(Or){return Pr.apply(this,arguments)})},{key:"stopHls",value:function(){this.roomClient.stopHls()}},{key:"getMics",value:(Rr=(0,pt.Z)(vt().mark(function Or(){return vt().wrap(function(Zr){for(;;)switch(Zr.prev=Zr.next){case 0:return Zr.next=2,this.roomClient.getMics();case 2:return Zr.abrupt("return",Zr.sent);case 3:case"end":return Zr.stop()}},Or,this)})),function(){return Rr.apply(this,arguments)})},{key:"getWebcams",value:(sr=(0,pt.Z)(vt().mark(function Or(){return vt().wrap(function(Zr){for(;;)switch(Zr.prev=Zr.next){case 0:return Zr.next=2,this.roomClient.getWebcams();case 2:return Zr.abrupt("return",Zr.sent);case 3:case"end":return Zr.stop()}},Or,this)})),function(){return sr.apply(this,arguments)})},{key:"changeMic",value:function(Or){this.roomClient.changeMic(Or)}},{key:"changeWebcam",value:function(Or){this.roomClient.changeWebcam(Or)}},{key:"replaceWebcamStream",value:function(Or){this.roomClient.replaceWebcamStream(Or)}},{key:"setWebcamQuality",value:function(Or){this.roomClient.setWebcamQuality(Or)}},{key:"startWhiteboard",value:function(){this.roomClient.startWhiteboard()}},{key:"stopWhiteboard",value:function(){this.roomClient.stopWhiteboard()}},{key:"startVideo",value:function(Or){var Zr=Or.link;this.roomClient.startVideo({link:Zr})}},{key:"stopVideo",value:function(){this.roomClient.stopVideo()}},{key:"resumeVideo",value:function(){this.roomClient.resumeVideo()}},{key:"refreshConnection",value:function(){this.roomClient.restartIce()}},{key:"pauseVideo",value:function(Or){var Zr=Or.currentTime;this.roomClient.pauseVideo(Zr)}},{key:"seekVideo",value:function(Or){var Zr=Or.currentTime;this.roomClient.seekVideo(Zr)}},{key:"handlePeerAdd",value:function(Or){var Zr=Or.peer,$r=new Mr(Zr);this.participants.set($r.id,$r),this.eventEmitter.emit(Fo,$r),this.participants.size===1&&this.updateMainParticipant($r.id)}},{key:"handlePeerRemove",value:function(Or){var Zr=Or.peerId,$r=this.participants.get(Zr);$r!=null&&(this.participants.delete(Zr),this.eventEmitter.emit(Lo,$r),this.activePresenterId===$r.id&&(this.activePresenterId=null,this.eventEmitter.emit(Bo,this.activePresenterId)),this.mainParticipantId===$r.id&&(this.participants.size>0?this.updateMainParticipant(this.participants.entries().next().value[1].id):this.updateMainParticipant(this.localParticipant.id)))}},{key:"handleProducerAdd",value:function(Or){var Zr=Or.producer,$r=new Mn(Zr);this.localParticipant.addStream($r),$r.kind==="share"&&(this.activePresenterId=this.localParticipant.id,this.eventEmitter.emit(Bo,this.activePresenterId),this.updateMainParticipant(this.localParticipant.id))}},{key:"handleUpdateProducer",value:function(Or){var Zr=Or.producer,$r=new Mn(Zr);this.localParticipant.updateStream($r)}},{key:"handleProducerRemove",value:function(Or){var Zr=Or.producerId,$r=this.localParticipant.deleteStream(Zr);if($r&&$r.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(Bo,this.activePresenterId);var gn=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||gn||this.localParticipant.id)}}},{key:"handleConsumerAdd",value:function(Or){var Zr=Or.consumer,$r=Or.peerId,gn=this.participants.get($r);if(gn){var Pn=new Mn(Zr);gn.addStream(Pn),this.eventEmitter.emit(Gn,Pn),Pn.kind==="share"&&(this.activePresenterId=gn.id,this.eventEmitter.emit(Bo,this.activePresenterId),this.updateMainParticipant(gn.id))}}},{key:"handleConsumerRemove",value:function(Or){var Zr=Or.consumerId,$r=Or.peerId,gn=this.participants.get($r);if(gn!=null&&gn){var Pn=gn.deleteStream(Zr);if(this.eventEmitter.emit(Hs,Pn),Pn&&Pn.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(Bo,this.activePresenterId);var _i=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||_i||this.localParticipant.id)}}}},{key:"handleParticipantMediaStateChanged",value:function(Or){var Zr=Or.peerId,$r=Or.kind,gn=Or.newState,Pn=this.participants.get(Zr);Pn&&Pn&&($r=="audio"?Pn.micOn=gn:$r=="video"&&(Pn.webcamOn=gn),Pn.updateParticipantMediaState($r,gn))}},{key:"handleSpeakerChange",value:function(Or){var Zr=Or.peerId;this.activeSpeakerId!==Zr&&(this.activeSpeakerId=Zr,this.eventEmitter.emit(Ho,Zr),Zr&&Zr!==this.localParticipant.id&&this.activePresenterId!==this.mainParticipantId&&Zr!==this.mainParticipantId&&this.updateMainParticipant(Zr))}},{key:"handleNewChatMessage",value:function(Or){var Zr=Or.senderId,$r={senderId:Zr,text:Or.text,timestamp:Or.timestamp};if(this.localParticipant.id===Zr)$r.senderName=this.localParticipant.displayName;else{var gn=this.participants.get(Zr);gn&&($r.senderName=gn.displayName)}this.messages.push($r),this.eventEmitter.emit(Nl,$r)}},{key:"updateMainParticipant",value:function(Or){this.mainParticipantId=Or;var Zr=null;Zr=Or===this.localParticipant.id?this.localParticipant:this.participants.get(this.mainParticipantId),this.eventEmitter.emit(Kl,Zr)}},{key:"handleEntryRequested",value:function(Or){var Zr=this,$r=Or.id,gn=Or.name;this.eventEmitter.emit(Lr,{participantId:$r,name:gn,allow:function(){Zr.roomClient.respondEntry($r,"allowed")},deny:function(){Zr.roomClient.respondEntry($r,"denied")}})}},{key:"handleEntryResponded",value:function(Or){var Zr=Or.id,$r=Or.decision;this.eventEmitter.emit(wn,Zr,$r)}},{key:"handleMeetingJoined",value:function(Or){var Zr=Or.peers,$r=Or.poll,gn=Or.messages,Pn=Or.baseUrl;this.baseUrl=Pn,gn.length>0&&(this.messages=gn),this.eventEmitter.emit(ws,{peers:Zr,poll:$r,messages:gn})}},{key:"handleMeetingLeft",value:function(Or){this.eventEmitter.emit(As,Or)}},{key:"handleRecordingStateChanged",value:function(Or){this.recordingState=Or.status,this.eventEmitter.emit(On,Or)}},{key:"handleLivestreamStateChanged",value:function(Or){this.livestreamState=Or.status,this.eventEmitter.emit(gs,Or)}},{key:"handleHlsStateChanged",value:function(Or){this.hlsState=Or.status,Or.status=="HLS_PLAYABLE"?this.hlsUrls={downstreamUrl:Or.downstreamUrl,playbackHlsUrl:Or.playbackHlsUrl,livestreamUrl:Or.livestreamUrl}:Or.status=="HLS_STOPPED"&&(this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),this.eventEmitter.emit(Os,Or)}},{key:"handleRecordingStarted",value:function(){this.eventEmitter.emit(In)}},{key:"handleRecordingStopped",value:function(){this.eventEmitter.emit(Br)}},{key:"handleLivestreamStarted",value:function(){this.eventEmitter.emit(os)}},{key:"handleLivestreamStopped",value:function(){this.eventEmitter.emit(ys)}},{key:"handleHlsStarted",value:function(Or){this.eventEmitter.emit(Zs,Or)}},{key:"handleHlsStopped",value:function(){this.eventEmitter.emit(Ys)}},{key:"handleWhiteboardStarted",value:function(Or){var Zr=Or.state;this.eventEmitter.emit(un,Zr)}},{key:"handleWhiteboardStopped",value:function(Or){(function(Zr){if(Zr==null)throw new TypeError("Cannot destructure "+Zr)})(Or),this.eventEmitter.emit(Vo)}},{key:"handleVideoStateChanged",value:function(Or){this.eventEmitter.emit(xn,Or)}},{key:"handleVideoSeeked",value:function(Or){var Zr=Or.currentTime;this.eventEmitter.emit(An,{currentTime:Zr})}},{key:"handlePinStateChanged",value:function(Or){var Zr=Or.peerId,$r=Or.state,gn=Or.pinnedBy;this.eventEmitter.emit(ps,{participantId:Zr,state:$r,pinnedBy:gn})}},{key:"handleMeetingStateChanged",value:function(Or){var Zr=Or.state;this.eventEmitter.emit(Bs,{state:Zr})}},{key:"handleVideoQualityChanged",value:function(Or){var Zr=Or.peerId,$r=Or.prevQuality,gn=Or.currentQuality,Pn=this.participants.get(Zr);Pn&&Pn&&Pn.videoQualityChanged($r,gn)}},{key:"handleMicRequested",value:function(Or){var Zr=this,$r=Or.peerId;this.eventEmitter.emit(Hn,{participantId:$r,accept:function(){return Zr.unmuteMic()},reject:function(){}})}},{key:"handleWebcamRequested",value:function(Or){var Zr=this,$r=Or.peerId;this.eventEmitter.emit(Un,{participantId:$r,accept:function(){return Zr.enableWebcam()},reject:function(){}})}},{key:"handleConnectionParticipantJoin",value:function(Or){var Zr=Or.roomId,$r=Or.peer,gn=this.connections.get(Zr);gn!=null&&gn.meeting.participantJoin($r)}},{key:"handleConnectionParticipantLeft",value:function(Or){var Zr=Or.roomId,$r=Or.peerId,gn=this.connections.get(Zr);gn!=null&&gn.meeting.participantLeft($r)}},{key:"handleConnectionOpen",value:function(Or){var Zr=Or.peers,$r=Or.roomId,gn=Or.payload,Pn=new es({roomId:$r,peers:Zr,payload:gn});this.connections.set(Pn.id,Pn),this.eventEmitter.emit(Us,Pn)}},{key:"handleConnectionClose",value:function(Or){var Zr=Or.roomId;this.connections.get(Zr)!=null&&(this.connections.delete(Zr),this.eventEmitter.emit(js,Zr))}},{key:"handleSwitchMeeting",value:function(Or){var Zr=Or.roomId,$r=Or.token,gn=Or.payload,Pn=Or.peerId,_i=Or.connectionPeerId,Jn=Or.connectionRoomId,ts=Pn?{meetingId:Zr,payload:gn,token:$r,participantId:Pn}:{meetingId:Zr,payload:gn,token:$r,connectionParticipantId:_i,connectionMeetingId:Jn};this.eventEmitter.emit(yo,ts)}},{key:"handleConnectionChatMessage",value:function(Or){var Zr=Or.roomId,$r=Or.peerId,gn=Or.message,Pn=this.connections.get(Zr);Pn!=null&&Pn.meeting.sendChatMessageEvent({participantId:$r,message:gn})}},{key:"connectTo",value:(rr=(0,pt.Z)(vt().mark(function Or(Zr){var $r,gn;return vt().wrap(function(Pn){for(;;)switch(Pn.prev=Pn.next){case 0:return $r=Zr.meetingId,gn=Zr.payload,Pn.next=3,this.roomClient.openConnection({roomId:$r,payload:gn});case 3:case"end":return Pn.stop()}},Or,this)})),function(Or){return rr.apply(this,arguments)})},{key:"selectedCameraDevice",get:function(){var Or;return(Or=this.roomClient._webcam)===null||Or===void 0?void 0:Or.device}},{key:"selectedMicrophoneDevice",get:function(){var Or;return(Or=this.roomClient._mic)===null||Or===void 0?void 0:Or.device}},{key:"on",value:function(Or,Zr){switch(Or){case Fo:case Lo:case Ho:case Bo:case Kl:case Nl:case Lr:case wn:case On:case In:case Br:case gs:case os:case ys:case Zs:case Ys:case Os:case Gn:case Hs:case un:case Vo:case ws:case As:case xn:case An:case Hn:case Un:case ps:case Us:case js:case yo:case Bs:case Vs:case $s:this.eventEmitter.on(Or,Zr);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(Or,Zr){switch(Or){case Fo:case Lo:case Ho:case Bo:case Kl:case Nl:case Lr:case wn:case On:case In:case Br:case gs:case os:case ys:case Os:case Zs:case Ys:case Gn:case Hs:case un:case Vo:case ws:case As:case xn:case An:case Hn:case Un:case ps:case Us:case js:case yo:case Bs:case $s:case Vs:this.eventEmitter.off(Or,Zr);break;default:throw new Error("Invalid event type")}}}]),Jt}();function _l(Jt){var rr=Jt.topic,sr=Jt.message,Rr=Jt.senderId,Pr=Jt.timestamp,zr=Jt.senderName,en=Jt.id,sn=Jt.payload;rr&&sr&&Rn(this,Ws).emit(rr,{message:sr,senderId:Rr,timestamp:Pr,topic:rr,senderName:zr,id:en,payload:sn})}function Go(Jt){var rr=Jt.peerId,sr=Jt.mode;rr===this.localParticipant.id?this.localParticipant.mode=sr:this.participants.get(rr).mode=sr,this.eventEmitter.emit(Vs,{participantId:rr,mode:sr})}var zl=ht(6900),Yl=ht(6380),$l=ht(3430),Ml=ht(8962),Hl=function(){var Jt=(0,pt.Z)(vt().mark(function rr(sr){return vt().wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(Pr){var zr=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return zr?new Promise(function(en,sn){zr.call(navigator,Pr,en,sn)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),Rr.next=4,navigator.mediaDevices.getUserMedia(sr);case 4:return Rr.abrupt("return",Rr.sent);case 5:case"end":return Rr.stop()}},rr)}));return function(rr){return Jt.apply(this,arguments)}}(),Fl=function(){var Jt=(0,pt.Z)(vt().mark(function rr(sr){return vt().wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getDisplayMedia===void 0&&(navigator.mediaDevices.getDisplayMedia=function(Pr){var zr=navigator.webkitGetDisplayMedia||navigator.mozGetDisplayMedia;return zr?new Promise(function(en,sn){zr.call(navigator,Pr,en,sn)}):Promise.reject(new Error("getDisplayMedia is not implemented in this browser"))}),Rr.next=4,navigator.mediaDevices.getDisplayMedia(sr);case 4:return Rr.abrupt("return",Rr.sent);case 5:case"end":return Rr.stop()}},rr)}));return function(rr){return Jt.apply(this,arguments)}}();function zo(Jt,rr){if(rr&&((0,ft.Z)(rr)==="object"||typeof rr=="function"))return rr;if(rr!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(sr){if(sr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return sr}(Jt)}function _p(Jt){return _p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_p(Jt)}function Ap(Jt,rr){return Ap=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(sr,Rr){return sr.__proto__=Rr,sr},Ap(Jt,rr)}function Qu(Jt,rr){if(typeof rr!="function"&&rr!==null)throw new TypeError("Super expression must either be null or a function");Jt.prototype=Object.create(rr&&rr.prototype,{constructor:{value:Jt,writable:!0,configurable:!0}}),Object.defineProperty(Jt,"prototype",{writable:!1}),rr&&Ap(Jt,rr)}function $u(Jt,rr,sr){return rr=_p(rr),zo(Jt,Ju()?Reflect.construct(rr,sr||[],_p(Jt).constructor):rr.apply(Jt,sr))}function Ju(){try{var Jt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ju=function(){return!!Jt})()}var xp=function(Jt){function rr(sr,Rr,Pr,zr){return(0,mt.Z)(this,rr),$u(this,rr,[sr,Rr,Pr,zr])}return Qu(rr,Jt),(0,gt.Z)(rr)}((0,gt.Z)(function Jt(rr,sr,Rr,Pr){(0,mt.Z)(this,Jt),this.deviceId=rr,this.groupId=sr,this.kind=Rr,this.label=Pr})),kp=function(Jt){function rr(sr,Rr,Pr,zr){return(0,mt.Z)(this,rr),$u(this,rr,[sr,Rr,Pr,zr])}return Qu(rr,Jt),(0,gt.Z)(rr)}(xp),Mo=function(Jt){function rr(sr,Rr,Pr,zr){return(0,mt.Z)(this,rr),$u(this,rr,[sr,Rr,Pr,zr])}return Qu(rr,Jt),(0,gt.Z)(rr)}(xp),Is=function(Jt){function rr(sr,Rr,Pr,zr){return(0,mt.Z)(this,rr),$u(this,rr,[sr,Rr,Pr,zr])}return Qu(rr,Jt),(0,gt.Z)(rr)}(xp),jr={AUDIO:"audio",VIDEO:"video",AUDIO_AND_VIDEO:"audio_video"},cs=(ht(4301),ht(773));function uo(Jt,rr){return Jt==null||rr==null?NaN:Jt<rr?-1:Jt>rr?1:Jt>=rr?0:NaN}function Wl(Jt,rr){return Jt==null||rr==null?NaN:rr<Jt?-1:rr>Jt?1:rr>=Jt?0:NaN}function Uo(Jt){let rr,sr,Rr;function Pr(zr,en,sn=0,Cn=zr.length){if(sn<Cn){if(rr(en,en)!==0)return Cn;do{const Or=sn+Cn>>>1;sr(zr[Or],en)<0?sn=Or+1:Cn=Or}while(sn<Cn)}return sn}return Jt.length!==2?(rr=uo,sr=(zr,en)=>uo(Jt(zr),en),Rr=(zr,en)=>Jt(zr)-en):(rr=Jt===uo||Jt===Wl?Jt:ju,sr=Jt,Rr=Jt),{left:Pr,center:function(zr,en,sn=0,Cn=zr.length){const Or=Pr(zr,en,sn,Cn-1);return Or>sn&&Rr(zr[Or-1],en)>-Rr(zr[Or],en)?Or-1:Or},right:function(zr,en,sn=0,Cn=zr.length){if(sn<Cn){if(rr(en,en)!==0)return Cn;do{const Or=sn+Cn>>>1;sr(zr[Or],en)<=0?sn=Or+1:Cn=Or}while(sn<Cn)}return sn}}}function ju(){return 0}const sm=Uo(uo),Wp=sm.right,Jp=(Uo(function(Jt){return Jt===null?NaN:+Jt}).center,Wp);function Fp(Jt,rr){switch(arguments.length){case 0:break;case 1:this.range(Jt);break;default:this.range(rr).domain(Jt)}return this}function Ll(){var Jt,rr=[.5],sr=[0,1],Rr=1;function Pr(zr){return zr!=null&&zr<=zr?sr[Jp(rr,zr,0,Rr)]:Jt}return Pr.domain=function(zr){return arguments.length?(rr=Array.from(zr),Rr=Math.min(rr.length,sr.length-1),Pr):rr.slice()},Pr.range=function(zr){return arguments.length?(sr=Array.from(zr),Rr=Math.min(rr.length,sr.length-1),Pr):sr.slice()},Pr.invertExtent=function(zr){var en=sr.indexOf(zr);return[rr[en-1],rr[en]]},Pr.unknown=function(zr){return arguments.length?(Jt=zr,Pr):Jt},Pr.copy=function(){return Ll().domain(rr).range(sr).unknown(Jt)},Fp.apply(Pr,arguments)}function em(Jt,rr){var sr=Object.keys(Jt);if(Object.getOwnPropertySymbols){var Rr=Object.getOwnPropertySymbols(Jt);rr&&(Rr=Rr.filter(function(Pr){return Object.getOwnPropertyDescriptor(Jt,Pr).enumerable})),sr.push.apply(sr,Rr)}return sr}function mu(Jt){for(var rr=1;rr<arguments.length;rr++){var sr=arguments[rr]!=null?arguments[rr]:{};rr%2?em(Object(sr),!0).forEach(function(Rr){Qs(Jt,Rr,sr[Rr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Jt,Object.getOwnPropertyDescriptors(sr)):em(Object(sr)).forEach(function(Rr){Object.defineProperty(Jt,Rr,Object.getOwnPropertyDescriptor(sr,Rr))})}return Jt}function Wo(Jt,rr){if(!(Jt instanceof rr))throw new TypeError("Cannot call a class as a function")}function gu(Jt,rr){for(var sr=0;sr<rr.length;sr++){var Rr=rr[sr];Rr.enumerable=Rr.enumerable||!1,Rr.configurable=!0,"value"in Rr&&(Rr.writable=!0),Object.defineProperty(Jt,Up(Rr.key),Rr)}}function Bl(Jt,rr,sr){return rr&&gu(Jt.prototype,rr),sr&&gu(Jt,sr),Object.defineProperty(Jt,"prototype",{writable:!1}),Jt}function Qs(Jt,rr,sr){return(rr=Up(rr))in Jt?Object.defineProperty(Jt,rr,{value:sr,enumerable:!0,configurable:!0,writable:!0}):Jt[rr]=sr,Jt}function Sp(Jt,rr){if(typeof rr!="function"&&rr!==null)throw new TypeError("Super expression must either be null or a function");Jt.prototype=Object.create(rr&&rr.prototype,{constructor:{value:Jt,writable:!0,configurable:!0}}),Object.defineProperty(Jt,"prototype",{writable:!1}),rr&&iu(Jt,rr)}function ga(Jt){return ga=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},ga(Jt)}function iu(Jt,rr){return iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(sr,Rr){return sr.__proto__=Rr,sr},iu(Jt,rr)}function _d(Jt,rr){if(Jt==null)return{};var sr,Rr,Pr=function(en,sn){if(en==null)return{};var Cn,Or,Zr={},$r=Object.keys(en);for(Or=0;Or<$r.length;Or++)Cn=$r[Or],sn.indexOf(Cn)>=0||(Zr[Cn]=en[Cn]);return Zr}(Jt,rr);if(Object.getOwnPropertySymbols){var zr=Object.getOwnPropertySymbols(Jt);for(Rr=0;Rr<zr.length;Rr++)sr=zr[Rr],rr.indexOf(sr)>=0||Object.prototype.propertyIsEnumerable.call(Jt,sr)&&(Pr[sr]=Jt[sr])}return Pr}function _o(Jt){if(Jt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt}function Bp(Jt){var rr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var sr,Rr=ga(Jt);if(rr){var Pr=ga(this).constructor;sr=Reflect.construct(Rr,arguments,Pr)}else sr=Rr.apply(this,arguments);return function(zr,en){if(en&&(typeof en=="object"||typeof en=="function"))return en;if(en!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _o(zr)}(this,sr)}}function su(Jt,rr){for(;!Object.prototype.hasOwnProperty.call(Jt,rr)&&(Jt=ga(Jt))!==null;);return Jt}function vu(){return vu=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(Jt,rr,sr){var Rr=su(Jt,rr);if(Rr){var Pr=Object.getOwnPropertyDescriptor(Rr,rr);return Pr.get?Pr.get.call(arguments.length<3?Jt:sr):Pr.value}},vu.apply(this,arguments)}function wp(Jt,rr,sr,Rr){return wp=typeof Reflect<"u"&&Reflect.set?Reflect.set:function(Pr,zr,en,sn){var Cn,Or=su(Pr,zr);if(Or){if((Cn=Object.getOwnPropertyDescriptor(Or,zr)).set)return Cn.set.call(sn,en),!0;if(!Cn.writable)return!1}if(Cn=Object.getOwnPropertyDescriptor(sn,zr)){if(!Cn.writable)return!1;Cn.value=en,Object.defineProperty(sn,zr,Cn)}else Qs(sn,zr,en);return!0},wp(Jt,rr,sr,Rr)}function _a(Jt,rr,sr,Rr,Pr){if(!wp(Jt,rr,sr,Rr||Jt)&&Pr)throw new TypeError("failed to set property");return sr}function Ul(Jt,rr){return function(sr){if(Array.isArray(sr))return sr}(Jt)||function(sr,Rr){var Pr=sr==null?null:typeof Symbol<"u"&&sr[Symbol.iterator]||sr["@@iterator"];if(Pr!=null){var zr,en,sn,Cn,Or=[],Zr=!0,$r=!1;try{if(sn=(Pr=Pr.call(sr)).next,Rr===0){if(Object(Pr)!==Pr)return;Zr=!1}else for(;!(Zr=(zr=sn.call(Pr)).done)&&(Or.push(zr.value),Or.length!==Rr);Zr=!0);}catch(gn){$r=!0,en=gn}finally{try{if(!Zr&&Pr.return!=null&&(Cn=Pr.return(),Object(Cn)!==Cn))return}finally{if($r)throw en}}return Or}}(Jt,rr)||Gp(Jt,rr)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Au(Jt){return function(rr){if(Array.isArray(rr))return Ip(rr)}(Jt)||function(rr){if(typeof Symbol<"u"&&rr[Symbol.iterator]!=null||rr["@@iterator"]!=null)return Array.from(rr)}(Jt)||Gp(Jt)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Gp(Jt,rr){if(Jt){if(typeof Jt=="string")return Ip(Jt,rr);var sr=Object.prototype.toString.call(Jt).slice(8,-1);return sr==="Object"&&Jt.constructor&&(sr=Jt.constructor.name),sr==="Map"||sr==="Set"?Array.from(Jt):sr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(sr)?Ip(Jt,rr):void 0}}function Ip(Jt,rr){(rr==null||rr>Jt.length)&&(rr=Jt.length);for(var sr=0,Rr=new Array(rr);sr<rr;sr++)Rr[sr]=Jt[sr];return Rr}function Up(Jt){var rr=function(sr,Rr){if(typeof sr!="object"||sr===null)return sr;var Pr=sr[Symbol.toPrimitive];if(Pr!==void 0){var zr=Pr.call(sr,Rr||"default");if(typeof zr!="object")return zr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Rr==="string"?String:Number)(sr)}(Jt,"string");return typeof rr=="symbol"?rr:String(rr)}function nn(Jt,rr){return function(sr,Rr){return Rr.get?Rr.get.call(sr):Rr.value}(Jt,yu(Jt,rr,"get"))}function xs(Jt,rr,sr){return function(Rr,Pr,zr){if(Pr.set)Pr.set.call(Rr,zr);else{if(!Pr.writable)throw new TypeError("attempted to set read only private field");Pr.value=zr}}(Jt,yu(Jt,rr,"set"),sr),sr}function yu(Jt,rr,sr){if(!rr.has(Jt))throw new TypeError("attempted to "+sr+" private field on non-instance");return rr.get(Jt)}function Fs(Jt,rr,sr){if(!rr.has(Jt))throw new TypeError("attempted to get private field on non-instance");return sr}function Vp(Jt,rr){if(rr.has(Jt))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ds(Jt,rr,sr){Vp(Jt,rr),rr.set(Jt,sr)}function Yo(Jt,rr){Vp(Jt,rr),rr.add(Jt)}var _u="https://speed.cloudflare.com",ou={autoStart:!0,downloadApiUrl:"".concat(_u,"/__down"),uploadApiUrl:"".concat(_u,"/__up"),logMeasurementApiUrl:null,logAimApiUrl:"https://aim.cloudflare.com/__log",turnServerUri:"turn.speed.cloudflare.com:50000",turnServerCredsApiUrl:"".concat(_u,"/turn-creds"),turnServerUser:null,turnServerPass:null,rpkiInvalidHost:"invalid.rpki.cloudflare.com",cfTraceUrl:"".concat(_u,"/cdn-cgi/trace"),includeCredentials:!1,measurements:[{type:"latency",numPackets:1},{type:"download",bytes:1e5,count:1,bypassMinDuration:!0},{type:"latency",numPackets:20},{type:"download",bytes:1e5,count:9},{type:"download",bytes:1e6,count:8},{type:"upload",bytes:1e5,count:8},{type:"packetLoss",numPackets:1e3,batchSize:10,batchWaitTime:10,responsesWaitTime:3e3},{type:"upload",bytes:1e6,count:6},{type:"download",bytes:1e7,count:6},{type:"upload",bytes:1e7,count:4},{type:"download",bytes:25e6,count:4},{type:"upload",bytes:25e6,count:4},{type:"download",bytes:1e8,count:3},{type:"upload",bytes:5e7,count:3},{type:"download",bytes:25e7,count:2}],measureDownloadLoadedLatency:!0,measureUploadLoadedLatency:!0,loadedLatencyThrottle:400,bandwidthFinishRequestDuration:1e3,estimatedServerTime:10,latencyPercentile:.5,bandwidthPercentile:.9,bandwidthMinRequestDuration:10,loadedRequestMinDuration:250,loadedLatencyMaxPoints:20},qp={aimMeasurementScoring:{packetLoss:Ll([.01,.05,.25,.5],[10,5,0,-10,-20]),latency:Ll([10,20,50,100,500],[20,10,5,0,-10,-20]),loadedLatencyIncrease:Ll([10,20,50,100,500],[20,10,5,0,-10,-20]),jitter:Ll([10,20,100,500],[10,5,0,-10,-20]),download:Ll([1e6,1e7,5e7,1e8],[0,5,10,20,30]),upload:Ll([1e6,1e7,5e7,1e8],[0,5,10,20,30])},aimExperiencesDefs:{streaming:{input:["latency","packetLoss","download","loadedLatencyIncrease"],pointThresholds:[15,20,40,60]},gaming:{input:["latency","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,30]},rtc:{input:["latency","jitter","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,40]}}},Lp=function(Jt){var rr=Jt.headers.get("server-timing");if(rr){var sr=rr.match(/dur=([0-9.]+)/);if(sr)return+sr[1]}},Ep=function(Jt){return Jt.responseStart-Jt.requestStart},tm=function(Jt){return Jt.responseEnd-Jt.responseStart},Kp=function(Jt){return Jt.ping+Jt.payloadDownloadTime},zp=function(Jt){return Jt.ttfb},Xp=function(Jt,rr){var sr=Jt.duration,Rr=Jt.transferSize,Pr=sr/1e3;return Pr?8*(Rr||1.005*+rr)/Pr:void 0},ip=function(Jt,rr){var sr=Jt.duration/1e3;return sr?8*rr*1.005/sr:void 0},rm=cs(function(Jt){return"0".repeat(Jt)}),Rp=new WeakMap,Fu=new WeakMap,Bu=new WeakMap,Cp=new WeakMap,Tp=new WeakMap,Ql=new WeakMap,Xl=new WeakMap,Uu=new WeakMap,Jl=new WeakMap,lu=new WeakMap,ku=new WeakMap,Vu=new WeakMap,sp=new WeakMap,op=new WeakMap,Rl=new WeakMap,Il=new WeakMap,Dr=new WeakMap,pr=new WeakMap,dr=new WeakMap,mr=new WeakMap,wr=new WeakMap,rn=new WeakMap,hn=new WeakSet,zn=new WeakSet,Wn=new WeakSet,us=new WeakSet;function ds(Jt){var rr=this;Jt!==nn(this,Vu)&&(xs(this,Vu,Jt),setTimeout(function(){return nn(rr,Cp).call(rr,nn(rr,Vu))}))}function hs(Jt,rr){var sr=this,Rr=nn(this,Jl)[Jt],Pr=Rr.bytes,zr=Rr.dir,en=nn(this,op),sn=en[zr].hasOwnProperty(Pr)?en[zr][Pr]:{timings:[],numMeasurements:nn(this,Jl).filter(function(Cn){var Or=Cn.bytes,Zr=Cn.dir;return Pr===Or&&zr===Zr}).map(function(Cn){return Cn.count}).reduce(function(Cn,Or){return Cn+Or},0)};rr&&sn.timings.push(rr),sn.timings=sn.timings.slice(-sn.numMeasurements),en[zr][Pr]=sn,rr?setTimeout(function(){nn(sr,Ql).call(sr,mu({type:zr,bytes:Pr},rr),en)}):nn(this,Tp).call(this,nn(this,Jl)[Jt],en)}function Jr(){var Jt=this,rr=nn(this,Jl),sr=rr[nn(this,Rl)];if(nn(this,Il)>=sr.count){var Rr=nn(this,sp);if(nn(this,pr)>this.finishRequestDuration&&!sr.bypassMinDuration){var Pr=sr.dir;nn(this,sp)[Pr]=!0,Object.values(nn(this,sp)).every(function(Jn){return Jn})&&nn(this,Xl).call(this,nn(this,op))}xs(this,Il,0),xs(this,pr,-1/0),performance.clearResourceTimings();do xs(this,Rl,nn(this,Rl)+1);while(nn(this,Rl)<rr.length&&Rr[rr[nn(this,Rl)].dir]);if(nn(this,Rl)>=rr.length)return xs(this,sp,{down:!0,up:!0}),Fs(this,hn,ds).call(this,!1),void nn(this,Xl).call(this,nn(this,op));sr=rr[nn(this,Rl)]}var zr=nn(this,Rl);nn(this,Il)===0&&Fs(this,zn,hs).call(this,zr);var en=sr,sn=en.bytes,Cn=en.dir==="down",Or=nn(this,Cn?lu:ku),Zr=Object.assign({},nn(this,Rp));Cn&&(Zr.bytes="".concat(sn));var $r,gn="".concat(Or.startsWith("http")||Or.startsWith("//")?"":window.location.origin).concat(Or,"?").concat(Object.entries(Zr).map(function(Jn){var ts=Ul(Jn,2),rs=ts[0],Fn=ts[1];return"".concat(rs,"=").concat(Fn)}).join("&")),Pn=Object.assign({},Cn?{}:{method:"POST",body:rm(sn)},nn(this,Fu)),_i=xs(this,wr,fetch(gn,Pn).then(function(Jn){if(Jn.ok)return Jn;throw Error(Jn.statusText)}).then(function(Jn){return Jt.getServerTime&&($r=Jt.getServerTime(Jn)),Jn}).then(function(Jn){return Jn.text().then(function(ts){return nn(Jt,Bu)&&nn(Jt,Bu).call(Jt,{url:gn,headers:Jn.headers,body:ts}),ts})}).then(function(Jn,ts){if(_i._cancel)ts("cancelled");else{var rs=performance.getEntriesByName(gn).slice(-1)[0],Fn={transferSize:rs.transferSize,ttfb:Ep(rs),payloadDownloadTime:tm(rs),serverTime:$r||-1,measTime:new Date};if(Fn.ping=Math.max(.01,Fn.ttfb-($r||nn(Jt,mr))),Fn.duration=(Cn?Kp:zp)(Fn),Fn.bps=(Cn?Xp:ip)(Fn,sn),Cn&&sn){var jn=+sn;Fn.transferSize&&(Fn.transferSize<jn||Fn.transferSize/jn>1.05)&&console.warn("Requested ".concat(jn,"B but received ").concat(Fn.transferSize,"B (").concat(Math.round(Fn.transferSize/jn*1e4)/100,"%)."))}Fs(Jt,zn,hs).call(Jt,zr,Fn);var Bn=Fn.duration;xs(Jt,pr,nn(Jt,pr)<0?Bn:Math.min(nn(Jt,pr),Bn)),xs(Jt,Il,nn(Jt,Il)+1),xs(Jt,Dr,0),nn(Jt,dr)?xs(Jt,rn,setTimeout(function(){return Fs(Jt,Wn,Jr).call(Jt)},nn(Jt,dr))):Fs(Jt,Wn,Jr).call(Jt)}}).catch(function(Jn){var ts,rs;_i._cancel||(console.warn("Error fetching ".concat(gn,": ").concat(Jn)),xs(Jt,Dr,(ts=nn(Jt,Dr),rs=ts++,ts)),rs<20?Fs(Jt,Wn,Jr).call(Jt):(xs(Jt,Dr,0),Fs(Jt,hn,ds).call(Jt,!1),nn(Jt,Uu).call(Jt,"Connection failed to ".concat(gn,". Gave up after ").concat(20," retries."))))}))}function yn(){var Jt=nn(this,wr);Jt&&(Jt._cancel=!0)}var Rs=function(){function Jt(rr){var sr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Rr=sr.downloadApiUrl,Pr=sr.uploadApiUrl,zr=sr.throttleMs,en=zr===void 0?0:zr,sn=sr.estimatedServerTime,Cn=sn===void 0?0:sn;if(Wo(this,Jt),Yo(this,us),Yo(this,Wn),Yo(this,zn),Yo(this,hn),Ds(this,Rp,{writable:!0,value:{}}),Ds(this,Fu,{writable:!0,value:{}}),Qs(this,"finishRequestDuration",1e3),Qs(this,"getServerTime",Lp),Ds(this,Bu,{writable:!0,value:function(Or){return Or}}),Ds(this,Cp,{writable:!0,value:function(){}}),Ds(this,Tp,{writable:!0,value:function(){}}),Ds(this,Ql,{writable:!0,value:function(){}}),Ds(this,Xl,{writable:!0,value:function(){}}),Ds(this,Uu,{writable:!0,value:function(){}}),Ds(this,Jl,{writable:!0,value:void 0}),Ds(this,lu,{writable:!0,value:void 0}),Ds(this,ku,{writable:!0,value:void 0}),Ds(this,Vu,{writable:!0,value:!1}),Ds(this,sp,{writable:!0,value:{down:!1,up:!1}}),Ds(this,op,{writable:!0,value:{down:{},up:{}}}),Ds(this,Rl,{writable:!0,value:0}),Ds(this,Il,{writable:!0,value:0}),Ds(this,Dr,{writable:!0,value:0}),Ds(this,pr,{writable:!0,value:-1/0}),Ds(this,dr,{writable:!0,value:0}),Ds(this,mr,{writable:!0,value:0}),Ds(this,wr,{writable:!0,value:void 0}),Ds(this,rn,{writable:!0,value:void 0}),!rr)throw new Error("Missing measurements argument");if(!Rr)throw new Error("Missing downloadApiUrl argument");if(!Pr)throw new Error("Missing uploadApiUrl argument");xs(this,Jl,rr),xs(this,lu,Rr),xs(this,ku,Pr),xs(this,dr,en),xs(this,mr,Math.max(0,Cn))}return Bl(Jt,[{key:"results",get:function(){return nn(this,op)}},{key:"qsParams",get:function(){return nn(this,Rp)},set:function(rr){xs(this,Rp,rr)}},{key:"fetchOptions",get:function(){return nn(this,Fu)},set:function(rr){xs(this,Fu,rr)}},{key:"responseHook",set:function(rr){xs(this,Bu,rr)}},{key:"onRunningChange",set:function(rr){xs(this,Cp,rr)}},{key:"onNewMeasurementStarted",set:function(rr){xs(this,Tp,rr)}},{key:"onMeasurementResult",set:function(rr){xs(this,Ql,rr)}},{key:"onFinished",set:function(rr){xs(this,Xl,rr)}},{key:"onConnectionError",set:function(rr){xs(this,Uu,rr)}},{key:"pause",value:function(){clearTimeout(nn(this,rn)),Fs(this,us,yn).call(this),Fs(this,hn,ds).call(this,!1)}},{key:"play",value:function(){nn(this,Vu)||(Fs(this,hn,ds).call(this,!0),Fs(this,Wn,Jr).call(this))}}]),Jt}(),Ls=["measureParallelLatency","parallelLatencyThrottleMs","downloadApiUrl","uploadApiUrl","estimatedServerTime"],Sn=new WeakMap,Ss=new WeakSet;function fs(Jt){var rr=this;nn(this,Sn)&&(Jt?setTimeout(function(){return nn(rr,Sn).play()},20):nn(this,Sn).pause())}var Ks=function(Jt){Sp(sr,Jt);var rr=Bp(sr);function sr(Rr){var Pr,zr,en,sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Cn=sn.measureParallelLatency,Or=Cn!==void 0&&Cn,Zr=sn.parallelLatencyThrottleMs,$r=Zr===void 0?100:Zr,gn=sn.downloadApiUrl,Pn=sn.uploadApiUrl,_i=sn.estimatedServerTime,Jn=_i===void 0?0:_i,ts=_d(sn,Ls);return Wo(this,sr),Yo(_o(en=rr.call(this,Rr,mu({downloadApiUrl:gn,uploadApiUrl:Pn,estimatedServerTime:Jn},ts))),Ss),Ds(_o(en),Sn,{writable:!0,value:void 0}),Or&&(xs(_o(en),Sn,new Rs([{dir:"down",bytes:0,count:1/0,bypassMinDuration:!0}],{downloadApiUrl:gn,uploadApiUrl:Pn,estimatedServerTime:Jn,throttleMs:$r})),nn(_o(en),Sn).qsParams={during:"".concat(Rr[0].dir,"load")},_a((Pr=_o(en),ga(sr.prototype)),"onRunningChange",Fs(_o(en),Ss,fs),Pr,!0),_a((zr=_o(en),ga(sr.prototype)),"onConnectionError",function(){return nn(_o(en),Sn).pause()},zr,!0)),en}return Bl(sr,[{key:"latencyResults",get:function(){return nn(this,Sn)&&nn(this,Sn).results.down[0].timings}},{key:"onParallelLatencyResult",set:function(Rr){nn(this,Sn)&&(nn(this,Sn).onMeasurementResult=function(Pr){return Rr(Pr)})}},{key:"fetchOptions",get:function(){return vu(ga(sr.prototype),"fetchOptions",this)},set:function(Rr){_a(ga(sr.prototype),"fetchOptions",Rr,this,!0),nn(this,Sn)&&(nn(this,Sn).fetchOptions=Rr)}},{key:"onRunningChange",set:function(Rr){var Pr=this;_a(ga(sr.prototype),"onRunningChange",function(zr){Fs(Pr,Ss,fs).call(Pr,zr),Rr(zr)},this,!0)}},{key:"onConnectionError",set:function(Rr){var Pr=this;_a(ga(sr.prototype),"onConnectionError",function(){nn(Pr,Sn)&&nn(Pr,Sn).pause(),Rr.apply(void 0,arguments)},this,!0)}}]),sr}(Rs),Js=["measurementId","logApiUrl"],Ms=new WeakMap,Cs=new WeakMap,Xs=new WeakMap,so=new WeakMap,po=new WeakSet,Es=new WeakSet;function zs(Jt){nn(this,so)&&(xs(this,Xs,+Jt.headers.get("cf-meta-request-time")),xs(this,Cs,Jt.body.slice(-300).split("___").pop()))}function Qo(Jt){if(nn(this,so)){var rr={type:Jt.type,bytes:Jt.bytes,ping:Math.round(Jt.ping),ttfb:Math.round(Jt.ttfb),payloadDownloadTime:Math.round(Jt.payloadDownloadTime),duration:Math.round(Jt.duration),transferSize:Math.round(Jt.transferSize),serverTime:Math.round(Jt.serverTime),token:nn(this,Cs),requestTime:nn(this,Xs),measId:nn(this,Ms)};xs(this,Cs,null),xs(this,Xs,null),fetch(nn(this,so),mu({method:"POST",body:JSON.stringify(rr)},this.fetchOptions))}}var qo=function(Jt){Sp(sr,Jt);var rr=Bp(sr);function sr(Rr){var Pr,zr,en,sn,Cn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Or=Cn.measurementId,Zr=Cn.logApiUrl,$r=_d(Cn,Js);return Wo(this,sr),Yo(_o(sn=rr.call(this,Rr,$r)),Es),Yo(_o(sn),po),Ds(_o(sn),Ms,{writable:!0,value:void 0}),Ds(_o(sn),Cs,{writable:!0,value:void 0}),Ds(_o(sn),Xs,{writable:!0,value:void 0}),Ds(_o(sn),so,{writable:!0,value:void 0}),xs(_o(sn),Ms,Or),xs(_o(sn),so,Zr),_a((Pr=_o(sn),ga(sr.prototype)),"qsParams",Zr?{measId:nn(_o(sn),Ms)}:{},Pr,!0),_a((zr=_o(sn),ga(sr.prototype)),"responseHook",function(gn){return Fs(_o(sn),po,zs).call(_o(sn),gn)},zr,!0),_a((en=_o(sn),ga(sr.prototype)),"onMeasurementResult",function(gn){return Fs(_o(sn),Es,Qo).call(_o(sn),gn)},en,!0),sn}return Bl(sr,[{key:"qsParams",set:function(Rr){_a(ga(sr.prototype),"qsParams",nn(this,so)?mu({measId:nn(this,Ms)},Rr):Rr,this,!0)}},{key:"responseHook",set:function(Rr){var Pr=this;_a(ga(sr.prototype),"responseHook",function(zr){Rr(zr),Fs(Pr,po,zs).call(Pr,zr)},this,!0)}},{key:"onMeasurementResult",set:function(Rr){var Pr=this;_a(ga(sr.prototype),"onMeasurementResult",function(zr){for(var en=arguments.length,sn=new Array(en>1?en-1:0),Cn=1;Cn<en;Cn++)sn[Cn-1]=arguments[Cn];Rr.apply(void 0,[zr].concat(sn)),Fs(Pr,Es,Qo).call(Pr,zr)},this,!0)}}]),sr}(Ks),ro=new WeakMap,Po=new WeakMap,Do=new WeakMap,mo=new WeakSet,xo=new WeakSet,ho=new WeakSet,Cl=function(){function Jt(rr){if(Wo(this,Jt),Yo(this,ho),Yo(this,xo),Yo(this,mo),Ds(this,ro,{writable:!0,value:!1}),Ds(this,Po,{writable:!0,value:void 0}),Ds(this,Do,{writable:!0,value:void 0}),!rr)throw new Error("Missing operation to perform");xs(this,Do,rr),this.play()}return Bl(Jt,[{key:"pause",value:function(){Fs(this,ho,Ko).call(this),Fs(this,mo,ls).call(this,!1)}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){nn(this,ro)||(Fs(this,mo,ls).call(this,!0),Fs(this,xo,vo).call(this))}}]),Jt}();function ls(Jt){Jt!==nn(this,ro)&&xs(this,ro,Jt)}function vo(){var Jt=this,rr=xs(this,Po,nn(this,Do).call(this).then(function(){!rr._cancel&&Fs(Jt,xo,vo).call(Jt)}))}function Ko(){var Jt=nn(this,Po);Jt&&(Jt._cancel=!0)}var wo=new WeakMap,Pl=function(){function Jt(){var rr=this,sr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Rr=sr.download,Pr=sr.upload;if(Wo(this,Jt),Qs(this,"qsParams",{}),Qs(this,"fetchOptions",{}),Ds(this,wo,{writable:!0,value:[]}),!Rr&&!Pr)throw new Error("Missing at least one of download/upload config");[[Rr,"download"],[Pr,"upload"]].filter(function(en){return Ul(en,1)[0]}).forEach(function(en){var sn=Ul(en,2),Cn=sn[0],Or=sn[1],Zr=Cn.apiUrl,$r=Cn.chunkSize;if(!Zr)throw new Error("Missing ".concat(Or," apiUrl argument"));if(!$r)throw new Error("Missing ".concat(Or," chunkSize argument"))});var zr=function(en){var sn=en.apiUrl,Cn=en.qsParams,Or=Cn===void 0?{}:Cn,Zr=en.fetchOptions,$r=Zr===void 0?{}:Zr;return new Cl(function(){var gn=Object.assign({},Or,rr.qsParams),Pn="".concat(sn.startsWith("http")||sn.startsWith("//")?"":window.location.origin).concat(sn,"?").concat(Object.entries(gn).map(function(Jn){var ts=Ul(Jn,2),rs=ts[0],Fn=ts[1];return"".concat(rs,"=").concat(Fn)}).join("&")),_i=Object.assign({},$r,rr.fetchOptions);return fetch(Pn,_i).then(function(Jn){if(Jn.ok)return Jn;throw Error(Jn.statusText)}).then(function(Jn){return Jn.text()})})};Rr&&nn(this,wo).push(zr({apiUrl:Rr.apiUrl,qsParams:{bytes:"".concat(Rr.chunkSize)}})),Pr&&nn(this,wo).push(zr({apiUrl:Pr.apiUrl,fetchOptions:{method:"POST",body:"0".repeat(Pr.chunkSize)}}))}return Bl(Jt,[{key:"pause",value:function(){nn(this,wo).forEach(function(rr){return rr.pause()})}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){nn(this,wo).forEach(function(rr){return rr.play()})}}]),Jt}(),qs=["iceServers","acceptIceCandidate","dataChannelCfg"],Oo=new WeakMap,ks=new WeakMap,Eo=new WeakMap,xa=new WeakMap,tu=new WeakMap,zu=function(){function Jt(){var rr=this,sr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Rr=sr.iceServers,Pr=Rr===void 0?[]:Rr,zr=sr.acceptIceCandidate,en=zr===void 0?function(Pn){var _i=Pn.protocol||"";if(!_i&&Pn.candidate){var Jn=Pn.candidate.split(" ");Jn.length>=3&&(_i=Jn[2])}return _i.toLowerCase()==="udp"}:zr,sn=sr.dataChannelCfg,Cn=sn===void 0?{ordered:!1,maxRetransmits:0}:sn,Or=_d(sr,qs);Wo(this,Jt),Qs(this,"onOpen",function(){}),Qs(this,"onClose",function(){}),Qs(this,"onMessageReceived",function(){}),Ds(this,Oo,{writable:!0,value:!1}),Ds(this,ks,{writable:!0,value:void 0}),Ds(this,Eo,{writable:!0,value:void 0}),Ds(this,xa,{writable:!0,value:void 0}),Ds(this,tu,{writable:!0,value:void 0});var Zr=new RTCPeerConnection(mu({iceServers:Pr},Or)),$r=new RTCPeerConnection(mu({iceServers:Pr},Or)),gn=Zr.createDataChannel("channel",Cn);gn.onopen=function(){xs(rr,Oo,!0),rr.onOpen()},gn.onclose=function(){return rr.close()},$r.ondatachannel=function(Pn){var _i=Pn.channel;_i.onclose=function(){return rr.close()},_i.onmessage=function(Jn){return rr.onMessageReceived(Jn.data)},xs(rr,tu,_i)},Zr.onicecandidate=function(Pn){Pn.candidate&&en(Pn.candidate)&&$r.addIceCandidate(Pn.candidate)},$r.onicecandidate=function(Pn){Pn.candidate&&en(Pn.candidate)&&Zr.addIceCandidate(Pn.candidate)},Zr.createOffer().then(function(Pn){return Zr.setLocalDescription(Pn)}).then(function(){return $r.setRemoteDescription(Zr.localDescription)}).then(function(){return $r.createAnswer()}).then(function(Pn){return $r.setLocalDescription(Pn)}).then(function(){return Zr.setRemoteDescription($r.localDescription)}),xs(this,ks,Zr),xs(this,Eo,$r),xs(this,xa,gn),xs(this,Oo,!1)}return Bl(Jt,[{key:"send",value:function(rr){return nn(this,xa).send(rr)}},{key:"close",value:function(){return nn(this,ks)&&nn(this,ks).close(),nn(this,Eo)&&nn(this,Eo).close(),nn(this,xa)&&nn(this,xa).close(),nn(this,tu)&&nn(this,tu).close(),nn(this,Oo)&&this.onClose(),xs(this,Oo,!1),this}}]),Jt}(),Hu=new WeakMap,Iu=new WeakMap,lp=new WeakMap,cu=new WeakMap,_h=new WeakMap,xl=new WeakMap,Lu=function(){function Jt(){var rr=this,sr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Rr=sr.turnServerUri,Pr=sr.turnServerCredsApi,zr=sr.turnServerCredsApiParser,en=zr===void 0?function(vs){return{turnServerUser:vs.username,turnServerPass:vs.credential}}:zr,sn=sr.turnServerCredsApiIncludeCredentials,Cn=sn!==void 0&&sn,Or=sr.turnServerUser,Zr=sr.turnServerPass,$r=sr.numMsgs,gn=$r===void 0?100:$r,Pn=sr.batchSize,_i=Pn===void 0?10:Pn,Jn=sr.batchWaitTime,ts=Jn===void 0?10:Jn,rs=sr.responsesWaitTime,Fn=rs===void 0?5e3:rs,jn=sr.connectionTimeout,Bn=jn===void 0?5e3:jn;if(Wo(this,Jt),Ds(this,Hu,{writable:!0,value:function(){}}),Ds(this,Iu,{writable:!0,value:function(){}}),Ds(this,lp,{writable:!0,value:function(){}}),Qs(this,"onMsgSent",function(){}),Qs(this,"onAllMsgsSent",function(){}),Qs(this,"onMsgReceived",function(){}),Ds(this,cu,{writable:!0,value:{}}),Ds(this,_h,{writable:!0,value:void 0}),Ds(this,xl,{writable:!0,value:void 0}),!Rr)throw new Error("Missing turnServerUri argument");if(!(Or&&Zr||Pr))throw new Error("Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments");xs(this,xl,gn),(Or&&Zr?Promise.resolve({turnServerUser:Or,turnServerPass:Zr}):fetch(Pr,{credentials:Cn?"include":void 0}).then(function(vs){return vs.json()}).then(function(vs){if(vs.error)throw vs.error;return vs}).then(en)).catch(function(vs){return nn(rr,Hu).call(rr,vs)}).then(function(vs){var Ps=vs.turnServerUser,fo=vs.turnServerPass,eo=xs(rr,_h,new zu({iceServers:[{urls:"turn:".concat(Rr,"?transport=udp"),username:Ps,credential:fo}],iceTransportPolicy:"relay"})),Sl=!1;setTimeout(function(){Sl||(eo.close(),nn(rr,Iu).call(rr,"ICE connection timeout!"))},Bn);var El=nn(rr,cu);eo.onOpen=function(){Sl=!0;var No=rr;(function Zl(Co){if(Co<=gn){for(var Ol=Co;Ol<=Math.min(gn,Co+_i-1);)El[Ol]=!1,eo.send(Ol),No.onMsgSent(Ol),Ol++;setTimeout(function(){return Zl(Ol)},ts)}else{No.onAllMsgsSent(Object.keys(El).length);var Mu=function(){eo.close(),nn(No,lp).call(No,No.results)},Ou=setTimeout(Mu,Fn),rp=Object.values(nn(No,cu)).filter(function(Tl){return!Tl}).length;eo.onMessageReceived=function(Tl){clearTimeout(Ou),El[Tl]=!0,No.onMsgReceived(Tl),--rp<=0&&Object.values(nn(No,cu)).every(function(Qp){return Qp})?Mu():Ou=setTimeout(Mu,Fn)}}})(1)},eo.onMessageReceived=function(No){El[No]=!0,rr.onMsgReceived(No)}}).catch(function(vs){return nn(rr,Iu).call(rr,vs.toString())})}return Bl(Jt,[{key:"onCredentialsFailure",set:function(rr){xs(this,Hu,rr)}},{key:"onConnectionError",set:function(rr){xs(this,Iu,rr)}},{key:"onFinished",set:function(rr){xs(this,lp,rr)}},{key:"results",get:function(){var rr=nn(this,xl),sr=Object.keys(nn(this,cu)).length,Rr=Object.entries(nn(this,cu)).filter(function(Pr){return!Ul(Pr,2)[1]}).map(function(Pr){return+Ul(Pr,1)[0]});return{totalMessages:rr,numMessagesSent:sr,packetLoss:Rr.length/sr,lostMessages:Rr}}}]),Jt}(),xu=["downloadChunkSize","uploadChunkSize","downloadApiUrl","uploadApiUrl"],Dl=new WeakMap,uu=function(Jt){Sp(sr,Jt);var rr=Bp(sr);function sr(){var Rr,Pr,zr,en,sn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Cn=sn.downloadChunkSize,Or=sn.uploadChunkSize,Zr=sn.downloadApiUrl,$r=sn.uploadApiUrl,gn=_d(sn,xu);return Wo(this,sr),Ds(_o(en=rr.call(this,gn)),Dl,{writable:!0,value:void 0}),(Cn||Or)&&(xs(_o(en),Dl,new Pl({download:Cn?{apiUrl:Zr,chunkSize:Cn}:null,upload:Or?{apiUrl:$r,chunkSize:Or}:null})),_a((Rr=_o(en),ga(sr.prototype)),"onCredentialsFailure",_a((zr=_o(en),ga(sr.prototype)),"onConnectionError",_a((Pr=_o(en),ga(sr.prototype)),"onFinished",function(){return nn(_o(en),Dl).stop()},Pr,!0),zr,!0),Rr,!0)),en}return Bl(sr,[{key:"qsParams",set:function(Rr){nn(this,Dl)&&(nn(this,Dl).qsParams=Rr)}},{key:"fetchOptions",set:function(Rr){nn(this,Dl)&&(nn(this,Dl).fetchOptions=Rr)}},{key:"onCredentialsFailure",set:function(Rr){var Pr=this;_a(ga(sr.prototype),"onCredentialsFailure",function(){Rr.apply(void 0,arguments),nn(Pr,Dl)&&nn(Pr,Dl).stop()},this,!0)}},{key:"onConnectionError",set:function(Rr){var Pr=this;_a(ga(sr.prototype),"onConnectionError",function(){Rr.apply(void 0,arguments),nn(Pr,Dl)&&nn(Pr,Dl).stop()},this,!0)}},{key:"onFinished",set:function(Rr){var Pr=this;_a(ga(sr.prototype),"onFinished",function(){Rr.apply(void 0,arguments),nn(Pr,Dl)&&nn(Pr,Dl).stop()},this,!0)}}]),sr}(Lu),Wu=["reachable"],Gu=Bl(function Jt(rr){var sr=this,Rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pr=Rr.timeout,zr=Pr===void 0?-1:Pr,en=Rr.fetchOptions,sn=en===void 0?{}:en;Wo(this,Jt),Qs(this,"onFinished",function(){});var Cn=!1,Or=function(Zr){var $r=Zr.reachable,gn=_d(Zr,Wu);Cn||(Cn=!0,sr.onFinished(mu({targetUrl:rr,reachable:$r},gn)))};fetch(rr,sn).then(function(Zr){Or({reachable:!0,response:Zr})}).catch(function(Zr){Or({reachable:!1,error:Zr})}),zr>0&&setTimeout(function(){return Or({reachable:!1,error:"Request timeout"})},zr)}),Su=function(Jt){var rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;if(!Jt.length)return 0;var sr=Jt.slice().sort(function(en,sn){return en-sn}),Rr=(Jt.length-1)*rr,Pr=Rr%1;if(Pr===0)return sr[Math.round(Rr)];var zr=[Math.floor,Math.ceil].map(function(en){return sr[en(Rr)]});return zr[0]+(zr[1]-zr[0])*Pr},du=new WeakMap,wu=new WeakMap,qu=function(){function Jt(rr){var sr=this;Wo(this,Jt),Qs(this,"getLatencyPoints",function(Rr){return Rr.timings.map(function(Pr){return Pr.ping})}),Qs(this,"getLatency",function(Rr){return Su(sr.getLatencyPoints(Rr),nn(sr,du).latencyPercentile)}),Qs(this,"getBandwidthPoints",function(Rr){return Object.entries(Rr).map(function(Pr){var zr=Ul(Pr,2),en=zr[0];return zr[1].timings.map(function(sn){var Cn=sn.bps,Or=sn.duration,Zr=sn.ping,$r=sn.measTime,gn=sn.serverTime,Pn=sn.transferSize;return{bytes:+en,bps:Cn,duration:Or,ping:Zr,measTime:$r,serverTime:gn,transferSize:Pn}})}).flat()}),Qs(this,"getBandwidth",function(Rr){return Su(sr.getBandwidthPoints(Rr).filter(function(Pr){return Pr.duration>=nn(sr,du).bandwidthMinRequestDuration}).map(function(Pr){return Pr.bps}).filter(function(Pr){return Pr}),nn(sr,du).bandwidthPercentile)}),Qs(this,"getLoadedLatency",function(Rr){return sr.getLatency({timings:nn(sr,wu).call(sr,Rr)})}),Qs(this,"getLoadedJitter",function(Rr){return sr.getJitter({timings:nn(sr,wu).call(sr,Rr)})}),Qs(this,"getLoadedLatencyPoints",function(Rr){return sr.getLatencyPoints({timings:nn(sr,wu).call(sr,Rr)})}),Qs(this,"getPacketLoss",function(Rr){return Rr.packetLoss}),Qs(this,"getPacketLossDetails",function(Rr){return Rr}),Qs(this,"getReachability",function(Rr){return!!Rr.reachable}),Qs(this,"getReachabilityDetails",function(Rr){return{host:Rr.host,reachable:Rr.reachable}}),Ds(this,du,{writable:!0,value:void 0}),Ds(this,wu,{writable:!0,value:function(Rr){return Object.values(Rr).filter(function(Pr){return Pr.timings.length&&Math.min.apply(Math,Au(Pr.timings.map(function(zr){return zr.duration})))>=nn(sr,du).loadedRequestMinDuration}).map(function(Pr){return Pr.sideLatency||[]}).flat().slice(-nn(sr,du).loadedLatencyMaxPoints)}}),xs(this,du,rr)}return Bl(Jt,[{key:"getJitter",value:function(rr){var sr=this.getLatencyPoints(rr);return sr.length<2?null:sr.reduce(function(Rr,Pr){var zr=Rr.sumDeltas,en=zr===void 0?0:zr,sn=Rr.prevLatency;return{sumDeltas:en+(sn!==void 0?Math.abs(sn-Pr):0),prevLatency:Pr}},{}).sumDeltas/(sr.length-1)}}]),Jt}(),hu=["bad","poor","average","good","great"],Eu={loadedLatencyIncrease:function(Jt){return Jt.latency&&(Jt.downLoadedLatency||Jt.upLoadedLatency)?Math.max(Jt.downLoadedLatency,Jt.upLoadedLatency)-Jt.latency:void 0}},Xo={packetLoss:0},Gl=new WeakMap,up=function(){function Jt(rr){Wo(this,Jt),Ds(this,Gl,{writable:!0,value:void 0}),xs(this,Gl,rr)}return Bl(Jt,[{key:"getScores",value:function(rr){var sr=Object.assign.apply(Object,Au(Object.entries(nn(this,Gl).aimMeasurementScoring).map(function(Rr){var Pr=Ul(Rr,2),zr=Pr[0],en=Pr[1],sn=Eu.hasOwnProperty(zr)?Eu[zr](rr):rr[zr];return sn===void 0?Xo.hasOwnProperty(zr)?Qs({},zr,Xo[zr]):{}:Qs({},zr,sn===void 0?0:+en(sn))})));return Object.assign.apply(Object,[{}].concat(Au(Object.entries(nn(this,Gl).aimExperiencesDefs).filter(function(Rr){return Ul(Rr,2)[1].input.every(function(Pr){return sr.hasOwnProperty(Pr)})}).map(function(Rr){var Pr,zr=Ul(Rr,2),en=zr[0],sn=zr[1],Cn=sn.input,Or=sn.pointThresholds,Zr=Math.max(0,(Pr=Cn.map(function(gn){return sr[gn]}),Pr.reduce(function(gn,Pn){return gn+Pn},0))),$r=Ll(Or,[0,1,2,3,4])(Zr);return Qs({},en,{points:Zr,classificationIdx:$r,classificationName:hu[$r]})}))))}}]),Jt}(),Ru=new WeakMap,dp=new WeakMap,hp=new WeakMap,Zo=new WeakMap,Ku=new WeakMap,fu=new WeakMap,Cu=new WeakMap,Du=new WeakMap,Xu=function(){function Jt(rr){var sr=this;Wo(this,Jt),Qs(this,"raw",void 0),Qs(this,"getUnloadedLatency",function(){return nn(sr,Zo).call(sr,"getLatency","latency")}),Qs(this,"getUnloadedJitter",function(){return nn(sr,Zo).call(sr,"getJitter","latency")}),Qs(this,"getUnloadedLatencyPoints",function(){return nn(sr,Zo).call(sr,"getLatencyPoints","latency",[])}),Qs(this,"getDownLoadedLatency",function(){return nn(sr,Zo).call(sr,"getLoadedLatency","download")}),Qs(this,"getDownLoadedJitter",function(){return nn(sr,Zo).call(sr,"getLoadedJitter","download")}),Qs(this,"getDownLoadedLatencyPoints",function(){return nn(sr,Zo).call(sr,"getLoadedLatencyPoints","download",[])}),Qs(this,"getUpLoadedLatency",function(){return nn(sr,Zo).call(sr,"getLoadedLatency","upload")}),Qs(this,"getUpLoadedJitter",function(){return nn(sr,Zo).call(sr,"getLoadedJitter","upload")}),Qs(this,"getUpLoadedLatencyPoints",function(){return nn(sr,Zo).call(sr,"getLoadedLatencyPoints","upload",[])}),Qs(this,"getDownloadBandwidth",function(){return nn(sr,Zo).call(sr,"getBandwidth","download")}),Qs(this,"getDownloadBandwidthPoints",function(){return nn(sr,Zo).call(sr,"getBandwidthPoints","download",[])}),Qs(this,"getUploadBandwidth",function(){return nn(sr,Zo).call(sr,"getBandwidth","upload")}),Qs(this,"getUploadBandwidthPoints",function(){return nn(sr,Zo).call(sr,"getBandwidthPoints","upload",[])}),Qs(this,"getPacketLoss",function(){return nn(sr,Zo).call(sr,"getPacketLoss","packetLoss")}),Qs(this,"getPacketLossDetails",function(){return nn(sr,Zo).call(sr,"getPacketLossDetails","packetLoss",void 0,!0)}),Qs(this,"getScores",function(){return nn(sr,hp).getScores(sr.getSummary())}),Ds(this,Ru,{writable:!0,value:void 0}),Ds(this,dp,{writable:!0,value:void 0}),Ds(this,hp,{writable:!0,value:void 0}),Ds(this,Zo,{writable:!0,value:function(Rr,Pr){var zr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,en=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return sr.raw.hasOwnProperty(Pr)&&sr.raw[Pr].started?en&&sr.raw[Pr].error?{error:sr.raw[Pr].error}:nn(sr,dp)[Rr](sr.raw[Pr].results):zr}}),Ds(this,Ku,{writable:!0,value:function(){return nn(sr,Zo).call(sr,"getReachability","v4Reachability")}}),Ds(this,fu,{writable:!0,value:function(){return nn(sr,Zo).call(sr,"getReachabilityDetails","v4Reachability")}}),Ds(this,Cu,{writable:!0,value:function(){return nn(sr,Zo).call(sr,"getReachability","v6Reachability")}}),Ds(this,Du,{writable:!0,value:function(){return nn(sr,Zo).call(sr,"getReachabilityDetails","v6Reachability")}}),xs(this,Ru,rr),this.clear(),xs(this,dp,new qu(nn(this,Ru))),xs(this,hp,new up(nn(this,Ru)))}return Bl(Jt,[{key:"isFinished",get:function(){return Object.values(this.raw).every(function(rr){return rr.finished})}},{key:"clear",value:function(){this.raw=Object.assign.apply(Object,[{}].concat(Au(Au(new Set(nn(this,Ru).measurements.map(function(rr){return rr.type}))).map(function(rr){return Qs({},rr,{started:!1,finished:!1,results:{}})}))))}},{key:"getSummary",value:function(){var rr={download:this.getDownloadBandwidth,upload:this.getUploadBandwidth,latency:this.getUnloadedLatency,jitter:this.getUnloadedJitter,downLoadedLatency:this.getDownLoadedLatency,downLoadedJitter:this.getDownLoadedJitter,upLoadedLatency:this.getUpLoadedLatency,upLoadedJitter:this.getUpLoadedJitter,packetLoss:this.getPacketLoss,v4Reachability:nn(this,Ku),v6Reachability:nn(this,Cu)};return Object.assign.apply(Object,Au(Object.entries(rr).map(function(sr){var Rr=Ul(sr,2),Pr=Rr[0],zr=(0,Rr[1])();return zr===void 0?{}:Qs({},Pr,zr)})))}}]),Jt}(),Vl=function(Jt){var rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Jt&&Math.round(Jt*Math.pow(10,rr))/Math.pow(10,rr)},Tu=function(Jt){return Jt.map(function(rr){return Vl(rr,2)})},ns=function(Jt){return Jt.map(function(rr){return{bytes:+rr.bytes,bps:Vl(rr.bps)}})},Jo={latencyMs:["getUnloadedLatencyPoints",Tu],download:["getDownloadBandwidthPoints",ns],upload:["getUploadBandwidthPoints",ns],downLoadedLatencyMs:["getDownLoadedLatencyPoints",Tu],upLoadedLatencyMs:["getUpLoadedLatencyPoints",Tu],packetLoss:["getPacketLossDetails",function(Jt){return Jt.error?void 0:{numMessages:Jt.numMessagesSent,lossRatio:Vl(Jt.packetLoss,4)}}]},Mp=function(Jt,rr){var sr=rr.apiUrl,Rr={};Object.entries(Jo).forEach(function(zr){var en=Ul(zr,2),sn=en[0],Cn=Ul(en[1],2),Or=Cn[0],Zr=Cn[1],$r=Zr===void 0?function(Pn){return Pn}:Zr,gn=Jt[Or]();gn&&(Rr[sn]=$r(gn))});var Pr=Jt.getScores();Pr&&(Rr.scores=Object.assign.apply(Object,[{}].concat(Au(Object.entries(Pr).map(function(zr){var en,sn=Ul(zr,2),Cn=sn[0],Or=sn[1];return Qs({},Cn,{points:(en=Or).points,classification:en.classificationName})}))))),fetch(sr,{method:"POST",body:JSON.stringify(Rr)})},Dp=["type"],fp=["numPackets"],pp=["bytes"],Op=["latency","latencyUnderLoad","download","upload"],Hp=function(){return"".concat(Math.round(1e16*Math.random()))},_c=new WeakMap,_f=new WeakMap,Yn=new WeakMap,cr=new WeakMap,qt=new WeakMap,Yt=new WeakMap,ur=new WeakMap,Xr=new WeakMap,Nn=new WeakMap,Ts=new WeakMap,Ro=new WeakMap,oo=new WeakSet,Io=new WeakSet,mp=new WeakSet,Zp=new WeakSet,km=new WeakSet,Im=new WeakSet,Zu=new WeakSet,Lm=function(){function Jt(){var rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wo(this,Jt),Yo(this,Zu),Yo(this,Im),Yo(this,km),Yo(this,Zp),Yo(this,mp),Yo(this,Io),Yo(this,oo),Qs(this,"onRunningChange",function(){}),Qs(this,"onResultsChange",function(){}),Ds(this,_c,{writable:!0,value:function(){}}),Ds(this,_f,{writable:!0,value:function(){}}),Ds(this,Yn,{writable:!0,value:void 0}),Ds(this,cr,{writable:!0,value:void 0}),Ds(this,qt,{writable:!0,value:Hp()}),Ds(this,Yt,{writable:!0,value:-1}),Ds(this,ur,{writable:!0,value:void 0}),Ds(this,Xr,{writable:!0,value:1e6}),Ds(this,Nn,{writable:!0,value:1e6}),Ds(this,Ts,{writable:!0,value:!1}),Ds(this,Ro,{writable:!0,value:!1}),xs(this,Yn,Object.assign({},ou,rr,qp)),xs(this,cr,new Xu(nn(this,Yn))),nn(this,Yn).autoStart&&this.play()}return Bl(Jt,[{key:"results",get:function(){return nn(this,cr)}},{key:"isRunning",get:function(){return nn(this,Ts)}},{key:"isFinished",get:function(){return nn(this,Ro)}},{key:"onFinish",set:function(rr){xs(this,_c,rr)}},{key:"onError",set:function(rr){xs(this,_f,rr)}},{key:"pause",value:function(){Op.includes(Fs(this,mp,vm).call(this))&&nn(this,ur).pause(),Fs(this,oo,gm).call(this,!1)}},{key:"play",value:function(){nn(this,Ts)||(Fs(this,oo,gm).call(this,!0),Fs(this,Zu,ep).call(this))}},{key:"restart",value:function(){Fs(this,km,Rm).call(this),this.play()}}]),Jt}();function gm(Jt){Jt!==nn(this,Ts)&&(xs(this,Ts,Jt),this.onRunningChange(nn(this,Ts)))}function Em(Jt){var rr=this;Jt!==nn(this,Ro)&&(xs(this,Ro,Jt),Jt&&setTimeout(function(){return nn(rr,_c).call(rr,rr.results)}))}function vm(){return nn(this,Yt)<0||nn(this,Yt)>=nn(this,Yn).measurements.length?null:nn(this,Yn).measurements[nn(this,Yt)].type}function nm(){return nn(this,cr).raw[Fs(this,mp,vm).call(this)]||void 0}function Rm(){Fs(this,Im,Cm).call(this),xs(this,qt,Hp()),xs(this,Yt,-1),xs(this,ur,void 0),Fs(this,oo,gm).call(this,!1),Fs(this,Io,Em).call(this,!1),nn(this,cr).clear()}function Cm(){var Jt=nn(this,ur);Jt&&(Jt.onFinished=Jt.onConnectionError=Jt.onFail=Jt.onMsgReceived=Jt.onCredentialsFailure=Jt.onMeasurementResult=function(){},Op.includes(Fs(this,mp,vm).call(this))&&Jt.pause())}function ep(){var Jt,rr=this;if(!(Op.includes(Fs(this,mp,vm).call(this))&&Fs(this,Zp,nm).call(this)&&Fs(this,Zp,nm).call(this).started)||Fs(this,Zp,nm).call(this).finished||Fs(this,Zp,nm).call(this).finishedCurrentRound||Fs(this,Zp,nm).call(this).error){if(xs(this,Yt,(Jt=nn(this,Yt),++Jt)),nn(this,Yt)>=nn(this,Yn).measurements.length)return Fs(this,oo,gm).call(this,!1),void Fs(this,Io,Em).call(this,!0);var sr,Rr=nn(this,Yn).measurements[nn(this,Yt)],Pr=Rr.type,zr=_d(Rr,Dp),en=Fs(this,Zp,nm).call(this),sn=nn(this,Yn),Cn=sn.downloadApiUrl,Or=sn.uploadApiUrl,Zr=sn.estimatedServerTime;switch(Pr){case"v4Reachability":case"v6Reachability":(sr=new Gu("https://".concat(zr.host),{fetchOptions:{method:"GET",mode:"no-cors"}})).onFinished=function(Bn){en.finished=!0,en.results=mu({host:zr.host},Bn),rr.onResultsChange({type:Pr}),Fs(rr,Zu,ep).call(rr)};break;case"rpki":(sr=new Gu("https://".concat(nn(this,Yn).rpkiInvalidHost),{timeout:5e3})).onFinished=function(Bn){(Bn.response?Bn.response.json():Promise.resolve()).then(function(vs){en.finished=!0,en.results=mu({host:nn(rr,Yn).rpkiInvalidHost,filteringInvalids:!Bn.reachable},vs?{asn:vs.asn,name:vs.name}:{}),rr.onResultsChange({type:Pr}),Fs(rr,Zu,ep).call(rr)})};break;case"nxdomain":(sr=new Gu("https://".concat(zr.nxhost),{fetchOptions:{mode:"no-cors"}})).onFinished=function(Bn){en.finished=!0,en.results={host:zr.nxhost,reachable:Bn.reachable},rr.onResultsChange({type:Pr}),Fs(rr,Zu,ep).call(rr)};break;case"packetLoss":case"packetLossUnderLoad":en.finished=!1;var $r=zr.numPackets,gn=_d(zr,fp),Pn=nn(this,Yn),_i=Pn.turnServerUri,Jn=Pn.turnServerCredsApiUrl,ts=Pn.turnServerUser,rs=Pn.turnServerPass,Fn=Pn.includeCredentials;(sr=new uu(mu({turnServerUri:_i,turnServerCredsApi:Jn,turnServerCredsApiIncludeCredentials:Fn,turnServerUser:ts,turnServerPass:rs,numMsgs:$r,downloadChunkSize:zr.loadDown?nn(this,Xr):void 0,uploadChunkSize:zr.loadUp?nn(this,Nn):void 0,downloadApiUrl:Cn,uploadApiUrl:Or},gn))).onMsgReceived=function(){en.results=Object.assign({},sr.results),rr.onResultsChange({type:Pr})},sr.onFinished=function(){en.finished=!0,rr.onResultsChange({type:Pr}),Fs(rr,Zu,ep).call(rr)},sr.onConnectionError=function(Bn){en.error=Bn,rr.onResultsChange({type:Pr}),nn(rr,_f).call(rr,"Connection error while measuring packet loss: ".concat(Bn)),Fs(rr,Zu,ep).call(rr)},sr.onCredentialsFailure=function(){en.error="unable to get turn server credentials",rr.onResultsChange({type:Pr}),nn(rr,_f).call(rr,"Error while measuring packet loss: unable to get turn server credentials."),Fs(rr,Zu,ep).call(rr)};break;case"latency":case"latencyUnderLoad":en.finished=!1,(sr=new qo([{dir:"down",bytes:0,count:zr.numPackets,bypassMinDuration:!0}],{downloadApiUrl:Cn,uploadApiUrl:Or,estimatedServerTime:Zr,logApiUrl:nn(this,Yn).logMeasurementApiUrl,measurementId:nn(this,qt),downloadChunkSize:zr.loadDown?nn(this,Xr):void 0,uploadChunkSize:zr.loadUp?nn(this,Nn):void 0})).fetchOptions={credentials:nn(this,Yn).includeCredentials?"include":void 0},sr.onMeasurementResult=sr.onNewMeasurementStarted=function(Bn,vs){en.results=Object.assign({},vs.down[0]),rr.onResultsChange({type:Pr})},sr.onFinished=function(){en.finished=!0,rr.onResultsChange({type:Pr}),nn(rr,Ts)&&Fs(rr,Zu,ep).call(rr)},sr.onConnectionError=function(Bn){en.error=Bn,rr.onResultsChange({type:Pr}),nn(rr,_f).call(rr,"Connection error while measuring latency: ".concat(Bn)),Fs(rr,Zu,ep).call(rr)},sr.play();break;case"download":case"upload":if(en.finished||en.error)Fs(this,Zu,ep).call(this);else{delete en.finishedCurrentRound;var jn=nn(this,Yn)["measure".concat(Pr==="download"?"Down":"Up","loadLoadedLatency")];(sr=new qo([mu({dir:Pr==="download"?"down":"up"},zr)],{downloadApiUrl:Cn,uploadApiUrl:Or,estimatedServerTime:Zr,logApiUrl:nn(this,Yn).logMeasurementApiUrl,measurementId:nn(this,qt),measureParallelLatency:jn,parallelLatencyThrottleMs:nn(this,Yn).loadedLatencyThrottle})).fetchOptions={credentials:nn(this,Yn).includeCredentials?"include":void 0},sr.finishRequestDuration=nn(this,Yn).bandwidthFinishRequestDuration,sr.onNewMeasurementStarted=function(Bn){var vs=Bn.count,Ps=Bn.bytes,fo=en.results=Object.assign({},en.results);!fo.hasOwnProperty(Ps)&&(fo[Ps]={timings:[],numMeasurements:0,sideLatency:jn?[]:void 0}),fo[Ps].numMeasurements-fo[Ps].timings.length!==vs&&(fo[Ps].numMeasurements+=vs,rr.onResultsChange({type:Pr}))},sr.onMeasurementResult=function(Bn){var vs=Bn.bytes,Ps=_d(Bn,pp);en.results[vs].timings.push(Ps),en.results=Object.assign({},en.results),rr.onResultsChange({type:Pr})},sr.onParallelLatencyResult=function(Bn){en.results[zr.bytes].sideLatency.push(Bn),en.results=Object.assign({},en.results),rr.onResultsChange({type:Pr})},sr.onFinished=function(Bn){var vs=!nn(rr,Yn).measurements.slice(nn(rr,Yt)+1).map(function(eo){return eo.type}).includes(Pr),Ps=Math.min.apply(Math,Au(Object.values(Pr==="download"?Bn.down:Bn.up).slice(-1)[0].timings.map(function(eo){return eo.duration})));if(vs||!zr.bypassMinDuration&&Ps>nn(rr,Yn).bandwidthFinishRequestDuration){en.finished=!0,rr.onResultsChange({type:Pr});var fo=.5*Object.keys(en.results).map(function(eo){return+eo}).sort(function(eo,Sl){return Sl-eo})[0];Pr==="download"&&xs(rr,Xr,fo),Pr==="upload"&&xs(rr,Nn,fo)}else en.finishedCurrentRound=!0;nn(rr,Ts)&&Fs(rr,Zu,ep).call(rr)},sr.onConnectionError=function(Bn){en.error=Bn,rr.onResultsChange({type:Pr}),nn(rr,_f).call(rr,"Connection error while measuring ".concat(Pr,": ").concat(Bn)),Fs(rr,Zu,ep).call(rr)},sr.play()}}xs(this,ur,sr),en.started=!0,this.onResultsChange({type:Pr})}else nn(this,ur).play()}var om=new WeakMap,Tm=new WeakMap,Vm=function(Jt){Sp(sr,Jt);var rr=Bp(sr);function sr(Rr){var Pr,zr;Wo(this,sr);for(var en=arguments.length,sn=new Array(en>1?en-1:0),Cn=1;Cn<en;Cn++)sn[Cn-1]=arguments[Cn];return Ds(_o(zr=rr.call.apply(rr,[this,Rr].concat(sn))),om,{writable:!0,value:void 0}),Ds(_o(zr),Tm,{writable:!0,value:function(Or){nn(_o(zr),om)&&Mp(Or,{apiUrl:nn(_o(zr),om)})}}),_a((Pr=_o(zr),ga(sr.prototype)),"onFinish",nn(_o(zr),Tm),Pr,!0),xs(_o(zr),om,Object.assign({},ou,Rr,qp).logAimApiUrl),zr}return Bl(sr,[{key:"onFinish",set:function(Rr){var Pr=this;_a(ga(sr.prototype),"onFinish",function(zr){Rr(zr),nn(Pr,Tm).call(Pr,zr)},this,!0)}}]),sr}(Lm);function Yp(Jt,rr){var sr=typeof Symbol<"u"&&Jt[Symbol.iterator]||Jt["@@iterator"];if(!sr){if(Array.isArray(Jt)||(sr=function(Cn,Or){if(Cn){if(typeof Cn=="string")return Dm(Cn,Or);var Zr=Object.prototype.toString.call(Cn).slice(8,-1);if(Zr==="Object"&&Cn.constructor&&(Zr=Cn.constructor.name),Zr==="Map"||Zr==="Set")return Array.from(Cn);if(Zr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Zr))return Dm(Cn,Or)}}(Jt))||rr&&Jt&&typeof Jt.length=="number"){sr&&(Jt=sr);var Rr=0,Pr=function(){};return{s:Pr,n:function(){return Rr>=Jt.length?{done:!0}:{done:!1,value:Jt[Rr++]}},e:function(Cn){throw Cn},f:Pr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var zr,en=!0,sn=!1;return{s:function(){sr=sr.call(Jt)},n:function(){var Cn=sr.next();return en=Cn.done,Cn},e:function(Cn){sn=!0,zr=Cn},f:function(){try{en||sr.return==null||sr.return()}finally{if(sn)throw zr}}}}function Dm(Jt,rr){(rr==null||rr>Jt.length)&&(rr=Jt.length);for(var sr=0,Rr=new Array(rr);sr<rr;sr++)Rr[sr]=Jt[sr];return Rr}var Om=[$t],Nm=!1,tp=function(){function Jt(){(0,mt.Z)(this,Jt)}var rr,sr,Rr,Pr,zr,en,sn,Cn,Or,Zr;return(0,gt.Z)(Jt,null,[{key:"config",value:function($r){if(!$r)throw new Error("'token' is empty, please provide it in config");this.apiKey=$r;var gn=Ft(qr,void 0,Mt.apply(void 0,Om));window.STORE=gn,pn.default.init({store:gn})}},{key:"getCameras",value:(Zr=(0,pt.Z)(vt().mark(function $r(){var gn,Pn,_i,Jn,ts;return vt().wrap(function(rs){for(;;)switch(rs.prev=rs.next){case 0:return rs.next=2,navigator.mediaDevices.enumerateDevices();case 2:gn=rs.sent,Pn=[],_i=Yp(gn);try{for(_i.s();!(Jn=_i.n()).done;)(ts=Jn.value).kind=="videoinput"&&Pn.push(new kp(ts.deviceId,ts.groupId,ts.kind,ts.label))}catch(Fn){_i.e(Fn)}finally{_i.f()}return rs.abrupt("return",Pn);case 7:case"end":return rs.stop()}},$r)})),function(){return Zr.apply(this,arguments)})},{key:"getMicrophones",value:(Or=(0,pt.Z)(vt().mark(function $r(){var gn,Pn,_i,Jn,ts;return vt().wrap(function(rs){for(;;)switch(rs.prev=rs.next){case 0:return rs.next=2,navigator.mediaDevices.enumerateDevices();case 2:gn=rs.sent,Pn=[],_i=Yp(gn);try{for(_i.s();!(Jn=_i.n()).done;)(ts=Jn.value).kind=="audioinput"&&Pn.push(new Mo(ts.deviceId,ts.groupId,ts.kind,ts.label))}catch(Fn){_i.e(Fn)}finally{_i.f()}return rs.abrupt("return",Pn);case 7:case"end":return rs.stop()}},$r)})),function(){return Or.apply(this,arguments)})},{key:"getPlaybackDevices",value:(Cn=(0,pt.Z)(vt().mark(function $r(){var gn,Pn,_i,Jn,ts;return vt().wrap(function(rs){for(;;)switch(rs.prev=rs.next){case 0:return rs.next=2,navigator.mediaDevices.enumerateDevices();case 2:gn=rs.sent,Pn=[],_i=Yp(gn);try{for(_i.s();!(Jn=_i.n()).done;)(ts=Jn.value).kind=="audiooutput"&&Pn.push(new Is(ts.deviceId,ts.groupId,ts.kind,ts.label))}catch(Fn){_i.e(Fn)}finally{_i.f()}return rs.abrupt("return",Pn);case 7:case"end":return rs.stop()}},$r)})),function(){return Cn.apply(this,arguments)})},{key:"getDevices",value:(sn=(0,pt.Z)(vt().mark(function $r(){var gn,Pn,_i,Jn,ts;return vt().wrap(function(rs){for(;;)switch(rs.prev=rs.next){case 0:return rs.next=2,navigator.mediaDevices.enumerateDevices();case 2:gn=rs.sent,Pn=[],_i=Yp(gn);try{for(_i.s();!(Jn=_i.n()).done;)ts=Jn.value,Pn.push(new xp(ts.deviceId,ts.groupId,ts.kind,ts.label))}catch(Fn){_i.e(Fn)}finally{_i.f()}return rs.abrupt("return",Pn);case 7:case"end":return rs.stop()}},$r)})),function(){return sn.apply(this,arguments)})},{key:"on",value:function($r,gn){if($r!=="device-changed")throw new Error("Unsupported event type");this.addDeviceChangeEvent(),this.eventEmitter.on($r,gn)}},{key:"addDeviceChangeEvent",value:function(){var $r=this;Nm||(this.getDevices().then(function(gn){$r.devices=gn}),navigator.mediaDevices.addEventListener("devicechange",function(){var gn=(0,pt.Z)(vt().mark(function Pn(_i){var Jn,ts,rs,Fn,jn;return vt().wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:return Jn=$r.devices,Bn.next=3,$r.getDevices();case 3:$r.devices=Bn.sent,ts=new Array,rs=Yp($r.devices),Bn.prev=6,jn=vt().mark(function vs(){var Ps;return vt().wrap(function(fo){for(;;)switch(fo.prev=fo.next){case 0:Ps=Fn.value,Jn.filter(function(eo){return eo.deviceId==Ps.deviceId&&eo.kind==Ps.kind}).length==0?ts.push(Ps):Jn=Jn.filter(function(eo){return!(eo.deviceId==Ps.deviceId&&eo.kind==Ps.kind)});case 3:case"end":return fo.stop()}},vs)}),rs.s();case 9:if((Fn=rs.n()).done){Bn.next=13;break}return Bn.delegateYield(jn(),"t0",11);case 11:Bn.next=9;break;case 13:Bn.next=18;break;case 15:Bn.prev=15,Bn.t1=Bn.catch(6),rs.e(Bn.t1);case 18:return Bn.prev=18,rs.f(),Bn.finish(18);case 21:ts.length!=0&&$r.eventEmitter.emit("device-changed",{devices:$r.devices}),Jn.length!=0&&$r.eventEmitter.emit("device-changed",{devices:$r.devices});case 23:case"end":return Bn.stop()}},Pn,null,[[6,15,18,21]])}));return function(Pn){return gn.apply(this,arguments)}}()),Nm=!0)}},{key:"off",value:function($r,gn){if($r!=="device-changed")throw new Error("Unsupported event type");this.eventEmitter.off($r,gn)}},{key:"checkPermissions",value:(en=(0,pt.Z)(vt().mark(function $r(gn){var Pn,_i,Jn,ts,rs;return vt().wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:if(gn||(gn=jr.AUDIO_AND_VIDEO),Pn=new Map,!gn.includes(jr.AUDIO)&&!gn.includes(jr.AUDIO_AND_VIDEO)){Fn.next=15;break}return _i=!0,Fn.prev=4,Fn.next=7,navigator.permissions.query({name:"microphone"});case 7:(Jn=Fn.sent).state!="prompt"&&Jn.state!="denied"||(_i=!1),Fn.next=14;break;case 11:throw Fn.prev=11,Fn.t0=Fn.catch(4),Error("Browser does not support microphone permission check");case 14:Pn.set(jr.AUDIO,_i);case 15:if(!gn.includes(jr.VIDEO)&&!gn.includes(jr.AUDIO_AND_VIDEO)){Fn.next=28;break}return ts=!0,Fn.prev=17,Fn.next=20,navigator.permissions.query({name:"camera"});case 20:(rs=Fn.sent).state!="prompt"&&rs.state!="denied"||(ts=!1),Fn.next=27;break;case 24:throw Fn.prev=24,Fn.t1=Fn.catch(17),Error("Browser does not support camera permission check");case 27:Pn.set(jr.VIDEO,ts);case 28:return Fn.abrupt("return",Pn);case 29:case"end":return Fn.stop()}},$r,null,[[4,11],[17,24]])})),function($r){return en.apply(this,arguments)})},{key:"requestPermission",value:(zr=(0,pt.Z)(vt().mark(function $r(gn){var Pn,_i,Jn,ts,rs,Fn,jn;return vt().wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:if(gn||(gn=jr.AUDIO_AND_VIDEO),Pn=new Map,!gn.includes(jr.VIDEO)&&!gn.includes(jr.AUDIO_AND_VIDEO)){Bn.next=27;break}return Jn={audio:!1,video:!0},ts=!0,Bn.prev=5,Bn.next=8,navigator.mediaDevices.getUserMedia(Jn);case 8:_i=Bn.sent,Bn.next=25;break;case 11:if(Bn.prev=11,Bn.t0=Bn.catch(5),!(Bn.t0 instanceof DOMException)){Bn.next=23;break}if(Bn.t0.name!=="NotAllowedError"){Bn.next=17;break}Bn.next=21;break;case 17:if(Bn.t0.name!=="NotFoundError"){Bn.next=21;break}throw new Error("No Video Device Found");case 21:Bn.next=24;break;case 23:console.error("Error",Bn.t0);case 24:ts=!1;case 25:_i&&_i.getTracks().forEach(function(vs){vs.stop()}),Pn.set(jr.VIDEO,ts);case 27:if(!gn.includes(jr.AUDIO)&&!gn.includes(jr.AUDIO_AND_VIDEO)){Bn.next=52;break}return Fn={audio:!0,video:!1},jn=!0,Bn.prev=30,Bn.next=33,navigator.mediaDevices.getUserMedia(Fn);case 33:rs=Bn.sent,Bn.next=50;break;case 36:if(Bn.prev=36,Bn.t1=Bn.catch(30),!(Bn.t1 instanceof DOMException)){Bn.next=48;break}if(Bn.t1.name!=="NotAllowedError"){Bn.next=42;break}Bn.next=46;break;case 42:if(Bn.t1.name!=="NotFoundError"){Bn.next=46;break}throw new Error("No Audio Device Found");case 46:Bn.next=49;break;case 48:console.error("Error",Bn.t1);case 49:jn=!1;case 50:rs&&rs.getTracks().forEach(function(vs){vs.stop()}),Pn.set(jr.AUDIO,jn);case 52:return Bn.abrupt("return",Pn);case 53:case"end":return Bn.stop()}},$r,null,[[5,11],[30,36]])})),function($r){return zr.apply(this,arguments)})},{key:"isInt",value:function($r){return typeof $r=="number"&&$r%1==0}},{key:"getNetworkStats",value:(Pr=(0,pt.Z)(vt().mark(function $r(){var gn,Pn,_i,Jn=arguments;return vt().wrap(function(ts){for(;;)switch(ts.prev=ts.next){case 0:return(gn=(Jn.length>0&&Jn[0]!==void 0?Jn[0]:{}).timeoutDuration)&&this.isInt(gn)||(gn=6e4),Pn=new Promise(function(rs,Fn){setTimeout(function(){Fn("Not able to get NetworkStats due to timeout")},gn)}),_i=new Promise(function(rs,Fn){if(navigator.onLine){var jn=new Vm({measureDownloadLoadedLatency:!1,measureUploadLoadedLatency:!1,measurements:[{type:"upload",bytes:3e6,count:1,bypassMinDuration:!0},{type:"download",bytes:3e6,count:1,bypassMinDuration:!0}]});jn.isRunning?(jn.onFinish=function(Bn){rs({downloadSpeed:parseFloat(Number(Bn.getDownloadBandwidth()/1048576).toFixed(2)),uploadSpeed:parseFloat(Number(Bn.getUploadBandwidth()/1048576).toFixed(2))})},jn.onError=function(Bn){Fn("Not able to get NetworkStats")}):Fn("Not able to get NetworkStats")}else Fn("Not able to get NetworkStats due to no Network")}),ts.abrupt("return",Promise.race([_i,Pn]));case 5:case"end":return ts.stop()}},$r,this)})),function(){return Pr.apply(this,arguments)})},{key:"analytics",value:function($r){var gn,Pn,_i;!$r&&navigator&&navigator.userAgent&&(Pn=navigator.userAgent,delete(_i=wt().parse(Pn)).engine);try{var Jn;(Jn=$r)!==null&&Jn!==void 0&&Jn.browserUserAgent||(Pn=navigator.userAgent,delete(_i=wt().parse(Pn)).engine)}catch{}$r&&$r.rawUserAgent&&(Pn=$r.rawUserAgent,delete(_i=wt().parse(Pn)).engine),$r||($r={});var ts={};ts.sdkType=$r.sdkType||"javascript",ts.sdkVersion=$r.sdkVersion||"0.0.80",ts.platform=$r.platform||((gn=_i)===null||gn===void 0||(gn=gn.platform)===null||gn===void 0?void 0:gn.type)||"",$r.browserUserAgent=="null"?ts.browserUserAgent=void 0:ts.browserUserAgent=_i,$r.deviceUserAgent&&(ts.deviceUserAgent=$r.deviceUserAgent),this._deviceInfo=ts}},{key:"initMeeting",value:function($r){var gn,Pn=$r.meetingId,_i=$r.customCameraVideoTrack,Jn=_i===void 0?void 0:_i,ts=$r.customMicrophoneAudioTrack,rs=ts===void 0?void 0:ts,Fn=$r.autoConsume,jn=Fn===void 0||Fn,Bn=$r.preferredProtocol,vs=$r.mode,Ps=$r.multiStream,fo=Ps===void 0||Ps,eo=$r.participantId,Sl=$r.name,El=$r.micEnabled,No=$r.webcamEnabled,Zl=$r.maxResolution,Co=$r.metaData,Ol=$r.chatEnabled,Mu=$r.useSpartialLayerAnalytics,Ou=$r.signalingBaseUrl,rp=$r.defaultCamera;if(!Pn)throw new Error("'meetingId' is empty, please verify it or generate new meetingId using the API.");var Tl=eo?eo.toString():Ut()({length:8}).toLowerCase(),Qp=Sl||Ut()({length:6}).toLowerCase();switch(this._deviceInfo||this.analytics(),typeof Bn!="string"&&(Bn="UDP_ONLY"),(gn=Bn)===null||gn===void 0?void 0:gn.toUpperCase()){case"UDP_ONLY":case"UDP_OVER_TCP":Bn=Bn.toUpperCase();break;default:Bn="UDP_ONLY"}if(vs||(vs=$l.S.CONFERENCE),vs!==$l.S.CONFERENCE&&vs!==$l.S.VIEWER)throw new Error('"mode" can only be either '.concat($l.S.CONFERENCE," or ").concat($l.S.VIEWER));if(Co!=null&&(0,ft.Z)(Co)!="object")throw new Error('"metaData" can only be object.');var im=this._deviceInfo.sdkType==="react-native",ym=im?rp?rp==="front"?1:0:Jn?Jn.getVideoTracks()[0].getConstraints().facingMode==="user"?1:0:im?1:0:0,$m=new pn.default({roomId:Pn,peerId:Tl,secret:this.apiKey,device:"unknown",displayName:Qp,mode:vs,useSimulcast:fo,produce:!0,consume:!0,useSharingSimulcast:!0,datachannel:Ol!==!1,micEnabled:El!==!1,webcamEnabled:No!==!1,maxResolution:Zl||"hd",useSpartialLayerAnalytics:Mu,_deviceInfo:this._deviceInfo,customCameraVideoTrack:Jn,customMicrophoneAudioTrack:rs,autoConsume:jn,preferredProtocol:Bn,signalingBaseUrl:Ou,metaData:Co,defaultCameraIndex:ym});Qr.roomClient=$m;var jm=new Mr({id:Tl,displayName:Qp,local:!0,mode:vs,metaData:Co});return new To(Pn,jm,$m)}},{key:"createCameraVideoTrack",value:(Rr=(0,pt.Z)(vt().mark(function $r(gn){var Pn,_i,Jn,ts,rs,Fn,jn,Bn,vs,Ps,fo,eo,Sl;return vt().wrap(function(El){for(;;)switch(El.prev=El.next){case 0:return Pn=gn.cameraId,_i=Pn===void 0?void 0:Pn,Jn=gn.encoderConfig,ts=Jn===void 0?void 0:Jn,rs=gn.facingMode,Fn=rs===void 0?void 0:rs,jn=gn.optimizationMode,Bn=jn===void 0?void 0:jn,vs=gn.multiStream,Ps=vs===void 0||vs,fo=ts?Ml.v.videoProfiles[ts]:Ml.v.videoProfiles.h360p_w640p,eo={video:{deviceId:_i||void 0,facingMode:Fn||void 0,width:fo.width,height:fo.height,frameRate:fo.frameRate}},El.next=5,Hl(eo);case 5:return Sl=El.sent,Bn&&(Sl.contentHint=Bn),Sl.encoderConfig=ts||"h360p_w640p",Sl.contentHint=Bn||"",Sl.multiStream=Ps,Sl.cameraId=_i,El.abrupt("return",Sl);case 12:case"end":return El.stop()}},$r)})),function($r){return Rr.apply(this,arguments)})},{key:"createScreenShareVideoTrack",value:(sr=(0,pt.Z)(vt().mark(function $r(gn){var Pn,_i,Jn,ts,rs,Fn,jn,Bn,vs;return vt().wrap(function(Ps){for(;;)switch(Ps.prev=Ps.next){case 0:return Pn=gn.encoderConfig,_i=Pn===void 0?void 0:Pn,Jn=gn.optimizationMode,ts=Jn===void 0?void 0:Jn,rs=gn.withAudio,Fn=rs===void 0?"enable":rs,jn=_i?Ml.v.screenShareProfiles[_i]:Ml.v.screenShareProfiles.h720p_15fps,Bn={audio:Fn==="enable",video:{width:jn.width,height:jn.height,frameRate:jn.frameRate}},Ps.next=5,Fl(Bn);case 5:return vs=Ps.sent,ts&&(vs.contentHint=ts),Ps.abrupt("return",vs);case 8:case"end":return Ps.stop()}},$r)})),function($r){return sr.apply(this,arguments)})},{key:"createMicrophoneAudioTrack",value:(rr=(0,pt.Z)(vt().mark(function $r(gn){var Pn,_i,Jn,ts,rs,Fn,jn,Bn,vs;return vt().wrap(function(Ps){for(;;)switch(Ps.prev=Ps.next){case 0:return Pn=gn.noiseConfig,_i=Pn===void 0?void 0:Pn,Jn=gn.encoderConfig,ts=Jn===void 0?void 0:Jn,rs=gn.microphoneId,Fn=rs===void 0?void 0:rs,jn=ts?Ml.v.audioProfiles[ts]:Ml.v.audioProfiles.speech_standard,Bn={audio:{deviceId:Fn,sampleRate:jn.sampleRate,echoCancellation:_i?_i&&_i.acousticEchoCancellation:jn.echoCancellation,autoGainControl:_i?_i&&_i.autoGainControl:jn.autoGainControl,noiseSuppression:_i?_i&&_i.noiseSuppression:jn.noiseSuppression,channelCount:jn.channelCount}},Ps.next=5,Hl(Bn);case 5:return(vs=Ps.sent).encoderConfig=ts||"speech_standard",vs.microphoneId=Fn,Ps.abrupt("return",vs);case 9:case"end":return Ps.stop()}},$r)})),function($r){return rr.apply(this,arguments)})}]),Jt}();(0,xt.Z)(tp,"devices",[]),(0,xt.Z)(tp,"eventEmitter",new Ln),(0,xt.Z)(tp,"Constants",{errors:zl.R,recordingEvents:{RECORDING_STARTING:"RECORDING_STARTING",RECORDING_STARTED:"RECORDING_STARTED",RECORDING_STOPPING:"RECORDING_STOPPING",RECORDING_STOPPED:"RECORDING_STOPPED"},livestreamEvents:{LIVESTREAM_STARTING:"LIVESTREAM_STARTING",LIVESTREAM_STARTED:"LIVESTREAM_STARTED",LIVESTREAM_STOPPING:"LIVESTREAM_STOPPING",LIVESTREAM_STOPPED:"LIVESTREAM_STOPPED"},hlsEvents:Yl.o,modes:$l.S,permission:jr});var ev=tp},3003:(ut,dt,ht)=>{ht.r(dt),ht.d(dt,{default:()=>Vo});var ft=ht(1002),pt=ht(5861),mt=ht(5671),gt=ht(3144),xt=ht(4942),yt=ht(4687),vt=ht.n(yt),St=ht(9293),wt=ht(960),Et=ht(1227),Rt=ht.n(Et),Tt="mediasoup-demo",It=function(){function xn(An){(0,mt.Z)(this,xn),An?(this._debug=Rt()("".concat(Tt,":").concat(An)),this._warn=Rt()("".concat(Tt,":WARN:").concat(An)),this._error=Rt()("".concat(Tt,":ERROR:").concat(An))):(this._debug=Rt()(Tt),this._warn=Rt()("".concat(Tt,":WARN")),this._error=Rt()("".concat(Tt,":ERROR"))),Rt().disable(),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return(0,gt.Z)(xn,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),xn}(),At=ht(1354),Dt=At.enc.Latin1.parse("6gf9Oz5Y(6fOWPP@3XPv0Mwp51yfJ0HiZW^0*!9NdUuZ*VdKmRC@f))&^!Iriw)q"),jt=At.enc.Latin1.parse("BHrabik^$W^y*HL@A*$4YKj(");function Ft(xn){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,pt.Z)(vt().mark(function xn(An){var Hn,Un,Gn,Hs,ps,Us,js,yo,Bs,Ws,io,na,To;return vt().wrap(function(_l){for(;;)switch(_l.prev=_l.next){case 0:return Hn=An.roomId,Un=An.secret,Gn=An.signalingBaseUrl,Hs="call-api.videosdk.live",ps=[],Us=null,js={},yo={},Bs={},Ws=null,_l.next=10,fetch("https://".concat(Gn,"/infra/v1/meetings/init-config"),{method:"POST",headers:{Authorization:Un,"Content-Type":"application/json"},body:JSON.stringify({roomId:Hn})}).then(function(Go){return Go.json()}).catch(function(Go){return{}});case 10:return io=_l.sent,(na=io.data)&&(Hs=na.baseUrl,To=na.observability,ps=Mt(na.iceServers),Us=To.jwt,js=To.traces,yo=To.logs,Bs=To.metaData,Ws=na.signalingUrl),_l.abrupt("return",{baseUrl:Hs,iceServers:ps,observabilityJwt:Us,traces:js,logs:yo,metaData:Bs,signalingUrl:Ws});case 14:case"end":return _l.stop()}},xn)}))).apply(this,arguments)}function Mt(xn){try{var An=At.AES.decrypt(xn,Dt,{iv:jt,mode:At.mode.CBC,padding:At.pad.ZeroPadding}).toString(At.enc.Utf8);return JSON.parse(An)}catch{return[]}}var Ot=ht(6808),Nt=ht.n(Ot),$t="mediasoup-demo.user",Vt="mediasoup-demo.devices";function Ut(xn){var An=xn.displayName;Nt().set($t,{displayName:An})}function zt(){return Nt().getJSON(Vt)}var Bt=ht(3196),Ht=ht.n(Bt),Gt=function(xn){return{type:"SET_ROOM_STATE",payload:{state:xn}}},Xt=function(xn){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerId:xn}}},Zt=function(xn){return{type:"SET_ROOM_STATS_PEER_ID",payload:{peerId:xn}}},hr=function(xn){return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:xn.canSendMic,canSendWebcam:xn.canSendWebcam}}},nr=function(xn){return{type:"SET_DISPLAY_NAME",payload:{displayName:xn}}},ir=function(xn){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:xn}}},yr=function(xn){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:xn}}},Cr=function(xn){return{type:"SET_AUDIO_MUTED_STATE",payload:{enabled:xn}}},Sr=function(xn){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:xn}}},xr=function(xn){return{type:"ADD_PRODUCER",payload:{producer:xn}}},gr=function(xn){return{type:"REMOVE_PRODUCER",payload:{producerId:xn}}},_r=function(xn,An){return{type:"SET_PRODUCER_TRACK",payload:{producerId:xn,track:An}}},fr=function(xn,An){return{type:"SET_PRODUCER_SCORE",payload:{producerId:xn,score:An}}},Nr=function(xn){return{type:"ADD_DATA_PRODUCER",payload:{dataProducer:xn}}},Tr=function(xn){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:xn}}},Hr=function(xn){return{type:"SET_SHARE_IN_PROGRESS",payload:{flag:xn}}},Vr=function(xn){return{type:"ADD_PEER",payload:{peer:xn}}},mn=function(xn){return{type:"REMOVE_PEER",payload:{peerId:xn}}},tn=function(xn,An){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:xn,peerId:An}}},er=function(xn,An){return{type:"ADD_CONSUMER",payload:{consumer:xn,peerId:An}}},tr=function(xn,An){return{type:"REMOVE_CONSUMER",payload:{consumerId:xn,peerId:An}}},vr=function(xn,An){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:xn,originator:An}}},Fr=function(xn,An){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:xn,originator:An}}},Kr=function(xn,An,Hn){return{type:"SET_CONSUMER_CURRENT_LAYERS",payload:{consumerId:xn,spatialLayer:An,temporalLayer:Hn}}},qr=function(xn,An,Hn){return{type:"SET_CONSUMER_PREFERRED_LAYERS",payload:{consumerId:xn,spatialLayer:An,temporalLayer:Hn}}},pn=function(xn,An){return{type:"SET_CONSUMER_PRIORITY",payload:{consumerId:xn,priority:An}}},En=function(xn,An){return{type:"SET_CONSUMER_SCORE",payload:{consumerId:xn,score:An}}},Rn=function(xn,An){return{type:"ADD_DATA_CONSUMER",payload:{dataConsumer:xn,peerId:An}}},Qn=function(xn,An){return{type:"REMOVE_DATA_CONSUMER",payload:{dataConsumerId:xn,peerId:An}}},Ln=function(xn){var An=xn.type,Hn=An===void 0?"info":An,Un=xn.text,Gn=xn.title,Hs=xn.timeout;if(!Hs)switch(Hn){case"info":Hs=3e3;break;case"error":Hs=5e3}var ps={id:Ht()({length:6}).toLowerCase(),type:Hn,title:Gn,text:Un,timeout:Hs};return function(Us){Us(function(js){return{type:"ADD_NOTIFICATION",payload:{notification:js}}}(ps)),setTimeout(function(){Us({type:"REMOVE_NOTIFICATION",payload:{notificationId:ps.id}})},Hs)}},ln=ht(7187),Xn=ht(885),Yr=ht(8962),Qr={},Mn={},Ar={};for(var or in Yr.v.videoProfiles)Yr.v.videoProfiles[or].aspectRatio=="oneSixNine"&&(Qr[or]=Yr.v.videoProfiles[or],Qr[or].encoding={maxBitrate:Qr[or].bitRate,maxFramerate:Qr[or].frameRate}),Yr.v.videoProfiles[or].aspectRatio=="fourThree"&&(Mn[or]=Yr.v.videoProfiles[or],Mn[or].encoding={maxBitrate:Mn[or].bitRate,maxFramerate:Mn[or].frameRate});for(var or in Yr.v.screenShareProfiles)Ar[or]=Yr.v.screenShareProfiles[or],Ar[or].encoding={maxBitrate:Ar[or].bitRate,maxFramerate:Ar[or].frameRate};var Wr=Object.values(Qr),Ir=Object.values(Mn),dn=Object.values(Ar),kn=[Qr.h180p_w320p,Qr.h360p_w640p],Mr=[Mn.h180p_w240p,Mn.h360p_w480p],vn=function(xn){return[{scaleResolutionDownBy:2,fps:3}].map(function(An){var Hn;return{width:Math.floor(xn.width/An.scaleResolutionDownBy),height:Math.floor(xn.height/An.scaleResolutionDownBy),encodings:{maxBitrate:Math.max(15e4,Math.floor(xn.encoding.maxBitrate/(Math.pow(An.scaleResolutionDownBy,2)*(((Hn=xn.encoding.maxFramerate)!==null&&Hn!==void 0?Hn:30)/An.fps)))),maxFramerate:An.fps}}})},kr=["q","h","f"];function Er(xn,An,Hn,Un){var Gn=Un&&Un.videoEncoding;xn&&(Gn=Un&&Un.screenShareEncoding);var Hs=Un==null?void 0:Un.simulcast;if(Gn||(Gn=function(io,na,To){for(var _l=function(Ml,Hl,Fl){if(Ml)return dn;var zo=Hl>Fl?Hl/Fl:Fl/Hl;return Math.abs(zo-1.7777777777777777)<Math.abs(zo-1.3333333333333333)?Wr:Ir}(io,na,To),Go=_l[0].encoding,zl=Math.max(na,To),Yl=0;Yl<_l.length;Yl+=1){var $l=_l[Yl];if(Go=$l.encoding,$l.width>=zl)break}return Go}(xn,An,Hn)),!Hs)return[Gn];var ps,Us={width:An,height:Hn,encoding:{maxBitrate:Gn.maxBitrate,maxFramerate:Gn.maxFramerate}},js=[],yo=(js=Ur(xn,Us))[0];if(js.length>1){var Bs=js;ps=(0,Xn.Z)(Bs,2)[1]}var Ws=Math.max(An,Hn);return on(An,Hn,Ws>=960&&ps?[yo,ps,Us]:Ws>=480?[yo,Us]:[Us])}function Ur(xn,An){xn&&vn(An);var Hn=An.width,Un=An.height,Gn=Hn>Un?Hn/Un:Un/Hn;return Math.abs(Gn-1.7777777777777777)<Math.abs(Gn-1.3333333333333333)?kn:Mr}function on(xn,An,Hn){var Un=[];return Hn.forEach(function(Gn,Hs){if(!(Hs>=kr.length)){var ps=Math.min(xn,An),Us={rid:kr[Hs],scaleResolutionDownBy:ps/Math.min(Gn.width,Gn.height),maxBitrate:Gn.encoding.maxBitrate,maxFramerate:Gn.encoding.maxFramerate};Un.push(Us)}}),Un}function fn(xn,An,Hn){if(!xn)return{};var Un=xn.id,Gn=(xn.preferredSpatialLayer,xn.preferredTemporalLayer,xn.appData),Hs=Gn.width,ps=Gn.height,Us=Gn.encodings;try{var js=function(zl){var Yl=[];if(zl&&zl.length!=0){if(zl.length===1){for(var $l=0;$l<3;$l++)Yl.push(Math.pow(2,3-$l-1));return Yl}var Ml=!1;return zl.forEach(function(Hl){Hl.scaleResolutionDownBy!==void 0?(Ml=!0,Yl.push(Math.max(1,Hl.scaleResolutionDownBy))):Yl.push(1)}),Ml||zl.forEach(function(Hl,Fl){Yl[Fl]=Math.pow(2,zl.length-Fl-1)}),Yl}}(Us);if(!js)return{};for(var yo=Math.min(Math.max(Yr.v.adaptiveScalingFactor||.75,.5),1),Bs=0,Ws=0;Ws<js.length;Ws++){var io=yo*Hs/js[Ws],na=yo*ps/js[Ws];if(!(An>=io&&Hn>=na))break;Bs=Ws}var To=(xn.temporalLayers?xn.temporalLayers:3)-1;if(Bs===0&&To>0){var _l=Hs/js[0],Go=ps/js[0];An<.5*_l&&Hn<.5*Go&&(To-=1),To>0&&An<.25*_l&&Hn<.25*Go&&(To-=1)}return{consumerId:Un,newPreferredSpatialLayer:Bs,newPreferredTemporalLayer:To}}catch{return{}}}var Kn=ht(6900),es=ht(8225),Zn=ht(4180),Dn=ht(3430),ss=ht(6380),$s=ht(2982),ws=Array(32);function As(){for(var xn=0;xn<16;xn++)ws[xn]=Math.floor(16*Math.random())+48,ws[xn]>=58&&(ws[xn]+=39);return String.fromCharCode.apply(null,ws.slice(0,16))}function Vs(){var xn=(1e6*new Date().getTime()).toString().padEnd(19,"0");return Number(xn)}function Fo(xn,An){var Hn=Object.keys(xn);if(Object.getOwnPropertySymbols){var Un=Object.getOwnPropertySymbols(xn);An&&(Un=Un.filter(function(Gn){return Object.getOwnPropertyDescriptor(xn,Gn).enumerable})),Hn.push.apply(Hn,Un)}return Hn}function Lo(xn){for(var An=1;An<arguments.length;An++){var Hn=arguments[An]!=null?arguments[An]:{};An%2?Fo(Object(Hn),!0).forEach(function(Un){(0,xt.Z)(xn,Un,Hn[Un])}):Object.getOwnPropertyDescriptors?Object.defineProperties(xn,Object.getOwnPropertyDescriptors(Hn)):Fo(Object(Hn)).forEach(function(Un){Object.defineProperty(xn,Un,Object.getOwnPropertyDescriptor(Hn,Un))})}return xn}var Ho=function(){function xn(An){var Hn=this,Un=An.roomId,Gn=An.peerId,Hs=An.sdkName,ps=An.observabilityJwt,Us=An.metaData,js=An.traces;(0,mt.Z)(this,xn),this._traceId=function(){for(var Bs=0;Bs<32;Bs++)ws[Bs]=Math.floor(16*Math.random())+48,ws[Bs]>=58&&(ws[Bs]+=39);return String.fromCharCode.apply(null,ws.slice(0,32))}(),this._rootSpanId=As(),this._observabilityJwt=ps,this._tracesEnabled=js.enabled;var yo=function(Bs){for(var Ws="0123456789abcdefghijklmnopqrstuvwxyz",io="",na=Bs;na>0;na--)io+=Ws[Math.floor(36*Math.random())];return io}(8);this._spans=[],this._traceJSON={resourceSpans:[{resource:{attributes:[{key:"service.name",value:{stringValue:"videosdk-otel"}},{key:"telemetry.sdk.language",value:{stringValue:"webjs"}},{key:"telemetry.sdk.name",value:{stringValue:"opentelemetry"}},{key:"telemetry.sdk.version",value:{stringValue:"1.14.0"}},{key:"sdk-version",value:{stringValue:"0.0.1"}}],droppedAttributesCount:0},scopeSpans:[{scope:{name:yo},spans:[]}]}]},this._tracesEnabled&&(this.addRootSpan(Un,Gn,Hs,Us),setInterval(function(){Hn.processQueue()},4e3))}return(0,gt.Z)(xn,[{key:"addRootSpan",value:function(An,Hn,Un,Gn){if(this._tracesEnabled){var Hs={traceId:this._traceId,spanId:this._rootSpanId,name:"room_".concat(An,"_peer_").concat(Hn,"_sdk_").concat(Un),kind:1,startTimeUnixNano:Vs(),endTimeUnixNano:Vs(),attributes:[{key:"roomId",value:{stringValue:An}},{key:"peerId",value:{stringValue:Hn}},{key:"sdkName",value:{stringValue:Un}},{key:"userId",value:{stringValue:Gn.userId}},{key:"email",value:{stringValue:Gn.email}}],droppedAttributesCount:0,events:[],droppedEventsCount:0,status:{code:0},links:[],droppedLinksCount:0};this._spans.push(Hs)}}},{key:"addSpanToTrace",value:function(An){this._spans.push(An)}},{key:"trace",value:function(An){var Hn=An.spanName,Un=An.attributes,Gn=Un===void 0?{}:Un,Hs=An.span,ps=Hs===void 0?void 0:Hs;if(this._tracesEnabled){var Us=As(),js=Vs(),yo={traceId:this._traceId,spanId:Us,parentSpanId:ps||this._rootSpanId,name:Hn,kind:1,startTimeUnixNano:js,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0};return Object.keys(Gn).length>0&&(yo.attributes=Object.entries(Gn).map(function(Bs){var Ws=(0,Xn.Z)(Bs,2);return{key:Ws[0],value:{stringValue:Ws[1]}}})),this.addSpanToTrace(yo),Us}}},{key:"traceAutoComplete",value:function(An){var Hn=An.spanName,Un=An.attributes,Gn=Un===void 0?{}:Un,Hs=An.status,ps=Hs===void 0?1:Hs,Us=An.span,js=Us===void 0?void 0:Us,yo=An.message,Bs=yo===void 0?"SUCCESS":yo;if(this._tracesEnabled){var Ws=As(),io=Vs(),na=Vs(),To={traceId:this._traceId,spanId:Ws,parentSpanId:js||this._rootSpanId,name:Hn,kind:1,startTimeUnixNano:io,endTimeUnixNano:na,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0,status:{code:ps,message:Bs}};Object.keys(Gn).length>0&&(To.attributes=Object.entries(Gn).map(function(_l){var Go=(0,Xn.Z)(_l,2);return{key:Go[0],value:{stringValue:Go[1]}}})),this.addSpanToTrace(To)}}},{key:"completeSpan",value:function(An){var Hn=An.span,Un=An.status,Gn=An.message,Hs=An.attributes,ps=Hs===void 0?{}:Hs;if(this._tracesEnabled){var Us=Vs();this._spans=this._spans.map(function(js){if(js.spanId!==Hn)return js;var yo=Object.entries(ps).map(function(Bs){var Ws=(0,Xn.Z)(Bs,2);return{key:Ws[0],value:{stringValue:Ws[1]}}});return js.attributes=js.attributes?[].concat((0,$s.Z)(js.attributes),(0,$s.Z)(yo)):yo,Lo(Lo({},js),{},{status:{code:Un,message:Gn},endTimeUnixNano:Us})})}}},{key:"processQueue",value:function(){var An=this;if(this._spans.length>0){this._traceJSON.resourceSpans[0].scopeSpans[0].spans=this._spans,this._spans=[];var Hn={method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify(this._traceJSON)};fetch("https://api.videosdk.live/otel/v1/traces",Hn).then(function(){var Un=(0,pt.Z)(vt().mark(function Gn(Hs){return vt().wrap(function(ps){for(;;)switch(ps.prev=ps.next){case 0:return An._traceJSON.resourceSpans[0].scopeSpans[0].spans=[],ps.next=3,Hs.text();case 3:return ps.abrupt("return",ps.sent);case 4:case"end":return ps.stop()}},Gn)}));return function(Gn){return Un.apply(this,arguments)}}()).then(function(Un){}).catch(function(Un){An._spans=An._traceJSON.resourceSpans[0].scopeSpans[0].spans,console.error("There was a problem with the POST request:",Un)})}}}]),xn}();function Bo(xn,An){var Hn=Object.keys(xn);if(Object.getOwnPropertySymbols){var Un=Object.getOwnPropertySymbols(xn);An&&(Un=Un.filter(function(Gn){return Object.getOwnPropertyDescriptor(xn,Gn).enumerable})),Hn.push.apply(Hn,Un)}return Hn}function Kl(xn){for(var An=1;An<arguments.length;An++){var Hn=arguments[An]!=null?arguments[An]:{};An%2?Bo(Object(Hn),!0).forEach(function(Un){(0,xt.Z)(xn,Un,Hn[Un])}):Object.getOwnPropertyDescriptors?Object.defineProperties(xn,Object.getOwnPropertyDescriptors(Hn)):Bo(Object(Hn)).forEach(function(Un){Object.defineProperty(xn,Un,Object.getOwnPropertyDescriptor(Hn,Un))})}return xn}var Nl=function(){function xn(Hn){var Un=Hn.roomId,Gn=Hn.peerId,Hs=Hn.sdkName,ps=Hn.logs,Us=Hn.observabilityJwt;(0,mt.Z)(this,xn),this._peerId=Gn,this._roomId=Un,this._logs=ps,this._observabilityJwt=Us,this._sdkName=Hs}var An;return(0,gt.Z)(xn,[{key:"pushLogs",value:(An=(0,pt.Z)(vt().mark(function Hn(Un){var Gn,Hs,ps,Us,js,yo;return vt().wrap(function(Bs){for(;;)switch(Bs.prev=Bs.next){case 0:if(Gn=Un.logType,Hs=Un.logText,ps=Un.attributes,Us=this._logs,js=Us.enabled,yo=Us.endPoint,!js){Bs.next=8;break}return Bs.next=5,fetch(yo,{method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify({logType:Gn,logText:Hs,attributes:Kl(Kl({},ps),{},{roomId:this._roomId,peerId:this._peerId,SDK:this._sdkName})})}).then(function(Ws){return Ws.json()}).catch(function(Ws){return console.log("error",Ws),{}});case 5:return Bs.abrupt("return",Bs.sent);case 8:return Bs.abrupt("return",null);case 9:case"end":return Bs.stop()}},Hn,this)})),function(Hn){return An.apply(this,arguments)})}]),xn}();function Lr(xn,An){var Hn=typeof Symbol<"u"&&xn[Symbol.iterator]||xn["@@iterator"];if(!Hn){if(Array.isArray(xn)||(Hn=function(js,yo){if(js){if(typeof js=="string")return wn(js,yo);var Bs=Object.prototype.toString.call(js).slice(8,-1);if(Bs==="Object"&&js.constructor&&(Bs=js.constructor.name),Bs==="Map"||Bs==="Set")return Array.from(js);if(Bs==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Bs))return wn(js,yo)}}(xn))||An&&xn&&typeof xn.length=="number"){Hn&&(xn=Hn);var Un=0,Gn=function(){};return{s:Gn,n:function(){return Un>=xn.length?{done:!0}:{done:!1,value:xn[Un++]}},e:function(js){throw js},f:Gn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Hs,ps=!0,Us=!1;return{s:function(){Hn=Hn.call(xn)},n:function(){var js=Hn.next();return ps=js.done,js},e:function(js){Us=!0,Hs=js},f:function(){try{ps||Hn.return==null||Hn.return()}finally{if(Us)throw Hs}}}}function wn(xn,An){(An==null||An>xn.length)&&(An=xn.length);for(var Hn=0,Un=new Array(An);Hn<An;Hn++)Un[Hn]=xn[Hn];return Un}function On(xn,An){var Hn=Object.keys(xn);if(Object.getOwnPropertySymbols){var Un=Object.getOwnPropertySymbols(xn);An&&(Un=Un.filter(function(Gn){return Object.getOwnPropertyDescriptor(xn,Gn).enumerable})),Hn.push.apply(Hn,Un)}return Hn}function In(xn){for(var An=1;An<arguments.length;An++){var Hn=arguments[An]!=null?arguments[An]:{};An%2?On(Object(Hn),!0).forEach(function(Un){(0,xt.Z)(xn,Un,Hn[Un])}):Object.getOwnPropertyDescriptors?Object.defineProperties(xn,Object.getOwnPropertyDescriptors(Hn)):On(Object(Hn)).forEach(function(Un){Object.defineProperty(xn,Un,Object.getOwnPropertyDescriptor(Hn,Un))})}return xn}var Br,gs={sd:{low:{s:0,t:2},med:{s:0,t:2},high:{s:1,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}},hd:{low:{s:0,t:2},med:{s:1,t:2},high:{s:2,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}}},os={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},sd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}},hd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}}},ys={sd:[{scaleResolutionDownBy:6},{scaleResolutionDownBy:4},{scaleResolutionDownBy:2}],hd:[{scaleResolutionDownBy:4},{scaleResolutionDownBy:2},{scaleResolutionDownBy:1}]},Os=[{scalabilityMode:"S3T3_KEY"}],Zs=[{dtx:!0,maxFramerate:10}],Ys=[{scalabilityMode:"S3T3",dtx:!0}],un=new It("RoomClient"),Vo=function(){function xn(Dr){var pr,dr,mr=Dr.roomId,wr=Dr.peerId,rn=Dr.secret,hn=Dr.displayName,zn=Dr.device,Wn=Dr.handlerName,us=Dr.useSimulcast,ds=Dr.useSharingSimulcast,hs=Dr.forceTcp,Jr=Dr.mode,yn=Dr.forceH264,Rs=Dr.forceVP9,Ls=Dr.svc,Sn=Dr.datachannel,Ss=Dr.externalVideo,fs=Dr.micEnabled,Ks=Dr.webcamEnabled,Js=Dr.maxResolution,Ms=Dr.useSpartialLayerAnalytics,Cs=Dr._deviceInfo,Xs=Dr.customCameraVideoTrack,so=Dr.customMicrophoneAudioTrack,po=Dr.autoConsume,Es=Dr.preferredProtocol,zs=Dr.signalingBaseUrl,Qo=Dr.metaData,qo=Dr.defaultCameraIndex;(0,mt.Z)(this,xn),(0,xt.Z)(this,"delay",function(ro){return new Promise(function(Po){return setTimeout(Po,ro)})}),un.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]',mr,wr,hn,zn.flag),this.useSpartialLayerAnalytics=Ms||!1,this._deviceInfo=Cs,this._eventEmitter=new ln.EventEmitter,this._closed=!1,this._displayName=hn,this._device=zn,this._forceTcp=hs,this._preferredProtocol=Es,Jr==Dn.S.CONFERENCE?(pr=!0,dr=!0):(pr=!1,dr=!1),this._mode=Jr,this._produce=pr,this._consume=dr,this._useDataChannel=Sn,this._forceH264=!!yn,this._forceVP9=!!Rs,this._micEnabled=!!fs,this._webcamEnabled=!!Ks,this._externalVideo=null,this._externalVideoStream=null,this._nextDataChannelTestNumber=0,Ss&&(this._externalVideo=document.createElement("video"),this._externalVideo.controls=!0,this._externalVideo.loop=!0,this._externalVideo.setAttribute("playsinline",""),this._externalVideo.src=Ss,this._externalVideo.play().catch(function(ro){return un.warn("externalVideo.play() failed:%o",ro)})),this._handlerName=Wn,this._useSimulcast=us,this._useSharingSimulcast=ds,this._protooUrl="",this._secret=rn,this._peerId=wr,this._roomId=mr,this._baseUrl="",this._protoo=null,this._mediasoupDevice=null,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._shareProducer=null,this._shareAudioProducer=null,this._chatDataProducer=null,this._botDataProducer=null,this._consumers=new Map,this._dataConsumers=new Map,this._mics=new Map,this._mic={device:null},this._webcams=new Map,this._webcam={device:null,resolution:Js||"hd"},this._pinnedParticipants=new Map,Ls&&(Os[0].scalabilityMode="".concat(Ls,"_KEY"),Ys[0].scalabilityMode=Ls),this.customCameraVideoTrack=Xs,this.customMicrophoneAudioTrack=so,this._autoConsume=po,this._iceServers=[],this._metrics=new Zn.VideoSDKMetrics({refreshEvery:1e3,startAfter:1e3,verbose:!1}),this._collectStats=Cs.sdkType!="react-native",this._stats={},this._latestStats={},this._isWebsocketAlive=!1,this._pingWebsocketInterval=null,this._pingInternetInterval=null,this._pingWebsocketFailedCounter=0,this._pongInternetCounter=0,this._transportState="",this._openTelemetry=null,this._videosdkLogs=null,this._signalingBaseUrl=zs||"api.videosdk.live",this._metaData=Qo,this._defaultCameraIndex=qo}var An,Hn,Un,Gn,Hs,ps,Us,js,yo,Bs,Ws,io,na,To,_l,Go,zl,Yl,$l,Ml,Hl,Fl,zo,_p,Ap,Qu,$u,Ju,xp,kp,Mo,Is,jr,cs,uo,Wl,Uo,ju,sm,Wp,Jp,Fp,Ll,em,mu,Wo,gu,Bl,Qs,Sp,ga,iu,_d,_o,Bp,su,vu,wp,_a,Ul,Au,Gp,Ip,Up,nn,xs,yu,Fs,Vp,Ds,Yo,_u,ou,qp,Lp,Ep,tm,Kp,zp,Xp,ip,rm,Rp,Fu,Bu,Cp,Tp,Ql,Xl,Uu,Jl,lu,ku,Vu,sp,op,Rl,Il;return(0,gt.Z)(xn,[{key:"on",value:function(Dr,pr){this._eventEmitter.on(Dr,pr)}},{key:"close",value:function(Dr){var pr,dr,mr,wr,rn,hn=Dr.sendLeft,zn=hn===void 0||hn;if(zn&&(this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CLOSING"}),(rn=this._openTelemetry)===null||rn===void 0||rn.traceAutoComplete({spanName:"Meeting is in CLOSING State",status:1})),!this._closed){this._closed=!0,this._pingWebsocketInterval&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=null,this._pingInternetInterval&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=null,this._protoo.close(),this._metrics.running&&this._metrics.stopAllProbes(),un.debug("close()");var Wn=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"Closing Trasnport"});this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close(),(dr=this._openTelemetry)===null||dr===void 0||dr.completeSpan({span:Wn,status:1,message:"Closed Trasnport"}),Br.dispatch(Gt("closed")),zn&&this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CLOSED"}),(mr=this._openTelemetry)===null||mr===void 0||mr.traceAutoComplete({spanName:"Meeting is in CLOSED State",status:1}),zn&&this._eventEmitter.emit("MEETING_LEFT"),(wr=this._openTelemetry)===null||wr===void 0||wr.traceAutoComplete({spanName:"Emitted MEETING_LEFT Event",status:1})}}},{key:"join",value:(Il=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr,wr,rn,hn,zn,Wn,us,ds,hs,Jr=this;return vt().wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:return yn.next=2,Ft({roomId:this._roomId,secret:this._secret,signalingBaseUrl:this._signalingBaseUrl});case 2:mr=yn.sent,wr=mr.baseUrl,rn=mr.iceServers,hn=mr.logs,zn=mr.observabilityJwt,Wn=mr.traces,us=mr.metaData,ds=mr.signalingUrl,this._baseUrl=wr,this._protooUrl="".concat(ds||"wss://".concat(this._baseUrl),"/?roomId=").concat(this._roomId,"&peerId=").concat(this._peerId,"&secret=").concat(this._secret,"&mode=").concat(this._mode),this._iceServers=rn,this._tracesEnabled=Wn.enabled,this._openTelemetry=new Ho((0,xt.Z)({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),traces:Wn,logs:hn,observabilityJwt:zn,metaData:us},"traces",Wn)),this._videosdkLogs=new Nl({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),logs:hn,observabilityJwt:zn}),this._joinSpan=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"Join() Calling",attributes:{DeviceInfo:JSON.stringify(this._deviceInfo),mode:this._mode,displayName:this._displayName,multiStream:this._useSimulcast,micEnabled:this._micEnabled,webcamEnabled:this._webcamEnabled,CustomVideoTrack:!!this.customCameraVideoTrack,CustomMicTrack:!!this.customMicrophoneAudioTrack,signalingUrl:ds||"signalingUrl not specify"}}),hs=new St.qo(this._protooUrl),this._protoo=new St._z(hs),this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTING"}),Br.dispatch(Gt("connecting")),(dr=this._openTelemetry)===null||dr===void 0||dr.traceAutoComplete({spanName:"Meeting is in CONNECTING State",span:this._joinSpan,status:1}),this._protoo.on("open",function(){var Rs;Jr._isWebsocketAlive=!0,Jr._closed=!1,Jr.startPingPong(),Jr._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTED"}),(Rs=Jr._openTelemetry)===null||Rs===void 0||Rs.traceAutoComplete({spanName:"Meeting is in CONNECTED State",span:Jr._joinSpan,status:1}),Jr.requestEntry()}),this._protoo.on("failed",function(){var Rs;Jr._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"FAILED"}),(Rs=Jr._openTelemetry)===null||Rs===void 0||Rs.traceAutoComplete({spanName:"Meeting is in FAILED State",span:Jr._joinSpan,status:2}),Br.dispatch(Ln({type:"error",text:"WebSocket connection failed"}))}),this._protoo.on("disconnected",function(){var Rs;Jr._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"DISCONNECTED"}),(Rs=Jr._openTelemetry)===null||Rs===void 0||Rs.traceAutoComplete({spanName:"Meeting is in DISCONNECTED State",span:Jr._joinSpan,status:1}),Br.dispatch(Ln({type:"error",text:"WebSocket disconnected"})),Jr._sendTransport&&(Jr._sendTransport.close(),Jr._sendTransport=null),Jr._recvTransport&&(Jr._recvTransport.close(),Jr._recvTransport=null),Br.dispatch(Gt("closed"))}),this._protoo.on("close",function(){Jr._closed||Jr.close({sendLeft:!0})}),this._protoo.on("request",function(){var Rs=(0,pt.Z)(vt().mark(function Ls(Sn,Ss,fs){var Ks,Js,Ms,Cs,Xs,so,po,Es,zs,Qo,qo,ro,Po,Do,mo,xo,ho,Cl,ls,vo,Ko,wo,Pl,qs,Oo,ks,Eo,xa,tu,zu,Hu,Iu,lp,cu,_h,xl,Lu,xu,Dl,uu,Wu,Gu,Su,du,wu,qu,hu,Eu,Xo,Gl,up,Ru,dp,hp,Zo,Ku,fu,Cu,Du,Xu,Vl,Tu;return vt().wrap(function(ns){for(;;)switch(ns.prev=ns.next){case 0:un.debug('proto "request" event [method:%s, data:%o]',Sn.method,Sn.data),ns.t0=Sn.method,ns.next=ns.t0==="close"?4:ns.t0==="newConsumer"?7:ns.t0==="newDataConsumer"?45:ns.t0==="enableMic"?72:ns.t0==="disableMic"?74:ns.t0==="enableWebcam"?88:ns.t0==="disableWebcam"?90:ns.t0==="pinStateChanged"?104:ns.t0==="switchRoom"?124:ns.t0==="statsData"?127:130;break;case 4:return Ss(),Jr.close({sendLeft:!0}),ns.abrupt("break",130);case 7:if(Ms=(Ks=Jr._openTelemetry)===null||Ks===void 0?void 0:Ks.trace({spanName:"Protoo REQ: newConsumer",attributes:{request:JSON.stringify(Sn)}}),Jr._consume){ns.next=12;break}return fs(403,"I do not want to consume"),(Cs=Jr._openTelemetry)===null||Cs===void 0||Cs.completeSpan({span:Ms,status:2,message:"I do not want to consume"}),ns.abrupt("break",130);case 12:return Xs=Sn.data,so=Xs.peerId,po=Xs.producerId,Es=Xs.id,zs=Xs.kind,Qo=Xs.rtpParameters,qo=Xs.type,ro=Xs.appData,Po=Xs.producerPaused,Do=(Js=Jr._openTelemetry)===null||Js===void 0?void 0:Js.trace({spanName:"Creating Consumer",span:Ms}),ns.prev=14,ns.next=17,Jr._recvTransport.consume({id:Es,producerId:po,kind:zs,rtpParameters:Qo,appData:In(In({},ro),{},{peerId:so})});case 17:ls=ns.sent,vo=wt.parseScalabilityMode(ls.rtpParameters.encodings[0].scalabilityMode),Ko=vo.spatialLayers,wo=vo.temporalLayers,ls.spatialLayers=Ko,ls.temporalLayers=wo,ls.currentSpatialLayers=Ko-1,ls.currentTemporalLayers=wo-1,Jr._consumers.set(ls.id,ls),ls.on("transportclose",function(){Jr._consumers.delete(ls.id);var Jo=tr(ls.id,so);Br.dispatch(Jo),Jr._eventEmitter.emit(Jo.type,Jo.payload)}),(mo=Jr._openTelemetry)===null||mo===void 0||mo.completeSpan({span:Do,status:1,message:"Consumer Created"}),Do=(xo=Jr._openTelemetry)===null||xo===void 0?void 0:xo.trace({spanName:"Sending Stream Enabled Event",span:Ms}),Pl=er({id:ls.id,type:qo,locallyPaused:!1,remotelyPaused:Po,rtpParameters:ls.rtpParameters,spatialLayers:Ko,temporalLayers:wo,currentSpatialLayer:Ko-1,currentTemporalLayer:wo-1,preferredSpatialLayer:Ko-1,preferredTemporalLayer:wo-1,priority:1,codec:ls.rtpParameters.codecs[0].mimeType.split("/")[1],track:ls.track,appData:ro,instance:ls},so),Br.dispatch(Pl),Jr._eventEmitter.emit(Pl.type,Pl.payload),Ss(),ls.kind==="video"&&Br.getState().me.audioOnly&&Jr._pauseConsumer(ls),(ho=Jr._openTelemetry)===null||ho===void 0||ho.completeSpan({span:Do,status:1,message:"Event Send Successfully"}),(Cl=Jr._openTelemetry)===null||Cl===void 0||Cl.completeSpan({span:Ms,status:1,message:"New Consumer Created Successfully",attributes:{"consumer.consumerId":ls.id}}),ls.kind=="video"&&ls.appData.share&&((qs=Jr._openTelemetry)===null||qs===void 0||qs.traceAutoComplete({spanName:"Presenter Changed",span:Ms,attributes:{"peer.id":so}})),ns.next=44;break;case 37:throw ns.prev=37,ns.t1=ns.catch(14),(Oo=Jr._openTelemetry)===null||Oo===void 0||Oo.completeSpan({span:Do,status:2,message:"Error creating a Consumer: ".concat(ns.t1)}),(ks=Jr._openTelemetry)===null||ks===void 0||ks.completeSpan({span:Ms,status:2,message:"Error creating a Consumer: ".concat(ns.t1)}),Br.dispatch(Ln({type:"error",text:"Error creating a Consumer: ".concat(ns.t1)})),(Eo=Jr._videosdkLogs)===null||Eo===void 0||Eo.pushLogs({logText:"Error creating a Consumer",logType:"ERROR",attributes:{error:ns.t1.message}}),ns.t1;case 44:return ns.abrupt("break",130);case 45:if(Jr._consume){ns.next=48;break}return fs(403,"I do not want to data consume"),ns.abrupt("break",130);case 48:if(Jr._useDataChannel){ns.next=51;break}return fs(403,"I do not want DataChannels"),ns.abrupt("break",130);case 51:return xa=Sn.data,tu=xa.peerId,zu=xa.dataProducerId,Hu=xa.id,Iu=xa.sctpStreamParameters,lp=xa.label,cu=xa.protocol,_h=xa.appData,ns.prev=52,ns.next=55,Jr._recvTransport.consumeData({id:Hu,dataProducerId:zu,sctpStreamParameters:Iu,label:lp,protocol:cu,appData:In(In({},_h),{},{peerId:tu})});case 55:xl=ns.sent,Jr._dataConsumers.set(xl.id,xl),xl.on("transportclose",function(){Jr._dataConsumers.delete(xl.id)}),xl.on("open",function(){un.debug('DataConsumer "open" event')}),xl.on("close",function(){un.warn('DataConsumer "close" event'),Jr._dataConsumers.delete(xl.id),Br.dispatch(Ln({type:"error",text:"DataConsumer closed"}))}),xl.on("error",function(Jo){un.error('DataConsumer "error" event:%o',Jo),Br.dispatch(Ln({type:"error",text:"DataConsumer error: ".concat(Jo)}))}),xl.on("message",function(Jo){if(un.debug('DataConsumer "message" event [streamId:%d]',xl.sctpStreamParameters.streamId),window.DC_MESSAGE=Jo,Jo instanceof ArrayBuffer){var Mp=new DataView(Jo).getUint32();return Mp==Math.pow(2,32)-1?(un.warn("dataChannelTest finished!"),void(Jr._nextDataChannelTestNumber=0)):(Mp>Jr._nextDataChannelTestNumber&&un.warn("dataChannelTest: %s packets missing",Mp-Jr._nextDataChannelTestNumber),void(Jr._nextDataChannelTestNumber=Mp+1))}if(typeof Jo=="string")switch(xl.label){case"chat":var Dp=Br.getState().peers,fp=Object.keys(Dp).map(function(pp){return Dp[pp]}).find(function(pp){return pp.dataConsumers.includes(xl.id)});if(!fp){un.warn('DataConsumer "message" from unknown peer');break}Br.dispatch(Ln({title:"".concat(fp.displayName," says:"),text:Jo,timeout:5e3})),Jr._eventEmitter.emit("CHAT_MESSAGE",{text:Jo,senderId:fp.id,timestamp:new Date().getTime()});break;case"bot":Br.dispatch(Ln({title:"Message from Bot:",text:Jo,timeout:5e3}))}else un.warn('ignoring DataConsumer "message" (not a string)')}),window.DC=xl,Br.dispatch(Rn({id:xl.id,sctpStreamParameters:xl.sctpStreamParameters,label:xl.label,protocol:xl.protocol},tu)),Ss(),ns.next=71;break;case 67:ns.prev=67,ns.t2=ns.catch(52),un.error('"newDataConsumer" request failed:%o',ns.t2),Br.dispatch(Ln({type:"error",text:"Error creating a DataConsumer: ".concat(ns.t2)}));case 71:return ns.abrupt("break",130);case 72:try{xu=Sn.data.peerId,(Lu=Jr._openTelemetry)===null||Lu===void 0||Lu.traceAutoComplete({spanName:"Emitting MIC_REQUESTED & Protoo REQ: enableMic for ".concat(xu),status:1}),Jr._eventEmitter.emit("MIC_REQUESTED",{peerId:xu}),Ss()}catch(Jo){un.error('"enableMic" request failed:%o',Jo),(Dl=Jr._videosdkLogs)===null||Dl===void 0||Dl.pushLogs({logText:"Error enableMic request failed",logType:"ERROR",attributes:{error:Jo.message}}),Jr._emitError({code:3027,message:Jo.message})}return ns.abrupt("break",130);case 74:return ns.prev=74,uu=(Wu=Jr._openTelemetry)===null||Wu===void 0?void 0:Wu.trace({spanName:"Protoo REQ: disableMic"}),ns.next=78,Jr.disableMic(!1,uu);case 78:(Gu=Jr._openTelemetry)===null||Gu===void 0||Gu.completeSpan({span:uu,status:1,message:"Request Completed"}),Ss(),ns.next=87;break;case 82:ns.prev=82,ns.t3=ns.catch(74),(Su=Jr._openTelemetry)===null||Su===void 0||Su.completeSpan({span:uu,status:2,message:"disableMic request failed ".concat(ns.t3)}),(du=Jr._videosdkLogs)===null||du===void 0||du.pushLogs({logText:"Error disableMic request failed",logType:"ERROR",attributes:{error:ns.t3.message}}),Jr._emitError({code:3028,message:ns.t3.message});case 87:return ns.abrupt("break",130);case 88:try{qu=Sn.data.peerId,(wu=Jr._openTelemetry)===null||wu===void 0||wu.traceAutoComplete({spanName:"Emitting WEBCAM_REQUESTED & Protoo REQ: enableWebcam for ".concat(qu),status:1}),Jr._eventEmitter.emit("WEBCAM_REQUESTED",{peerId:qu}),Ss()}catch(Jo){un.error('"enableWebcam" request failed:%o',Jo),(hu=Jr._videosdkLogs)===null||hu===void 0||hu.pushLogs({logText:"Error enableWebcam request failed",logType:"ERROR",attributes:{error:Jo.message}}),Jr._emitError({code:3029,message:Jo.message})}return ns.abrupt("break",130);case 90:return ns.prev=90,Eu=(Xo=Jr._openTelemetry)===null||Xo===void 0?void 0:Xo.trace({spanName:"Protoo REQ: disableWebcam"}),ns.next=94,Jr.disableWebcam(Eu);case 94:(Gl=Jr._openTelemetry)===null||Gl===void 0||Gl.completeSpan({span:Eu,status:1,message:"Request Completed"}),Ss(),ns.next=103;break;case 98:ns.prev=98,ns.t4=ns.catch(90),(up=Jr._openTelemetry)===null||up===void 0||up.completeSpan({span:Eu,status:2,message:"disableWebcam request failed ".concat(ns.t4)}),(Ru=Jr._videosdkLogs)===null||Ru===void 0||Ru.pushLogs({logText:"Error disableWebcam request failed",logType:"ERROR",attributes:{error:ns.t4.message}}),Jr._emitError({code:3030,message:ns.t4.message});case 103:return ns.abrupt("break",130);case 104:ns.prev=104,Ku=Sn.data,fu=Ku.peerId,Cu=Ku.state,Du=Ku.pinnedBy,dp=(hp=Jr._openTelemetry)===null||hp===void 0?void 0:hp.trace({spanName:"Protoo REQ: pinStateChanged",attributes:{requestData:JSON.stringify({peerId:fu,state:Cu,pinnedBy:Du})}}),Jr._pinnedParticipants.has(fu)||Jr._pinnedParticipants.set(fu,{cam:!1,share:!1}),Xu=Jr._pinnedParticipants.get(fu),Cu.cam!=null&&(Xu.cam=Cu.cam),Cu.share!=null&&(Xu.share=Cu.share),Jr._pinnedParticipants.set(fu,Xu),Jr._eventEmitter.emit("PIN_STATE_CHANGED",{peerId:fu,state:Cu,pinnedBy:Du}),Xu.share==0&&Xu.cam==0&&Jr._pinnedParticipants.delete(fu),(Zo=Jr._openTelemetry)===null||Zo===void 0||Zo.completeSpan({span:dp,status:1,message:"Request Completed",attributes:{_pinnedParticipants:JSON.stringify(Jr._pinnedParticipants)}}),Ss(),ns.next=123;break;case 118:throw ns.prev=118,ns.t5=ns.catch(104),(Vl=Jr._openTelemetry)===null||Vl===void 0||Vl.completeSpan({span:dp,status:2,message:"pinStateChanged request failed"}),(Tu=Jr._videosdkLogs)===null||Tu===void 0||Tu.pushLogs({logText:"Error pinStateChanged request failed",logType:"ERROR",attributes:{error:ns.t5.message}}),ns.t5;case 123:return ns.abrupt("break",130);case 124:return Jr._eventEmitter.emit("SWITCH_ROOM",Sn.data),Ss(),ns.abrupt("break",130);case 127:return Ss({peerId:Jr._peerId,statsData:Jr._stats}),Jr._stats={},ns.abrupt("break",130);case 130:case"end":return ns.stop()}},Ls,null,[[14,37],[52,67],[74,82],[90,98],[104,118]])}));return function(Ls,Sn,Ss){return Rs.apply(this,arguments)}}()),this._protoo.on("notification",function(){var Rs=(0,pt.Z)(vt().mark(function Ls(Sn){var Ss,fs,Ks,Js,Ms,Cs,Xs,so,po,Es,zs,Qo,qo,ro,Po,Do,mo,xo,ho,Cl,ls,vo,Ko,wo,Pl,qs,Oo,ks,Eo,xa,tu,zu,Hu,Iu,lp,cu,_h,xl,Lu,xu,Dl,uu,Wu,Gu,Su,du,wu,qu,hu,Eu,Xo,Gl,up,Ru,dp,hp,Zo,Ku,fu,Cu,Du,Xu,Vl,Tu,ns,Jo,Mp,Dp,fp,pp,Op,Hp,_c,_f;return vt().wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:un.debug('proto "notification" event [method:%s, data:%o]',Sn.method,Sn.data),Yn.t0=Sn.method,Yn.next=Yn.t0==="error"?4:Yn.t0==="participantMediaStateChanged"?9:Yn.t0==="producerScore"?10:Yn.t0==="entryRequested"?13:Yn.t0==="entryResponded"?17:Yn.t0==="newPeer"?22:Yn.t0==="peerClosed"?29:Yn.t0==="peerDisplayNameChanged"?35:Yn.t0==="downlinkBwe"?39:Yn.t0==="consumerClosed"?41:Yn.t0==="consumerPaused"?53:Yn.t0==="consumerResumed"?60:Yn.t0==="consumerLayersChanged"?67:Yn.t0==="consumerScore"?78:Yn.t0==="dataConsumerClosed"?81:Yn.t0==="activeSpeaker"?90:Yn.t0==="recordingStateChanged"?95:Yn.t0==="recordingStarted"?98:Yn.t0==="recordingStopped"?100:Yn.t0==="livestreamStateChanged"?102:Yn.t0==="livestreamStarted"?105:Yn.t0==="livestreamStopped"?107:Yn.t0==="hlsStateChanged"?109:Yn.t0==="hlsPlayableStateChanged"?112:Yn.t0==="hlsStarted"?114:Yn.t0==="hlsStopped"?117:Yn.t0==="whiteboardStarted"?119:Yn.t0==="whiteboardStopped"?122:Yn.t0==="videoStatusChanged"?124:Yn.t0==="videoSeeked"?126:Yn.t0==="connectionOpen"?129:Yn.t0==="connectionClose"?131:Yn.t0==="connectionChatMessage"?133:Yn.t0==="connectionParticipantJoined"?135:Yn.t0==="connectionParticipantLeft"?137:Yn.t0==="pubsubMessage"?139:Yn.t0==="peerModeChanged"?141:Yn.t0==="restartIce"?144:148;break;case 4:return Ks=Sn.data,Jr._eventEmitter.emit("ERROR",Ks),(Ss=Jr._videosdkLogs)===null||Ss===void 0||Ss.pushLogs({logText:"Error in Meeting Session",logType:"ERROR",attributes:{error:Ks.message}}),(fs=Jr._openTelemetry)===null||fs===void 0||fs.traceAutoComplete({spanName:"Emitted `ERROR` Event",attributes:{error:Ks.message},status:2}),Yn.abrupt("break",149);case 9:try{Js=Sn.data,Ms=Js.peerId,Cs=Js.kind,Xs=Js.newState,Jr._eventEmitter.emit("PARTICIPANT_MEDIA_STATE_CHANGED",{peerId:Ms,kind:Cs,newState:Xs}),Cs=="video"&&((so=Jr._openTelemetry)===null||so===void 0||so.traceAutoComplete({spanName:"".concat(Ms," has ").concat(Xs?"enable":"disable"," ").concat(Cs),status:1}))}catch(cr){un.error('"newProducer" request failed:%o',cr),(po=Jr._videosdkLogs)===null||po===void 0||po.pushLogs({logText:"Error newProducer request failed",logType:"ERROR",attributes:{error:cr.message}})}case 10:return Es=Sn.data,zs=Es.producerId,Qo=Es.score,Br.dispatch(fr(zs,Qo)),Yn.abrupt("break",149);case 13:return ro=Sn.data,Po=ro.id,Do=ro.name,mo=(qo=Jr._openTelemetry)===null||qo===void 0?void 0:qo.trace({spanName:"Protoo Noti: entryRequested",span:Jr._joinSpan,attributes:{data:JSON.stringify({id:Po,name:Do})}}),Po!==Jr._peerId?(Jr._eventEmitter.emit("ENTRY_REQUESTED",{id:Po,name:Do}),(xo=Jr._openTelemetry)===null||xo===void 0||xo.completeSpan({span:mo,status:1,message:"EntryResponded Recieved"})):(ho=Jr._openTelemetry)===null||ho===void 0||ho.completeSpan({span:mo,status:2,message:"Entry Request Failed"}),Yn.abrupt("break",149);case 17:return ls=Sn.data,vo=ls.id,Ko=ls.decision,ls.sessionId,Jr._eventEmitter.emit("ENTRY_RESPONDED",{id:vo,decision:Ko}),wo=(Cl=Jr._openTelemetry)===null||Cl===void 0?void 0:Cl.trace({spanName:"Protoo Noti: entryResponded",attributes:{data:JSON.stringify({id:vo,decision:Ko})},span:Jr._joinSpan}),vo===Jr._peerId&&Ko==="allowed"?(Jr.joinRoom(),(Pl=Jr._openTelemetry)===null||Pl===void 0||Pl.completeSpan({span:wo,status:1,message:"EntryResponded Recieved"})):(qs=Jr._openTelemetry)===null||qs===void 0||qs.completeSpan({span:Jr._joinSpan,status:2,message:"Join Request Denied"}),Yn.abrupt("break",149);case 22:Oo=Sn.data,ks=Vr(In(In({},Oo),{},{consumers:[],dataConsumers:[]})),Br.dispatch(ks),Jr._eventEmitter.emit(ks.type,ks.payload),Br.dispatch(Ln({text:"".concat(Oo.displayName," has joined the room")}));try{(Eo=Jr._openTelemetry)===null||Eo===void 0||Eo.traceAutoComplete({spanName:"Protoo Noti: newPeer ".concat(Oo.displayName),attributes:{peerData:JSON.stringify(Oo)}})}catch(cr){(xa=Jr._videosdkLogs)===null||xa===void 0||xa.pushLogs({logText:"Error Protoo Noti: newPeer",logType:"ERROR",attributes:{error:cr.message}}),console.error(cr)}return Yn.abrupt("break",149);case 29:return zu=Sn.data.peerId,Hu=mn(zu),Br.dispatch(Hu),Jr._eventEmitter.emit(Hu.type,Hu.payload),(tu=Jr._openTelemetry)===null||tu===void 0||tu.traceAutoComplete({spanName:"Protoo Noti: peerClosed for ".concat(zu)}),Yn.abrupt("break",149);case 35:return Iu=Sn.data,lp=Iu.peerId,cu=Iu.displayName,_h=Iu.oldDisplayName,Br.dispatch(tn(cu,lp)),Br.dispatch(Ln({text:"".concat(_h," is now ").concat(cu)})),Yn.abrupt("break",149);case 39:return un.debug("'downlinkBwe' event:%o",Sn.data),Yn.abrupt("break",149);case 41:if(Lu=Sn.data.consumerId,xu=Jr._consumers.get(Lu)){Yn.next=45;break}return Yn.abrupt("break",149);case 45:return xu.close(),Jr._consumers.delete(Lu),Dl=xu.appData.peerId,uu=tr(Lu,Dl),Br.dispatch(uu),Jr._eventEmitter.emit(uu.type,uu.payload),(xl=Jr._openTelemetry)===null||xl===void 0||xl.traceAutoComplete({spanName:"Protoo Noti: consumerClosed for id ".concat(Lu),attributes:{consumerData:JSON.stringify(xu)}}),Yn.abrupt("break",149);case 53:if(Wu=Sn.data.consumerId,Gu=Jr._consumers.get(Wu)){Yn.next=57;break}return Yn.abrupt("break",149);case 57:return Gu.pause(),Br.dispatch(vr(Wu,"remote")),Yn.abrupt("break",149);case 60:if(Su=Sn.data.consumerId,du=Jr._consumers.get(Su)){Yn.next=64;break}return Yn.abrupt("break",149);case 64:return du.resume(),Br.dispatch(Fr(Su,"remote")),Yn.abrupt("break",149);case 67:if(wu=Sn.data,qu=wu.consumerId,hu=wu.spatialLayer,Eu=wu.temporalLayer,(Xo=Jr._consumers.get(qu)).currentSpatialLayer=hu,Xo.currentTemporalLayer=Eu,Xo){Yn.next=73;break}return Yn.abrupt("break",149);case 73:return Xo.appData.encodings.length>1?(Jr._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:Xo.appData.peerId,prevQuality:Xo.spatialLayers-1-Xo.currentSpatialLayer==0?"HIGH":Xo.spatialLayers-1-Xo.currentSpatialLayer==1?"MEDIUM":"LOW",currentQuality:Xo.spatialLayers-1-hu==0?"HIGH":Xo.spatialLayers-1-hu==1?"MEDIUM":"LOW"}),(Gl=Jr._videosdkLogs)===null||Gl===void 0||Gl.pushLogs({logText:"Consumer Peer ".concat(Xo.appData.peerId," changed to ").concat(Xo.spatialLayers-1-hu==0?"HIGH":Xo.spatialLayers-1-hu==1?"MEDIUM":"LOW",", previous quality was ").concat(Xo.spatialLayers-1-Xo.currentSpatialLayer==0?"HIGH":Xo.spatialLayers-1-Xo.currentSpatialLayer==1?"MEDIUM":"LOW"),logType:"INFO",attributes:{consumerId:qu}})):(Jr._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:Xo.appData.peerId,prevQuality:"HIGH",currentQuality:"HIGH"}),(up=Jr._videosdkLogs)===null||up===void 0||up.pushLogs({logText:"Consumer Peer ".concat(Xo.appData.peerId," changed to HIGH, previous quality was HIGH"),logType:"INFO",attributes:{consumerId:qu}})),Xo.currentSpatialLayer=hu,Xo.currentTemporalLayer=Eu,Br.dispatch(Kr(qu,hu,Eu)),Yn.abrupt("break",149);case 78:return Ru=Sn.data,dp=Ru.consumerId,hp=Ru.score,Br.dispatch(En(dp,hp)),Yn.abrupt("break",149);case 81:if(Zo=Sn.data.dataConsumerId,Ku=Jr._dataConsumers.get(Zo)){Yn.next=85;break}return Yn.abrupt("break",149);case 85:return Ku.close(),Jr._dataConsumers.delete(Zo),fu=Ku.appData.peerId,Br.dispatch(Qn(Zo,fu)),Yn.abrupt("break",149);case 90:return Cu=Sn.data.peerId,Du=Xt(Cu),Br.dispatch(Du),Jr._eventEmitter.emit(Du.type,Du.payload),Yn.abrupt("break",149);case 95:return Jr._eventEmitter.emit("RECORDING_STATE_CHANGED",Sn.data),(Xu=Jr._openTelemetry)===null||Xu===void 0||Xu.traceAutoComplete({spanName:"Emitted RECORDING_STATE_CHANGED, status : ".concat(Sn.data.status),attributes:{data:JSON.stringify(Sn.data)},status:1}),Yn.abrupt("break",149);case 98:return Jr._eventEmitter.emit("RECORDING_STARTED",{}),Yn.abrupt("break",149);case 100:return Jr._eventEmitter.emit("RECORDING_STOPPED",{}),Yn.abrupt("break",149);case 102:return Jr._eventEmitter.emit("LIVESTREAM_STATE_CHANGED",Sn.data),(Vl=Jr._openTelemetry)===null||Vl===void 0||Vl.traceAutoComplete({spanName:"Emitted LIVESTREAM_STATE_CHANGED, status : ".concat(Sn.data.status),attributes:{data:JSON.stringify(Sn.data)},status:1}),Yn.abrupt("break",149);case 105:return Jr._eventEmitter.emit("LIVESTREAM_STARTED",{}),Yn.abrupt("break",149);case 107:return Jr._eventEmitter.emit("LIVESTREAM_STOPPED",{}),Yn.abrupt("break",149);case 109:return Jr._eventEmitter.emit("HLS_STATE_CHANGED",Sn.data),(Tu=Jr._openTelemetry)===null||Tu===void 0||Tu.traceAutoComplete({spanName:"Emitted HLS_STATE_CHANGED, status : ".concat(Sn.data.status),attributes:{data:JSON.stringify(Sn.data)},status:1}),Yn.abrupt("break",149);case 112:return Sn.data.isPlayable&&(Jr._eventEmitter.emit("HLS_STATE_CHANGED",In(In({},Sn.data),{},{status:ss.o.HLS_PLAYABLE})),(ns=Jr._openTelemetry)===null||ns===void 0||ns.traceAutoComplete({spanName:"Protoo Noti: hlsPlayableStateChanged",status:1})),Yn.abrupt("break",149);case 114:return Jo=Sn.data.downstreamUrl,Jr._eventEmitter.emit("HLS_STARTED",Jo),Yn.abrupt("break",149);case 117:return Jr._eventEmitter.emit("HLS_STOPPED",{}),Yn.abrupt("break",149);case 119:return Mp=Sn.data.state,Jr._eventEmitter.emit("WHITEBOARD_STARTED",{state:Mp}),Yn.abrupt("break",149);case 122:return Jr._eventEmitter.emit("WHITEBOARD_STOPPED",{}),Yn.abrupt("break",149);case 124:return Jr._eventEmitter.emit("VIDEO_STATE_CHANGED",Sn.data),Yn.abrupt("break",149);case 126:return Dp=Sn.data.currentTime,Jr._eventEmitter.emit("VIDEO_SEEKED",{currentTime:Dp}),Yn.abrupt("break",149);case 129:return Jr._eventEmitter.emit("CONNECTION_OPEN",Sn.data),Yn.abrupt("break",149);case 131:return Jr._eventEmitter.emit("CONNECTION_CLOSE",Sn.data),Yn.abrupt("break",149);case 133:return Jr._eventEmitter.emit("CONNECTION_CHAT_MESSAGE",Sn.data),Yn.abrupt("break",149);case 135:return Jr._eventEmitter.emit("CONNECTION_PARTICIPANT_JOIN",Sn.data),Yn.abrupt("break",149);case 137:return Jr._eventEmitter.emit("CONNECTION_PARTICIPANT_LEFT",Sn.data),Yn.abrupt("break",149);case 139:return Jr._eventEmitter.emit("PUBSUB_MESSAGE",Sn.data),Yn.abrupt("break",149);case 141:return Jr._eventEmitter.emit("PEER_MODE_CHANGED",Sn.data),(fp=Jr._openTelemetry)===null||fp===void 0||fp.traceAutoComplete({spanName:"Emitted PEER_MODE_CHANGED",attributes:{data:JSON.stringify(Sn.data)},status:1}),Yn.abrupt("break",149);case 144:return Op=Sn.data,Hp=Op.transportId,_c=Op.iceParameters,_f=(pp=Jr._openTelemetry)===null||pp===void 0?void 0:pp.trace({spanName:"Protoo Noti: restartIce for transportId :".concat(Hp),attributes:{iceParameters:JSON.stringify(_c)}}),Jr.handleRemoteRestartIce({transportId:Hp,iceParameters:_c,internalSpan:_f}),Yn.abrupt("break",149);case 148:un.error('unknown protoo notification.method "%s"',Sn.method);case 149:case"end":return Yn.stop()}},Ls)}));return function(Ls){return Rs.apply(this,arguments)}}());case 28:case"end":return yn.stop()}},Dr,this)})),function(){return Il.apply(this,arguments)})},{key:"requestEntry",value:(Rl=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return mr=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"Requesting Entry",span:this._joinSpan}),wr.next=3,this._protoo.request("requestEntry",{name:this._displayName});case 3:(dr=this._openTelemetry)===null||dr===void 0||dr.completeSpan({span:mr,status:1,message:"Entry Requested Successfully"});case 4:case"end":return wr.stop()}},Dr,this)})),function(){return Rl.apply(this,arguments)})},{key:"respondEntry",value:(op=(0,pt.Z)(vt().mark(function Dr(pr,dr){var mr,wr,rn;return vt().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:return rn=(mr=this._openTelemetry)===null||mr===void 0?void 0:mr.trace({spanName:"Responding Entry",attributes:{peerId:pr,decision:dr},span:this._joinSpan}),hn.next=3,this._protoo.request("respondEntry",{id:pr,decision:dr});case 3:(wr=this._openTelemetry)===null||wr===void 0||wr.completeSpan({message:"Entry Responded Successfully",span:rn,status:1});case 4:case"end":return hn.stop()}},Dr,this)})),function(Dr,pr){return op.apply(this,arguments)})},{key:"startRecording",value:(sp=(0,pt.Z)(vt().mark(function Dr(pr,dr,mr){var wr,rn,hn,zn,Wn;return vt().wrap(function(us){for(;;)switch(us.prev=us.next){case 0:return un.debug("startRecording()"),hn=(wr=this._openTelemetry)===null||wr===void 0?void 0:wr.trace({spanName:"startRecording() Start",attributes:{webhookUrl:pr||"webhookUrl Not Specify",awsDirPath:dr||"awsDirPath Not Specify",config:mr?JSON.stringify(mr):"config Not Specify"}}),us.prev=2,us.next=5,this._protoo.request("startRecording",{webhookUrl:pr,awsDirPath:dr,config:mr});case 5:us.next=13;break;case 7:us.prev=7,us.t0=us.catch(2),un.error("startRecording() | failed:%o",us.t0),(zn=this._openTelemetry)===null||zn===void 0||zn.completeSpan({span:hn,status:2,message:"startRecording() failed"}),(Wn=this._videosdkLogs)===null||Wn===void 0||Wn.pushLogs({logText:"Error startRecording() failed",logType:"ERROR",attributes:{error:us.t0.message}}),this._emitError({code:3017,message:us.t0.message});case 13:(rn=this._openTelemetry)===null||rn===void 0||rn.completeSpan({span:hn,status:1,message:"startRecording() End"});case 14:case"end":return us.stop()}},Dr,this,[[2,7]])})),function(Dr,pr,dr){return sp.apply(this,arguments)})},{key:"stopRecording",value:(Vu=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr,wr,rn;return vt().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:return un.debug("stopRecording()"),mr=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"stopRecording() Start"}),hn.prev=2,hn.next=5,this._protoo.request("stopRecording",{});case 5:hn.next=12;break;case 7:hn.prev=7,hn.t0=hn.catch(2),(wr=this._openTelemetry)===null||wr===void 0||wr.completeSpan({span:mr,status:2,message:"stopRecording() failed"}),(rn=this._videosdkLogs)===null||rn===void 0||rn.pushLogs({logText:"Error stopRecording() failed",logType:"ERROR",attributes:{error:hn.t0.message}}),this._emitError({code:3018,message:hn.t0.message});case 12:(dr=this._openTelemetry)===null||dr===void 0||dr.completeSpan({span:mr,status:1,message:"stopRecording() End"});case 13:case"end":return hn.stop()}},Dr,this,[[2,7]])})),function(){return Vu.apply(this,arguments)})},{key:"startLivestream",value:(ku=(0,pt.Z)(vt().mark(function Dr(pr,dr){var mr,wr,rn,hn,zn;return vt().wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:return un.debug("startLivestream()"),rn=(mr=this._openTelemetry)===null||mr===void 0?void 0:mr.trace({spanName:"startLivestream() Start",attributes:{outputs:pr?JSON.stringify(pr):"outputs Not Specify",config:dr?JSON.stringify(dr):"config Not Specify"}}),Wn.prev=2,Wn.next=5,this._protoo.request("startLivestream",{outputs:pr,config:dr});case 5:Wn.next=12;break;case 7:Wn.prev=7,Wn.t0=Wn.catch(2),(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:rn,status:1,message:"startLivestream() End"}),(zn=this._videosdkLogs)===null||zn===void 0||zn.pushLogs({logText:"Error startLivestream() failed",logType:"ERROR",attributes:{error:Wn.t0.message}}),this._emitError({code:3019,message:Wn.t0.message});case 12:(wr=this._openTelemetry)===null||wr===void 0||wr.completeSpan({span:rn,status:1,message:"startLivestream() End"});case 13:case"end":return Wn.stop()}},Dr,this,[[2,7]])})),function(Dr,pr){return ku.apply(this,arguments)})},{key:"stopLivestream",value:(lu=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr,wr,rn;return vt().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:return un.debug("stopLivestream()"),mr=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"stopLivestream() Start"}),hn.prev=2,hn.next=5,this._protoo.request("stopLivestream",{});case 5:hn.next=12;break;case 7:hn.prev=7,hn.t0=hn.catch(2),(wr=this._videosdkLogs)===null||wr===void 0||wr.pushLogs({logText:"Error stopLivestream() failed",logType:"ERROR",attributes:{error:hn.t0.message}}),(rn=this._openTelemetry)===null||rn===void 0||rn.completeSpan({span:mr,status:2,message:"Error stopLivestream() failed"}),this._emitError({code:3020,message:hn.t0.message});case 12:(dr=this._openTelemetry)===null||dr===void 0||dr.completeSpan({span:mr,status:1,message:"stopLivestream() End"});case 13:case"end":return hn.stop()}},Dr,this,[[2,7]])})),function(){return lu.apply(this,arguments)})},{key:"startHls",value:(Jl=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr,wr,rn,hn;return vt().wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:return pr=pr||{},un.debug("startHls()"),wr=(dr=this._openTelemetry)===null||dr===void 0?void 0:dr.trace({spanName:"startHls() Start",attributes:{config:pr?JSON.stringify(pr):"config Not Specify"}}),zn.prev=3,zn.next=6,this._protoo.request("startHls",{config:pr});case 6:zn.next=13;break;case 8:zn.prev=8,zn.t0=zn.catch(3),(rn=this._videosdkLogs)===null||rn===void 0||rn.pushLogs({logText:"Error startHls() failed",logType:"ERROR",attributes:{error:zn.t0.message}}),(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:wr,status:2,message:"Error startHls() failed"}),un.error("startHls() | failed:%o",zn.t0);case 13:(mr=this._openTelemetry)===null||mr===void 0||mr.completeSpan({span:wr,status:1,message:"startHlsSpan() End"});case 14:case"end":return zn.stop()}},Dr,this,[[3,8]])})),function(Dr){return Jl.apply(this,arguments)})},{key:"stopHls",value:(Uu=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr,wr,rn;return vt().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:return un.debug("stopHls()"),mr=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"stopHls() Start"}),hn.prev=2,hn.next=5,this._protoo.request("stopHls",{});case 5:hn.next=11;break;case 7:hn.prev=7,hn.t0=hn.catch(2),(wr=this._videosdkLogs)===null||wr===void 0||wr.pushLogs({logText:"Error stopHls() failed",logType:"ERROR",attributes:{error:hn.t0.message}}),(rn=this._openTelemetry)===null||rn===void 0||rn.completeSpan({span:mr,status:2,message:"Error stopHls() failed"});case 11:(dr=this._openTelemetry)===null||dr===void 0||dr.completeSpan({span:mr,status:1,message:"stopHls() End"});case 12:case"end":return hn.stop()}},Dr,this,[[2,7]])})),function(){return Uu.apply(this,arguments)})},{key:"startWhiteboard",value:(Xl=(0,pt.Z)(vt().mark(function Dr(){return vt().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:return un.debug("startWhiteboard()"),pr.prev=1,pr.next=4,this._protoo.request("startWhiteboard",{});case 4:pr.next=10;break;case 6:pr.prev=6,pr.t0=pr.catch(1),un.error("startWhiteboard() | failed:%o",pr.t0),this._emitError({code:3021,message:pr.t0.message});case 10:case"end":return pr.stop()}},Dr,this,[[1,6]])})),function(){return Xl.apply(this,arguments)})},{key:"stopWhiteboard",value:(Ql=(0,pt.Z)(vt().mark(function Dr(){return vt().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:return un.debug("stopWhiteboard()"),pr.prev=1,pr.next=4,this._protoo.request("stopWhiteboard",{});case 4:pr.next=10;break;case 6:pr.prev=6,pr.t0=pr.catch(1),un.error("stopWhiteboard() | failed:%o",pr.t0),this._emitError({code:3022,message:pr.t0.message});case 10:case"end":return pr.stop()}},Dr,this,[[1,6]])})),function(){return Ql.apply(this,arguments)})},{key:"pinStateChange",value:(Tp=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr,wr,rn;return vt().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:return mr=pr.peerId,wr=pr.state,(dr=this._openTelemetry)===null||dr===void 0||dr.traceAutoComplete({spanName:"Pin state Change for ".concat(mr),attributes:{state:wr?JSON.stringify(wr):null},status:1}),hn.prev=2,hn.next=5,this._protoo.request("pinStateChanged",{peerId:mr,state:wr});case 5:hn.next=11;break;case 7:hn.prev=7,hn.t0=hn.catch(2),(rn=this._videosdkLogs)===null||rn===void 0||rn.pushLogs({logText:"Error pinStateChange() failed",logType:"ERROR",attributes:{error:hn.t0.message}}),un.error("pinStateChange() | failed");case 11:case"end":return hn.stop()}},Dr,this,[[2,7]])})),function(Dr){return Tp.apply(this,arguments)})},{key:"startVideo",value:(Cp=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr,wr;return vt().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return mr=pr.link,un.debug("startVideo()"),(dr=this._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"startVideo() Calling",logType:"INFO"}),rn.prev=3,rn.next=6,this._protoo.request("startVideo",{link:mr});case 6:rn.next=13;break;case 8:rn.prev=8,rn.t0=rn.catch(3),(wr=this._videosdkLogs)===null||wr===void 0||wr.pushLogs({logText:"Error startVideo() failed",logType:"ERROR",attributes:{error:rn.t0.message}}),un.error("startVideo() | failed:%o",rn.t0),this._emitError({code:3023,message:rn.t0.message});case 13:case"end":return rn.stop()}},Dr,this,[[3,8]])})),function(Dr){return Cp.apply(this,arguments)})},{key:"stopVideo",value:(Bu=(0,pt.Z)(vt().mark(function Dr(){var pr,dr;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return un.debug("stopVideo()"),(pr=this._videosdkLogs)===null||pr===void 0||pr.pushLogs({logText:"stopVideo() Calling",logType:"INFO"}),mr.prev=2,mr.next=5,this._protoo.request("stopVideo",{});case 5:mr.next=12;break;case 7:mr.prev=7,mr.t0=mr.catch(2),(dr=this._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"Error stopVideo() failed",logType:"ERROR",attributes:{error:mr.t0.message}}),un.error("stopVideo() | failed:%o",mr.t0),this._emitError({code:3024,message:mr.t0.message});case 12:case"end":return mr.stop()}},Dr,this,[[2,7]])})),function(){return Bu.apply(this,arguments)})},{key:"pauseVideo",value:(Fu=(0,pt.Z)(vt().mark(function Dr(pr){return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return un.debug("pauseVideo()"),dr.prev=1,dr.next=4,this._protoo.request("pauseVideo",{currentTime:pr});case 4:dr.next=10;break;case 6:dr.prev=6,dr.t0=dr.catch(1),un.error("pauseVideo() | failed:%o",dr.t0),this._emitError({code:3025,message:dr.t0.message});case 10:case"end":return dr.stop()}},Dr,this,[[1,6]])})),function(Dr){return Fu.apply(this,arguments)})},{key:"resumeVideo",value:(Rp=(0,pt.Z)(vt().mark(function Dr(){return vt().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:return un.debug("resumeVideo()"),pr.prev=1,pr.next=4,this._protoo.request("resumeVideo",{});case 4:pr.next=10;break;case 6:pr.prev=6,pr.t0=pr.catch(1),un.error("resumeVideo() | failed:%o",pr.t0),this._emitError({code:3026,message:pr.t0.message});case 10:case"end":return pr.stop()}},Dr,this,[[1,6]])})),function(){return Rp.apply(this,arguments)})},{key:"seekVideo",value:(rm=(0,pt.Z)(vt().mark(function Dr(pr){return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return un.debug("seekVideo()"),dr.prev=1,dr.next=4,this._protoo.request("seekVideo",{currentTime:pr});case 4:dr.next=10;break;case 6:dr.prev=6,dr.t0=dr.catch(1),un.error("seekVideo() | failed:%o",dr.t0),this._emitError({code:3031,message:dr.t0.message});case 10:case"end":return dr.stop()}},Dr,this,[[1,6]])})),function(Dr){return rm.apply(this,arguments)})},{key:"enablePeerMic",value:(ip=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return(dr=this._openTelemetry)===null||dr===void 0||dr.traceAutoComplete({spanName:"Enabling peer ".concat(pr," Mic"),status:1}),un.debug("enablePeerMic()"),wr.prev=2,wr.next=5,this._protoo.request("enablePeerMic",{peerId:pr});case 5:wr.next=11;break;case 7:wr.prev=7,wr.t0=wr.catch(2),(mr=this._videosdkLogs)===null||mr===void 0||mr.pushLogs({logText:"Error enablePeerMic() failed",logType:"ERROR",attributes:{error:wr.t0.message}}),un.error("enablePeerMic() | failed:%o",wr.t0);case 11:case"end":return wr.stop()}},Dr,this,[[2,7]])})),function(Dr){return ip.apply(this,arguments)})},{key:"disablePeerMic",value:(Xp=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return(dr=this._openTelemetry)===null||dr===void 0||dr.traceAutoComplete({spanName:"Disabling peer ".concat(pr," Mic"),status:1}),un.debug("disablePeerMic()"),wr.prev=2,wr.next=5,this._protoo.request("disablePeerMic",{peerId:pr});case 5:wr.next=11;break;case 7:wr.prev=7,wr.t0=wr.catch(2),(mr=this._videosdkLogs)===null||mr===void 0||mr.pushLogs({logText:"Error disablePeerMic() failed",logType:"ERROR",attributes:{error:wr.t0.message}}),un.error("disablePeerMic() | failed:%o",wr.t0);case 11:case"end":return wr.stop()}},Dr,this,[[2,7]])})),function(Dr){return Xp.apply(this,arguments)})},{key:"consumeWebcamStreams",value:(zp=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return un.debug("consumeWebcamStreams()"),(dr=this._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"consumeWebcamStreams() Calling",logType:"INFO",attributes:{peerId:pr}}),wr.prev=2,wr.next=5,this._protoo.request("consumeVideoStreams",{peerId:pr});case 5:wr.next=11;break;case 7:wr.prev=7,wr.t0=wr.catch(2),(mr=this._videosdkLogs)===null||mr===void 0||mr.pushLogs({logText:"Error consumeWebcamStreams() failed",logType:"ERROR",attributes:{error:wr.t0.message}}),un.error("consumeWebcamStreams() | failed:%o",wr.t0);case 11:case"end":return wr.stop()}},Dr,this,[[2,7]])})),function(Dr){return zp.apply(this,arguments)})},{key:"consumeMicStreams",value:(Kp=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return un.debug("consumeMicStreams()"),(dr=this._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"consumeMicStreams() Calling",logType:"INFO",attributes:{peerId:pr}}),wr.prev=2,wr.next=5,this._protoo.request("consumeAudioStreams",{peerId:pr});case 5:wr.next=11;break;case 7:wr.prev=7,wr.t0=wr.catch(2),(mr=this._videosdkLogs)===null||mr===void 0||mr.pushLogs({logText:"Error consumeMicStreams() failed",logType:"ERROR",attributes:{error:wr.t0.message}}),un.error("consumeMicStreams() | failed:%o",wr.t0);case 11:case"end":return wr.stop()}},Dr,this,[[2,7]])})),function(Dr){return Kp.apply(this,arguments)})},{key:"stopConsumingMicStreams",value:(tm=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return un.debug("stopConsumingAudioStreams()"),(dr=this._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"Error stopConsumingAudioStreams() Calling",logType:"INFO",attributes:{peerId:pr}}),wr.prev=2,wr.next=5,this._protoo.request("stopConsumingAudioStreams",{peerId:pr});case 5:wr.next=11;break;case 7:wr.prev=7,wr.t0=wr.catch(2),(mr=this._videosdkLogs)===null||mr===void 0||mr.pushLogs({logText:"Error stopConsumingMicStreams() failed",logType:"ERROR",attributes:{error:wr.t0.message}}),un.error("stopConsumingMicStreams() | failed:%o",wr.t0);case 11:case"end":return wr.stop()}},Dr,this,[[2,7]])})),function(Dr){return tm.apply(this,arguments)})},{key:"stopConsumingWebcamStreams",value:(Ep=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return un.debug("stopConsumingWebcamStreams()"),(dr=this._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"stopConsumingWebcamStreams() Calling",logType:"INFO",attributes:{peerId:pr}}),wr.prev=2,wr.next=5,this._protoo.request("stopConsumingVideoStreams",{peerId:pr});case 5:wr.next=11;break;case 7:wr.prev=7,wr.t0=wr.catch(2),(mr=this._videosdkLogs)===null||mr===void 0||mr.pushLogs({logText:"Error stopConsumingWebcamStreams() failed",logType:"ERROR",attributes:{error:wr.t0.message}}),un.error("stopConsumingWebcamStreams() | failed:%o",wr.t0);case 11:case"end":return wr.stop()}},Dr,this,[[2,7]])})),function(Dr){return Ep.apply(this,arguments)})},{key:"changeMode",value:(Lp=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr,wr,rn,hn,zn,Wn,us,ds,hs,Jr,yn,Rs,Ls,Sn,Ss,fs,Ks,Js,Ms,Cs,Xs,so,po,Es,zs,Qo,qo=this;return vt().wrap(function(ro){for(;;)switch(ro.prev=ro.next){case 0:if(mr=(dr=this._openTelemetry)===null||dr===void 0?void 0:dr.trace({spanName:"changeMode() Calling with mode : ".concat(pr)}),wr=this._mode,ro.prev=2,wr!==pr){ro.next=7;break}throw(rn=this._openTelemetry)===null||rn===void 0||rn.completeSpan({span:mr,status:2,message:"changeMode() Ending"}),(hn=this._videosdkLogs)===null||hn===void 0||hn.pushLogs({logText:"You are already in ".concat(pr," mode"),logType:"INFO"}),new Error("You are already in ".concat(pr," mode"));case 7:if(this._mode=pr,pr!==Dn.S.CONFERENCE){ro.next=38;break}return this._consume=!0,this._produce=!0,this._mediasoupDevice=new wt.Device({handlerName:this._handlerName}),ro.next=14,this._protoo.request("getRouterRtpCapabilities");case 14:return us=ro.sent,ro.next=17,this._mediasoupDevice.load({routerRtpCapabilities:us});case 17:if(!this._produce){ro.next=22;break}return ro.next=20,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 20:ds=ro.sent,this.createProducerTransport(ds,mr);case 22:if(!this._consume){ro.next=29;break}return ro.next=25,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 25:hs=ro.sent,Jr=hs.id,yn=hs.iceParameters,Rs=hs.iceCandidates,Ls=hs.dtlsParameters,Sn=hs.sctpParameters,this._recvTransport=this._mediasoupDevice.createRecvTransport({id:Jr,iceParameters:yn,iceCandidates:Rs,dtlsParameters:Ls,sctpParameters:Sn,iceServers:this._iceServers}),this._recvTransport.on("connect",function(Po,Do,mo){var xo=Po.dtlsParameters;qo._protoo.request("connectWebRtcTransport",{transportId:qo._recvTransport.id,dtlsParameters:xo}).then(Do).catch(mo)});case 29:return(zn=this._openTelemetry)===null||zn===void 0||zn.traceAutoComplete({spanName:"Sending changeMode request to server",span:mr,status:1}),ro.next=32,this._protoo.request("changeMode",{mode:pr});case 32:this._produce&&(Br.dispatch(hr({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled&&this.enableMic(this.customMicrophoneAudioTrack),Ss=zt(),this._webcamEnabled&&(!Ss||Ss.webcamEnabled||this._externalVideo)&&this.enableWebcam(this.customCameraVideoTrack,mr),this.enableChatDataProducer()),window.SHOW_INFO&&(fs=Br.getState(),Ks=fs.me,Br.dispatch(Zt(Ks.id))),(Wn=this._openTelemetry)===null||Wn===void 0||Wn.traceAutoComplete({spanName:"Emitting PEER_MODE_CHANGED for Peer : ".concat(this._peerId," "),span:mr,status:1}),this._eventEmitter.emit("PEER_MODE_CHANGED",{peerId:this._peerId,mode:"CONFERENCE"}),ro.next=52;break;case 38:if(pr!==Dn.S.VIEWER){ro.next=52;break}return(Js=this._openTelemetry)===null||Js===void 0||Js.traceAutoComplete({spanName:"Sending changeMode request to server",span:mr,status:1}),ro.next=42,this._protoo.request("changeMode",{mode:pr});case 42:this._consume=!1,this._produce=!1,this._dataConsumers.clear(),Es=(Ms=this._openTelemetry)===null||Ms===void 0?void 0:Ms.trace({spanName:"Closing Trasnport",span:mr}),(Cs=this._sendTransport)===null||Cs===void 0||Cs.close(),this._sendTransport=null,(Xs=this._recvTransport)===null||Xs===void 0||Xs.close(),this._recvTransport=null,(so=this._openTelemetry)===null||so===void 0||so.completeSpan({span:Es,status:1,message:"Closed Trasnport"}),(po=this._openTelemetry)===null||po===void 0||po.completeSpan({span:Es,status:1,message:"changeMode() Ending"});case 52:ro.next=58;break;case 54:ro.prev=54,ro.t0=ro.catch(2),(zs=this._videosdkLogs)===null||zs===void 0||zs.pushLogs({logText:"Error changeMode(".concat(pr,") | failed"),logType:"ERROR",attributes:{error:ro.t0.message}}),(Qo=this._openTelemetry)===null||Qo===void 0||Qo.completeSpan({span:mr,status:2,message:"changeMode(".concat(pr,") | failed")});case 58:case"end":return ro.stop()}},Dr,this,[[2,54]])})),function(Dr){return Lp.apply(this,arguments)})},{key:"enablePeerWebcam",value:(qp=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return(dr=this._openTelemetry)===null||dr===void 0||dr.traceAutoComplete({spanName:"Enabling peer ".concat(pr," Webcam"),status:1}),un.debug("enablePeerWebcam()"),wr.prev=2,wr.next=5,this._protoo.request("enablePeerWebcam",{peerId:pr});case 5:wr.next=11;break;case 7:wr.prev=7,wr.t0=wr.catch(2),(mr=this._videosdkLogs)===null||mr===void 0||mr.pushLogs({logText:"Error enablePeerWebcam | failed",logType:"ERROR",attributes:{error:wr.t0.message}}),un.error("enablePeerWebcam() | failed:%o",wr.t0);case 11:case"end":return wr.stop()}},Dr,this,[[2,7]])})),function(Dr){return qp.apply(this,arguments)})},{key:"disablePeerWebcam",value:(ou=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return(dr=this._openTelemetry)===null||dr===void 0||dr.traceAutoComplete({spanName:"Disabling peer ".concat(pr," Webcam"),status:1}),un.debug("disablePeerWebcam()"),wr.prev=2,wr.next=5,this._protoo.request("disablePeerWebcam",{peerId:pr});case 5:wr.next=10;break;case 7:wr.prev=7,wr.t0=wr.catch(2),(mr=this._videosdkLogs)===null||mr===void 0||mr.pushLogs({logText:"Error disablePeerWebcam | failed",logType:"ERROR",attributes:{error:wr.t0.message}});case 10:case"end":return wr.stop()}},Dr,this,[[2,7]])})),function(Dr){return ou.apply(this,arguments)})},{key:"enableMic",value:(_u=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr,wr,rn,hn,zn,Wn,us,ds,hs,Jr,yn,Rs,Ls,Sn,Ss,fs,Ks,Js,Ms,Cs,Xs,so,po,Es,zs,Qo,qo,ro,Po,Do,mo,xo,ho,Cl,ls,vo,Ko,wo=this,Pl=arguments;return vt().wrap(function(qs){for(;;)switch(qs.prev=qs.next){case 0:if(dr=Pl.length>0&&Pl[0]!==void 0?Pl[0]:void 0,mr=Pl.length>1&&Pl[1]!==void 0?Pl[1]:void 0,wr=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"enableMic() Calling ".concat(dr?"With Custom Audio Track":"Without Custom Audio Track "),attributes:{customAudioConfig:dr?JSON.stringify(dr):"Not Specify Custom Track"},span:mr||null}),un.debug("enableMic()"),this._micEnabled=!0,!this._micProducer){qs.next=20;break}return Wn=(rn=this._openTelemetry)===null||rn===void 0?void 0:rn.trace({spanName:"Mic Producer found",span:wr}),dr&&((us=this._openTelemetry)===null||us===void 0||us.traceAutoComplete({spanName:"Stopping customAudioTrack",span:wr,status:1}),dr.getTracks().forEach(function(Oo){Oo.stop()})),(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:Wn,status:1,message:"Resuming Mic Producer"}),this._micProducer.resume(),ds=this._micProducer,qs.next=13,this._sendTransport.produce({track:this._micProducer.track,encodings:this._micProducer._appData.encodings,codecOptions:this._micProducer._appData.codecOptions});case 13:return this._micProducer=qs.sent,hs=xr({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:ds._appData.encodings,codecOptions:ds._appData.codecOptions,instance:this._micProducer}),this._micProducer.track.getConstraints().deviceId&&(this._mic.device=this._mics.get(this._micProducer.track.getConstraints().deviceId)),Br.dispatch(hs),this._eventEmitter.emit(hs.type,hs.payload),(zn=this._openTelemetry)===null||zn===void 0||zn.completeSpan({span:wr,status:1,message:"Enable Mic Successful"}),qs.abrupt("return");case 20:if(this._mediasoupDevice.canProduce("audio")){qs.next=24;break}return un.error("enableMic() | cannot produce audio"),(Jr=this._openTelemetry)===null||Jr===void 0||Jr.completeSpan({span:wr,status:2,message:'enableMic() | cannot produce audio"'}),qs.abrupt("return");case 24:if(qs.prev=24,this._externalVideo){qs.next=52;break}return un.debug("enableMic() | calling getUserMedia()"),qs.next=29,this._updateMics(wr);case 29:if(this._mic.device){qs.next=33;break}throw(Js=this._openTelemetry)===null||Js===void 0||Js.traceAutoComplete({spanName:"Mic Device Not Found",span:wr,status:2}),(Ms=this._videosdkLogs)===null||Ms===void 0||Ms.pushLogs({logText:"Error Mic Device Not Found",logType:"ERROR"}),new Error("no mic devices");case 33:try{dr&&(yn=dr.getAudioTracks()[0]).readyState=="ended"&&(yn=null,(Cs=this._openTelemetry)===null||Cs===void 0||Cs.traceAutoComplete({spanName:"Dispose Audio Custom Track, it is in ended state",span:wr,status:2}))}catch(Oo){(Xs=this._videosdkLogs)===null||Xs===void 0||Xs.pushLogs({logText:"Error Invalid Custom Audio Track Passed. Reverting to default Error",logType:"ERROR",attributes:{error:Oo.message}}),console.log("Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(Oo))}if(yn){qs.next=50;break}return Es=(so=this._openTelemetry)===null||so===void 0?void 0:so.trace({spanName:"Creating Track",span:wr}),qs.prev=36,qs.next=39,navigator.mediaDevices.getUserMedia({audio:{deviceId:{ideal:this._mic.device.deviceId},channelCount:1,noiseSuppression:!0,echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0}});case 39:zs=qs.sent,qs.next=48;break;case 42:return qs.prev=42,qs.t0=qs.catch(36),(Qo=this._videosdkLogs)===null||Qo===void 0||Qo.pushLogs({logText:"Error in getUserMedia for audio",logType:"ERROR",attributes:{error:JSON.stringify(qs.t0)}}),(qo=this._openTelemetry)===null||qo===void 0||qo.completeSpan({span:wr,status:2,message:"Error in getUserMedia for audio"}),qs.t0.message==="Permission denied"||qs.t0.name==="NotAllowedError"?((ro=this._videosdkLogs)===null||ro===void 0||ro.pushLogs({logText:"Error Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(error),logType:"ERROR"}),this._emitError(Kn.H.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED)):this._emitError(Kn.H.ERROR_GET_AUDIO_MEDIA),qs.abrupt("return");case 48:yn=zs.getAudioTracks()[0],(po=this._openTelemetry)===null||po===void 0||po.completeSpan({message:"Audio Track Generated",span:Es,status:1});case 50:qs.next=56;break;case 52:return qs.next=54,this._getExternalVideoStream();case 54:Po=qs.sent,yn=Po.getAudioTracks()[0].clone();case 56:return Do=(Rs=this._openTelemetry)===null||Rs===void 0?void 0:Rs.trace({spanName:"Generating Producer Configuration",span:wr}),mo={opusStereo:1,opusDtx:1},dr&&(xo=dr.encoderConfig?Yr.v.audioProfiles[dr.encoderConfig]:Yr.v.audioProfiles.speech_standard,mo={opusStereo:xo.stereo?1:0,opusFec:xo.fec?1:0,opusDtx:xo.dtx?1:0,opusMaxPlaybackRate:xo.maxPlaybackRate,opusPtime:xo.packetTime}),Cl={encodings:ho=[{networkPriority:"high"}],codecOptions:mo},(Ls=this._openTelemetry)===null||Ls===void 0||Ls.traceAutoComplete({spanName:"Generated AppData",span:Do,attributes:{appData:JSON.stringify(Cl)},status:1}),(Sn=this._openTelemetry)===null||Sn===void 0||Sn.completeSpan({span:Do,status:1,message:"Producer Configuration Generated"}),Do=(Ss=this._openTelemetry)===null||Ss===void 0?void 0:Ss.trace({spanName:"Creating Mic Producer",span:wr}),qs.next=67,this._sendTransport.produce({track:yn,encodings:ho,codecOptions:mo,appData:Cl});case 67:this._micProducer=qs.sent,yn.getConstraints().deviceId&&(this._mic.device=this._mics.get(yn.getConstraints().deviceId)),ls=xr({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:ho,codecOptions:mo,instance:this._micProducer}),Br.dispatch(ls),this._eventEmitter.emit(ls.type,ls.payload),this._micProducer.on("transportclose",function(){var Oo,ks=gr(wo._micProducer.id);Br.dispatch(ks),wo._eventEmitter.emit(ks.type,ks.payload),(Oo=wo._micProducer)===null||Oo===void 0||Oo.close(),wo._micProducer=null}),this._micProducer.on("trackended",function(){var Oo;(Oo=wo._openTelemetry)===null||Oo===void 0||Oo.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Do,status:2}),Br.dispatch(Ln({type:"error",text:"Microphone disconnected!"})),wo.disableMic(!0,wr).catch(function(){})}),(fs=this._openTelemetry)===null||fs===void 0||fs.completeSpan({span:Do,status:1,message:"Mic Producer Created"}),(Ks=this._openTelemetry)===null||Ks===void 0||Ks.completeSpan({span:wr,status:1,message:"Enable Mic Successful"}),qs.next=87;break;case 78:return qs.prev=78,qs.t1=qs.catch(24),(vo=this._openTelemetry)===null||vo===void 0||vo.completeSpan({span:wr,status:2,message:"Error enabling microphone: ".concat(qs.t1)}),(Ko=this._videosdkLogs)===null||Ko===void 0||Ko.pushLogs({logText:"Error enabling microphone",logType:"ERROR",attributes:{error:qs.t1.message}}),un.error("enableMic() | failed:%o",qs.t1),Br.dispatch(Ln({type:"error",text:"Error enabling microphone: ".concat(qs.t1)})),qs.next=86,this._protoo.request("produceError",{mediaType:"audio",message:qs.t1.message});case 86:yn&&yn.stop();case 87:case"end":return qs.stop()}},Dr,this,[[24,78],[36,42]])})),function(){return _u.apply(this,arguments)})},{key:"disableMic",value:(Yo=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr,wr,rn,hn,zn,Wn,us,ds,hs,Jr,yn,Rs,Ls,Sn,Ss,fs,Ks,Js,Ms=arguments;return vt().wrap(function(Cs){for(;;)switch(Cs.prev=Cs.next){case 0:if(mr=Ms.length>0&&Ms[0]!==void 0&&Ms[0],wr=Ms.length>1&&Ms[1]!==void 0?Ms[1]:void 0,un.debug("disableMic()"),rn=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"disableMic() Calling",status:1,span:wr||null}),this._micProducer){Cs.next=7;break}return(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:rn,status:2,message:"Mic Producer Not found"}),Cs.abrupt("return");case 7:if(zn=(dr=this._openTelemetry)===null||dr===void 0?void 0:dr.trace({spanName:"Closing Mic Producer",span:rn,status:1}),this._micEnabled=!1,!this._micProducer||mr){Cs.next=29;break}return hs=(Wn=this._openTelemetry)===null||Wn===void 0?void 0:Wn.trace({spanName:"Pausing Mic Producer",span:zn,status:1}),this._micProducer.pause(),Jr=gr(this._micProducer.id),(us=this._openTelemetry)===null||us===void 0||us.completeSpan({span:hs,status:1,message:"Pause Mic Successfully"}),Br.dispatch(Jr),this._eventEmitter.emit(Jr.type,Jr.payload),Cs.prev=16,Cs.next=19,this._protoo.request("closeProducer",{producerId:this._micProducer.id});case 19:(yn=this._openTelemetry)===null||yn===void 0||yn.completeSpan({span:zn,status:1,message:"Requested Server to Close Producer"}),Cs.next=27;break;case 22:Cs.prev=22,Cs.t0=Cs.catch(16),Br.dispatch(Ln({type:"error",text:"Error closing server-side mic Producer: ".concat(Cs.t0)})),(Rs=this._openTelemetry)===null||Rs===void 0||Rs.completeSpan({span:rn,status:2,message:"Error closing server-side mic Producer closeProducer :".concat(mr)}),(Ls=this._videosdkLogs)===null||Ls===void 0||Ls.pushLogs({logText:"Error closing server-side mic Producer closeProducer :".concat(mr),logType:"ERROR",attributes:{error:Cs.t0.message}});case 27:return(ds=this._openTelemetry)===null||ds===void 0||ds.completeSpan({span:rn,status:1,message:"Mic Disabled Successfully"}),Cs.abrupt("return");case 29:return this._micProducer.close(),Sn=gr(this._micProducer.id),Br.dispatch(Sn),this._eventEmitter.emit(Sn.type,Sn.payload),Cs.prev=33,Cs.next=36,this._protoo.request("closeProducer",{producerId:this._micProducer.id});case 36:(Ss=this._openTelemetry)===null||Ss===void 0||Ss.completeSpan({span:zn,status:1,message:"Requested Server to Close Producer"}),(fs=this._openTelemetry)===null||fs===void 0||fs.completeSpan({span:rn,status:1,message:"Mic Disabled Successfully"}),Cs.next=45;break;case 40:Cs.prev=40,Cs.t1=Cs.catch(33),Br.dispatch(Ln({type:"error",text:"Error closing server-side mic Producer: ".concat(Cs.t1)})),(Ks=this._openTelemetry)===null||Ks===void 0||Ks.completeSpan({span:rn,status:2,message:"Error closing server-side mic Producer closeProducer :".concat(mr)}),(Js=this._videosdkLogs)===null||Js===void 0||Js.pushLogs({logText:"Error closing server-side mic Producer closeProducer :".concat(mr),logType:"ERROR",attributes:{error:Cs.t1.message}});case 45:this._micProducer=null;case 46:case"end":return Cs.stop()}},Dr,this,[[16,22],[33,40]])})),function(){return Yo.apply(this,arguments)})},{key:"muteMic",value:(Ds=(0,pt.Z)(vt().mark(function Dr(){var pr;return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return un.debug("muteMic()"),this._micEnabled=!1,this._micProducer.pause(),dr.prev=3,dr.next=6,this._protoo.request("pauseProducer",{producerId:this._micProducer.id});case 6:Br.dispatch({type:"SET_PRODUCER_PAUSED",payload:{producerId:this._micProducer.id}}),dr.next=14;break;case 9:dr.prev=9,dr.t0=dr.catch(3),un.error("muteMic() | failed: %o",dr.t0),(pr=this._videosdkLogs)===null||pr===void 0||pr.pushLogs({logText:"Error pausing server-side mic Producer",logType:"ERROR",attributes:{error:dr.t0.message}}),Br.dispatch(Ln({type:"error",text:"Error pausing server-side mic Producer: ".concat(dr.t0)}));case 14:case"end":return dr.stop()}},Dr,this,[[3,9]])})),function(){return Ds.apply(this,arguments)})},{key:"unmuteMic",value:(Vp=(0,pt.Z)(vt().mark(function Dr(){var pr;return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return un.debug("unmuteMic()"),this._micEnabled=!0,this._micProducer.resume(),dr.prev=3,dr.next=6,this._protoo.request("resumeProducer",{producerId:this._micProducer.id});case 6:Br.dispatch({type:"SET_PRODUCER_RESUMED",payload:{producerId:this._micProducer.id}}),dr.next=14;break;case 9:dr.prev=9,dr.t0=dr.catch(3),un.error("unmuteMic() | failed: %o",dr.t0),(pr=this._videosdkLogs)===null||pr===void 0||pr.pushLogs({logText:"Error resuming server-side mic Producer",logType:"ERROR",attributes:{error:dr.t0.message}}),Br.dispatch(Ln({type:"error",text:"Error resuming server-side mic Producer: ".concat(dr.t0)}));case 14:case"end":return dr.stop()}},Dr,this,[[3,9]])})),function(){return Vp.apply(this,arguments)})},{key:"enableWebcam",value:(Fs=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr,wr,rn,hn,zn,Wn,us,ds,hs,Jr,yn,Rs,Ls,Sn,Ss,fs,Ks,Js,Ms,Cs,Xs,so,po,Es,zs,Qo,qo,ro,Po,Do,mo,xo,ho,Cl,ls,vo,Ko,wo,Pl,qs=this,Oo=arguments;return vt().wrap(function(ks){for(;;)switch(ks.prev=ks.next){case 0:if(dr=Oo.length>0&&Oo[0]!==void 0?Oo[0]:void 0,mr=Oo.length>1&&Oo[1]!==void 0?Oo[1]:void 0,wr=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"enableWebcam() Calling ".concat(dr?"With Custom Video Track":"Without Custom Video Track "),attributes:{customVideoConfig:dr?JSON.stringify(dr):"Not Specify Custom Track"},span:mr||null}),un.debug("enableWebcam()"),this._webcamEnabled=!0,!this._webcamProducer){ks.next=8;break}return(rn=this._openTelemetry)===null||rn===void 0||rn.completeSpan({span:wr,status:2,message:"Webcam Producer found"}),ks.abrupt("return");case 8:if(this._mediasoupDevice.canProduce("video")){ks.next=12;break}return(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:wr,status:2,message:"enableWebcam() | cannot produce video"}),un.error("enableWebcam() | cannot produce video"),ks.abrupt("return");case 12:if(Br.dispatch(Tr(!0)),us=this._webcam.resolution,ks.prev=14,this._externalVideo){ks.next=53;break}return ks.next=18,this._updateWebcams(wr);case 18:if(Wn=this._webcam.device){ks.next=23;break}throw(Sn=this._openTelemetry)===null||Sn===void 0||Sn.traceAutoComplete({spanName:"Webcam Device Not Found",span:wr,status:2}),(Ss=this._videosdkLogs)===null||Ss===void 0||Ss.pushLogs({logText:"Error Webcam Device Not Found",logType:"ERROR"}),new Error("no webcam devices");case 23:un.debug("enableWebcam() | calling getUserMedia()");try{dr&&(zn=dr.getVideoTracks()[0]).readyState=="ended"&&(zn=null,(fs=this._openTelemetry)===null||fs===void 0||fs.traceAutoComplete({spanName:"Dispose Video Custom Track, it is in ended state",span:wr,status:2}))}catch(Eo){(Ks=this._videosdkLogs)===null||Ks===void 0||Ks.pushLogs({logText:"Error Invalid Custom Track Passed. Reverting to default Error",logType:"ERROR",attributes:{error:Eo.message}}),console.log("Invalid Custom Track Passed. Reverting to default Error: ".concat(Eo))}if(zn){ks.next=51;break}if(Ms=(Js=this._openTelemetry)===null||Js===void 0?void 0:Js.trace({spanName:"Creating Track",span:wr}),Cs=null,ks.prev=28,this._webcam.resolution!="hd"){ks.next=36;break}return ks.next=32,es.VideoSDK.createCameraVideoTrack({cameraId:Wn.deviceId,encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast,facingMode:Wn.facing});case 32:dr=ks.sent,Cs=JSON.stringify({encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast}),ks.next=40;break;case 36:return ks.next=38,es.VideoSDK.createCameraVideoTrack({cameraId:Wn.deviceId,encoderConfig:"h540p_w960p",multiStream:this._useSimulcast,facingMode:Wn.facing});case 38:dr=ks.sent,Cs=JSON.stringify({encoderConfig:"h540p_w960p",multiStream:this._useSimulcast});case 40:zn=dr.getVideoTracks()[0],(Xs=this._openTelemetry)===null||Xs===void 0||Xs.completeSpan({message:"Video Track Generated",span:Ms,attributes:{customVideoTrackConfig:Cs},status:1}),ks.next=51;break;case 44:return ks.prev=44,ks.t0=ks.catch(28),(so=this._videosdkLogs)===null||so===void 0||so.pushLogs({logText:"Error Creating VideoTrack",logType:"ERROR",attributes:{error:ks.t0.message}}),(po=this._openTelemetry)===null||po===void 0||po.completeSpan({message:"Error Creating VideoTrack",span:wr,status:2}),console.log("Error Creating VideoTrack: ",ks.t0),ks.t0.message==="Permission denied"||ks.t0.name==="NotAllowedError"?this._emitError(Kn.H.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(Kn.H.ERROR_GET_VIDEO_MEDIA),ks.abrupt("return");case 51:ks.next=58;break;case 53:return Wn={label:"external video"},ks.next=56,this._getExternalVideoStream();case 56:Es=ks.sent,zn=Es.getVideoTracks()[0].clone();case 58:if(zs=(ds=this._openTelemetry)===null||ds===void 0?void 0:ds.trace({spanName:"Generating Producer Configuration",span:wr}),ro={videoGoogleStartBitrate:1e3},!this._forceH264){ks.next=67;break}if(qo=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Eo){return Eo.mimeType.toLowerCase()==="video/h264"})){ks.next=65;break}throw(Po=this._videosdkLogs)===null||Po===void 0||Po.pushLogs({logText:"Error desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 65:ks.next=72;break;case 67:if(!this._forceVP9){ks.next=72;break}if(qo=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Eo){return Eo.mimeType.toLowerCase()==="video/vp9"})){ks.next=72;break}throw(Do=this._videosdkLogs)===null||Do===void 0||Do.pushLogs({logText:"Error desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 72:zn?(mo=zn.getConstraints(),Qo=Er(!1,mo.width,mo.height,{simulcast:dr.multiStream})):this._useSimulcast&&(xo=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Eo){return Eo.kind==="video"}),Qo=this._forceVP9&&qo||xo.mimeType.toLowerCase()==="video/vp9"?Os:ys[this._webcam.resolution]),ho={};try{ho={encodings:Qo,width:dr?(Cl=zn)===null||Cl===void 0?void 0:Cl.getConstraints().width:os[us].width.ideal,height:dr?(ls=zn)===null||ls===void 0?void 0:ls.getConstraints().height:os[us].height.ideal}}catch(Eo){(vo=this._videosdkLogs)===null||vo===void 0||vo.pushLogs({logText:"Error Enable Webcam AppData",logType:"ERROR",attributes:{error:Eo.message}}),console.log(Eo)}return(hs=this._openTelemetry)===null||hs===void 0||hs.traceAutoComplete({spanName:"Track Generated with height ".concat(ho.height," and width ").concat(ho.width," with multiStream ").concat(this._useSimulcast),attributes:{appData:JSON.stringify(ho)},span:wr,status:1}),(Jr=this._openTelemetry)===null||Jr===void 0||Jr.completeSpan({span:zs,status:1,message:"Producer Configuration Generated"}),zs=(yn=this._openTelemetry)===null||yn===void 0?void 0:yn.trace({spanName:"Creating Webcam Producer",span:wr}),ks.next=80,this._sendTransport.produce({track:zn,encodings:Qo,codecOptions:ro,codec:qo,appData:ho});case 80:this._webcamProducer=ks.sent,zn.getConstraints().deviceId&&(this._webcam.device=this._webcams.get(zn.getConstraints().deviceId)),Ko=xr({id:this._webcamProducer.id,deviceLabel:Wn.label,type:this._getWebcamType(Wn),paused:this._webcamProducer.paused,track:this._webcamProducer.track,rtpParameters:this._webcamProducer.rtpParameters,codec:this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1],instance:this._webcamProducer}),Br.dispatch(Ko),this._eventEmitter.emit(Ko.type,Ko.payload),this._webcamProducer.on("transportclose",function(){var Eo,xa=gr(qs._webcamProducer.id);Br.dispatch(xa),qs._eventEmitter.emit(xa.type,xa.payload),(Eo=qs._webcamProducer)===null||Eo===void 0||Eo.close(),qs._webcamProducer=null}),this._webcamProducer.on("trackended",function(){var Eo;(Eo=qs._openTelemetry)===null||Eo===void 0||Eo.traceAutoComplete({spanName:"this._webcamProducer trackended or Webcam disconnected!",span:wr,status:2}),Br.dispatch(Ln({type:"error",text:"Webcam disconnected!"})),qs.disableWebcam(wr).catch(function(){})}),(Rs=this._openTelemetry)===null||Rs===void 0||Rs.completeSpan({span:zs,status:1,message:"Webcam Producer Created"}),(Ls=this._openTelemetry)===null||Ls===void 0||Ls.completeSpan({span:wr,status:1,message:"Enable Webcam Successful"}),ks.next=100;break;case 91:return ks.prev=91,ks.t1=ks.catch(14),console.log("enableWebcam() | failed:%o",ks.t1),(wo=this._videosdkLogs)===null||wo===void 0||wo.pushLogs({logText:"Error enabling webcam",logType:"ERROR",attributes:{error:ks.t1.message}}),(Pl=this._openTelemetry)===null||Pl===void 0||Pl.completeSpan({span:wr,status:2,message:"Error enabling webcam"}),Br.dispatch(Ln({type:"error",text:"Error enabling webcam: ".concat(ks.t1)})),ks.next=99,this._protoo.request("produceError",{mediaType:"video",message:ks.t1.message});case 99:zn&&zn.stop();case 100:Br.dispatch(Tr(!1));case 101:case"end":return ks.stop()}},Dr,this,[[14,91],[28,44]])})),function(){return Fs.apply(this,arguments)})},{key:"disableWebcam",value:(yu=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr,wr,rn,hn,zn,Wn,us,ds,hs,Jr=arguments;return vt().wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:if(wr=Jr.length>0&&Jr[0]!==void 0?Jr[0]:void 0,rn=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"disableWebcam() Calling",status:1,span:wr||null}),un.debug("disableWebcam()"),this._webcamEnabled=!1,this._webcamProducer){yn.next=7;break}return(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:rn,status:2,message:"Webcam Producer Not found"}),yn.abrupt("return");case 7:return zn=(dr=this._openTelemetry)===null||dr===void 0?void 0:dr.trace({spanName:"Closing Webcam Producer",span:rn,status:1}),this._webcamProducer.close(),Wn=gr(this._webcamProducer.id),Br.dispatch(Wn),this._eventEmitter.emit(Wn.type,Wn.payload),yn.prev=12,yn.next=15,this._protoo.request("closeProducer",{producerId:this._webcamProducer.id});case 15:(us=this._openTelemetry)===null||us===void 0||us.completeSpan({span:zn,status:1,message:"Requested Server to Close Producer"}),yn.next=23;break;case 18:yn.prev=18,yn.t0=yn.catch(12),(ds=this._videosdkLogs)===null||ds===void 0||ds.pushLogs({logText:"Error closing server-side webcam Producer",logType:"ERROR",attributes:{error:yn.t0.message}}),(hs=this._openTelemetry)===null||hs===void 0||hs.completeSpan({span:rn,status:2,message:"Error closing server-side webcam Producer: ".concat(yn.t0)}),Br.dispatch(Ln({type:"error",text:"Error closing server-side webcam Producer: ".concat(yn.t0)}));case 23:this._webcamProducer=null,(mr=this._openTelemetry)===null||mr===void 0||mr.completeSpan({span:rn,status:1,message:"Webcam Disabled Successfully"});case 25:case"end":return yn.stop()}},Dr,this,[[12,18]])})),function(){return yu.apply(this,arguments)})},{key:"getMics",value:(xs=(0,pt.Z)(vt().mark(function Dr(){var pr,dr;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return pr=[],mr.prev=1,mr.next=4,this._updateMics();case 4:this._mics.forEach(function(wr,rn){pr.push({deviceId:rn,label:wr.label})}),mr.next=11;break;case 7:mr.prev=7,mr.t0=mr.catch(1),un.error("getMics() | Error",mr.t0),(dr=this._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"Error getMics() | Error",logType:"ERROR",attributes:{error:mr.t0.message}});case 11:return mr.abrupt("return",pr);case 12:case"end":return mr.stop()}},Dr,this,[[1,7]])})),function(){return xs.apply(this,arguments)})},{key:"changeMic",value:(nn=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr,wr,rn,hn,zn,Wn,us,ds,hs,Jr,yn,Rs,Ls;return vt().wrap(function(Sn){for(;;)switch(Sn.prev=Sn.next){case 0:if(mr=(dr=this._openTelemetry)===null||dr===void 0?void 0:dr.trace({spanName:"changeMic() Calling"}),Sn.prev=1,(0,ft.Z)(pr)!="object"){Sn.next=9;break}return Sn.next=5,this.disableMic(!0,mr);case 5:return Sn.next=7,this.enableMic(pr,mr);case 7:Sn.next=27;break;case 9:return zn=pr,Sn.next=12,this._updateMics();case 12:if(Wn=Array.from(this._mics.keys()),us=Wn.length,ds=this._mic.device?this._mic.device.deviceId:void 0,zn!=null&&zn!=null?hs=Wn.indexOf(zn):(hs=Wn.indexOf(ds))<us-1?hs++:hs=0,this._mic.device=this._mics.get(Wn[hs]),Jr=(wr=this._openTelemetry)===null||wr===void 0?void 0:wr.trace({spanName:"Getting Selected Mic",span:mr,attributes:{selectedWebcam:this._mic.device?JSON.stringify(this._mic.device):"No Mic devices"}}),this._mic.device){Sn.next=21;break}throw(yn=this._videosdkLogs)===null||yn===void 0||yn.pushLogs({logText:"Error changeMic : No mic Found",logType:"ERROR"}),new Error("No mic Found");case 21:return Sn.next=23,this.disableMic(!0,mr);case 23:return Sn.next=25,this.enableMic(void 0,mr);case 25:(rn=this._openTelemetry)===null||rn===void 0||rn.completeSpan({span:Jr,status:1,message:"Done"}),(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:mr,status:1,message:"changeMic() Ending"});case 27:Sn.next=33;break;case 29:Sn.prev=29,Sn.t0=Sn.catch(1),(Rs=this._openTelemetry)===null||Rs===void 0||Rs.completeSpan({span:mr,status:2,message:"changeMic() | Error ".concat(Sn.t0)}),(Ls=this._videosdkLogs)===null||Ls===void 0||Ls.pushLogs({logText:"Error changeMic() | Error",logType:"ERROR",attributes:{error:Sn.t0.message}});case 33:case"end":return Sn.stop()}},Dr,this,[[1,29]])})),function(Dr){return nn.apply(this,arguments)})},{key:"getWebcams",value:(Up=(0,pt.Z)(vt().mark(function Dr(){var pr,dr;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return pr=[],mr.prev=1,mr.next=4,this._updateWebcams();case 4:this._webcams.forEach(function(wr,rn){pr.push({deviceId:rn,label:wr.label,facingMode:wr.facing||"environment"})}),mr.next=11;break;case 7:mr.prev=7,mr.t0=mr.catch(1),un.error("getWebcams() | failed %o",mr.t0),(dr=this._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"Error getWebcams() | failed",logType:"ERROR",attributes:{error:mr.t0.message}});case 11:return mr.abrupt("return",pr);case 12:case"end":return mr.stop()}},Dr,this,[[1,7]])})),function(){return Up.apply(this,arguments)})},{key:"replaceWebcamStream",value:(Ip=(0,pt.Z)(vt().mark(function Dr(pr){var dr;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:if(!this._webcamProducer){mr.next=7;break}return dr=pr.getVideoTracks()[0],mr.next=4,this._webcamProducer.replaceTrack({track:dr});case 4:this._eventEmitter.emit("UPDATE_PRODUCER",{producer:this._webcamProducer}),mr.next=11;break;case 7:return mr.next=9,this.disableWebcam();case 9:return mr.next=11,this.enableWebcam(pr);case 11:case"end":return mr.stop()}},Dr,this)})),function(Dr){return Ip.apply(this,arguments)})},{key:"changeWebcam",value:(Gp=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr,wr,rn,hn,zn,Wn,us,ds,hs,Jr,yn,Rs,Ls;return vt().wrap(function(Sn){for(;;)switch(Sn.prev=Sn.next){case 0:if(mr=(dr=this._openTelemetry)===null||dr===void 0?void 0:dr.trace({spanName:"changeWebcam() Calling"}),Br.dispatch(Tr(!0)),(0,ft.Z)(pr)!=="object"){Sn.next=17;break}return Sn.prev=3,Sn.next=6,this.disableWebcam(mr);case 6:return Sn.next=8,this.enableWebcam(pr,mr);case 8:Sn.next=15;break;case 10:Sn.prev=10,Sn.t0=Sn.catch(3),un.error("changeWebcam() | failed: %o",Sn.t0),(wr=this._videosdkLogs)===null||wr===void 0||wr.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(pr),error:Sn.t0.message}}),Br.dispatch(Ln({type:"error",text:"Could not change webcam: ".concat(Sn.t0)}));case 15:Sn.next=46;break;case 17:return Sn.prev=17,Sn.next=20,this._updateWebcams(mr);case 20:if(Wn=Array.from(this._webcams.keys()),us=Wn.length,ds=this._webcam.device?this._webcam.device.deviceId:void 0,pr!=null&&pr!=null?hs=Wn.indexOf(pr):(hs=Wn.indexOf(ds))<us-1?hs++:hs=0,this._webcam.device=this._webcams.get(Wn[hs]),un.debug("changeWebcam() | new selected webcam [device:%o]",this._webcam.device),this._webcam.resolution=this._webcam.resolution||"hd",Jr=(rn=this._openTelemetry)===null||rn===void 0?void 0:rn.trace({spanName:"Getting Selected Webcam",span:mr,attributes:{selectedWebcam:this._webcam.device?JSON.stringify(this._webcam.device):"No webcam devices"}}),this._webcam.device){Sn.next=31;break}throw(yn=this._videosdkLogs)===null||yn===void 0||yn.pushLogs({logText:"Error changeWebcam : No webcam Found",logType:"ERROR"}),new Error("no webcam devices");case 31:return Sn.next=33,this.disableWebcam(mr);case 33:return Sn.next=35,this.enableWebcam(void 0,mr);case 35:return(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:Jr,status:1,message:"Done"}),(zn=this._openTelemetry)===null||zn===void 0||zn.completeSpan({span:mr,status:1,message:"changeWebcam() Ending"}),Sn.abrupt("return");case 40:Sn.prev=40,Sn.t1=Sn.catch(17),un.error("changeWebcam() | failed: %o",Sn.t1),(Rs=this._videosdkLogs)===null||Rs===void 0||Rs.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(pr),error:Sn.t1.message}}),(Ls=this._openTelemetry)===null||Ls===void 0||Ls.completeSpan({span:mr,status:2,message:"Could not change webcam ".concat(Sn.t1)}),Br.dispatch(Ln({type:"error",text:"Could not change webcam: ".concat(Sn.t1)}));case 46:Br.dispatch(Tr(!1));case 47:case"end":return Sn.stop()}},Dr,this,[[3,10],[17,40]])})),function(Dr){return Gp.apply(this,arguments)})},{key:"changeWebcamResolution",value:(Au=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr,wr;return vt().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:un.debug("changeWebcamResolution()"),Br.dispatch(Tr(!0)),rn.prev=2,rn.t0=this._webcam.resolution,rn.next=rn.t0==="qvga"?6:rn.t0==="vga"?8:rn.t0==="hd"?10:12;break;case 6:return this._webcam.resolution="vga",rn.abrupt("break",13);case 8:return this._webcam.resolution="hd",rn.abrupt("break",13);case 10:return this._webcam.resolution="qvga",rn.abrupt("break",13);case 12:this._webcam.resolution="hd";case 13:return un.debug("changeWebcamResolution() | calling getUserMedia()"),rn.prev=14,rn.next=17,navigator.mediaDevices.getUserMedia({video:In({deviceId:{exact:this._webcam.device.deviceId}},os[this._webcam.resolution])});case 17:pr=rn.sent,rn.next=25;break;case 20:return rn.prev=20,rn.t1=rn.catch(14),(dr=this._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"Error in getUserMedia for changeWebcamResolution",logType:"ERROR",attributes:{error:JSON.stringify(rn.t1)}}),rn.t1.message==="Permission denied"||rn.t1.name==="NotAllowedError"?this._emitError(Kn.H.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(Kn.H.ERROR_GET_VIDEO_MEDIA),rn.abrupt("return");case 25:return mr=pr.getVideoTracks()[0],rn.next=28,this._webcamProducer.replaceTrack({track:mr});case 28:Br.dispatch(_r(this._webcamProducer.id,mr)),rn.next=36;break;case 31:rn.prev=31,rn.t2=rn.catch(2),un.error("changeWebcamResolution() | failed: %o",rn.t2),(wr=this._videosdkLogs)===null||wr===void 0||wr.pushLogs({logText:"Error Could not change webcam resolution",logType:"ERROR",attributes:{error:rn.t2.message}}),Br.dispatch(Ln({type:"error",text:"Could not change webcam resolution: ".concat(rn.t2)}));case 36:Br.dispatch(Tr(!1));case 37:case"end":return rn.stop()}},Dr,this,[[2,31],[14,20]])})),function(){return Au.apply(this,arguments)})},{key:"enableShare",value:(Ul=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr,wr,rn,hn,zn,Wn,us,ds,hs,Jr,yn,Rs,Ls,Sn,Ss,fs,Ks,Js,Ms,Cs,Xs,so,po,Es,zs,Qo,qo,ro,Po,Do,mo,xo,ho=this,Cl=arguments;return vt().wrap(function(ls){for(;;)switch(ls.prev=ls.next){case 0:if(dr=Cl.length>0&&Cl[0]!==void 0?Cl[0]:void 0,mr=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"enableShare() Calling ".concat(dr?"With Custom Video Track":"Without Custom Video Track "),attributes:{customShareConfig:dr?JSON.stringify(dr):"Not Specify Custom Track"}}),un.debug("enableShare()"),!this._shareProducer){ls.next=6;break}return(wr=this._openTelemetry)===null||wr===void 0||wr.completeSpan({span:mr,status:2,message:"Screen Share Producer found"}),ls.abrupt("return");case 6:if(this._mediasoupDevice.canProduce("video")){ls.next=10;break}return(rn=this._openTelemetry)===null||rn===void 0||rn.completeSpan({span:mr,status:2,message:"enableShare() | cannot produce video"}),un.error("enableShare() | cannot produce video"),ls.abrupt("return");case 10:if(Br.dispatch(Hr(!0)),ls.prev=11,un.debug("enableShare() | calling getUserMedia()"),Rs=(Wn=this._openTelemetry)===null||Wn===void 0?void 0:Wn.trace({spanName:"Creating Track",span:mr}),!dr||!dr.active){ls.next=19;break}hn=dr.getVideoTracks()[0],zn=dr.getAudioTracks()[0],ls.next=38;break;case 19:return ls.prev=19,ls.next=22,navigator.mediaDevices.getDisplayMedia({audio:!0,video:{width:{max:1920},height:{max:1080},frameRate:{max:10}}});case 22:Sn=ls.sent,ls.next=31;break;case 25:return ls.prev=25,ls.t0=ls.catch(19),(Ss=this._videosdkLogs)===null||Ss===void 0||Ss.pushLogs({logText:"Error in getDisplayMedia for screen share",logType:"ERROR",attributes:{error:JSON.stringify(ls.t0)}}),(fs=this._openTelemetry)===null||fs===void 0||fs.completeSpan({span:mr,status:2,message:"Error in getDisplayMedia for screen share ".concat(ls.t0)}),ls.t0.message==="Permission denied"||ls.t0.name==="NotAllowedError"?this._emitError(Kn.H.ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED):this._emitError(Kn.H.ERROR_GET_DISPLAY_MEDIA),ls.abrupt("return");case 31:if(Sn){ls.next=35;break}return Br.dispatch(Hr(!0)),(Ks=this._openTelemetry)===null||Ks===void 0||Ks.completeSpan({span:mr,status:2,message:"Stream not found"}),ls.abrupt("return");case 35:hn=Sn.getVideoTracks()[0],zn=Sn.getAudioTracks()[0],(Ls=this._openTelemetry)===null||Ls===void 0||Ls.completeSpan({message:"Track Generated with height ".concat(hn.getSettings().height," and width ").concat(hn.getSettings().width),span:Rs,status:1});case 38:if(Js=(us=this._openTelemetry)===null||us===void 0?void 0:us.trace({spanName:"Generating Producer Configuration",span:mr}),Xs={videoGoogleStartBitrate:1e3},!this._forceH264){ls.next=47;break}if(Cs=this._mediasoupDevice.rtpCapabilities.codecs.find(function(vo){return vo.mimeType.toLowerCase()==="video/h264"})){ls.next=45;break}throw(so=this._videosdkLogs)===null||so===void 0||so.pushLogs({logText:"Error EnableShare : desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 45:ls.next=52;break;case 47:if(!this._forceVP9){ls.next=52;break}if(Cs=this._mediasoupDevice.rtpCapabilities.codecs.find(function(vo){return vo.mimeType.toLowerCase()==="video/vp9"})){ls.next=52;break}throw(po=this._videosdkLogs)===null||po===void 0||po.pushLogs({logText:"Error EnableShare :desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 52:return this._useSharingSimulcast&&(Es=this._mediasoupDevice.rtpCapabilities.codecs.find(function(vo){return vo.kind==="video"}),Ms=this._forceVP9&&Cs||Es.mimeType.toLowerCase()==="video/vp9"?Ys:Zs.map(function(vo){return In(In({},vo),{},{dtx:!0})})),(ds=this._openTelemetry)===null||ds===void 0||ds.completeSpan({span:Js,status:1,message:"Producer Configuration Generated"}),Js=(hs=this._openTelemetry)===null||hs===void 0?void 0:hs.trace({spanName:"Creating Share Producer",span:mr}),ls.next=57,this._sendTransport.produce({track:hn,encodings:Ms,codecOptions:Xs,codec:Cs,appData:{share:!0}});case 57:if(this._shareProducer=ls.sent,zs=xr({id:this._shareProducer.id,type:"share",paused:this._shareProducer.paused,track:this._shareProducer.track,rtpParameters:this._shareProducer.rtpParameters,codec:this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0},instance:this._shareProducer}),Br.dispatch(zs),this._eventEmitter.emit(zs.type,zs.payload),this._shareProducer.on("transportclose",function(){var vo,Ko=gr(ho._shareProducer.id);Br.dispatch(Ko),ho._eventEmitter.emit(Ko.type,Ko.payload),(vo=ho._shareProducer)===null||vo===void 0||vo.close(),ho._shareProducer=null}),this._shareProducer.on("trackended",function(){var vo;(vo=ho._openTelemetry)===null||vo===void 0||vo.traceAutoComplete({spanName:"this._shareProducer trackended or Share disconnected!",span:mr,status:2}),Br.dispatch(Ln({type:"error",text:"Share disconnected!"})),ho.disableShare().catch(function(){})}),(Jr=this._openTelemetry)===null||Jr===void 0||Jr.completeSpan({span:Js,status:1,message:"Share Producer Created"}),!zn){ls.next=84;break}return ls.prev=65,ro={opusStereo:1,opusDtx:1},Js=(Qo=this._openTelemetry)===null||Qo===void 0?void 0:Qo.trace({spanName:"Creating Share Audio Producer",span:mr}),ls.next=70,this._sendTransport.produce({track:zn,codecOptions:ro,appData:{share:!0}});case 70:this._shareAudioProducer=ls.sent,Po=xr({id:this._shareAudioProducer.id,type:"share",paused:this._shareAudioProducer.paused,track:this._shareAudioProducer.track,rtpParameters:this._shareAudioProducer.rtpParameters,codec:this._shareAudioProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0},instance:this._shareAudioProducer}),Br.dispatch(Po),this._eventEmitter.emit(Po.type,Po.payload),this._shareAudioProducer.on("transportclose",function(){var vo,Ko=gr(ho._shareAudioProducer.id);Br.dispatch(Ko),ho._eventEmitter.emit(Ko.type,Ko.payload),(vo=ho._shareAudioProducer)===null||vo===void 0||vo.close(),ho._shareAudioProducer=null}),this._shareAudioProducer.on("trackended",function(){var vo;(vo=ho._openTelemetry)===null||vo===void 0||vo.traceAutoComplete({spanName:"this._shareAudioProducer trackended",span:mr,status:2}),Br.dispatch(Ln({type:"error",text:"Share disconnected!"}))}),(qo=this._openTelemetry)===null||qo===void 0||qo.completeSpan({span:Js,status:1,message:"Share Audio Producer Created"}),ls.next=84;break;case 79:return ls.prev=79,ls.t1=ls.catch(65),ls.next=83,this._protoo.request("produceError",{mediaType:"shareAudio",message:ls.t1.message});case 83:(Do=this._videosdkLogs)===null||Do===void 0||Do.pushLogs({logText:"Error in shareAudio produceError",logType:"ERROR",attributes:{error:ls.t1.message}});case 84:(yn=this._openTelemetry)===null||yn===void 0||yn.completeSpan({span:mr,status:1,message:"Enable Share Successful"}),ls.next=98;break;case 87:return ls.prev=87,ls.t2=ls.catch(11),un.error("enableShare() | failed:%o",ls.t2),(mo=this._openTelemetry)===null||mo===void 0||mo.completeSpan({span:mr,status:2,attributes:{error:ls.t2.message},message:"Error in enableShare video produceError"}),console.log("screen share catch",ls.t2.message),(xo=this._videosdkLogs)===null||xo===void 0||xo.pushLogs({logText:"Error in enableShare video produceError",logType:"ERROR",attributes:{error:ls.t2.message}}),ls.t2.name!=="NotAllowedError"&&Br.dispatch(Ln({type:"error",text:"Error sharing: ".concat(ls.t2)})),ls.next=96,this._protoo.request("produceError",{mediaType:"share",message:ls.t2.message});case 96:hn&&hn.stop(),zn&&zn.stop();case 98:Br.dispatch(Hr(!1));case 99:case"end":return ls.stop()}},Dr,this,[[11,87],[19,25],[65,79]])})),function(){return Ul.apply(this,arguments)})},{key:"disableShare",value:(_a=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr,wr,rn,hn,zn,Wn,us,ds,hs,Jr,yn;return vt().wrap(function(Rs){for(;;)switch(Rs.prev=Rs.next){case 0:if(un.debug("disableShare()"),wr=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"disableShare() Calling",status:1}),this._shareProducer){Rs.next=5;break}return(rn=this._openTelemetry)===null||rn===void 0||rn.completeSpan({span:wr,status:2,message:"Share Producer Not found"}),Rs.abrupt("return");case 5:return hn=(dr=this._openTelemetry)===null||dr===void 0?void 0:dr.trace({spanName:"Closing Share Producer",span:wr,status:1}),this._shareProducer.close(),zn=gr(this._shareProducer.id),Br.dispatch(zn),this._eventEmitter.emit(zn.type,zn.payload),this._shareAudioProducer&&(ds=(Wn=this._openTelemetry)===null||Wn===void 0?void 0:Wn.trace({spanName:"Closing Share Audio Producer",span:wr,status:1}),this._shareAudioProducer.close(),zn=gr(this._shareAudioProducer.id),Br.dispatch(zn),this._eventEmitter.emit(zn.type,zn.payload),(us=this._openTelemetry)===null||us===void 0||us.completeSpan({span:ds,status:1,message:"Closed Share Audio Producer"})),Rs.prev=11,Rs.next=14,this._protoo.request("closeProducer",{producerId:this._shareProducer.id});case 14:if(!this._shareAudioProducer){Rs.next=17;break}return Rs.next=17,this._protoo.request("closeProducer",{producerId:this._shareAudioProducer.id});case 17:(hs=this._openTelemetry)===null||hs===void 0||hs.completeSpan({span:hn,status:1,message:"Requested Server to Close Producer"}),Rs.next=25;break;case 20:Rs.prev=20,Rs.t0=Rs.catch(11),Br.dispatch(Ln({type:"error",text:"Error closing server-side share Producer: ".concat(Rs.t0)})),(Jr=this._openTelemetry)===null||Jr===void 0||Jr.completeSpan({span:wr,status:2,message:"Error closing server-side share Producer ".concat(Rs.t0)}),(yn=this._videosdkLogs)===null||yn===void 0||yn.pushLogs({logText:"Error closing server-side share Producer",logType:"ERROR",attributes:{error:Rs.t0.message}});case 25:this._shareProducer=null,this._shareAudioProducer=null,(mr=this._openTelemetry)===null||mr===void 0||mr.completeSpan({span:wr,status:1,message:"Screen Share Disabled Successfully"});case 28:case"end":return Rs.stop()}},Dr,this,[[11,20]])})),function(){return _a.apply(this,arguments)})},{key:"enableAudioOnly",value:(wp=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:un.debug("enableAudioOnly()"),Br.dispatch(yr(!0)),this.disableWebcam(),pr=Lr(this._consumers.values()),wr.prev=4,pr.s();case 6:if((dr=pr.n()).done){wr.next=13;break}if((mr=dr.value).kind==="video"){wr.next=10;break}return wr.abrupt("continue",11);case 10:this._pauseConsumer(mr);case 11:wr.next=6;break;case 13:wr.next=18;break;case 15:wr.prev=15,wr.t0=wr.catch(4),pr.e(wr.t0);case 18:return wr.prev=18,pr.f(),wr.finish(18);case 21:Br.dispatch(ir(!0)),Br.dispatch(yr(!1));case 23:case"end":return wr.stop()}},Dr,this,[[4,15,18,21]])})),function(){return wp.apply(this,arguments)})},{key:"disableAudioOnly",value:(vu=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:un.debug("disableAudioOnly()"),Br.dispatch(yr(!0)),!this._webcamProducer&&this._produce&&(zt()||{}).webcamEnabled&&this.enableWebcam(),pr=Lr(this._consumers.values()),wr.prev=4,pr.s();case 6:if((dr=pr.n()).done){wr.next=13;break}if((mr=dr.value).kind==="video"){wr.next=10;break}return wr.abrupt("continue",11);case 10:this._resumeConsumer(mr);case 11:wr.next=6;break;case 13:wr.next=18;break;case 15:wr.prev=15,wr.t0=wr.catch(4),pr.e(wr.t0);case 18:return wr.prev=18,pr.f(),wr.finish(18);case 21:Br.dispatch(ir(!1)),Br.dispatch(yr(!1));case 23:case"end":return wr.stop()}},Dr,this,[[4,15,18,21]])})),function(){return vu.apply(this,arguments)})},{key:"muteAudio",value:(su=(0,pt.Z)(vt().mark(function Dr(){return vt().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:un.debug("muteAudio()"),Br.dispatch(Cr(!0));case 2:case"end":return pr.stop()}},Dr)})),function(){return su.apply(this,arguments)})},{key:"unmuteAudio",value:(Bp=(0,pt.Z)(vt().mark(function Dr(){return vt().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:un.debug("unmuteAudio()"),Br.dispatch(Cr(!1));case 2:case"end":return pr.stop()}},Dr)})),function(){return Bp.apply(this,arguments)})},{key:"handleRemoteRestartIce",value:(_o=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr,wr,rn,hn,zn,Wn,us;return vt().wrap(function(ds){for(;;)switch(ds.prev=ds.next){case 0:return wr=pr.iceParameters,rn=pr.transportId,hn=pr.internalSpan,rn===((dr=this._sendTransport)===null||dr===void 0?void 0:dr.id)&&this._sendTransport.restartIce({iceParameters:wr}),rn===((mr=this._recvTransport)===null||mr===void 0?void 0:mr.id)&&this._recvTransport.restartIce({iceParameters:wr}),ds.prev=3,ds.next=6,this._protoo.request("iceRestarted",{transportId:rn});case 6:(zn=this._openTelemetry)===null||zn===void 0||zn.completeSpan({span:hn,status:1,message:"iceRestarted"}),ds.next=14;break;case 9:ds.prev=9,ds.t0=ds.catch(3),(Wn=this._openTelemetry)===null||Wn===void 0||Wn.completeSpan({span:hn,status:2,message:"handleRemoteRestartIce() ICE restart failed ".concat(ds.t0)}),(us=this._videosdkLogs)===null||us===void 0||us.pushLogs({logText:"Error handleRemoteRestartIce() ICE restart failed",logType:"ERROR",attributes:{error:ds.t0.message}}),Br.dispatch(Ln({type:"error",text:"ICE restart failed: ".concat(ds.t0)}));case 14:case"end":return ds.stop()}},Dr,this,[[3,9]])})),function(Dr){return _o.apply(this,arguments)})},{key:"restartIce",value:(_d=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:if(un.debug("restartIce()"),Br.dispatch(Sr(!0)),wr.prev=2,!this._sendTransport){wr.next=9;break}return wr.next=6,this._protoo.request("restartIce",{transportId:this._sendTransport.id});case 6:return pr=wr.sent,wr.next=9,this._sendTransport.restartIce({iceParameters:pr});case 9:if(!this._recvTransport){wr.next=15;break}return wr.next=12,this._protoo.request("restartIce",{transportId:this._recvTransport.id});case 12:return dr=wr.sent,wr.next=15,this._recvTransport.restartIce({iceParameters:dr});case 15:Br.dispatch(Ln({text:"ICE restarted"})),wr.next=23;break;case 18:wr.prev=18,wr.t0=wr.catch(2),un.error("restartIce() | failed:%o",wr.t0),Br.dispatch(Ln({type:"error",text:"ICE restart failed: ".concat(wr.t0)})),(mr=this._videosdkLogs)===null||mr===void 0||mr.pushLogs({logText:"Error restartIce() ICE restart failed",logType:"ERROR",attributes:{error:wr.t0.message}});case 23:Br.dispatch(Sr(!1));case 24:case"end":return wr.stop()}},Dr,this,[[2,18]])})),function(){return _d.apply(this,arguments)})},{key:"setMaxSendingSpatialLayer",value:(iu=(0,pt.Z)(vt().mark(function Dr(pr){var dr;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:if(un.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]",pr),mr.prev=1,!this._webcamProducer){mr.next=7;break}return mr.next=5,this._webcamProducer.setMaxSpatialLayer(pr);case 5:mr.next=10;break;case 7:if(!this._shareProducer){mr.next=10;break}return mr.next=10,this._shareProducer.setMaxSpatialLayer(pr);case 10:mr.next=17;break;case 12:mr.prev=12,mr.t0=mr.catch(1),un.error("setMaxSendingSpatialLayer() | failed:%o",mr.t0),(dr=this._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"Error setting max sending video spatial layer",logType:"ERROR",attributes:{error:mr.t0.message}}),Br.dispatch(Ln({type:"error",text:"Error setting max sending video spatial layer: ".concat(mr.t0)}));case 17:case"end":return mr.stop()}},Dr,this,[[1,12]])})),function(Dr){return iu.apply(this,arguments)})},{key:"setWebcamQuality",value:(ga=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:if(this._webcamProducer){wr.next=2;break}return wr.abrupt("return");case 2:if(dr=this._webcam.resolution,mr=gs[dr][pr].s,this._webcamProducer.maxSpatialLayer!=mr){wr.next=6;break}return wr.abrupt("return");case 6:return wr.next=8,this._webcamProducer.setMaxSpatialLayer(mr);case 8:case"end":return wr.stop()}},Dr,this)})),function(Dr){return ga.apply(this,arguments)})},{key:"setConsumerQuality",value:(Sp=(0,pt.Z)(vt().mark(function Dr(pr,dr){var mr,wr,rn,hn,zn,Wn,us;return vt().wrap(function(ds){for(;;)switch(ds.prev=ds.next){case 0:return hn=this._webcam.resolution,zn=(mr=this._openTelemetry)===null||mr===void 0?void 0:mr.trace({spanName:'Setting "'.concat(dr,'" Quality')}),Wn=gs[hn][dr].s,us=gs[hn][dr].t,(wr=this._openTelemetry)===null||wr===void 0||wr.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:zn,attributes:{spatialLayers:JSON.parse(Wn),temporalLayers:JSON.parse(us)},status:1}),ds.next=7,this.setConsumerPreferredLayers(pr,Wn,us);case 7:(rn=this._openTelemetry)===null||rn===void 0||rn.completeSpan({message:"Done",span:zn,status:1});case 8:case"end":return ds.stop()}},Dr,this)})),function(Dr,pr){return Sp.apply(this,arguments)})},{key:"setViewPort",value:(Qs=(0,pt.Z)(vt().mark(function Dr(pr,dr,mr){var wr,rn,hn,zn;return vt().wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:if(this._consumers.get(pr.id)){Wn.next=2;break}return Wn.abrupt("return");case 2:if(wr=fn(this._consumers.get(pr.id),dr,mr),rn=wr.consumerId,hn=wr.newPreferredSpatialLayer,zn=wr.newPreferredTemporalLayer,!rn){Wn.next=6;break}return Wn.next=6,this.setConsumerPreferredLayers(rn,hn,zn);case 6:case"end":return Wn.stop()}},Dr,this)})),function(Dr,pr,dr){return Qs.apply(this,arguments)})},{key:"setConsumerPreferredLayers",value:(Bl=(0,pt.Z)(vt().mark(function Dr(pr,dr,mr){var wr,rn;return vt().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:return un.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]",pr,dr,mr),hn.prev=1,(wr=this._consumers.get(pr)).spatialLayers>1&&(wr.preferredSpatialLayer=dr,wr.preferredTemporalLayer=mr),hn.next=6,this._protoo.request("setConsumerPreferredLayers",{consumerId:pr,spatialLayer:dr,temporalLayer:mr});case 6:Br.dispatch(qr(pr,dr,mr)),hn.next=14;break;case 9:hn.prev=9,hn.t0=hn.catch(1),un.error("setConsumerPreferredLayers() | failed:%o",hn.t0),(rn=this._videosdkLogs)===null||rn===void 0||rn.pushLogs({logText:"Error setting Consumer preferred layers:",logType:"ERROR",attributes:{error:hn.t0.message}}),Br.dispatch(Ln({type:"error",text:"Error setting Consumer preferred layers: ".concat(hn.t0)}));case 14:case"end":return hn.stop()}},Dr,this,[[1,9]])})),function(Dr,pr,dr){return Bl.apply(this,arguments)})},{key:"setConsumerPriority",value:(gu=(0,pt.Z)(vt().mark(function Dr(pr,dr){var mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return un.debug("setConsumerPriority() [consumerId:%s, priority:%d]",pr,dr),wr.prev=1,wr.next=4,this._protoo.request("setConsumerPriority",{consumerId:pr,priority:dr});case 4:Br.dispatch(pn(pr,dr)),wr.next=12;break;case 7:wr.prev=7,wr.t0=wr.catch(1),un.error("setConsumerPriority() | failed:%o",wr.t0),(mr=this._videosdkLogs)===null||mr===void 0||mr.pushLogs({logText:"Error setting Consumer priority",logType:"ERROR",attributes:{error:wr.t0.message}}),Br.dispatch(Ln({type:"error",text:"Error setting Consumer priority: ".concat(wr.t0)}));case 12:case"end":return wr.stop()}},Dr,this,[[1,7]])})),function(Dr,pr){return gu.apply(this,arguments)})},{key:"requestConsumerKeyFrame",value:(Wo=(0,pt.Z)(vt().mark(function Dr(pr){var dr;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return un.debug("requestConsumerKeyFrame() [consumerId:%s]",pr),mr.prev=1,mr.next=4,this._protoo.request("requestConsumerKeyFrame",{consumerId:pr});case 4:Br.dispatch(Ln({text:"Keyframe requested for video consumer"})),mr.next=12;break;case 7:mr.prev=7,mr.t0=mr.catch(1),un.error("requestConsumerKeyFrame() | failed:%o",mr.t0),(dr=this._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"Error requesting key frame for Consumer",logType:"ERROR",attributes:{error:mr.t0.message}}),Br.dispatch(Ln({type:"error",text:"Error requesting key frame for Consumer: ".concat(mr.t0)}));case 12:case"end":return mr.stop()}},Dr,this,[[1,7]])})),function(Dr){return Wo.apply(this,arguments)})},{key:"enableChatDataProducer",value:(mu=(0,pt.Z)(vt().mark(function Dr(){var pr,dr=this;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:if(un.debug("enableChatDataProducer()"),this._useDataChannel){mr.next=3;break}return mr.abrupt("return");case 3:return mr.prev=3,mr.next=6,this._sendTransport.produceData({ordered:!1,maxRetransmits:1,label:"chat",priority:"medium",appData:{info:"my-chat-DataProducer"}});case 6:this._chatDataProducer=mr.sent,Br.dispatch(Nr({id:this._chatDataProducer.id,sctpStreamParameters:this._chatDataProducer.sctpStreamParameters,label:this._chatDataProducer.label,protocol:this._chatDataProducer.protocol})),this._chatDataProducer.on("transportclose",function(){dr._chatDataProducer=null}),this._chatDataProducer.on("open",function(){un.debug('chat DataProducer "open" event')}),this._chatDataProducer.on("close",function(){un.error('chat DataProducer "close" event'),dr._chatDataProducer=null,Br.dispatch(Ln({type:"error",text:"Chat DataProducer closed"}))}),this._chatDataProducer.on("error",function(wr){un.error('chat DataProducer "error" event:%o',wr),Br.dispatch(Ln({type:"error",text:"Chat DataProducer error: ".concat(wr)}))}),this._chatDataProducer.on("bufferedamountlow",function(){un.debug('chat DataProducer "bufferedamountlow" event')}),mr.next=21;break;case 15:throw mr.prev=15,mr.t0=mr.catch(3),un.error("enableChatDataProducer() | failed:%o",mr.t0),(pr=this._videosdkLogs)===null||pr===void 0||pr.pushLogs({logText:"Error enabling chat DataProducer",logType:"ERROR",attributes:{error:mr.t0.message}}),Br.dispatch(Ln({type:"error",text:"Error enabling chat DataProducer: ".concat(mr.t0)})),mr.t0;case 21:case"end":return mr.stop()}},Dr,this,[[3,15]])})),function(){return mu.apply(this,arguments)})},{key:"enableBotDataProducer",value:(em=(0,pt.Z)(vt().mark(function Dr(){var pr,dr=this;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:if(un.debug("enableBotDataProducer()"),this._useDataChannel){mr.next=3;break}return mr.abrupt("return");case 3:return mr.prev=3,mr.next=6,this._sendTransport.produceData({ordered:!1,maxPacketLifeTime:2e3,label:"bot",priority:"medium",appData:{info:"my-bot-DataProducer"}});case 6:this._botDataProducer=mr.sent,Br.dispatch(Nr({id:this._botDataProducer.id,sctpStreamParameters:this._botDataProducer.sctpStreamParameters,label:this._botDataProducer.label,protocol:this._botDataProducer.protocol})),this._botDataProducer.on("transportclose",function(){dr._botDataProducer=null}),this._botDataProducer.on("open",function(){un.debug('bot DataProducer "open" event')}),this._botDataProducer.on("close",function(){un.error('bot DataProducer "close" event'),dr._botDataProducer=null,Br.dispatch(Ln({type:"error",text:"Bot DataProducer closed"}))}),this._botDataProducer.on("error",function(wr){un.error('bot DataProducer "error" event:%o',wr),Br.dispatch(Ln({type:"error",text:"Bot DataProducer error: ".concat(wr)}))}),this._botDataProducer.on("bufferedamountlow",function(){un.debug('bot DataProducer "bufferedamountlow" event')}),mr.next=21;break;case 15:throw mr.prev=15,mr.t0=mr.catch(3),un.error("enableBotDataProducer() | failed:%o",mr.t0),(pr=this._videosdkLogs)===null||pr===void 0||pr.pushLogs({logText:"Error enabling bot DataProducer",logType:"ERROR",attributes:{error:mr.t0.message}}),Br.dispatch(Ln({type:"error",text:"Error enabling bot DataProducer: ".concat(mr.t0)})),mr.t0;case 21:case"end":return mr.stop()}},Dr,this,[[3,15]])})),function(){return em.apply(this,arguments)})},{key:"sendChatMessage",value:(Ll=(0,pt.Z)(vt().mark(function Dr(pr){return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(un.debug('sendChatMessage() [text:"%s]',pr),this._chatDataProducer){dr.next=4;break}return Br.dispatch(Ln({type:"error",text:"No chat DataProducer"})),dr.abrupt("return");case 4:try{this._chatDataProducer.send(pr)}catch(mr){un.error("chat DataProducer.send() failed:%o",mr),Br.dispatch(Ln({type:"error",text:"chat DataProducer.send() failed: ".concat(mr)}))}case 5:case"end":return dr.stop()}},Dr,this)})),function(Dr){return Ll.apply(this,arguments)})},{key:"sendBotMessage",value:(Fp=(0,pt.Z)(vt().mark(function Dr(pr){return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(un.debug('sendBotMessage() [text:"%s]',pr),this._botDataProducer){dr.next=4;break}return Br.dispatch(Ln({type:"error",text:"No bot DataProducer"})),dr.abrupt("return");case 4:try{this._botDataProducer.send(pr)}catch(mr){un.error("bot DataProducer.send() failed:%o",mr),Br.dispatch(Ln({type:"error",text:"bot DataProducer.send() failed: ".concat(mr)}))}case 5:case"end":return dr.stop()}},Dr,this)})),function(Dr){return Fp.apply(this,arguments)})},{key:"changeDisplayName",value:(Jp=(0,pt.Z)(vt().mark(function Dr(pr){return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return un.debug('changeDisplayName() [displayName:"%s"]',pr),Ut({displayName:pr}),dr.prev=2,dr.next=5,this._protoo.request("changeDisplayName",{displayName:pr});case 5:this._displayName=pr,Br.dispatch(nr(pr)),Br.dispatch(Ln({text:"Display name changed"})),dr.next=15;break;case 10:dr.prev=10,dr.t0=dr.catch(2),un.error("changeDisplayName() | failed: %o",dr.t0),Br.dispatch(Ln({type:"error",text:"Could not change display name: ".concat(dr.t0)})),Br.dispatch(nr());case 15:case"end":return dr.stop()}},Dr,this,[[2,10]])})),function(Dr){return Jp.apply(this,arguments)})},{key:"openConnection",value:(Wp=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return dr=pr.roomId,mr=pr.payload,wr.next=3,this._protoo.request("openConnection",{roomId:dr,payload:mr}).catch(function(rn){throw new Error(rn)});case 3:case"end":return wr.stop()}},Dr,this)})),function(Dr){return Wp.apply(this,arguments)})},{key:"closeConnection",value:(sm=(0,pt.Z)(vt().mark(function Dr(pr){return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return dr.next=2,this._protoo.request("closeConnection",{roomId:pr});case 2:case"end":return dr.stop()}},Dr,this)})),function(Dr){return sm.apply(this,arguments)})},{key:"switchTo",value:(ju=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr,wr;return vt().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return dr=pr.roomId,mr=pr.peerIds,wr=pr.payload,rn.next=3,this._protoo.request("requestSwitchRoom",{roomId:dr,peerIds:mr,payload:wr});case 3:case"end":return rn.stop()}},Dr,this)})),function(Dr){return ju.apply(this,arguments)})},{key:"switchPeerRoom",value:(Uo=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr,wr,rn;return vt().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:return dr=pr.peerId,mr=pr.roomId,wr=pr.payload,rn=pr.token,hn.next=3,this._protoo.request("switchPeerRoom",{roomId:mr,peerId:dr,payload:wr,token:rn});case 3:case"end":return hn.stop()}},Dr,this)})),function(Dr){return Uo.apply(this,arguments)})},{key:"connectionSwitchPeerRoom",value:(Wl=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr,wr,rn,hn;return vt().wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:return dr=pr.roomId,mr=pr.connectionRoomId,wr=pr.peerId,rn=pr.payload,hn=pr.token,zn.next=3,this._protoo.request("connectionSwitchPeerRoom",{roomId:dr,connectionRoomId:mr,peerId:wr,payload:rn,token:hn});case 3:case"end":return zn.stop()}},Dr,this)})),function(Dr){return Wl.apply(this,arguments)})},{key:"connectionSendChatMessage",value:(uo=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return dr=pr.roomId,mr=pr.message,wr.next=3,this._protoo.request("connectionSendChatMessage",{roomId:dr,message:mr});case 3:case"end":return wr.stop()}},Dr,this)})),function(Dr){return uo.apply(this,arguments)})},{key:"connectionEndMeeting",value:(cs=(0,pt.Z)(vt().mark(function Dr(pr){var dr;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return dr=pr.roomId,mr.next=3,this._protoo.request("connectionCloseRoom",{roomId:dr});case 3:case"end":return mr.stop()}},Dr,this)})),function(Dr){return cs.apply(this,arguments)})},{key:"pubsubPublish",value:(jr=(0,pt.Z)(vt().mark(function Dr(pr,dr,mr,wr){var rn,hn,zn,Wn,us,ds;return vt().wrap(function(hs){for(;;)switch(hs.prev=hs.next){case 0:if(hs.prev=0,mr!=null&&mr.sendOnly){if(rn=mr.sendOnly,hn=[],rn){zn=Lr(rn);try{for(zn.s();!(Wn=zn.n()).done;)(us=Wn.value)&&hn.push(us.toString())}catch(Jr){zn.e(Jr)}finally{zn.f()}}mr.sendOnly=hn}return hs.next=4,this._protoo.request("pubsubPublish",{topic:pr,message:dr,options:mr,payload:wr});case 4:hs.next=10;break;case 6:hs.prev=6,hs.t0=hs.catch(0),(ds=this._videosdkLogs)===null||ds===void 0||ds.pushLogs({logText:"Error pubsubPublish() | failed",logType:"ERROR",attributes:{error:hs.t0.message}}),un.error("pubsubPublish() | failed: %o",hs.t0);case 10:case"end":return hs.stop()}},Dr,this,[[0,6]])})),function(Dr,pr,dr,mr){return jr.apply(this,arguments)})},{key:"pubsubSubscribe",value:(Is=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr;return vt().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return wr.prev=0,wr.next=3,this._protoo.request("pubsubSubscribe",{topic:pr});case 3:return dr=wr.sent,wr.abrupt("return",dr);case 7:wr.prev=7,wr.t0=wr.catch(0),(mr=this._videosdkLogs)===null||mr===void 0||mr.pushLogs({logText:"Error pubsubSubscribe() | failed",logType:"ERROR",attributes:{error:wr.t0.message}}),un.error("pubsubSubscribe() | failed: %o",wr.t0);case 11:case"end":return wr.stop()}},Dr,this,[[0,7]])})),function(Dr){return Is.apply(this,arguments)})},{key:"pubsubUnsubscribe",value:(Mo=(0,pt.Z)(vt().mark(function Dr(pr){var dr;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return mr.prev=0,mr.next=3,this._protoo.request("pubsubUnsubscribe",{topic:pr});case 3:mr.next=9;break;case 5:mr.prev=5,mr.t0=mr.catch(0),(dr=this._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"Error pubsubUnsubscribe() | failed",logType:"ERROR",attributes:{error:mr.t0.message}}),un.error("pubsubUnsubscribe() | failed: %o",mr.t0);case 9:case"end":return mr.stop()}},Dr,this,[[0,5]])})),function(Dr){return Mo.apply(this,arguments)})},{key:"closeRoom",value:(kp=(0,pt.Z)(vt().mark(function Dr(){return vt().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:return pr.next=2,this._protoo.request("closeRoom",{});case 2:case"end":return pr.stop()}},Dr,this)})),function(){return kp.apply(this,arguments)})},{key:"removePeer",value:(xp=(0,pt.Z)(vt().mark(function Dr(pr){var dr;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:if((dr=this._openTelemetry)===null||dr===void 0||dr.traceAutoComplete({spanName:"Removing peer ".concat(pr),status:1}),pr!=null){mr.next=3;break}return mr.abrupt("return");case 3:return mr.next=5,this._protoo.request("removePeer",{peerId:pr});case 5:case"end":return mr.stop()}},Dr,this)})),function(Dr){return xp.apply(this,arguments)})},{key:"startPingPong",value:(Ju=(0,pt.Z)(vt().mark(function Dr(){var pr=this;return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:this._pingWebsocketInterval!=null&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=setInterval(function(){pr.pingWebSocket()},2e3);case 2:case"end":return dr.stop()}},Dr,this)})),function(){return Ju.apply(this,arguments)})},{key:"pingWebSocket",value:($u=(0,pt.Z)(vt().mark(function Dr(){var pr,dr=this;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:if(!this._closed){mr.next=2;break}return mr.abrupt("return");case 2:pr=!1,this._protoo.request("ping").then(function(wr){wr&&(pr=!0)}).catch(function(wr){}),setTimeout(function(){pr?(!dr._isWebsocketAlive||dr._pingWebsocketFailedCounter>1?(dr._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTED"}),dr._isWebsocketAlive=!0,dr._pingWebsocketFailedCounter=0,dr.restartIce()):dr._transportState!="failed"&&dr._transportState!="disconnected"||(console.log("Calling Restart Ice based on transport state",dr._transportState),dr.restartIce()),dr._pingWebsocketFailedCounter=0):(dr._isWebsocketAlive&&dr._pingWebsocketFailedCounter>1&&(dr._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"DISCONNECTED"}),dr._isWebsocketAlive=!1,dr.startInternetPingPong()),dr._pingWebsocketFailedCounter=dr._pingWebsocketFailedCounter+1)},1e3);case 5:case"end":return mr.stop()}},Dr,this)})),function(){return $u.apply(this,arguments)})},{key:"startInternetPingPong",value:(Qu=(0,pt.Z)(vt().mark(function Dr(){var pr=this;return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:this._pingInternetInterval!=null&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=setInterval(function(){pr.pingInternet()},2e3);case 2:case"end":return dr.stop()}},Dr,this)})),function(){return Qu.apply(this,arguments)})},{key:"pingInternet",value:(Ap=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr,wr,rn,hn,zn=this;return vt().wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:if(!this._closed){Wn.next=2;break}return Wn.abrupt("return");case 2:return(pr=this._videosdkLogs)===null||pr===void 0||pr.pushLogs({logText:"pinging internet",logType:"INFO"}),dr=new AbortController,mr=dr.signal,wr=setTimeout(function(){dr.abort()},1e3),Wn.next=8,fetch("https://".concat(this._signalingBaseUrl,"/ping"),{method:"GET",signal:mr}).then(function(us){return clearTimeout(wr),us.text()}).catch(function(us){var ds;return(ds=zn._videosdkLogs)===null||ds===void 0||ds.pushLogs({logText:"Error pingInternet failed",logType:"ERROR",attributes:{error:us.message}}),"failed"});case 8:if(Wn.sent!="pong"){Wn.next=19;break}if((rn=this._videosdkLogs)===null||rn===void 0||rn.pushLogs({logText:"Pong",logType:"INFO"}),!(this._pingWebsocketFailedCounter>5&&this._pongInternetCounter>3)||this._isWebsocketAlive){Wn.next=17;break}return this._pongInternetCounter=0,this.close({sendLeft:!1}),(hn=this._videosdkLogs)===null||hn===void 0||hn.pushLogs({logText:"Re-join the meeting, after diconnect",logType:"INFO"}),Wn.next=17,this.join();case 17:this._pongInternetCounter=this._pongInternetCounter+1,this._isWebsocketAlive&&(this._pongInternetCounter=0,this._pingInternetInterval!=null&&(clearInterval(this._pingInternetInterval),this._pingInternetInterval=null));case 19:case"end":return Wn.stop()}},Dr,this)})),function(){return Ap.apply(this,arguments)})},{key:"getSendTransportRemoteStats",value:(_p=(0,pt.Z)(vt().mark(function Dr(){return vt().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:if(un.debug("getSendTransportRemoteStats()"),this._sendTransport){pr.next=3;break}return pr.abrupt("return");case 3:return pr.abrupt("return",this._protoo.request("getTransportStats",{transportId:this._sendTransport.id}));case 4:case"end":return pr.stop()}},Dr,this)})),function(){return _p.apply(this,arguments)})},{key:"getRecvTransportRemoteStats",value:(zo=(0,pt.Z)(vt().mark(function Dr(){return vt().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:if(un.debug("getRecvTransportRemoteStats()"),this._recvTransport){pr.next=3;break}return pr.abrupt("return");case 3:return pr.abrupt("return",this._protoo.request("getTransportStats",{transportId:this._recvTransport.id}));case 4:case"end":return pr.stop()}},Dr,this)})),function(){return zo.apply(this,arguments)})},{key:"getAudioRemoteStats",value:(Fl=(0,pt.Z)(vt().mark(function Dr(){return vt().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:if(un.debug("getAudioRemoteStats()"),this._micProducer){pr.next=3;break}return pr.abrupt("return");case 3:return pr.abrupt("return",this._latestStats[this._micProducer.id]);case 4:case"end":return pr.stop()}},Dr,this)})),function(){return Fl.apply(this,arguments)})},{key:"getVideoRemoteStats",value:(Hl=(0,pt.Z)(vt().mark(function Dr(){var pr;return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(un.debug("getVideoRemoteStats()"),pr=this._webcamProducer){dr.next=4;break}return dr.abrupt("return");case 4:return dr.abrupt("return",this._latestStats[pr.id]);case 5:case"end":return dr.stop()}},Dr,this)})),function(){return Hl.apply(this,arguments)})},{key:"getShareRemoteStats",value:(Ml=(0,pt.Z)(vt().mark(function Dr(){var pr;return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(un.debug("getVideoRemoteStats()"),pr=this._shareProducer){dr.next=4;break}return dr.abrupt("return");case 4:return dr.abrupt("return",this._latestStats[pr.id]);case 5:case"end":return dr.stop()}},Dr,this)})),function(){return Ml.apply(this,arguments)})},{key:"getConsumerRemoteStats",value:($l=(0,pt.Z)(vt().mark(function Dr(pr){var dr;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:if(un.debug("getConsumerRemoteStats()"),dr=this._consumers.get(pr)){mr.next=4;break}return mr.abrupt("return");case 4:return this._latestStats[pr]&&(this._latestStats[pr][0].currentSpatialLayer=dr.currentSpatialLayer,this._latestStats[pr][0].currentTemporalLayer=dr.currentTemporalLayer,this._latestStats[pr][0].preferredSpatialLayer=dr.preferredSpatialLayer,this._latestStats[pr][0].preferredTemporalLayer=dr.preferredTemporalLayer),mr.abrupt("return",this._latestStats[pr]);case 6:case"end":return mr.stop()}},Dr,this)})),function(Dr){return $l.apply(this,arguments)})},{key:"getChatDataProducerRemoteStats",value:(Yl=(0,pt.Z)(vt().mark(function Dr(){var pr;return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(un.debug("getChatDataProducerRemoteStats()"),pr=this._chatDataProducer){dr.next=4;break}return dr.abrupt("return");case 4:return dr.abrupt("return",this._protoo.request("getDataProducerStats",{dataProducerId:pr.id}));case 5:case"end":return dr.stop()}},Dr,this)})),function(){return Yl.apply(this,arguments)})},{key:"getBotDataProducerRemoteStats",value:(zl=(0,pt.Z)(vt().mark(function Dr(){var pr;return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(un.debug("getBotDataProducerRemoteStats()"),pr=this._botDataProducer){dr.next=4;break}return dr.abrupt("return");case 4:return dr.abrupt("return",this._protoo.request("getDataProducerStats",{dataProducerId:pr.id}));case 5:case"end":return dr.stop()}},Dr,this)})),function(){return zl.apply(this,arguments)})},{key:"getDataConsumerRemoteStats",value:(Go=(0,pt.Z)(vt().mark(function Dr(pr){return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(un.debug("getDataConsumerRemoteStats()"),this._dataConsumers.get(pr)){dr.next=4;break}return dr.abrupt("return");case 4:return dr.abrupt("return",this._protoo.request("getDataConsumerStats",{dataConsumerId:pr}));case 5:case"end":return dr.stop()}},Dr,this)})),function(Dr){return Go.apply(this,arguments)})},{key:"getSendTransportLocalStats",value:(_l=(0,pt.Z)(vt().mark(function Dr(){return vt().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:if(un.debug("getSendTransportLocalStats()"),this._sendTransport){pr.next=3;break}return pr.abrupt("return");case 3:return pr.abrupt("return",this._sendTransport.getStats());case 4:case"end":return pr.stop()}},Dr,this)})),function(){return _l.apply(this,arguments)})},{key:"getRecvTransportLocalStats",value:(To=(0,pt.Z)(vt().mark(function Dr(){return vt().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:if(un.debug("getRecvTransportLocalStats()"),this._recvTransport){pr.next=3;break}return pr.abrupt("return");case 3:return pr.abrupt("return",this._recvTransport.getStats());case 4:case"end":return pr.stop()}},Dr,this)})),function(){return To.apply(this,arguments)})},{key:"getAudioLocalStats",value:(na=(0,pt.Z)(vt().mark(function Dr(){return vt().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:if(un.debug("getAudioLocalStats()"),this._micProducer){pr.next=3;break}return pr.abrupt("return");case 3:return pr.abrupt("return",this._micProducer.getStats());case 4:case"end":return pr.stop()}},Dr,this)})),function(){return na.apply(this,arguments)})},{key:"getVideoLocalStats",value:(io=(0,pt.Z)(vt().mark(function Dr(){var pr;return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(un.debug("getVideoLocalStats()"),pr=this._webcamProducer||this._shareProducer){dr.next=4;break}return dr.abrupt("return");case 4:return dr.abrupt("return",pr.getStats());case 5:case"end":return dr.stop()}},Dr,this)})),function(){return io.apply(this,arguments)})},{key:"getConsumerLocalStats",value:(Ws=(0,pt.Z)(vt().mark(function Dr(pr){var dr;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:if(dr=this._consumers.get(pr)){mr.next=3;break}return mr.abrupt("return");case 3:return mr.abrupt("return",dr.getStats());case 4:case"end":return mr.stop()}},Dr,this)})),function(Dr){return Ws.apply(this,arguments)})},{key:"applyNetworkThrottle",value:(Bs=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr,wr,rn;return vt().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:return dr=pr.uplink,mr=pr.downlink,wr=pr.rtt,rn=pr.secret,un.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]",dr,mr,wr),hn.prev=2,hn.next=5,this._protoo.request("applyNetworkThrottle",{uplink:dr,downlink:mr,rtt:wr,secret:rn});case 5:hn.next=11;break;case 7:hn.prev=7,hn.t0=hn.catch(2),un.error("applyNetworkThrottle() | failed:%o",hn.t0),Br.dispatch(Ln({type:"error",text:"Error applying network throttle: ".concat(hn.t0)}));case 11:case"end":return hn.stop()}},Dr,this,[[2,7]])})),function(Dr){return Bs.apply(this,arguments)})},{key:"resetNetworkThrottle",value:(yo=(0,pt.Z)(vt().mark(function Dr(pr){var dr,mr,wr;return vt().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return dr=pr.silent,mr=dr!==void 0&&dr,wr=pr.secret,un.debug("resetNetworkThrottle()"),rn.prev=2,rn.next=5,this._protoo.request("resetNetworkThrottle",{secret:wr});case 5:rn.next=10;break;case 7:rn.prev=7,rn.t0=rn.catch(2),mr||(un.error("resetNetworkThrottle() | failed:%o",rn.t0),Br.dispatch(Ln({type:"error",text:"Error resetting network throttle: ".concat(rn.t0)})));case 10:case"end":return rn.stop()}},Dr,this,[[2,7]])})),function(Dr){return yo.apply(this,arguments)})},{key:"createProducerTransport",value:(js=(0,pt.Z)(vt().mark(function Dr(pr,dr){var mr,wr,rn,hn,zn,Wn,us,ds,hs,Jr,yn=this;return vt().wrap(function(Rs){for(;;)switch(Rs.prev=Rs.next){case 0:rn=pr.id,hn=pr.iceParameters,zn=pr.iceCandidates,Wn=pr.dtlsParameters,us=pr.sctpParameters,ds=(mr=this._openTelemetry)===null||mr===void 0?void 0:mr.trace({spanName:"Creating Send Transport",span:dr||null}),this._sendTransport=this._mediasoupDevice.createSendTransport({id:rn,iceParameters:hn,iceCandidates:zn,dtlsParameters:Wn,sctpParameters:us,iceServers:this._iceServers}),this._sendTransport.on("connect",function(Ls,Sn,Ss){var fs,Ks=Ls.dtlsParameters;(fs=yn._openTelemetry)===null||fs===void 0||fs.traceAutoComplete({spanName:"this._sendTransport `connect` Event : Transport is about to establish the ICE+DTLS connection",span:ds,status:1}),yn._protoo.request("connectWebRtcTransport",{transportId:yn._sendTransport.id,dtlsParameters:Ks}).then(Sn).catch(Ss)}),this._sendTransport.on("produce",function(){var Ls=(0,pt.Z)(vt().mark(function Sn(Ss,fs,Ks){var Js,Ms,Cs,Xs,so,po,Es;return vt().wrap(function(zs){for(;;)switch(zs.prev=zs.next){case 0:return Js=Ss.kind,Ms=Ss.rtpParameters,Cs=Ss.appData,zs.prev=1,(Xs=yn._openTelemetry)===null||Xs===void 0||Xs.traceAutoComplete({spanName:"this._sendTransport `produce` Event : Transmit information about a new producer ",span:ds,status:1}),zs.next=5,yn._protoo.request("produce",{transportId:yn._sendTransport.id,kind:Js,rtpParameters:Ms,appData:Cs});case 5:so=zs.sent,po=so.id,fs({id:po}),zs.next=14;break;case 10:zs.prev=10,zs.t0=zs.catch(1),(Es=yn._videosdkLogs)===null||Es===void 0||Es.pushLogs({logText:'Error this._sendTransport "produce" Event catch',logType:"ERROR",attributes:{error:zs.t0.message}}),Ks(zs.t0);case 14:case"end":return zs.stop()}},Sn,null,[[1,10]])}));return function(Sn,Ss,fs){return Ls.apply(this,arguments)}}()),this._sendTransport.on("producedata",function(){var Ls=(0,pt.Z)(vt().mark(function Sn(Ss,fs,Ks){var Js,Ms,Cs,Xs,so,po,Es;return vt().wrap(function(zs){for(;;)switch(zs.prev=zs.next){case 0:return Js=Ss.sctpStreamParameters,Ms=Ss.label,Cs=Ss.protocol,Xs=Ss.appData,un.debug('"producedata" event: [sctpStreamParameters:%o, appData:%o]',Js,Xs),zs.prev=2,zs.next=5,yn._protoo.request("produceData",{transportId:yn._sendTransport.id,sctpStreamParameters:Js,label:Ms,protocol:Cs,appData:Xs});case 5:so=zs.sent,po=so.id,fs({id:po}),zs.next=14;break;case 10:zs.prev=10,zs.t0=zs.catch(2),(Es=yn._videosdkLogs)===null||Es===void 0||Es.pushLogs({logText:"Error producedata event catch",logType:"ERROR",attributes:{error:zs.t0.message}}),Ks(zs.t0);case 14:case"end":return zs.stop()}},Sn,null,[[2,10]])}));return function(Sn,Ss,fs){return Ls.apply(this,arguments)}}()),this._sendTransport.on("connectionstatechange",function(Ls){var Sn;(Sn=yn._openTelemetry)===null||Sn===void 0||Sn.traceAutoComplete({spanName:"_sendTransport Event connectionstatechange ".concat(Ls),span:ds,status:1}),Ls==="failed"&&yn.restartIce(),yn._transportState=Ls}),hs=0,(Jr=this._metrics.addNewProbe(this._sendTransport,"sendTransport")).onStatsCollected=function(Ls){try{var Sn,Ss,fs,Ks;yn._stats.producerStats||(yn._stats.producerStats={}),yn._stats.producerStats.audio||(yn._stats.producerStats.audio=[]),yn._stats.producerStats.shareAudio||(yn._stats.producerStats.shareAudio=[]),yn._micProducer&&(yn._latestStats[(Sn=yn._micProducer)===null||Sn===void 0?void 0:Sn.id]=[]),yn._shareAudioProducer&&(yn._latestStats[(Ss=yn._shareAudioProducer)===null||Ss===void 0?void 0:Ss.id]=[]),Ls.audio.forEach(function(Ms){var Cs,Xs,so;if(yn._micProducer&&Ms.trackId==((Cs=yn._micProducer)===null||Cs===void 0?void 0:Cs.track.id))yn._latestStats[(so=yn._micProducer)===null||so===void 0?void 0:so.id].push(Ms),hs%5==0&&yn._stats.producerStats.audio.push(Ms);else if(yn._shareAudioProducer&&Ms.trackId==((Xs=yn._shareAudioProducer)===null||Xs===void 0?void 0:Xs.track.id)){var po;yn._latestStats[(po=yn._shareAudioProducer)===null||po===void 0?void 0:po.id].push(Ms),hs%5==0&&yn._stats.producerStats.shareAudio.push(Ms)}}),yn._stats.producerStats.video||(yn._stats.producerStats.video=[]),yn._stats.producerStats.share||(yn._stats.producerStats.share=[]),yn._webcamProducer&&(yn._latestStats[(fs=yn._webcamProducer)===null||fs===void 0?void 0:fs.id]=[]),yn._shareProducer&&(yn._latestStats[(Ks=yn._shareProducer)===null||Ks===void 0?void 0:Ks.id]=[]),Ls.video.forEach(function(Ms){var Cs,Xs,so;if(yn._webcamProducer&&Ms.trackId==((Cs=yn._webcamProducer)===null||Cs===void 0?void 0:Cs.track.id))yn._latestStats[(so=yn._webcamProducer)===null||so===void 0?void 0:so.id].push(Ms);else if(yn._shareProducer&&Ms.trackId==((Xs=yn._shareProducer)===null||Xs===void 0?void 0:Xs.track.id)){var po;yn._latestStats[(po=yn._shareProducer)===null||po===void 0?void 0:po.id].push(Ms)}}),hs%5==0&&yn._webcamProducer!=null&&yn._stats.producerStats.video.push({timestamp:new Date,stats:yn._latestStats[yn._webcamProducer.id]}),hs%5==0&&yn._shareProducer!=null&&yn._stats.producerStats.share.push({timestamp:new Date,stats:yn._latestStats[yn._shareProducer.id]}),hs++}catch(Ms){var Js;(Js=yn._videosdkLogs)===null||Js===void 0||Js.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Ms.message}}),console.log("PRODUCER ERROR",Ms)}},Jr.start(),this._sendTransport.observer.on("close",function(){Jr.stop(),yn._metrics.removeExistingProbe(Jr)}),(wr=this._openTelemetry)===null||wr===void 0||wr.completeSpan({span:ds,status:1,message:"Send Transport Created Successfully"});case 13:case"end":return Rs.stop()}},Dr,this)})),function(Dr,pr){return js.apply(this,arguments)})},{key:"createConsumerTransport",value:(Us=(0,pt.Z)(vt().mark(function Dr(pr,dr){var mr,wr,rn,hn,zn,Wn,us,ds,hs,Jr,yn=this;return vt().wrap(function(Rs){for(;;)switch(Rs.prev=Rs.next){case 0:rn=pr.id,hn=pr.iceParameters,zn=pr.iceCandidates,Wn=pr.dtlsParameters,us=pr.sctpParameters,ds=(mr=this._openTelemetry)===null||mr===void 0?void 0:mr.trace({spanName:"Creating Recieve Transport",span:dr||null}),this._recvTransport=this._mediasoupDevice.createRecvTransport({id:rn,iceParameters:hn,iceCandidates:zn,dtlsParameters:Wn,sctpParameters:us,iceServers:this._iceServers}),this._recvTransport.on("connect",function(Ls,Sn,Ss){var fs,Ks=Ls.dtlsParameters;(fs=yn._openTelemetry)===null||fs===void 0||fs.traceAutoComplete({spanName:"this._recvTransport `connect` Event : Recieve Transport is about to establish the ICE+DTLS connection",span:ds,status:1}),yn._protoo.request("connectWebRtcTransport",{transportId:yn._recvTransport.id,dtlsParameters:Ks}).then(Sn).catch(Ss)}),this._recvTransport.on("connectionstatechange",function(Ls){var Sn;(Sn=yn._openTelemetry)===null||Sn===void 0||Sn.traceAutoComplete({spanName:"_recvTransport Event connectionstatechange ".concat(Ls),span:ds,status:1}),Ls==="failed"&&yn.restartIce(),yn._transportState=Ls}),hs=0,(Jr=this._metrics.addNewProbe(this._recvTransport,"transport")).onStatsCollected=function(Ls){try{Ls.audio.forEach(function(Ss){var fs=yn._consumers.get(Ss.trackId);if(fs!=null){var Ks=fs.appData.share==1?fs.kind=="audio"?"shareAudio":"share":fs.kind;yn._stats.consumerStats||(yn._stats.consumerStats={}),yn._stats.consumerStats[fs.appData.peerId]||(yn._stats.consumerStats[fs.appData.peerId]={}),yn._stats.consumerStats[fs.appData.peerId][Ks]||(yn._stats.consumerStats[fs.appData.peerId][Ks]=[]),Ss.trackId==fs.id&&(yn._latestStats[fs.id]=[],yn._latestStats[fs.id].push(Ss),hs%5==0&&yn._stats.consumerStats[fs.appData.peerId][Ks].push(Ss))}}),Ls.video.forEach(function(Ss){var fs=yn._consumers.get(Ss.trackId);if(fs!=null){var Ks=fs.appData.share==1?fs.kind=="audio"?"shareAudio":"share":fs.kind;yn._stats.consumerStats||(yn._stats.consumerStats={}),yn._stats.consumerStats[fs.appData.peerId]||(yn._stats.consumerStats[fs.appData.peerId]={}),yn._stats.consumerStats[fs.appData.peerId][Ks]||(yn._stats.consumerStats[fs.appData.peerId][Ks]=[]),Ss.trackId==fs.id&&(yn._latestStats[fs.id]=[],yn._latestStats[fs.id].push(Ss),hs%5==0&&yn._stats.consumerStats[fs.appData.peerId][Ks].push(Ss))}}),hs++}catch(Ss){var Sn;(Sn=yn._videosdkLogs)===null||Sn===void 0||Sn.pushLogs({logText:"Error CONSUMER Stats ERROR",logType:"ERROR",attributes:{error:Ss.message}}),console.log("CONSUMER CATCH",Ss)}},Jr.start(),this._recvTransport.observer.on("close",function(){Jr.stop(),yn._metrics.removeExistingProbe(Jr)}),(wr=this._openTelemetry)===null||wr===void 0||wr.completeSpan({span:ds,status:1,message:"Recieve Transport Created Successfully"});case 11:case"end":return Rs.stop()}},Dr,this)})),function(Dr,pr){return Us.apply(this,arguments)})},{key:"joinRoom",value:(ps=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr,wr,rn,hn,zn,Wn,us,ds,hs,Jr,yn,Rs,Ls,Sn,Ss,fs,Ks,Js,Ms,Cs,Xs,so,po;return vt().wrap(function(Es){for(;;)switch(Es.prev=Es.next){case 0:return un.debug("joinRoom()"),Es.prev=1,zn=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"Loading Router Capabilities",span:this._joinSpan}),this._mediasoupDevice=new wt.Device({handlerName:this._handlerName}),Es.next=6,this._protoo.request("getRouterRtpCapabilities");case 6:return Wn=Es.sent,Es.next=9,this._mediasoupDevice.load({routerRtpCapabilities:Wn});case 9:if((dr=this._openTelemetry)===null||dr===void 0||dr.completeSpan({span:zn,status:1,attributes:{routerRtpCapabilities:JSON.stringify(Wn).toString()},message:"Router Capabilities Loaded"}),!this._produce){Es.next=15;break}return Es.next=13,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 13:us=Es.sent,this.createProducerTransport(us,this._joinSpan);case 15:if(!this._consume){Es.next=20;break}return Es.next=18,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 18:ds=Es.sent,this.createConsumerTransport(ds,this._joinSpan);case 20:return Es.next=22,this._protoo.request("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(mr=this._mediasoupDevice)===null||mr===void 0?void 0:mr.rtpCapabilities,sctpCapabilities:(wr=this._mediasoupDevice)===null||wr===void 0?void 0:wr.sctpCapabilities,deviceInfo:this._deviceInfo,autoConsume:this._autoConsume,metaData:this._metaData});case 22:hs=Es.sent,Jr=hs.peers,yn=hs.poll,Rs=hs.messages,Br.dispatch(Gt("connected")),(rn=this._openTelemetry)===null||rn===void 0||rn.traceAutoComplete({spanName:"Emitted `MEETING_JOINED` Event",span:this._joinSpan,status:1}),this._eventEmitter.emit("MEETING_JOINED",{peers:Jr,poll:yn,messages:Rs,baseUrl:this._baseUrl}),Br.dispatch({type:"REMOVE_ALL_NOTIFICATIONS"}),Br.dispatch(Ln({text:"You are in the room!",timeout:3e3})),Ls=Lr(Jr);try{for(Ls.s();!(Sn=Ls.n()).done;)Ss=Sn.value,fs=Vr(In(In({},Ss),{},{consumers:[],dataConsumers:[]})),Br.dispatch(fs),this._eventEmitter.emit(fs.type,fs.payload)}catch(zs){Ls.e(zs)}finally{Ls.f()}this._produce&&(Br.dispatch(hr({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled?this.enableMic(this.customMicrophoneAudioTrack,this._joinSpan):this.customMicrophoneAudioTrack&&((Ks=this._openTelemetry)===null||Ks===void 0||Ks.traceAutoComplete({spanName:"Disposing Audio Track",span:this._joinSpan,status:2}),this.customMicrophoneAudioTrack.getTracks().forEach(function(zs){zs.stop()})),Js=zt(),this._webcamEnabled&&(!Js||Js.webcamEnabled||this._externalVideo)?this.enableWebcam(this.customCameraVideoTrack,this._joinSpan):this.customCameraVideoTrack&&((Ms=this._openTelemetry)===null||Ms===void 0||Ms.traceAutoComplete({spanName:"Disposing Video Track",span:this._joinSpan,status:2}),this.customCameraVideoTrack.getTracks().forEach(function(zs){zs.stop()})),this.enableChatDataProducer()),window.SHOW_INFO&&(Cs=Br.getState(),Xs=Cs.me,Br.dispatch(Zt(Xs.id))),(hn=this._openTelemetry)===null||hn===void 0||hn.completeSpan({span:this._joinSpan,status:1,message:"Room Joined"}),Es.next=45;break;case 38:Es.prev=38,Es.t0=Es.catch(1),un.error("joinRoom() failed:%o",Es.t0),(so=this._videosdkLogs)===null||so===void 0||so.pushLogs({logText:"Error Could not join the room",logType:"ERROR",attributes:{error:Es.t0.message}}),(po=this._openTelemetry)===null||po===void 0||po.completeSpan({span:this._joinSpan,status:2,message:"Could not join the room ".concat(Es.t0)}),Br.dispatch(Ln({type:"error",text:"Could not join the room: ".concat(Es.t0)})),this.close({sendLeft:!0});case 45:case"end":return Es.stop()}},Dr,this,[[1,38]])})),function(){return ps.apply(this,arguments)})},{key:"_updateMics",value:(Hs=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr,wr,rn,hn,zn,Wn,us,ds,hs,Jr=arguments;return vt().wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:return mr=Jr.length>0&&Jr[0]!==void 0?Jr[0]:void 0,this._mics=new Map,un.debug("_updateMics() |"),yn.next=5,navigator.mediaDevices.enumerateDevices();case 5:wr=yn.sent,rn=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"_updateMics() Calling for Getting System Mic list",attributes:{systemDevice:wr?JSON.stringify(wr):"Device not found"},span:mr||null}),hn=Lr(wr);try{for(hn.s();!(zn=hn.n()).done;)(Wn=zn.value).kind=="audioinput"&&this._mics.set(Wn.deviceId,Wn)}catch(Rs){hn.e(Rs)}finally{hn.f()}us=Array.from(this._mics.values()),ds=us.length,hs=this._mic.device?this._mic.device.deviceId:void 0,ds===0?this._mic.device=null:this._mics.has(hs)||(this._mic.device=us[0]),(dr=this._openTelemetry)===null||dr===void 0||dr.completeSpan({span:rn,status:1,message:"Update Mic"});case 14:case"end":return yn.stop()}},Dr,this)})),function(){return Hs.apply(this,arguments)})},{key:"_updateWebcams",value:(Gn=(0,pt.Z)(vt().mark(function Dr(){var pr,dr,mr,wr,rn,hn,zn,Wn,us,ds,hs,Jr=arguments;return vt().wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:return mr=Jr.length>0&&Jr[0]!==void 0?Jr[0]:void 0,un.debug("_updateWebcams()"),this._webcams=new Map,un.debug("_updateWebcams() | calling enumerateDevices()"),yn.next=6,navigator.mediaDevices.enumerateDevices();case 6:wr=yn.sent,rn=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"_updateWebcams() Calling for Getting System Webcam list",attributes:{systemDevice:wr?JSON.stringify(wr):"Device not found"},span:mr||null}),hn=Lr(wr),yn.prev=9,hn.s();case 11:if((zn=hn.n()).done){yn.next=18;break}if((Wn=zn.value).kind==="videoinput"){yn.next=15;break}return yn.abrupt("continue",16);case 15:this._webcams.set(Wn.deviceId,Wn);case 16:yn.next=11;break;case 18:yn.next=23;break;case 20:yn.prev=20,yn.t0=yn.catch(9),hn.e(yn.t0);case 23:return yn.prev=23,hn.f(),yn.finish(23);case 26:us=Array.from(this._webcams.values()),ds=us.length,(hs=this._webcam.device?this._webcam.device.deviceId:void 0)&&(this._defaultCameraIndex=hs),un.debug("_updateWebcams() [webcams:%o]",us),ds===0?this._webcam.device=null:this._webcams.has(hs)||(this._webcam.device=us[this._defaultCameraIndex]),(dr=this._openTelemetry)===null||dr===void 0||dr.completeSpan({span:rn,status:1,message:"Update Webcam"}),Br.dispatch({type:"SET_CAN_CHANGE_WEBCAM",payload:this._webcams.size>1});case 34:case"end":return yn.stop()}},Dr,this,[[9,20,23,26]])})),function(){return Gn.apply(this,arguments)})},{key:"_getWebcamType",value:function(Dr){return/(back|rear)/i.test(Dr.label)?(un.debug("_getWebcamType() | it seems to be a back camera"),"back"):(un.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_pauseConsumer",value:(Un=(0,pt.Z)(vt().mark(function Dr(pr){var dr;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:if(!pr.paused){mr.next=2;break}return mr.abrupt("return");case 2:return mr.prev=2,mr.next=5,this._protoo.request("pauseConsumer",{consumerId:pr.id});case 5:pr.pause(),Br.dispatch(vr(pr.id,"local")),mr.next=14;break;case 9:mr.prev=9,mr.t0=mr.catch(2),un.error("_pauseConsumer() | failed:%o",mr.t0),(dr=this._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"Error pausing Consumer",logType:"ERROR",attributes:{error:mr.t0.message}}),Br.dispatch(Ln({type:"error",text:"Error pausing Consumer: ".concat(mr.t0)}));case 14:case"end":return mr.stop()}},Dr,this,[[2,9]])})),function(Dr){return Un.apply(this,arguments)})},{key:"_resumeConsumer",value:(Hn=(0,pt.Z)(vt().mark(function Dr(pr){var dr;return vt().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:if(pr.paused){mr.next=2;break}return mr.abrupt("return");case 2:return mr.prev=2,mr.next=5,this._protoo.request("resumeConsumer",{consumerId:pr.id});case 5:pr.resume(),Br.dispatch(Fr(pr.id,"local")),mr.next=14;break;case 9:mr.prev=9,mr.t0=mr.catch(2),un.error("_resumeConsumer() | failed:%o",mr.t0),(dr=this._videosdkLogs)===null||dr===void 0||dr.pushLogs({logText:"Error resuming Consumer",logType:"ERROR",attributes:{error:mr.t0.message}}),Br.dispatch(Ln({type:"error",text:"Error resuming Consumer: ".concat(mr.t0)}));case 14:case"end":return mr.stop()}},Dr,this,[[2,9]])})),function(Dr){return Hn.apply(this,arguments)})},{key:"_getExternalVideoStream",value:(An=(0,pt.Z)(vt().mark(function Dr(){var pr=this;return vt().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(!this._externalVideoStream){dr.next=2;break}return dr.abrupt("return",this._externalVideoStream);case 2:if(!(this._externalVideo.readyState<3)){dr.next=5;break}return dr.next=5,new Promise(function(mr){return pr._externalVideo.addEventListener("canplay",mr)});case 5:if(!this._externalVideo.captureStream){dr.next=9;break}this._externalVideoStream=this._externalVideo.captureStream(),dr.next=14;break;case 9:if(!this._externalVideo.mozCaptureStream){dr.next=13;break}this._externalVideoStream=this._externalVideo.mozCaptureStream(),dr.next=14;break;case 13:throw new Error("video.captureStream() not supported");case 14:return dr.abrupt("return",this._externalVideoStream);case 15:case"end":return dr.stop()}},Dr,this)})),function(){return An.apply(this,arguments)})},{key:"_emitError",value:function(Dr){this._eventEmitter.emit("ERROR",Dr)}}],[{key:"init",value:function(Dr){Br=Dr.store}}]),xn}()},1206:function(ut){ut.exports=function(dt){var ht={};function ft(pt){if(ht[pt])return ht[pt].exports;var mt=ht[pt]={i:pt,l:!1,exports:{}};return dt[pt].call(mt.exports,mt,mt.exports,ft),mt.l=!0,mt.exports}return ft.m=dt,ft.c=ht,ft.d=function(pt,mt,gt){ft.o(pt,mt)||Object.defineProperty(pt,mt,{enumerable:!0,get:gt})},ft.r=function(pt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(pt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(pt,"__esModule",{value:!0})},ft.t=function(pt,mt){if(1&mt&&(pt=ft(pt)),8&mt||4&mt&&typeof pt=="object"&&pt&&pt.__esModule)return pt;var gt=Object.create(null);if(ft.r(gt),Object.defineProperty(gt,"default",{enumerable:!0,value:pt}),2&mt&&typeof pt!="string")for(var xt in pt)ft.d(gt,xt,(function(yt){return pt[yt]}).bind(null,xt));return gt},ft.n=function(pt){var mt=pt&&pt.__esModule?function(){return pt.default}:function(){return pt};return ft.d(mt,"a",mt),mt},ft.o=function(pt,mt){return Object.prototype.hasOwnProperty.call(pt,mt)},ft.p="",ft(ft.s=90)}({17:function(dt,ht,ft){ht.__esModule=!0,ht.default=void 0;var pt=ft(18),mt=function(){function gt(){}return gt.getFirstMatch=function(xt,yt){var vt=yt.match(xt);return vt&&vt.length>0&&vt[1]||""},gt.getSecondMatch=function(xt,yt){var vt=yt.match(xt);return vt&&vt.length>1&&vt[2]||""},gt.matchAndReturnConst=function(xt,yt,vt){if(xt.test(yt))return vt},gt.getWindowsVersionName=function(xt){switch(xt){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},gt.getMacOSVersionName=function(xt){var yt=xt.split(".").splice(0,2).map(function(vt){return parseInt(vt,10)||0});if(yt.push(0),yt[0]===10)switch(yt[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},gt.getAndroidVersionName=function(xt){var yt=xt.split(".").splice(0,2).map(function(vt){return parseInt(vt,10)||0});if(yt.push(0),!(yt[0]===1&&yt[1]<5))return yt[0]===1&&yt[1]<6?"Cupcake":yt[0]===1&&yt[1]>=6?"Donut":yt[0]===2&&yt[1]<2?"Eclair":yt[0]===2&&yt[1]===2?"Froyo":yt[0]===2&&yt[1]>2?"Gingerbread":yt[0]===3?"Honeycomb":yt[0]===4&&yt[1]<1?"Ice Cream Sandwich":yt[0]===4&&yt[1]<4?"Jelly Bean":yt[0]===4&&yt[1]>=4?"KitKat":yt[0]===5?"Lollipop":yt[0]===6?"Marshmallow":yt[0]===7?"Nougat":yt[0]===8?"Oreo":yt[0]===9?"Pie":void 0},gt.getVersionPrecision=function(xt){return xt.split(".").length},gt.compareVersions=function(xt,yt,vt){vt===void 0&&(vt=!1);var St=gt.getVersionPrecision(xt),wt=gt.getVersionPrecision(yt),Et=Math.max(St,wt),Rt=0,Tt=gt.map([xt,yt],function(It){var At=Et-gt.getVersionPrecision(It),Dt=It+new Array(At+1).join(".0");return gt.map(Dt.split("."),function(jt){return new Array(20-jt.length).join("0")+jt}).reverse()});for(vt&&(Rt=Et-Math.min(St,wt)),Et-=1;Et>=Rt;){if(Tt[0][Et]>Tt[1][Et])return 1;if(Tt[0][Et]===Tt[1][Et]){if(Et===Rt)return 0;Et-=1}else if(Tt[0][Et]<Tt[1][Et])return-1}},gt.map=function(xt,yt){var vt,St=[];if(Array.prototype.map)return Array.prototype.map.call(xt,yt);for(vt=0;vt<xt.length;vt+=1)St.push(yt(xt[vt]));return St},gt.find=function(xt,yt){var vt,St;if(Array.prototype.find)return Array.prototype.find.call(xt,yt);for(vt=0,St=xt.length;vt<St;vt+=1){var wt=xt[vt];if(yt(wt,vt))return wt}},gt.assign=function(xt){for(var yt,vt,St=xt,wt=arguments.length,Et=new Array(wt>1?wt-1:0),Rt=1;Rt<wt;Rt++)Et[Rt-1]=arguments[Rt];if(Object.assign)return Object.assign.apply(Object,[xt].concat(Et));var Tt=function(){var It=Et[yt];typeof It=="object"&&It!==null&&Object.keys(It).forEach(function(At){St[At]=It[At]})};for(yt=0,vt=Et.length;yt<vt;yt+=1)Tt();return xt},gt.getBrowserAlias=function(xt){return pt.BROWSER_ALIASES_MAP[xt]},gt.getBrowserTypeByAlias=function(xt){return pt.BROWSER_MAP[xt]||""},gt}();ht.default=mt,dt.exports=ht.default},18:function(dt,ht,ft){ht.__esModule=!0,ht.ENGINE_MAP=ht.OS_MAP=ht.PLATFORMS_MAP=ht.BROWSER_MAP=ht.BROWSER_ALIASES_MAP=void 0,ht.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},ht.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},ht.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},ht.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ht.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(dt,ht,ft){ht.__esModule=!0,ht.default=void 0;var pt,mt=(pt=ft(91))&&pt.__esModule?pt:{default:pt},gt=ft(18);function xt(vt,St){for(var wt=0;wt<St.length;wt++){var Et=St[wt];Et.enumerable=Et.enumerable||!1,Et.configurable=!0,"value"in Et&&(Et.writable=!0),Object.defineProperty(vt,Et.key,Et)}}var yt=function(){function vt(){}var St,wt,Et;return vt.getParser=function(Rt,Tt){if(Tt===void 0&&(Tt=!1),typeof Rt!="string")throw new Error("UserAgent should be a string");return new mt.default(Rt,Tt)},vt.parse=function(Rt){return new mt.default(Rt).getResult()},St=vt,Et=[{key:"BROWSER_MAP",get:function(){return gt.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return gt.ENGINE_MAP}},{key:"OS_MAP",get:function(){return gt.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return gt.PLATFORMS_MAP}}],(wt=null)&&xt(St.prototype,wt),Et&&xt(St,Et),vt}();ht.default=yt,dt.exports=ht.default},91:function(dt,ht,ft){ht.__esModule=!0,ht.default=void 0;var pt=vt(ft(92)),mt=vt(ft(93)),gt=vt(ft(94)),xt=vt(ft(95)),yt=vt(ft(17));function vt(wt){return wt&&wt.__esModule?wt:{default:wt}}var St=function(){function wt(Rt,Tt){if(Tt===void 0&&(Tt=!1),Rt==null||Rt==="")throw new Error("UserAgent parameter can't be empty");this._ua=Rt,this.parsedResult={},Tt!==!0&&this.parse()}var Et=wt.prototype;return Et.getUA=function(){return this._ua},Et.test=function(Rt){return Rt.test(this._ua)},Et.parseBrowser=function(){var Rt=this;this.parsedResult.browser={};var Tt=yt.default.find(pt.default,function(It){if(typeof It.test=="function")return It.test(Rt);if(It.test instanceof Array)return It.test.some(function(At){return Rt.test(At)});throw new Error("Browser's test function is not valid")});return Tt&&(this.parsedResult.browser=Tt.describe(this.getUA())),this.parsedResult.browser},Et.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},Et.getBrowserName=function(Rt){return Rt?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},Et.getBrowserVersion=function(){return this.getBrowser().version},Et.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},Et.parseOS=function(){var Rt=this;this.parsedResult.os={};var Tt=yt.default.find(mt.default,function(It){if(typeof It.test=="function")return It.test(Rt);if(It.test instanceof Array)return It.test.some(function(At){return Rt.test(At)});throw new Error("Browser's test function is not valid")});return Tt&&(this.parsedResult.os=Tt.describe(this.getUA())),this.parsedResult.os},Et.getOSName=function(Rt){var Tt=this.getOS().name;return Rt?String(Tt).toLowerCase()||"":Tt||""},Et.getOSVersion=function(){return this.getOS().version},Et.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},Et.getPlatformType=function(Rt){Rt===void 0&&(Rt=!1);var Tt=this.getPlatform().type;return Rt?String(Tt).toLowerCase()||"":Tt||""},Et.parsePlatform=function(){var Rt=this;this.parsedResult.platform={};var Tt=yt.default.find(gt.default,function(It){if(typeof It.test=="function")return It.test(Rt);if(It.test instanceof Array)return It.test.some(function(At){return Rt.test(At)});throw new Error("Browser's test function is not valid")});return Tt&&(this.parsedResult.platform=Tt.describe(this.getUA())),this.parsedResult.platform},Et.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},Et.getEngineName=function(Rt){return Rt?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},Et.parseEngine=function(){var Rt=this;this.parsedResult.engine={};var Tt=yt.default.find(xt.default,function(It){if(typeof It.test=="function")return It.test(Rt);if(It.test instanceof Array)return It.test.some(function(At){return Rt.test(At)});throw new Error("Browser's test function is not valid")});return Tt&&(this.parsedResult.engine=Tt.describe(this.getUA())),this.parsedResult.engine},Et.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},Et.getResult=function(){return yt.default.assign({},this.parsedResult)},Et.satisfies=function(Rt){var Tt=this,It={},At=0,Dt={},jt=0;if(Object.keys(Rt).forEach(function(Ut){var zt=Rt[Ut];typeof zt=="string"?(Dt[Ut]=zt,jt+=1):typeof zt=="object"&&(It[Ut]=zt,At+=1)}),At>0){var Ft=Object.keys(It),Lt=yt.default.find(Ft,function(Ut){return Tt.isOS(Ut)});if(Lt){var Mt=this.satisfies(It[Lt]);if(Mt!==void 0)return Mt}var Ot=yt.default.find(Ft,function(Ut){return Tt.isPlatform(Ut)});if(Ot){var Nt=this.satisfies(It[Ot]);if(Nt!==void 0)return Nt}}if(jt>0){var $t=Object.keys(Dt),Vt=yt.default.find($t,function(Ut){return Tt.isBrowser(Ut,!0)});if(Vt!==void 0)return this.compareVersion(Dt[Vt])}},Et.isBrowser=function(Rt,Tt){Tt===void 0&&(Tt=!1);var It=this.getBrowserName().toLowerCase(),At=Rt.toLowerCase(),Dt=yt.default.getBrowserTypeByAlias(At);return Tt&&Dt&&(At=Dt.toLowerCase()),At===It},Et.compareVersion=function(Rt){var Tt=[0],It=Rt,At=!1,Dt=this.getBrowserVersion();if(typeof Dt=="string")return Rt[0]===">"||Rt[0]==="<"?(It=Rt.substr(1),Rt[1]==="="?(At=!0,It=Rt.substr(2)):Tt=[],Rt[0]===">"?Tt.push(1):Tt.push(-1)):Rt[0]==="="?It=Rt.substr(1):Rt[0]==="~"&&(At=!0,It=Rt.substr(1)),Tt.indexOf(yt.default.compareVersions(Dt,It,At))>-1},Et.isOS=function(Rt){return this.getOSName(!0)===String(Rt).toLowerCase()},Et.isPlatform=function(Rt){return this.getPlatformType(!0)===String(Rt).toLowerCase()},Et.isEngine=function(Rt){return this.getEngineName(!0)===String(Rt).toLowerCase()},Et.is=function(Rt,Tt){return Tt===void 0&&(Tt=!1),this.isBrowser(Rt,Tt)||this.isOS(Rt)||this.isPlatform(Rt)},Et.some=function(Rt){var Tt=this;return Rt===void 0&&(Rt=[]),Rt.some(function(It){return Tt.is(It)})},wt}();ht.default=St,dt.exports=ht.default},92:function(dt,ht,ft){ht.__esModule=!0,ht.default=void 0;var pt,mt=(pt=ft(17))&&pt.__esModule?pt:{default:pt},gt=/version\/(\d+(\.?_?\d+)+)/i,xt=[{test:[/googlebot/i],describe:function(yt){var vt={name:"Googlebot"},St=mt.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/opera/i],describe:function(yt){var vt={name:"Opera"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/opr\/|opios/i],describe:function(yt){var vt={name:"Opera"},St=mt.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/SamsungBrowser/i],describe:function(yt){var vt={name:"Samsung Internet for Android"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/Whale/i],describe:function(yt){var vt={name:"NAVER Whale Browser"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/MZBrowser/i],describe:function(yt){var vt={name:"MZ Browser"},St=mt.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/focus/i],describe:function(yt){var vt={name:"Focus"},St=mt.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/swing/i],describe:function(yt){var vt={name:"Swing"},St=mt.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/coast/i],describe:function(yt){var vt={name:"Opera Coast"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(yt){var vt={name:"Opera Touch"},St=mt.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/yabrowser/i],describe:function(yt){var vt={name:"Yandex Browser"},St=mt.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/ucbrowser/i],describe:function(yt){var vt={name:"UC Browser"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/Maxthon|mxios/i],describe:function(yt){var vt={name:"Maxthon"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/epiphany/i],describe:function(yt){var vt={name:"Epiphany"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/puffin/i],describe:function(yt){var vt={name:"Puffin"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/sleipnir/i],describe:function(yt){var vt={name:"Sleipnir"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/k-meleon/i],describe:function(yt){var vt={name:"K-Meleon"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/micromessenger/i],describe:function(yt){var vt={name:"WeChat"},St=mt.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/qqbrowser/i],describe:function(yt){var vt={name:/qqbrowserlite/i.test(yt)?"QQ Browser Lite":"QQ Browser"},St=mt.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/msie|trident/i],describe:function(yt){var vt={name:"Internet Explorer"},St=mt.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/\sedg\//i],describe:function(yt){var vt={name:"Microsoft Edge"},St=mt.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/edg([ea]|ios)/i],describe:function(yt){var vt={name:"Microsoft Edge"},St=mt.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/vivaldi/i],describe:function(yt){var vt={name:"Vivaldi"},St=mt.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/seamonkey/i],describe:function(yt){var vt={name:"SeaMonkey"},St=mt.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/sailfish/i],describe:function(yt){var vt={name:"Sailfish"},St=mt.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,yt);return St&&(vt.version=St),vt}},{test:[/silk/i],describe:function(yt){var vt={name:"Amazon Silk"},St=mt.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/phantom/i],describe:function(yt){var vt={name:"PhantomJS"},St=mt.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/slimerjs/i],describe:function(yt){var vt={name:"SlimerJS"},St=mt.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(yt){var vt={name:"BlackBerry"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/(web|hpw)[o0]s/i],describe:function(yt){var vt={name:"WebOS Browser"},St=mt.default.getFirstMatch(gt,yt)||mt.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/bada/i],describe:function(yt){var vt={name:"Bada"},St=mt.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/tizen/i],describe:function(yt){var vt={name:"Tizen"},St=mt.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/qupzilla/i],describe:function(yt){var vt={name:"QupZilla"},St=mt.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/firefox|iceweasel|fxios/i],describe:function(yt){var vt={name:"Firefox"},St=mt.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/electron/i],describe:function(yt){var vt={name:"Electron"},St=mt.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/MiuiBrowser/i],describe:function(yt){var vt={name:"Miui"},St=mt.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/chromium/i],describe:function(yt){var vt={name:"Chromium"},St=mt.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,yt)||mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/chrome|crios|crmo/i],describe:function(yt){var vt={name:"Chrome"},St=mt.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/GSA/i],describe:function(yt){var vt={name:"Google Search"},St=mt.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:function(yt){var vt=!yt.test(/like android/i),St=yt.test(/android/i);return vt&&St},describe:function(yt){var vt={name:"Android Browser"},St=mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/playstation 4/i],describe:function(yt){var vt={name:"PlayStation 4"},St=mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/safari|applewebkit/i],describe:function(yt){var vt={name:"Safari"},St=mt.default.getFirstMatch(gt,yt);return St&&(vt.version=St),vt}},{test:[/.*/i],describe:function(yt){var vt=yt.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:mt.default.getFirstMatch(vt,yt),version:mt.default.getSecondMatch(vt,yt)}}}];ht.default=xt,dt.exports=ht.default},93:function(dt,ht,ft){ht.__esModule=!0,ht.default=void 0;var pt,mt=(pt=ft(17))&&pt.__esModule?pt:{default:pt},gt=ft(18),xt=[{test:[/Roku\/DVP/],describe:function(yt){var vt=mt.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,yt);return{name:gt.OS_MAP.Roku,version:vt}}},{test:[/windows phone/i],describe:function(yt){var vt=mt.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,yt);return{name:gt.OS_MAP.WindowsPhone,version:vt}}},{test:[/windows /i],describe:function(yt){var vt=mt.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,yt),St=mt.default.getWindowsVersionName(vt);return{name:gt.OS_MAP.Windows,version:vt,versionName:St}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(yt){var vt={name:gt.OS_MAP.iOS},St=mt.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,yt);return St&&(vt.version=St),vt}},{test:[/macintosh/i],describe:function(yt){var vt=mt.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,yt).replace(/[_\s]/g,"."),St=mt.default.getMacOSVersionName(vt),wt={name:gt.OS_MAP.MacOS,version:vt};return St&&(wt.versionName=St),wt}},{test:[/(ipod|iphone|ipad)/i],describe:function(yt){var vt=mt.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,yt).replace(/[_\s]/g,".");return{name:gt.OS_MAP.iOS,version:vt}}},{test:function(yt){var vt=!yt.test(/like android/i),St=yt.test(/android/i);return vt&&St},describe:function(yt){var vt=mt.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,yt),St=mt.default.getAndroidVersionName(vt),wt={name:gt.OS_MAP.Android,version:vt};return St&&(wt.versionName=St),wt}},{test:[/(web|hpw)[o0]s/i],describe:function(yt){var vt=mt.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,yt),St={name:gt.OS_MAP.WebOS};return vt&&vt.length&&(St.version=vt),St}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(yt){var vt=mt.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,yt)||mt.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,yt)||mt.default.getFirstMatch(/\bbb(\d+)/i,yt);return{name:gt.OS_MAP.BlackBerry,version:vt}}},{test:[/bada/i],describe:function(yt){var vt=mt.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,yt);return{name:gt.OS_MAP.Bada,version:vt}}},{test:[/tizen/i],describe:function(yt){var vt=mt.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,yt);return{name:gt.OS_MAP.Tizen,version:vt}}},{test:[/linux/i],describe:function(){return{name:gt.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:gt.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(yt){var vt=mt.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,yt);return{name:gt.OS_MAP.PlayStation4,version:vt}}}];ht.default=xt,dt.exports=ht.default},94:function(dt,ht,ft){ht.__esModule=!0,ht.default=void 0;var pt,mt=(pt=ft(17))&&pt.__esModule?pt:{default:pt},gt=ft(18),xt=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(yt){var vt=mt.default.getFirstMatch(/(can-l01)/i,yt)&&"Nova",St={type:gt.PLATFORMS_MAP.mobile,vendor:"Huawei"};return vt&&(St.model=vt),St}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:gt.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:gt.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:gt.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:gt.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:gt.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:gt.PLATFORMS_MAP.tablet}}},{test:function(yt){var vt=yt.test(/ipod|iphone/i),St=yt.test(/like (ipod|iphone)/i);return vt&&!St},describe:function(yt){var vt=mt.default.getFirstMatch(/(ipod|iphone)/i,yt);return{type:gt.PLATFORMS_MAP.mobile,vendor:"Apple",model:vt}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:gt.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:gt.PLATFORMS_MAP.mobile}}},{test:function(yt){return yt.getBrowserName(!0)==="blackberry"},describe:function(){return{type:gt.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(yt){return yt.getBrowserName(!0)==="bada"},describe:function(){return{type:gt.PLATFORMS_MAP.mobile}}},{test:function(yt){return yt.getBrowserName()==="windows phone"},describe:function(){return{type:gt.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(yt){var vt=Number(String(yt.getOSVersion()).split(".")[0]);return yt.getOSName(!0)==="android"&&vt>=3},describe:function(){return{type:gt.PLATFORMS_MAP.tablet}}},{test:function(yt){return yt.getOSName(!0)==="android"},describe:function(){return{type:gt.PLATFORMS_MAP.mobile}}},{test:function(yt){return yt.getOSName(!0)==="macos"},describe:function(){return{type:gt.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(yt){return yt.getOSName(!0)==="windows"},describe:function(){return{type:gt.PLATFORMS_MAP.desktop}}},{test:function(yt){return yt.getOSName(!0)==="linux"},describe:function(){return{type:gt.PLATFORMS_MAP.desktop}}},{test:function(yt){return yt.getOSName(!0)==="playstation 4"},describe:function(){return{type:gt.PLATFORMS_MAP.tv}}},{test:function(yt){return yt.getOSName(!0)==="roku"},describe:function(){return{type:gt.PLATFORMS_MAP.tv}}}];ht.default=xt,dt.exports=ht.default},95:function(dt,ht,ft){ht.__esModule=!0,ht.default=void 0;var pt,mt=(pt=ft(17))&&pt.__esModule?pt:{default:pt},gt=ft(18),xt=[{test:function(yt){return yt.getBrowserName(!0)==="microsoft edge"},describe:function(yt){if(/\sedg\//i.test(yt))return{name:gt.ENGINE_MAP.Blink};var vt=mt.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,yt);return{name:gt.ENGINE_MAP.EdgeHTML,version:vt}}},{test:[/trident/i],describe:function(yt){var vt={name:gt.ENGINE_MAP.Trident},St=mt.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:function(yt){return yt.test(/presto/i)},describe:function(yt){var vt={name:gt.ENGINE_MAP.Presto},St=mt.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:function(yt){var vt=yt.test(/gecko/i),St=yt.test(/like gecko/i);return vt&&!St},describe:function(yt){var vt={name:gt.ENGINE_MAP.Gecko},St=mt.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:gt.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(yt){var vt={name:gt.ENGINE_MAP.WebKit},St=mt.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,yt);return St&&(vt.version=St),vt}}];ht.default=xt,dt.exports=ht.default}})},452:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(8269),ht(8214),ht(888),ht(5109),function(){var pt=ft,mt=pt.lib.BlockCipher,gt=pt.algo,xt=[],yt=[],vt=[],St=[],wt=[],Et=[],Rt=[],Tt=[],It=[],At=[];(function(){for(var Ft=[],Lt=0;Lt<256;Lt++)Ft[Lt]=Lt<128?Lt<<1:Lt<<1^283;var Mt=0,Ot=0;for(Lt=0;Lt<256;Lt++){var Nt=Ot^Ot<<1^Ot<<2^Ot<<3^Ot<<4;Nt=Nt>>>8^255&Nt^99,xt[Mt]=Nt,yt[Nt]=Mt;var $t=Ft[Mt],Vt=Ft[$t],Ut=Ft[Vt],zt=257*Ft[Nt]^16843008*Nt;vt[Mt]=zt<<24|zt>>>8,St[Mt]=zt<<16|zt>>>16,wt[Mt]=zt<<8|zt>>>24,Et[Mt]=zt,zt=16843009*Ut^65537*Vt^257*$t^16843008*Mt,Rt[Nt]=zt<<24|zt>>>8,Tt[Nt]=zt<<16|zt>>>16,It[Nt]=zt<<8|zt>>>24,At[Nt]=zt,Mt?(Mt=$t^Ft[Ft[Ft[Ut^$t]]],Ot^=Ft[Ft[Ot]]):Mt=Ot=1}})();var Dt=[0,1,2,4,8,16,32,64,128,27,54],jt=gt.AES=mt.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var Ft=this._keyPriorReset=this._key,Lt=Ft.words,Mt=Ft.sigBytes/4,Ot=4*((this._nRounds=Mt+6)+1),Nt=this._keySchedule=[],$t=0;$t<Ot;$t++)$t<Mt?Nt[$t]=Lt[$t]:(zt=Nt[$t-1],$t%Mt?Mt>6&&$t%Mt==4&&(zt=xt[zt>>>24]<<24|xt[zt>>>16&255]<<16|xt[zt>>>8&255]<<8|xt[255&zt]):(zt=xt[(zt=zt<<8|zt>>>24)>>>24]<<24|xt[zt>>>16&255]<<16|xt[zt>>>8&255]<<8|xt[255&zt],zt^=Dt[$t/Mt|0]<<24),Nt[$t]=Nt[$t-Mt]^zt);for(var Vt=this._invKeySchedule=[],Ut=0;Ut<Ot;Ut++){if($t=Ot-Ut,Ut%4)var zt=Nt[$t];else zt=Nt[$t-4];Vt[Ut]=Ut<4||$t<=4?zt:Rt[xt[zt>>>24]]^Tt[xt[zt>>>16&255]]^It[xt[zt>>>8&255]]^At[xt[255&zt]]}}},encryptBlock:function(Ft,Lt){this._doCryptBlock(Ft,Lt,this._keySchedule,vt,St,wt,Et,xt)},decryptBlock:function(Ft,Lt){var Mt=Ft[Lt+1];Ft[Lt+1]=Ft[Lt+3],Ft[Lt+3]=Mt,this._doCryptBlock(Ft,Lt,this._invKeySchedule,Rt,Tt,It,At,yt),Mt=Ft[Lt+1],Ft[Lt+1]=Ft[Lt+3],Ft[Lt+3]=Mt},_doCryptBlock:function(Ft,Lt,Mt,Ot,Nt,$t,Vt,Ut){for(var zt=this._nRounds,Bt=Ft[Lt]^Mt[0],Ht=Ft[Lt+1]^Mt[1],Gt=Ft[Lt+2]^Mt[2],Xt=Ft[Lt+3]^Mt[3],Zt=4,hr=1;hr<zt;hr++){var nr=Ot[Bt>>>24]^Nt[Ht>>>16&255]^$t[Gt>>>8&255]^Vt[255&Xt]^Mt[Zt++],ir=Ot[Ht>>>24]^Nt[Gt>>>16&255]^$t[Xt>>>8&255]^Vt[255&Bt]^Mt[Zt++],yr=Ot[Gt>>>24]^Nt[Xt>>>16&255]^$t[Bt>>>8&255]^Vt[255&Ht]^Mt[Zt++],Cr=Ot[Xt>>>24]^Nt[Bt>>>16&255]^$t[Ht>>>8&255]^Vt[255&Gt]^Mt[Zt++];Bt=nr,Ht=ir,Gt=yr,Xt=Cr}nr=(Ut[Bt>>>24]<<24|Ut[Ht>>>16&255]<<16|Ut[Gt>>>8&255]<<8|Ut[255&Xt])^Mt[Zt++],ir=(Ut[Ht>>>24]<<24|Ut[Gt>>>16&255]<<16|Ut[Xt>>>8&255]<<8|Ut[255&Bt])^Mt[Zt++],yr=(Ut[Gt>>>24]<<24|Ut[Xt>>>16&255]<<16|Ut[Bt>>>8&255]<<8|Ut[255&Ht])^Mt[Zt++],Cr=(Ut[Xt>>>24]<<24|Ut[Bt>>>16&255]<<16|Ut[Ht>>>8&255]<<8|Ut[255&Gt])^Mt[Zt++],Ft[Lt]=nr,Ft[Lt+1]=ir,Ft[Lt+2]=yr,Ft[Lt+3]=Cr},keySize:8});pt.AES=mt._createHelper(jt)}(),ft.AES)},7407:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(8269),ht(8214),ht(888),ht(5109),function(){var pt=ft,mt=pt.lib.BlockCipher,gt=pt.algo;const xt=16,yt=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],vt=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var St={pbox:[],sbox:[]};function wt(At,Dt){let jt=Dt>>24&255,Ft=Dt>>16&255,Lt=Dt>>8&255,Mt=255&Dt,Ot=At.sbox[0][jt]+At.sbox[1][Ft];return Ot^=At.sbox[2][Lt],Ot+=At.sbox[3][Mt],Ot}function Et(At,Dt,jt){let Ft,Lt=Dt,Mt=jt;for(let Ot=0;Ot<xt;++Ot)Lt^=At.pbox[Ot],Mt=wt(At,Lt)^Mt,Ft=Lt,Lt=Mt,Mt=Ft;return Ft=Lt,Lt=Mt,Mt=Ft,Mt^=At.pbox[xt],Lt^=At.pbox[xt+1],{left:Lt,right:Mt}}function Rt(At,Dt,jt){let Ft,Lt=Dt,Mt=jt;for(let Ot=xt+1;Ot>1;--Ot)Lt^=At.pbox[Ot],Mt=wt(At,Lt)^Mt,Ft=Lt,Lt=Mt,Mt=Ft;return Ft=Lt,Lt=Mt,Mt=Ft,Mt^=At.pbox[1],Lt^=At.pbox[0],{left:Lt,right:Mt}}function Tt(At,Dt,jt){for(let Nt=0;Nt<4;Nt++){At.sbox[Nt]=[];for(let $t=0;$t<256;$t++)At.sbox[Nt][$t]=vt[Nt][$t]}let Ft=0;for(let Nt=0;Nt<xt+2;Nt++)At.pbox[Nt]=yt[Nt]^Dt[Ft],Ft++,Ft>=jt&&(Ft=0);let Lt=0,Mt=0,Ot=0;for(let Nt=0;Nt<xt+2;Nt+=2)Ot=Et(At,Lt,Mt),Lt=Ot.left,Mt=Ot.right,At.pbox[Nt]=Lt,At.pbox[Nt+1]=Mt;for(let Nt=0;Nt<4;Nt++)for(let $t=0;$t<256;$t+=2)Ot=Et(At,Lt,Mt),Lt=Ot.left,Mt=Ot.right,At.sbox[Nt][$t]=Lt,At.sbox[Nt][$t+1]=Mt;return!0}var It=gt.Blowfish=mt.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var At=this._keyPriorReset=this._key,Dt=At.words,jt=At.sigBytes/4;Tt(St,Dt,jt)}},encryptBlock:function(At,Dt){var jt=Et(St,At[Dt],At[Dt+1]);At[Dt]=jt.left,At[Dt+1]=jt.right},decryptBlock:function(At,Dt){var jt=Rt(St,At[Dt],At[Dt+1]);At[Dt]=jt.left,At[Dt+1]=jt.right},blockSize:2,keySize:4,ivSize:2});pt.Blowfish=mt._createHelper(It)}(),ft.Blowfish)},5109:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(888),void(ft.lib.Cipher||function(pt){var mt=ft,gt=mt.lib,xt=gt.Base,yt=gt.WordArray,vt=gt.BufferedBlockAlgorithm,St=mt.enc,wt=(St.Utf8,St.Base64),Et=mt.algo.EvpKDF,Rt=gt.Cipher=vt.extend({cfg:xt.extend(),createEncryptor:function(Nt,$t){return this.create(this._ENC_XFORM_MODE,Nt,$t)},createDecryptor:function(Nt,$t){return this.create(this._DEC_XFORM_MODE,Nt,$t)},init:function(Nt,$t,Vt){this.cfg=this.cfg.extend(Vt),this._xformMode=Nt,this._key=$t,this.reset()},reset:function(){vt.reset.call(this),this._doReset()},process:function(Nt){return this._append(Nt),this._process()},finalize:function(Nt){return Nt&&this._append(Nt),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function Nt($t){return typeof $t=="string"?Ot:Lt}return function($t){return{encrypt:function(Vt,Ut,zt){return Nt(Ut).encrypt($t,Vt,Ut,zt)},decrypt:function(Vt,Ut,zt){return Nt(Ut).decrypt($t,Vt,Ut,zt)}}}}()}),Tt=(gt.StreamCipher=Rt.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),mt.mode={}),It=gt.BlockCipherMode=xt.extend({createEncryptor:function(Nt,$t){return this.Encryptor.create(Nt,$t)},createDecryptor:function(Nt,$t){return this.Decryptor.create(Nt,$t)},init:function(Nt,$t){this._cipher=Nt,this._iv=$t}}),At=Tt.CBC=function(){var Nt=It.extend();function $t(Vt,Ut,zt){var Bt,Ht=this._iv;Ht?(Bt=Ht,this._iv=pt):Bt=this._prevBlock;for(var Gt=0;Gt<zt;Gt++)Vt[Ut+Gt]^=Bt[Gt]}return Nt.Encryptor=Nt.extend({processBlock:function(Vt,Ut){var zt=this._cipher,Bt=zt.blockSize;$t.call(this,Vt,Ut,Bt),zt.encryptBlock(Vt,Ut),this._prevBlock=Vt.slice(Ut,Ut+Bt)}}),Nt.Decryptor=Nt.extend({processBlock:function(Vt,Ut){var zt=this._cipher,Bt=zt.blockSize,Ht=Vt.slice(Ut,Ut+Bt);zt.decryptBlock(Vt,Ut),$t.call(this,Vt,Ut,Bt),this._prevBlock=Ht}}),Nt}(),Dt=(mt.pad={}).Pkcs7={pad:function(Nt,$t){for(var Vt=4*$t,Ut=Vt-Nt.sigBytes%Vt,zt=Ut<<24|Ut<<16|Ut<<8|Ut,Bt=[],Ht=0;Ht<Ut;Ht+=4)Bt.push(zt);var Gt=yt.create(Bt,Ut);Nt.concat(Gt)},unpad:function(Nt){var $t=255&Nt.words[Nt.sigBytes-1>>>2];Nt.sigBytes-=$t}},jt=(gt.BlockCipher=Rt.extend({cfg:Rt.cfg.extend({mode:At,padding:Dt}),reset:function(){var Nt;Rt.reset.call(this);var $t=this.cfg,Vt=$t.iv,Ut=$t.mode;this._xformMode==this._ENC_XFORM_MODE?Nt=Ut.createEncryptor:(Nt=Ut.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Nt?this._mode.init(this,Vt&&Vt.words):(this._mode=Nt.call(Ut,this,Vt&&Vt.words),this._mode.__creator=Nt)},_doProcessBlock:function(Nt,$t){this._mode.processBlock(Nt,$t)},_doFinalize:function(){var Nt,$t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?($t.pad(this._data,this.blockSize),Nt=this._process(!0)):(Nt=this._process(!0),$t.unpad(Nt)),Nt},blockSize:4}),gt.CipherParams=xt.extend({init:function(Nt){this.mixIn(Nt)},toString:function(Nt){return(Nt||this.formatter).stringify(this)}})),Ft=(mt.format={}).OpenSSL={stringify:function(Nt){var $t=Nt.ciphertext,Vt=Nt.salt;return(Vt?yt.create([1398893684,1701076831]).concat(Vt).concat($t):$t).toString(wt)},parse:function(Nt){var $t,Vt=wt.parse(Nt),Ut=Vt.words;return Ut[0]==1398893684&&Ut[1]==1701076831&&($t=yt.create(Ut.slice(2,4)),Ut.splice(0,4),Vt.sigBytes-=16),jt.create({ciphertext:Vt,salt:$t})}},Lt=gt.SerializableCipher=xt.extend({cfg:xt.extend({format:Ft}),encrypt:function(Nt,$t,Vt,Ut){Ut=this.cfg.extend(Ut);var zt=Nt.createEncryptor(Vt,Ut),Bt=zt.finalize($t),Ht=zt.cfg;return jt.create({ciphertext:Bt,key:Vt,iv:Ht.iv,algorithm:Nt,mode:Ht.mode,padding:Ht.padding,blockSize:Nt.blockSize,formatter:Ut.format})},decrypt:function(Nt,$t,Vt,Ut){return Ut=this.cfg.extend(Ut),$t=this._parse($t,Ut.format),Nt.createDecryptor(Vt,Ut).finalize($t.ciphertext)},_parse:function(Nt,$t){return typeof Nt=="string"?$t.parse(Nt,this):Nt}}),Mt=(mt.kdf={}).OpenSSL={execute:function(Nt,$t,Vt,Ut,zt){if(Ut||(Ut=yt.random(8)),zt)Bt=Et.create({keySize:$t+Vt,hasher:zt}).compute(Nt,Ut);else var Bt=Et.create({keySize:$t+Vt}).compute(Nt,Ut);var Ht=yt.create(Bt.words.slice($t),4*Vt);return Bt.sigBytes=4*$t,jt.create({key:Bt,iv:Ht,salt:Ut})}},Ot=gt.PasswordBasedCipher=Lt.extend({cfg:Lt.cfg.extend({kdf:Mt}),encrypt:function(Nt,$t,Vt,Ut){var zt=(Ut=this.cfg.extend(Ut)).kdf.execute(Vt,Nt.keySize,Nt.ivSize,Ut.salt,Ut.hasher);Ut.iv=zt.iv;var Bt=Lt.encrypt.call(this,Nt,$t,zt.key,Ut);return Bt.mixIn(zt),Bt},decrypt:function(Nt,$t,Vt,Ut){Ut=this.cfg.extend(Ut),$t=this._parse($t,Ut.format);var zt=Ut.kdf.execute(Vt,Nt.keySize,Nt.ivSize,$t.salt,Ut.hasher);return Ut.iv=zt.iv,Lt.decrypt.call(this,Nt,$t,zt.key,Ut)}})}()))},8249:function(ut,dt,ht){var ft;ut.exports=(ft=ft||function(pt,mt){var gt;if(typeof window<"u"&&window.crypto&&(gt=window.crypto),typeof self<"u"&&self.crypto&&(gt=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(gt=globalThis.crypto),!gt&&typeof window<"u"&&window.msCrypto&&(gt=window.msCrypto),!gt&&ht.g!==void 0&&ht.g.crypto&&(gt=ht.g.crypto),!gt)try{gt=ht(2480)}catch{}var xt=function(){if(gt){if(typeof gt.getRandomValues=="function")try{return gt.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof gt.randomBytes=="function")try{return gt.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},yt=Object.create||function(){function Ft(){}return function(Lt){var Mt;return Ft.prototype=Lt,Mt=new Ft,Ft.prototype=null,Mt}}(),vt={},St=vt.lib={},wt=St.Base={extend:function(Ft){var Lt=yt(this);return Ft&&Lt.mixIn(Ft),Lt.hasOwnProperty("init")&&this.init!==Lt.init||(Lt.init=function(){Lt.$super.init.apply(this,arguments)}),Lt.init.prototype=Lt,Lt.$super=this,Lt},create:function(){var Ft=this.extend();return Ft.init.apply(Ft,arguments),Ft},init:function(){},mixIn:function(Ft){for(var Lt in Ft)Ft.hasOwnProperty(Lt)&&(this[Lt]=Ft[Lt]);Ft.hasOwnProperty("toString")&&(this.toString=Ft.toString)},clone:function(){return this.init.prototype.extend(this)}},Et=St.WordArray=wt.extend({init:function(Ft,Lt){Ft=this.words=Ft||[],this.sigBytes=Lt!=mt?Lt:4*Ft.length},toString:function(Ft){return(Ft||Tt).stringify(this)},concat:function(Ft){var Lt=this.words,Mt=Ft.words,Ot=this.sigBytes,Nt=Ft.sigBytes;if(this.clamp(),Ot%4)for(var $t=0;$t<Nt;$t++){var Vt=Mt[$t>>>2]>>>24-$t%4*8&255;Lt[Ot+$t>>>2]|=Vt<<24-(Ot+$t)%4*8}else for(var Ut=0;Ut<Nt;Ut+=4)Lt[Ot+Ut>>>2]=Mt[Ut>>>2];return this.sigBytes+=Nt,this},clamp:function(){var Ft=this.words,Lt=this.sigBytes;Ft[Lt>>>2]&=4294967295<<32-Lt%4*8,Ft.length=pt.ceil(Lt/4)},clone:function(){var Ft=wt.clone.call(this);return Ft.words=this.words.slice(0),Ft},random:function(Ft){for(var Lt=[],Mt=0;Mt<Ft;Mt+=4)Lt.push(xt());return new Et.init(Lt,Ft)}}),Rt=vt.enc={},Tt=Rt.Hex={stringify:function(Ft){for(var Lt=Ft.words,Mt=Ft.sigBytes,Ot=[],Nt=0;Nt<Mt;Nt++){var $t=Lt[Nt>>>2]>>>24-Nt%4*8&255;Ot.push(($t>>>4).toString(16)),Ot.push((15&$t).toString(16))}return Ot.join("")},parse:function(Ft){for(var Lt=Ft.length,Mt=[],Ot=0;Ot<Lt;Ot+=2)Mt[Ot>>>3]|=parseInt(Ft.substr(Ot,2),16)<<24-Ot%8*4;return new Et.init(Mt,Lt/2)}},It=Rt.Latin1={stringify:function(Ft){for(var Lt=Ft.words,Mt=Ft.sigBytes,Ot=[],Nt=0;Nt<Mt;Nt++){var $t=Lt[Nt>>>2]>>>24-Nt%4*8&255;Ot.push(String.fromCharCode($t))}return Ot.join("")},parse:function(Ft){for(var Lt=Ft.length,Mt=[],Ot=0;Ot<Lt;Ot++)Mt[Ot>>>2]|=(255&Ft.charCodeAt(Ot))<<24-Ot%4*8;return new Et.init(Mt,Lt)}},At=Rt.Utf8={stringify:function(Ft){try{return decodeURIComponent(escape(It.stringify(Ft)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Ft){return It.parse(unescape(encodeURIComponent(Ft)))}},Dt=St.BufferedBlockAlgorithm=wt.extend({reset:function(){this._data=new Et.init,this._nDataBytes=0},_append:function(Ft){typeof Ft=="string"&&(Ft=At.parse(Ft)),this._data.concat(Ft),this._nDataBytes+=Ft.sigBytes},_process:function(Ft){var Lt,Mt=this._data,Ot=Mt.words,Nt=Mt.sigBytes,$t=this.blockSize,Vt=Nt/(4*$t),Ut=(Vt=Ft?pt.ceil(Vt):pt.max((0|Vt)-this._minBufferSize,0))*$t,zt=pt.min(4*Ut,Nt);if(Ut){for(var Bt=0;Bt<Ut;Bt+=$t)this._doProcessBlock(Ot,Bt);Lt=Ot.splice(0,Ut),Mt.sigBytes-=zt}return new Et.init(Lt,zt)},clone:function(){var Ft=wt.clone.call(this);return Ft._data=this._data.clone(),Ft},_minBufferSize:0}),jt=(St.Hasher=Dt.extend({cfg:wt.extend(),init:function(Ft){this.cfg=this.cfg.extend(Ft),this.reset()},reset:function(){Dt.reset.call(this),this._doReset()},update:function(Ft){return this._append(Ft),this._process(),this},finalize:function(Ft){return Ft&&this._append(Ft),this._doFinalize()},blockSize:16,_createHelper:function(Ft){return function(Lt,Mt){return new Ft.init(Mt).finalize(Lt)}},_createHmacHelper:function(Ft){return function(Lt,Mt){return new jt.HMAC.init(Ft,Mt).finalize(Lt)}}}),vt.algo={});return vt}(Math),ft)},8269:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),function(){var pt=ft,mt=pt.lib.WordArray;function gt(xt,yt,vt){for(var St=[],wt=0,Et=0;Et<yt;Et++)if(Et%4){var Rt=vt[xt.charCodeAt(Et-1)]<<Et%4*2|vt[xt.charCodeAt(Et)]>>>6-Et%4*2;St[wt>>>2]|=Rt<<24-wt%4*8,wt++}return mt.create(St,wt)}pt.enc.Base64={stringify:function(xt){var yt=xt.words,vt=xt.sigBytes,St=this._map;xt.clamp();for(var wt=[],Et=0;Et<vt;Et+=3)for(var Rt=(yt[Et>>>2]>>>24-Et%4*8&255)<<16|(yt[Et+1>>>2]>>>24-(Et+1)%4*8&255)<<8|yt[Et+2>>>2]>>>24-(Et+2)%4*8&255,Tt=0;Tt<4&&Et+.75*Tt<vt;Tt++)wt.push(St.charAt(Rt>>>6*(3-Tt)&63));var It=St.charAt(64);if(It)for(;wt.length%4;)wt.push(It);return wt.join("")},parse:function(xt){var yt=xt.length,vt=this._map,St=this._reverseMap;if(!St){St=this._reverseMap=[];for(var wt=0;wt<vt.length;wt++)St[vt.charCodeAt(wt)]=wt}var Et=vt.charAt(64);if(Et){var Rt=xt.indexOf(Et);Rt!==-1&&(yt=Rt)}return gt(xt,yt,St)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),ft.enc.Base64)},3786:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),function(){var pt=ft,mt=pt.lib.WordArray;function gt(xt,yt,vt){for(var St=[],wt=0,Et=0;Et<yt;Et++)if(Et%4){var Rt=vt[xt.charCodeAt(Et-1)]<<Et%4*2|vt[xt.charCodeAt(Et)]>>>6-Et%4*2;St[wt>>>2]|=Rt<<24-wt%4*8,wt++}return mt.create(St,wt)}pt.enc.Base64url={stringify:function(xt,yt){yt===void 0&&(yt=!0);var vt=xt.words,St=xt.sigBytes,wt=yt?this._safe_map:this._map;xt.clamp();for(var Et=[],Rt=0;Rt<St;Rt+=3)for(var Tt=(vt[Rt>>>2]>>>24-Rt%4*8&255)<<16|(vt[Rt+1>>>2]>>>24-(Rt+1)%4*8&255)<<8|vt[Rt+2>>>2]>>>24-(Rt+2)%4*8&255,It=0;It<4&&Rt+.75*It<St;It++)Et.push(wt.charAt(Tt>>>6*(3-It)&63));var At=wt.charAt(64);if(At)for(;Et.length%4;)Et.push(At);return Et.join("")},parse:function(xt,yt){yt===void 0&&(yt=!0);var vt=xt.length,St=yt?this._safe_map:this._map,wt=this._reverseMap;if(!wt){wt=this._reverseMap=[];for(var Et=0;Et<St.length;Et++)wt[St.charCodeAt(Et)]=Et}var Rt=St.charAt(64);if(Rt){var Tt=xt.indexOf(Rt);Tt!==-1&&(vt=Tt)}return gt(xt,vt,wt)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),ft.enc.Base64url)},298:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),function(){var pt=ft,mt=pt.lib.WordArray,gt=pt.enc;function xt(yt){return yt<<8&4278255360|yt>>>8&16711935}gt.Utf16=gt.Utf16BE={stringify:function(yt){for(var vt=yt.words,St=yt.sigBytes,wt=[],Et=0;Et<St;Et+=2){var Rt=vt[Et>>>2]>>>16-Et%4*8&65535;wt.push(String.fromCharCode(Rt))}return wt.join("")},parse:function(yt){for(var vt=yt.length,St=[],wt=0;wt<vt;wt++)St[wt>>>1]|=yt.charCodeAt(wt)<<16-wt%2*16;return mt.create(St,2*vt)}},gt.Utf16LE={stringify:function(yt){for(var vt=yt.words,St=yt.sigBytes,wt=[],Et=0;Et<St;Et+=2){var Rt=xt(vt[Et>>>2]>>>16-Et%4*8&65535);wt.push(String.fromCharCode(Rt))}return wt.join("")},parse:function(yt){for(var vt=yt.length,St=[],wt=0;wt<vt;wt++)St[wt>>>1]|=xt(yt.charCodeAt(wt)<<16-wt%2*16);return mt.create(St,2*vt)}}}(),ft.enc.Utf16)},888:function(ut,dt,ht){var ft,pt,mt,gt,xt,yt,vt,St;ut.exports=(St=ht(8249),ht(2783),ht(9824),pt=(ft=St).lib,mt=pt.Base,gt=pt.WordArray,xt=ft.algo,yt=xt.MD5,vt=xt.EvpKDF=mt.extend({cfg:mt.extend({keySize:4,hasher:yt,iterations:1}),init:function(wt){this.cfg=this.cfg.extend(wt)},compute:function(wt,Et){for(var Rt,Tt=this.cfg,It=Tt.hasher.create(),At=gt.create(),Dt=At.words,jt=Tt.keySize,Ft=Tt.iterations;Dt.length<jt;){Rt&&It.update(Rt),Rt=It.update(wt).finalize(Et),It.reset();for(var Lt=1;Lt<Ft;Lt++)Rt=It.finalize(Rt),It.reset();At.concat(Rt)}return At.sigBytes=4*jt,At}}),ft.EvpKDF=function(wt,Et,Rt){return vt.create(Rt).compute(wt,Et)},St.EvpKDF)},2209:function(ut,dt,ht){var ft,pt,mt,gt;ut.exports=(gt=ht(8249),ht(5109),pt=(ft=gt).lib.CipherParams,mt=ft.enc.Hex,ft.format.Hex={stringify:function(xt){return xt.ciphertext.toString(mt)},parse:function(xt){var yt=mt.parse(xt);return pt.create({ciphertext:yt})}},gt.format.Hex)},9824:function(ut,dt,ht){var ft,pt,mt,gt;ut.exports=(ft=ht(8249),mt=(pt=ft).lib.Base,gt=pt.enc.Utf8,void(pt.algo.HMAC=mt.extend({init:function(xt,yt){xt=this._hasher=new xt.init,typeof yt=="string"&&(yt=gt.parse(yt));var vt=xt.blockSize,St=4*vt;yt.sigBytes>St&&(yt=xt.finalize(yt)),yt.clamp();for(var wt=this._oKey=yt.clone(),Et=this._iKey=yt.clone(),Rt=wt.words,Tt=Et.words,It=0;It<vt;It++)Rt[It]^=1549556828,Tt[It]^=909522486;wt.sigBytes=Et.sigBytes=St,this.reset()},reset:function(){var xt=this._hasher;xt.reset(),xt.update(this._iKey)},update:function(xt){return this._hasher.update(xt),this},finalize:function(xt){var yt=this._hasher,vt=yt.finalize(xt);return yt.reset(),yt.finalize(this._oKey.clone().concat(vt))}})))},1354:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(4938),ht(4433),ht(298),ht(8269),ht(3786),ht(8214),ht(2783),ht(2153),ht(7792),ht(34),ht(7460),ht(3327),ht(706),ht(9824),ht(2112),ht(888),ht(5109),ht(8568),ht(4242),ht(9968),ht(7660),ht(1148),ht(3615),ht(2807),ht(1077),ht(6475),ht(6991),ht(2209),ht(452),ht(4253),ht(1857),ht(4454),ht(3974),ht(7407),ft)},4433:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),function(){if(typeof ArrayBuffer=="function"){var pt=ft.lib.WordArray,mt=pt.init,gt=pt.init=function(xt){if(xt instanceof ArrayBuffer&&(xt=new Uint8Array(xt)),(xt instanceof Int8Array||typeof Uint8ClampedArray<"u"&&xt instanceof Uint8ClampedArray||xt instanceof Int16Array||xt instanceof Uint16Array||xt instanceof Int32Array||xt instanceof Uint32Array||xt instanceof Float32Array||xt instanceof Float64Array)&&(xt=new Uint8Array(xt.buffer,xt.byteOffset,xt.byteLength)),xt instanceof Uint8Array){for(var yt=xt.byteLength,vt=[],St=0;St<yt;St++)vt[St>>>2]|=xt[St]<<24-St%4*8;mt.call(this,vt,yt)}else mt.apply(this,arguments)};gt.prototype=pt}}(),ft.lib.WordArray)},8214:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),function(pt){var mt=ft,gt=mt.lib,xt=gt.WordArray,yt=gt.Hasher,vt=mt.algo,St=[];(function(){for(var At=0;At<64;At++)St[At]=4294967296*pt.abs(pt.sin(At+1))|0})();var wt=vt.MD5=yt.extend({_doReset:function(){this._hash=new xt.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(At,Dt){for(var jt=0;jt<16;jt++){var Ft=Dt+jt,Lt=At[Ft];At[Ft]=16711935&(Lt<<8|Lt>>>24)|4278255360&(Lt<<24|Lt>>>8)}var Mt=this._hash.words,Ot=At[Dt+0],Nt=At[Dt+1],$t=At[Dt+2],Vt=At[Dt+3],Ut=At[Dt+4],zt=At[Dt+5],Bt=At[Dt+6],Ht=At[Dt+7],Gt=At[Dt+8],Xt=At[Dt+9],Zt=At[Dt+10],hr=At[Dt+11],nr=At[Dt+12],ir=At[Dt+13],yr=At[Dt+14],Cr=At[Dt+15],Sr=Mt[0],xr=Mt[1],gr=Mt[2],_r=Mt[3];Sr=Et(Sr,xr,gr,_r,Ot,7,St[0]),_r=Et(_r,Sr,xr,gr,Nt,12,St[1]),gr=Et(gr,_r,Sr,xr,$t,17,St[2]),xr=Et(xr,gr,_r,Sr,Vt,22,St[3]),Sr=Et(Sr,xr,gr,_r,Ut,7,St[4]),_r=Et(_r,Sr,xr,gr,zt,12,St[5]),gr=Et(gr,_r,Sr,xr,Bt,17,St[6]),xr=Et(xr,gr,_r,Sr,Ht,22,St[7]),Sr=Et(Sr,xr,gr,_r,Gt,7,St[8]),_r=Et(_r,Sr,xr,gr,Xt,12,St[9]),gr=Et(gr,_r,Sr,xr,Zt,17,St[10]),xr=Et(xr,gr,_r,Sr,hr,22,St[11]),Sr=Et(Sr,xr,gr,_r,nr,7,St[12]),_r=Et(_r,Sr,xr,gr,ir,12,St[13]),gr=Et(gr,_r,Sr,xr,yr,17,St[14]),Sr=Rt(Sr,xr=Et(xr,gr,_r,Sr,Cr,22,St[15]),gr,_r,Nt,5,St[16]),_r=Rt(_r,Sr,xr,gr,Bt,9,St[17]),gr=Rt(gr,_r,Sr,xr,hr,14,St[18]),xr=Rt(xr,gr,_r,Sr,Ot,20,St[19]),Sr=Rt(Sr,xr,gr,_r,zt,5,St[20]),_r=Rt(_r,Sr,xr,gr,Zt,9,St[21]),gr=Rt(gr,_r,Sr,xr,Cr,14,St[22]),xr=Rt(xr,gr,_r,Sr,Ut,20,St[23]),Sr=Rt(Sr,xr,gr,_r,Xt,5,St[24]),_r=Rt(_r,Sr,xr,gr,yr,9,St[25]),gr=Rt(gr,_r,Sr,xr,Vt,14,St[26]),xr=Rt(xr,gr,_r,Sr,Gt,20,St[27]),Sr=Rt(Sr,xr,gr,_r,ir,5,St[28]),_r=Rt(_r,Sr,xr,gr,$t,9,St[29]),gr=Rt(gr,_r,Sr,xr,Ht,14,St[30]),Sr=Tt(Sr,xr=Rt(xr,gr,_r,Sr,nr,20,St[31]),gr,_r,zt,4,St[32]),_r=Tt(_r,Sr,xr,gr,Gt,11,St[33]),gr=Tt(gr,_r,Sr,xr,hr,16,St[34]),xr=Tt(xr,gr,_r,Sr,yr,23,St[35]),Sr=Tt(Sr,xr,gr,_r,Nt,4,St[36]),_r=Tt(_r,Sr,xr,gr,Ut,11,St[37]),gr=Tt(gr,_r,Sr,xr,Ht,16,St[38]),xr=Tt(xr,gr,_r,Sr,Zt,23,St[39]),Sr=Tt(Sr,xr,gr,_r,ir,4,St[40]),_r=Tt(_r,Sr,xr,gr,Ot,11,St[41]),gr=Tt(gr,_r,Sr,xr,Vt,16,St[42]),xr=Tt(xr,gr,_r,Sr,Bt,23,St[43]),Sr=Tt(Sr,xr,gr,_r,Xt,4,St[44]),_r=Tt(_r,Sr,xr,gr,nr,11,St[45]),gr=Tt(gr,_r,Sr,xr,Cr,16,St[46]),Sr=It(Sr,xr=Tt(xr,gr,_r,Sr,$t,23,St[47]),gr,_r,Ot,6,St[48]),_r=It(_r,Sr,xr,gr,Ht,10,St[49]),gr=It(gr,_r,Sr,xr,yr,15,St[50]),xr=It(xr,gr,_r,Sr,zt,21,St[51]),Sr=It(Sr,xr,gr,_r,nr,6,St[52]),_r=It(_r,Sr,xr,gr,Vt,10,St[53]),gr=It(gr,_r,Sr,xr,Zt,15,St[54]),xr=It(xr,gr,_r,Sr,Nt,21,St[55]),Sr=It(Sr,xr,gr,_r,Gt,6,St[56]),_r=It(_r,Sr,xr,gr,Cr,10,St[57]),gr=It(gr,_r,Sr,xr,Bt,15,St[58]),xr=It(xr,gr,_r,Sr,ir,21,St[59]),Sr=It(Sr,xr,gr,_r,Ut,6,St[60]),_r=It(_r,Sr,xr,gr,hr,10,St[61]),gr=It(gr,_r,Sr,xr,$t,15,St[62]),xr=It(xr,gr,_r,Sr,Xt,21,St[63]),Mt[0]=Mt[0]+Sr|0,Mt[1]=Mt[1]+xr|0,Mt[2]=Mt[2]+gr|0,Mt[3]=Mt[3]+_r|0},_doFinalize:function(){var At=this._data,Dt=At.words,jt=8*this._nDataBytes,Ft=8*At.sigBytes;Dt[Ft>>>5]|=128<<24-Ft%32;var Lt=pt.floor(jt/4294967296),Mt=jt;Dt[15+(Ft+64>>>9<<4)]=16711935&(Lt<<8|Lt>>>24)|4278255360&(Lt<<24|Lt>>>8),Dt[14+(Ft+64>>>9<<4)]=16711935&(Mt<<8|Mt>>>24)|4278255360&(Mt<<24|Mt>>>8),At.sigBytes=4*(Dt.length+1),this._process();for(var Ot=this._hash,Nt=Ot.words,$t=0;$t<4;$t++){var Vt=Nt[$t];Nt[$t]=16711935&(Vt<<8|Vt>>>24)|4278255360&(Vt<<24|Vt>>>8)}return Ot},clone:function(){var At=yt.clone.call(this);return At._hash=this._hash.clone(),At}});function Et(At,Dt,jt,Ft,Lt,Mt,Ot){var Nt=At+(Dt&jt|~Dt&Ft)+Lt+Ot;return(Nt<<Mt|Nt>>>32-Mt)+Dt}function Rt(At,Dt,jt,Ft,Lt,Mt,Ot){var Nt=At+(Dt&Ft|jt&~Ft)+Lt+Ot;return(Nt<<Mt|Nt>>>32-Mt)+Dt}function Tt(At,Dt,jt,Ft,Lt,Mt,Ot){var Nt=At+(Dt^jt^Ft)+Lt+Ot;return(Nt<<Mt|Nt>>>32-Mt)+Dt}function It(At,Dt,jt,Ft,Lt,Mt,Ot){var Nt=At+(jt^(Dt|~Ft))+Lt+Ot;return(Nt<<Mt|Nt>>>32-Mt)+Dt}mt.MD5=yt._createHelper(wt),mt.HmacMD5=yt._createHmacHelper(wt)}(Math),ft.MD5)},8568:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(5109),ft.mode.CFB=function(){var pt=ft.lib.BlockCipherMode.extend();function mt(gt,xt,yt,vt){var St,wt=this._iv;wt?(St=wt.slice(0),this._iv=void 0):St=this._prevBlock,vt.encryptBlock(St,0);for(var Et=0;Et<yt;Et++)gt[xt+Et]^=St[Et]}return pt.Encryptor=pt.extend({processBlock:function(gt,xt){var yt=this._cipher,vt=yt.blockSize;mt.call(this,gt,xt,vt,yt),this._prevBlock=gt.slice(xt,xt+vt)}}),pt.Decryptor=pt.extend({processBlock:function(gt,xt){var yt=this._cipher,vt=yt.blockSize,St=gt.slice(xt,xt+vt);mt.call(this,gt,xt,vt,yt),this._prevBlock=St}}),pt}(),ft.mode.CFB)},9968:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(5109),ft.mode.CTRGladman=function(){var pt=ft.lib.BlockCipherMode.extend();function mt(yt){if((yt>>24&255)==255){var vt=yt>>16&255,St=yt>>8&255,wt=255&yt;vt===255?(vt=0,St===255?(St=0,wt===255?wt=0:++wt):++St):++vt,yt=0,yt+=vt<<16,yt+=St<<8,yt+=wt}else yt+=16777216;return yt}function gt(yt){return(yt[0]=mt(yt[0]))===0&&(yt[1]=mt(yt[1])),yt}var xt=pt.Encryptor=pt.extend({processBlock:function(yt,vt){var St=this._cipher,wt=St.blockSize,Et=this._iv,Rt=this._counter;Et&&(Rt=this._counter=Et.slice(0),this._iv=void 0),gt(Rt);var Tt=Rt.slice(0);St.encryptBlock(Tt,0);for(var It=0;It<wt;It++)yt[vt+It]^=Tt[It]}});return pt.Decryptor=xt,pt}(),ft.mode.CTRGladman)},4242:function(ut,dt,ht){var ft,pt,mt;ut.exports=(mt=ht(8249),ht(5109),mt.mode.CTR=(ft=mt.lib.BlockCipherMode.extend(),pt=ft.Encryptor=ft.extend({processBlock:function(gt,xt){var yt=this._cipher,vt=yt.blockSize,St=this._iv,wt=this._counter;St&&(wt=this._counter=St.slice(0),this._iv=void 0);var Et=wt.slice(0);yt.encryptBlock(Et,0),wt[vt-1]=wt[vt-1]+1|0;for(var Rt=0;Rt<vt;Rt++)gt[xt+Rt]^=Et[Rt]}}),ft.Decryptor=pt,ft),mt.mode.CTR)},1148:function(ut,dt,ht){var ft,pt;ut.exports=(pt=ht(8249),ht(5109),pt.mode.ECB=((ft=pt.lib.BlockCipherMode.extend()).Encryptor=ft.extend({processBlock:function(mt,gt){this._cipher.encryptBlock(mt,gt)}}),ft.Decryptor=ft.extend({processBlock:function(mt,gt){this._cipher.decryptBlock(mt,gt)}}),ft),pt.mode.ECB)},7660:function(ut,dt,ht){var ft,pt,mt;ut.exports=(mt=ht(8249),ht(5109),mt.mode.OFB=(ft=mt.lib.BlockCipherMode.extend(),pt=ft.Encryptor=ft.extend({processBlock:function(gt,xt){var yt=this._cipher,vt=yt.blockSize,St=this._iv,wt=this._keystream;St&&(wt=this._keystream=St.slice(0),this._iv=void 0),yt.encryptBlock(wt,0);for(var Et=0;Et<vt;Et++)gt[xt+Et]^=wt[Et]}}),ft.Decryptor=pt,ft),mt.mode.OFB)},3615:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(5109),ft.pad.AnsiX923={pad:function(pt,mt){var gt=pt.sigBytes,xt=4*mt,yt=xt-gt%xt,vt=gt+yt-1;pt.clamp(),pt.words[vt>>>2]|=yt<<24-vt%4*8,pt.sigBytes+=yt},unpad:function(pt){var mt=255&pt.words[pt.sigBytes-1>>>2];pt.sigBytes-=mt}},ft.pad.Ansix923)},2807:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(5109),ft.pad.Iso10126={pad:function(pt,mt){var gt=4*mt,xt=gt-pt.sigBytes%gt;pt.concat(ft.lib.WordArray.random(xt-1)).concat(ft.lib.WordArray.create([xt<<24],1))},unpad:function(pt){var mt=255&pt.words[pt.sigBytes-1>>>2];pt.sigBytes-=mt}},ft.pad.Iso10126)},1077:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(5109),ft.pad.Iso97971={pad:function(pt,mt){pt.concat(ft.lib.WordArray.create([2147483648],1)),ft.pad.ZeroPadding.pad(pt,mt)},unpad:function(pt){ft.pad.ZeroPadding.unpad(pt),pt.sigBytes--}},ft.pad.Iso97971)},6991:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(5109),ft.pad.NoPadding={pad:function(){},unpad:function(){}},ft.pad.NoPadding)},6475:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(5109),ft.pad.ZeroPadding={pad:function(pt,mt){var gt=4*mt;pt.clamp(),pt.sigBytes+=gt-(pt.sigBytes%gt||gt)},unpad:function(pt){var mt=pt.words,gt=pt.sigBytes-1;for(gt=pt.sigBytes-1;gt>=0;gt--)if(mt[gt>>>2]>>>24-gt%4*8&255){pt.sigBytes=gt+1;break}}},ft.pad.ZeroPadding)},2112:function(ut,dt,ht){var ft,pt,mt,gt,xt,yt,vt,St,wt;ut.exports=(wt=ht(8249),ht(2153),ht(9824),pt=(ft=wt).lib,mt=pt.Base,gt=pt.WordArray,xt=ft.algo,yt=xt.SHA256,vt=xt.HMAC,St=xt.PBKDF2=mt.extend({cfg:mt.extend({keySize:4,hasher:yt,iterations:25e4}),init:function(Et){this.cfg=this.cfg.extend(Et)},compute:function(Et,Rt){for(var Tt=this.cfg,It=vt.create(Tt.hasher,Et),At=gt.create(),Dt=gt.create([1]),jt=At.words,Ft=Dt.words,Lt=Tt.keySize,Mt=Tt.iterations;jt.length<Lt;){var Ot=It.update(Rt).finalize(Dt);It.reset();for(var Nt=Ot.words,$t=Nt.length,Vt=Ot,Ut=1;Ut<Mt;Ut++){Vt=It.finalize(Vt),It.reset();for(var zt=Vt.words,Bt=0;Bt<$t;Bt++)Nt[Bt]^=zt[Bt]}At.concat(Ot),Ft[0]++}return At.sigBytes=4*Lt,At}}),ft.PBKDF2=function(Et,Rt,Tt){return St.create(Tt).compute(Et,Rt)},wt.PBKDF2)},3974:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(8269),ht(8214),ht(888),ht(5109),function(){var pt=ft,mt=pt.lib.StreamCipher,gt=pt.algo,xt=[],yt=[],vt=[],St=gt.RabbitLegacy=mt.extend({_doReset:function(){var Et=this._key.words,Rt=this.cfg.iv,Tt=this._X=[Et[0],Et[3]<<16|Et[2]>>>16,Et[1],Et[0]<<16|Et[3]>>>16,Et[2],Et[1]<<16|Et[0]>>>16,Et[3],Et[2]<<16|Et[1]>>>16],It=this._C=[Et[2]<<16|Et[2]>>>16,4294901760&Et[0]|65535&Et[1],Et[3]<<16|Et[3]>>>16,4294901760&Et[1]|65535&Et[2],Et[0]<<16|Et[0]>>>16,4294901760&Et[2]|65535&Et[3],Et[1]<<16|Et[1]>>>16,4294901760&Et[3]|65535&Et[0]];this._b=0;for(var At=0;At<4;At++)wt.call(this);for(At=0;At<8;At++)It[At]^=Tt[At+4&7];if(Rt){var Dt=Rt.words,jt=Dt[0],Ft=Dt[1],Lt=16711935&(jt<<8|jt>>>24)|4278255360&(jt<<24|jt>>>8),Mt=16711935&(Ft<<8|Ft>>>24)|4278255360&(Ft<<24|Ft>>>8),Ot=Lt>>>16|4294901760&Mt,Nt=Mt<<16|65535&Lt;for(It[0]^=Lt,It[1]^=Ot,It[2]^=Mt,It[3]^=Nt,It[4]^=Lt,It[5]^=Ot,It[6]^=Mt,It[7]^=Nt,At=0;At<4;At++)wt.call(this)}},_doProcessBlock:function(Et,Rt){var Tt=this._X;wt.call(this),xt[0]=Tt[0]^Tt[5]>>>16^Tt[3]<<16,xt[1]=Tt[2]^Tt[7]>>>16^Tt[5]<<16,xt[2]=Tt[4]^Tt[1]>>>16^Tt[7]<<16,xt[3]=Tt[6]^Tt[3]>>>16^Tt[1]<<16;for(var It=0;It<4;It++)xt[It]=16711935&(xt[It]<<8|xt[It]>>>24)|4278255360&(xt[It]<<24|xt[It]>>>8),Et[Rt+It]^=xt[It]},blockSize:4,ivSize:2});function wt(){for(var Et=this._X,Rt=this._C,Tt=0;Tt<8;Tt++)yt[Tt]=Rt[Tt];for(Rt[0]=Rt[0]+1295307597+this._b|0,Rt[1]=Rt[1]+3545052371+(Rt[0]>>>0<yt[0]>>>0?1:0)|0,Rt[2]=Rt[2]+886263092+(Rt[1]>>>0<yt[1]>>>0?1:0)|0,Rt[3]=Rt[3]+1295307597+(Rt[2]>>>0<yt[2]>>>0?1:0)|0,Rt[4]=Rt[4]+3545052371+(Rt[3]>>>0<yt[3]>>>0?1:0)|0,Rt[5]=Rt[5]+886263092+(Rt[4]>>>0<yt[4]>>>0?1:0)|0,Rt[6]=Rt[6]+1295307597+(Rt[5]>>>0<yt[5]>>>0?1:0)|0,Rt[7]=Rt[7]+3545052371+(Rt[6]>>>0<yt[6]>>>0?1:0)|0,this._b=Rt[7]>>>0<yt[7]>>>0?1:0,Tt=0;Tt<8;Tt++){var It=Et[Tt]+Rt[Tt],At=65535&It,Dt=It>>>16,jt=((At*At>>>17)+At*Dt>>>15)+Dt*Dt,Ft=((4294901760&It)*It|0)+((65535&It)*It|0);vt[Tt]=jt^Ft}Et[0]=vt[0]+(vt[7]<<16|vt[7]>>>16)+(vt[6]<<16|vt[6]>>>16)|0,Et[1]=vt[1]+(vt[0]<<8|vt[0]>>>24)+vt[7]|0,Et[2]=vt[2]+(vt[1]<<16|vt[1]>>>16)+(vt[0]<<16|vt[0]>>>16)|0,Et[3]=vt[3]+(vt[2]<<8|vt[2]>>>24)+vt[1]|0,Et[4]=vt[4]+(vt[3]<<16|vt[3]>>>16)+(vt[2]<<16|vt[2]>>>16)|0,Et[5]=vt[5]+(vt[4]<<8|vt[4]>>>24)+vt[3]|0,Et[6]=vt[6]+(vt[5]<<16|vt[5]>>>16)+(vt[4]<<16|vt[4]>>>16)|0,Et[7]=vt[7]+(vt[6]<<8|vt[6]>>>24)+vt[5]|0}pt.RabbitLegacy=mt._createHelper(St)}(),ft.RabbitLegacy)},4454:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(8269),ht(8214),ht(888),ht(5109),function(){var pt=ft,mt=pt.lib.StreamCipher,gt=pt.algo,xt=[],yt=[],vt=[],St=gt.Rabbit=mt.extend({_doReset:function(){for(var Et=this._key.words,Rt=this.cfg.iv,Tt=0;Tt<4;Tt++)Et[Tt]=16711935&(Et[Tt]<<8|Et[Tt]>>>24)|4278255360&(Et[Tt]<<24|Et[Tt]>>>8);var It=this._X=[Et[0],Et[3]<<16|Et[2]>>>16,Et[1],Et[0]<<16|Et[3]>>>16,Et[2],Et[1]<<16|Et[0]>>>16,Et[3],Et[2]<<16|Et[1]>>>16],At=this._C=[Et[2]<<16|Et[2]>>>16,4294901760&Et[0]|65535&Et[1],Et[3]<<16|Et[3]>>>16,4294901760&Et[1]|65535&Et[2],Et[0]<<16|Et[0]>>>16,4294901760&Et[2]|65535&Et[3],Et[1]<<16|Et[1]>>>16,4294901760&Et[3]|65535&Et[0]];for(this._b=0,Tt=0;Tt<4;Tt++)wt.call(this);for(Tt=0;Tt<8;Tt++)At[Tt]^=It[Tt+4&7];if(Rt){var Dt=Rt.words,jt=Dt[0],Ft=Dt[1],Lt=16711935&(jt<<8|jt>>>24)|4278255360&(jt<<24|jt>>>8),Mt=16711935&(Ft<<8|Ft>>>24)|4278255360&(Ft<<24|Ft>>>8),Ot=Lt>>>16|4294901760&Mt,Nt=Mt<<16|65535&Lt;for(At[0]^=Lt,At[1]^=Ot,At[2]^=Mt,At[3]^=Nt,At[4]^=Lt,At[5]^=Ot,At[6]^=Mt,At[7]^=Nt,Tt=0;Tt<4;Tt++)wt.call(this)}},_doProcessBlock:function(Et,Rt){var Tt=this._X;wt.call(this),xt[0]=Tt[0]^Tt[5]>>>16^Tt[3]<<16,xt[1]=Tt[2]^Tt[7]>>>16^Tt[5]<<16,xt[2]=Tt[4]^Tt[1]>>>16^Tt[7]<<16,xt[3]=Tt[6]^Tt[3]>>>16^Tt[1]<<16;for(var It=0;It<4;It++)xt[It]=16711935&(xt[It]<<8|xt[It]>>>24)|4278255360&(xt[It]<<24|xt[It]>>>8),Et[Rt+It]^=xt[It]},blockSize:4,ivSize:2});function wt(){for(var Et=this._X,Rt=this._C,Tt=0;Tt<8;Tt++)yt[Tt]=Rt[Tt];for(Rt[0]=Rt[0]+1295307597+this._b|0,Rt[1]=Rt[1]+3545052371+(Rt[0]>>>0<yt[0]>>>0?1:0)|0,Rt[2]=Rt[2]+886263092+(Rt[1]>>>0<yt[1]>>>0?1:0)|0,Rt[3]=Rt[3]+1295307597+(Rt[2]>>>0<yt[2]>>>0?1:0)|0,Rt[4]=Rt[4]+3545052371+(Rt[3]>>>0<yt[3]>>>0?1:0)|0,Rt[5]=Rt[5]+886263092+(Rt[4]>>>0<yt[4]>>>0?1:0)|0,Rt[6]=Rt[6]+1295307597+(Rt[5]>>>0<yt[5]>>>0?1:0)|0,Rt[7]=Rt[7]+3545052371+(Rt[6]>>>0<yt[6]>>>0?1:0)|0,this._b=Rt[7]>>>0<yt[7]>>>0?1:0,Tt=0;Tt<8;Tt++){var It=Et[Tt]+Rt[Tt],At=65535&It,Dt=It>>>16,jt=((At*At>>>17)+At*Dt>>>15)+Dt*Dt,Ft=((4294901760&It)*It|0)+((65535&It)*It|0);vt[Tt]=jt^Ft}Et[0]=vt[0]+(vt[7]<<16|vt[7]>>>16)+(vt[6]<<16|vt[6]>>>16)|0,Et[1]=vt[1]+(vt[0]<<8|vt[0]>>>24)+vt[7]|0,Et[2]=vt[2]+(vt[1]<<16|vt[1]>>>16)+(vt[0]<<16|vt[0]>>>16)|0,Et[3]=vt[3]+(vt[2]<<8|vt[2]>>>24)+vt[1]|0,Et[4]=vt[4]+(vt[3]<<16|vt[3]>>>16)+(vt[2]<<16|vt[2]>>>16)|0,Et[5]=vt[5]+(vt[4]<<8|vt[4]>>>24)+vt[3]|0,Et[6]=vt[6]+(vt[5]<<16|vt[5]>>>16)+(vt[4]<<16|vt[4]>>>16)|0,Et[7]=vt[7]+(vt[6]<<8|vt[6]>>>24)+vt[5]|0}pt.Rabbit=mt._createHelper(St)}(),ft.Rabbit)},1857:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(8269),ht(8214),ht(888),ht(5109),function(){var pt=ft,mt=pt.lib.StreamCipher,gt=pt.algo,xt=gt.RC4=mt.extend({_doReset:function(){for(var St=this._key,wt=St.words,Et=St.sigBytes,Rt=this._S=[],Tt=0;Tt<256;Tt++)Rt[Tt]=Tt;Tt=0;for(var It=0;Tt<256;Tt++){var At=Tt%Et,Dt=wt[At>>>2]>>>24-At%4*8&255;It=(It+Rt[Tt]+Dt)%256;var jt=Rt[Tt];Rt[Tt]=Rt[It],Rt[It]=jt}this._i=this._j=0},_doProcessBlock:function(St,wt){St[wt]^=yt.call(this)},keySize:8,ivSize:0});function yt(){for(var St=this._S,wt=this._i,Et=this._j,Rt=0,Tt=0;Tt<4;Tt++){Et=(Et+St[wt=(wt+1)%256])%256;var It=St[wt];St[wt]=St[Et],St[Et]=It,Rt|=St[(St[wt]+St[Et])%256]<<24-8*Tt}return this._i=wt,this._j=Et,Rt}pt.RC4=mt._createHelper(xt);var vt=gt.RC4Drop=xt.extend({cfg:xt.cfg.extend({drop:192}),_doReset:function(){xt._doReset.call(this);for(var St=this.cfg.drop;St>0;St--)yt.call(this)}});pt.RC4Drop=mt._createHelper(vt)}(),ft.RC4)},706:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),function(pt){var mt=ft,gt=mt.lib,xt=gt.WordArray,yt=gt.Hasher,vt=mt.algo,St=xt.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),wt=xt.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),Et=xt.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),Rt=xt.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),Tt=xt.create([0,1518500249,1859775393,2400959708,2840853838]),It=xt.create([1352829926,1548603684,1836072691,2053994217,0]),At=vt.RIPEMD160=yt.extend({_doReset:function(){this._hash=xt.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(Nt,$t){for(var Vt=0;Vt<16;Vt++){var Ut=$t+Vt,zt=Nt[Ut];Nt[Ut]=16711935&(zt<<8|zt>>>24)|4278255360&(zt<<24|zt>>>8)}var Bt,Ht,Gt,Xt,Zt,hr,nr,ir,yr,Cr,Sr,xr=this._hash.words,gr=Tt.words,_r=It.words,fr=St.words,Nr=wt.words,Tr=Et.words,Hr=Rt.words;for(hr=Bt=xr[0],nr=Ht=xr[1],ir=Gt=xr[2],yr=Xt=xr[3],Cr=Zt=xr[4],Vt=0;Vt<80;Vt+=1)Sr=Bt+Nt[$t+fr[Vt]]|0,Sr+=Vt<16?Dt(Ht,Gt,Xt)+gr[0]:Vt<32?jt(Ht,Gt,Xt)+gr[1]:Vt<48?Ft(Ht,Gt,Xt)+gr[2]:Vt<64?Lt(Ht,Gt,Xt)+gr[3]:Mt(Ht,Gt,Xt)+gr[4],Sr=(Sr=Ot(Sr|=0,Tr[Vt]))+Zt|0,Bt=Zt,Zt=Xt,Xt=Ot(Gt,10),Gt=Ht,Ht=Sr,Sr=hr+Nt[$t+Nr[Vt]]|0,Sr+=Vt<16?Mt(nr,ir,yr)+_r[0]:Vt<32?Lt(nr,ir,yr)+_r[1]:Vt<48?Ft(nr,ir,yr)+_r[2]:Vt<64?jt(nr,ir,yr)+_r[3]:Dt(nr,ir,yr)+_r[4],Sr=(Sr=Ot(Sr|=0,Hr[Vt]))+Cr|0,hr=Cr,Cr=yr,yr=Ot(ir,10),ir=nr,nr=Sr;Sr=xr[1]+Gt+yr|0,xr[1]=xr[2]+Xt+Cr|0,xr[2]=xr[3]+Zt+hr|0,xr[3]=xr[4]+Bt+nr|0,xr[4]=xr[0]+Ht+ir|0,xr[0]=Sr},_doFinalize:function(){var Nt=this._data,$t=Nt.words,Vt=8*this._nDataBytes,Ut=8*Nt.sigBytes;$t[Ut>>>5]|=128<<24-Ut%32,$t[14+(Ut+64>>>9<<4)]=16711935&(Vt<<8|Vt>>>24)|4278255360&(Vt<<24|Vt>>>8),Nt.sigBytes=4*($t.length+1),this._process();for(var zt=this._hash,Bt=zt.words,Ht=0;Ht<5;Ht++){var Gt=Bt[Ht];Bt[Ht]=16711935&(Gt<<8|Gt>>>24)|4278255360&(Gt<<24|Gt>>>8)}return zt},clone:function(){var Nt=yt.clone.call(this);return Nt._hash=this._hash.clone(),Nt}});function Dt(Nt,$t,Vt){return Nt^$t^Vt}function jt(Nt,$t,Vt){return Nt&$t|~Nt&Vt}function Ft(Nt,$t,Vt){return(Nt|~$t)^Vt}function Lt(Nt,$t,Vt){return Nt&Vt|$t&~Vt}function Mt(Nt,$t,Vt){return Nt^($t|~Vt)}function Ot(Nt,$t){return Nt<<$t|Nt>>>32-$t}mt.RIPEMD160=yt._createHelper(At),mt.HmacRIPEMD160=yt._createHmacHelper(At)}(),ft.RIPEMD160)},2783:function(ut,dt,ht){var ft,pt,mt,gt,xt,yt,vt,St;ut.exports=(St=ht(8249),pt=(ft=St).lib,mt=pt.WordArray,gt=pt.Hasher,xt=ft.algo,yt=[],vt=xt.SHA1=gt.extend({_doReset:function(){this._hash=new mt.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(wt,Et){for(var Rt=this._hash.words,Tt=Rt[0],It=Rt[1],At=Rt[2],Dt=Rt[3],jt=Rt[4],Ft=0;Ft<80;Ft++){if(Ft<16)yt[Ft]=0|wt[Et+Ft];else{var Lt=yt[Ft-3]^yt[Ft-8]^yt[Ft-14]^yt[Ft-16];yt[Ft]=Lt<<1|Lt>>>31}var Mt=(Tt<<5|Tt>>>27)+jt+yt[Ft];Mt+=Ft<20?1518500249+(It&At|~It&Dt):Ft<40?1859775393+(It^At^Dt):Ft<60?(It&At|It&Dt|At&Dt)-1894007588:(It^At^Dt)-899497514,jt=Dt,Dt=At,At=It<<30|It>>>2,It=Tt,Tt=Mt}Rt[0]=Rt[0]+Tt|0,Rt[1]=Rt[1]+It|0,Rt[2]=Rt[2]+At|0,Rt[3]=Rt[3]+Dt|0,Rt[4]=Rt[4]+jt|0},_doFinalize:function(){var wt=this._data,Et=wt.words,Rt=8*this._nDataBytes,Tt=8*wt.sigBytes;return Et[Tt>>>5]|=128<<24-Tt%32,Et[14+(Tt+64>>>9<<4)]=Math.floor(Rt/4294967296),Et[15+(Tt+64>>>9<<4)]=Rt,wt.sigBytes=4*Et.length,this._process(),this._hash},clone:function(){var wt=gt.clone.call(this);return wt._hash=this._hash.clone(),wt}}),ft.SHA1=gt._createHelper(vt),ft.HmacSHA1=gt._createHmacHelper(vt),St.SHA1)},7792:function(ut,dt,ht){var ft,pt,mt,gt,xt,yt;ut.exports=(yt=ht(8249),ht(2153),pt=(ft=yt).lib.WordArray,mt=ft.algo,gt=mt.SHA256,xt=mt.SHA224=gt.extend({_doReset:function(){this._hash=new pt.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var vt=gt._doFinalize.call(this);return vt.sigBytes-=4,vt}}),ft.SHA224=gt._createHelper(xt),ft.HmacSHA224=gt._createHmacHelper(xt),yt.SHA224)},2153:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),function(pt){var mt=ft,gt=mt.lib,xt=gt.WordArray,yt=gt.Hasher,vt=mt.algo,St=[],wt=[];(function(){function Tt(jt){for(var Ft=pt.sqrt(jt),Lt=2;Lt<=Ft;Lt++)if(!(jt%Lt))return!1;return!0}function It(jt){return 4294967296*(jt-(0|jt))|0}for(var At=2,Dt=0;Dt<64;)Tt(At)&&(Dt<8&&(St[Dt]=It(pt.pow(At,.5))),wt[Dt]=It(pt.pow(At,.3333333333333333)),Dt++),At++})();var Et=[],Rt=vt.SHA256=yt.extend({_doReset:function(){this._hash=new xt.init(St.slice(0))},_doProcessBlock:function(Tt,It){for(var At=this._hash.words,Dt=At[0],jt=At[1],Ft=At[2],Lt=At[3],Mt=At[4],Ot=At[5],Nt=At[6],$t=At[7],Vt=0;Vt<64;Vt++){if(Vt<16)Et[Vt]=0|Tt[It+Vt];else{var Ut=Et[Vt-15],zt=(Ut<<25|Ut>>>7)^(Ut<<14|Ut>>>18)^Ut>>>3,Bt=Et[Vt-2],Ht=(Bt<<15|Bt>>>17)^(Bt<<13|Bt>>>19)^Bt>>>10;Et[Vt]=zt+Et[Vt-7]+Ht+Et[Vt-16]}var Gt=Dt&jt^Dt&Ft^jt&Ft,Xt=(Dt<<30|Dt>>>2)^(Dt<<19|Dt>>>13)^(Dt<<10|Dt>>>22),Zt=$t+((Mt<<26|Mt>>>6)^(Mt<<21|Mt>>>11)^(Mt<<7|Mt>>>25))+(Mt&Ot^~Mt&Nt)+wt[Vt]+Et[Vt];$t=Nt,Nt=Ot,Ot=Mt,Mt=Lt+Zt|0,Lt=Ft,Ft=jt,jt=Dt,Dt=Zt+(Xt+Gt)|0}At[0]=At[0]+Dt|0,At[1]=At[1]+jt|0,At[2]=At[2]+Ft|0,At[3]=At[3]+Lt|0,At[4]=At[4]+Mt|0,At[5]=At[5]+Ot|0,At[6]=At[6]+Nt|0,At[7]=At[7]+$t|0},_doFinalize:function(){var Tt=this._data,It=Tt.words,At=8*this._nDataBytes,Dt=8*Tt.sigBytes;return It[Dt>>>5]|=128<<24-Dt%32,It[14+(Dt+64>>>9<<4)]=pt.floor(At/4294967296),It[15+(Dt+64>>>9<<4)]=At,Tt.sigBytes=4*It.length,this._process(),this._hash},clone:function(){var Tt=yt.clone.call(this);return Tt._hash=this._hash.clone(),Tt}});mt.SHA256=yt._createHelper(Rt),mt.HmacSHA256=yt._createHmacHelper(Rt)}(Math),ft.SHA256)},3327:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(4938),function(pt){var mt=ft,gt=mt.lib,xt=gt.WordArray,yt=gt.Hasher,vt=mt.x64.Word,St=mt.algo,wt=[],Et=[],Rt=[];(function(){for(var At=1,Dt=0,jt=0;jt<24;jt++){wt[At+5*Dt]=(jt+1)*(jt+2)/2%64;var Ft=(2*At+3*Dt)%5;At=Dt%5,Dt=Ft}for(At=0;At<5;At++)for(Dt=0;Dt<5;Dt++)Et[At+5*Dt]=Dt+(2*At+3*Dt)%5*5;for(var Lt=1,Mt=0;Mt<24;Mt++){for(var Ot=0,Nt=0,$t=0;$t<7;$t++){if(1&Lt){var Vt=(1<<$t)-1;Vt<32?Nt^=1<<Vt:Ot^=1<<Vt-32}128&Lt?Lt=Lt<<1^113:Lt<<=1}Rt[Mt]=vt.create(Ot,Nt)}})();var Tt=[];(function(){for(var At=0;At<25;At++)Tt[At]=vt.create()})();var It=St.SHA3=yt.extend({cfg:yt.cfg.extend({outputLength:512}),_doReset:function(){for(var At=this._state=[],Dt=0;Dt<25;Dt++)At[Dt]=new vt.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(At,Dt){for(var jt=this._state,Ft=this.blockSize/2,Lt=0;Lt<Ft;Lt++){var Mt=At[Dt+2*Lt],Ot=At[Dt+2*Lt+1];Mt=16711935&(Mt<<8|Mt>>>24)|4278255360&(Mt<<24|Mt>>>8),Ot=16711935&(Ot<<8|Ot>>>24)|4278255360&(Ot<<24|Ot>>>8),(gr=jt[Lt]).high^=Ot,gr.low^=Mt}for(var Nt=0;Nt<24;Nt++){for(var $t=0;$t<5;$t++){for(var Vt=0,Ut=0,zt=0;zt<5;zt++)Vt^=(gr=jt[$t+5*zt]).high,Ut^=gr.low;var Bt=Tt[$t];Bt.high=Vt,Bt.low=Ut}for($t=0;$t<5;$t++){var Ht=Tt[($t+4)%5],Gt=Tt[($t+1)%5],Xt=Gt.high,Zt=Gt.low;for(Vt=Ht.high^(Xt<<1|Zt>>>31),Ut=Ht.low^(Zt<<1|Xt>>>31),zt=0;zt<5;zt++)(gr=jt[$t+5*zt]).high^=Vt,gr.low^=Ut}for(var hr=1;hr<25;hr++){var nr=(gr=jt[hr]).high,ir=gr.low,yr=wt[hr];yr<32?(Vt=nr<<yr|ir>>>32-yr,Ut=ir<<yr|nr>>>32-yr):(Vt=ir<<yr-32|nr>>>64-yr,Ut=nr<<yr-32|ir>>>64-yr);var Cr=Tt[Et[hr]];Cr.high=Vt,Cr.low=Ut}var Sr=Tt[0],xr=jt[0];for(Sr.high=xr.high,Sr.low=xr.low,$t=0;$t<5;$t++)for(zt=0;zt<5;zt++){var gr=jt[hr=$t+5*zt],_r=Tt[hr],fr=Tt[($t+1)%5+5*zt],Nr=Tt[($t+2)%5+5*zt];gr.high=_r.high^~fr.high&Nr.high,gr.low=_r.low^~fr.low&Nr.low}gr=jt[0];var Tr=Rt[Nt];gr.high^=Tr.high,gr.low^=Tr.low}},_doFinalize:function(){var At=this._data,Dt=At.words,jt=(this._nDataBytes,8*At.sigBytes),Ft=32*this.blockSize;Dt[jt>>>5]|=1<<24-jt%32,Dt[(pt.ceil((jt+1)/Ft)*Ft>>>5)-1]|=128,At.sigBytes=4*Dt.length,this._process();for(var Lt=this._state,Mt=this.cfg.outputLength/8,Ot=Mt/8,Nt=[],$t=0;$t<Ot;$t++){var Vt=Lt[$t],Ut=Vt.high,zt=Vt.low;Ut=16711935&(Ut<<8|Ut>>>24)|4278255360&(Ut<<24|Ut>>>8),zt=16711935&(zt<<8|zt>>>24)|4278255360&(zt<<24|zt>>>8),Nt.push(zt),Nt.push(Ut)}return new xt.init(Nt,Mt)},clone:function(){for(var At=yt.clone.call(this),Dt=At._state=this._state.slice(0),jt=0;jt<25;jt++)Dt[jt]=Dt[jt].clone();return At}});mt.SHA3=yt._createHelper(It),mt.HmacSHA3=yt._createHmacHelper(It)}(Math),ft.SHA3)},7460:function(ut,dt,ht){var ft,pt,mt,gt,xt,yt,vt,St;ut.exports=(St=ht(8249),ht(4938),ht(34),pt=(ft=St).x64,mt=pt.Word,gt=pt.WordArray,xt=ft.algo,yt=xt.SHA512,vt=xt.SHA384=yt.extend({_doReset:function(){this._hash=new gt.init([new mt.init(3418070365,3238371032),new mt.init(1654270250,914150663),new mt.init(2438529370,812702999),new mt.init(355462360,4144912697),new mt.init(1731405415,4290775857),new mt.init(2394180231,1750603025),new mt.init(3675008525,1694076839),new mt.init(1203062813,3204075428)])},_doFinalize:function(){var wt=yt._doFinalize.call(this);return wt.sigBytes-=16,wt}}),ft.SHA384=yt._createHelper(vt),ft.HmacSHA384=yt._createHmacHelper(vt),St.SHA384)},34:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(4938),function(){var pt=ft,mt=pt.lib.Hasher,gt=pt.x64,xt=gt.Word,yt=gt.WordArray,vt=pt.algo;function St(){return xt.create.apply(xt,arguments)}var wt=[St(1116352408,3609767458),St(1899447441,602891725),St(3049323471,3964484399),St(3921009573,2173295548),St(961987163,4081628472),St(1508970993,3053834265),St(2453635748,2937671579),St(2870763221,3664609560),St(3624381080,2734883394),St(310598401,1164996542),St(607225278,1323610764),St(1426881987,3590304994),St(1925078388,4068182383),St(2162078206,991336113),St(2614888103,633803317),St(3248222580,3479774868),St(3835390401,2666613458),St(4022224774,944711139),St(264347078,2341262773),St(604807628,2007800933),St(770255983,1495990901),St(1249150122,1856431235),St(1555081692,3175218132),St(1996064986,2198950837),St(2554220882,3999719339),St(2821834349,766784016),St(2952996808,2566594879),St(3210313671,3203337956),St(3336571891,1034457026),St(3584528711,2466948901),St(113926993,3758326383),St(338241895,168717936),St(666307205,1188179964),St(773529912,1546045734),St(1294757372,1522805485),St(1396182291,2643833823),St(1695183700,2343527390),St(1986661051,1014477480),St(2177026350,1206759142),St(2456956037,344077627),St(2730485921,1290863460),St(2820302411,3158454273),St(3259730800,3505952657),St(3345764771,106217008),St(3516065817,3606008344),St(3600352804,1432725776),St(4094571909,1467031594),St(275423344,851169720),St(430227734,3100823752),St(506948616,1363258195),St(659060556,3750685593),St(883997877,3785050280),St(958139571,3318307427),St(1322822218,3812723403),St(1537002063,2003034995),St(1747873779,3602036899),St(1955562222,1575990012),St(2024104815,1125592928),St(2227730452,2716904306),St(2361852424,442776044),St(2428436474,593698344),St(2756734187,3733110249),St(3204031479,2999351573),St(3329325298,3815920427),St(3391569614,3928383900),St(3515267271,566280711),St(3940187606,3454069534),St(4118630271,4000239992),St(116418474,1914138554),St(174292421,2731055270),St(289380356,3203993006),St(460393269,320620315),St(685471733,587496836),St(852142971,1086792851),St(1017036298,365543100),St(1126000580,2618297676),St(1288033470,3409855158),St(1501505948,4234509866),St(1607167915,987167468),St(1816402316,1246189591)],Et=[];(function(){for(var Tt=0;Tt<80;Tt++)Et[Tt]=St()})();var Rt=vt.SHA512=mt.extend({_doReset:function(){this._hash=new yt.init([new xt.init(1779033703,4089235720),new xt.init(3144134277,2227873595),new xt.init(1013904242,4271175723),new xt.init(2773480762,1595750129),new xt.init(1359893119,2917565137),new xt.init(2600822924,725511199),new xt.init(528734635,4215389547),new xt.init(1541459225,327033209)])},_doProcessBlock:function(Tt,It){for(var At=this._hash.words,Dt=At[0],jt=At[1],Ft=At[2],Lt=At[3],Mt=At[4],Ot=At[5],Nt=At[6],$t=At[7],Vt=Dt.high,Ut=Dt.low,zt=jt.high,Bt=jt.low,Ht=Ft.high,Gt=Ft.low,Xt=Lt.high,Zt=Lt.low,hr=Mt.high,nr=Mt.low,ir=Ot.high,yr=Ot.low,Cr=Nt.high,Sr=Nt.low,xr=$t.high,gr=$t.low,_r=Vt,fr=Ut,Nr=zt,Tr=Bt,Hr=Ht,Vr=Gt,mn=Xt,tn=Zt,er=hr,tr=nr,vr=ir,Fr=yr,Kr=Cr,qr=Sr,pn=xr,En=gr,Rn=0;Rn<80;Rn++){var Qn,Ln,ln=Et[Rn];if(Rn<16)Ln=ln.high=0|Tt[It+2*Rn],Qn=ln.low=0|Tt[It+2*Rn+1];else{var Xn=Et[Rn-15],Yr=Xn.high,Qr=Xn.low,Mn=(Yr>>>1|Qr<<31)^(Yr>>>8|Qr<<24)^Yr>>>7,Ar=(Qr>>>1|Yr<<31)^(Qr>>>8|Yr<<24)^(Qr>>>7|Yr<<25),or=Et[Rn-2],Wr=or.high,Ir=or.low,dn=(Wr>>>19|Ir<<13)^(Wr<<3|Ir>>>29)^Wr>>>6,kn=(Ir>>>19|Wr<<13)^(Ir<<3|Wr>>>29)^(Ir>>>6|Wr<<26),Mr=Et[Rn-7],vn=Mr.high,kr=Mr.low,Er=Et[Rn-16],Ur=Er.high,on=Er.low;Ln=(Ln=(Ln=Mn+vn+((Qn=Ar+kr)>>>0<Ar>>>0?1:0))+dn+((Qn+=kn)>>>0<kn>>>0?1:0))+Ur+((Qn+=on)>>>0<on>>>0?1:0),ln.high=Ln,ln.low=Qn}var fn,Kn=er&vr^~er&Kr,es=tr&Fr^~tr&qr,Zn=_r&Nr^_r&Hr^Nr&Hr,Dn=fr&Tr^fr&Vr^Tr&Vr,ss=(_r>>>28|fr<<4)^(_r<<30|fr>>>2)^(_r<<25|fr>>>7),$s=(fr>>>28|_r<<4)^(fr<<30|_r>>>2)^(fr<<25|_r>>>7),ws=(er>>>14|tr<<18)^(er>>>18|tr<<14)^(er<<23|tr>>>9),As=(tr>>>14|er<<18)^(tr>>>18|er<<14)^(tr<<23|er>>>9),Vs=wt[Rn],Fo=Vs.high,Lo=Vs.low,Ho=pn+ws+((fn=En+As)>>>0<En>>>0?1:0),Bo=$s+Dn;pn=Kr,En=qr,Kr=vr,qr=Fr,vr=er,Fr=tr,er=mn+(Ho=(Ho=(Ho=Ho+Kn+((fn+=es)>>>0<es>>>0?1:0))+Fo+((fn+=Lo)>>>0<Lo>>>0?1:0))+Ln+((fn+=Qn)>>>0<Qn>>>0?1:0))+((tr=tn+fn|0)>>>0<tn>>>0?1:0)|0,mn=Hr,tn=Vr,Hr=Nr,Vr=Tr,Nr=_r,Tr=fr,_r=Ho+(ss+Zn+(Bo>>>0<$s>>>0?1:0))+((fr=fn+Bo|0)>>>0<fn>>>0?1:0)|0}Ut=Dt.low=Ut+fr,Dt.high=Vt+_r+(Ut>>>0<fr>>>0?1:0),Bt=jt.low=Bt+Tr,jt.high=zt+Nr+(Bt>>>0<Tr>>>0?1:0),Gt=Ft.low=Gt+Vr,Ft.high=Ht+Hr+(Gt>>>0<Vr>>>0?1:0),Zt=Lt.low=Zt+tn,Lt.high=Xt+mn+(Zt>>>0<tn>>>0?1:0),nr=Mt.low=nr+tr,Mt.high=hr+er+(nr>>>0<tr>>>0?1:0),yr=Ot.low=yr+Fr,Ot.high=ir+vr+(yr>>>0<Fr>>>0?1:0),Sr=Nt.low=Sr+qr,Nt.high=Cr+Kr+(Sr>>>0<qr>>>0?1:0),gr=$t.low=gr+En,$t.high=xr+pn+(gr>>>0<En>>>0?1:0)},_doFinalize:function(){var Tt=this._data,It=Tt.words,At=8*this._nDataBytes,Dt=8*Tt.sigBytes;return It[Dt>>>5]|=128<<24-Dt%32,It[30+(Dt+128>>>10<<5)]=Math.floor(At/4294967296),It[31+(Dt+128>>>10<<5)]=At,Tt.sigBytes=4*It.length,this._process(),this._hash.toX32()},clone:function(){var Tt=mt.clone.call(this);return Tt._hash=this._hash.clone(),Tt},blockSize:32});pt.SHA512=mt._createHelper(Rt),pt.HmacSHA512=mt._createHmacHelper(Rt)}(),ft.SHA512)},4253:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),ht(8269),ht(8214),ht(888),ht(5109),function(){var pt=ft,mt=pt.lib,gt=mt.WordArray,xt=mt.BlockCipher,yt=pt.algo,vt=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],St=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],wt=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],Et=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],Rt=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],Tt=yt.DES=xt.extend({_doReset:function(){for(var jt=this._key.words,Ft=[],Lt=0;Lt<56;Lt++){var Mt=vt[Lt]-1;Ft[Lt]=jt[Mt>>>5]>>>31-Mt%32&1}for(var Ot=this._subKeys=[],Nt=0;Nt<16;Nt++){var $t=Ot[Nt]=[],Vt=wt[Nt];for(Lt=0;Lt<24;Lt++)$t[Lt/6|0]|=Ft[(St[Lt]-1+Vt)%28]<<31-Lt%6,$t[4+(Lt/6|0)]|=Ft[28+(St[Lt+24]-1+Vt)%28]<<31-Lt%6;for($t[0]=$t[0]<<1|$t[0]>>>31,Lt=1;Lt<7;Lt++)$t[Lt]=$t[Lt]>>>4*(Lt-1)+3;$t[7]=$t[7]<<5|$t[7]>>>27}var Ut=this._invSubKeys=[];for(Lt=0;Lt<16;Lt++)Ut[Lt]=Ot[15-Lt]},encryptBlock:function(jt,Ft){this._doCryptBlock(jt,Ft,this._subKeys)},decryptBlock:function(jt,Ft){this._doCryptBlock(jt,Ft,this._invSubKeys)},_doCryptBlock:function(jt,Ft,Lt){this._lBlock=jt[Ft],this._rBlock=jt[Ft+1],It.call(this,4,252645135),It.call(this,16,65535),At.call(this,2,858993459),At.call(this,8,16711935),It.call(this,1,1431655765);for(var Mt=0;Mt<16;Mt++){for(var Ot=Lt[Mt],Nt=this._lBlock,$t=this._rBlock,Vt=0,Ut=0;Ut<8;Ut++)Vt|=Et[Ut][(($t^Ot[Ut])&Rt[Ut])>>>0];this._lBlock=$t,this._rBlock=Nt^Vt}var zt=this._lBlock;this._lBlock=this._rBlock,this._rBlock=zt,It.call(this,1,1431655765),At.call(this,8,16711935),At.call(this,2,858993459),It.call(this,16,65535),It.call(this,4,252645135),jt[Ft]=this._lBlock,jt[Ft+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function It(jt,Ft){var Lt=(this._lBlock>>>jt^this._rBlock)&Ft;this._rBlock^=Lt,this._lBlock^=Lt<<jt}function At(jt,Ft){var Lt=(this._rBlock>>>jt^this._lBlock)&Ft;this._lBlock^=Lt,this._rBlock^=Lt<<jt}pt.DES=xt._createHelper(Tt);var Dt=yt.TripleDES=xt.extend({_doReset:function(){var jt=this._key.words;if(jt.length!==2&&jt.length!==4&&jt.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var Ft=jt.slice(0,2),Lt=jt.length<4?jt.slice(0,2):jt.slice(2,4),Mt=jt.length<6?jt.slice(0,2):jt.slice(4,6);this._des1=Tt.createEncryptor(gt.create(Ft)),this._des2=Tt.createEncryptor(gt.create(Lt)),this._des3=Tt.createEncryptor(gt.create(Mt))},encryptBlock:function(jt,Ft){this._des1.encryptBlock(jt,Ft),this._des2.decryptBlock(jt,Ft),this._des3.encryptBlock(jt,Ft)},decryptBlock:function(jt,Ft){this._des3.decryptBlock(jt,Ft),this._des2.encryptBlock(jt,Ft),this._des1.decryptBlock(jt,Ft)},keySize:6,ivSize:2,blockSize:2});pt.TripleDES=xt._createHelper(Dt)}(),ft.TripleDES)},4938:function(ut,dt,ht){var ft;ut.exports=(ft=ht(8249),function(pt){var mt=ft,gt=mt.lib,xt=gt.Base,yt=gt.WordArray,vt=mt.x64={};vt.Word=xt.extend({init:function(St,wt){this.high=St,this.low=wt}}),vt.WordArray=xt.extend({init:function(St,wt){St=this.words=St||[],this.sigBytes=wt!=pt?wt:8*St.length},toX32:function(){for(var St=this.words,wt=St.length,Et=[],Rt=0;Rt<wt;Rt++){var Tt=St[Rt];Et.push(Tt.high),Et.push(Tt.low)}return yt.create(Et,this.sigBytes)},clone:function(){for(var St=xt.clone.call(this),wt=St.words=this.words.slice(0),Et=wt.length,Rt=0;Rt<Et;Rt++)wt[Rt]=wt[Rt].clone();return St}})}(),ft)},1227:(ut,dt,ht)=>{dt.formatArgs=function(pt){if(pt[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+pt[0]+(this.useColors?"%c ":" ")+"+"+ut.exports.humanize(this.diff),!this.useColors)return;const mt="color: "+this.color;pt.splice(1,0,mt,"color: inherit");let gt=0,xt=0;pt[0].replace(/%[a-zA-Z%]/g,yt=>{yt!=="%%"&&(gt++,yt==="%c"&&(xt=gt))}),pt.splice(xt,0,mt)},dt.save=function(pt){try{pt?dt.storage.setItem("debug",pt):dt.storage.removeItem("debug")}catch{}},dt.load=function(){let pt;try{pt=dt.storage.getItem("debug")}catch{}return!pt&&typeof process<"u"&&"env"in process&&(pt=it.DEBUG),pt},dt.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},dt.storage=function(){try{return localStorage}catch{}}(),dt.destroy=(()=>{let pt=!1;return()=>{pt||(pt=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),dt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],dt.log=console.debug||console.log||(()=>{}),ut.exports=ht(2447)(dt);const{formatters:ft}=ut.exports;ft.j=function(pt){try{return JSON.stringify(pt)}catch(mt){return"[UnexpectedJSONParseError]: "+mt.message}}},2447:(ut,dt,ht)=>{ut.exports=function(ft){function pt(xt){let yt,vt,St,wt=null;function Et(...Rt){if(!Et.enabled)return;const Tt=Et,It=Number(new Date),At=It-(yt||It);Tt.diff=At,Tt.prev=yt,Tt.curr=It,yt=It,Rt[0]=pt.coerce(Rt[0]),typeof Rt[0]!="string"&&Rt.unshift("%O");let Dt=0;Rt[0]=Rt[0].replace(/%([a-zA-Z%])/g,(jt,Ft)=>{if(jt==="%%")return"%";Dt++;const Lt=pt.formatters[Ft];if(typeof Lt=="function"){const Mt=Rt[Dt];jt=Lt.call(Tt,Mt),Rt.splice(Dt,1),Dt--}return jt}),pt.formatArgs.call(Tt,Rt),(Tt.log||pt.log).apply(Tt,Rt)}return Et.namespace=xt,Et.useColors=pt.useColors(),Et.color=pt.selectColor(xt),Et.extend=mt,Et.destroy=pt.destroy,Object.defineProperty(Et,"enabled",{enumerable:!0,configurable:!1,get:()=>wt!==null?wt:(vt!==pt.namespaces&&(vt=pt.namespaces,St=pt.enabled(xt)),St),set:Rt=>{wt=Rt}}),typeof pt.init=="function"&&pt.init(Et),Et}function mt(xt,yt){const vt=pt(this.namespace+(yt===void 0?":":yt)+xt);return vt.log=this.log,vt}function gt(xt){return xt.toString().substring(2,xt.toString().length-2).replace(/\.\*\?$/,"*")}return pt.debug=pt,pt.default=pt,pt.coerce=function(xt){return xt instanceof Error?xt.stack||xt.message:xt},pt.disable=function(){const xt=[...pt.names.map(gt),...pt.skips.map(gt).map(yt=>"-"+yt)].join(",");return pt.enable(""),xt},pt.enable=function(xt){let yt;pt.save(xt),pt.namespaces=xt,pt.names=[],pt.skips=[];const vt=(typeof xt=="string"?xt:"").split(/[\s,]+/),St=vt.length;for(yt=0;yt<St;yt++)vt[yt]&&((xt=vt[yt].replace(/\*/g,".*?"))[0]==="-"?pt.skips.push(new RegExp("^"+xt.slice(1)+"$")):pt.names.push(new RegExp("^"+xt+"$")))},pt.enabled=function(xt){if(xt[xt.length-1]==="*")return!0;let yt,vt;for(yt=0,vt=pt.skips.length;yt<vt;yt++)if(pt.skips[yt].test(xt))return!1;for(yt=0,vt=pt.names.length;yt<vt;yt++)if(pt.names[yt].test(xt))return!0;return!1},pt.humanize=ht(7824),pt.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(ft).forEach(xt=>{pt[xt]=ft[xt]}),pt.names=[],pt.skips=[],pt.formatters={},pt.selectColor=function(xt){let yt=0;for(let vt=0;vt<xt.length;vt++)yt=(yt<<5)-yt+xt.charCodeAt(vt),yt|=0;return pt.colors[Math.abs(yt)%pt.colors.length]},pt.enable(pt.load()),pt}},284:ut=>{var dt=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};ut.exports=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return dt()}try{return __global__||dt()}finally{delete Object.prototype.__global__}}()},7187:ut=>{var dt,ht=typeof Reflect=="object"?Reflect:null,ft=ht&&typeof ht.apply=="function"?ht.apply:function(At,Dt,jt){return Function.prototype.apply.call(At,Dt,jt)};dt=ht&&typeof ht.ownKeys=="function"?ht.ownKeys:Object.getOwnPropertySymbols?function(At){return Object.getOwnPropertyNames(At).concat(Object.getOwnPropertySymbols(At))}:function(At){return Object.getOwnPropertyNames(At)};var pt=Number.isNaN||function(At){return At!=At};function mt(){mt.init.call(this)}ut.exports=mt,ut.exports.once=function(At,Dt){return new Promise(function(jt,Ft){function Lt(Ot){At.removeListener(Dt,Mt),Ft(Ot)}function Mt(){typeof At.removeListener=="function"&&At.removeListener("error",Lt),jt([].slice.call(arguments))}It(At,Dt,Mt,{once:!0}),Dt!=="error"&&function(Ot,Nt,$t){typeof Ot.on=="function"&&It(Ot,"error",Nt,$t)}(At,Lt,{once:!0})})},mt.EventEmitter=mt,mt.prototype._events=void 0,mt.prototype._eventsCount=0,mt.prototype._maxListeners=void 0;var gt=10;function xt(At){if(typeof At!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof At)}function yt(At){return At._maxListeners===void 0?mt.defaultMaxListeners:At._maxListeners}function vt(At,Dt,jt,Ft){var Lt,Mt,Ot,Nt;if(xt(jt),(Mt=At._events)===void 0?(Mt=At._events=Object.create(null),At._eventsCount=0):(Mt.newListener!==void 0&&(At.emit("newListener",Dt,jt.listener?jt.listener:jt),Mt=At._events),Ot=Mt[Dt]),Ot===void 0)Ot=Mt[Dt]=jt,++At._eventsCount;else if(typeof Ot=="function"?Ot=Mt[Dt]=Ft?[jt,Ot]:[Ot,jt]:Ft?Ot.unshift(jt):Ot.push(jt),(Lt=yt(At))>0&&Ot.length>Lt&&!Ot.warned){Ot.warned=!0;var $t=new Error("Possible EventEmitter memory leak detected. "+Ot.length+" "+String(Dt)+" listeners added. Use emitter.setMaxListeners() to increase limit");$t.name="MaxListenersExceededWarning",$t.emitter=At,$t.type=Dt,$t.count=Ot.length,Nt=$t,console&&console.warn&&console.warn(Nt)}return At}function St(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function wt(At,Dt,jt){var Ft={fired:!1,wrapFn:void 0,target:At,type:Dt,listener:jt},Lt=St.bind(Ft);return Lt.listener=jt,Ft.wrapFn=Lt,Lt}function Et(At,Dt,jt){var Ft=At._events;if(Ft===void 0)return[];var Lt=Ft[Dt];return Lt===void 0?[]:typeof Lt=="function"?jt?[Lt.listener||Lt]:[Lt]:jt?function(Mt){for(var Ot=new Array(Mt.length),Nt=0;Nt<Ot.length;++Nt)Ot[Nt]=Mt[Nt].listener||Mt[Nt];return Ot}(Lt):Tt(Lt,Lt.length)}function Rt(At){var Dt=this._events;if(Dt!==void 0){var jt=Dt[At];if(typeof jt=="function")return 1;if(jt!==void 0)return jt.length}return 0}function Tt(At,Dt){for(var jt=new Array(Dt),Ft=0;Ft<Dt;++Ft)jt[Ft]=At[Ft];return jt}function It(At,Dt,jt,Ft){if(typeof At.on=="function")Ft.once?At.once(Dt,jt):At.on(Dt,jt);else{if(typeof At.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof At);At.addEventListener(Dt,function Lt(Mt){Ft.once&&At.removeEventListener(Dt,Lt),jt(Mt)})}}Object.defineProperty(mt,"defaultMaxListeners",{enumerable:!0,get:function(){return gt},set:function(At){if(typeof At!="number"||At<0||pt(At))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+At+".");gt=At}}),mt.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},mt.prototype.setMaxListeners=function(At){if(typeof At!="number"||At<0||pt(At))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+At+".");return this._maxListeners=At,this},mt.prototype.getMaxListeners=function(){return yt(this)},mt.prototype.emit=function(At){for(var Dt=[],jt=1;jt<arguments.length;jt++)Dt.push(arguments[jt]);var Ft=At==="error",Lt=this._events;if(Lt!==void 0)Ft=Ft&&Lt.error===void 0;else if(!Ft)return!1;if(Ft){var Mt;if(Dt.length>0&&(Mt=Dt[0]),Mt instanceof Error)throw Mt;var Ot=new Error("Unhandled error."+(Mt?" ("+Mt.message+")":""));throw Ot.context=Mt,Ot}var Nt=Lt[At];if(Nt===void 0)return!1;if(typeof Nt=="function")ft(Nt,this,Dt);else{var $t=Nt.length,Vt=Tt(Nt,$t);for(jt=0;jt<$t;++jt)ft(Vt[jt],this,Dt)}return!0},mt.prototype.addListener=function(At,Dt){return vt(this,At,Dt,!1)},mt.prototype.on=mt.prototype.addListener,mt.prototype.prependListener=function(At,Dt){return vt(this,At,Dt,!0)},mt.prototype.once=function(At,Dt){return xt(Dt),this.on(At,wt(this,At,Dt)),this},mt.prototype.prependOnceListener=function(At,Dt){return xt(Dt),this.prependListener(At,wt(this,At,Dt)),this},mt.prototype.removeListener=function(At,Dt){var jt,Ft,Lt,Mt,Ot;if(xt(Dt),(Ft=this._events)===void 0)return this;if((jt=Ft[At])===void 0)return this;if(jt===Dt||jt.listener===Dt)--this._eventsCount==0?this._events=Object.create(null):(delete Ft[At],Ft.removeListener&&this.emit("removeListener",At,jt.listener||Dt));else if(typeof jt!="function"){for(Lt=-1,Mt=jt.length-1;Mt>=0;Mt--)if(jt[Mt]===Dt||jt[Mt].listener===Dt){Ot=jt[Mt].listener,Lt=Mt;break}if(Lt<0)return this;Lt===0?jt.shift():function(Nt,$t){for(;$t+1<Nt.length;$t++)Nt[$t]=Nt[$t+1];Nt.pop()}(jt,Lt),jt.length===1&&(Ft[At]=jt[0]),Ft.removeListener!==void 0&&this.emit("removeListener",At,Ot||Dt)}return this},mt.prototype.off=mt.prototype.removeListener,mt.prototype.removeAllListeners=function(At){var Dt,jt,Ft;if((jt=this._events)===void 0)return this;if(jt.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):jt[At]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete jt[At]),this;if(arguments.length===0){var Lt,Mt=Object.keys(jt);for(Ft=0;Ft<Mt.length;++Ft)(Lt=Mt[Ft])!=="removeListener"&&this.removeAllListeners(Lt);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(Dt=jt[At])=="function")this.removeListener(At,Dt);else if(Dt!==void 0)for(Ft=Dt.length-1;Ft>=0;Ft--)this.removeListener(At,Dt[Ft]);return this},mt.prototype.listeners=function(At){return Et(this,At,!0)},mt.prototype.rawListeners=function(At){return Et(this,At,!1)},mt.listenerCount=function(At,Dt){return typeof At.listenerCount=="function"?At.listenerCount(Dt):Rt.call(At,Dt)},mt.prototype.listenerCount=Rt,mt.prototype.eventNames=function(){return this._eventsCount>0?dt(this._events):[]}},7764:function(ut,dt,ht){var ft=this&&this.__importDefault||function(gt){return gt&&gt.__esModule?gt:{default:gt}};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Logger=void 0;const pt=ft(ht(1227)),mt="h264-profile-level-id";dt.Logger=class{constructor(gt){gt?(this._debug=(0,pt.default)(`${mt}:${gt}`),this._warn=(0,pt.default)(`${mt}:WARN:${gt}`),this._error=(0,pt.default)(`${mt}:ERROR:${gt}`)):(this._debug=(0,pt.default)(mt),this._warn=(0,pt.default)(`${mt}:WARN`),this._error=(0,pt.default)(`${mt}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},4115:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.generateProfileLevelIdStringForAnswer=dt.isSameProfile=dt.parseSdpProfileLevelId=dt.levelToString=dt.profileToString=dt.profileLevelIdToString=dt.parseProfileLevelId=dt.ProfileLevelId=dt.Level=dt.Profile=void 0;const ft=new(ht(7764)).Logger;var pt,mt;(function(At){At[At.ConstrainedBaseline=1]="ConstrainedBaseline",At[At.Baseline=2]="Baseline",At[At.Main=3]="Main",At[At.ConstrainedHigh=4]="ConstrainedHigh",At[At.High=5]="High",At[At.PredictiveHigh444=6]="PredictiveHigh444"})(pt||(dt.Profile=pt={})),function(At){At[At.L1_b=0]="L1_b",At[At.L1=10]="L1",At[At.L1_1=11]="L1_1",At[At.L1_2=12]="L1_2",At[At.L1_3=13]="L1_3",At[At.L2=20]="L2",At[At.L2_1=21]="L2_1",At[At.L2_2=22]="L2_2",At[At.L3=30]="L3",At[At.L3_1=31]="L3_1",At[At.L3_2=32]="L3_2",At[At.L4=40]="L4",At[At.L4_1=41]="L4_1",At[At.L4_2=42]="L4_2",At[At.L5=50]="L5",At[At.L5_1=51]="L5_1",At[At.L5_2=52]="L5_2"}(mt||(dt.Level=mt={}));class gt{constructor(Dt,jt){this.profile=Dt,this.level=jt}}dt.ProfileLevelId=gt;const xt=new gt(pt.ConstrainedBaseline,mt.L3_1);class yt{constructor(Dt){this.mask=~Tt("x",Dt),this.masked_value=Tt("1",Dt)}isMatch(Dt){return this.masked_value===(Dt&this.mask)}}class vt{constructor(Dt,jt,Ft){this.profile_idc=Dt,this.profile_iop=jt,this.profile=Ft}}const St=[new vt(66,new yt("x1xx0000"),pt.ConstrainedBaseline),new vt(77,new yt("1xxx0000"),pt.ConstrainedBaseline),new vt(88,new yt("11xx0000"),pt.ConstrainedBaseline),new vt(66,new yt("x0xx0000"),pt.Baseline),new vt(88,new yt("10xx0000"),pt.Baseline),new vt(77,new yt("0x0x0000"),pt.Main),new vt(100,new yt("00000000"),pt.High),new vt(100,new yt("00001100"),pt.ConstrainedHigh),new vt(244,new yt("00000000"),pt.PredictiveHigh444)];function wt(At){if(typeof At!="string"||At.length!==6)return;const Dt=parseInt(At,16);if(Dt===0)return;const jt=255&Dt,Ft=Dt>>8&255,Lt=Dt>>16&255;let Mt;switch(jt){case mt.L1_1:Mt=16&Ft?mt.L1_b:mt.L1_1;break;case mt.L1:case mt.L1_2:case mt.L1_3:case mt.L2:case mt.L2_1:case mt.L2_2:case mt.L3:case mt.L3_1:case mt.L3_2:case mt.L4:case mt.L4_1:case mt.L4_2:case mt.L5:case mt.L5_1:case mt.L5_2:Mt=jt;break;default:return void ft.warn(`parseProfileLevelId() | unrecognized level_idc [str:${At}, level_idc:${jt}]`)}for(const Ot of St)if(Lt===Ot.profile_idc&&Ot.profile_iop.isMatch(Ft))return new gt(Ot.profile,Mt);ft.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${At}, profile_idc:${Lt}, profile_iop:${Ft}]`)}function Et(At){if(At.level==mt.L1_b)switch(At.profile){case pt.ConstrainedBaseline:return"42f00b";case pt.Baseline:return"42100b";case pt.Main:return"4d100b";default:return void ft.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${At.profile}`)}let Dt;switch(At.profile){case pt.ConstrainedBaseline:Dt="42e0";break;case pt.Baseline:Dt="4200";break;case pt.Main:Dt="4d00";break;case pt.ConstrainedHigh:Dt="640c";break;case pt.High:Dt="6400";break;case pt.PredictiveHigh444:Dt="f400";break;default:return void ft.warn(`profileLevelIdToString() | unrecognized profile ${At.profile}`)}let jt=At.level.toString(16);return jt.length===1&&(jt=`0${jt}`),`${Dt}${jt}`}function Rt(At={}){const Dt=At["profile-level-id"];return Dt?wt(Dt):xt}function Tt(At,Dt){return+(Dt[0]===At)<<7|+(Dt[1]===At)<<6|+(Dt[2]===At)<<5|+(Dt[3]===At)<<4|+(Dt[4]===At)<<3|+(Dt[5]===At)<<2|+(Dt[6]===At)<<1|+(Dt[7]===At)<<0}function It(At={}){const Dt=At["level-asymmetry-allowed"];return Dt===!0||Dt===1||Dt==="1"}dt.parseProfileLevelId=wt,dt.profileLevelIdToString=Et,dt.profileToString=function(At){switch(At){case pt.ConstrainedBaseline:return"ConstrainedBaseline";case pt.Baseline:return"Baseline";case pt.Main:return"Main";case pt.ConstrainedHigh:return"ConstrainedHigh";case pt.High:return"High";case pt.PredictiveHigh444:return"PredictiveHigh444";default:return void ft.warn(`profileToString() | unrecognized profile ${At}`)}},dt.levelToString=function(At){switch(At){case mt.L1_b:return"1b";case mt.L1:return"1";case mt.L1_1:return"1.1";case mt.L1_2:return"1.2";case mt.L1_3:return"1.3";case mt.L2:return"2";case mt.L2_1:return"2.1";case mt.L2_2:return"2.2";case mt.L3:return"3";case mt.L3_1:return"3.1";case mt.L3_2:return"3.2";case mt.L4:return"4";case mt.L4_1:return"4.1";case mt.L4_2:return"4.2";case mt.L5:return"5";case mt.L5_1:return"5.1";case mt.L5_2:return"5.2";default:return void ft.warn(`levelToString() | unrecognized level ${At}`)}},dt.parseSdpProfileLevelId=Rt,dt.isSameProfile=function(At={},Dt={}){const jt=Rt(At),Ft=Rt(Dt);return!!(jt&&Ft&&jt.profile===Ft.profile)},dt.generateProfileLevelIdStringForAnswer=function(At={},Dt={}){if(!At["profile-level-id"]&&!Dt["profile-level-id"])return void ft.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");const jt=Rt(At),Ft=Rt(Dt);if(!jt)throw new TypeError("invalid local_profile_level_id");if(!Ft)throw new TypeError("invalid remote_profile_level_id");if(jt.profile!==Ft.profile)throw new TypeError("H264 Profile mismatch");const Lt=It(At)&&It(Dt),Mt=jt.level,Ot=Ft.level,Nt=function(zt,Bt){return zt===mt.L1_b?Bt!==mt.L1&&Bt!==mt.L1_b:Bt===mt.L1_b?zt!==mt.L1:zt<Bt}($t=Mt,Vt=Ot)?$t:Vt;var $t,Vt;const Ut=Lt?Mt:Nt;return ft.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${jt.profile}, level:${Ut}]`),Et(new gt(jt.profile,Ut))}},4301:(ut,dt,ht)=>{ht(7147),ut.exports=self.fetch.bind(self)},6808:(ut,dt,ht)=>{var ft,pt;(function(mt){(pt=typeof(ft=mt)=="function"?ft.call(dt,ht,dt,ut):ft)===void 0||(ut.exports=pt),ut.exports=mt()})(function(){function mt(){for(var xt=0,yt={};xt<arguments.length;xt++){var vt=arguments[xt];for(var St in vt)yt[St]=vt[St]}return yt}function gt(xt){return xt.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function xt(yt){function vt(){}function St(Et,Rt,Tt){if(typeof document<"u"){typeof(Tt=mt({path:"/"},vt.defaults,Tt)).expires=="number"&&(Tt.expires=new Date(1*new Date+864e5*Tt.expires)),Tt.expires=Tt.expires?Tt.expires.toUTCString():"";try{var It=JSON.stringify(Rt);/^[\{\[]/.test(It)&&(Rt=It)}catch{}Rt=yt.write?yt.write(Rt,Et):encodeURIComponent(String(Rt)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),Et=encodeURIComponent(String(Et)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var At="";for(var Dt in Tt)Tt[Dt]&&(At+="; "+Dt,Tt[Dt]!==!0&&(At+="="+Tt[Dt].split(";")[0]));return document.cookie=Et+"="+Rt+At}}function wt(Et,Rt){if(typeof document<"u"){for(var Tt={},It=document.cookie?document.cookie.split("; "):[],At=0;At<It.length;At++){var Dt=It[At].split("="),jt=Dt.slice(1).join("=");Rt||jt.charAt(0)!=='"'||(jt=jt.slice(1,-1));try{var Ft=gt(Dt[0]);if(jt=(yt.read||yt)(jt,Ft)||gt(jt),Rt)try{jt=JSON.parse(jt)}catch{}if(Tt[Ft]=jt,Et===Ft)break}catch{}}return Et?Tt[Et]:Tt}}return vt.set=St,vt.get=function(Et){return wt(Et,!1)},vt.getJSON=function(Et){return wt(Et,!0)},vt.remove=function(Et,Rt){St(Et,"",mt(Rt,{expires:-1}))},vt.defaults={},vt.withConverter=xt,vt}(function(){})})},773:(ut,dt,ht)=>{var ft="__lodash_hash_undefined__",pt="[object Function]",mt="[object GeneratorFunction]",gt=/^\[object .+?Constructor\]$/,xt=typeof ht.g=="object"&&ht.g&&ht.g.Object===Object&&ht.g,yt=typeof self=="object"&&self&&self.Object===Object&&self,vt=xt||yt||Function("return this")(),St,wt=Array.prototype,Et=Function.prototype,Rt=Object.prototype,Tt=vt["__core-js_shared__"],It=(St=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||""))?"Symbol(src)_1."+St:"",At=Et.toString,Dt=Rt.hasOwnProperty,jt=Rt.toString,Ft=RegExp("^"+At.call(Dt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lt=wt.splice,Mt=Ht(vt,"Map"),Ot=Ht(Object,"create");function Nt(Zt){var hr=-1,nr=Zt?Zt.length:0;for(this.clear();++hr<nr;){var ir=Zt[hr];this.set(ir[0],ir[1])}}function $t(Zt){var hr=-1,nr=Zt?Zt.length:0;for(this.clear();++hr<nr;){var ir=Zt[hr];this.set(ir[0],ir[1])}}function Vt(Zt){var hr=-1,nr=Zt?Zt.length:0;for(this.clear();++hr<nr;){var ir=Zt[hr];this.set(ir[0],ir[1])}}function Ut(Zt,hr){for(var nr,ir,yr=Zt.length;yr--;)if((nr=Zt[yr][0])===(ir=hr)||nr!=nr&&ir!=ir)return yr;return-1}function zt(Zt){if(!Xt(Zt)||(hr=Zt,It&&It in hr))return!1;var hr,nr=function(ir){var yr=Xt(ir)?jt.call(ir):"";return yr==pt||yr==mt}(Zt)||function(ir){var yr=!1;if(ir!=null&&typeof ir.toString!="function")try{yr=!!(ir+"")}catch{}return yr}(Zt)?Ft:gt;return nr.test(function(ir){if(ir!=null){try{return At.call(ir)}catch{}try{return ir+""}catch{}}return""}(Zt))}function Bt(Zt,hr){var nr,ir,yr=Zt.__data__;return((ir=typeof(nr=hr))=="string"||ir=="number"||ir=="symbol"||ir=="boolean"?nr!=="__proto__":nr===null)?yr[typeof hr=="string"?"string":"hash"]:yr.map}function Ht(Zt,hr){var nr=function(ir,yr){return ir==null?void 0:ir[yr]}(Zt,hr);return zt(nr)?nr:void 0}function Gt(Zt,hr){if(typeof Zt!="function"||hr&&typeof hr!="function")throw new TypeError("Expected a function");var nr=function(){var ir=arguments,yr=hr?hr.apply(this,ir):ir[0],Cr=nr.cache;if(Cr.has(yr))return Cr.get(yr);var Sr=Zt.apply(this,ir);return nr.cache=Cr.set(yr,Sr),Sr};return nr.cache=new(Gt.Cache||Vt),nr}function Xt(Zt){var hr=typeof Zt;return!!Zt&&(hr=="object"||hr=="function")}Nt.prototype.clear=function(){this.__data__=Ot?Ot(null):{}},Nt.prototype.delete=function(Zt){return this.has(Zt)&&delete this.__data__[Zt]},Nt.prototype.get=function(Zt){var hr=this.__data__;if(Ot){var nr=hr[Zt];return nr===ft?void 0:nr}return Dt.call(hr,Zt)?hr[Zt]:void 0},Nt.prototype.has=function(Zt){var hr=this.__data__;return Ot?hr[Zt]!==void 0:Dt.call(hr,Zt)},Nt.prototype.set=function(Zt,hr){return this.__data__[Zt]=Ot&&hr===void 0?ft:hr,this},$t.prototype.clear=function(){this.__data__=[]},$t.prototype.delete=function(Zt){var hr=this.__data__,nr=Ut(hr,Zt);return!(nr<0)&&(nr==hr.length-1?hr.pop():Lt.call(hr,nr,1),!0)},$t.prototype.get=function(Zt){var hr=this.__data__,nr=Ut(hr,Zt);return nr<0?void 0:hr[nr][1]},$t.prototype.has=function(Zt){return Ut(this.__data__,Zt)>-1},$t.prototype.set=function(Zt,hr){var nr=this.__data__,ir=Ut(nr,Zt);return ir<0?nr.push([Zt,hr]):nr[ir][1]=hr,this},Vt.prototype.clear=function(){this.__data__={hash:new Nt,map:new(Mt||$t),string:new Nt}},Vt.prototype.delete=function(Zt){return Bt(this,Zt).delete(Zt)},Vt.prototype.get=function(Zt){return Bt(this,Zt).get(Zt)},Vt.prototype.has=function(Zt){return Bt(this,Zt).has(Zt)},Vt.prototype.set=function(Zt,hr){return Bt(this,Zt).set(Zt,hr),this},Gt.Cache=Vt,ut.exports=Gt},9514:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.Consumer=void 0;const ft=ht(8562),pt=ht(4493),mt=ht(9992),gt=new ft.Logger("Consumer");class xt extends pt.EnhancedEventEmitter{constructor({id:vt,localId:St,producerId:wt,rtpReceiver:Et,track:Rt,rtpParameters:Tt,appData:It}){super(),this._closed=!1,this._observer=new pt.EnhancedEventEmitter,gt.debug("constructor()"),this._id=vt,this._localId=St,this._producerId=wt,this._rtpReceiver=Et,this._track=Rt,this._rtpParameters=Tt,this._paused=!Rt.enabled,this._appData=It||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(vt){this._appData=vt}get observer(){return this._observer}close(){this._closed||(gt.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(gt.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new mt.InvalidStateError("closed");return new Promise((vt,St)=>{this.safeEmit("@getstats",vt,St)})}pause(){gt.debug("pause()"),this._closed?gt.error("pause() | Consumer closed"):this._paused?gt.debug("pause() | Consumer is already paused"):(this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause"))}resume(){gt.debug("resume()"),this._closed?gt.error("resume() | Consumer closed"):this._paused?(this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")):gt.debug("resume() | Consumer is already resumed")}onTrackEnded(){gt.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}dt.Consumer=xt},1623:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.DataConsumer=void 0;const ft=ht(8562),pt=ht(4493),mt=new ft.Logger("DataConsumer");class gt extends pt.EnhancedEventEmitter{constructor({id:yt,dataProducerId:vt,dataChannel:St,sctpStreamParameters:wt,appData:Et}){super(),this._closed=!1,this._observer=new pt.EnhancedEventEmitter,mt.debug("constructor()"),this._id=yt,this._dataProducerId=vt,this._dataChannel=St,this._sctpStreamParameters=wt,this._appData=Et||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(yt){this._dataChannel.binaryType=yt}get appData(){return this._appData}set appData(yt){this._appData=yt}get observer(){return this._observer}close(){this._closed||(mt.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(mt.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(mt.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",yt=>{if(this._closed)return;let{error:vt}=yt;vt||(vt=new Error("unknown DataChannel error")),vt.errorDetail==="sctp-failure"?mt.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",vt.sctpCauseCode,vt.message):mt.error('DataChannel "error" event: %o',vt),this.safeEmit("error",vt)}),this._dataChannel.addEventListener("close",()=>{this._closed||(mt.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",yt=>{this._closed||this.safeEmit("message",yt.data)})}}dt.DataConsumer=gt},5504:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.DataProducer=void 0;const ft=ht(8562),pt=ht(4493),mt=ht(9992),gt=new ft.Logger("DataProducer");class xt extends pt.EnhancedEventEmitter{constructor({id:vt,dataChannel:St,sctpStreamParameters:wt,appData:Et}){super(),this._closed=!1,this._observer=new pt.EnhancedEventEmitter,gt.debug("constructor()"),this._id=vt,this._dataChannel=St,this._sctpStreamParameters=wt,this._appData=Et||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(vt){this._dataChannel.bufferedAmountLowThreshold=vt}get appData(){return this._appData}set appData(vt){this._appData=vt}get observer(){return this._observer}close(){this._closed||(gt.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(gt.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(vt){if(gt.debug("send()"),this._closed)throw new mt.InvalidStateError("closed");this._dataChannel.send(vt)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(gt.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",vt=>{if(this._closed)return;let{error:St}=vt;St||(St=new Error("unknown DataChannel error")),St.errorDetail==="sctp-failure"?gt.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",St.sctpCauseCode,St.message):gt.error('DataChannel "error" event: %o',St),this.safeEmit("error",St)}),this._dataChannel.addEventListener("close",()=>{this._closed||(gt.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||gt.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}dt.DataProducer=xt},3120:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(Ut,zt,Bt,Ht){Ht===void 0&&(Ht=Bt);var Gt=Object.getOwnPropertyDescriptor(zt,Bt);Gt&&!("get"in Gt?!zt.__esModule:Gt.writable||Gt.configurable)||(Gt={enumerable:!0,get:function(){return zt[Bt]}}),Object.defineProperty(Ut,Ht,Gt)}:function(Ut,zt,Bt,Ht){Ht===void 0&&(Ht=Bt),Ut[Ht]=zt[Bt]}),pt=this&&this.__setModuleDefault||(Object.create?function(Ut,zt){Object.defineProperty(Ut,"default",{enumerable:!0,value:zt})}:function(Ut,zt){Ut.default=zt}),mt=this&&this.__importStar||function(Ut){if(Ut&&Ut.__esModule)return Ut;var zt={};if(Ut!=null)for(var Bt in Ut)Bt!=="default"&&Object.prototype.hasOwnProperty.call(Ut,Bt)&&ft(zt,Ut,Bt);return pt(zt,Ut),zt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Device=dt.detectDevice=void 0;const gt=ht(2238),xt=ht(8562),yt=ht(4493),vt=ht(9992),St=mt(ht(3347)),wt=mt(ht(5280)),Et=ht(5202),Rt=ht(2960),Tt=ht(6656),It=ht(5372),At=ht(5697),Dt=ht(564),jt=ht(1419),Ft=ht(9862),Lt=ht(2205),Mt=ht(7392),Ot=ht(3433),Nt=ht(4770),$t=new xt.Logger("Device");function Vt(){var Ut,zt,Bt,Ht;if(typeof navigator=="object"&&navigator.product==="ReactNative")return $t.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"?void $t.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?"):typeof RTCRtpTransceiver<"u"?($t.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):($t.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative");if(typeof navigator!="object"||typeof navigator.userAgent!="string")$t.warn("detectDevice() | unknown device");else{const Gt=navigator.userAgent,Xt=new gt.UAParser(Gt);$t.debug("detectDevice() | browser detected [ua:%s, parsed:%o]",Gt,Xt.getResult());const Zt=Xt.getBrowser(),hr=(Ut=Zt.name)==null?void 0:Ut.toLowerCase(),nr=parseInt(Zt.major??"0"),ir=Xt.getEngine(),yr=(zt=ir.name)==null?void 0:zt.toLowerCase(),Cr=Xt.getOS(),Sr=(Bt=Cr.name)==null?void 0:Bt.toLowerCase(),xr=parseFloat(Cr.version??"0"),gr=Xt.getDevice(),_r=(Ht=gr.model)==null?void 0:Ht.toLowerCase(),fr=Sr==="ios"||_r==="ipad",Nr=hr&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(hr),Tr=hr&&["firefox","mobile firefox","mobile focus"].includes(hr),Hr=hr&&["safari","mobile safari"].includes(hr),Vr=hr&&["edge"].includes(hr);if((Nr||Vr)&&!fr&&nr>=111)return"Chrome111";if(Nr&&!fr&&nr>=74||Vr&&!fr&&nr>=88)return"Chrome74";if(Nr&&!fr&&nr>=70)return"Chrome70";if(Nr&&!fr&&nr>=67)return"Chrome67";if(Nr&&!fr&&nr>=55)return"Chrome55";if(Tr&&!fr&&nr>=60)return"Firefox60";if(Tr&&fr&&xr>=14.3||Hr&&nr>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(Hr&&nr>=11)return"Safari11";if(Vr&&!fr&&nr>=11&&nr<=18)return"Edge11";if(yr==="webkit"&&fr&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(yr==="blink"){const mn=Gt.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(mn){const tn=Number(mn[1]);return tn>=111?"Chrome111":tn>=74?"Chrome74":tn>=70?"Chrome70":tn>=67?"Chrome67":"Chrome55"}return"Chrome111"}$t.warn("detectDevice() | browser not supported [name:%s, version:%s]",hr,nr)}}dt.detectDevice=Vt,dt.Device=class{constructor({handlerName:Ut,handlerFactory:zt,Handler:Bt}={}){if(this._loaded=!1,this._observer=new yt.EnhancedEventEmitter,$t.debug("constructor()"),Bt){if($t.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),typeof Bt!="string")throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");Ut=Bt}if(Ut&&zt)throw new TypeError("just one of handlerName or handlerInterface can be given");if(zt)this._handlerFactory=zt;else{if(Ut)$t.debug("constructor() | handler given: %s",Ut);else{if(!(Ut=Vt()))throw new vt.UnsupportedError("device not supported");$t.debug("constructor() | detected handler: %s",Ut)}switch(Ut){case"Chrome111":this._handlerFactory=Rt.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=Tt.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=It.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=At.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=Dt.Chrome55.createFactory();break;case"Firefox60":this._handlerFactory=jt.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=Ft.Safari12.createFactory();break;case"Safari11":this._handlerFactory=Lt.Safari11.createFactory();break;case"Edge11":this._handlerFactory=Mt.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=Ot.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=Nt.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${Ut}"`)}}const Ht=this._handlerFactory();this._handlerName=Ht.name,Ht.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new vt.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new vt.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:Ut}){let zt;$t.debug("load() [routerRtpCapabilities:%o]",Ut),Ut=St.clone(Ut);try{if(this._loaded)throw new vt.InvalidStateError("already loaded");wt.validateRtpCapabilities(Ut),zt=this._handlerFactory();const Bt=await zt.getNativeRtpCapabilities();$t.debug("load() | got native RTP capabilities:%o",Bt),wt.validateRtpCapabilities(Bt),this._extendedRtpCapabilities=wt.getExtendedRtpCapabilities(Bt,Ut),$t.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=wt.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=wt.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=wt.getRecvRtpCapabilities(this._extendedRtpCapabilities),wt.validateRtpCapabilities(this._recvRtpCapabilities),$t.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await zt.getNativeSctpCapabilities(),$t.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),wt.validateSctpCapabilities(this._sctpCapabilities),$t.debug("load() succeeded"),this._loaded=!0,zt.close()}catch(Bt){throw zt&&zt.close(),Bt}}canProduce(Ut){if(!this._loaded)throw new vt.InvalidStateError("not loaded");if(Ut!=="audio"&&Ut!=="video")throw new TypeError(`invalid kind "${Ut}"`);return this._canProduceByKind[Ut]}createSendTransport({id:Ut,iceParameters:zt,iceCandidates:Bt,dtlsParameters:Ht,sctpParameters:Gt,iceServers:Xt,iceTransportPolicy:Zt,additionalSettings:hr,proprietaryConstraints:nr,appData:ir}){return $t.debug("createSendTransport()"),this.createTransport({direction:"send",id:Ut,iceParameters:zt,iceCandidates:Bt,dtlsParameters:Ht,sctpParameters:Gt,iceServers:Xt,iceTransportPolicy:Zt,additionalSettings:hr,proprietaryConstraints:nr,appData:ir})}createRecvTransport({id:Ut,iceParameters:zt,iceCandidates:Bt,dtlsParameters:Ht,sctpParameters:Gt,iceServers:Xt,iceTransportPolicy:Zt,additionalSettings:hr,proprietaryConstraints:nr,appData:ir}){return $t.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:Ut,iceParameters:zt,iceCandidates:Bt,dtlsParameters:Ht,sctpParameters:Gt,iceServers:Xt,iceTransportPolicy:Zt,additionalSettings:hr,proprietaryConstraints:nr,appData:ir})}createTransport({direction:Ut,id:zt,iceParameters:Bt,iceCandidates:Ht,dtlsParameters:Gt,sctpParameters:Xt,iceServers:Zt,iceTransportPolicy:hr,additionalSettings:nr,proprietaryConstraints:ir,appData:yr}){if(!this._loaded)throw new vt.InvalidStateError("not loaded");if(typeof zt!="string")throw new TypeError("missing id");if(typeof Bt!="object")throw new TypeError("missing iceParameters");if(!Array.isArray(Ht))throw new TypeError("missing iceCandidates");if(typeof Gt!="object")throw new TypeError("missing dtlsParameters");if(Xt&&typeof Xt!="object")throw new TypeError("wrong sctpParameters");if(yr&&typeof yr!="object")throw new TypeError("if given, appData must be an object");const Cr=new Et.Transport({direction:Ut,id:zt,iceParameters:Bt,iceCandidates:Ht,dtlsParameters:Gt,sctpParameters:Xt,iceServers:Zt,iceTransportPolicy:hr,additionalSettings:nr,proprietaryConstraints:ir,appData:yr,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",Cr),Cr}}},4493:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.EnhancedEventEmitter=void 0;const ft=ht(7187),pt=new(ht(8562)).Logger("EnhancedEventEmitter");class mt extends ft.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(xt,...yt){return super.emit(xt,...yt)}safeEmit(xt,...yt){const vt=super.listenerCount(xt);try{return super.emit(xt,...yt)}catch(St){return pt.error("safeEmit() | event listener threw an error [eventName:%s]:%o",xt,St),!!vt}}on(xt,yt){return super.on(xt,yt),this}off(xt,yt){return super.off(xt,yt),this}addListener(xt,yt){return super.on(xt,yt),this}prependListener(xt,yt){return super.prependListener(xt,yt),this}once(xt,yt){return super.once(xt,yt),this}prependOnceListener(xt,yt){return super.prependOnceListener(xt,yt),this}removeListener(xt,yt){return super.off(xt,yt),this}removeAllListeners(xt){return super.removeAllListeners(xt),this}listenerCount(xt){return super.listenerCount(xt)}listeners(xt){return super.listeners(xt)}rawListeners(xt){return super.rawListeners(xt)}}dt.EnhancedEventEmitter=mt},8562:function(ut,dt,ht){var ft=this&&this.__importDefault||function(gt){return gt&&gt.__esModule?gt:{default:gt}};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Logger=void 0;const pt=ft(ht(1227)),mt="mediasoup-client";dt.Logger=class{constructor(gt){gt?(this._debug=(0,pt.default)(`${mt}:${gt}`),this._warn=(0,pt.default)(`${mt}:WARN:${gt}`),this._error=(0,pt.default)(`${mt}:ERROR:${gt}`)):(this._debug=(0,pt.default)(mt),this._warn=(0,pt.default)(`${mt}:WARN`),this._error=(0,pt.default)(`${mt}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},6569:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.Producer=void 0;const ft=ht(8562),pt=ht(4493),mt=ht(9992),gt=new ft.Logger("Producer");class xt extends pt.EnhancedEventEmitter{constructor({id:vt,localId:St,rtpSender:wt,track:Et,rtpParameters:Rt,stopTracks:Tt,disableTrackOnPause:It,zeroRtpOnPause:At,appData:Dt}){super(),this._closed=!1,this._observer=new pt.EnhancedEventEmitter,gt.debug("constructor()"),this._id=vt,this._localId=St,this._rtpSender=wt,this._track=Et,this._kind=Et.kind,this._rtpParameters=Rt,this._paused=!!It&&!Et.enabled,this._maxSpatialLayer=void 0,this._stopTracks=Tt,this._disableTrackOnPause=It,this._zeroRtpOnPause=At,this._appData=Dt||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(vt){this._appData=vt}get observer(){return this._observer}close(){this._closed||(gt.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(gt.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new mt.InvalidStateError("closed");return new Promise((vt,St)=>{this.safeEmit("@getstats",vt,St)})}pause(){gt.debug("pause()"),this._closed?gt.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((vt,St)=>{this.safeEmit("@pause",vt,St)}).catch(()=>{}),this._observer.safeEmit("pause"))}resume(){gt.debug("resume()"),this._closed?gt.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((vt,St)=>{this.safeEmit("@resume",vt,St)}).catch(()=>{}),this._observer.safeEmit("resume"))}async replaceTrack({track:vt}){if(gt.debug("replaceTrack() [track:%o]",vt),this._closed){if(vt&&this._stopTracks)try{vt.stop()}catch{}throw new mt.InvalidStateError("closed")}if(vt&&vt.readyState==="ended")throw new mt.InvalidStateError("track ended");vt!==this._track?(await new Promise((St,wt)=>{this.safeEmit("@replacetrack",vt,St,wt)}),this.destroyTrack(),this._track=vt,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()):gt.debug("replaceTrack() | same track, ignored")}async setMaxSpatialLayer(vt){if(this._closed)throw new mt.InvalidStateError("closed");if(this._kind!=="video")throw new mt.UnsupportedError("not a video Producer");if(typeof vt!="number")throw new TypeError("invalid spatialLayer");vt!==this._maxSpatialLayer&&(await new Promise((St,wt)=>{this.safeEmit("@setmaxspatiallayer",vt,St,wt)}).catch(()=>{}),this._maxSpatialLayer=vt)}async setRtpEncodingParameters(vt){if(this._closed)throw new mt.InvalidStateError("closed");if(typeof vt!="object")throw new TypeError("invalid params");await new Promise((St,wt)=>{this.safeEmit("@setrtpencodingparameters",vt,St,wt)})}onTrackEnded(){gt.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}dt.Producer=xt},4879:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0})},7669:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0})},5202:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(Mt,Ot,Nt,$t){$t===void 0&&($t=Nt);var Vt=Object.getOwnPropertyDescriptor(Ot,Nt);Vt&&!("get"in Vt?!Ot.__esModule:Vt.writable||Vt.configurable)||(Vt={enumerable:!0,get:function(){return Ot[Nt]}}),Object.defineProperty(Mt,$t,Vt)}:function(Mt,Ot,Nt,$t){$t===void 0&&($t=Nt),Mt[$t]=Ot[Nt]}),pt=this&&this.__setModuleDefault||(Object.create?function(Mt,Ot){Object.defineProperty(Mt,"default",{enumerable:!0,value:Ot})}:function(Mt,Ot){Mt.default=Ot}),mt=this&&this.__importStar||function(Mt){if(Mt&&Mt.__esModule)return Mt;var Ot={};if(Mt!=null)for(var Nt in Mt)Nt!=="default"&&Object.prototype.hasOwnProperty.call(Mt,Nt)&&ft(Ot,Mt,Nt);return pt(Ot,Mt),Ot},gt=this&&this.__importDefault||function(Mt){return Mt&&Mt.__esModule?Mt:{default:Mt}};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Transport=void 0;const xt=ht(2186),yt=gt(ht(4375)),vt=ht(8562),St=ht(4493),wt=ht(9992),Et=mt(ht(3347)),Rt=mt(ht(5280)),Tt=ht(6569),It=ht(9514),At=ht(5504),Dt=ht(1623),jt=new vt.Logger("Transport");class Ft{constructor(Ot){this.consumerOptions=Ot,this.promise=new Promise((Nt,$t)=>{this.resolve=Nt,this.reject=$t})}}class Lt extends St.EnhancedEventEmitter{constructor({direction:Ot,id:Nt,iceParameters:$t,iceCandidates:Vt,dtlsParameters:Ut,sctpParameters:zt,iceServers:Bt,iceTransportPolicy:Ht,additionalSettings:Gt,proprietaryConstraints:Xt,appData:Zt,handlerFactory:hr,extendedRtpCapabilities:nr,canProduceByKind:ir}){super(),this._closed=!1,this._iceGatheringState="new",this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new xt.AwaitQueue,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new St.EnhancedEventEmitter,jt.debug("constructor() [id:%s, direction:%s]",Nt,Ot),this._id=Nt,this._direction=Ot,this._extendedRtpCapabilities=nr,this._canProduceByKind=ir,this._maxSctpMessageSize=zt?zt.maxMessageSize:null,delete(Gt=Et.clone(Gt)||{}).iceServers,delete Gt.iceTransportPolicy,delete Gt.bundlePolicy,delete Gt.rtcpMuxPolicy,delete Gt.sdpSemantics,this._handler=hr(),this._handler.run({direction:Ot,iceParameters:$t,iceCandidates:Vt,dtlsParameters:Ut,sctpParameters:zt,iceServers:Bt,iceTransportPolicy:Ht,additionalSettings:Gt,proprietaryConstraints:Xt,extendedRtpCapabilities:nr}),this._appData=Zt||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(Ot){this._appData=Ot}get observer(){return this._observer}close(){if(!this._closed){jt.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const Ot of this._producers.values())Ot.transportClosed();this._producers.clear();for(const Ot of this._consumers.values())Ot.transportClosed();this._consumers.clear();for(const Ot of this._dataProducers.values())Ot.transportClosed();this._dataProducers.clear();for(const Ot of this._dataConsumers.values())Ot.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new wt.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:Ot}){if(jt.debug("restartIce()"),this._closed)throw new wt.InvalidStateError("closed");if(!Ot)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(Ot),"transport.restartIce()")}async updateIceServers({iceServers:Ot}={}){if(jt.debug("updateIceServers()"),this._closed)throw new wt.InvalidStateError("closed");if(!Array.isArray(Ot))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(Ot),"transport.updateIceServers()")}async produce({track:Ot,encodings:Nt,codecOptions:$t,codec:Vt,stopTracks:Ut=!0,disableTrackOnPause:zt=!0,zeroRtpOnPause:Bt=!1,appData:Ht={}}={}){if(jt.debug("produce() [track:%o]",Ot),this._closed)throw new wt.InvalidStateError("closed");if(!Ot)throw new TypeError("missing track");if(this._direction!=="send")throw new wt.UnsupportedError("not a sending Transport");if(!this._canProduceByKind[Ot.kind])throw new wt.UnsupportedError(`cannot produce ${Ot.kind}`);if(Ot.readyState==="ended")throw new wt.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(Ht&&typeof Ht!="object")throw new TypeError("if given, appData must be an object");return this._awaitQueue.push(async()=>{let Gt;if(Nt&&!Array.isArray(Nt))throw TypeError("encodings must be an array");Nt&&Nt.length===0?Gt=void 0:Nt&&(Gt=Nt.map(nr=>{const ir={active:!0};return nr.active===!1&&(ir.active=!1),typeof nr.dtx=="boolean"&&(ir.dtx=nr.dtx),typeof nr.scalabilityMode=="string"&&(ir.scalabilityMode=nr.scalabilityMode),typeof nr.scaleResolutionDownBy=="number"&&(ir.scaleResolutionDownBy=nr.scaleResolutionDownBy),typeof nr.maxBitrate=="number"&&(ir.maxBitrate=nr.maxBitrate),typeof nr.maxFramerate=="number"&&(ir.maxFramerate=nr.maxFramerate),typeof nr.adaptivePtime=="boolean"&&(ir.adaptivePtime=nr.adaptivePtime),typeof nr.priority=="string"&&(ir.priority=nr.priority),typeof nr.networkPriority=="string"&&(ir.networkPriority=nr.networkPriority),ir}));const{localId:Xt,rtpParameters:Zt,rtpSender:hr}=await this._handler.send({track:Ot,encodings:Gt,codecOptions:$t,codec:Vt});try{Rt.validateRtpParameters(Zt);const{id:nr}=await new Promise((yr,Cr)=>{this.safeEmit("produce",{kind:Ot.kind,rtpParameters:Zt,appData:Ht},yr,Cr)}),ir=new Tt.Producer({id:nr,localId:Xt,rtpSender:hr,track:Ot,rtpParameters:Zt,stopTracks:Ut,disableTrackOnPause:zt,zeroRtpOnPause:Bt,appData:Ht});return this._producers.set(ir.id,ir),this.handleProducer(ir),this._observer.safeEmit("newproducer",ir),ir}catch(nr){throw this._handler.stopSending(Xt).catch(()=>{}),nr}},"transport.produce()").catch(Gt=>{if(Ut)try{Ot.stop()}catch{}throw Gt})}async consume({id:Ot,producerId:Nt,kind:$t,rtpParameters:Vt,streamId:Ut,appData:zt={}}){if(jt.debug("consume()"),Vt=Et.clone(Vt),this._closed)throw new wt.InvalidStateError("closed");if(this._direction!=="recv")throw new wt.UnsupportedError("not a receiving Transport");if(typeof Ot!="string")throw new TypeError("missing id");if(typeof Nt!="string")throw new TypeError("missing producerId");if($t!=="audio"&&$t!=="video")throw new TypeError(`invalid kind '${$t}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(zt&&typeof zt!="object")throw new TypeError("if given, appData must be an object");if(!Rt.canReceive(Vt,this._extendedRtpCapabilities))throw new wt.UnsupportedError("cannot consume this Producer");const Bt=new Ft({id:Ot,producerId:Nt,kind:$t,rtpParameters:Vt,streamId:Ut,appData:zt});return this._pendingConsumerTasks.push(Bt),(0,yt.default)(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),Bt.promise}async produceData({ordered:Ot=!0,maxPacketLifeTime:Nt,maxRetransmits:$t,label:Vt="",protocol:Ut="",appData:zt={}}={}){if(jt.debug("produceData()"),this._closed)throw new wt.InvalidStateError("closed");if(this._direction!=="send")throw new wt.UnsupportedError("not a sending Transport");if(!this._maxSctpMessageSize)throw new wt.UnsupportedError("SCTP not enabled by remote Transport");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(zt&&typeof zt!="object")throw new TypeError("if given, appData must be an object");return(Nt||$t)&&(Ot=!1),this._awaitQueue.push(async()=>{const{dataChannel:Bt,sctpStreamParameters:Ht}=await this._handler.sendDataChannel({ordered:Ot,maxPacketLifeTime:Nt,maxRetransmits:$t,label:Vt,protocol:Ut});Rt.validateSctpStreamParameters(Ht);const{id:Gt}=await new Promise((Zt,hr)=>{this.safeEmit("producedata",{sctpStreamParameters:Ht,label:Vt,protocol:Ut,appData:zt},Zt,hr)}),Xt=new At.DataProducer({id:Gt,dataChannel:Bt,sctpStreamParameters:Ht,appData:zt});return this._dataProducers.set(Xt.id,Xt),this.handleDataProducer(Xt),this._observer.safeEmit("newdataproducer",Xt),Xt},"transport.produceData()")}async consumeData({id:Ot,dataProducerId:Nt,sctpStreamParameters:$t,label:Vt="",protocol:Ut="",appData:zt={}}){if(jt.debug("consumeData()"),$t=Et.clone($t),this._closed)throw new wt.InvalidStateError("closed");if(this._direction!=="recv")throw new wt.UnsupportedError("not a receiving Transport");if(!this._maxSctpMessageSize)throw new wt.UnsupportedError("SCTP not enabled by remote Transport");if(typeof Ot!="string")throw new TypeError("missing id");if(typeof Nt!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(zt&&typeof zt!="object")throw new TypeError("if given, appData must be an object");return Rt.validateSctpStreamParameters($t),this._awaitQueue.push(async()=>{const{dataChannel:Bt}=await this._handler.receiveDataChannel({sctpStreamParameters:$t,label:Vt,protocol:Ut}),Ht=new Dt.DataConsumer({id:Ot,dataProducerId:Nt,dataChannel:Bt,sctpStreamParameters:$t,appData:zt});return this._dataConsumers.set(Ht.id,Ht),this.handleDataConsumer(Ht),this._observer.safeEmit("newdataconsumer",Ht),Ht},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0)return void jt.debug("createPendingConsumers() | there is no Consumer to be created");const Ot=[...this._pendingConsumerTasks];let Nt;this._pendingConsumerTasks=[];const $t=[];for(const Vt of Ot){const{id:Ut,kind:zt,rtpParameters:Bt,streamId:Ht}=Vt.consumerOptions;$t.push({trackId:Ut,kind:zt,rtpParameters:Bt,streamId:Ht})}try{const Vt=await this._handler.receive($t);for(let Ut=0;Ut<Vt.length;++Ut){const zt=Ot[Ut],Bt=Vt[Ut],{id:Ht,producerId:Gt,kind:Xt,rtpParameters:Zt,appData:hr}=zt.consumerOptions,{localId:nr,rtpReceiver:ir,track:yr}=Bt,Cr=new It.Consumer({id:Ht,localId:nr,producerId:Gt,rtpReceiver:ir,track:yr,rtpParameters:Zt,appData:hr});this._consumers.set(Cr.id,Cr),this.handleConsumer(Cr),this._probatorConsumerCreated||Nt||Xt!=="video"||(Nt=Cr),this._observer.safeEmit("newconsumer",Cr),zt.resolve(Cr)}}catch(Vt){for(const Ut of Ot)Ut.reject(Vt)}if(Nt)try{const Vt=Rt.generateProbatorRtpParameters(Nt.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:Vt}]),jt.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(Vt){jt.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",Vt)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0)return void jt.debug("pausePendingConsumers() | there is no Consumer to be paused");const Ot=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const Nt=Ot.map($t=>$t.localId);await this._handler.pauseReceiving(Nt)}catch(Nt){jt.error("pausePendingConsumers() | failed to pause Consumers:",Nt)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0)return void jt.debug("resumePendingConsumers() | there is no Consumer to be resumed");const Ot=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const Nt=Ot.map($t=>$t.localId);await this._handler.resumeReceiving(Nt)}catch(Nt){jt.error("resumePendingConsumers() | failed to resume Consumers:",Nt)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0)return void jt.debug("closePendingConsumers() | there is no Consumer to be closed");const Ot=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(Ot.map(Nt=>Nt.localId))}catch(Nt){jt.error("closePendingConsumers() | failed to close Consumers:",Nt)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const Ot=this._handler;Ot.on("@connect",({dtlsParameters:Nt},$t,Vt)=>{this._closed?Vt(new wt.InvalidStateError("closed")):this.safeEmit("connect",{dtlsParameters:Nt},$t,Vt)}),Ot.on("@icegatheringstatechange",Nt=>{Nt!==this._iceGatheringState&&(jt.debug("ICE gathering state changed to %s",Nt),this._iceGatheringState=Nt,this._closed||this.safeEmit("icegatheringstatechange",Nt))}),Ot.on("@connectionstatechange",Nt=>{Nt!==this._connectionState&&(jt.debug("connection state changed to %s",Nt),this._connectionState=Nt,this._closed||this.safeEmit("connectionstatechange",Nt))})}handleProducer(Ot){Ot.on("@close",()=>{this._producers.delete(Ot.id),this._closed||this._awaitQueue.push(async()=>await this._handler.stopSending(Ot.localId),"producer @close event").catch(Nt=>jt.warn("producer.close() failed:%o",Nt))}),Ot.on("@pause",(Nt,$t)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(Ot.localId),"producer @pause event").then(Nt).catch($t)}),Ot.on("@resume",(Nt,$t)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(Ot.localId),"producer @resume event").then(Nt).catch($t)}),Ot.on("@replacetrack",(Nt,$t,Vt)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(Ot.localId,Nt),"producer @replacetrack event").then($t).catch(Vt)}),Ot.on("@setmaxspatiallayer",(Nt,$t,Vt)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(Ot.localId,Nt),"producer @setmaxspatiallayer event").then($t).catch(Vt)}),Ot.on("@setrtpencodingparameters",(Nt,$t,Vt)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(Ot.localId,Nt),"producer @setrtpencodingparameters event").then($t).catch(Vt)}),Ot.on("@getstats",(Nt,$t)=>{if(this._closed)return $t(new wt.InvalidStateError("closed"));this._handler.getSenderStats(Ot.localId).then(Nt).catch($t)})}handleConsumer(Ot){Ot.on("@close",()=>{this._consumers.delete(Ot.id),this._pendingPauseConsumers.delete(Ot.id),this._pendingResumeConsumers.delete(Ot.id),this._closed||(this._pendingCloseConsumers.set(Ot.id,Ot),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),Ot.on("@pause",()=>{this._pendingResumeConsumers.has(Ot.id)&&this._pendingResumeConsumers.delete(Ot.id),this._pendingPauseConsumers.set(Ot.id,Ot),(0,yt.default)(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),Ot.on("@resume",()=>{this._pendingPauseConsumers.has(Ot.id)&&this._pendingPauseConsumers.delete(Ot.id),this._pendingResumeConsumers.set(Ot.id,Ot),(0,yt.default)(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),Ot.on("@getstats",(Nt,$t)=>{if(this._closed)return $t(new wt.InvalidStateError("closed"));this._handler.getReceiverStats(Ot.localId).then(Nt).catch($t)})}handleDataProducer(Ot){Ot.on("@close",()=>{this._dataProducers.delete(Ot.id)})}handleDataConsumer(Ot){Ot.on("@close",()=>{this._dataConsumers.delete(Ot.id)})}}dt.Transport=Lt},9992:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.InvalidStateError=dt.UnsupportedError=void 0;class ht extends Error{constructor(mt){super(mt),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,ht):this.stack=new Error(mt).stack}}dt.UnsupportedError=ht;class ft extends Error{constructor(mt){super(mt),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,ft):this.stack=new Error(mt).stack}}dt.InvalidStateError=ft},2960:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(Lt,Mt,Ot,Nt){Nt===void 0&&(Nt=Ot);var $t=Object.getOwnPropertyDescriptor(Mt,Ot);$t&&!("get"in $t?!Mt.__esModule:$t.writable||$t.configurable)||($t={enumerable:!0,get:function(){return Mt[Ot]}}),Object.defineProperty(Lt,Nt,$t)}:function(Lt,Mt,Ot,Nt){Nt===void 0&&(Nt=Ot),Lt[Nt]=Mt[Ot]}),pt=this&&this.__setModuleDefault||(Object.create?function(Lt,Mt){Object.defineProperty(Lt,"default",{enumerable:!0,value:Mt})}:function(Lt,Mt){Lt.default=Mt}),mt=this&&this.__importStar||function(Lt){if(Lt&&Lt.__esModule)return Lt;var Mt={};if(Lt!=null)for(var Ot in Lt)Ot!=="default"&&Object.prototype.hasOwnProperty.call(Lt,Ot)&&ft(Mt,Lt,Ot);return pt(Mt,Lt),Mt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Chrome111=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(2267)),wt=mt(ht(9072)),Et=mt(ht(8954)),Rt=ht(9992),Tt=ht(9316),It=ht(7910),At=ht(2770),Dt=new xt.Logger("Chrome111"),jt={OS:1024,MIS:1024};class Ft extends Tt.HandlerInterface{static createFactory(){return()=>new Ft}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(Dt.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){Dt.debug("getNativeRtpCapabilities()");const Mt=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{Mt.addTransceiver("audio"),Mt.addTransceiver("video");const Ot=await Mt.createOffer();try{Mt.close()}catch{}const Nt=gt.parse(Ot.sdp),$t=St.extractRtpCapabilities({sdpObject:Nt});return Et.addNackSuppportForOpus($t),$t}catch(Ot){try{Mt.close()}catch{}throw Ot}}async getNativeSctpCapabilities(){return Dt.debug("getNativeSctpCapabilities()"),{numStreams:jt}}run({direction:Mt,iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt,iceServers:Ut,iceTransportPolicy:zt,additionalSettings:Bt,proprietaryConstraints:Ht,extendedRtpCapabilities:Gt}){this.assertNotClosed(),Dt.debug("run()"),this._direction=Mt,this._remoteSdp=new It.RemoteSdp({iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt}),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",Gt),video:vt.getSendingRtpParameters("video",Gt)},this._sendingRemoteRtpParametersByKind={audio:vt.getSendingRemoteRtpParameters("audio",Gt),video:vt.getSendingRemoteRtpParameters("video",Gt)},$t.role&&$t.role!=="auto"&&(this._forcedLocalDtlsRole=$t.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:Ut||[],iceTransportPolicy:zt||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...Bt},Ht),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(Dt.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(Mt){this.assertNotClosed(),Dt.debug("updateIceServers()");const Ot=this._pc.getConfiguration();Ot.iceServers=Mt,this._pc.setConfiguration(Ot)}async restartIce(Mt){if(this.assertNotClosed(),Dt.debug("restartIce()"),this._remoteSdp.updateIceParameters(Mt),this._transportReady)if(this._direction==="send"){const Ot=await this._pc.createOffer({iceRestart:!0});Dt.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Ot),await this._pc.setLocalDescription(Ot);const Nt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Nt),await this._pc.setRemoteDescription(Nt)}else{const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:Mt,encodings:Ot,codecOptions:Nt,codec:$t}){if(this.assertNotClosed(),this.assertSendDirection(),Dt.debug("send() [kind:%s, track.id:%s]",Mt.kind,Mt.id),Ot&&Ot.length>1){Ot.forEach((yr,Cr)=>{yr.rid=`r${Cr}`});let nr=1,ir=1;for(const yr of Ot){const Cr=yr.scalabilityMode?(0,At.parse)(yr.scalabilityMode).temporalLayers:3;Cr>ir&&(ir=Cr)}for(const yr of Ot)yr.rid="r"+nr++,yr.scalabilityMode=`L1T${ir}`}const Vt=yt.clone(this._sendingRtpParametersByKind[Mt.kind]);Vt.codecs=vt.reduceCodecs(Vt.codecs,$t);const Ut=yt.clone(this._sendingRemoteRtpParametersByKind[Mt.kind]);Ut.codecs=vt.reduceCodecs(Ut.codecs,$t);const zt=this._remoteSdp.getNextMediaSectionIdx(),Bt=this._pc.addTransceiver(Mt,{direction:"sendonly",streams:[this._sendStream],sendEncodings:Ot}),Ht=await this._pc.createOffer();let Gt=gt.parse(Ht.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Gt}),Dt.debug("send() | calling pc.setLocalDescription() [offer:%o]",Ht),await this._pc.setLocalDescription(Ht);const Xt=Bt.mid;Vt.mid=Xt,Gt=gt.parse(this._pc.localDescription.sdp);const Zt=Gt.media[zt.idx];if(Vt.rtcp.cname=St.getCname({offerMediaObject:Zt}),Ot)if(Ot.length===1){const nr=wt.getRtpEncodings({offerMediaObject:Zt});Object.assign(nr[0],Ot[0]),Vt.encodings=nr}else Vt.encodings=Ot;else Vt.encodings=wt.getRtpEncodings({offerMediaObject:Zt});this._remoteSdp.send({offerMediaObject:Zt,reuseMid:zt.reuseMid,offerRtpParameters:Vt,answerRtpParameters:Ut,codecOptions:Nt,extmapAllowMixed:!0});const hr={type:"answer",sdp:this._remoteSdp.getSdp()};return Dt.debug("send() | calling pc.setRemoteDescription() [answer:%o]",hr),await this._pc.setRemoteDescription(hr),this._mapMidTransceiver.set(Xt,Bt),{localId:Xt,rtpParameters:Vt,rtpSender:Bt.sender}}async stopSending(Mt){if(this.assertSendDirection(),Dt.debug("stopSending() [localId:%s]",Mt),this._closed)return;const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");if(Ot.sender.replaceTrack(null),this._pc.removeTrack(Ot.sender),this._remoteSdp.closeMediaSection(Ot.mid))try{Ot.stop()}catch{}const Nt=await this._pc.createOffer();Dt.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t),this._mapMidTransceiver.delete(Mt)}async pauseSending(Mt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("pauseSending() [localId:%s]",Mt);const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="inactive",this._remoteSdp.pauseMediaSection(Mt);const Nt=await this._pc.createOffer();Dt.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async resumeSending(Mt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("resumeSending() [localId:%s]",Mt);const Ot=this._mapMidTransceiver.get(Mt);if(this._remoteSdp.resumeSendingMediaSection(Mt),!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="sendonly";const Nt=await this._pc.createOffer();Dt.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async replaceTrack(Mt,Ot){this.assertNotClosed(),this.assertSendDirection(),Ot?Dt.debug("replaceTrack() [localId:%s, track.id:%s]",Mt,Ot.id):Dt.debug("replaceTrack() [localId:%s, no track]",Mt);const Nt=this._mapMidTransceiver.get(Mt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");await Nt.sender.replaceTrack(Ot)}async setMaxSpatialLayer(Mt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",Mt,Ot);const Nt=this._mapMidTransceiver.get(Mt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{zt.active=Bt<=Ot}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Mt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async setRtpEncodingParameters(Mt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setRtpEncodingParameters() [localId:%s, params:%o]",Mt,Ot);const Nt=this._mapMidTransceiver.get(Mt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{$t.encodings[Bt]={...zt,...Ot}}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Mt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async getSenderStats(Mt){this.assertNotClosed(),this.assertSendDirection();const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.sender.getStats()}async sendDataChannel({ordered:Mt,maxPacketLifeTime:Ot,maxRetransmits:Nt,label:$t,protocol:Vt}){this.assertNotClosed(),this.assertSendDirection();const Ut={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Mt,maxPacketLifeTime:Ot,maxRetransmits:Nt,protocol:Vt};Dt.debug("sendDataChannel() [options:%o]",Ut);const zt=this._pc.createDataChannel($t,Ut);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%jt.MIS,!this._hasDataChannelMediaSection){const Bt=await this._pc.createOffer(),Ht=gt.parse(Bt.sdp),Gt=Ht.media.find(Zt=>Zt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ht}),Dt.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Bt),await this._pc.setLocalDescription(Bt),this._remoteSdp.sendSctpAssociation({offerMediaObject:Gt});const Xt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Xt),await this._pc.setRemoteDescription(Xt),this._hasDataChannelMediaSection=!0}return{dataChannel:zt,sctpStreamParameters:{streamId:Ut.id,ordered:Ut.ordered,maxPacketLifeTime:Ut.maxPacketLifeTime,maxRetransmits:Ut.maxRetransmits}}}async receive(Mt){this.assertNotClosed(),this.assertRecvDirection();const Ot=[],Nt=new Map;for(const zt of Mt){const{trackId:Bt,kind:Ht,rtpParameters:Gt,streamId:Xt}=zt;Dt.debug("receive() [trackId:%s, kind:%s]",Bt,Ht);const Zt=Gt.mid||String(this._mapMidTransceiver.size);Nt.set(Bt,Zt),this._remoteSdp.receive({mid:Zt,kind:Ht,offerRtpParameters:Gt,streamId:Xt||Gt.rtcp.cname,trackId:Bt})}const $t={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",$t),await this._pc.setRemoteDescription($t);let Vt=await this._pc.createAnswer();const Ut=gt.parse(Vt.sdp);for(const zt of Mt){const{trackId:Bt,rtpParameters:Ht}=zt,Gt=Nt.get(Bt),Xt=Ut.media.find(Zt=>String(Zt.mid)===Gt);St.applyCodecParameters({offerRtpParameters:Ht,answerMediaObject:Xt})}Vt={type:"answer",sdp:gt.write(Ut)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ut}),Dt.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Vt),await this._pc.setLocalDescription(Vt);for(const zt of Mt){const{trackId:Bt}=zt,Ht=Nt.get(Bt),Gt=this._pc.getTransceivers().find(Xt=>Xt.mid===Ht);if(!Gt)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(Ht,Gt),Ot.push({localId:Ht,track:Gt.receiver.track,rtpReceiver:Gt.receiver})}return Ot}async stopReceiving(Mt){if(this.assertRecvDirection(),this._closed)return;for(const $t of Mt){Dt.debug("stopReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(Vt.mid)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt);for(const $t of Mt)this._mapMidTransceiver.delete($t)}async pauseReceiving(Mt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Mt){Dt.debug("pauseReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="inactive",this._remoteSdp.pauseMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async resumeReceiving(Mt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Mt){Dt.debug("resumeReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async getReceiverStats(Mt){this.assertNotClosed(),this.assertRecvDirection();const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:Mt,label:Ot,protocol:Nt}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt}=Mt,Bt={negotiated:!0,id:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt,protocol:Nt};Dt.debug("receiveDataChannel() [options:%o]",Bt);const Ht=this._pc.createDataChannel(Ot,Bt);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Gt={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Gt),await this._pc.setRemoteDescription(Gt);const Xt=await this._pc.createAnswer();if(!this._transportReady){const Zt=gt.parse(Xt.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Zt})}Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Xt),await this._pc.setLocalDescription(Xt),this._hasDataChannelMediaSection=!0}return{dataChannel:Ht}}async setupTransport({localDtlsRole:Mt,localSdpObject:Ot}){Ot||(Ot=gt.parse(this._pc.localDescription.sdp));const Nt=St.extractDtlsParameters({sdpObject:Ot});Nt.role=Mt,this._remoteSdp.updateDtlsRole(Mt==="client"?"server":"client"),await new Promise(($t,Vt)=>{this.safeEmit("@connect",{dtlsParameters:Nt},$t,Vt)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new Rt.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Chrome111=Ft},564:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(jt,Ft,Lt,Mt){Mt===void 0&&(Mt=Lt);var Ot=Object.getOwnPropertyDescriptor(Ft,Lt);Ot&&!("get"in Ot?!Ft.__esModule:Ot.writable||Ot.configurable)||(Ot={enumerable:!0,get:function(){return Ft[Lt]}}),Object.defineProperty(jt,Mt,Ot)}:function(jt,Ft,Lt,Mt){Mt===void 0&&(Mt=Lt),jt[Mt]=Ft[Lt]}),pt=this&&this.__setModuleDefault||(Object.create?function(jt,Ft){Object.defineProperty(jt,"default",{enumerable:!0,value:Ft})}:function(jt,Ft){jt.default=Ft}),mt=this&&this.__importStar||function(jt){if(jt&&jt.__esModule)return jt;var Ft={};if(jt!=null)for(var Lt in jt)Lt!=="default"&&Object.prototype.hasOwnProperty.call(jt,Lt)&&ft(Ft,jt,Lt);return pt(Ft,jt),Ft};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Chrome55=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=ht(9992),vt=mt(ht(3347)),St=mt(ht(5280)),wt=mt(ht(2267)),Et=mt(ht(9875)),Rt=ht(9316),Tt=ht(7910),It=new xt.Logger("Chrome55"),At={OS:1024,MIS:1024};class Dt extends Rt.HandlerInterface{static createFactory(){return()=>new Dt}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome55"}close(){if(It.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){It.debug("getNativeRtpCapabilities()");const Ft=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const Lt=await Ft.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{Ft.close()}catch{}const Mt=gt.parse(Lt.sdp);return wt.extractRtpCapabilities({sdpObject:Mt})}catch(Lt){try{Ft.close()}catch{}throw Lt}}async getNativeSctpCapabilities(){return It.debug("getNativeSctpCapabilities()"),{numStreams:At}}run({direction:Ft,iceParameters:Lt,iceCandidates:Mt,dtlsParameters:Ot,sctpParameters:Nt,iceServers:$t,iceTransportPolicy:Vt,additionalSettings:Ut,proprietaryConstraints:zt,extendedRtpCapabilities:Bt}){It.debug("run()"),this._direction=Ft,this._remoteSdp=new Tt.RemoteSdp({iceParameters:Lt,iceCandidates:Mt,dtlsParameters:Ot,sctpParameters:Nt,planB:!0}),this._sendingRtpParametersByKind={audio:St.getSendingRtpParameters("audio",Bt),video:St.getSendingRtpParameters("video",Bt)},this._sendingRemoteRtpParametersByKind={audio:St.getSendingRemoteRtpParameters("audio",Bt),video:St.getSendingRemoteRtpParameters("video",Bt)},Ot.role&&Ot.role!=="auto"&&(this._forcedLocalDtlsRole=Ot.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:$t||[],iceTransportPolicy:Vt||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...Ut},zt),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(It.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(Ft){It.debug("updateIceServers()");const Lt=this._pc.getConfiguration();Lt.iceServers=Ft,this._pc.setConfiguration(Lt)}async restartIce(Ft){if(It.debug("restartIce()"),this._remoteSdp.updateIceParameters(Ft),this._transportReady)if(this._direction==="send"){const Lt=await this._pc.createOffer({iceRestart:!0});It.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Lt),await this._pc.setLocalDescription(Lt);const Mt={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Mt),await this._pc.setRemoteDescription(Mt)}else{const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);const Mt=await this._pc.createAnswer();It.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Mt),await this._pc.setLocalDescription(Mt)}}async getTransportStats(){return this._pc.getStats()}async send({track:Ft,encodings:Lt,codecOptions:Mt,codec:Ot}){this.assertSendDirection(),It.debug("send() [kind:%s, track.id:%s]",Ft.kind,Ft.id),Ot&&It.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(Ft),this._pc.addStream(this._sendStream);let Nt,$t=await this._pc.createOffer(),Vt=gt.parse($t.sdp);const Ut=vt.clone(this._sendingRtpParametersByKind[Ft.kind]);Ut.codecs=St.reduceCodecs(Ut.codecs);const zt=vt.clone(this._sendingRemoteRtpParametersByKind[Ft.kind]);if(zt.codecs=St.reduceCodecs(zt.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Vt}),Ft.kind==="video"&&Lt&&Lt.length>1&&(It.debug("send() | enabling simulcast"),Vt=gt.parse($t.sdp),Nt=Vt.media.find(Gt=>Gt.type==="video"),Et.addLegacySimulcast({offerMediaObject:Nt,track:Ft,numStreams:Lt.length}),$t={type:"offer",sdp:gt.write(Vt)}),It.debug("send() | calling pc.setLocalDescription() [offer:%o]",$t),await this._pc.setLocalDescription($t),Vt=gt.parse(this._pc.localDescription.sdp),Nt=Vt.media.find(Gt=>Gt.type===Ft.kind),Ut.rtcp.cname=wt.getCname({offerMediaObject:Nt}),Ut.encodings=Et.getRtpEncodings({offerMediaObject:Nt,track:Ft}),Lt)for(let Gt=0;Gt<Ut.encodings.length;++Gt)Lt[Gt]&&Object.assign(Ut.encodings[Gt],Lt[Gt]);if(Ut.encodings.length>1&&Ut.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const Gt of Ut.encodings)Gt.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Nt,offerRtpParameters:Ut,answerRtpParameters:zt,codecOptions:Mt});const Bt={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Bt),await this._pc.setRemoteDescription(Bt);const Ht=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(Ht,Ft),{localId:Ht,rtpParameters:Ut}}async stopSending(Ft){this.assertSendDirection(),It.debug("stopSending() [localId:%s]",Ft);const Lt=this._mapSendLocalIdTrack.get(Ft);if(!Lt)throw new Error("track not found");this._mapSendLocalIdTrack.delete(Ft),this._sendStream.removeTrack(Lt),this._pc.addStream(this._sendStream);const Mt=await this._pc.createOffer();It.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Mt);try{await this._pc.setLocalDescription(Mt)}catch(Nt){if(this._sendStream.getTracks().length===0)return void It.warn("stopSending() | ignoring expected error due no sending tracks: %s",Nt.toString());throw Nt}if(this._pc.signalingState==="stable")return;const Ot={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",Ot),await this._pc.setRemoteDescription(Ot)}async pauseSending(Ft){}async resumeSending(Ft){}async replaceTrack(Ft,Lt){throw new yt.UnsupportedError("not implemented")}async setMaxSpatialLayer(Ft,Lt){throw new yt.UnsupportedError(" not implemented")}async setRtpEncodingParameters(Ft,Lt){throw new yt.UnsupportedError("not supported")}async getSenderStats(Ft){throw new yt.UnsupportedError("not implemented")}async sendDataChannel({ordered:Ft,maxPacketLifeTime:Lt,maxRetransmits:Mt,label:Ot,protocol:Nt}){this.assertSendDirection();const $t={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Ft,maxPacketLifeTime:Lt,maxRetransmitTime:Lt,maxRetransmits:Mt,protocol:Nt};It.debug("sendDataChannel() [options:%o]",$t);const Vt=this._pc.createDataChannel(Ot,$t);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%At.MIS,!this._hasDataChannelMediaSection){const Ut=await this._pc.createOffer(),zt=gt.parse(Ut.sdp),Bt=zt.media.find(Gt=>Gt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:zt}),It.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Ut),await this._pc.setLocalDescription(Ut),this._remoteSdp.sendSctpAssociation({offerMediaObject:Bt});const Ht={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Ht),await this._pc.setRemoteDescription(Ht),this._hasDataChannelMediaSection=!0}return{dataChannel:Vt,sctpStreamParameters:{streamId:$t.id,ordered:$t.ordered,maxPacketLifeTime:$t.maxPacketLifeTime,maxRetransmits:$t.maxRetransmits}}}async receive(Ft){this.assertRecvDirection();const Lt=[];for(const $t of Ft){const{trackId:Vt,kind:Ut,rtpParameters:zt,streamId:Bt}=$t;It.debug("receive() [trackId:%s, kind:%s]",Vt,Ut);const Ht=Ut;this._remoteSdp.receive({mid:Ht,kind:Ut,offerRtpParameters:zt,streamId:Bt||zt.rtcp.cname,trackId:Vt})}const Mt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",Mt),await this._pc.setRemoteDescription(Mt);let Ot=await this._pc.createAnswer();const Nt=gt.parse(Ot.sdp);for(const $t of Ft){const{kind:Vt,rtpParameters:Ut}=$t,zt=Vt,Bt=Nt.media.find(Ht=>String(Ht.mid)===zt);wt.applyCodecParameters({offerRtpParameters:Ut,answerMediaObject:Bt})}Ot={type:"answer",sdp:gt.write(Nt)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Nt}),It.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Ot),await this._pc.setLocalDescription(Ot);for(const $t of Ft){const{kind:Vt,trackId:Ut,rtpParameters:zt}=$t,Bt=Vt,Ht=Ut,Gt=$t.streamId||zt.rtcp.cname,Xt=this._pc.getRemoteStreams().find(Zt=>Zt.id===Gt).getTrackById(Ht);if(!Xt)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(Ht,{mid:Bt,rtpParameters:zt}),Lt.push({localId:Ht,track:Xt})}return Lt}async stopReceiving(Ft){this.assertRecvDirection();for(const Ot of Ft){It.debug("stopReceiving() [localId:%s]",Ot);const{mid:Nt,rtpParameters:$t}=this._mapRecvLocalIdInfo.get(Ot)||{};this._mapRecvLocalIdInfo.delete(Ot),this._remoteSdp.planBStopReceiving({mid:Nt,offerRtpParameters:$t})}const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);const Mt=await this._pc.createAnswer();It.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Mt),await this._pc.setLocalDescription(Mt)}async pauseReceiving(Ft){}async resumeReceiving(Ft){}async getReceiverStats(Ft){throw new yt.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:Ft,label:Lt,protocol:Mt}){this.assertRecvDirection();const{streamId:Ot,ordered:Nt,maxPacketLifeTime:$t,maxRetransmits:Vt}=Ft,Ut={negotiated:!0,id:Ot,ordered:Nt,maxPacketLifeTime:$t,maxRetransmitTime:$t,maxRetransmits:Vt,protocol:Mt};It.debug("receiveDataChannel() [options:%o]",Ut);const zt=this._pc.createDataChannel(Lt,Ut);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const Bt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Bt),await this._pc.setRemoteDescription(Bt);const Ht=await this._pc.createAnswer();if(!this._transportReady){const Gt=gt.parse(Ht.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Gt})}It.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Ht),await this._pc.setLocalDescription(Ht),this._hasDataChannelMediaSection=!0}return{dataChannel:zt}}async setupTransport({localDtlsRole:Ft,localSdpObject:Lt}){Lt||(Lt=gt.parse(this._pc.localDescription.sdp));const Mt=wt.extractDtlsParameters({sdpObject:Lt});Mt.role=Ft,this._remoteSdp.updateDtlsRole(Ft==="client"?"server":"client"),await new Promise((Ot,Nt)=>{this.safeEmit("@connect",{dtlsParameters:Mt},Ot,Nt)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Chrome55=Dt},5697:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(Dt,jt,Ft,Lt){Lt===void 0&&(Lt=Ft);var Mt=Object.getOwnPropertyDescriptor(jt,Ft);Mt&&!("get"in Mt?!jt.__esModule:Mt.writable||Mt.configurable)||(Mt={enumerable:!0,get:function(){return jt[Ft]}}),Object.defineProperty(Dt,Lt,Mt)}:function(Dt,jt,Ft,Lt){Lt===void 0&&(Lt=Ft),Dt[Lt]=jt[Ft]}),pt=this&&this.__setModuleDefault||(Object.create?function(Dt,jt){Object.defineProperty(Dt,"default",{enumerable:!0,value:jt})}:function(Dt,jt){Dt.default=jt}),mt=this&&this.__importStar||function(Dt){if(Dt&&Dt.__esModule)return Dt;var jt={};if(Dt!=null)for(var Ft in Dt)Ft!=="default"&&Object.prototype.hasOwnProperty.call(Dt,Ft)&&ft(jt,Dt,Ft);return pt(jt,Dt),jt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Chrome67=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(2267)),wt=mt(ht(9875)),Et=ht(9316),Rt=ht(7910),Tt=new xt.Logger("Chrome67"),It={OS:1024,MIS:1024};class At extends Et.HandlerInterface{static createFactory(){return()=>new At}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome67"}close(){if(Tt.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Tt.debug("getNativeRtpCapabilities()");const jt=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const Ft=await jt.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{jt.close()}catch{}const Lt=gt.parse(Ft.sdp);return St.extractRtpCapabilities({sdpObject:Lt})}catch(Ft){try{jt.close()}catch{}throw Ft}}async getNativeSctpCapabilities(){return Tt.debug("getNativeSctpCapabilities()"),{numStreams:It}}run({direction:jt,iceParameters:Ft,iceCandidates:Lt,dtlsParameters:Mt,sctpParameters:Ot,iceServers:Nt,iceTransportPolicy:$t,additionalSettings:Vt,proprietaryConstraints:Ut,extendedRtpCapabilities:zt}){Tt.debug("run()"),this._direction=jt,this._remoteSdp=new Rt.RemoteSdp({iceParameters:Ft,iceCandidates:Lt,dtlsParameters:Mt,sctpParameters:Ot,planB:!0}),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",zt),video:vt.getSendingRtpParameters("video",zt)},this._sendingRemoteRtpParametersByKind={audio:vt.getSendingRemoteRtpParameters("audio",zt),video:vt.getSendingRemoteRtpParameters("video",zt)},Mt.role&&Mt.role!=="auto"&&(this._forcedLocalDtlsRole=Mt.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:Nt||[],iceTransportPolicy:$t||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...Vt},Ut),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Tt.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(jt){Tt.debug("updateIceServers()");const Ft=this._pc.getConfiguration();Ft.iceServers=jt,this._pc.setConfiguration(Ft)}async restartIce(jt){if(Tt.debug("restartIce()"),this._remoteSdp.updateIceParameters(jt),this._transportReady)if(this._direction==="send"){const Ft=await this._pc.createOffer({iceRestart:!0});Tt.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Ft),await this._pc.setLocalDescription(Ft);const Lt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Lt),await this._pc.setRemoteDescription(Lt)}else{const Ft={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Ft),await this._pc.setRemoteDescription(Ft);const Lt=await this._pc.createAnswer();Tt.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Lt),await this._pc.setLocalDescription(Lt)}}async getTransportStats(){return this._pc.getStats()}async send({track:jt,encodings:Ft,codecOptions:Lt,codec:Mt}){this.assertSendDirection(),Tt.debug("send() [kind:%s, track.id:%s]",jt.kind,jt.id),Mt&&Tt.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(jt),this._pc.addTrack(jt,this._sendStream);let Ot,Nt=await this._pc.createOffer(),$t=gt.parse(Nt.sdp);const Vt=yt.clone(this._sendingRtpParametersByKind[jt.kind]);Vt.codecs=vt.reduceCodecs(Vt.codecs);const Ut=yt.clone(this._sendingRemoteRtpParametersByKind[jt.kind]);if(Ut.codecs=vt.reduceCodecs(Ut.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$t}),jt.kind==="video"&&Ft&&Ft.length>1&&(Tt.debug("send() | enabling simulcast"),$t=gt.parse(Nt.sdp),Ot=$t.media.find(Gt=>Gt.type==="video"),wt.addLegacySimulcast({offerMediaObject:Ot,track:jt,numStreams:Ft.length}),Nt={type:"offer",sdp:gt.write($t)}),Tt.debug("send() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt),$t=gt.parse(this._pc.localDescription.sdp),Ot=$t.media.find(Gt=>Gt.type===jt.kind),Vt.rtcp.cname=St.getCname({offerMediaObject:Ot}),Vt.encodings=wt.getRtpEncodings({offerMediaObject:Ot,track:jt}),Ft)for(let Gt=0;Gt<Vt.encodings.length;++Gt)Ft[Gt]&&Object.assign(Vt.encodings[Gt],Ft[Gt]);if(Vt.encodings.length>1&&Vt.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const Gt of Vt.encodings)Gt.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Ot,offerRtpParameters:Vt,answerRtpParameters:Ut,codecOptions:Lt});const zt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("send() | calling pc.setRemoteDescription() [answer:%o]",zt),await this._pc.setRemoteDescription(zt);const Bt=String(this._nextSendLocalId);this._nextSendLocalId++;const Ht=this._pc.getSenders().find(Gt=>Gt.track===jt);return this._mapSendLocalIdRtpSender.set(Bt,Ht),{localId:Bt,rtpParameters:Vt,rtpSender:Ht}}async stopSending(jt){this.assertSendDirection(),Tt.debug("stopSending() [localId:%s]",jt);const Ft=this._mapSendLocalIdRtpSender.get(jt);if(!Ft)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(Ft),Ft.track&&this._sendStream.removeTrack(Ft.track),this._mapSendLocalIdRtpSender.delete(jt);const Lt=await this._pc.createOffer();Tt.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Lt);try{await this._pc.setLocalDescription(Lt)}catch(Ot){if(this._sendStream.getTracks().length===0)return void Tt.warn("stopSending() | ignoring expected error due no sending tracks: %s",Ot.toString());throw Ot}if(this._pc.signalingState==="stable")return;const Mt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",Mt),await this._pc.setRemoteDescription(Mt)}async pauseSending(jt){}async resumeSending(jt){}async replaceTrack(jt,Ft){this.assertSendDirection(),Ft?Tt.debug("replaceTrack() [localId:%s, track.id:%s]",jt,Ft.id):Tt.debug("replaceTrack() [localId:%s, no track]",jt);const Lt=this._mapSendLocalIdRtpSender.get(jt);if(!Lt)throw new Error("associated RTCRtpSender not found");const Mt=Lt.track;await Lt.replaceTrack(Ft),Mt&&this._sendStream.removeTrack(Mt),Ft&&this._sendStream.addTrack(Ft)}async setMaxSpatialLayer(jt,Ft){this.assertSendDirection(),Tt.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",jt,Ft);const Lt=this._mapSendLocalIdRtpSender.get(jt);if(!Lt)throw new Error("associated RTCRtpSender not found");const Mt=Lt.getParameters();Mt.encodings.forEach((Ot,Nt)=>{Ot.active=Nt<=Ft}),await Lt.setParameters(Mt)}async setRtpEncodingParameters(jt,Ft){this.assertSendDirection(),Tt.debug("setRtpEncodingParameters() [localId:%s, params:%o]",jt,Ft);const Lt=this._mapSendLocalIdRtpSender.get(jt);if(!Lt)throw new Error("associated RTCRtpSender not found");const Mt=Lt.getParameters();Mt.encodings.forEach((Ot,Nt)=>{Mt.encodings[Nt]={...Ot,...Ft}}),await Lt.setParameters(Mt)}async getSenderStats(jt){this.assertSendDirection();const Ft=this._mapSendLocalIdRtpSender.get(jt);if(!Ft)throw new Error("associated RTCRtpSender not found");return Ft.getStats()}async sendDataChannel({ordered:jt,maxPacketLifeTime:Ft,maxRetransmits:Lt,label:Mt,protocol:Ot}){this.assertSendDirection();const Nt={negotiated:!0,id:this._nextSendSctpStreamId,ordered:jt,maxPacketLifeTime:Ft,maxRetransmitTime:Ft,maxRetransmits:Lt,protocol:Ot};Tt.debug("sendDataChannel() [options:%o]",Nt);const $t=this._pc.createDataChannel(Mt,Nt);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%It.MIS,!this._hasDataChannelMediaSection){const Vt=await this._pc.createOffer(),Ut=gt.parse(Vt.sdp),zt=Ut.media.find(Ht=>Ht.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ut}),Tt.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt),this._remoteSdp.sendSctpAssociation({offerMediaObject:zt});const Bt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Bt),await this._pc.setRemoteDescription(Bt),this._hasDataChannelMediaSection=!0}return{dataChannel:$t,sctpStreamParameters:{streamId:Nt.id,ordered:Nt.ordered,maxPacketLifeTime:Nt.maxPacketLifeTime,maxRetransmits:Nt.maxRetransmits}}}async receive(jt){this.assertRecvDirection();const Ft=[];for(const Nt of jt){const{trackId:$t,kind:Vt,rtpParameters:Ut,streamId:zt}=Nt;Tt.debug("receive() [trackId:%s, kind:%s]",$t,Vt);const Bt=Vt;this._remoteSdp.receive({mid:Bt,kind:Vt,offerRtpParameters:Ut,streamId:zt||Ut.rtcp.cname,trackId:$t})}const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);let Mt=await this._pc.createAnswer();const Ot=gt.parse(Mt.sdp);for(const Nt of jt){const{kind:$t,rtpParameters:Vt}=Nt,Ut=$t,zt=Ot.media.find(Bt=>String(Bt.mid)===Ut);St.applyCodecParameters({offerRtpParameters:Vt,answerMediaObject:zt})}Mt={type:"answer",sdp:gt.write(Ot)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ot}),Tt.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Mt),await this._pc.setLocalDescription(Mt);for(const Nt of jt){const{kind:$t,trackId:Vt,rtpParameters:Ut}=Nt,zt=Vt,Bt=$t,Ht=this._pc.getReceivers().find(Gt=>Gt.track&&Gt.track.id===zt);if(!Ht)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(zt,{mid:Bt,rtpParameters:Ut,rtpReceiver:Ht}),Ft.push({localId:zt,track:Ht.track,rtpReceiver:Ht})}return Ft}async stopReceiving(jt){this.assertRecvDirection();for(const Mt of jt){Tt.debug("stopReceiving() [localId:%s]",Mt);const{mid:Ot,rtpParameters:Nt}=this._mapRecvLocalIdInfo.get(Mt)||{};this._mapRecvLocalIdInfo.delete(Mt),this._remoteSdp.planBStopReceiving({mid:Ot,offerRtpParameters:Nt})}const Ft={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ft),await this._pc.setRemoteDescription(Ft);const Lt=await this._pc.createAnswer();Tt.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Lt),await this._pc.setLocalDescription(Lt)}async pauseReceiving(jt){}async resumeReceiving(jt){}async getReceiverStats(jt){this.assertRecvDirection();const{rtpReceiver:Ft}=this._mapRecvLocalIdInfo.get(jt)||{};if(!Ft)throw new Error("associated RTCRtpReceiver not found");return Ft.getStats()}async receiveDataChannel({sctpStreamParameters:jt,label:Ft,protocol:Lt}){this.assertRecvDirection();const{streamId:Mt,ordered:Ot,maxPacketLifeTime:Nt,maxRetransmits:$t}=jt,Vt={negotiated:!0,id:Mt,ordered:Ot,maxPacketLifeTime:Nt,maxRetransmitTime:Nt,maxRetransmits:$t,protocol:Lt};Tt.debug("receiveDataChannel() [options:%o]",Vt);const Ut=this._pc.createDataChannel(Ft,Vt);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const zt={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",zt),await this._pc.setRemoteDescription(zt);const Bt=await this._pc.createAnswer();if(!this._transportReady){const Ht=gt.parse(Bt.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ht})}Tt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Bt),await this._pc.setLocalDescription(Bt),this._hasDataChannelMediaSection=!0}return{dataChannel:Ut}}async setupTransport({localDtlsRole:jt,localSdpObject:Ft}){Ft||(Ft=gt.parse(this._pc.localDescription.sdp));const Lt=St.extractDtlsParameters({sdpObject:Ft});Lt.role=jt,this._remoteSdp.updateDtlsRole(jt==="client"?"server":"client"),await new Promise((Mt,Ot)=>{this.safeEmit("@connect",{dtlsParameters:Lt},Mt,Ot)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Chrome67=At},5372:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(jt,Ft,Lt,Mt){Mt===void 0&&(Mt=Lt);var Ot=Object.getOwnPropertyDescriptor(Ft,Lt);Ot&&!("get"in Ot?!Ft.__esModule:Ot.writable||Ot.configurable)||(Ot={enumerable:!0,get:function(){return Ft[Lt]}}),Object.defineProperty(jt,Mt,Ot)}:function(jt,Ft,Lt,Mt){Mt===void 0&&(Mt=Lt),jt[Mt]=Ft[Lt]}),pt=this&&this.__setModuleDefault||(Object.create?function(jt,Ft){Object.defineProperty(jt,"default",{enumerable:!0,value:Ft})}:function(jt,Ft){jt.default=Ft}),mt=this&&this.__importStar||function(jt){if(jt&&jt.__esModule)return jt;var Ft={};if(jt!=null)for(var Lt in jt)Lt!=="default"&&Object.prototype.hasOwnProperty.call(jt,Lt)&&ft(Ft,jt,Lt);return pt(Ft,jt),Ft};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Chrome70=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(2267)),wt=mt(ht(9072)),Et=ht(9316),Rt=ht(7910),Tt=ht(2770),It=new xt.Logger("Chrome70"),At={OS:1024,MIS:1024};class Dt extends Et.HandlerInterface{static createFactory(){return()=>new Dt}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(It.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){It.debug("getNativeRtpCapabilities()");const Ft=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{Ft.addTransceiver("audio"),Ft.addTransceiver("video");const Lt=await Ft.createOffer();try{Ft.close()}catch{}const Mt=gt.parse(Lt.sdp);return St.extractRtpCapabilities({sdpObject:Mt})}catch(Lt){try{Ft.close()}catch{}throw Lt}}async getNativeSctpCapabilities(){return It.debug("getNativeSctpCapabilities()"),{numStreams:At}}run({direction:Ft,iceParameters:Lt,iceCandidates:Mt,dtlsParameters:Ot,sctpParameters:Nt,iceServers:$t,iceTransportPolicy:Vt,additionalSettings:Ut,proprietaryConstraints:zt,extendedRtpCapabilities:Bt}){It.debug("run()"),this._direction=Ft,this._remoteSdp=new Rt.RemoteSdp({iceParameters:Lt,iceCandidates:Mt,dtlsParameters:Ot,sctpParameters:Nt}),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",Bt),video:vt.getSendingRtpParameters("video",Bt)},this._sendingRemoteRtpParametersByKind={audio:vt.getSendingRemoteRtpParameters("audio",Bt),video:vt.getSendingRemoteRtpParameters("video",Bt)},Ot.role&&Ot.role!=="auto"&&(this._forcedLocalDtlsRole=Ot.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:$t||[],iceTransportPolicy:Vt||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...Ut},zt),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(It.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(Ft){It.debug("updateIceServers()");const Lt=this._pc.getConfiguration();Lt.iceServers=Ft,this._pc.setConfiguration(Lt)}async restartIce(Ft){if(It.debug("restartIce()"),this._remoteSdp.updateIceParameters(Ft),this._transportReady)if(this._direction==="send"){const Lt=await this._pc.createOffer({iceRestart:!0});It.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Lt),await this._pc.setLocalDescription(Lt);const Mt={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Mt),await this._pc.setRemoteDescription(Mt)}else{const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);const Mt=await this._pc.createAnswer();It.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Mt),await this._pc.setLocalDescription(Mt)}}async getTransportStats(){return this._pc.getStats()}async send({track:Ft,encodings:Lt,codecOptions:Mt,codec:Ot}){this.assertSendDirection(),It.debug("send() [kind:%s, track.id:%s]",Ft.kind,Ft.id);const Nt=yt.clone(this._sendingRtpParametersByKind[Ft.kind]);Nt.codecs=vt.reduceCodecs(Nt.codecs,Ot);const $t=yt.clone(this._sendingRemoteRtpParametersByKind[Ft.kind]);$t.codecs=vt.reduceCodecs($t.codecs,Ot);const Vt=this._remoteSdp.getNextMediaSectionIdx(),Ut=this._pc.addTransceiver(Ft,{direction:"sendonly",streams:[this._sendStream]});let zt,Bt=await this._pc.createOffer(),Ht=gt.parse(Bt.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ht}),Lt&&Lt.length>1&&(It.debug("send() | enabling legacy simulcast"),Ht=gt.parse(Bt.sdp),zt=Ht.media[Vt.idx],wt.addLegacySimulcast({offerMediaObject:zt,numStreams:Lt.length}),Bt={type:"offer",sdp:gt.write(Ht)});let Gt=!1;const Xt=(0,Tt.parse)((Lt||[{}])[0].scalabilityMode);if(Lt&&Lt.length===1&&Xt.spatialLayers>1&&Nt.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(It.debug("send() | enabling legacy simulcast for VP9 SVC"),Gt=!0,Ht=gt.parse(Bt.sdp),zt=Ht.media[Vt.idx],wt.addLegacySimulcast({offerMediaObject:zt,numStreams:Xt.spatialLayers}),Bt={type:"offer",sdp:gt.write(Ht)}),It.debug("send() | calling pc.setLocalDescription() [offer:%o]",Bt),await this._pc.setLocalDescription(Bt),Lt){It.debug("send() | applying given encodings");const nr=Ut.sender.getParameters();for(let ir=0;ir<(nr.encodings||[]).length;++ir){const yr=nr.encodings[ir],Cr=Lt[ir];if(!Cr)break;nr.encodings[ir]=Object.assign(yr,Cr)}await Ut.sender.setParameters(nr)}const Zt=Ut.mid;if(Nt.mid=Zt,Ht=gt.parse(this._pc.localDescription.sdp),zt=Ht.media[Vt.idx],Nt.rtcp.cname=St.getCname({offerMediaObject:zt}),Nt.encodings=wt.getRtpEncodings({offerMediaObject:zt}),Lt)for(let nr=0;nr<Nt.encodings.length;++nr)Lt[nr]&&Object.assign(Nt.encodings[nr],Lt[nr]);if(Gt&&(Nt.encodings=[Nt.encodings[0]]),Nt.encodings.length>1&&(Nt.codecs[0].mimeType.toLowerCase()==="video/vp8"||Nt.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const nr of Nt.encodings)nr.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:zt,reuseMid:Vt.reuseMid,offerRtpParameters:Nt,answerRtpParameters:$t,codecOptions:Mt});const hr={type:"answer",sdp:this._remoteSdp.getSdp()};return It.debug("send() | calling pc.setRemoteDescription() [answer:%o]",hr),await this._pc.setRemoteDescription(hr),this._mapMidTransceiver.set(Zt,Ut),{localId:Zt,rtpParameters:Nt,rtpSender:Ut.sender}}async stopSending(Ft){this.assertSendDirection(),It.debug("stopSending() [localId:%s]",Ft);const Lt=this._mapMidTransceiver.get(Ft);if(!Lt)throw new Error("associated RTCRtpTransceiver not found");if(Lt.sender.replaceTrack(null),this._pc.removeTrack(Lt.sender),this._remoteSdp.closeMediaSection(Lt.mid))try{Lt.stop()}catch{}const Mt=await this._pc.createOffer();It.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Mt),await this._pc.setLocalDescription(Mt);const Ot={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",Ot),await this._pc.setRemoteDescription(Ot),this._mapMidTransceiver.delete(Ft)}async pauseSending(Ft){}async resumeSending(Ft){}async replaceTrack(Ft,Lt){this.assertSendDirection(),Lt?It.debug("replaceTrack() [localId:%s, track.id:%s]",Ft,Lt.id):It.debug("replaceTrack() [localId:%s, no track]",Ft);const Mt=this._mapMidTransceiver.get(Ft);if(!Mt)throw new Error("associated RTCRtpTransceiver not found");await Mt.sender.replaceTrack(Lt)}async setMaxSpatialLayer(Ft,Lt){this.assertSendDirection(),It.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",Ft,Lt);const Mt=this._mapMidTransceiver.get(Ft);if(!Mt)throw new Error("associated RTCRtpTransceiver not found");const Ot=Mt.sender.getParameters();Ot.encodings.forEach((Vt,Ut)=>{Vt.active=Ut<=Lt}),await Mt.sender.setParameters(Ot),this._remoteSdp.muxMediaSectionSimulcast(Ft,Ot.encodings);const Nt=await this._pc.createOffer();It.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async setRtpEncodingParameters(Ft,Lt){this.assertSendDirection(),It.debug("setRtpEncodingParameters() [localId:%s, params:%o]",Ft,Lt);const Mt=this._mapMidTransceiver.get(Ft);if(!Mt)throw new Error("associated RTCRtpTransceiver not found");const Ot=Mt.sender.getParameters();Ot.encodings.forEach((Vt,Ut)=>{Ot.encodings[Ut]={...Vt,...Lt}}),await Mt.sender.setParameters(Ot),this._remoteSdp.muxMediaSectionSimulcast(Ft,Ot.encodings);const Nt=await this._pc.createOffer();It.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async getSenderStats(Ft){this.assertSendDirection();const Lt=this._mapMidTransceiver.get(Ft);if(!Lt)throw new Error("associated RTCRtpTransceiver not found");return Lt.sender.getStats()}async sendDataChannel({ordered:Ft,maxPacketLifeTime:Lt,maxRetransmits:Mt,label:Ot,protocol:Nt}){this.assertSendDirection();const $t={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Ft,maxPacketLifeTime:Lt,maxRetransmitTime:Lt,maxRetransmits:Mt,protocol:Nt};It.debug("sendDataChannel() [options:%o]",$t);const Vt=this._pc.createDataChannel(Ot,$t);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%At.MIS,!this._hasDataChannelMediaSection){const Ut=await this._pc.createOffer(),zt=gt.parse(Ut.sdp),Bt=zt.media.find(Gt=>Gt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:zt}),It.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Ut),await this._pc.setLocalDescription(Ut),this._remoteSdp.sendSctpAssociation({offerMediaObject:Bt});const Ht={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Ht),await this._pc.setRemoteDescription(Ht),this._hasDataChannelMediaSection=!0}return{dataChannel:Vt,sctpStreamParameters:{streamId:$t.id,ordered:$t.ordered,maxPacketLifeTime:$t.maxPacketLifeTime,maxRetransmits:$t.maxRetransmits}}}async receive(Ft){this.assertRecvDirection();const Lt=[],Mt=new Map;for(const Vt of Ft){const{trackId:Ut,kind:zt,rtpParameters:Bt,streamId:Ht}=Vt;It.debug("receive() [trackId:%s, kind:%s]",Ut,zt);const Gt=Bt.mid||String(this._mapMidTransceiver.size);Mt.set(Ut,Gt),this._remoteSdp.receive({mid:Gt,kind:zt,offerRtpParameters:Bt,streamId:Ht||Bt.rtcp.cname,trackId:Ut})}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);let Nt=await this._pc.createAnswer();const $t=gt.parse(Nt.sdp);for(const Vt of Ft){const{trackId:Ut,rtpParameters:zt}=Vt,Bt=Mt.get(Ut),Ht=$t.media.find(Gt=>String(Gt.mid)===Bt);St.applyCodecParameters({offerRtpParameters:zt,answerMediaObject:Ht})}Nt={type:"answer",sdp:gt.write($t)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$t}),It.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt);for(const Vt of Ft){const{trackId:Ut}=Vt,zt=Mt.get(Ut),Bt=this._pc.getTransceivers().find(Ht=>Ht.mid===zt);if(!Bt)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(zt,Bt),Lt.push({localId:zt,track:Bt.receiver.track,rtpReceiver:Bt.receiver})}return Lt}async stopReceiving(Ft){this.assertRecvDirection();for(const Ot of Ft){It.debug("stopReceiving() [localId:%s]",Ot);const Nt=this._mapMidTransceiver.get(Ot);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(Nt.mid)}const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);const Mt=await this._pc.createAnswer();It.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Mt),await this._pc.setLocalDescription(Mt);for(const Ot of Ft)this._mapMidTransceiver.delete(Ot)}async pauseReceiving(Ft){}async resumeReceiving(Ft){}async getReceiverStats(Ft){this.assertRecvDirection();const Lt=this._mapMidTransceiver.get(Ft);if(!Lt)throw new Error("associated RTCRtpTransceiver not found");return Lt.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:Ft,label:Lt,protocol:Mt}){this.assertRecvDirection();const{streamId:Ot,ordered:Nt,maxPacketLifeTime:$t,maxRetransmits:Vt}=Ft,Ut={negotiated:!0,id:Ot,ordered:Nt,maxPacketLifeTime:$t,maxRetransmitTime:$t,maxRetransmits:Vt,protocol:Mt};It.debug("receiveDataChannel() [options:%o]",Ut);const zt=this._pc.createDataChannel(Lt,Ut);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Bt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Bt),await this._pc.setRemoteDescription(Bt);const Ht=await this._pc.createAnswer();if(!this._transportReady){const Gt=gt.parse(Ht.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Gt})}It.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Ht),await this._pc.setLocalDescription(Ht),this._hasDataChannelMediaSection=!0}return{dataChannel:zt}}async setupTransport({localDtlsRole:Ft,localSdpObject:Lt}){Lt||(Lt=gt.parse(this._pc.localDescription.sdp));const Mt=St.extractDtlsParameters({sdpObject:Lt});Mt.role=Ft,this._remoteSdp.updateDtlsRole(Ft==="client"?"server":"client"),await new Promise((Ot,Nt)=>{this.safeEmit("@connect",{dtlsParameters:Mt},Ot,Nt)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Chrome70=Dt},6656:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(Lt,Mt,Ot,Nt){Nt===void 0&&(Nt=Ot);var $t=Object.getOwnPropertyDescriptor(Mt,Ot);$t&&!("get"in $t?!Mt.__esModule:$t.writable||$t.configurable)||($t={enumerable:!0,get:function(){return Mt[Ot]}}),Object.defineProperty(Lt,Nt,$t)}:function(Lt,Mt,Ot,Nt){Nt===void 0&&(Nt=Ot),Lt[Nt]=Mt[Ot]}),pt=this&&this.__setModuleDefault||(Object.create?function(Lt,Mt){Object.defineProperty(Lt,"default",{enumerable:!0,value:Mt})}:function(Lt,Mt){Lt.default=Mt}),mt=this&&this.__importStar||function(Lt){if(Lt&&Lt.__esModule)return Lt;var Mt={};if(Lt!=null)for(var Ot in Lt)Ot!=="default"&&Object.prototype.hasOwnProperty.call(Lt,Ot)&&ft(Mt,Lt,Ot);return pt(Mt,Lt),Mt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Chrome74=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(2267)),wt=mt(ht(9072)),Et=mt(ht(8954)),Rt=ht(9992),Tt=ht(9316),It=ht(7910),At=ht(2770),Dt=new xt.Logger("Chrome74"),jt={OS:1024,MIS:1024};class Ft extends Tt.HandlerInterface{static createFactory(){return()=>new Ft}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(Dt.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){Dt.debug("getNativeRtpCapabilities()");const Mt=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{Mt.addTransceiver("audio"),Mt.addTransceiver("video");const Ot=await Mt.createOffer();try{Mt.close()}catch{}const Nt=gt.parse(Ot.sdp),$t=St.extractRtpCapabilities({sdpObject:Nt});return Et.addNackSuppportForOpus($t),$t}catch(Ot){try{Mt.close()}catch{}throw Ot}}async getNativeSctpCapabilities(){return Dt.debug("getNativeSctpCapabilities()"),{numStreams:jt}}run({direction:Mt,iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt,iceServers:Ut,iceTransportPolicy:zt,additionalSettings:Bt,proprietaryConstraints:Ht,extendedRtpCapabilities:Gt}){Dt.debug("run()"),this._direction=Mt,this._remoteSdp=new It.RemoteSdp({iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt}),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",Gt),video:vt.getSendingRtpParameters("video",Gt)},this._sendingRemoteRtpParametersByKind={audio:vt.getSendingRemoteRtpParameters("audio",Gt),video:vt.getSendingRemoteRtpParameters("video",Gt)},$t.role&&$t.role!=="auto"&&(this._forcedLocalDtlsRole=$t.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:Ut||[],iceTransportPolicy:zt||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...Bt},Ht),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(Dt.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(Mt){this.assertNotClosed(),Dt.debug("updateIceServers()");const Ot=this._pc.getConfiguration();Ot.iceServers=Mt,this._pc.setConfiguration(Ot)}async restartIce(Mt){if(this.assertNotClosed(),Dt.debug("restartIce()"),this._remoteSdp.updateIceParameters(Mt),this._transportReady)if(this._direction==="send"){const Ot=await this._pc.createOffer({iceRestart:!0});Dt.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Ot),await this._pc.setLocalDescription(Ot);const Nt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Nt),await this._pc.setRemoteDescription(Nt)}else{const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:Mt,encodings:Ot,codecOptions:Nt,codec:$t}){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("send() [kind:%s, track.id:%s]",Mt.kind,Mt.id),Ot&&Ot.length>1&&Ot.forEach((yr,Cr)=>{yr.rid=`r${Cr}`});const Vt=yt.clone(this._sendingRtpParametersByKind[Mt.kind]);Vt.codecs=vt.reduceCodecs(Vt.codecs,$t);const Ut=yt.clone(this._sendingRemoteRtpParametersByKind[Mt.kind]);Ut.codecs=vt.reduceCodecs(Ut.codecs,$t);const zt=this._remoteSdp.getNextMediaSectionIdx(),Bt=this._pc.addTransceiver(Mt,{direction:"sendonly",streams:[this._sendStream],sendEncodings:Ot});let Ht,Gt=await this._pc.createOffer(),Xt=gt.parse(Gt.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Xt});let Zt=!1;const hr=(0,At.parse)((Ot||[{}])[0].scalabilityMode);Ot&&Ot.length===1&&hr.spatialLayers>1&&Vt.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(Dt.debug("send() | enabling legacy simulcast for VP9 SVC"),Zt=!0,Xt=gt.parse(Gt.sdp),Ht=Xt.media[zt.idx],wt.addLegacySimulcast({offerMediaObject:Ht,numStreams:hr.spatialLayers}),Gt={type:"offer",sdp:gt.write(Xt)}),Dt.debug("send() | calling pc.setLocalDescription() [offer:%o]",Gt),await this._pc.setLocalDescription(Gt);const nr=Bt.mid;if(Vt.mid=nr,Xt=gt.parse(this._pc.localDescription.sdp),Ht=Xt.media[zt.idx],Vt.rtcp.cname=St.getCname({offerMediaObject:Ht}),Ot)if(Ot.length===1){let yr=wt.getRtpEncodings({offerMediaObject:Ht});Object.assign(yr[0],Ot[0]),Zt&&(yr=[yr[0]]),Vt.encodings=yr}else Vt.encodings=Ot;else Vt.encodings=wt.getRtpEncodings({offerMediaObject:Ht});if(Vt.encodings.length>1&&(Vt.codecs[0].mimeType.toLowerCase()==="video/vp8"||Vt.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const yr of Vt.encodings)yr.scalabilityMode?yr.scalabilityMode=`L1T${hr.temporalLayers}`:yr.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Ht,reuseMid:zt.reuseMid,offerRtpParameters:Vt,answerRtpParameters:Ut,codecOptions:Nt,extmapAllowMixed:!0});const ir={type:"answer",sdp:this._remoteSdp.getSdp()};return Dt.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ir),await this._pc.setRemoteDescription(ir),this._mapMidTransceiver.set(nr,Bt),{localId:nr,rtpParameters:Vt,rtpSender:Bt.sender}}async stopSending(Mt){if(this.assertSendDirection(),Dt.debug("stopSending() [localId:%s]",Mt),this._closed)return;const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");if(Ot.sender.replaceTrack(null),this._pc.removeTrack(Ot.sender),this._remoteSdp.closeMediaSection(Ot.mid))try{Ot.stop()}catch{}const Nt=await this._pc.createOffer();Dt.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t),this._mapMidTransceiver.delete(Mt)}async pauseSending(Mt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("pauseSending() [localId:%s]",Mt);const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="inactive",this._remoteSdp.pauseMediaSection(Mt);const Nt=await this._pc.createOffer();Dt.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async resumeSending(Mt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("resumeSending() [localId:%s]",Mt);const Ot=this._mapMidTransceiver.get(Mt);if(this._remoteSdp.resumeSendingMediaSection(Mt),!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="sendonly";const Nt=await this._pc.createOffer();Dt.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async replaceTrack(Mt,Ot){this.assertNotClosed(),this.assertSendDirection(),Ot?Dt.debug("replaceTrack() [localId:%s, track.id:%s]",Mt,Ot.id):Dt.debug("replaceTrack() [localId:%s, no track]",Mt);const Nt=this._mapMidTransceiver.get(Mt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");await Nt.sender.replaceTrack(Ot)}async setMaxSpatialLayer(Mt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",Mt,Ot);const Nt=this._mapMidTransceiver.get(Mt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{zt.active=Bt<=Ot}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Mt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async setRtpEncodingParameters(Mt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setRtpEncodingParameters() [localId:%s, params:%o]",Mt,Ot);const Nt=this._mapMidTransceiver.get(Mt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{$t.encodings[Bt]={...zt,...Ot}}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Mt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async getSenderStats(Mt){this.assertNotClosed(),this.assertSendDirection();const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.sender.getStats()}async sendDataChannel({ordered:Mt,maxPacketLifeTime:Ot,maxRetransmits:Nt,label:$t,protocol:Vt}){this.assertNotClosed(),this.assertSendDirection();const Ut={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Mt,maxPacketLifeTime:Ot,maxRetransmits:Nt,protocol:Vt};Dt.debug("sendDataChannel() [options:%o]",Ut);const zt=this._pc.createDataChannel($t,Ut);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%jt.MIS,!this._hasDataChannelMediaSection){const Bt=await this._pc.createOffer(),Ht=gt.parse(Bt.sdp),Gt=Ht.media.find(Zt=>Zt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ht}),Dt.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Bt),await this._pc.setLocalDescription(Bt),this._remoteSdp.sendSctpAssociation({offerMediaObject:Gt});const Xt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Xt),await this._pc.setRemoteDescription(Xt),this._hasDataChannelMediaSection=!0}return{dataChannel:zt,sctpStreamParameters:{streamId:Ut.id,ordered:Ut.ordered,maxPacketLifeTime:Ut.maxPacketLifeTime,maxRetransmits:Ut.maxRetransmits}}}async receive(Mt){this.assertNotClosed(),this.assertRecvDirection();const Ot=[],Nt=new Map;for(const zt of Mt){const{trackId:Bt,kind:Ht,rtpParameters:Gt,streamId:Xt}=zt;Dt.debug("receive() [trackId:%s, kind:%s]",Bt,Ht);const Zt=Gt.mid||String(this._mapMidTransceiver.size);Nt.set(Bt,Zt),this._remoteSdp.receive({mid:Zt,kind:Ht,offerRtpParameters:Gt,streamId:Xt||Gt.rtcp.cname,trackId:Bt})}const $t={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",$t),await this._pc.setRemoteDescription($t);let Vt=await this._pc.createAnswer();const Ut=gt.parse(Vt.sdp);for(const zt of Mt){const{trackId:Bt,rtpParameters:Ht}=zt,Gt=Nt.get(Bt),Xt=Ut.media.find(Zt=>String(Zt.mid)===Gt);St.applyCodecParameters({offerRtpParameters:Ht,answerMediaObject:Xt})}Vt={type:"answer",sdp:gt.write(Ut)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ut}),Dt.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Vt),await this._pc.setLocalDescription(Vt);for(const zt of Mt){const{trackId:Bt}=zt,Ht=Nt.get(Bt),Gt=this._pc.getTransceivers().find(Xt=>Xt.mid===Ht);if(!Gt)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(Ht,Gt),Ot.push({localId:Ht,track:Gt.receiver.track,rtpReceiver:Gt.receiver})}return Ot}async stopReceiving(Mt){if(this.assertRecvDirection(),this._closed)return;for(const $t of Mt){Dt.debug("stopReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(Vt.mid)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt);for(const $t of Mt)this._mapMidTransceiver.delete($t)}async pauseReceiving(Mt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Mt){Dt.debug("pauseReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="inactive",this._remoteSdp.pauseMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async resumeReceiving(Mt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Mt){Dt.debug("resumeReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async getReceiverStats(Mt){this.assertNotClosed(),this.assertRecvDirection();const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:Mt,label:Ot,protocol:Nt}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt}=Mt,Bt={negotiated:!0,id:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt,protocol:Nt};Dt.debug("receiveDataChannel() [options:%o]",Bt);const Ht=this._pc.createDataChannel(Ot,Bt);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Gt={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Gt),await this._pc.setRemoteDescription(Gt);const Xt=await this._pc.createAnswer();if(!this._transportReady){const Zt=gt.parse(Xt.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Zt})}Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Xt),await this._pc.setLocalDescription(Xt),this._hasDataChannelMediaSection=!0}return{dataChannel:Ht}}async setupTransport({localDtlsRole:Mt,localSdpObject:Ot}){Ot||(Ot=gt.parse(this._pc.localDescription.sdp));const Nt=St.extractDtlsParameters({sdpObject:Ot});Nt.role=Mt,this._remoteSdp.updateDtlsRole(Mt==="client"?"server":"client"),await new Promise(($t,Vt)=>{this.safeEmit("@connect",{dtlsParameters:Nt},$t,Vt)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new Rt.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Chrome74=Ft},7392:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(Tt,It,At,Dt){Dt===void 0&&(Dt=At);var jt=Object.getOwnPropertyDescriptor(It,At);jt&&!("get"in jt?!It.__esModule:jt.writable||jt.configurable)||(jt={enumerable:!0,get:function(){return It[At]}}),Object.defineProperty(Tt,Dt,jt)}:function(Tt,It,At,Dt){Dt===void 0&&(Dt=At),Tt[Dt]=It[At]}),pt=this&&this.__setModuleDefault||(Object.create?function(Tt,It){Object.defineProperty(Tt,"default",{enumerable:!0,value:It})}:function(Tt,It){Tt.default=It}),mt=this&&this.__importStar||function(Tt){if(Tt&&Tt.__esModule)return Tt;var It={};if(Tt!=null)for(var At in Tt)At!=="default"&&Object.prototype.hasOwnProperty.call(Tt,At)&&ft(It,Tt,At);return pt(It,Tt),It};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Edge11=void 0;const gt=ht(8562),xt=ht(9992),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(3635)),wt=ht(9316),Et=new gt.Logger("Edge11");class Rt extends wt.HandlerInterface{static createFactory(){return()=>new Rt}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){Et.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const It of this._rtpSenders.values())try{It.stop()}catch{}for(const It of this._rtpReceivers.values())try{It.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return Et.debug("getNativeRtpCapabilities()"),St.getCapabilities()}async getNativeSctpCapabilities(){return Et.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:It,iceParameters:At,iceCandidates:Dt,dtlsParameters:jt,sctpParameters:Ft,iceServers:Lt,iceTransportPolicy:Mt,additionalSettings:Ot,proprietaryConstraints:Nt,extendedRtpCapabilities:$t}){Et.debug("run()"),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",$t),video:vt.getSendingRtpParameters("video",$t)},this._remoteIceParameters=At,this._remoteIceCandidates=Dt,this._remoteDtlsParameters=jt,this._cname=`CNAME-${yt.generateRandomNumber()}`,this.setIceGatherer({iceServers:Lt,iceTransportPolicy:Mt}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(It){throw new xt.UnsupportedError("not supported")}async restartIce(It){if(Et.debug("restartIce()"),this._remoteIceParameters=It,this._transportReady){Et.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,It,"controlling");for(const At of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(At);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:It,encodings:At,codecOptions:Dt,codec:jt}){Et.debug("send() [kind:%s, track.id:%s]",It.kind,It.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),Et.debug("send() | calling new RTCRtpSender()");const Ft=new RTCRtpSender(It,this._dtlsTransport),Lt=yt.clone(this._sendingRtpParametersByKind[It.kind]);Lt.codecs=vt.reduceCodecs(Lt.codecs,jt);const Mt=Lt.codecs.some($t=>/.+\/rtx$/i.test($t.mimeType));At||(At=[{}]);for(const $t of At)$t.ssrc=yt.generateRandomNumber(),Mt&&($t.rtx={ssrc:yt.generateRandomNumber()});Lt.encodings=At,Lt.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const Ot=St.mangleRtpParameters(Lt);Et.debug("send() | calling rtpSender.send() [params:%o]",Ot),await Ft.send(Ot);const Nt=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(Nt,Ft),{localId:Nt,rtpParameters:Lt,rtpSender:Ft}}async stopSending(It){Et.debug("stopSending() [localId:%s]",It);const At=this._rtpSenders.get(It);if(!At)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(It);try{Et.debug("stopSending() | calling rtpSender.stop()"),At.stop()}catch(Dt){throw Et.warn("stopSending() | rtpSender.stop() failed:%o",Dt),Dt}}async pauseSending(It){}async resumeSending(It){}async replaceTrack(It,At){At?Et.debug("replaceTrack() [localId:%s, track.id:%s]",It,At.id):Et.debug("replaceTrack() [localId:%s, no track]",It);const Dt=this._rtpSenders.get(It);if(!Dt)throw new Error("RTCRtpSender not found");Dt.setTrack(At)}async setMaxSpatialLayer(It,At){Et.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",It,At);const Dt=this._rtpSenders.get(It);if(!Dt)throw new Error("RTCRtpSender not found");const jt=Dt.getParameters();jt.encodings.forEach((Ft,Lt)=>{Ft.active=Lt<=At}),await Dt.setParameters(jt)}async setRtpEncodingParameters(It,At){Et.debug("setRtpEncodingParameters() [localId:%s, params:%o]",It,At);const Dt=this._rtpSenders.get(It);if(!Dt)throw new Error("RTCRtpSender not found");const jt=Dt.getParameters();jt.encodings.forEach((Ft,Lt)=>{jt.encodings[Lt]={...Ft,...At}}),await Dt.setParameters(jt)}async getSenderStats(It){const At=this._rtpSenders.get(It);if(!At)throw new Error("RTCRtpSender not found");return At.getStats()}async sendDataChannel(It){throw new xt.UnsupportedError("not implemented")}async receive(It){const At=[];for(const Dt of It){const{trackId:jt,kind:Ft}=Dt;Et.debug("receive() [trackId:%s, kind:%s]",jt,Ft)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const Dt of It){const{trackId:jt,kind:Ft,rtpParameters:Lt}=Dt;Et.debug("receive() | calling new RTCRtpReceiver()");const Mt=new RTCRtpReceiver(this._dtlsTransport,Ft);Mt.addEventListener("error",$t=>{Et.error('rtpReceiver "error" event [event:%o]',$t)});const Ot=St.mangleRtpParameters(Lt);Et.debug("receive() | calling rtpReceiver.receive() [params:%o]",Ot),await Mt.receive(Ot);const Nt=jt;this._rtpReceivers.set(Nt,Mt),At.push({localId:Nt,track:Mt.track,rtpReceiver:Mt})}return At}async stopReceiving(It){for(const At of It){Et.debug("stopReceiving() [localId:%s]",At);const Dt=this._rtpReceivers.get(At);if(!Dt)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(At);try{Et.debug("stopReceiving() | calling rtpReceiver.stop()"),Dt.stop()}catch(jt){Et.warn("stopReceiving() | rtpReceiver.stop() failed:%o",jt)}}}async pauseReceiving(It){}async resumeReceiving(It){}async getReceiverStats(It){const At=this._rtpReceivers.get(It);if(!At)throw new Error("RTCRtpReceiver not found");return At.getStats()}async receiveDataChannel(It){throw new xt.UnsupportedError("not implemented")}setIceGatherer({iceServers:It,iceTransportPolicy:At}){const Dt=new RTCIceGatherer({iceServers:It||[],gatherPolicy:At||"all"});Dt.addEventListener("error",jt=>{Et.error('iceGatherer "error" event [event:%o]',jt)});try{Dt.gather()}catch(jt){Et.debug("setIceGatherer() | iceGatherer.gather() failed: %s",jt.toString())}this._iceGatherer=Dt}setIceTransport(){const It=new RTCIceTransport(this._iceGatherer);It.addEventListener("statechange",()=>{switch(It.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),It.addEventListener("icestatechange",()=>{switch(It.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),It.addEventListener("candidatepairchange",At=>{Et.debug('iceTransport "candidatepairchange" event [pair:%o]',At.pair)}),this._iceTransport=It}setDtlsTransport(){const It=new RTCDtlsTransport(this._iceTransport);It.addEventListener("statechange",()=>{Et.debug('dtlsTransport "statechange" event [state:%s]',It.state)}),It.addEventListener("dtlsstatechange",()=>{Et.debug('dtlsTransport "dtlsstatechange" event [state:%s]',It.state),It.state==="closed"&&this.emit("@connectionstatechange","closed")}),It.addEventListener("error",At=>{Et.error('dtlsTransport "error" event [event:%o]',At)}),this._dtlsTransport=It}async setupTransport({localDtlsRole:It}){Et.debug("setupTransport()");const At=this._dtlsTransport.getLocalParameters();At.role=It,await new Promise((Dt,jt)=>{this.safeEmit("@connect",{dtlsParameters:At},Dt,jt)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const Dt of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(Dt);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(Dt=>Dt.algorithm==="sha-256"||Dt.algorithm==="sha-384"||Dt.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}dt.Edge11=Rt},1419:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(Ft,Lt,Mt,Ot){Ot===void 0&&(Ot=Mt);var Nt=Object.getOwnPropertyDescriptor(Lt,Mt);Nt&&!("get"in Nt?!Lt.__esModule:Nt.writable||Nt.configurable)||(Nt={enumerable:!0,get:function(){return Lt[Mt]}}),Object.defineProperty(Ft,Ot,Nt)}:function(Ft,Lt,Mt,Ot){Ot===void 0&&(Ot=Mt),Ft[Ot]=Lt[Mt]}),pt=this&&this.__setModuleDefault||(Object.create?function(Ft,Lt){Object.defineProperty(Ft,"default",{enumerable:!0,value:Lt})}:function(Ft,Lt){Ft.default=Lt}),mt=this&&this.__importStar||function(Ft){if(Ft&&Ft.__esModule)return Ft;var Lt={};if(Ft!=null)for(var Mt in Ft)Mt!=="default"&&Object.prototype.hasOwnProperty.call(Ft,Mt)&&ft(Lt,Ft,Mt);return pt(Lt,Ft),Lt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Firefox60=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=ht(9992),vt=mt(ht(3347)),St=mt(ht(5280)),wt=mt(ht(2267)),Et=mt(ht(9072)),Rt=ht(9316),Tt=ht(7910),It=ht(2770),At=new xt.Logger("Firefox60"),Dt={OS:16,MIS:2048};class jt extends Rt.HandlerInterface{static createFactory(){return()=>new jt}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(At.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){At.debug("getNativeRtpCapabilities()");const Lt=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),Mt=document.createElement("canvas");Mt.getContext("2d");const Ot=Mt.captureStream().getVideoTracks()[0];try{Lt.addTransceiver("audio",{direction:"sendrecv"});const Nt=Lt.addTransceiver(Ot,{direction:"sendrecv"}),$t=Nt.sender.getParameters(),Vt=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];$t.encodings=Vt,await Nt.sender.setParameters($t);const Ut=await Lt.createOffer();try{Mt.remove()}catch{}try{Ot.stop()}catch{}try{Lt.close()}catch{}const zt=gt.parse(Ut.sdp);return wt.extractRtpCapabilities({sdpObject:zt})}catch(Nt){try{Mt.remove()}catch{}try{Ot.stop()}catch{}try{Lt.close()}catch{}throw Nt}}async getNativeSctpCapabilities(){return At.debug("getNativeSctpCapabilities()"),{numStreams:Dt}}run({direction:Lt,iceParameters:Mt,iceCandidates:Ot,dtlsParameters:Nt,sctpParameters:$t,iceServers:Vt,iceTransportPolicy:Ut,additionalSettings:zt,proprietaryConstraints:Bt,extendedRtpCapabilities:Ht}){this.assertNotClosed(),At.debug("run()"),this._direction=Lt,this._remoteSdp=new Tt.RemoteSdp({iceParameters:Mt,iceCandidates:Ot,dtlsParameters:Nt,sctpParameters:$t}),this._sendingRtpParametersByKind={audio:St.getSendingRtpParameters("audio",Ht),video:St.getSendingRtpParameters("video",Ht)},this._sendingRemoteRtpParametersByKind={audio:St.getSendingRemoteRtpParameters("audio",Ht),video:St.getSendingRemoteRtpParameters("video",Ht)},this._pc=new RTCPeerConnection({iceServers:Vt||[],iceTransportPolicy:Ut||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...zt},Bt),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(At.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(Lt){throw this.assertNotClosed(),new yt.UnsupportedError("not supported")}async restartIce(Lt){if(this.assertNotClosed(),At.debug("restartIce()"),this._remoteSdp.updateIceParameters(Lt),this._transportReady)if(this._direction==="send"){const Mt=await this._pc.createOffer({iceRestart:!0});At.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Mt),await this._pc.setLocalDescription(Mt);const Ot={type:"answer",sdp:this._remoteSdp.getSdp()};At.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Ot),await this._pc.setRemoteDescription(Ot)}else{const Mt={type:"offer",sdp:this._remoteSdp.getSdp()};At.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Mt),await this._pc.setRemoteDescription(Mt);const Ot=await this._pc.createAnswer();At.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Ot),await this._pc.setLocalDescription(Ot)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:Lt,encodings:Mt,codecOptions:Ot,codec:Nt}){this.assertNotClosed(),this.assertSendDirection(),At.debug("send() [kind:%s, track.id:%s]",Lt.kind,Lt.id),Mt&&(Mt=vt.clone(Mt)).length>1&&(Mt.forEach((hr,nr)=>{hr.rid=`r${nr}`}),Mt.reverse());const $t=vt.clone(this._sendingRtpParametersByKind[Lt.kind]);$t.codecs=St.reduceCodecs($t.codecs,Nt);const Vt=vt.clone(this._sendingRemoteRtpParametersByKind[Lt.kind]);Vt.codecs=St.reduceCodecs(Vt.codecs,Nt);const Ut=this._pc.addTransceiver(Lt,{direction:"sendonly",streams:[this._sendStream]});if(Mt){const hr=Ut.sender.getParameters();hr.encodings=Mt,await Ut.sender.setParameters(hr)}const zt=await this._pc.createOffer();let Bt=gt.parse(zt.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:Bt});const Ht=(0,It.parse)((Mt||[{}])[0].scalabilityMode);At.debug("send() | calling pc.setLocalDescription() [offer:%o]",zt),await this._pc.setLocalDescription(zt);const Gt=Ut.mid;$t.mid=Gt,Bt=gt.parse(this._pc.localDescription.sdp);const Xt=Bt.media[Bt.media.length-1];if($t.rtcp.cname=wt.getCname({offerMediaObject:Xt}),Mt)if(Mt.length===1){const hr=Et.getRtpEncodings({offerMediaObject:Xt});Object.assign(hr[0],Mt[0]),$t.encodings=hr}else $t.encodings=Mt.reverse();else $t.encodings=Et.getRtpEncodings({offerMediaObject:Xt});if($t.encodings.length>1&&($t.codecs[0].mimeType.toLowerCase()==="video/vp8"||$t.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const hr of $t.encodings)hr.scalabilityMode?hr.scalabilityMode=`L1T${Ht.temporalLayers}`:hr.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Xt,offerRtpParameters:$t,answerRtpParameters:Vt,codecOptions:Ot,extmapAllowMixed:!0});const Zt={type:"answer",sdp:this._remoteSdp.getSdp()};return At.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Zt),await this._pc.setRemoteDescription(Zt),this._mapMidTransceiver.set(Gt,Ut),{localId:Gt,rtpParameters:$t,rtpSender:Ut.sender}}async stopSending(Lt){if(this.assertSendDirection(),At.debug("stopSending() [localId:%s]",Lt),this._closed)return;const Mt=this._mapMidTransceiver.get(Lt);if(!Mt)throw new Error("associated transceiver not found");Mt.sender.replaceTrack(null),this._pc.removeTrack(Mt.sender),this._remoteSdp.disableMediaSection(Mt.mid);const Ot=await this._pc.createOffer();At.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Ot),await this._pc.setLocalDescription(Ot);const Nt={type:"answer",sdp:this._remoteSdp.getSdp()};At.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",Nt),await this._pc.setRemoteDescription(Nt),this._mapMidTransceiver.delete(Lt)}async pauseSending(Lt){this.assertNotClosed(),this.assertSendDirection(),At.debug("pauseSending() [localId:%s]",Lt);const Mt=this._mapMidTransceiver.get(Lt);if(!Mt)throw new Error("associated RTCRtpTransceiver not found");Mt.direction="inactive",this._remoteSdp.pauseMediaSection(Lt);const Ot=await this._pc.createOffer();At.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",Ot),await this._pc.setLocalDescription(Ot);const Nt={type:"answer",sdp:this._remoteSdp.getSdp()};At.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",Nt),await this._pc.setRemoteDescription(Nt)}async resumeSending(Lt){this.assertNotClosed(),this.assertSendDirection(),At.debug("resumeSending() [localId:%s]",Lt);const Mt=this._mapMidTransceiver.get(Lt);if(!Mt)throw new Error("associated RTCRtpTransceiver not found");Mt.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(Lt);const Ot=await this._pc.createOffer();At.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",Ot),await this._pc.setLocalDescription(Ot);const Nt={type:"answer",sdp:this._remoteSdp.getSdp()};At.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",Nt),await this._pc.setRemoteDescription(Nt)}async replaceTrack(Lt,Mt){this.assertNotClosed(),this.assertSendDirection(),Mt?At.debug("replaceTrack() [localId:%s, track.id:%s]",Lt,Mt.id):At.debug("replaceTrack() [localId:%s, no track]",Lt);const Ot=this._mapMidTransceiver.get(Lt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");await Ot.sender.replaceTrack(Mt)}async setMaxSpatialLayer(Lt,Mt){this.assertNotClosed(),this.assertSendDirection(),At.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",Lt,Mt);const Ot=this._mapMidTransceiver.get(Lt);if(!Ot)throw new Error("associated transceiver not found");const Nt=Ot.sender.getParameters();Mt=Nt.encodings.length-1-Mt,Nt.encodings.forEach((Ut,zt)=>{Ut.active=zt>=Mt}),await Ot.sender.setParameters(Nt),this._remoteSdp.muxMediaSectionSimulcast(Lt,Nt.encodings);const $t=await this._pc.createOffer();At.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",$t),await this._pc.setLocalDescription($t);const Vt={type:"answer",sdp:this._remoteSdp.getSdp()};At.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",Vt),await this._pc.setRemoteDescription(Vt)}async setRtpEncodingParameters(Lt,Mt){this.assertNotClosed(),this.assertSendDirection(),At.debug("setRtpEncodingParameters() [localId:%s, params:%o]",Lt,Mt);const Ot=this._mapMidTransceiver.get(Lt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");const Nt=Ot.sender.getParameters();Nt.encodings.forEach((Ut,zt)=>{Nt.encodings[zt]={...Ut,...Mt}}),await Ot.sender.setParameters(Nt),this._remoteSdp.muxMediaSectionSimulcast(Lt,Nt.encodings);const $t=await this._pc.createOffer();At.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",$t),await this._pc.setLocalDescription($t);const Vt={type:"answer",sdp:this._remoteSdp.getSdp()};At.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",Vt),await this._pc.setRemoteDescription(Vt)}async getSenderStats(Lt){this.assertNotClosed(),this.assertSendDirection();const Mt=this._mapMidTransceiver.get(Lt);if(!Mt)throw new Error("associated RTCRtpTransceiver not found");return Mt.sender.getStats()}async sendDataChannel({ordered:Lt,maxPacketLifeTime:Mt,maxRetransmits:Ot,label:Nt,protocol:$t}){this.assertNotClosed(),this.assertSendDirection();const Vt={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Lt,maxPacketLifeTime:Mt,maxRetransmits:Ot,protocol:$t};At.debug("sendDataChannel() [options:%o]",Vt);const Ut=this._pc.createDataChannel(Nt,Vt);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Dt.MIS,!this._hasDataChannelMediaSection){const zt=await this._pc.createOffer(),Bt=gt.parse(zt.sdp),Ht=Bt.media.find(Xt=>Xt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:Bt}),At.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",zt),await this._pc.setLocalDescription(zt),this._remoteSdp.sendSctpAssociation({offerMediaObject:Ht});const Gt={type:"answer",sdp:this._remoteSdp.getSdp()};At.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Gt),await this._pc.setRemoteDescription(Gt),this._hasDataChannelMediaSection=!0}return{dataChannel:Ut,sctpStreamParameters:{streamId:Vt.id,ordered:Vt.ordered,maxPacketLifeTime:Vt.maxPacketLifeTime,maxRetransmits:Vt.maxRetransmits}}}async receive(Lt){this.assertNotClosed(),this.assertRecvDirection();const Mt=[],Ot=new Map;for(const Ut of Lt){const{trackId:zt,kind:Bt,rtpParameters:Ht,streamId:Gt}=Ut;At.debug("receive() [trackId:%s, kind:%s]",zt,Bt);const Xt=Ht.mid||String(this._mapMidTransceiver.size);Ot.set(zt,Xt),this._remoteSdp.receive({mid:Xt,kind:Bt,offerRtpParameters:Ht,streamId:Gt||Ht.rtcp.cname,trackId:zt})}const Nt={type:"offer",sdp:this._remoteSdp.getSdp()};At.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",Nt),await this._pc.setRemoteDescription(Nt);let $t=await this._pc.createAnswer();const Vt=gt.parse($t.sdp);for(const Ut of Lt){const{trackId:zt,rtpParameters:Bt}=Ut,Ht=Ot.get(zt),Gt=Vt.media.find(Xt=>String(Xt.mid)===Ht);wt.applyCodecParameters({offerRtpParameters:Bt,answerMediaObject:Gt}),$t={type:"answer",sdp:gt.write(Vt)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:Vt}),At.debug("receive() | calling pc.setLocalDescription() [answer:%o]",$t),await this._pc.setLocalDescription($t);for(const Ut of Lt){const{trackId:zt}=Ut,Bt=Ot.get(zt),Ht=this._pc.getTransceivers().find(Gt=>Gt.mid===Bt);if(!Ht)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(Bt,Ht),Mt.push({localId:Bt,track:Ht.receiver.track,rtpReceiver:Ht.receiver})}return Mt}async stopReceiving(Lt){if(this.assertRecvDirection(),this._closed)return;for(const Nt of Lt){At.debug("stopReceiving() [localId:%s]",Nt);const $t=this._mapMidTransceiver.get(Nt);if(!$t)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection($t.mid)}const Mt={type:"offer",sdp:this._remoteSdp.getSdp()};At.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Mt),await this._pc.setRemoteDescription(Mt);const Ot=await this._pc.createAnswer();At.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Ot),await this._pc.setLocalDescription(Ot);for(const Nt of Lt)this._mapMidTransceiver.delete(Nt)}async pauseReceiving(Lt){this.assertNotClosed(),this.assertRecvDirection();for(const Nt of Lt){At.debug("pauseReceiving() [localId:%s]",Nt);const $t=this._mapMidTransceiver.get(Nt);if(!$t)throw new Error("associated RTCRtpTransceiver not found");$t.direction="inactive",this._remoteSdp.pauseMediaSection(Nt)}const Mt={type:"offer",sdp:this._remoteSdp.getSdp()};At.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",Mt),await this._pc.setRemoteDescription(Mt);const Ot=await this._pc.createAnswer();At.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",Ot),await this._pc.setLocalDescription(Ot)}async resumeReceiving(Lt){this.assertNotClosed(),this.assertRecvDirection();for(const Nt of Lt){At.debug("resumeReceiving() [localId:%s]",Nt);const $t=this._mapMidTransceiver.get(Nt);if(!$t)throw new Error("associated RTCRtpTransceiver not found");$t.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(Nt)}const Mt={type:"offer",sdp:this._remoteSdp.getSdp()};At.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",Mt),await this._pc.setRemoteDescription(Mt);const Ot=await this._pc.createAnswer();At.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",Ot),await this._pc.setLocalDescription(Ot)}async getReceiverStats(Lt){this.assertRecvDirection();const Mt=this._mapMidTransceiver.get(Lt);if(!Mt)throw new Error("associated RTCRtpTransceiver not found");return Mt.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:Lt,label:Mt,protocol:Ot}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:Nt,ordered:$t,maxPacketLifeTime:Vt,maxRetransmits:Ut}=Lt,zt={negotiated:!0,id:Nt,ordered:$t,maxPacketLifeTime:Vt,maxRetransmits:Ut,protocol:Ot};At.debug("receiveDataChannel() [options:%o]",zt);const Bt=this._pc.createDataChannel(Mt,zt);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Ht={type:"offer",sdp:this._remoteSdp.getSdp()};At.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Ht),await this._pc.setRemoteDescription(Ht);const Gt=await this._pc.createAnswer();if(!this._transportReady){const Xt=gt.parse(Gt.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:Xt})}At.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Gt),await this._pc.setLocalDescription(Gt),this._hasDataChannelMediaSection=!0}return{dataChannel:Bt}}async setupTransport({localDtlsRole:Lt,localSdpObject:Mt}){Mt||(Mt=gt.parse(this._pc.localDescription.sdp));const Ot=wt.extractDtlsParameters({sdpObject:Mt});Ot.role=Lt,this._remoteSdp.updateDtlsRole(Lt==="client"?"server":"client"),await new Promise((Nt,$t)=>{this.safeEmit("@connect",{dtlsParameters:Ot},Nt,$t)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new yt.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Firefox60=jt},9316:(ut,dt,ht)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.HandlerInterface=void 0;const ft=ht(4493);class pt extends ft.EnhancedEventEmitter{constructor(){super()}}dt.HandlerInterface=pt},4770:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(jt,Ft,Lt,Mt){Mt===void 0&&(Mt=Lt);var Ot=Object.getOwnPropertyDescriptor(Ft,Lt);Ot&&!("get"in Ot?!Ft.__esModule:Ot.writable||Ot.configurable)||(Ot={enumerable:!0,get:function(){return Ft[Lt]}}),Object.defineProperty(jt,Mt,Ot)}:function(jt,Ft,Lt,Mt){Mt===void 0&&(Mt=Lt),jt[Mt]=Ft[Lt]}),pt=this&&this.__setModuleDefault||(Object.create?function(jt,Ft){Object.defineProperty(jt,"default",{enumerable:!0,value:Ft})}:function(jt,Ft){jt.default=Ft}),mt=this&&this.__importStar||function(jt){if(jt&&jt.__esModule)return jt;var Ft={};if(jt!=null)for(var Lt in jt)Lt!=="default"&&Object.prototype.hasOwnProperty.call(jt,Lt)&&ft(Ft,jt,Lt);return pt(Ft,jt),Ft};Object.defineProperty(dt,"__esModule",{value:!0}),dt.ReactNative=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=ht(9992),vt=mt(ht(3347)),St=mt(ht(5280)),wt=mt(ht(2267)),Et=mt(ht(9875)),Rt=ht(9316),Tt=ht(7910),It=new xt.Logger("ReactNative"),At={OS:1024,MIS:1024};class Dt extends Rt.HandlerInterface{static createFactory(){return()=>new Dt}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNative"}close(){if(It.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){It.debug("getNativeRtpCapabilities()");const Ft=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const Lt=await Ft.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{Ft.close()}catch{}const Mt=gt.parse(Lt.sdp);return wt.extractRtpCapabilities({sdpObject:Mt})}catch(Lt){try{Ft.close()}catch{}throw Lt}}async getNativeSctpCapabilities(){return It.debug("getNativeSctpCapabilities()"),{numStreams:At}}run({direction:Ft,iceParameters:Lt,iceCandidates:Mt,dtlsParameters:Ot,sctpParameters:Nt,iceServers:$t,iceTransportPolicy:Vt,additionalSettings:Ut,proprietaryConstraints:zt,extendedRtpCapabilities:Bt}){It.debug("run()"),this._direction=Ft,this._remoteSdp=new Tt.RemoteSdp({iceParameters:Lt,iceCandidates:Mt,dtlsParameters:Ot,sctpParameters:Nt,planB:!0}),this._sendingRtpParametersByKind={audio:St.getSendingRtpParameters("audio",Bt),video:St.getSendingRtpParameters("video",Bt)},this._sendingRemoteRtpParametersByKind={audio:St.getSendingRemoteRtpParameters("audio",Bt),video:St.getSendingRemoteRtpParameters("video",Bt)},Ot.role&&Ot.role!=="auto"&&(this._forcedLocalDtlsRole=Ot.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:$t||[],iceTransportPolicy:Vt||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...Ut},zt),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(It.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(Ft){It.debug("updateIceServers()");const Lt=this._pc.getConfiguration();Lt.iceServers=Ft,this._pc.setConfiguration(Lt)}async restartIce(Ft){if(It.debug("restartIce()"),this._remoteSdp.updateIceParameters(Ft),this._transportReady)if(this._direction==="send"){const Lt=await this._pc.createOffer({iceRestart:!0});It.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Lt),await this._pc.setLocalDescription(Lt);const Mt={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Mt),await this._pc.setRemoteDescription(Mt)}else{const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);const Mt=await this._pc.createAnswer();It.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Mt),await this._pc.setLocalDescription(Mt)}}async getTransportStats(){return this._pc.getStats()}async send({track:Ft,encodings:Lt,codecOptions:Mt,codec:Ot}){this.assertSendDirection(),It.debug("send() [kind:%s, track.id:%s]",Ft.kind,Ft.id),Ot&&It.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(Ft),this._pc.addStream(this._sendStream);let Nt,$t=await this._pc.createOffer(),Vt=gt.parse($t.sdp);const Ut=vt.clone(this._sendingRtpParametersByKind[Ft.kind]);Ut.codecs=St.reduceCodecs(Ut.codecs);const zt=vt.clone(this._sendingRemoteRtpParametersByKind[Ft.kind]);if(zt.codecs=St.reduceCodecs(zt.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Vt}),Ft.kind==="video"&&Lt&&Lt.length>1&&(It.debug("send() | enabling simulcast"),Vt=gt.parse($t.sdp),Nt=Vt.media.find(Gt=>Gt.type==="video"),Et.addLegacySimulcast({offerMediaObject:Nt,track:Ft,numStreams:Lt.length}),$t={type:"offer",sdp:gt.write(Vt)}),It.debug("send() | calling pc.setLocalDescription() [offer:%o]",$t),await this._pc.setLocalDescription($t),Vt=gt.parse(this._pc.localDescription.sdp),Nt=Vt.media.find(Gt=>Gt.type===Ft.kind),Ut.rtcp.cname=wt.getCname({offerMediaObject:Nt}),Ut.encodings=Et.getRtpEncodings({offerMediaObject:Nt,track:Ft}),Lt)for(let Gt=0;Gt<Ut.encodings.length;++Gt)Lt[Gt]&&Object.assign(Ut.encodings[Gt],Lt[Gt]);if(Ut.encodings.length>1&&(Ut.codecs[0].mimeType.toLowerCase()==="video/vp8"||Ut.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Gt of Ut.encodings)Gt.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Nt,offerRtpParameters:Ut,answerRtpParameters:zt,codecOptions:Mt});const Bt={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Bt),await this._pc.setRemoteDescription(Bt);const Ht=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(Ht,Ft),{localId:Ht,rtpParameters:Ut}}async stopSending(Ft){this.assertSendDirection(),It.debug("stopSending() [localId:%s]",Ft);const Lt=this._mapSendLocalIdTrack.get(Ft);if(!Lt)throw new Error("track not found");this._mapSendLocalIdTrack.delete(Ft),this._sendStream.removeTrack(Lt),this._pc.addStream(this._sendStream);const Mt=await this._pc.createOffer();It.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Mt);try{await this._pc.setLocalDescription(Mt)}catch(Nt){if(this._sendStream.getTracks().length===0)return void It.warn("stopSending() | ignoring expected error due no sending tracks: %s",Nt.toString());throw Nt}if(this._pc.signalingState==="stable")return;const Ot={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",Ot),await this._pc.setRemoteDescription(Ot)}async pauseSending(Ft){}async resumeSending(Ft){}async replaceTrack(Ft,Lt){throw new yt.UnsupportedError("not implemented")}async setMaxSpatialLayer(Ft,Lt){throw new yt.UnsupportedError("not implemented")}async setRtpEncodingParameters(Ft,Lt){throw new yt.UnsupportedError("not implemented")}async getSenderStats(Ft){throw new yt.UnsupportedError("not implemented")}async sendDataChannel({ordered:Ft,maxPacketLifeTime:Lt,maxRetransmits:Mt,label:Ot,protocol:Nt}){this.assertSendDirection();const $t={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Ft,maxPacketLifeTime:Lt,maxRetransmitTime:Lt,maxRetransmits:Mt,protocol:Nt};It.debug("sendDataChannel() [options:%o]",$t);const Vt=this._pc.createDataChannel(Ot,$t);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%At.MIS,!this._hasDataChannelMediaSection){const Ut=await this._pc.createOffer(),zt=gt.parse(Ut.sdp),Bt=zt.media.find(Gt=>Gt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:zt}),It.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Ut),await this._pc.setLocalDescription(Ut),this._remoteSdp.sendSctpAssociation({offerMediaObject:Bt});const Ht={type:"answer",sdp:this._remoteSdp.getSdp()};It.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Ht),await this._pc.setRemoteDescription(Ht),this._hasDataChannelMediaSection=!0}return{dataChannel:Vt,sctpStreamParameters:{streamId:$t.id,ordered:$t.ordered,maxPacketLifeTime:$t.maxPacketLifeTime,maxRetransmits:$t.maxRetransmits}}}async receive(Ft){this.assertRecvDirection();const Lt=[],Mt=new Map;for(const Vt of Ft){const{trackId:Ut,kind:zt,rtpParameters:Bt}=Vt;It.debug("receive() [trackId:%s, kind:%s]",Ut,zt);const Ht=zt;let Gt=Vt.streamId||Bt.rtcp.cname;It.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),Gt+=`-hack-${vt.generateRandomNumber()}`,Mt.set(Ut,Gt),this._remoteSdp.receive({mid:Ht,kind:zt,offerRtpParameters:Bt,streamId:Gt,trackId:Ut})}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);let Nt=await this._pc.createAnswer();const $t=gt.parse(Nt.sdp);for(const Vt of Ft){const{kind:Ut,rtpParameters:zt}=Vt,Bt=Ut,Ht=$t.media.find(Gt=>String(Gt.mid)===Bt);wt.applyCodecParameters({offerRtpParameters:zt,answerMediaObject:Ht})}Nt={type:"answer",sdp:gt.write($t)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$t}),It.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt);for(const Vt of Ft){const{kind:Ut,trackId:zt,rtpParameters:Bt}=Vt,Ht=zt,Gt=Ut,Xt=Mt.get(zt),Zt=this._pc.getRemoteStreams().find(hr=>hr.id===Xt).getTrackById(Ht);if(!Zt)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(Ht,{mid:Gt,rtpParameters:Bt}),Lt.push({localId:Ht,track:Zt})}return Lt}async stopReceiving(Ft){this.assertRecvDirection();for(const Ot of Ft){It.debug("stopReceiving() [localId:%s]",Ot);const{mid:Nt,rtpParameters:$t}=this._mapRecvLocalIdInfo.get(Ot)||{};this._mapRecvLocalIdInfo.delete(Ot),this._remoteSdp.planBStopReceiving({mid:Nt,offerRtpParameters:$t})}const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);const Mt=await this._pc.createAnswer();It.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Mt),await this._pc.setLocalDescription(Mt)}async pauseReceiving(Ft){}async resumeReceiving(Ft){}async getReceiverStats(Ft){throw new yt.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:Ft,label:Lt,protocol:Mt}){this.assertRecvDirection();const{streamId:Ot,ordered:Nt,maxPacketLifeTime:$t,maxRetransmits:Vt}=Ft,Ut={negotiated:!0,id:Ot,ordered:Nt,maxPacketLifeTime:$t,maxRetransmitTime:$t,maxRetransmits:Vt,protocol:Mt};It.debug("receiveDataChannel() [options:%o]",Ut);const zt=this._pc.createDataChannel(Lt,Ut);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const Bt={type:"offer",sdp:this._remoteSdp.getSdp()};It.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Bt),await this._pc.setRemoteDescription(Bt);const Ht=await this._pc.createAnswer();if(!this._transportReady){const Gt=gt.parse(Ht.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Gt})}It.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Ht),await this._pc.setLocalDescription(Ht),this._hasDataChannelMediaSection=!0}return{dataChannel:zt}}async setupTransport({localDtlsRole:Ft,localSdpObject:Lt}){Lt||(Lt=gt.parse(this._pc.localDescription.sdp));const Mt=wt.extractDtlsParameters({sdpObject:Lt});Mt.role=Ft,this._remoteSdp.updateDtlsRole(Ft==="client"?"server":"client"),await new Promise((Ot,Nt)=>{this.safeEmit("@connect",{dtlsParameters:Mt},Ot,Nt)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.ReactNative=Dt},3433:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(Lt,Mt,Ot,Nt){Nt===void 0&&(Nt=Ot);var $t=Object.getOwnPropertyDescriptor(Mt,Ot);$t&&!("get"in $t?!Mt.__esModule:$t.writable||$t.configurable)||($t={enumerable:!0,get:function(){return Mt[Ot]}}),Object.defineProperty(Lt,Nt,$t)}:function(Lt,Mt,Ot,Nt){Nt===void 0&&(Nt=Ot),Lt[Nt]=Mt[Ot]}),pt=this&&this.__setModuleDefault||(Object.create?function(Lt,Mt){Object.defineProperty(Lt,"default",{enumerable:!0,value:Mt})}:function(Lt,Mt){Lt.default=Mt}),mt=this&&this.__importStar||function(Lt){if(Lt&&Lt.__esModule)return Lt;var Mt={};if(Lt!=null)for(var Ot in Lt)Ot!=="default"&&Object.prototype.hasOwnProperty.call(Lt,Ot)&&ft(Mt,Lt,Ot);return pt(Mt,Lt),Mt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.ReactNativeUnifiedPlan=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(2267)),wt=mt(ht(9072)),Et=mt(ht(8954)),Rt=ht(9992),Tt=ht(9316),It=ht(7910),At=ht(2770),Dt=new xt.Logger("ReactNativeUnifiedPlan"),jt={OS:1024,MIS:1024};class Ft extends Tt.HandlerInterface{static createFactory(){return()=>new Ft}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNativeUnifiedPlan"}close(){if(Dt.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){Dt.debug("getNativeRtpCapabilities()");const Mt=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{Mt.addTransceiver("audio"),Mt.addTransceiver("video");const Ot=await Mt.createOffer();try{Mt.close()}catch{}const Nt=gt.parse(Ot.sdp),$t=St.extractRtpCapabilities({sdpObject:Nt});return Et.addNackSuppportForOpus($t),$t}catch(Ot){try{Mt.close()}catch{}throw Ot}}async getNativeSctpCapabilities(){return Dt.debug("getNativeSctpCapabilities()"),{numStreams:jt}}run({direction:Mt,iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt,iceServers:Ut,iceTransportPolicy:zt,additionalSettings:Bt,proprietaryConstraints:Ht,extendedRtpCapabilities:Gt}){this.assertNotClosed(),Dt.debug("run()"),this._direction=Mt,this._remoteSdp=new It.RemoteSdp({iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt}),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",Gt),video:vt.getSendingRtpParameters("video",Gt)},this._sendingRemoteRtpParametersByKind={audio:vt.getSendingRemoteRtpParameters("audio",Gt),video:vt.getSendingRemoteRtpParameters("video",Gt)},$t.role&&$t.role!=="auto"&&(this._forcedLocalDtlsRole=$t.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:Ut||[],iceTransportPolicy:zt||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...Bt},Ht),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Dt.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(Mt){this.assertNotClosed(),Dt.debug("updateIceServers()");const Ot=this._pc.getConfiguration();Ot.iceServers=Mt,this._pc.setConfiguration(Ot)}async restartIce(Mt){if(this.assertNotClosed(),Dt.debug("restartIce()"),this._remoteSdp.updateIceParameters(Mt),this._transportReady)if(this._direction==="send"){const Ot=await this._pc.createOffer({iceRestart:!0});Dt.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Ot),await this._pc.setLocalDescription(Ot);const Nt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Nt),await this._pc.setRemoteDescription(Nt)}else{const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:Mt,encodings:Ot,codecOptions:Nt,codec:$t}){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("send() [kind:%s, track.id:%s]",Mt.kind,Mt.id),Ot&&Ot.length>1&&Ot.forEach((yr,Cr)=>{yr.rid=`r${Cr}`});const Vt=yt.clone(this._sendingRtpParametersByKind[Mt.kind]);Vt.codecs=vt.reduceCodecs(Vt.codecs,$t);const Ut=yt.clone(this._sendingRemoteRtpParametersByKind[Mt.kind]);Ut.codecs=vt.reduceCodecs(Ut.codecs,$t);const zt=this._remoteSdp.getNextMediaSectionIdx(),Bt=this._pc.addTransceiver(Mt,{direction:"sendonly",streams:[this._sendStream],sendEncodings:Ot});let Ht,Gt=await this._pc.createOffer(),Xt=gt.parse(Gt.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Xt});let Zt=!1;const hr=(0,At.parse)((Ot||[{}])[0].scalabilityMode);Ot&&Ot.length===1&&hr.spatialLayers>1&&Vt.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(Dt.debug("send() | enabling legacy simulcast for VP9 SVC"),Zt=!0,Xt=gt.parse(Gt.sdp),Ht=Xt.media[zt.idx],wt.addLegacySimulcast({offerMediaObject:Ht,numStreams:hr.spatialLayers}),Gt={type:"offer",sdp:gt.write(Xt)}),Dt.debug("send() | calling pc.setLocalDescription() [offer:%o]",Gt),await this._pc.setLocalDescription(Gt);let nr=Bt.mid??void 0;if(nr||Dt.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),Vt.mid=nr,Xt=gt.parse(this._pc.localDescription.sdp),Ht=Xt.media[zt.idx],Vt.rtcp.cname=St.getCname({offerMediaObject:Ht}),Ot)if(Ot.length===1){let yr=wt.getRtpEncodings({offerMediaObject:Ht});Object.assign(yr[0],Ot[0]),Zt&&(yr=[yr[0]]),Vt.encodings=yr}else Vt.encodings=Ot;else Vt.encodings=wt.getRtpEncodings({offerMediaObject:Ht});if(Vt.encodings.length>1&&(Vt.codecs[0].mimeType.toLowerCase()==="video/vp8"||Vt.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const yr of Vt.encodings)yr.scalabilityMode?yr.scalabilityMode=`L1T${hr.temporalLayers}`:yr.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Ht,reuseMid:zt.reuseMid,offerRtpParameters:Vt,answerRtpParameters:Ut,codecOptions:Nt,extmapAllowMixed:!0});const ir={type:"answer",sdp:this._remoteSdp.getSdp()};return Dt.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ir),await this._pc.setRemoteDescription(ir),nr||(nr=Bt.mid,Vt.mid=nr),this._mapMidTransceiver.set(nr,Bt),{localId:nr,rtpParameters:Vt,rtpSender:Bt.sender}}async stopSending(Mt){if(this.assertSendDirection(),this._closed)return;Dt.debug("stopSending() [localId:%s]",Mt);const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");if(Ot.sender.replaceTrack(null),this._pc.removeTrack(Ot.sender),this._remoteSdp.closeMediaSection(Ot.mid))try{Ot.stop()}catch{}const Nt=await this._pc.createOffer();Dt.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t),this._mapMidTransceiver.delete(Mt)}async pauseSending(Mt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("pauseSending() [localId:%s]",Mt);const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="inactive",this._remoteSdp.pauseMediaSection(Mt);const Nt=await this._pc.createOffer();Dt.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async resumeSending(Mt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("resumeSending() [localId:%s]",Mt);const Ot=this._mapMidTransceiver.get(Mt);if(this._remoteSdp.resumeSendingMediaSection(Mt),!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="sendonly";const Nt=await this._pc.createOffer();Dt.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async replaceTrack(Mt,Ot){this.assertNotClosed(),this.assertSendDirection(),Ot?Dt.debug("replaceTrack() [localId:%s, track.id:%s]",Mt,Ot.id):Dt.debug("replaceTrack() [localId:%s, no track]",Mt);const Nt=this._mapMidTransceiver.get(Mt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");await Nt.sender.replaceTrack(Ot)}async setMaxSpatialLayer(Mt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",Mt,Ot);const Nt=this._mapMidTransceiver.get(Mt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{zt.active=Bt<=Ot}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Mt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async setRtpEncodingParameters(Mt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setRtpEncodingParameters() [localId:%s, params:%o]",Mt,Ot);const Nt=this._mapMidTransceiver.get(Mt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{$t.encodings[Bt]={...zt,...Ot}}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Mt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async getSenderStats(Mt){this.assertNotClosed(),this.assertSendDirection();const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.sender.getStats()}async sendDataChannel({ordered:Mt,maxPacketLifeTime:Ot,maxRetransmits:Nt,label:$t,protocol:Vt}){this.assertNotClosed(),this.assertSendDirection();const Ut={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Mt,maxPacketLifeTime:Ot,maxRetransmits:Nt,protocol:Vt};Dt.debug("sendDataChannel() [options:%o]",Ut);const zt=this._pc.createDataChannel($t,Ut);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%jt.MIS,!this._hasDataChannelMediaSection){const Bt=await this._pc.createOffer(),Ht=gt.parse(Bt.sdp),Gt=Ht.media.find(Zt=>Zt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ht}),Dt.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Bt),await this._pc.setLocalDescription(Bt),this._remoteSdp.sendSctpAssociation({offerMediaObject:Gt});const Xt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Xt),await this._pc.setRemoteDescription(Xt),this._hasDataChannelMediaSection=!0}return{dataChannel:zt,sctpStreamParameters:{streamId:Ut.id,ordered:Ut.ordered,maxPacketLifeTime:Ut.maxPacketLifeTime,maxRetransmits:Ut.maxRetransmits}}}async receive(Mt){this.assertNotClosed(),this.assertRecvDirection();const Ot=[],Nt=new Map;for(const zt of Mt){const{trackId:Bt,kind:Ht,rtpParameters:Gt,streamId:Xt}=zt;Dt.debug("receive() [trackId:%s, kind:%s]",Bt,Ht);const Zt=Gt.mid||String(this._mapMidTransceiver.size);Nt.set(Bt,Zt),this._remoteSdp.receive({mid:Zt,kind:Ht,offerRtpParameters:Gt,streamId:Xt||Gt.rtcp.cname,trackId:Bt})}const $t={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",$t),await this._pc.setRemoteDescription($t);let Vt=await this._pc.createAnswer();const Ut=gt.parse(Vt.sdp);for(const zt of Mt){const{trackId:Bt,rtpParameters:Ht}=zt,Gt=Nt.get(Bt),Xt=Ut.media.find(Zt=>String(Zt.mid)===Gt);St.applyCodecParameters({offerRtpParameters:Ht,answerMediaObject:Xt})}Vt={type:"answer",sdp:gt.write(Ut)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ut}),Dt.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Vt),await this._pc.setLocalDescription(Vt);for(const zt of Mt){const{trackId:Bt}=zt,Ht=Nt.get(Bt),Gt=this._pc.getTransceivers().find(Xt=>Xt.mid===Ht);if(!Gt)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(Ht,Gt),Ot.push({localId:Ht,track:Gt.receiver.track,rtpReceiver:Gt.receiver})}return Ot}async stopReceiving(Mt){if(this.assertRecvDirection(),this._closed)return;for(const $t of Mt){Dt.debug("stopReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(Vt.mid)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt);for(const $t of Mt)this._mapMidTransceiver.delete($t)}async pauseReceiving(Mt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Mt){Dt.debug("pauseReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="inactive",this._remoteSdp.pauseMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async resumeReceiving(Mt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Mt){Dt.debug("resumeReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async getReceiverStats(Mt){this.assertNotClosed(),this.assertRecvDirection();const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:Mt,label:Ot,protocol:Nt}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt}=Mt,Bt={negotiated:!0,id:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt,protocol:Nt};Dt.debug("receiveDataChannel() [options:%o]",Bt);const Ht=this._pc.createDataChannel(Ot,Bt);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Gt={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Gt),await this._pc.setRemoteDescription(Gt);const Xt=await this._pc.createAnswer();if(!this._transportReady){const Zt=gt.parse(Xt.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Zt})}Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Xt),await this._pc.setLocalDescription(Xt),this._hasDataChannelMediaSection=!0}return{dataChannel:Ht}}async setupTransport({localDtlsRole:Mt,localSdpObject:Ot}){Ot||(Ot=gt.parse(this._pc.localDescription.sdp));const Nt=St.extractDtlsParameters({sdpObject:Ot});Nt.role=Mt,this._remoteSdp.updateDtlsRole(Mt==="client"?"server":"client"),await new Promise(($t,Vt)=>{this.safeEmit("@connect",{dtlsParameters:Nt},$t,Vt)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new Rt.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.ReactNativeUnifiedPlan=Ft},2205:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(Dt,jt,Ft,Lt){Lt===void 0&&(Lt=Ft);var Mt=Object.getOwnPropertyDescriptor(jt,Ft);Mt&&!("get"in Mt?!jt.__esModule:Mt.writable||Mt.configurable)||(Mt={enumerable:!0,get:function(){return jt[Ft]}}),Object.defineProperty(Dt,Lt,Mt)}:function(Dt,jt,Ft,Lt){Lt===void 0&&(Lt=Ft),Dt[Lt]=jt[Ft]}),pt=this&&this.__setModuleDefault||(Object.create?function(Dt,jt){Object.defineProperty(Dt,"default",{enumerable:!0,value:jt})}:function(Dt,jt){Dt.default=jt}),mt=this&&this.__importStar||function(Dt){if(Dt&&Dt.__esModule)return Dt;var jt={};if(Dt!=null)for(var Ft in Dt)Ft!=="default"&&Object.prototype.hasOwnProperty.call(Dt,Ft)&&ft(jt,Dt,Ft);return pt(jt,Dt),jt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Safari11=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(2267)),wt=mt(ht(9875)),Et=ht(9316),Rt=ht(7910),Tt=new xt.Logger("Safari11"),It={OS:1024,MIS:1024};class At extends Et.HandlerInterface{static createFactory(){return()=>new At}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari11"}close(){if(Tt.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Tt.debug("getNativeRtpCapabilities()");const jt=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const Ft=await jt.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{jt.close()}catch{}const Lt=gt.parse(Ft.sdp);return St.extractRtpCapabilities({sdpObject:Lt})}catch(Ft){try{jt.close()}catch{}throw Ft}}async getNativeSctpCapabilities(){return Tt.debug("getNativeSctpCapabilities()"),{numStreams:It}}run({direction:jt,iceParameters:Ft,iceCandidates:Lt,dtlsParameters:Mt,sctpParameters:Ot,iceServers:Nt,iceTransportPolicy:$t,additionalSettings:Vt,proprietaryConstraints:Ut,extendedRtpCapabilities:zt}){Tt.debug("run()"),this._direction=jt,this._remoteSdp=new Rt.RemoteSdp({iceParameters:Ft,iceCandidates:Lt,dtlsParameters:Mt,sctpParameters:Ot,planB:!0}),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",zt),video:vt.getSendingRtpParameters("video",zt)},this._sendingRemoteRtpParametersByKind={audio:vt.getSendingRemoteRtpParameters("audio",zt),video:vt.getSendingRemoteRtpParameters("video",zt)},Mt.role&&Mt.role!=="auto"&&(this._forcedLocalDtlsRole=Mt.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:Nt||[],iceTransportPolicy:$t||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...Vt},Ut),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Tt.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(jt){Tt.debug("updateIceServers()");const Ft=this._pc.getConfiguration();Ft.iceServers=jt,this._pc.setConfiguration(Ft)}async restartIce(jt){if(Tt.debug("restartIce()"),this._remoteSdp.updateIceParameters(jt),this._transportReady)if(this._direction==="send"){const Ft=await this._pc.createOffer({iceRestart:!0});Tt.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Ft),await this._pc.setLocalDescription(Ft);const Lt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Lt),await this._pc.setRemoteDescription(Lt)}else{const Ft={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Ft),await this._pc.setRemoteDescription(Ft);const Lt=await this._pc.createAnswer();Tt.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Lt),await this._pc.setLocalDescription(Lt)}}async getTransportStats(){return this._pc.getStats()}async send({track:jt,encodings:Ft,codecOptions:Lt,codec:Mt}){this.assertSendDirection(),Tt.debug("send() [kind:%s, track.id:%s]",jt.kind,jt.id),Mt&&Tt.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(jt),this._pc.addTrack(jt,this._sendStream);let Ot,Nt=await this._pc.createOffer(),$t=gt.parse(Nt.sdp);const Vt=yt.clone(this._sendingRtpParametersByKind[jt.kind]);Vt.codecs=vt.reduceCodecs(Vt.codecs);const Ut=yt.clone(this._sendingRemoteRtpParametersByKind[jt.kind]);if(Ut.codecs=vt.reduceCodecs(Ut.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$t}),jt.kind==="video"&&Ft&&Ft.length>1&&(Tt.debug("send() | enabling simulcast"),$t=gt.parse(Nt.sdp),Ot=$t.media.find(Gt=>Gt.type==="video"),wt.addLegacySimulcast({offerMediaObject:Ot,track:jt,numStreams:Ft.length}),Nt={type:"offer",sdp:gt.write($t)}),Tt.debug("send() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt),$t=gt.parse(this._pc.localDescription.sdp),Ot=$t.media.find(Gt=>Gt.type===jt.kind),Vt.rtcp.cname=St.getCname({offerMediaObject:Ot}),Vt.encodings=wt.getRtpEncodings({offerMediaObject:Ot,track:jt}),Ft)for(let Gt=0;Gt<Vt.encodings.length;++Gt)Ft[Gt]&&Object.assign(Vt.encodings[Gt],Ft[Gt]);if(Vt.encodings.length>1&&Vt.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const Gt of Vt.encodings)Gt.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Ot,offerRtpParameters:Vt,answerRtpParameters:Ut,codecOptions:Lt});const zt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("send() | calling pc.setRemoteDescription() [answer:%o]",zt),await this._pc.setRemoteDescription(zt);const Bt=String(this._nextSendLocalId);this._nextSendLocalId++;const Ht=this._pc.getSenders().find(Gt=>Gt.track===jt);return this._mapSendLocalIdRtpSender.set(Bt,Ht),{localId:Bt,rtpParameters:Vt,rtpSender:Ht}}async stopSending(jt){this.assertSendDirection();const Ft=this._mapSendLocalIdRtpSender.get(jt);if(!Ft)throw new Error("associated RTCRtpSender not found");Ft.track&&this._sendStream.removeTrack(Ft.track),this._mapSendLocalIdRtpSender.delete(jt);const Lt=await this._pc.createOffer();Tt.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Lt);try{await this._pc.setLocalDescription(Lt)}catch(Ot){if(this._sendStream.getTracks().length===0)return void Tt.warn("stopSending() | ignoring expected error due no sending tracks: %s",Ot.toString());throw Ot}if(this._pc.signalingState==="stable")return;const Mt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",Mt),await this._pc.setRemoteDescription(Mt)}async pauseSending(jt){}async resumeSending(jt){}async replaceTrack(jt,Ft){this.assertSendDirection(),Ft?Tt.debug("replaceTrack() [localId:%s, track.id:%s]",jt,Ft.id):Tt.debug("replaceTrack() [localId:%s, no track]",jt);const Lt=this._mapSendLocalIdRtpSender.get(jt);if(!Lt)throw new Error("associated RTCRtpSender not found");const Mt=Lt.track;await Lt.replaceTrack(Ft),Mt&&this._sendStream.removeTrack(Mt),Ft&&this._sendStream.addTrack(Ft)}async setMaxSpatialLayer(jt,Ft){this.assertSendDirection(),Tt.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",jt,Ft);const Lt=this._mapSendLocalIdRtpSender.get(jt);if(!Lt)throw new Error("associated RTCRtpSender not found");const Mt=Lt.getParameters();Mt.encodings.forEach((Ot,Nt)=>{Ot.active=Nt<=Ft}),await Lt.setParameters(Mt)}async setRtpEncodingParameters(jt,Ft){this.assertSendDirection(),Tt.debug("setRtpEncodingParameters() [localId:%s, params:%o]",jt,Ft);const Lt=this._mapSendLocalIdRtpSender.get(jt);if(!Lt)throw new Error("associated RTCRtpSender not found");const Mt=Lt.getParameters();Mt.encodings.forEach((Ot,Nt)=>{Mt.encodings[Nt]={...Ot,...Ft}}),await Lt.setParameters(Mt)}async getSenderStats(jt){this.assertSendDirection();const Ft=this._mapSendLocalIdRtpSender.get(jt);if(!Ft)throw new Error("associated RTCRtpSender not found");return Ft.getStats()}async sendDataChannel({ordered:jt,maxPacketLifeTime:Ft,maxRetransmits:Lt,label:Mt,protocol:Ot}){this.assertSendDirection();const Nt={negotiated:!0,id:this._nextSendSctpStreamId,ordered:jt,maxPacketLifeTime:Ft,maxRetransmits:Lt,protocol:Ot};Tt.debug("sendDataChannel() [options:%o]",Nt);const $t=this._pc.createDataChannel(Mt,Nt);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%It.MIS,!this._hasDataChannelMediaSection){const Vt=await this._pc.createOffer(),Ut=gt.parse(Vt.sdp),zt=Ut.media.find(Ht=>Ht.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ut}),Tt.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt),this._remoteSdp.sendSctpAssociation({offerMediaObject:zt});const Bt={type:"answer",sdp:this._remoteSdp.getSdp()};Tt.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Bt),await this._pc.setRemoteDescription(Bt),this._hasDataChannelMediaSection=!0}return{dataChannel:$t,sctpStreamParameters:{streamId:Nt.id,ordered:Nt.ordered,maxPacketLifeTime:Nt.maxPacketLifeTime,maxRetransmits:Nt.maxRetransmits}}}async receive(jt){this.assertRecvDirection();const Ft=[];for(const Nt of jt){const{trackId:$t,kind:Vt,rtpParameters:Ut,streamId:zt}=Nt;Tt.debug("receive() [trackId:%s, kind:%s]",$t,Vt);const Bt=Vt;this._remoteSdp.receive({mid:Bt,kind:Vt,offerRtpParameters:Ut,streamId:zt||Ut.rtcp.cname,trackId:$t})}const Lt={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",Lt),await this._pc.setRemoteDescription(Lt);let Mt=await this._pc.createAnswer();const Ot=gt.parse(Mt.sdp);for(const Nt of jt){const{kind:$t,rtpParameters:Vt}=Nt,Ut=$t,zt=Ot.media.find(Bt=>String(Bt.mid)===Ut);St.applyCodecParameters({offerRtpParameters:Vt,answerMediaObject:zt})}Mt={type:"answer",sdp:gt.write(Ot)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ot}),Tt.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Mt),await this._pc.setLocalDescription(Mt);for(const Nt of jt){const{kind:$t,trackId:Vt,rtpParameters:Ut}=Nt,zt=$t,Bt=Vt,Ht=this._pc.getReceivers().find(Gt=>Gt.track&&Gt.track.id===Bt);if(!Ht)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(Bt,{mid:zt,rtpParameters:Ut,rtpReceiver:Ht}),Ft.push({localId:Bt,track:Ht.track,rtpReceiver:Ht})}return Ft}async stopReceiving(jt){this.assertRecvDirection();for(const Mt of jt){Tt.debug("stopReceiving() [localId:%s]",Mt);const{mid:Ot,rtpParameters:Nt}=this._mapRecvLocalIdInfo.get(Mt)||{};this._mapRecvLocalIdInfo.delete(Mt),this._remoteSdp.planBStopReceiving({mid:Ot,offerRtpParameters:Nt})}const Ft={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ft),await this._pc.setRemoteDescription(Ft);const Lt=await this._pc.createAnswer();Tt.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Lt),await this._pc.setLocalDescription(Lt)}async getReceiverStats(jt){this.assertRecvDirection();const{rtpReceiver:Ft}=this._mapRecvLocalIdInfo.get(jt)||{};if(!Ft)throw new Error("associated RTCRtpReceiver not found");return Ft.getStats()}async pauseReceiving(jt){}async resumeReceiving(jt){}async receiveDataChannel({sctpStreamParameters:jt,label:Ft,protocol:Lt}){this.assertRecvDirection();const{streamId:Mt,ordered:Ot,maxPacketLifeTime:Nt,maxRetransmits:$t}=jt,Vt={negotiated:!0,id:Mt,ordered:Ot,maxPacketLifeTime:Nt,maxRetransmits:$t,protocol:Lt};Tt.debug("receiveDataChannel() [options:%o]",Vt);const Ut=this._pc.createDataChannel(Ft,Vt);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const zt={type:"offer",sdp:this._remoteSdp.getSdp()};Tt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",zt),await this._pc.setRemoteDescription(zt);const Bt=await this._pc.createAnswer();if(!this._transportReady){const Ht=gt.parse(Bt.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ht})}Tt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Bt),await this._pc.setLocalDescription(Bt),this._hasDataChannelMediaSection=!0}return{dataChannel:Ut}}async setupTransport({localDtlsRole:jt,localSdpObject:Ft}){Ft||(Ft=gt.parse(this._pc.localDescription.sdp));const Lt=St.extractDtlsParameters({sdpObject:Ft});Lt.role=jt,this._remoteSdp.updateDtlsRole(jt==="client"?"server":"client"),await new Promise((Mt,Ot)=>{this.safeEmit("@connect",{dtlsParameters:Lt},Mt,Ot)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Safari11=At},9862:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(Lt,Mt,Ot,Nt){Nt===void 0&&(Nt=Ot);var $t=Object.getOwnPropertyDescriptor(Mt,Ot);$t&&!("get"in $t?!Mt.__esModule:$t.writable||$t.configurable)||($t={enumerable:!0,get:function(){return Mt[Ot]}}),Object.defineProperty(Lt,Nt,$t)}:function(Lt,Mt,Ot,Nt){Nt===void 0&&(Nt=Ot),Lt[Nt]=Mt[Ot]}),pt=this&&this.__setModuleDefault||(Object.create?function(Lt,Mt){Object.defineProperty(Lt,"default",{enumerable:!0,value:Mt})}:function(Lt,Mt){Lt.default=Mt}),mt=this&&this.__importStar||function(Lt){if(Lt&&Lt.__esModule)return Lt;var Mt={};if(Lt!=null)for(var Ot in Lt)Ot!=="default"&&Object.prototype.hasOwnProperty.call(Lt,Ot)&&ft(Mt,Lt,Ot);return pt(Mt,Lt),Mt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Safari12=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=mt(ht(3347)),vt=mt(ht(5280)),St=mt(ht(2267)),wt=mt(ht(9072)),Et=mt(ht(8954)),Rt=ht(9992),Tt=ht(9316),It=ht(7910),At=ht(2770),Dt=new xt.Logger("Safari12"),jt={OS:1024,MIS:1024};class Ft extends Tt.HandlerInterface{static createFactory(){return()=>new Ft}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(Dt.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){Dt.debug("getNativeRtpCapabilities()");const Mt=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{Mt.addTransceiver("audio"),Mt.addTransceiver("video");const Ot=await Mt.createOffer();try{Mt.close()}catch{}const Nt=gt.parse(Ot.sdp),$t=St.extractRtpCapabilities({sdpObject:Nt});return Et.addNackSuppportForOpus($t),$t}catch(Ot){try{Mt.close()}catch{}throw Ot}}async getNativeSctpCapabilities(){return Dt.debug("getNativeSctpCapabilities()"),{numStreams:jt}}run({direction:Mt,iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt,iceServers:Ut,iceTransportPolicy:zt,additionalSettings:Bt,proprietaryConstraints:Ht,extendedRtpCapabilities:Gt}){this.assertNotClosed(),Dt.debug("run()"),this._direction=Mt,this._remoteSdp=new It.RemoteSdp({iceParameters:Ot,iceCandidates:Nt,dtlsParameters:$t,sctpParameters:Vt}),this._sendingRtpParametersByKind={audio:vt.getSendingRtpParameters("audio",Gt),video:vt.getSendingRtpParameters("video",Gt)},this._sendingRemoteRtpParametersByKind={audio:vt.getSendingRemoteRtpParameters("audio",Gt),video:vt.getSendingRemoteRtpParameters("video",Gt)},$t.role&&$t.role!=="auto"&&(this._forcedLocalDtlsRole=$t.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:Ut||[],iceTransportPolicy:zt||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...Bt},Ht),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Dt.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(Mt){this.assertNotClosed(),Dt.debug("updateIceServers()");const Ot=this._pc.getConfiguration();Ot.iceServers=Mt,this._pc.setConfiguration(Ot)}async restartIce(Mt){if(this.assertNotClosed(),Dt.debug("restartIce()"),this._remoteSdp.updateIceParameters(Mt),this._transportReady)if(this._direction==="send"){const Ot=await this._pc.createOffer({iceRestart:!0});Dt.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",Ot),await this._pc.setLocalDescription(Ot);const Nt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",Nt),await this._pc.setRemoteDescription(Nt)}else{const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:Mt,encodings:Ot,codecOptions:Nt,codec:$t}){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("send() [kind:%s, track.id:%s]",Mt.kind,Mt.id);const Vt=yt.clone(this._sendingRtpParametersByKind[Mt.kind]);Vt.codecs=vt.reduceCodecs(Vt.codecs,$t);const Ut=yt.clone(this._sendingRemoteRtpParametersByKind[Mt.kind]);Ut.codecs=vt.reduceCodecs(Ut.codecs,$t);const zt=this._remoteSdp.getNextMediaSectionIdx(),Bt=this._pc.addTransceiver(Mt,{direction:"sendonly",streams:[this._sendStream]});let Ht,Gt=await this._pc.createOffer(),Xt=gt.parse(Gt.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Xt});const Zt=(0,At.parse)((Ot||[{}])[0].scalabilityMode);Ot&&Ot.length>1&&(Dt.debug("send() | enabling legacy simulcast"),Xt=gt.parse(Gt.sdp),Ht=Xt.media[zt.idx],wt.addLegacySimulcast({offerMediaObject:Ht,numStreams:Ot.length}),Gt={type:"offer",sdp:gt.write(Xt)}),Dt.debug("send() | calling pc.setLocalDescription() [offer:%o]",Gt),await this._pc.setLocalDescription(Gt);const hr=Bt.mid;if(Vt.mid=hr,Xt=gt.parse(this._pc.localDescription.sdp),Ht=Xt.media[zt.idx],Vt.rtcp.cname=St.getCname({offerMediaObject:Ht}),Vt.encodings=wt.getRtpEncodings({offerMediaObject:Ht}),Ot)for(let ir=0;ir<Vt.encodings.length;++ir)Ot[ir]&&Object.assign(Vt.encodings[ir],Ot[ir]);if(Vt.encodings.length>1&&(Vt.codecs[0].mimeType.toLowerCase()==="video/vp8"||Vt.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const ir of Vt.encodings)ir.scalabilityMode?ir.scalabilityMode=`L1T${Zt.temporalLayers}`:ir.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Ht,reuseMid:zt.reuseMid,offerRtpParameters:Vt,answerRtpParameters:Ut,codecOptions:Nt});const nr={type:"answer",sdp:this._remoteSdp.getSdp()};return Dt.debug("send() | calling pc.setRemoteDescription() [answer:%o]",nr),await this._pc.setRemoteDescription(nr),this._mapMidTransceiver.set(hr,Bt),{localId:hr,rtpParameters:Vt,rtpSender:Bt.sender}}async stopSending(Mt){if(this.assertSendDirection(),this._closed)return;Dt.debug("stopSending() [localId:%s]",Mt);const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");if(Ot.sender.replaceTrack(null),this._pc.removeTrack(Ot.sender),this._remoteSdp.closeMediaSection(Ot.mid))try{Ot.stop()}catch{}const Nt=await this._pc.createOffer();Dt.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t),this._mapMidTransceiver.delete(Mt)}async pauseSending(Mt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("pauseSending() [localId:%s]",Mt);const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="inactive",this._remoteSdp.pauseMediaSection(Mt);const Nt=await this._pc.createOffer();Dt.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async resumeSending(Mt){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("resumeSending() [localId:%s]",Mt);const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");Ot.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(Mt);const Nt=await this._pc.createOffer();Dt.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",Nt),await this._pc.setLocalDescription(Nt);const $t={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",$t),await this._pc.setRemoteDescription($t)}async replaceTrack(Mt,Ot){this.assertNotClosed(),this.assertSendDirection(),Ot?Dt.debug("replaceTrack() [localId:%s, track.id:%s]",Mt,Ot.id):Dt.debug("replaceTrack() [localId:%s, no track]",Mt);const Nt=this._mapMidTransceiver.get(Mt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");await Nt.sender.replaceTrack(Ot)}async setMaxSpatialLayer(Mt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",Mt,Ot);const Nt=this._mapMidTransceiver.get(Mt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{zt.active=Bt<=Ot}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Mt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async setRtpEncodingParameters(Mt,Ot){this.assertNotClosed(),this.assertSendDirection(),Dt.debug("setRtpEncodingParameters() [localId:%s, params:%o]",Mt,Ot);const Nt=this._mapMidTransceiver.get(Mt);if(!Nt)throw new Error("associated RTCRtpTransceiver not found");const $t=Nt.sender.getParameters();$t.encodings.forEach((zt,Bt)=>{$t.encodings[Bt]={...zt,...Ot}}),await Nt.sender.setParameters($t),this._remoteSdp.muxMediaSectionSimulcast(Mt,$t.encodings);const Vt=await this._pc.createOffer();Dt.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",Vt),await this._pc.setLocalDescription(Vt);const Ut={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",Ut),await this._pc.setRemoteDescription(Ut)}async getSenderStats(Mt){this.assertNotClosed(),this.assertSendDirection();const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.sender.getStats()}async sendDataChannel({ordered:Mt,maxPacketLifeTime:Ot,maxRetransmits:Nt,label:$t,protocol:Vt}){this.assertNotClosed(),this.assertSendDirection();const Ut={negotiated:!0,id:this._nextSendSctpStreamId,ordered:Mt,maxPacketLifeTime:Ot,maxRetransmits:Nt,protocol:Vt};Dt.debug("sendDataChannel() [options:%o]",Ut);const zt=this._pc.createDataChannel($t,Ut);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%jt.MIS,!this._hasDataChannelMediaSection){const Bt=await this._pc.createOffer(),Ht=gt.parse(Bt.sdp),Gt=Ht.media.find(Zt=>Zt.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ht}),Dt.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",Bt),await this._pc.setLocalDescription(Bt),this._remoteSdp.sendSctpAssociation({offerMediaObject:Gt});const Xt={type:"answer",sdp:this._remoteSdp.getSdp()};Dt.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Xt),await this._pc.setRemoteDescription(Xt),this._hasDataChannelMediaSection=!0}return{dataChannel:zt,sctpStreamParameters:{streamId:Ut.id,ordered:Ut.ordered,maxPacketLifeTime:Ut.maxPacketLifeTime,maxRetransmits:Ut.maxRetransmits}}}async receive(Mt){this.assertNotClosed(),this.assertRecvDirection();const Ot=[],Nt=new Map;for(const zt of Mt){const{trackId:Bt,kind:Ht,rtpParameters:Gt,streamId:Xt}=zt;Dt.debug("receive() [trackId:%s, kind:%s]",Bt,Ht);const Zt=Gt.mid||String(this._mapMidTransceiver.size);Nt.set(Bt,Zt),this._remoteSdp.receive({mid:Zt,kind:Ht,offerRtpParameters:Gt,streamId:Xt||Gt.rtcp.cname,trackId:Bt})}const $t={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",$t),await this._pc.setRemoteDescription($t);let Vt=await this._pc.createAnswer();const Ut=gt.parse(Vt.sdp);for(const zt of Mt){const{trackId:Bt,rtpParameters:Ht}=zt,Gt=Nt.get(Bt),Xt=Ut.media.find(Zt=>String(Zt.mid)===Gt);St.applyCodecParameters({offerRtpParameters:Ht,answerMediaObject:Xt})}Vt={type:"answer",sdp:gt.write(Ut)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Ut}),Dt.debug("receive() | calling pc.setLocalDescription() [answer:%o]",Vt),await this._pc.setLocalDescription(Vt);for(const zt of Mt){const{trackId:Bt}=zt,Ht=Nt.get(Bt),Gt=this._pc.getTransceivers().find(Xt=>Xt.mid===Ht);if(!Gt)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(Ht,Gt),Ot.push({localId:Ht,track:Gt.receiver.track,rtpReceiver:Gt.receiver})}return Ot}async stopReceiving(Mt){if(this.assertRecvDirection(),this._closed)return;for(const $t of Mt){Dt.debug("stopReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(Vt.mid)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt);for(const $t of Mt)this._mapMidTransceiver.delete($t)}async pauseReceiving(Mt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Mt){Dt.debug("pauseReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="inactive",this._remoteSdp.pauseMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async resumeReceiving(Mt){this.assertNotClosed(),this.assertRecvDirection();for(const $t of Mt){Dt.debug("resumeReceiving() [localId:%s]",$t);const Vt=this._mapMidTransceiver.get($t);if(!Vt)throw new Error("associated RTCRtpTransceiver not found");Vt.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection($t)}const Ot={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",Ot),await this._pc.setRemoteDescription(Ot);const Nt=await this._pc.createAnswer();Dt.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",Nt),await this._pc.setLocalDescription(Nt)}async getReceiverStats(Mt){this.assertNotClosed(),this.assertRecvDirection();const Ot=this._mapMidTransceiver.get(Mt);if(!Ot)throw new Error("associated RTCRtpTransceiver not found");return Ot.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:Mt,label:Ot,protocol:Nt}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt}=Mt,Bt={negotiated:!0,id:$t,ordered:Vt,maxPacketLifeTime:Ut,maxRetransmits:zt,protocol:Nt};Dt.debug("receiveDataChannel() [options:%o]",Bt);const Ht=this._pc.createDataChannel(Ot,Bt);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const Gt={type:"offer",sdp:this._remoteSdp.getSdp()};Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",Gt),await this._pc.setRemoteDescription(Gt);const Xt=await this._pc.createAnswer();if(!this._transportReady){const Zt=gt.parse(Xt.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Zt})}Dt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Xt),await this._pc.setLocalDescription(Xt),this._hasDataChannelMediaSection=!0}return{dataChannel:Ht}}async setupTransport({localDtlsRole:Mt,localSdpObject:Ot}){Ot||(Ot=gt.parse(this._pc.localDescription.sdp));const Nt=St.extractDtlsParameters({sdpObject:Ot});Nt.role=Mt,this._remoteSdp.updateDtlsRole(Mt==="client"?"server":"client"),await new Promise(($t,Vt)=>{this.safeEmit("@connect",{dtlsParameters:Nt},$t,Vt)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new Rt.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dt.Safari12=Ft},3635:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(xt,yt,vt,St){St===void 0&&(St=vt);var wt=Object.getOwnPropertyDescriptor(yt,vt);wt&&!("get"in wt?!yt.__esModule:wt.writable||wt.configurable)||(wt={enumerable:!0,get:function(){return yt[vt]}}),Object.defineProperty(xt,St,wt)}:function(xt,yt,vt,St){St===void 0&&(St=vt),xt[St]=yt[vt]}),pt=this&&this.__setModuleDefault||(Object.create?function(xt,yt){Object.defineProperty(xt,"default",{enumerable:!0,value:yt})}:function(xt,yt){xt.default=yt}),mt=this&&this.__importStar||function(xt){if(xt&&xt.__esModule)return xt;var yt={};if(xt!=null)for(var vt in xt)vt!=="default"&&Object.prototype.hasOwnProperty.call(xt,vt)&&ft(yt,xt,vt);return pt(yt,xt),yt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.mangleRtpParameters=dt.getCapabilities=void 0;const gt=mt(ht(3347));dt.getCapabilities=function(){const xt=RTCRtpReceiver.getCapabilities(),yt=gt.clone(xt);for(const vt of yt.codecs??[]){if(vt.channels=vt.numChannels,delete vt.numChannels,vt.mimeType=vt.mimeType||`${vt.kind}/${vt.name}`,vt.parameters){const St=vt.parameters;St.apt&&(St.apt=Number(St.apt)),St["packetization-mode"]&&(St["packetization-mode"]=Number(St["packetization-mode"]))}for(const St of vt.rtcpFeedback||[])St.parameter||(St.parameter="")}return yt},dt.mangleRtpParameters=function(xt){const yt=gt.clone(xt);yt.mid&&(yt.muxId=yt.mid,delete yt.mid);for(const vt of yt.codecs)vt.channels&&(vt.numChannels=vt.channels,delete vt.channels),vt.mimeType&&!vt.name&&(vt.name=vt.mimeType.split("/")[1]),delete vt.mimeType;return yt}},8954:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.addNackSuppportForOpus=void 0,dt.addNackSuppportForOpus=function(ht){var ft;for(const pt of ht.codecs||[])pt.mimeType.toLowerCase()!=="audio/opus"&&pt.mimeType.toLowerCase()!=="audio/multiopus"||(ft=pt.rtcpFeedback)!=null&&ft.some(mt=>mt.type==="nack"&&!mt.parameter)||(pt.rtcpFeedback||(pt.rtcpFeedback=[]),pt.rtcpFeedback.push({type:"nack"}))}},6698:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(St,wt,Et,Rt){Rt===void 0&&(Rt=Et);var Tt=Object.getOwnPropertyDescriptor(wt,Et);Tt&&!("get"in Tt?!wt.__esModule:Tt.writable||Tt.configurable)||(Tt={enumerable:!0,get:function(){return wt[Et]}}),Object.defineProperty(St,Rt,Tt)}:function(St,wt,Et,Rt){Rt===void 0&&(Rt=Et),St[Rt]=wt[Et]}),pt=this&&this.__setModuleDefault||(Object.create?function(St,wt){Object.defineProperty(St,"default",{enumerable:!0,value:wt})}:function(St,wt){St.default=wt}),mt=this&&this.__importStar||function(St){if(St&&St.__esModule)return St;var wt={};if(St!=null)for(var Et in St)Et!=="default"&&Object.prototype.hasOwnProperty.call(St,Et)&&ft(wt,St,Et);return pt(wt,St),wt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.OfferMediaSection=dt.AnswerMediaSection=dt.MediaSection=void 0;const gt=mt(ht(766)),xt=mt(ht(3347));class yt{constructor({iceParameters:wt,iceCandidates:Et,dtlsParameters:Rt,planB:Tt=!1}){if(this._mediaObject={},this._planB=Tt,wt&&this.setIceParameters(wt),Et){this._mediaObject.candidates=[];for(const It of Et){const At={component:1};At.foundation=It.foundation,At.ip=It.ip,At.port=It.port,At.priority=It.priority,At.transport=It.protocol,At.type=It.type,It.tcpType&&(At.tcptype=It.tcpType),this._mediaObject.candidates.push(At)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}Rt&&this.setDtlsRole(Rt.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(wt){this._mediaObject.iceUfrag=wt.usernameFragment,this._mediaObject.icePwd=wt.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}dt.MediaSection=yt,dt.AnswerMediaSection=class extends yt{constructor({iceParameters:St,iceCandidates:wt,dtlsParameters:Et,sctpParameters:Rt,plainRtpParameters:Tt,planB:It=!1,offerMediaObject:At,offerRtpParameters:Dt,answerRtpParameters:jt,codecOptions:Ft,extmapAllowMixed:Lt=!1}){switch(super({iceParameters:St,iceCandidates:wt,dtlsParameters:Et,planB:It}),this._mediaObject.mid=String(At.mid),this._mediaObject.type=At.type,this._mediaObject.protocol=At.protocol,Tt?(this._mediaObject.connection={ip:Tt.ip,version:Tt.ipVersion},this._mediaObject.port=Tt.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),At.type){case"audio":case"video":this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const Mt of jt.codecs){const Ot={payload:Mt.payloadType,codec:vt(Mt),rate:Mt.clockRate};Mt.channels>1&&(Ot.encoding=Mt.channels),this._mediaObject.rtp.push(Ot);const Nt=xt.clone(Mt.parameters)??{};let $t=xt.clone(Mt.rtcpFeedback)??[];if(Ft){const{opusStereo:Ut,opusFec:zt,opusDtx:Bt,opusMaxPlaybackRate:Ht,opusMaxAverageBitrate:Gt,opusPtime:Xt,opusNack:Zt,videoGoogleStartBitrate:hr,videoGoogleMaxBitrate:nr,videoGoogleMinBitrate:ir}=Ft,yr=Dt.codecs.find(Cr=>Cr.payloadType===Mt.payloadType);switch(Mt.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":Ut!==void 0&&(yr.parameters["sprop-stereo"]=Ut?1:0,Nt.stereo=Ut?1:0),zt!==void 0&&(yr.parameters.useinbandfec=zt?1:0,Nt.useinbandfec=zt?1:0),Bt!==void 0&&(yr.parameters.usedtx=Bt?1:0,Nt.usedtx=Bt?1:0),Ht!==void 0&&(Nt.maxplaybackrate=Ht),Gt!==void 0&&(Nt.maxaveragebitrate=Gt),Xt!==void 0&&(yr.parameters.ptime=Xt,Nt.ptime=Xt),Zt||(yr.rtcpFeedback=yr.rtcpFeedback.filter(Cr=>Cr.type!=="nack"||Cr.parameter),$t=$t.filter(Cr=>Cr.type!=="nack"||Cr.parameter));break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":hr!==void 0&&(Nt["x-google-start-bitrate"]=hr),nr!==void 0&&(Nt["x-google-max-bitrate"]=nr),ir!==void 0&&(Nt["x-google-min-bitrate"]=ir)}}const Vt={payload:Mt.payloadType,config:""};for(const Ut of Object.keys(Nt))Vt.config&&(Vt.config+=";"),Vt.config+=`${Ut}=${Nt[Ut]}`;Vt.config&&this._mediaObject.fmtp.push(Vt);for(const Ut of $t)this._mediaObject.rtcpFb.push({payload:Mt.payloadType,type:Ut.type,subtype:Ut.parameter})}this._mediaObject.payloads=jt.codecs.map(Mt=>Mt.payloadType).join(" "),this._mediaObject.ext=[];for(const Mt of jt.headerExtensions)(At.ext||[]).some(Ot=>Ot.uri===Mt.uri)&&this._mediaObject.ext.push({uri:Mt.uri,value:Mt.id});if(Lt&&At.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),At.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:At.simulcast.list1},this._mediaObject.rids=[];for(const Mt of At.rids||[])Mt.direction==="send"&&this._mediaObject.rids.push({id:Mt.id,direction:"recv"})}else if(At.simulcast_03){this._mediaObject.simulcast_03={value:At.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const Mt of At.rids||[])Mt.direction==="send"&&this._mediaObject.rids.push({id:Mt.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break;case"application":typeof At.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=Rt.port,this._mediaObject.maxMessageSize=Rt.maxMessageSize):At.sctpmap&&(this._mediaObject.payloads=Rt.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:Rt.port,maxMessageSize:Rt.maxMessageSize})}}setDtlsRole(St){switch(St){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(St){var Tt;if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;const wt={};for(const It of St)It.rid&&(wt[It.rid]=It);const Et=this._mediaObject.simulcast.list1,Rt=gt.parseSimulcastStreamList(Et);for(const It of Rt)for(const At of It)At.paused=!((Tt=wt[At.scid])!=null&&Tt.active);this._mediaObject.simulcast.list1=Rt.map(It=>It.map(At=>`${At.paused?"~":""}${At.scid}`).join(",")).join(";")}};function vt(St){const wt=new RegExp("^(audio|video)/(.+)","i").exec(St.mimeType);if(!wt)throw new TypeError("invalid codec.mimeType");return wt[2]}dt.OfferMediaSection=class extends yt{constructor({iceParameters:St,iceCandidates:wt,dtlsParameters:Et,sctpParameters:Rt,plainRtpParameters:Tt,planB:It=!1,mid:At,kind:Dt,offerRtpParameters:jt,streamId:Ft,trackId:Lt,oldDataChannelSpec:Mt=!1}){switch(super({iceParameters:St,iceCandidates:wt,dtlsParameters:Et,planB:It}),this._mediaObject.mid=String(At),this._mediaObject.type=Dt,Tt?(this._mediaObject.connection={ip:Tt.ip,version:Tt.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=Tt.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.protocol=Rt?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),Dt){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${Ft||"-"} ${Lt}`);for(const Vt of jt.codecs){const Ut={payload:Vt.payloadType,codec:vt(Vt),rate:Vt.clockRate};Vt.channels>1&&(Ut.encoding=Vt.channels),this._mediaObject.rtp.push(Ut);const zt={payload:Vt.payloadType,config:""};for(const Bt of Object.keys(Vt.parameters))zt.config&&(zt.config+=";"),zt.config+=`${Bt}=${Vt.parameters[Bt]}`;zt.config&&this._mediaObject.fmtp.push(zt);for(const Bt of Vt.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:Vt.payloadType,type:Bt.type,subtype:Bt.parameter})}this._mediaObject.payloads=jt.codecs.map(Vt=>Vt.payloadType).join(" "),this._mediaObject.ext=[];for(const Vt of jt.headerExtensions)this._mediaObject.ext.push({uri:Vt.uri,value:Vt.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const Ot=jt.encodings[0],Nt=Ot.ssrc,$t=Ot.rtx&&Ot.rtx.ssrc?Ot.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],jt.rtcp.cname&&this._mediaObject.ssrcs.push({id:Nt,attribute:"cname",value:jt.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:Nt,attribute:"msid",value:`${Ft||"-"} ${Lt}`}),$t&&(jt.rtcp.cname&&this._mediaObject.ssrcs.push({id:$t,attribute:"cname",value:jt.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:$t,attribute:"msid",value:`${Ft||"-"} ${Lt}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${Nt} ${$t}`}));break}case"application":Mt?(this._mediaObject.payloads=Rt.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:Rt.port,maxMessageSize:Rt.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=Rt.port,this._mediaObject.maxMessageSize=Rt.maxMessageSize)}}setDtlsRole(St){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:St,streamId:wt,trackId:Et}){const Rt=St.encodings[0],Tt=Rt.ssrc,It=Rt.rtx&&Rt.rtx.ssrc?Rt.rtx.ssrc:void 0,At=this._mediaObject.payloads.split(" ");for(const Dt of St.codecs){if(At.includes(String(Dt.payloadType)))continue;const jt={payload:Dt.payloadType,codec:vt(Dt),rate:Dt.clockRate};Dt.channels>1&&(jt.encoding=Dt.channels),this._mediaObject.rtp.push(jt);const Ft={payload:Dt.payloadType,config:""};for(const Lt of Object.keys(Dt.parameters))Ft.config&&(Ft.config+=";"),Ft.config+=`${Lt}=${Dt.parameters[Lt]}`;Ft.config&&this._mediaObject.fmtp.push(Ft);for(const Lt of Dt.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:Dt.payloadType,type:Lt.type,subtype:Lt.parameter})}this._mediaObject.payloads+=` ${St.codecs.filter(Dt=>!this._mediaObject.payloads.includes(Dt.payloadType)).map(Dt=>Dt.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),St.rtcp.cname&&this._mediaObject.ssrcs.push({id:Tt,attribute:"cname",value:St.rtcp.cname}),this._mediaObject.ssrcs.push({id:Tt,attribute:"msid",value:`${wt||"-"} ${Et}`}),It&&(St.rtcp.cname&&this._mediaObject.ssrcs.push({id:It,attribute:"cname",value:St.rtcp.cname}),this._mediaObject.ssrcs.push({id:It,attribute:"msid",value:`${wt||"-"} ${Et}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${Tt} ${It}`}))}planBStopReceiving({offerRtpParameters:St}){const wt=St.encodings[0],Et=wt.ssrc,Rt=wt.rtx&&wt.rtx.ssrc?wt.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(Tt=>Tt.id!==Et&&Tt.id!==Rt),Rt&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(Tt=>Tt.ssrcs!==`${Et} ${Rt}`))}}},7910:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(St,wt,Et,Rt){Rt===void 0&&(Rt=Et);var Tt=Object.getOwnPropertyDescriptor(wt,Et);Tt&&!("get"in Tt?!wt.__esModule:Tt.writable||Tt.configurable)||(Tt={enumerable:!0,get:function(){return wt[Et]}}),Object.defineProperty(St,Rt,Tt)}:function(St,wt,Et,Rt){Rt===void 0&&(Rt=Et),St[Rt]=wt[Et]}),pt=this&&this.__setModuleDefault||(Object.create?function(St,wt){Object.defineProperty(St,"default",{enumerable:!0,value:wt})}:function(St,wt){St.default=wt}),mt=this&&this.__importStar||function(St){if(St&&St.__esModule)return St;var wt={};if(St!=null)for(var Et in St)Et!=="default"&&Object.prototype.hasOwnProperty.call(St,Et)&&ft(wt,St,Et);return pt(wt,St),wt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.RemoteSdp=void 0;const gt=mt(ht(766)),xt=ht(8562),yt=ht(6698),vt=new xt.Logger("RemoteSdp");dt.RemoteSdp=class{constructor({iceParameters:St,iceCandidates:wt,dtlsParameters:Et,sctpParameters:Rt,plainRtpParameters:Tt,planB:It=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=St,this._iceCandidates=wt,this._dtlsParameters=Et,this._sctpParameters=Rt,this._plainRtpParameters=Tt,this._planB=It,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},St&&St.iceLite&&(this._sdpObject.icelite="ice-lite"),Et){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const At=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:Et.fingerprints[At-1].algorithm,hash:Et.fingerprints[At-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}Tt&&(this._sdpObject.origin.address=Tt.ip,this._sdpObject.origin.ipVer=Tt.ipVersion)}updateIceParameters(St){vt.debug("updateIceParameters() [iceParameters:%o]",St),this._iceParameters=St,this._sdpObject.icelite=St.iceLite?"ice-lite":void 0;for(const wt of this._mediaSections)wt.setIceParameters(St)}updateDtlsRole(St){vt.debug("updateDtlsRole() [role:%s]",St),this._dtlsParameters.role=St;for(const wt of this._mediaSections)wt.setDtlsRole(St)}getNextMediaSectionIdx(){for(let St=0;St<this._mediaSections.length;++St){const wt=this._mediaSections[St];if(wt.closed)return{idx:St,reuseMid:wt.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:St,reuseMid:wt,offerRtpParameters:Et,answerRtpParameters:Rt,codecOptions:Tt,extmapAllowMixed:It=!1}){const At=new yt.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:St,offerRtpParameters:Et,answerRtpParameters:Rt,codecOptions:Tt,extmapAllowMixed:It});wt?this._replaceMediaSection(At,wt):this._midToIndex.has(At.mid)?this._replaceMediaSection(At):this._addMediaSection(At)}receive({mid:St,kind:wt,offerRtpParameters:Et,streamId:Rt,trackId:Tt}){const It=this._midToIndex.get(St);let At;if(It!==void 0&&(At=this._mediaSections[It]),At)At.planBReceive({offerRtpParameters:Et,streamId:Rt,trackId:Tt}),this._replaceMediaSection(At);else{At=new yt.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:St,kind:wt,offerRtpParameters:Et,streamId:Rt,trackId:Tt});const Dt=this._mediaSections.find(jt=>jt.closed);Dt?this._replaceMediaSection(At,Dt.mid):this._addMediaSection(At)}}pauseMediaSection(St){this._findMediaSection(St).pause()}resumeSendingMediaSection(St){this._findMediaSection(St).resume()}resumeReceivingMediaSection(St){this._findMediaSection(St).resume()}disableMediaSection(St){this._findMediaSection(St).disable()}closeMediaSection(St){const wt=this._findMediaSection(St);return St===this._firstMid?(vt.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",St),this.disableMediaSection(St),!1):(wt.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(St,wt){const Et=this._findMediaSection(St);Et.muxSimulcastStreams(wt),this._replaceMediaSection(Et)}planBStopReceiving({mid:St,offerRtpParameters:wt}){const Et=this._findMediaSection(St);Et.planBStopReceiving({offerRtpParameters:wt}),this._replaceMediaSection(Et)}sendSctpAssociation({offerMediaObject:St}){const wt=new yt.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:St});this._addMediaSection(wt)}receiveSctpAssociation({oldDataChannelSpec:St=!1}={}){const wt=new yt.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:St});this._addMediaSection(wt)}getSdp(){return this._sdpObject.origin.sessionVersion++,gt.write(this._sdpObject)}_addMediaSection(St){this._firstMid||(this._firstMid=St.mid),this._mediaSections.push(St),this._midToIndex.set(St.mid,this._mediaSections.length-1),this._sdpObject.media.push(St.getObject()),this._regenerateBundleMids()}_replaceMediaSection(St,wt){if(typeof wt=="string"){const Et=this._midToIndex.get(wt);if(Et===void 0)throw new Error(`no media section found for reuseMid '${wt}'`);const Rt=this._mediaSections[Et];this._mediaSections[Et]=St,this._midToIndex.delete(Rt.mid),this._midToIndex.set(St.mid,Et),this._sdpObject.media[Et]=St.getObject(),this._regenerateBundleMids()}else{const Et=this._midToIndex.get(St.mid);if(Et===void 0)throw new Error(`no media section found with mid '${St.mid}'`);this._mediaSections[Et]=St,this._sdpObject.media[Et]=St.getObject()}}_findMediaSection(St){const wt=this._midToIndex.get(St);if(wt===void 0)throw new Error(`no media section found with mid '${St}'`);return this._mediaSections[wt]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(St=>!St.closed).map(St=>St.mid).join(" "))}}},2267:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(xt,yt,vt,St){St===void 0&&(St=vt);var wt=Object.getOwnPropertyDescriptor(yt,vt);wt&&!("get"in wt?!yt.__esModule:wt.writable||wt.configurable)||(wt={enumerable:!0,get:function(){return yt[vt]}}),Object.defineProperty(xt,St,wt)}:function(xt,yt,vt,St){St===void 0&&(St=vt),xt[St]=yt[vt]}),pt=this&&this.__setModuleDefault||(Object.create?function(xt,yt){Object.defineProperty(xt,"default",{enumerable:!0,value:yt})}:function(xt,yt){xt.default=yt}),mt=this&&this.__importStar||function(xt){if(xt&&xt.__esModule)return xt;var yt={};if(xt!=null)for(var vt in xt)vt!=="default"&&Object.prototype.hasOwnProperty.call(xt,vt)&&ft(yt,xt,vt);return pt(yt,xt),yt};Object.defineProperty(dt,"__esModule",{value:!0}),dt.applyCodecParameters=dt.getCname=dt.extractDtlsParameters=dt.extractRtpCapabilities=void 0;const gt=mt(ht(766));dt.extractRtpCapabilities=function({sdpObject:xt}){const yt=new Map,vt=[];let St=!1,wt=!1;for(const Et of xt.media){const Rt=Et.type;switch(Rt){case"audio":if(St)continue;St=!0;break;case"video":if(wt)continue;wt=!0;break;default:continue}for(const Tt of Et.rtp){const It={kind:Rt,mimeType:`${Rt}/${Tt.codec}`,preferredPayloadType:Tt.payload,clockRate:Tt.rate,channels:Tt.encoding,parameters:{},rtcpFeedback:[]};yt.set(It.preferredPayloadType,It)}for(const Tt of Et.fmtp||[]){const It=gt.parseParams(Tt.config),At=yt.get(Tt.payload);At&&(It&&It.hasOwnProperty("profile-level-id")&&(It["profile-level-id"]=String(It["profile-level-id"])),At.parameters=It)}for(const Tt of Et.rtcpFb||[]){const It={type:Tt.type,parameter:Tt.subtype};if(It.parameter||delete It.parameter,Tt.payload!=="*"){const At=yt.get(Tt.payload);if(!At)continue;At.rtcpFeedback.push(It)}else for(const At of yt.values())At.kind!==Rt||/.+\/rtx$/i.test(At.mimeType)||At.rtcpFeedback.push(It)}for(const Tt of Et.ext||[]){if(Tt["encrypt-uri"])continue;const It={kind:Rt,uri:Tt.uri,preferredId:Tt.value};vt.push(It)}}return{codecs:Array.from(yt.values()),headerExtensions:vt}},dt.extractDtlsParameters=function({sdpObject:xt}){let yt,vt=xt.setup,St=xt.fingerprint;if(!vt||!St){const wt=(xt.media||[]).find(Et=>Et.port!==0);wt&&(vt??(vt=wt.setup),St??(St=wt.fingerprint))}if(!vt)throw new Error("no a=setup found at SDP session or media level");if(!St)throw new Error("no a=fingerprint found at SDP session or media level");switch(vt){case"active":yt="client";break;case"passive":yt="server";break;case"actpass":yt="auto"}return{role:yt,fingerprints:[{algorithm:St.type,value:St.hash}]}},dt.getCname=function({offerMediaObject:xt}){const yt=(xt.ssrcs||[]).find(vt=>vt.attribute==="cname");return yt?yt.value:""},dt.applyCodecParameters=function({offerRtpParameters:xt,answerMediaObject:yt}){for(const vt of xt.codecs){const St=vt.mimeType.toLowerCase();if(St!=="audio/opus"||!(yt.rtp||[]).find(Rt=>Rt.payload===vt.payloadType))continue;yt.fmtp=yt.fmtp||[];let wt=yt.fmtp.find(Rt=>Rt.payload===vt.payloadType);wt||(wt={payload:vt.payloadType,config:""},yt.fmtp.push(wt));const Et=gt.parseParams(wt.config);switch(St){case"audio/opus":{const Rt=vt.parameters["sprop-stereo"];Rt!==void 0&&(Et.stereo=Rt?1:0);break}}wt.config="";for(const Rt of Object.keys(Et))wt.config&&(wt.config+=";"),wt.config+=`${Rt}=${Et[Rt]}`}}},9875:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.addLegacySimulcast=dt.getRtpEncodings=void 0,dt.getRtpEncodings=function({offerMediaObject:ht,track:ft}){const pt=new Set;for(const xt of ht.ssrcs||[])if(xt.attribute==="msid"&&xt.value.split(" ")[1]===ft.id){const yt=xt.id;pt.add(yt)}if(pt.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${ft.id}]`);const mt=new Map;for(const xt of ht.ssrcGroups||[]){if(xt.semantics!=="FID")continue;let[yt,vt]=xt.ssrcs.split(/\s+/);yt=Number(yt),vt=Number(vt),pt.has(yt)&&(pt.delete(yt),pt.delete(vt),mt.set(yt,vt))}for(const xt of pt)mt.set(xt,null);const gt=[];for(const[xt,yt]of mt){const vt={ssrc:xt};yt&&(vt.rtx={ssrc:yt}),gt.push(vt)}return gt},dt.addLegacySimulcast=function({offerMediaObject:ht,track:ft,numStreams:pt}){if(pt<=1)throw new TypeError("numStreams must be greater than 1");let mt,gt,xt;if(!(ht.ssrcs||[]).find(Et=>Et.attribute!=="msid"?!1:Et.value.split(" ")[1]===ft.id&&(mt=Et.id,xt=Et.value.split(" ")[0],!0)))throw new Error(`a=ssrc line with msid information not found [track.id:${ft.id}]`);(ht.ssrcGroups||[]).some(Et=>{if(Et.semantics!=="FID")return!1;const Rt=Et.ssrcs.split(/\s+/);return Number(Rt[0])===mt&&(gt=Number(Rt[1]),!0)});const yt=ht.ssrcs.find(Et=>Et.attribute==="cname"&&Et.id===mt);if(!yt)throw new Error(`a=ssrc line with cname information not found [track.id:${ft.id}]`);const vt=yt.value,St=[],wt=[];for(let Et=0;Et<pt;++Et)St.push(mt+Et),gt&&wt.push(gt+Et);ht.ssrcGroups=ht.ssrcGroups||[],ht.ssrcs=ht.ssrcs||[],ht.ssrcGroups.push({semantics:"SIM",ssrcs:St.join(" ")});for(let Et=0;Et<St.length;++Et){const Rt=St[Et];ht.ssrcs.push({id:Rt,attribute:"cname",value:vt}),ht.ssrcs.push({id:Rt,attribute:"msid",value:`${xt} ${ft.id}`})}for(let Et=0;Et<wt.length;++Et){const Rt=St[Et],Tt=wt[Et];ht.ssrcs.push({id:Tt,attribute:"cname",value:vt}),ht.ssrcs.push({id:Tt,attribute:"msid",value:`${xt} ${ft.id}`}),ht.ssrcGroups.push({semantics:"FID",ssrcs:`${Rt} ${Tt}`})}}},9072:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.addLegacySimulcast=dt.getRtpEncodings=void 0,dt.getRtpEncodings=function({offerMediaObject:ht}){const ft=new Set;for(const gt of ht.ssrcs||[]){const xt=gt.id;ft.add(xt)}if(ft.size===0)throw new Error("no a=ssrc lines found");const pt=new Map;for(const gt of ht.ssrcGroups||[]){if(gt.semantics!=="FID")continue;let[xt,yt]=gt.ssrcs.split(/\s+/);xt=Number(xt),yt=Number(yt),ft.has(xt)&&(ft.delete(xt),ft.delete(yt),pt.set(xt,yt))}for(const gt of ft)pt.set(gt,null);const mt=[];for(const[gt,xt]of pt){const yt={ssrc:gt};xt&&(yt.rtx={ssrc:xt}),mt.push(yt)}return mt},dt.addLegacySimulcast=function({offerMediaObject:ht,numStreams:ft}){if(ft<=1)throw new TypeError("numStreams must be greater than 1");const pt=(ht.ssrcs||[]).find(Rt=>Rt.attribute==="msid");if(!pt)throw new Error("a=ssrc line with msid information not found");const[mt,gt]=pt.value.split(" "),xt=pt.id;let yt;(ht.ssrcGroups||[]).some(Rt=>{if(Rt.semantics!=="FID")return!1;const Tt=Rt.ssrcs.split(/\s+/);return Number(Tt[0])===xt&&(yt=Number(Tt[1]),!0)});const vt=ht.ssrcs.find(Rt=>Rt.attribute==="cname");if(!vt)throw new Error("a=ssrc line with cname information not found");const St=vt.value,wt=[],Et=[];for(let Rt=0;Rt<ft;++Rt)wt.push(xt+Rt),yt&&Et.push(yt+Rt);ht.ssrcGroups=[],ht.ssrcs=[],ht.ssrcGroups.push({semantics:"SIM",ssrcs:wt.join(" ")});for(let Rt=0;Rt<wt.length;++Rt){const Tt=wt[Rt];ht.ssrcs.push({id:Tt,attribute:"cname",value:St}),ht.ssrcs.push({id:Tt,attribute:"msid",value:`${mt} ${gt}`})}for(let Rt=0;Rt<Et.length;++Rt){const Tt=wt[Rt],It=Et[Rt];ht.ssrcs.push({id:It,attribute:"cname",value:St}),ht.ssrcs.push({id:It,attribute:"msid",value:`${mt} ${gt}`}),ht.ssrcGroups.push({semantics:"FID",ssrcs:`${Tt} ${It}`})}}},960:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(wt,Et,Rt,Tt){Tt===void 0&&(Tt=Rt);var It=Object.getOwnPropertyDescriptor(Et,Rt);It&&!("get"in It?!Et.__esModule:It.writable||It.configurable)||(It={enumerable:!0,get:function(){return Et[Rt]}}),Object.defineProperty(wt,Tt,It)}:function(wt,Et,Rt,Tt){Tt===void 0&&(Tt=Rt),wt[Tt]=Et[Rt]}),pt=this&&this.__setModuleDefault||(Object.create?function(wt,Et){Object.defineProperty(wt,"default",{enumerable:!0,value:Et})}:function(wt,Et){wt.default=Et}),mt=this&&this.__importStar||function(wt){if(wt&&wt.__esModule)return wt;var Et={};if(wt!=null)for(var Rt in wt)Rt!=="default"&&Object.prototype.hasOwnProperty.call(wt,Rt)&&ft(Et,wt,Rt);return pt(Et,wt),Et},gt=this&&this.__importDefault||function(wt){return wt&&wt.__esModule?wt:{default:wt}};Object.defineProperty(dt,"__esModule",{value:!0}),dt.debug=dt.parseScalabilityMode=dt.detectDevice=dt.Device=dt.version=dt.types=void 0;const xt=gt(ht(1227));dt.debug=xt.default;const yt=ht(3120);Object.defineProperty(dt,"Device",{enumerable:!0,get:function(){return yt.Device}}),Object.defineProperty(dt,"detectDevice",{enumerable:!0,get:function(){return yt.detectDevice}});const vt=mt(ht(53));dt.types=vt,dt.version="3.7.2";var St=ht(2770);Object.defineProperty(dt,"parseScalabilityMode",{enumerable:!0,get:function(){return St.parse}})},5280:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(Mt,Ot,Nt,$t){$t===void 0&&($t=Nt);var Vt=Object.getOwnPropertyDescriptor(Ot,Nt);Vt&&!("get"in Vt?!Ot.__esModule:Vt.writable||Vt.configurable)||(Vt={enumerable:!0,get:function(){return Ot[Nt]}}),Object.defineProperty(Mt,$t,Vt)}:function(Mt,Ot,Nt,$t){$t===void 0&&($t=Nt),Mt[$t]=Ot[Nt]}),pt=this&&this.__setModuleDefault||(Object.create?function(Mt,Ot){Object.defineProperty(Mt,"default",{enumerable:!0,value:Ot})}:function(Mt,Ot){Mt.default=Ot}),mt=this&&this.__importStar||function(Mt){if(Mt&&Mt.__esModule)return Mt;var Ot={};if(Mt!=null)for(var Nt in Mt)Nt!=="default"&&Object.prototype.hasOwnProperty.call(Mt,Nt)&&ft(Ot,Mt,Nt);return pt(Ot,Mt),Ot};Object.defineProperty(dt,"__esModule",{value:!0}),dt.canReceive=dt.canSend=dt.generateProbatorRtpParameters=dt.reduceCodecs=dt.getSendingRemoteRtpParameters=dt.getSendingRtpParameters=dt.getRecvRtpCapabilities=dt.getExtendedRtpCapabilities=dt.validateSctpStreamParameters=dt.validateSctpParameters=dt.validateNumSctpStreams=dt.validateSctpCapabilities=dt.validateRtcpParameters=dt.validateRtpEncodingParameters=dt.validateRtpHeaderExtensionParameters=dt.validateRtpCodecParameters=dt.validateRtpParameters=dt.validateRtpHeaderExtension=dt.validateRtcpFeedback=dt.validateRtpCodecCapability=dt.validateRtpCapabilities=void 0;const gt=mt(ht(4115)),xt=mt(ht(3347));function yt(Mt){const Ot=new RegExp("^(audio|video)/(.+)","i");if(typeof Mt!="object")throw new TypeError("codec is not an object");if(!Mt.mimeType||typeof Mt.mimeType!="string")throw new TypeError("missing codec.mimeType");const Nt=Ot.exec(Mt.mimeType);if(!Nt)throw new TypeError("invalid codec.mimeType");if(Mt.kind=Nt[1].toLowerCase(),Mt.preferredPayloadType&&typeof Mt.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof Mt.clockRate!="number")throw new TypeError("missing codec.clockRate");Mt.kind==="audio"?typeof Mt.channels!="number"&&(Mt.channels=1):delete Mt.channels,Mt.parameters&&typeof Mt.parameters=="object"||(Mt.parameters={});for(const $t of Object.keys(Mt.parameters)){let Vt=Mt.parameters[$t];if(Vt===void 0&&(Mt.parameters[$t]="",Vt=""),typeof Vt!="string"&&typeof Vt!="number")throw new TypeError(`invalid codec parameter [key:${$t}s, value:${Vt}]`);if($t==="apt"&&typeof Vt!="number")throw new TypeError("invalid codec apt parameter")}Mt.rtcpFeedback&&Array.isArray(Mt.rtcpFeedback)||(Mt.rtcpFeedback=[]);for(const $t of Mt.rtcpFeedback)vt($t)}function vt(Mt){if(typeof Mt!="object")throw new TypeError("fb is not an object");if(!Mt.type||typeof Mt.type!="string")throw new TypeError("missing fb.type");Mt.parameter&&typeof Mt.parameter=="string"||(Mt.parameter="")}function St(Mt){if(typeof Mt!="object")throw new TypeError("ext is not an object");if(Mt.kind!=="audio"&&Mt.kind!=="video")throw new TypeError("invalid ext.kind");if(!Mt.uri||typeof Mt.uri!="string")throw new TypeError("missing ext.uri");if(typeof Mt.preferredId!="number")throw new TypeError("missing ext.preferredId");if(Mt.preferredEncrypt&&typeof Mt.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(Mt.preferredEncrypt||(Mt.preferredEncrypt=!1),Mt.direction&&typeof Mt.direction!="string")throw new TypeError("invalid ext.direction");Mt.direction||(Mt.direction="sendrecv")}function wt(Mt){if(typeof Mt!="object")throw new TypeError("params is not an object");if(Mt.mid&&typeof Mt.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(Mt.codecs))throw new TypeError("missing params.codecs");for(const Ot of Mt.codecs)Et(Ot);if(Mt.headerExtensions&&!Array.isArray(Mt.headerExtensions))throw new TypeError("params.headerExtensions is not an array");Mt.headerExtensions||(Mt.headerExtensions=[]);for(const Ot of Mt.headerExtensions)Rt(Ot);if(Mt.encodings&&!Array.isArray(Mt.encodings))throw new TypeError("params.encodings is not an array");Mt.encodings||(Mt.encodings=[]);for(const Ot of Mt.encodings)Tt(Ot);if(Mt.rtcp&&typeof Mt.rtcp!="object")throw new TypeError("params.rtcp is not an object");Mt.rtcp||(Mt.rtcp={}),It(Mt.rtcp)}function Et(Mt){const Ot=new RegExp("^(audio|video)/(.+)","i");if(typeof Mt!="object")throw new TypeError("codec is not an object");if(!Mt.mimeType||typeof Mt.mimeType!="string")throw new TypeError("missing codec.mimeType");const Nt=Ot.exec(Mt.mimeType);if(!Nt)throw new TypeError("invalid codec.mimeType");if(typeof Mt.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof Mt.clockRate!="number")throw new TypeError("missing codec.clockRate");Nt[1].toLowerCase()==="audio"?typeof Mt.channels!="number"&&(Mt.channels=1):delete Mt.channels,Mt.parameters&&typeof Mt.parameters=="object"||(Mt.parameters={});for(const $t of Object.keys(Mt.parameters)){let Vt=Mt.parameters[$t];if(Vt===void 0&&(Mt.parameters[$t]="",Vt=""),typeof Vt!="string"&&typeof Vt!="number")throw new TypeError(`invalid codec parameter [key:${$t}s, value:${Vt}]`);if($t==="apt"&&typeof Vt!="number")throw new TypeError("invalid codec apt parameter")}Mt.rtcpFeedback&&Array.isArray(Mt.rtcpFeedback)||(Mt.rtcpFeedback=[]);for(const $t of Mt.rtcpFeedback)vt($t)}function Rt(Mt){if(typeof Mt!="object")throw new TypeError("ext is not an object");if(!Mt.uri||typeof Mt.uri!="string")throw new TypeError("missing ext.uri");if(typeof Mt.id!="number")throw new TypeError("missing ext.id");if(Mt.encrypt&&typeof Mt.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");Mt.encrypt||(Mt.encrypt=!1),Mt.parameters&&typeof Mt.parameters=="object"||(Mt.parameters={});for(const Ot of Object.keys(Mt.parameters)){let Nt=Mt.parameters[Ot];if(Nt===void 0&&(Mt.parameters[Ot]="",Nt=""),typeof Nt!="string"&&typeof Nt!="number")throw new TypeError("invalid header extension parameter")}}function Tt(Mt){if(typeof Mt!="object")throw new TypeError("encoding is not an object");if(Mt.ssrc&&typeof Mt.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(Mt.rid&&typeof Mt.rid!="string")throw new TypeError("invalid encoding.rid");if(Mt.rtx&&typeof Mt.rtx!="object")throw new TypeError("invalid encoding.rtx");if(Mt.rtx&&typeof Mt.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if(Mt.dtx&&typeof Mt.dtx=="boolean"||(Mt.dtx=!1),Mt.scalabilityMode&&typeof Mt.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function It(Mt){if(typeof Mt!="object")throw new TypeError("rtcp is not an object");if(Mt.cname&&typeof Mt.cname!="string")throw new TypeError("invalid rtcp.cname");Mt.reducedSize&&typeof Mt.reducedSize=="boolean"||(Mt.reducedSize=!0)}function At(Mt){if(typeof Mt!="object")throw new TypeError("numStreams is not an object");if(typeof Mt.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof Mt.MIS!="number")throw new TypeError("missing numStreams.MIS")}function Dt(Mt){return!!Mt&&/.+\/rtx$/i.test(Mt.mimeType)}function jt(Mt,Ot,{strict:Nt=!1,modify:$t=!1}={}){const Vt=Mt.mimeType.toLowerCase();if(Vt!==Ot.mimeType.toLowerCase()||Mt.clockRate!==Ot.clockRate||Mt.channels!==Ot.channels)return!1;switch(Vt){case"video/h264":if(Nt){if((Mt.parameters["packetization-mode"]||0)!==(Ot.parameters["packetization-mode"]||0)||!gt.isSameProfile(Mt.parameters,Ot.parameters))return!1;let Ut;try{Ut=gt.generateProfileLevelIdStringForAnswer(Mt.parameters,Ot.parameters)}catch{return!1}$t&&(Ut?(Mt.parameters["profile-level-id"]=Ut,Ot.parameters["profile-level-id"]=Ut):(delete Mt.parameters["profile-level-id"],delete Ot.parameters["profile-level-id"]))}break;case"video/vp9":if(Nt&&(Mt.parameters["profile-id"]||0)!==(Ot.parameters["profile-id"]||0))return!1}return!0}function Ft(Mt,Ot){return(!Mt.kind||!Ot.kind||Mt.kind===Ot.kind)&&Mt.uri===Ot.uri}function Lt(Mt,Ot){const Nt=[];for(const $t of Mt.rtcpFeedback||[]){const Vt=(Ot.rtcpFeedback||[]).find(Ut=>Ut.type===$t.type&&(Ut.parameter===$t.parameter||!Ut.parameter&&!$t.parameter));Vt&&Nt.push(Vt)}return Nt}dt.validateRtpCapabilities=function(Mt){if(typeof Mt!="object")throw new TypeError("caps is not an object");if(Mt.codecs&&!Array.isArray(Mt.codecs))throw new TypeError("caps.codecs is not an array");Mt.codecs||(Mt.codecs=[]);for(const Ot of Mt.codecs)yt(Ot);if(Mt.headerExtensions&&!Array.isArray(Mt.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");Mt.headerExtensions||(Mt.headerExtensions=[]);for(const Ot of Mt.headerExtensions)St(Ot)},dt.validateRtpCodecCapability=yt,dt.validateRtcpFeedback=vt,dt.validateRtpHeaderExtension=St,dt.validateRtpParameters=wt,dt.validateRtpCodecParameters=Et,dt.validateRtpHeaderExtensionParameters=Rt,dt.validateRtpEncodingParameters=Tt,dt.validateRtcpParameters=It,dt.validateSctpCapabilities=function(Mt){if(typeof Mt!="object")throw new TypeError("caps is not an object");if(!Mt.numStreams||typeof Mt.numStreams!="object")throw new TypeError("missing caps.numStreams");At(Mt.numStreams)},dt.validateNumSctpStreams=At,dt.validateSctpParameters=function(Mt){if(typeof Mt!="object")throw new TypeError("params is not an object");if(typeof Mt.port!="number")throw new TypeError("missing params.port");if(typeof Mt.OS!="number")throw new TypeError("missing params.OS");if(typeof Mt.MIS!="number")throw new TypeError("missing params.MIS");if(typeof Mt.maxMessageSize!="number")throw new TypeError("missing params.maxMessageSize")},dt.validateSctpStreamParameters=function(Mt){if(typeof Mt!="object")throw new TypeError("params is not an object");if(typeof Mt.streamId!="number")throw new TypeError("missing params.streamId");let Ot=!1;if(typeof Mt.ordered=="boolean"?Ot=!0:Mt.ordered=!0,Mt.maxPacketLifeTime&&typeof Mt.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(Mt.maxRetransmits&&typeof Mt.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(Mt.maxPacketLifeTime&&Mt.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(Ot&&Mt.ordered&&(Mt.maxPacketLifeTime||Mt.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(Ot||!Mt.maxPacketLifeTime&&!Mt.maxRetransmits||(Mt.ordered=!1),Mt.label&&typeof Mt.label!="string")throw new TypeError("invalid params.label");if(Mt.protocol&&typeof Mt.protocol!="string")throw new TypeError("invalid params.protocol")},dt.getExtendedRtpCapabilities=function(Mt,Ot){const Nt={codecs:[],headerExtensions:[]};for(const $t of Ot.codecs||[]){if(Dt($t))continue;const Vt=(Mt.codecs||[]).find(zt=>jt(zt,$t,{strict:!0,modify:!0}));if(!Vt)continue;const Ut={mimeType:Vt.mimeType,kind:Vt.kind,clockRate:Vt.clockRate,channels:Vt.channels,localPayloadType:Vt.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:$t.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:Vt.parameters,remoteParameters:$t.parameters,rtcpFeedback:Lt(Vt,$t)};Nt.codecs.push(Ut)}for(const $t of Nt.codecs){const Vt=Mt.codecs.find(zt=>Dt(zt)&&zt.parameters.apt===$t.localPayloadType),Ut=Ot.codecs.find(zt=>Dt(zt)&&zt.parameters.apt===$t.remotePayloadType);Vt&&Ut&&($t.localRtxPayloadType=Vt.preferredPayloadType,$t.remoteRtxPayloadType=Ut.preferredPayloadType)}for(const $t of Ot.headerExtensions){const Vt=Mt.headerExtensions.find(zt=>Ft(zt,$t));if(!Vt)continue;const Ut={kind:$t.kind,uri:$t.uri,sendId:Vt.preferredId,recvId:$t.preferredId,encrypt:Vt.preferredEncrypt,direction:"sendrecv"};switch($t.direction){case"sendrecv":Ut.direction="sendrecv";break;case"recvonly":Ut.direction="sendonly";break;case"sendonly":Ut.direction="recvonly";break;case"inactive":Ut.direction="inactive"}Nt.headerExtensions.push(Ut)}return Nt},dt.getRecvRtpCapabilities=function(Mt){const Ot={codecs:[],headerExtensions:[]};for(const Nt of Mt.codecs){const $t={mimeType:Nt.mimeType,kind:Nt.kind,preferredPayloadType:Nt.remotePayloadType,clockRate:Nt.clockRate,channels:Nt.channels,parameters:Nt.localParameters,rtcpFeedback:Nt.rtcpFeedback};if(Ot.codecs.push($t),!Nt.remoteRtxPayloadType)continue;const Vt={mimeType:`${Nt.kind}/rtx`,kind:Nt.kind,preferredPayloadType:Nt.remoteRtxPayloadType,clockRate:Nt.clockRate,parameters:{apt:Nt.remotePayloadType},rtcpFeedback:[]};Ot.codecs.push(Vt)}for(const Nt of Mt.headerExtensions){if(Nt.direction!=="sendrecv"&&Nt.direction!=="recvonly")continue;const $t={kind:Nt.kind,uri:Nt.uri,preferredId:Nt.recvId,preferredEncrypt:Nt.encrypt,direction:Nt.direction};Ot.headerExtensions.push($t)}return Ot},dt.getSendingRtpParameters=function(Mt,Ot){const Nt={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const $t of Ot.codecs){if($t.kind!==Mt)continue;const Vt={mimeType:$t.mimeType,payloadType:$t.localPayloadType,clockRate:$t.clockRate,channels:$t.channels,parameters:$t.localParameters,rtcpFeedback:$t.rtcpFeedback};if(Nt.codecs.push(Vt),$t.localRtxPayloadType){const Ut={mimeType:`${$t.kind}/rtx`,payloadType:$t.localRtxPayloadType,clockRate:$t.clockRate,parameters:{apt:$t.localPayloadType},rtcpFeedback:[]};Nt.codecs.push(Ut)}}for(const $t of Ot.headerExtensions){if($t.kind&&$t.kind!==Mt||$t.direction!=="sendrecv"&&$t.direction!=="sendonly")continue;const Vt={uri:$t.uri,id:$t.sendId,encrypt:$t.encrypt,parameters:{}};Nt.headerExtensions.push(Vt)}return Nt},dt.getSendingRemoteRtpParameters=function(Mt,Ot){const Nt={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const $t of Ot.codecs){if($t.kind!==Mt)continue;const Vt={mimeType:$t.mimeType,payloadType:$t.localPayloadType,clockRate:$t.clockRate,channels:$t.channels,parameters:$t.remoteParameters,rtcpFeedback:$t.rtcpFeedback};if(Nt.codecs.push(Vt),$t.localRtxPayloadType){const Ut={mimeType:`${$t.kind}/rtx`,payloadType:$t.localRtxPayloadType,clockRate:$t.clockRate,parameters:{apt:$t.localPayloadType},rtcpFeedback:[]};Nt.codecs.push(Ut)}}for(const $t of Ot.headerExtensions){if($t.kind&&$t.kind!==Mt||$t.direction!=="sendrecv"&&$t.direction!=="sendonly")continue;const Vt={uri:$t.uri,id:$t.sendId,encrypt:$t.encrypt,parameters:{}};Nt.headerExtensions.push(Vt)}if(Nt.headerExtensions.some($t=>$t.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const $t of Nt.codecs)$t.rtcpFeedback=($t.rtcpFeedback||[]).filter(Vt=>Vt.type!=="goog-remb");else if(Nt.headerExtensions.some($t=>$t.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const $t of Nt.codecs)$t.rtcpFeedback=($t.rtcpFeedback||[]).filter(Vt=>Vt.type!=="transport-cc");else for(const $t of Nt.codecs)$t.rtcpFeedback=($t.rtcpFeedback||[]).filter(Vt=>Vt.type!=="transport-cc"&&Vt.type!=="goog-remb");return Nt},dt.reduceCodecs=function(Mt,Ot){const Nt=[];if(Ot){for(let $t=0;$t<Mt.length;++$t)if(jt(Mt[$t],Ot)){Nt.push(Mt[$t]),Dt(Mt[$t+1])&&Nt.push(Mt[$t+1]);break}if(Nt.length===0)throw new TypeError("no matching codec found")}else Nt.push(Mt[0]),Dt(Mt[1])&&Nt.push(Mt[1]);return Nt},dt.generateProbatorRtpParameters=function(Mt){wt(Mt=xt.clone(Mt));const Ot={mid:"probator",codecs:[],headerExtensions:[],encodings:[{ssrc:1234}],rtcp:{cname:"probator"}};return Ot.codecs.push(Mt.codecs[0]),Ot.codecs[0].payloadType=127,Ot.headerExtensions=Mt.headerExtensions,Ot},dt.canSend=function(Mt,Ot){return Ot.codecs.some(Nt=>Nt.kind===Mt)},dt.canReceive=function(Mt,Ot){if(wt(Mt),Mt.codecs.length===0)return!1;const Nt=Mt.codecs[0];return Ot.codecs.some($t=>$t.remotePayloadType===Nt.payloadType)}},2770:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.parse=void 0;const ht=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");dt.parse=function(ft){const pt=ht.exec(ft||"");return pt?{spatialLayers:Number(pt[1]),temporalLayers:Number(pt[2])}:{spatialLayers:1,temporalLayers:1}}},53:function(ut,dt,ht){var ft=this&&this.__createBinding||(Object.create?function(mt,gt,xt,yt){yt===void 0&&(yt=xt);var vt=Object.getOwnPropertyDescriptor(gt,xt);vt&&!("get"in vt?!gt.__esModule:vt.writable||vt.configurable)||(vt={enumerable:!0,get:function(){return gt[xt]}}),Object.defineProperty(mt,yt,vt)}:function(mt,gt,xt,yt){yt===void 0&&(yt=xt),mt[yt]=gt[xt]}),pt=this&&this.__exportStar||function(mt,gt){for(var xt in mt)xt==="default"||Object.prototype.hasOwnProperty.call(gt,xt)||ft(gt,mt,xt)};Object.defineProperty(dt,"__esModule",{value:!0}),pt(ht(3120),dt),pt(ht(5202),dt),pt(ht(6569),dt),pt(ht(9514),dt),pt(ht(5504),dt),pt(ht(1623),dt),pt(ht(4879),dt),pt(ht(7669),dt),pt(ht(9316),dt),pt(ht(9992),dt)},3347:(ut,dt)=>{Object.defineProperty(dt,"__esModule",{value:!0}),dt.generateRandomNumber=dt.clone=void 0,dt.clone=function(ht){return ht===void 0?void 0:Number.isNaN(ht)?NaN:typeof structuredClone=="function"?structuredClone(ht):JSON.parse(JSON.stringify(ht))},dt.generateRandomNumber=function(){return Math.round(1e7*Math.random())}},7824:ut=>{var dt=1e3,ht=60*dt,ft=60*ht,pt=24*ft,mt=7*pt,gt=365.25*pt;function xt(yt,vt,St,wt){var Et=vt>=1.5*St;return Math.round(yt/St)+" "+wt+(Et?"s":"")}ut.exports=function(yt,vt){vt=vt||{};var St=typeof yt;if(St==="string"&&yt.length>0)return function(wt){if(!((wt=String(wt)).length>100)){var Et=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(wt);if(Et){var Rt=parseFloat(Et[1]);switch((Et[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return Rt*gt;case"weeks":case"week":case"w":return Rt*mt;case"days":case"day":case"d":return Rt*pt;case"hours":case"hour":case"hrs":case"hr":case"h":return Rt*ft;case"minutes":case"minute":case"mins":case"min":case"m":return Rt*ht;case"seconds":case"second":case"secs":case"sec":case"s":return Rt*dt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Rt;default:return}}}}(yt);if(St==="number"&&isFinite(yt))return vt.long?function(wt){var Et=Math.abs(wt);return Et>=pt?xt(wt,Et,pt,"day"):Et>=ft?xt(wt,Et,ft,"hour"):Et>=ht?xt(wt,Et,ht,"minute"):Et>=dt?xt(wt,Et,dt,"second"):wt+" ms"}(yt):function(wt){var Et=Math.abs(wt);return Et>=pt?Math.round(wt/pt)+"d":Et>=ft?Math.round(wt/ft)+"h":Et>=ht?Math.round(wt/ht)+"m":Et>=dt?Math.round(wt/dt)+"s":wt+"ms"}(yt);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(yt))}},7576:(ut,dt,ht)=>{const{EventEmitter:ft}=ht(7187),pt=ht(3417);ut.exports=class extends ft{constructor(mt){super(),this.setMaxListeners(1/0),this._logger=mt||new pt("EnhancedEventEmitter")}safeEmit(mt,...gt){try{this.emit(mt,...gt)}catch(xt){this._logger.error("safeEmit() | event listener threw an error [event:%s]:%o",mt,xt)}}async safeEmitAsPromise(mt,...gt){return new Promise((xt,yt)=>{this.safeEmit(mt,...gt,xt,yt)})}}},3417:(ut,dt,ht)=>{const ft=ht(1227),pt="protoo-client";ut.exports=class{constructor(mt){mt?(this._debug=ft(`${pt}:${mt}`),this._warn=ft(`${pt}:WARN:${mt}`),this._error=ft(`${pt}:ERROR:${mt}`)):(this._debug=ft(pt),this._warn=ft(`${pt}:WARN`),this._error=ft(`${pt}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},6508:(ut,dt,ht)=>{const ft=ht(3417),{generateRandomNumber:pt}=ht(5654),mt=new ft("Message");ut.exports=class{static parse(gt){let xt;const yt={};try{xt=JSON.parse(gt)}catch(vt){return void mt.error("parse() | invalid JSON: %s",vt)}if(typeof xt=="object"&&!Array.isArray(xt)){if(xt.request){if(yt.request=!0,typeof xt.method!="string")return void mt.error("parse() | missing/invalid method field");if(typeof xt.id!="number")return void mt.error("parse() | missing/invalid id field");yt.id=xt.id,yt.method=xt.method,yt.data=xt.data||{}}else if(xt.response){if(yt.response=!0,typeof xt.id!="number")return void mt.error("parse() | missing/invalid id field");yt.id=xt.id,xt.ok?(yt.ok=!0,yt.data=xt.data||{}):(yt.ok=!1,yt.errorCode=xt.errorCode,yt.errorReason=xt.errorReason)}else{if(!xt.notification)return void mt.error("parse() | missing request/response field");if(yt.notification=!0,typeof xt.method!="string")return void mt.error("parse() | missing/invalid method field");yt.method=xt.method,yt.data=xt.data||{}}return yt}mt.error("parse() | not an object")}static createRequest(gt,xt){return{request:!0,id:pt(),method:gt,data:xt||{}}}static createSuccessResponse(gt,xt){return{response:!0,id:gt.id,ok:!0,data:xt||{}}}static createErrorResponse(gt,xt,yt){return{response:!0,id:gt.id,ok:!1,errorCode:xt,errorReason:yt}}static createNotification(gt,xt){return{notification:!0,method:gt,data:xt||{}}}}},7502:(ut,dt,ht)=>{const ft=ht(3417),pt=ht(7576),mt=ht(6508),gt=new ft("Peer");ut.exports=class extends pt{constructor(xt){super(gt),gt.debug("constructor()"),this._closed=!1,this._transport=xt,this._connected=!1,this._data={},this._sents=new Map,this._handleTransport()}get closed(){return this._closed}get connected(){return this._connected}get data(){return this._data}set data(xt){throw new Error("cannot override data object")}close(){if(!this._closed){gt.debug("close()"),this._closed=!0,this._connected=!1,this._transport.close();for(const xt of this._sents.values())xt.close();this.safeEmit("close")}}async request(xt,yt=void 0){const vt=mt.createRequest(xt,yt);return this._logger.debug("request() [method:%s, id:%s]",xt,vt.id),await this._transport.send(vt),new Promise((St,wt)=>{const Et=1500*(15+.1*this._sents.size),Rt={id:vt.id,method:vt.method,resolve:Tt=>{this._sents.delete(vt.id)&&(clearTimeout(Rt.timer),St(Tt))},reject:Tt=>{this._sents.delete(vt.id)&&(clearTimeout(Rt.timer),wt(Tt))},timer:setTimeout(()=>{this._sents.delete(vt.id)&&wt(new Error("request timeout"))},Et),close:()=>{clearTimeout(Rt.timer),wt(new Error("peer closed"))}};this._sents.set(vt.id,Rt)})}async notify(xt,yt=void 0){const vt=mt.createNotification(xt,yt);this._logger.debug("notify() [method:%s]",xt),await this._transport.send(vt)}_handleTransport(){if(this._transport.closed)return this._closed=!0,void setTimeout(()=>{this._closed||(this._connected=!1,this.safeEmit("close"))});this._transport.on("open",()=>{this._closed||(gt.debug('emit "open"'),this._connected=!0,this.safeEmit("open"))}),this._transport.on("disconnected",()=>{this._closed||(gt.debug('emit "disconnected"'),this._connected=!1,this.safeEmit("disconnected"))}),this._transport.on("failed",xt=>{this._closed||(gt.debug('emit "failed" [currentAttempt:%s]',xt),this._connected=!1,this.safeEmit("failed",xt))}),this._transport.on("close",()=>{this._closed||(this._closed=!0,gt.debug('emit "close"'),this._connected=!1,this.safeEmit("close"))}),this._transport.on("message",xt=>{xt.request?this._handleRequest(xt):xt.response?this._handleResponse(xt):xt.notification&&this._handleNotification(xt)})}_handleRequest(xt){try{this.emit("request",xt,yt=>{const vt=mt.createSuccessResponse(xt,yt);this._transport.send(vt).catch(()=>{})},(yt,vt)=>{yt instanceof Error?(vt=yt.message,yt=500):typeof yt=="number"&&vt instanceof Error&&(vt=vt.message);const St=mt.createErrorResponse(xt,yt,vt);this._transport.send(St).catch(()=>{})})}catch(yt){const vt=mt.createErrorResponse(xt,500,String(yt));this._transport.send(vt).catch(()=>{})}}_handleResponse(xt){const yt=this._sents.get(xt.id);if(yt)if(xt.ok)yt.resolve(xt.data);else{const vt=new Error(xt.errorReason);vt.code=xt.errorCode,yt.reject(vt)}else gt.error("received response does not match any sent request [id:%s]",xt.id)}_handleNotification(xt){this.safeEmit("notification",xt)}}},9293:(ut,dt,ht)=>{ht(7002);const ft=ht(7502),pt=ht(2165);dt._z=ft,dt.qo=pt},2165:(ut,dt,ht)=>{const ft=ht(5840).w3cwebsocket,pt=ht(9353),mt=ht(3417),gt=ht(7576),xt=ht(6508),yt={retries:10,factor:2,minTimeout:1e3,maxTimeout:8e3},vt=new mt("WebSocketTransport");ut.exports=class extends gt{constructor(St,wt){super(vt),vt.debug("constructor() [url:%s, options:%o]",St,wt),this._closed=!1,this._url=St,this._options=wt||{},this._ws=null,this._runWebSocket()}get closed(){return this._closed}close(){if(!this._closed){vt.debug("close()"),this._closed=!0,this.safeEmit("close");try{this._ws.onopen=null,this._ws.onclose=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.close()}catch(St){vt.error("close() | error closing the WebSocket: %o",St)}}}async send(St){if(this._closed)throw new Error("transport closed");try{this._ws.send(JSON.stringify(St))}catch(wt){throw vt.warn("send() failed:%o",wt),wt}}_runWebSocket(){const St=pt.operation(this._options.retry||yt);let wt=!1;St.attempt(Et=>{this._closed?St.stop():(vt.debug("_runWebSocket() [currentAttempt:%s]",Et),this._ws=new ft(this._url,"protoo",this._options.origin,this._options.headers,this._options.requestOptions,this._options.clientConfig),this._ws.onopen=()=>{this._closed||(wt=!0,this.safeEmit("open"))},this._ws.onclose=Rt=>{if(!this._closed){if(vt.warn('WebSocket "close" event [wasClean:%s, code:%s, reason:"%s"]',Rt.wasClean,Rt.code,Rt.reason),Rt.code!==4e3){if(wt)return St.stop(),this.safeEmit("disconnected"),this._closed?void 0:void this._runWebSocket();if(this.safeEmit("failed",Et),this._closed||St.retry(!0))return}this._closed=!0,this.safeEmit("close")}},this._ws.onerror=()=>{this._closed||vt.error('WebSocket "error" event')},this._ws.onmessage=Rt=>{if(this._closed)return;const Tt=xt.parse(Rt.data);Tt&&(this.listenerCount("message")!==0?this.safeEmit("message",Tt):vt.error('no listeners for WebSocket "message" event, ignoring received message'))})})}}},5654:(ut,dt)=>{dt.generateRandomNumber=function(){return Math.round(1e7*Math.random())}},4375:(ut,dt,ht)=>{let ft;ut.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:ht.g):pt=>(ft||(ft=Promise.resolve())).then(pt).catch(mt=>setTimeout(()=>{throw mt},0))},3196:ut=>{ut.exports=function(dt){var ht,ft,pt="",mt=(dt=function(xt){return xt||(xt={}),{length:xt.length||8,numeric:typeof xt.numeric!="boolean"||xt.numeric,letters:typeof xt.letters!="boolean"||xt.letters,special:typeof xt.special=="boolean"&&xt.special,exclude:Array.isArray(xt.exclude)?xt.exclude:[]}}(dt)).length,gt=(dt.exclude,function(xt){var yt="";xt.numeric&&(yt+="0123456789"),xt.letters&&(yt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),xt.special&&(yt+="!$%^&*()_+|~-=`{}[]:;<>?,./");for(var vt=0;vt<=xt.exclude.length;vt++)yt=yt.replace(xt.exclude[vt],"");return yt}(dt));for(ht=1;ht<=mt;ht++)pt+=gt.substring(ft=Math.floor(Math.random()*gt.length),ft+1);return pt}},9353:(ut,dt,ht)=>{ut.exports=ht(1846)},1846:(ut,dt,ht)=>{var ft=ht(1960);dt.operation=function(pt){var mt=dt.timeouts(pt);return new ft(mt,{forever:pt&&pt.forever,unref:pt&&pt.unref,maxRetryTime:pt&&pt.maxRetryTime})},dt.timeouts=function(pt){if(pt instanceof Array)return[].concat(pt);var mt={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var gt in pt)mt[gt]=pt[gt];if(mt.minTimeout>mt.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var xt=[],yt=0;yt<mt.retries;yt++)xt.push(this.createTimeout(yt,mt));return pt&&pt.forever&&!xt.length&&xt.push(this.createTimeout(yt,mt)),xt.sort(function(vt,St){return vt-St}),xt},dt.createTimeout=function(pt,mt){var gt=mt.randomize?Math.random()+1:1,xt=Math.round(gt*mt.minTimeout*Math.pow(mt.factor,pt));return xt=Math.min(xt,mt.maxTimeout)},dt.wrap=function(pt,mt,gt){if(mt instanceof Array&&(gt=mt,mt=null),!gt)for(var xt in gt=[],pt)typeof pt[xt]=="function"&&gt.push(xt);for(var yt=0;yt<gt.length;yt++){var vt=gt[yt],St=pt[vt];pt[vt]=(function(wt){var Et=dt.operation(mt),Rt=Array.prototype.slice.call(arguments,1),Tt=Rt.pop();Rt.push(function(It){Et.retry(It)||(It&&(arguments[0]=Et.mainError()),Tt.apply(this,arguments))}),Et.attempt(function(){wt.apply(pt,Rt)})}).bind(pt,St),pt[vt].options=mt}}},1960:ut=>{function dt(ht,ft){typeof ft=="boolean"&&(ft={forever:ft}),this._originalTimeouts=JSON.parse(JSON.stringify(ht)),this._timeouts=ht,this._options=ft||{},this._maxRetryTime=ft&&ft.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}ut.exports=dt,dt.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},dt.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},dt.prototype.retry=function(ht){if(this._timeout&&clearTimeout(this._timeout),!ht)return!1;var ft=new Date().getTime();if(ht&&ft-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(ht);var pt=this._timeouts.shift();if(pt===void 0){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),pt=this._timeouts.shift()}var mt=this,gt=setTimeout(function(){mt._attempts++,mt._operationTimeoutCb&&(mt._timeout=setTimeout(function(){mt._operationTimeoutCb(mt._attempts)},mt._operationTimeout),mt._options.unref&&mt._timeout.unref()),mt._fn(mt._attempts)},pt);return this._options.unref&&gt.unref(),!0},dt.prototype.attempt=function(ht,ft){this._fn=ht,ft&&(ft.timeout&&(this._operationTimeout=ft.timeout),ft.cb&&(this._operationTimeoutCb=ft.cb));var pt=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){pt._operationTimeoutCb()},pt._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},dt.prototype.try=function(ht){console.log("Using RetryOperation.try() is deprecated"),this.attempt(ht)},dt.prototype.start=function(ht){console.log("Using RetryOperation.start() is deprecated"),this.attempt(ht)},dt.prototype.start=dt.prototype.try,dt.prototype.errors=function(){return this._errors},dt.prototype.attempts=function(){return this._attempts},dt.prototype.mainError=function(){if(this._errors.length===0)return null;for(var ht={},ft=null,pt=0,mt=0;mt<this._errors.length;mt++){var gt=this._errors[mt],xt=gt.message,yt=(ht[xt]||0)+1;ht[xt]=yt,yt>=pt&&(ft=gt,pt=yt)}return ft}},6692:ut=>{var dt=ut.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(ht){return ht.encoding?"rtpmap:%d %s/%s/%s":ht.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(ht){return ht.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(ht){return ht.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(ht){return"extmap:%d"+(ht.direction?"/%s":"%v")+(ht["encrypt-uri"]?" %s":"%v")+" %s"+(ht.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(ht){return ht.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(ht){var ft="candidate:%s %d %s %d %s %d typ %s";return ft+=ht.raddr!=null?" raddr %s rport %d":"%v%v",ft+=ht.tcptype!=null?" tcptype %s":"%v",ht.generation!=null&&(ft+=" generation %d"),ft+=ht["network-id"]!=null?" network-id %d":"%v",ft+=ht["network-cost"]!=null?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(ht){var ft="ssrc:%d";return ht.attribute!=null&&(ft+=" %s",ht.value!=null&&(ft+=":%s")),ft}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(ht){return ht.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(ht){return ht.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(ht){return"imageattr:%s %s %s"+(ht.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(ht){return"simulcast:%s %s"+(ht.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(ht){return"ts-refclk:%s"+(ht.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(ht){var ft="mediaclk:";return ft+=ht.id!=null?"id=%s %s":"%v%s",ft+=ht.mediaClockValue!=null?"=%s":"",ft+=ht.rateNumerator!=null?" rate=%s":"",ft+=ht.rateDenominator!=null?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(dt).forEach(function(ht){dt[ht].forEach(function(ft){ft.reg||(ft.reg=/(.*)/),ft.format||(ft.format="%s")})})},766:(ut,dt,ht)=>{var ft=ht(962),pt=ht(5776);dt.write=pt,dt.parse=ft.parse,dt.parseParams=ft.parseParams,dt.parseFmtpConfig=ft.parseFmtpConfig,dt.parsePayloads=ft.parsePayloads,dt.parseRemoteCandidates=ft.parseRemoteCandidates,dt.parseImageAttributes=ft.parseImageAttributes,dt.parseSimulcastStreamList=ft.parseSimulcastStreamList},962:(ut,dt,ht)=>{var ft=function(yt){return String(Number(yt))===yt?Number(yt):yt},pt=function(yt,vt,St){var wt=yt.name&&yt.names;yt.push&&!vt[yt.push]?vt[yt.push]=[]:wt&&!vt[yt.name]&&(vt[yt.name]={});var Et=yt.push?{}:wt?vt[yt.name]:vt;(function(Rt,Tt,It,At){if(At&&!It)Tt[At]=ft(Rt[1]);else for(var Dt=0;Dt<It.length;Dt+=1)Rt[Dt+1]!=null&&(Tt[It[Dt]]=ft(Rt[Dt+1]))})(St.match(yt.reg),Et,yt.names,yt.name),yt.push&&vt[yt.push].push(Et)},mt=ht(6692),gt=RegExp.prototype.test.bind(/^([a-z])=(.*)/);dt.parse=function(yt){var vt={},St=[],wt=vt;return yt.split(/(\r\n|\r|\n)/).filter(gt).forEach(function(Et){var Rt=Et[0],Tt=Et.slice(2);Rt==="m"&&(St.push({rtp:[],fmtp:[]}),wt=St[St.length-1]);for(var It=0;It<(mt[Rt]||[]).length;It+=1){var At=mt[Rt][It];if(At.reg.test(Tt))return pt(At,wt,Tt)}}),vt.media=St,vt};var xt=function(yt,vt){var St=vt.split(/=(.+)/,2);return St.length===2?yt[St[0]]=ft(St[1]):St.length===1&&vt.length>1&&(yt[St[0]]=void 0),yt};dt.parseParams=function(yt){return yt.split(/;\s?/).reduce(xt,{})},dt.parseFmtpConfig=dt.parseParams,dt.parsePayloads=function(yt){return yt.toString().split(" ").map(Number)},dt.parseRemoteCandidates=function(yt){for(var vt=[],St=yt.split(" ").map(ft),wt=0;wt<St.length;wt+=3)vt.push({component:St[wt],ip:St[wt+1],port:St[wt+2]});return vt},dt.parseImageAttributes=function(yt){return yt.split(" ").map(function(vt){return vt.substring(1,vt.length-1).split(",").reduce(xt,{})})},dt.parseSimulcastStreamList=function(yt){return yt.split(";").map(function(vt){return vt.split(",").map(function(St){var wt,Et=!1;return St[0]!=="~"?wt=ft(St):(wt=ft(St.substring(1,St.length)),Et=!0),{scid:wt,paused:Et}})})}},5776:(ut,dt,ht)=>{var ft=ht(6692),pt=/%[sdv%]/g,mt=function(vt){var St=1,wt=arguments,Et=wt.length;return vt.replace(pt,function(Rt){if(St>=Et)return Rt;var Tt=wt[St];switch(St+=1,Rt){case"%%":return"%";case"%s":return String(Tt);case"%d":return Number(Tt);case"%v":return""}})},gt=function(vt,St,wt){var Et=[vt+"="+(St.format instanceof Function?St.format(St.push?wt:wt[St.name]):St.format)];if(St.names)for(var Rt=0;Rt<St.names.length;Rt+=1){var Tt=St.names[Rt];St.name?Et.push(wt[St.name][Tt]):Et.push(wt[St.names[Rt]])}else Et.push(wt[St.name]);return mt.apply(null,Et)},xt=["v","o","s","i","u","e","p","c","b","t","r","z","a"],yt=["i","c","b","a"];ut.exports=function(vt,St){St=St||{},vt.version==null&&(vt.version=0),vt.name==null&&(vt.name=" "),vt.media.forEach(function(Tt){Tt.payloads==null&&(Tt.payloads="")});var wt=St.outerOrder||xt,Et=St.innerOrder||yt,Rt=[];return wt.forEach(function(Tt){ft[Tt].forEach(function(It){It.name in vt&&vt[It.name]!=null?Rt.push(gt(Tt,It,vt)):It.push in vt&&vt[It.push]!=null&&vt[It.push].forEach(function(At){Rt.push(gt(Tt,It,At))})})}),vt.media.forEach(function(Tt){Rt.push(gt("m",ft.m[0],Tt)),Et.forEach(function(It){ft[It].forEach(function(At){At.name in Tt&&Tt[At.name]!=null?Rt.push(gt(It,At,Tt)):At.push in Tt&&Tt[At.push]!=null&&Tt[At.push].forEach(function(Dt){Rt.push(gt(It,At,Dt))})})})}),Rt.join(`\r
`)+`\r
`}},2238:function(ut,dt,ht){var ft;(function(pt,mt){var gt="function",xt="undefined",yt="object",vt="string",St="major",wt="model",Et="name",Rt="type",Tt="vendor",It="version",At="architecture",Dt="console",jt="mobile",Ft="tablet",Lt="smarttv",Mt="wearable",Ot="embedded",Nt="Amazon",$t="Apple",Vt="ASUS",Ut="BlackBerry",zt="Browser",Bt="Chrome",Ht="Firefox",Gt="Google",Xt="Huawei",Zt="LG",hr="Microsoft",nr="Motorola",ir="Opera",yr="Samsung",Cr="Sharp",Sr="Sony",xr="Xiaomi",gr="Zebra",_r="Facebook",fr="Chromium OS",Nr="Mac OS",Tr=function(pn){for(var En={},Rn=0;Rn<pn.length;Rn++)En[pn[Rn].toUpperCase()]=pn[Rn];return En},Hr=function(pn,En){return typeof pn===vt&&Vr(En).indexOf(Vr(pn))!==-1},Vr=function(pn){return pn.toLowerCase()},mn=function(pn,En){if(typeof pn===vt)return pn=pn.replace(/^\s\s*/,""),typeof En===xt?pn:pn.substring(0,500)},tn=function(pn,En){for(var Rn,Qn,Ln,ln,Xn,Yr,Qr=0;Qr<En.length&&!Xn;){var Mn=En[Qr],Ar=En[Qr+1];for(Rn=Qn=0;Rn<Mn.length&&!Xn&&Mn[Rn];)if(Xn=Mn[Rn++].exec(pn))for(Ln=0;Ln<Ar.length;Ln++)Yr=Xn[++Qn],typeof(ln=Ar[Ln])===yt&&ln.length>0?ln.length===2?typeof ln[1]==gt?this[ln[0]]=ln[1].call(this,Yr):this[ln[0]]=ln[1]:ln.length===3?typeof ln[1]!==gt||ln[1].exec&&ln[1].test?this[ln[0]]=Yr?Yr.replace(ln[1],ln[2]):mt:this[ln[0]]=Yr?ln[1].call(this,Yr,ln[2]):mt:ln.length===4&&(this[ln[0]]=Yr?ln[3].call(this,Yr.replace(ln[1],ln[2])):mt):this[ln]=Yr||mt;Qr+=2}},er=function(pn,En){for(var Rn in En)if(typeof En[Rn]===yt&&En[Rn].length>0){for(var Qn=0;Qn<En[Rn].length;Qn++)if(Hr(En[Rn][Qn],pn))return Rn==="?"?mt:Rn}else if(Hr(En[Rn],pn))return Rn==="?"?mt:Rn;return pn},tr={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},vr={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[It,[Et,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[It,[Et,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[Et,It],[/opios[\/ ]+([\w\.]+)/i],[It,[Et,ir+" Mini"]],[/\bopr\/([\w\.]+)/i],[It,[Et,ir]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[It,[Et,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[Et,It],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[It,[Et,"UC"+zt]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[It,[Et,"WeChat"]],[/konqueror\/([\w\.]+)/i],[It,[Et,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[It,[Et,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[It,[Et,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[It,[Et,"Smart Lenovo "+zt]],[/(avast|avg)\/([\w\.]+)/i],[[Et,/(.+)/,"$1 Secure "+zt],It],[/\bfocus\/([\w\.]+)/i],[It,[Et,Ht+" Focus"]],[/\bopt\/([\w\.]+)/i],[It,[Et,ir+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[It,[Et,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[It,[Et,"Dolphin"]],[/coast\/([\w\.]+)/i],[It,[Et,ir+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[It,[Et,"MIUI "+zt]],[/fxios\/([-\w\.]+)/i],[It,[Et,Ht]],[/\bqihu|(qi?ho?o?|360)browser/i],[[Et,"360 "+zt]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[Et,/(.+)/,"$1 "+zt],It],[/samsungbrowser\/([\w\.]+)/i],[It,[Et,yr+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[Et,/_/g," "],It],[/metasr[\/ ]?([\d\.]+)/i],[It,[Et,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[Et,"Sogou Mobile"],It],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[Et,It],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[Et],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[Et,_r],It],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[Et,It],[/\bgsa\/([\w\.]+) .*safari\//i],[It,[Et,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[It,[Et,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[It,[Et,Bt+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[Et,Bt+" WebView"],It],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[It,[Et,"Android "+zt]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[Et,It],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[It,[Et,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[It,Et],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[Et,[It,er,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[Et,It],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[Et,"Netscape"],It],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[It,[Et,Ht+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[Et,It],[/(cobalt)\/([\w\.]+)/i],[Et,[It,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[At,"amd64"]],[/(ia32(?=;))/i],[[At,Vr]],[/((?:i[346]|x)86)[;\)]/i],[[At,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[At,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[At,"armhf"]],[/windows (ce|mobile); ppc;/i],[[At,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[At,/ower/,"",Vr]],[/(sun4\w)[;\)]/i],[[At,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[At,Vr]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[wt,[Tt,yr],[Rt,Ft]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[wt,[Tt,yr],[Rt,jt]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[wt,[Tt,$t],[Rt,jt]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[wt,[Tt,$t],[Rt,Ft]],[/(macintosh);/i],[wt,[Tt,$t]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[wt,[Tt,Cr],[Rt,jt]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[wt,[Tt,Xt],[Rt,Ft]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[wt,[Tt,Xt],[Rt,jt]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[wt,/_/g," "],[Tt,xr],[Rt,jt]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[wt,/_/g," "],[Tt,xr],[Rt,Ft]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[wt,[Tt,"OPPO"],[Rt,jt]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[wt,[Tt,"Vivo"],[Rt,jt]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[wt,[Tt,"Realme"],[Rt,jt]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[wt,[Tt,nr],[Rt,jt]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[wt,[Tt,nr],[Rt,Ft]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[wt,[Tt,Zt],[Rt,Ft]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[wt,[Tt,Zt],[Rt,jt]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[wt,[Tt,"Lenovo"],[Rt,Ft]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[wt,/_/g," "],[Tt,"Nokia"],[Rt,jt]],[/(pixel c)\b/i],[wt,[Tt,Gt],[Rt,Ft]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[wt,[Tt,Gt],[Rt,jt]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[wt,[Tt,Sr],[Rt,jt]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[wt,"Xperia Tablet"],[Tt,Sr],[Rt,Ft]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[wt,[Tt,"OnePlus"],[Rt,jt]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[wt,[Tt,Nt],[Rt,Ft]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[wt,/(.+)/g,"Fire Phone $1"],[Tt,Nt],[Rt,jt]],[/(playbook);[-\w\),; ]+(rim)/i],[wt,Tt,[Rt,Ft]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[wt,[Tt,Ut],[Rt,jt]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[wt,[Tt,Vt],[Rt,Ft]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[wt,[Tt,Vt],[Rt,jt]],[/(nexus 9)/i],[wt,[Tt,"HTC"],[Rt,Ft]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[Tt,[wt,/_/g," "],[Rt,jt]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[wt,[Tt,"Acer"],[Rt,Ft]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[wt,[Tt,"Meizu"],[Rt,jt]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[wt,[Tt,"Ulefone"],[Rt,jt]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[Tt,wt,[Rt,jt]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[Tt,wt,[Rt,Ft]],[/(surface duo)/i],[wt,[Tt,hr],[Rt,Ft]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[wt,[Tt,"Fairphone"],[Rt,jt]],[/(u304aa)/i],[wt,[Tt,"AT&T"],[Rt,jt]],[/\bsie-(\w*)/i],[wt,[Tt,"Siemens"],[Rt,jt]],[/\b(rct\w+) b/i],[wt,[Tt,"RCA"],[Rt,Ft]],[/\b(venue[\d ]{2,7}) b/i],[wt,[Tt,"Dell"],[Rt,Ft]],[/\b(q(?:mv|ta)\w+) b/i],[wt,[Tt,"Verizon"],[Rt,Ft]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[wt,[Tt,"Barnes & Noble"],[Rt,Ft]],[/\b(tm\d{3}\w+) b/i],[wt,[Tt,"NuVision"],[Rt,Ft]],[/\b(k88) b/i],[wt,[Tt,"ZTE"],[Rt,Ft]],[/\b(nx\d{3}j) b/i],[wt,[Tt,"ZTE"],[Rt,jt]],[/\b(gen\d{3}) b.+49h/i],[wt,[Tt,"Swiss"],[Rt,jt]],[/\b(zur\d{3}) b/i],[wt,[Tt,"Swiss"],[Rt,Ft]],[/\b((zeki)?tb.*\b) b/i],[wt,[Tt,"Zeki"],[Rt,Ft]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[Tt,"Dragon Touch"],wt,[Rt,Ft]],[/\b(ns-?\w{0,9}) b/i],[wt,[Tt,"Insignia"],[Rt,Ft]],[/\b((nxa|next)-?\w{0,9}) b/i],[wt,[Tt,"NextBook"],[Rt,Ft]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[Tt,"Voice"],wt,[Rt,jt]],[/\b(lvtel\-)?(v1[12]) b/i],[[Tt,"LvTel"],wt,[Rt,jt]],[/\b(ph-1) /i],[wt,[Tt,"Essential"],[Rt,jt]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[wt,[Tt,"Envizen"],[Rt,Ft]],[/\b(trio[-\w\. ]+) b/i],[wt,[Tt,"MachSpeed"],[Rt,Ft]],[/\btu_(1491) b/i],[wt,[Tt,"Rotor"],[Rt,Ft]],[/(shield[\w ]+) b/i],[wt,[Tt,"Nvidia"],[Rt,Ft]],[/(sprint) (\w+)/i],[Tt,wt,[Rt,jt]],[/(kin\.[onetw]{3})/i],[[wt,/\./g," "],[Tt,hr],[Rt,jt]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[wt,[Tt,gr],[Rt,Ft]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[wt,[Tt,gr],[Rt,jt]],[/smart-tv.+(samsung)/i],[Tt,[Rt,Lt]],[/hbbtv.+maple;(\d+)/i],[[wt,/^/,"SmartTV"],[Tt,yr],[Rt,Lt]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[Tt,Zt],[Rt,Lt]],[/(apple) ?tv/i],[Tt,[wt,$t+" TV"],[Rt,Lt]],[/crkey/i],[[wt,Bt+"cast"],[Tt,Gt],[Rt,Lt]],[/droid.+aft(\w+)( bui|\))/i],[wt,[Tt,Nt],[Rt,Lt]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[wt,[Tt,Cr],[Rt,Lt]],[/(bravia[\w ]+)( bui|\))/i],[wt,[Tt,Sr],[Rt,Lt]],[/(mitv-\w{5}) bui/i],[wt,[Tt,xr],[Rt,Lt]],[/Hbbtv.*(technisat) (.*);/i],[Tt,wt,[Rt,Lt]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[Tt,mn],[wt,mn],[Rt,Lt]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[Rt,Lt]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[Tt,wt,[Rt,Dt]],[/droid.+; (shield) bui/i],[wt,[Tt,"Nvidia"],[Rt,Dt]],[/(playstation [345portablevi]+)/i],[wt,[Tt,Sr],[Rt,Dt]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[wt,[Tt,hr],[Rt,Dt]],[/((pebble))app/i],[Tt,wt,[Rt,Mt]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[wt,[Tt,$t],[Rt,Mt]],[/droid.+; (glass) \d/i],[wt,[Tt,Gt],[Rt,Mt]],[/droid.+; (wt63?0{2,3})\)/i],[wt,[Tt,gr],[Rt,Mt]],[/(quest( 2| pro)?)/i],[wt,[Tt,_r],[Rt,Mt]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[Tt,[Rt,Ot]],[/(aeobc)\b/i],[wt,[Tt,Nt],[Rt,Ot]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[wt,[Rt,jt]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[wt,[Rt,Ft]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[Rt,Ft]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[Rt,jt]],[/(android[-\w\. ]{0,9});.+buil/i],[wt,[Tt,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[It,[Et,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[It,[Et,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[Et,It],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[It,Et]],os:[[/microsoft (windows) (vista|xp)/i],[Et,It],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[Et,[It,er,tr]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[It,er,tr],[Et,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[It,/_/g,"."],[Et,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[Et,Nr],[It,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[It,Et],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[Et,It],[/\(bb(10);/i],[It,[Et,Ut]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[It,[Et,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[It,[Et,Ht+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[It,[Et,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[It,[Et,"watchOS"]],[/crkey\/([\d\.]+)/i],[It,[Et,Bt+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[Et,fr],It],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[Et,It],[/(sunos) ?([\w\.\d]*)/i],[[Et,"Solaris"],It],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[Et,It]]},Fr=function(pn,En){if(typeof pn===yt&&(En=pn,pn=mt),!(this instanceof Fr))return new Fr(pn,En).getResult();var Rn=typeof pt!==xt&&pt.navigator?pt.navigator:mt,Qn=pn||(Rn&&Rn.userAgent?Rn.userAgent:""),Ln=Rn&&Rn.userAgentData?Rn.userAgentData:mt,ln=En?function(Yr,Qr){var Mn={};for(var Ar in Yr)Qr[Ar]&&Qr[Ar].length%2==0?Mn[Ar]=Qr[Ar].concat(Yr[Ar]):Mn[Ar]=Yr[Ar];return Mn}(vr,En):vr,Xn=Rn&&Rn.userAgent==Qn;return this.getBrowser=function(){var Yr,Qr={};return Qr[Et]=mt,Qr[It]=mt,tn.call(Qr,Qn,ln.browser),Qr[St]=typeof(Yr=Qr[It])===vt?Yr.replace(/[^\d\.]/g,"").split(".")[0]:mt,Xn&&Rn&&Rn.brave&&typeof Rn.brave.isBrave==gt&&(Qr[Et]="Brave"),Qr},this.getCPU=function(){var Yr={};return Yr[At]=mt,tn.call(Yr,Qn,ln.cpu),Yr},this.getDevice=function(){var Yr={};return Yr[Tt]=mt,Yr[wt]=mt,Yr[Rt]=mt,tn.call(Yr,Qn,ln.device),Xn&&!Yr[Rt]&&Ln&&Ln.mobile&&(Yr[Rt]=jt),Xn&&Yr[wt]=="Macintosh"&&Rn&&typeof Rn.standalone!==xt&&Rn.maxTouchPoints&&Rn.maxTouchPoints>2&&(Yr[wt]="iPad",Yr[Rt]=Ft),Yr},this.getEngine=function(){var Yr={};return Yr[Et]=mt,Yr[It]=mt,tn.call(Yr,Qn,ln.engine),Yr},this.getOS=function(){var Yr={};return Yr[Et]=mt,Yr[It]=mt,tn.call(Yr,Qn,ln.os),Xn&&!Yr[Et]&&Ln&&Ln.platform!="Unknown"&&(Yr[Et]=Ln.platform.replace(/chrome os/i,fr).replace(/macos/i,Nr)),Yr},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Qn},this.setUA=function(Yr){return Qn=typeof Yr===vt&&Yr.length>500?mn(Yr,500):Yr,this},this.setUA(Qn),this};Fr.VERSION="1.0.37",Fr.BROWSER=Tr([Et,It,St]),Fr.CPU=Tr([At]),Fr.DEVICE=Tr([wt,Tt,Rt,Dt,jt,Lt,Ft,Mt,Ot]),Fr.ENGINE=Fr.OS=Tr([Et,It]),typeof dt!==xt?(ut.exports&&(dt=ut.exports=Fr),dt.UAParser=Fr):ht.amdO?(ft=(function(){return Fr}).call(dt,ht,dt,ut))===mt||(ut.exports=ft):typeof pt!==xt&&(pt.UAParser=Fr);var Kr=typeof pt!==xt&&(pt.jQuery||pt.Zepto);if(Kr&&!Kr.ua){var qr=new Fr;Kr.ua=qr.getResult(),Kr.ua.get=function(){return qr.getUA()},Kr.ua.set=function(pn){qr.setUA(pn);var En=qr.getResult();for(var Rn in En)Kr.ua[Rn]=En[Rn]}}})(typeof window=="object"?window:this)},5840:(ut,dt,ht)=>{var ft;if(typeof globalThis=="object")ft=globalThis;else try{ft=ht(284)}catch{}finally{if(ft||typeof window>"u"||(ft=window),!ft)throw new Error("Could not determine global this")}var pt=ft.WebSocket||ft.MozWebSocket,mt=ht(9387);function gt(xt,yt){return yt?new pt(xt,yt):new pt(xt)}pt&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(xt){Object.defineProperty(gt,xt,{get:function(){return pt[xt]}})}),ut.exports={w3cwebsocket:pt?gt:null,version:mt}},9387:(ut,dt,ht)=>{ut.exports=ht(9794).version},7147:(ut,dt,ht)=>{ht.r(dt),ht.d(dt,{DOMException:()=>Mt,Headers:()=>St,Request:()=>Dt,Response:()=>Ft,fetch:()=>Ot});var ft=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||ht.g!==void 0&&ht.g||{},pt={searchParams:"URLSearchParams"in ft,iterable:"Symbol"in ft&&"iterator"in Symbol,blob:"FileReader"in ft&&"Blob"in ft&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in ft,arrayBuffer:"ArrayBuffer"in ft};if(pt.arrayBuffer)var mt=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],gt=ArrayBuffer.isView||function(Nt){return Nt&&mt.indexOf(Object.prototype.toString.call(Nt))>-1};function xt(Nt){if(typeof Nt!="string"&&(Nt=String(Nt)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(Nt)||Nt==="")throw new TypeError('Invalid character in header field name: "'+Nt+'"');return Nt.toLowerCase()}function yt(Nt){return typeof Nt!="string"&&(Nt=String(Nt)),Nt}function vt(Nt){var $t={next:function(){var Vt=Nt.shift();return{done:Vt===void 0,value:Vt}}};return pt.iterable&&($t[Symbol.iterator]=function(){return $t}),$t}function St(Nt){this.map={},Nt instanceof St?Nt.forEach(function($t,Vt){this.append(Vt,$t)},this):Array.isArray(Nt)?Nt.forEach(function($t){if($t.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+$t.length);this.append($t[0],$t[1])},this):Nt&&Object.getOwnPropertyNames(Nt).forEach(function($t){this.append($t,Nt[$t])},this)}function wt(Nt){if(!Nt._noBody)return Nt.bodyUsed?Promise.reject(new TypeError("Already read")):void(Nt.bodyUsed=!0)}function Et(Nt){return new Promise(function($t,Vt){Nt.onload=function(){$t(Nt.result)},Nt.onerror=function(){Vt(Nt.error)}})}function Rt(Nt){var $t=new FileReader,Vt=Et($t);return $t.readAsArrayBuffer(Nt),Vt}function Tt(Nt){if(Nt.slice)return Nt.slice(0);var $t=new Uint8Array(Nt.byteLength);return $t.set(new Uint8Array(Nt)),$t.buffer}function It(){return this.bodyUsed=!1,this._initBody=function(Nt){var $t;this.bodyUsed=this.bodyUsed,this._bodyInit=Nt,Nt?typeof Nt=="string"?this._bodyText=Nt:pt.blob&&Blob.prototype.isPrototypeOf(Nt)?this._bodyBlob=Nt:pt.formData&&FormData.prototype.isPrototypeOf(Nt)?this._bodyFormData=Nt:pt.searchParams&&URLSearchParams.prototype.isPrototypeOf(Nt)?this._bodyText=Nt.toString():pt.arrayBuffer&&pt.blob&&($t=Nt)&&DataView.prototype.isPrototypeOf($t)?(this._bodyArrayBuffer=Tt(Nt.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):pt.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(Nt)||gt(Nt))?this._bodyArrayBuffer=Tt(Nt):this._bodyText=Nt=Object.prototype.toString.call(Nt):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof Nt=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):pt.searchParams&&URLSearchParams.prototype.isPrototypeOf(Nt)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},pt.blob&&(this.blob=function(){var Nt=wt(this);if(Nt)return Nt;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var Nt=wt(this);return Nt||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(pt.blob)return this.blob().then(Rt);throw new Error("could not read as ArrayBuffer")},this.text=function(){var Nt,$t,Vt,Ut,zt,Bt=wt(this);if(Bt)return Bt;if(this._bodyBlob)return Nt=this._bodyBlob,$t=new FileReader,Vt=Et($t),Ut=/charset=([A-Za-z0-9_-]+)/.exec(Nt.type),zt=Ut?Ut[1]:"utf-8",$t.readAsText(Nt,zt),Vt;if(this._bodyArrayBuffer)return Promise.resolve(function(Ht){for(var Gt=new Uint8Array(Ht),Xt=new Array(Gt.length),Zt=0;Zt<Gt.length;Zt++)Xt[Zt]=String.fromCharCode(Gt[Zt]);return Xt.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},pt.formData&&(this.formData=function(){return this.text().then(jt)}),this.json=function(){return this.text().then(JSON.parse)},this}St.prototype.append=function(Nt,$t){Nt=xt(Nt),$t=yt($t);var Vt=this.map[Nt];this.map[Nt]=Vt?Vt+", "+$t:$t},St.prototype.delete=function(Nt){delete this.map[xt(Nt)]},St.prototype.get=function(Nt){return Nt=xt(Nt),this.has(Nt)?this.map[Nt]:null},St.prototype.has=function(Nt){return this.map.hasOwnProperty(xt(Nt))},St.prototype.set=function(Nt,$t){this.map[xt(Nt)]=yt($t)},St.prototype.forEach=function(Nt,$t){for(var Vt in this.map)this.map.hasOwnProperty(Vt)&&Nt.call($t,this.map[Vt],Vt,this)},St.prototype.keys=function(){var Nt=[];return this.forEach(function($t,Vt){Nt.push(Vt)}),vt(Nt)},St.prototype.values=function(){var Nt=[];return this.forEach(function($t){Nt.push($t)}),vt(Nt)},St.prototype.entries=function(){var Nt=[];return this.forEach(function($t,Vt){Nt.push([Vt,$t])}),vt(Nt)},pt.iterable&&(St.prototype[Symbol.iterator]=St.prototype.entries);var At=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Dt(Nt,$t){if(!(this instanceof Dt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var Vt,Ut,zt=($t=$t||{}).body;if(Nt instanceof Dt){if(Nt.bodyUsed)throw new TypeError("Already read");this.url=Nt.url,this.credentials=Nt.credentials,$t.headers||(this.headers=new St(Nt.headers)),this.method=Nt.method,this.mode=Nt.mode,this.signal=Nt.signal,zt||Nt._bodyInit==null||(zt=Nt._bodyInit,Nt.bodyUsed=!0)}else this.url=String(Nt);if(this.credentials=$t.credentials||this.credentials||"same-origin",!$t.headers&&this.headers||(this.headers=new St($t.headers)),this.method=(Vt=$t.method||this.method||"GET",Ut=Vt.toUpperCase(),At.indexOf(Ut)>-1?Ut:Vt),this.mode=$t.mode||this.mode||null,this.signal=$t.signal||this.signal||function(){if("AbortController"in ft)return new AbortController().signal}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&zt)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(zt),!(this.method!=="GET"&&this.method!=="HEAD"||$t.cache!=="no-store"&&$t.cache!=="no-cache")){var Bt=/([?&])_=[^&]*/;Bt.test(this.url)?this.url=this.url.replace(Bt,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function jt(Nt){var $t=new FormData;return Nt.trim().split("&").forEach(function(Vt){if(Vt){var Ut=Vt.split("="),zt=Ut.shift().replace(/\+/g," "),Bt=Ut.join("=").replace(/\+/g," ");$t.append(decodeURIComponent(zt),decodeURIComponent(Bt))}}),$t}function Ft(Nt,$t){if(!(this instanceof Ft))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if($t||($t={}),this.type="default",this.status=$t.status===void 0?200:$t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=$t.statusText===void 0?"":""+$t.statusText,this.headers=new St($t.headers),this.url=$t.url||"",this._initBody(Nt)}Dt.prototype.clone=function(){return new Dt(this,{body:this._bodyInit})},It.call(Dt.prototype),It.call(Ft.prototype),Ft.prototype.clone=function(){return new Ft(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new St(this.headers),url:this.url})},Ft.error=function(){var Nt=new Ft(null,{status:200,statusText:""});return Nt.ok=!1,Nt.status=0,Nt.type="error",Nt};var Lt=[301,302,303,307,308];Ft.redirect=function(Nt,$t){if(Lt.indexOf($t)===-1)throw new RangeError("Invalid status code");return new Ft(null,{status:$t,headers:{location:Nt}})};var Mt=ft.DOMException;try{new Mt}catch{(Mt=function($t,Vt){this.message=$t,this.name=Vt;var Ut=Error($t);this.stack=Ut.stack}).prototype=Object.create(Error.prototype),Mt.prototype.constructor=Mt}function Ot(Nt,$t){return new Promise(function(Vt,Ut){var zt=new Dt(Nt,$t);if(zt.signal&&zt.signal.aborted)return Ut(new Mt("Aborted","AbortError"));var Bt=new XMLHttpRequest;function Ht(){Bt.abort()}if(Bt.onload=function(){var Xt,Zt,hr={statusText:Bt.statusText,headers:(Xt=Bt.getAllResponseHeaders()||"",Zt=new St,Xt.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(ir){return ir.indexOf(`
`)===0?ir.substr(1,ir.length):ir}).forEach(function(ir){var yr=ir.split(":"),Cr=yr.shift().trim();if(Cr){var Sr=yr.join(":").trim();try{Zt.append(Cr,Sr)}catch(xr){console.warn("Response "+xr.message)}}}),Zt)};zt.url.indexOf("file://")===0&&(Bt.status<200||Bt.status>599)?hr.status=200:hr.status=Bt.status,hr.url="responseURL"in Bt?Bt.responseURL:hr.headers.get("X-Request-URL");var nr="response"in Bt?Bt.response:Bt.responseText;setTimeout(function(){Vt(new Ft(nr,hr))},0)},Bt.onerror=function(){setTimeout(function(){Ut(new TypeError("Network request failed"))},0)},Bt.ontimeout=function(){setTimeout(function(){Ut(new TypeError("Network request timed out"))},0)},Bt.onabort=function(){setTimeout(function(){Ut(new Mt("Aborted","AbortError"))},0)},Bt.open(zt.method,function(Xt){try{return Xt===""&&ft.location.href?ft.location.href:Xt}catch{return Xt}}(zt.url),!0),zt.credentials==="include"?Bt.withCredentials=!0:zt.credentials==="omit"&&(Bt.withCredentials=!1),"responseType"in Bt&&(pt.blob?Bt.responseType="blob":pt.arrayBuffer&&(Bt.responseType="arraybuffer")),$t&&typeof $t.headers=="object"&&!($t.headers instanceof St||ft.Headers&&$t.headers instanceof ft.Headers)){var Gt=[];Object.getOwnPropertyNames($t.headers).forEach(function(Xt){Gt.push(xt(Xt)),Bt.setRequestHeader(Xt,yt($t.headers[Xt]))}),zt.headers.forEach(function(Xt,Zt){Gt.indexOf(Zt)===-1&&Bt.setRequestHeader(Zt,Xt)})}else zt.headers.forEach(function(Xt,Zt){Bt.setRequestHeader(Zt,Xt)});zt.signal&&(zt.signal.addEventListener("abort",Ht),Bt.onreadystatechange=function(){Bt.readyState===4&&zt.signal.removeEventListener("abort",Ht)}),Bt.send(zt._bodyInit===void 0?null:zt._bodyInit)})}Ot.polyfill=!0,ft.fetch||(ft.fetch=Ot,ft.Headers=St,ft.Request=Dt,ft.Response=Ft)},2480:()=>{},7061:(ut,dt,ht)=>{var ft=ht(8698).default;function pt(){ut.exports=pt=function(){return gt},ut.exports.__esModule=!0,ut.exports.default=ut.exports;var mt,gt={},xt=Object.prototype,yt=xt.hasOwnProperty,vt=Object.defineProperty||function(Cr,Sr,xr){Cr[Sr]=xr.value},St=typeof Symbol=="function"?Symbol:{},wt=St.iterator||"@@iterator",Et=St.asyncIterator||"@@asyncIterator",Rt=St.toStringTag||"@@toStringTag";function Tt(Cr,Sr,xr){return Object.defineProperty(Cr,Sr,{value:xr,enumerable:!0,configurable:!0,writable:!0}),Cr[Sr]}try{Tt({},"")}catch{Tt=function(Sr,xr,gr){return Sr[xr]=gr}}function It(Cr,Sr,xr,gr){var _r=Sr&&Sr.prototype instanceof Ot?Sr:Ot,fr=Object.create(_r.prototype),Nr=new ir(gr||[]);return vt(fr,"_invoke",{value:Xt(Cr,xr,Nr)}),fr}function At(Cr,Sr,xr){try{return{type:"normal",arg:Cr.call(Sr,xr)}}catch(gr){return{type:"throw",arg:gr}}}gt.wrap=It;var Dt="suspendedStart",jt="suspendedYield",Ft="executing",Lt="completed",Mt={};function Ot(){}function Nt(){}function $t(){}var Vt={};Tt(Vt,wt,function(){return this});var Ut=Object.getPrototypeOf,zt=Ut&&Ut(Ut(yr([])));zt&&zt!==xt&&yt.call(zt,wt)&&(Vt=zt);var Bt=$t.prototype=Ot.prototype=Object.create(Vt);function Ht(Cr){["next","throw","return"].forEach(function(Sr){Tt(Cr,Sr,function(xr){return this._invoke(Sr,xr)})})}function Gt(Cr,Sr){function xr(_r,fr,Nr,Tr){var Hr=At(Cr[_r],Cr,fr);if(Hr.type!=="throw"){var Vr=Hr.arg,mn=Vr.value;return mn&&ft(mn)=="object"&&yt.call(mn,"__await")?Sr.resolve(mn.__await).then(function(tn){xr("next",tn,Nr,Tr)},function(tn){xr("throw",tn,Nr,Tr)}):Sr.resolve(mn).then(function(tn){Vr.value=tn,Nr(Vr)},function(tn){return xr("throw",tn,Nr,Tr)})}Tr(Hr.arg)}var gr;vt(this,"_invoke",{value:function(_r,fr){function Nr(){return new Sr(function(Tr,Hr){xr(_r,fr,Tr,Hr)})}return gr=gr?gr.then(Nr,Nr):Nr()}})}function Xt(Cr,Sr,xr){var gr=Dt;return function(_r,fr){if(gr===Ft)throw new Error("Generator is already running");if(gr===Lt){if(_r==="throw")throw fr;return{value:mt,done:!0}}for(xr.method=_r,xr.arg=fr;;){var Nr=xr.delegate;if(Nr){var Tr=Zt(Nr,xr);if(Tr){if(Tr===Mt)continue;return Tr}}if(xr.method==="next")xr.sent=xr._sent=xr.arg;else if(xr.method==="throw"){if(gr===Dt)throw gr=Lt,xr.arg;xr.dispatchException(xr.arg)}else xr.method==="return"&&xr.abrupt("return",xr.arg);gr=Ft;var Hr=At(Cr,Sr,xr);if(Hr.type==="normal"){if(gr=xr.done?Lt:jt,Hr.arg===Mt)continue;return{value:Hr.arg,done:xr.done}}Hr.type==="throw"&&(gr=Lt,xr.method="throw",xr.arg=Hr.arg)}}}function Zt(Cr,Sr){var xr=Sr.method,gr=Cr.iterator[xr];if(gr===mt)return Sr.delegate=null,xr==="throw"&&Cr.iterator.return&&(Sr.method="return",Sr.arg=mt,Zt(Cr,Sr),Sr.method==="throw")||xr!=="return"&&(Sr.method="throw",Sr.arg=new TypeError("The iterator does not provide a '"+xr+"' method")),Mt;var _r=At(gr,Cr.iterator,Sr.arg);if(_r.type==="throw")return Sr.method="throw",Sr.arg=_r.arg,Sr.delegate=null,Mt;var fr=_r.arg;return fr?fr.done?(Sr[Cr.resultName]=fr.value,Sr.next=Cr.nextLoc,Sr.method!=="return"&&(Sr.method="next",Sr.arg=mt),Sr.delegate=null,Mt):fr:(Sr.method="throw",Sr.arg=new TypeError("iterator result is not an object"),Sr.delegate=null,Mt)}function hr(Cr){var Sr={tryLoc:Cr[0]};1 in Cr&&(Sr.catchLoc=Cr[1]),2 in Cr&&(Sr.finallyLoc=Cr[2],Sr.afterLoc=Cr[3]),this.tryEntries.push(Sr)}function nr(Cr){var Sr=Cr.completion||{};Sr.type="normal",delete Sr.arg,Cr.completion=Sr}function ir(Cr){this.tryEntries=[{tryLoc:"root"}],Cr.forEach(hr,this),this.reset(!0)}function yr(Cr){if(Cr||Cr===""){var Sr=Cr[wt];if(Sr)return Sr.call(Cr);if(typeof Cr.next=="function")return Cr;if(!isNaN(Cr.length)){var xr=-1,gr=function _r(){for(;++xr<Cr.length;)if(yt.call(Cr,xr))return _r.value=Cr[xr],_r.done=!1,_r;return _r.value=mt,_r.done=!0,_r};return gr.next=gr}}throw new TypeError(ft(Cr)+" is not iterable")}return Nt.prototype=$t,vt(Bt,"constructor",{value:$t,configurable:!0}),vt($t,"constructor",{value:Nt,configurable:!0}),Nt.displayName=Tt($t,Rt,"GeneratorFunction"),gt.isGeneratorFunction=function(Cr){var Sr=typeof Cr=="function"&&Cr.constructor;return!!Sr&&(Sr===Nt||(Sr.displayName||Sr.name)==="GeneratorFunction")},gt.mark=function(Cr){return Object.setPrototypeOf?Object.setPrototypeOf(Cr,$t):(Cr.__proto__=$t,Tt(Cr,Rt,"GeneratorFunction")),Cr.prototype=Object.create(Bt),Cr},gt.awrap=function(Cr){return{__await:Cr}},Ht(Gt.prototype),Tt(Gt.prototype,Et,function(){return this}),gt.AsyncIterator=Gt,gt.async=function(Cr,Sr,xr,gr,_r){_r===void 0&&(_r=Promise);var fr=new Gt(It(Cr,Sr,xr,gr),_r);return gt.isGeneratorFunction(Sr)?fr:fr.next().then(function(Nr){return Nr.done?Nr.value:fr.next()})},Ht(Bt),Tt(Bt,Rt,"Generator"),Tt(Bt,wt,function(){return this}),Tt(Bt,"toString",function(){return"[object Generator]"}),gt.keys=function(Cr){var Sr=Object(Cr),xr=[];for(var gr in Sr)xr.push(gr);return xr.reverse(),function _r(){for(;xr.length;){var fr=xr.pop();if(fr in Sr)return _r.value=fr,_r.done=!1,_r}return _r.done=!0,_r}},gt.values=yr,ir.prototype={constructor:ir,reset:function(Cr){if(this.prev=0,this.next=0,this.sent=this._sent=mt,this.done=!1,this.delegate=null,this.method="next",this.arg=mt,this.tryEntries.forEach(nr),!Cr)for(var Sr in this)Sr.charAt(0)==="t"&&yt.call(this,Sr)&&!isNaN(+Sr.slice(1))&&(this[Sr]=mt)},stop:function(){this.done=!0;var Cr=this.tryEntries[0].completion;if(Cr.type==="throw")throw Cr.arg;return this.rval},dispatchException:function(Cr){if(this.done)throw Cr;var Sr=this;function xr(Hr,Vr){return fr.type="throw",fr.arg=Cr,Sr.next=Hr,Vr&&(Sr.method="next",Sr.arg=mt),!!Vr}for(var gr=this.tryEntries.length-1;gr>=0;--gr){var _r=this.tryEntries[gr],fr=_r.completion;if(_r.tryLoc==="root")return xr("end");if(_r.tryLoc<=this.prev){var Nr=yt.call(_r,"catchLoc"),Tr=yt.call(_r,"finallyLoc");if(Nr&&Tr){if(this.prev<_r.catchLoc)return xr(_r.catchLoc,!0);if(this.prev<_r.finallyLoc)return xr(_r.finallyLoc)}else if(Nr){if(this.prev<_r.catchLoc)return xr(_r.catchLoc,!0)}else{if(!Tr)throw new Error("try statement without catch or finally");if(this.prev<_r.finallyLoc)return xr(_r.finallyLoc)}}}},abrupt:function(Cr,Sr){for(var xr=this.tryEntries.length-1;xr>=0;--xr){var gr=this.tryEntries[xr];if(gr.tryLoc<=this.prev&&yt.call(gr,"finallyLoc")&&this.prev<gr.finallyLoc){var _r=gr;break}}_r&&(Cr==="break"||Cr==="continue")&&_r.tryLoc<=Sr&&Sr<=_r.finallyLoc&&(_r=null);var fr=_r?_r.completion:{};return fr.type=Cr,fr.arg=Sr,_r?(this.method="next",this.next=_r.finallyLoc,Mt):this.complete(fr)},complete:function(Cr,Sr){if(Cr.type==="throw")throw Cr.arg;return Cr.type==="break"||Cr.type==="continue"?this.next=Cr.arg:Cr.type==="return"?(this.rval=this.arg=Cr.arg,this.method="return",this.next="end"):Cr.type==="normal"&&Sr&&(this.next=Sr),Mt},finish:function(Cr){for(var Sr=this.tryEntries.length-1;Sr>=0;--Sr){var xr=this.tryEntries[Sr];if(xr.finallyLoc===Cr)return this.complete(xr.completion,xr.afterLoc),nr(xr),Mt}},catch:function(Cr){for(var Sr=this.tryEntries.length-1;Sr>=0;--Sr){var xr=this.tryEntries[Sr];if(xr.tryLoc===Cr){var gr=xr.completion;if(gr.type==="throw"){var _r=gr.arg;nr(xr)}return _r}}throw new Error("illegal catch attempt")},delegateYield:function(Cr,Sr,xr){return this.delegate={iterator:yr(Cr),resultName:Sr,nextLoc:xr},this.method==="next"&&(this.arg=mt),Mt}},gt}ut.exports=pt,ut.exports.__esModule=!0,ut.exports.default=ut.exports},8698:ut=>{function dt(ht){return ut.exports=dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ft){return typeof ft}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft},ut.exports.__esModule=!0,ut.exports.default=ut.exports,dt(ht)}ut.exports=dt,ut.exports.__esModule=!0,ut.exports.default=ut.exports},4687:(ut,dt,ht)=>{var ft=ht(7061)();ut.exports=ft;try{regeneratorRuntime=ft}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=ft:Function("r","regeneratorRuntime = r")(ft)}},907:(ut,dt,ht)=>{function ft(pt,mt){(mt==null||mt>pt.length)&&(mt=pt.length);for(var gt=0,xt=new Array(mt);gt<mt;gt++)xt[gt]=pt[gt];return xt}ht.d(dt,{Z:()=>ft})},5861:(ut,dt,ht)=>{function ft(mt,gt,xt,yt,vt,St,wt){try{var Et=mt[St](wt),Rt=Et.value}catch(Tt){return void xt(Tt)}Et.done?gt(Rt):Promise.resolve(Rt).then(yt,vt)}function pt(mt){return function(){var gt=this,xt=arguments;return new Promise(function(yt,vt){var St=mt.apply(gt,xt);function wt(Rt){ft(St,yt,vt,wt,Et,"next",Rt)}function Et(Rt){ft(St,yt,vt,wt,Et,"throw",Rt)}wt(void 0)})}}ht.d(dt,{Z:()=>pt})},5671:(ut,dt,ht)=>{function ft(pt,mt){if(!(pt instanceof mt))throw new TypeError("Cannot call a class as a function")}ht.d(dt,{Z:()=>ft})},3144:(ut,dt,ht)=>{ht.d(dt,{Z:()=>mt});var ft=ht(9142);function pt(gt,xt){for(var yt=0;yt<xt.length;yt++){var vt=xt[yt];vt.enumerable=vt.enumerable||!1,vt.configurable=!0,"value"in vt&&(vt.writable=!0),Object.defineProperty(gt,(0,ft.Z)(vt.key),vt)}}function mt(gt,xt,yt){return xt&&pt(gt.prototype,xt),yt&&pt(gt,yt),Object.defineProperty(gt,"prototype",{writable:!1}),gt}},4942:(ut,dt,ht)=>{ht.d(dt,{Z:()=>pt});var ft=ht(9142);function pt(mt,gt,xt){return(gt=(0,ft.Z)(gt))in mt?Object.defineProperty(mt,gt,{value:xt,enumerable:!0,configurable:!0,writable:!0}):mt[gt]=xt,mt}},885:(ut,dt,ht)=>{ht.d(dt,{Z:()=>pt});var ft=ht(181);function pt(mt,gt){return function(xt){if(Array.isArray(xt))return xt}(mt)||function(xt,yt){var vt=xt==null?null:typeof Symbol<"u"&&xt[Symbol.iterator]||xt["@@iterator"];if(vt!=null){var St,wt,Et,Rt,Tt=[],It=!0,At=!1;try{if(Et=(vt=vt.call(xt)).next,yt===0){if(Object(vt)!==vt)return;It=!1}else for(;!(It=(St=Et.call(vt)).done)&&(Tt.push(St.value),Tt.length!==yt);It=!0);}catch(Dt){At=!0,wt=Dt}finally{try{if(!It&&vt.return!=null&&(Rt=vt.return(),Object(Rt)!==Rt))return}finally{if(At)throw wt}}return Tt}}(mt,gt)||(0,ft.Z)(mt,gt)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},2982:(ut,dt,ht)=>{ht.d(dt,{Z:()=>mt});var ft=ht(907),pt=ht(181);function mt(gt){return function(xt){if(Array.isArray(xt))return(0,ft.Z)(xt)}(gt)||function(xt){if(typeof Symbol<"u"&&xt[Symbol.iterator]!=null||xt["@@iterator"]!=null)return Array.from(xt)}(gt)||(0,pt.Z)(gt)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},9142:(ut,dt,ht)=>{ht.d(dt,{Z:()=>pt});var ft=ht(1002);function pt(mt){var gt=function(xt,yt){if((0,ft.Z)(xt)!="object"||!xt)return xt;var vt=xt[Symbol.toPrimitive];if(vt!==void 0){var St=vt.call(xt,yt||"default");if((0,ft.Z)(St)!="object")return St;throw new TypeError("@@toPrimitive must return a primitive value.")}return(yt==="string"?String:Number)(xt)}(mt,"string");return(0,ft.Z)(gt)=="symbol"?gt:String(gt)}},1002:(ut,dt,ht)=>{function ft(pt){return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(mt){return typeof mt}:function(mt){return mt&&typeof Symbol=="function"&&mt.constructor===Symbol&&mt!==Symbol.prototype?"symbol":typeof mt},ft(pt)}ht.d(dt,{Z:()=>ft})},181:(ut,dt,ht)=>{ht.d(dt,{Z:()=>pt});var ft=ht(907);function pt(mt,gt){if(mt){if(typeof mt=="string")return(0,ft.Z)(mt,gt);var xt=Object.prototype.toString.call(mt).slice(8,-1);return xt==="Object"&&mt.constructor&&(xt=mt.constructor.name),xt==="Map"||xt==="Set"?Array.from(mt):xt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xt)?(0,ft.Z)(mt,gt):void 0}}},7002:ut=>{ut.exports=JSON.parse('{"name":"protoo-client","version":"4.0.6","description":"protoo JavaScript client module","author":"Iñaki Baz Castillo <ibc@aliax.net>","homepage":"https://protoo.versatica.com","license":"MIT","repository":{"type":"git","url":"https://github.com/ibc/protoo.git"},"main":"lib/index.js","keywords":["nodejs","browser","websocket"],"engines":{"node":">=8.0.0"},"scripts":{"lint":"eslint -c .eslintrc.js lib"},"dependencies":{"debug":"^4.3.1","events":"^3.2.0","retry":"^0.12.0"},"devDependencies":{"eslint":"^5.16.0"},"optionalDependencies":{"websocket":"^1.0.33"}}')},9794:ut=>{ut.exports={version:"1.0.34"}}},lt={};function ct(ut){var dt=lt[ut];if(dt!==void 0)return dt.exports;var ht=lt[ut]={exports:{}};return st[ut].call(ht.exports,ht,ht.exports,ct),ht.exports}return ct.amdO={},ct.n=ut=>{var dt=ut&&ut.__esModule?()=>ut.default:()=>ut;return ct.d(dt,{a:dt}),dt},ct.d=(ut,dt)=>{for(var ht in dt)ct.o(dt,ht)&&!ct.o(ut,ht)&&Object.defineProperty(ut,ht,{enumerable:!0,get:dt[ht]})},ct.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),ct.o=(ut,dt)=>Object.prototype.hasOwnProperty.call(ut,dt),ct.r=ut=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ut,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ut,"__esModule",{value:!0})},ct(8225)})())})(videosdk);var videosdkExports=videosdk.exports,eventPrifix="videosdk-live-react-sdk",events={"participant-joined":eventPrifix+"-participant-joined","participant-left":eventPrifix+"-participant-left","speaker-changed":eventPrifix+"-speaker-changed","presenter-changed":eventPrifix+"-presenter-changed","main-participant-changed":eventPrifix+"-main-participant-changed","entry-requested":eventPrifix+"-entry-requested","entry-responded":eventPrifix+"-entry-responded","recording-started":eventPrifix+"-recording-started","recording-stopped":eventPrifix+"-recording-stopped","chat-message":eventPrifix+"-chat-message","meeting-joined":eventPrifix+"-meeting-joined","meeting-left":eventPrifix+"-meeting-left","live-stream-started":eventPrifix+"-live-stream-started","live-stream-stopped":eventPrifix+"-live-stream-stopped","video-state-changed":eventPrifix+"-video-state-changed","video-seeked":eventPrifix+"-video-seeked","webcam-requested":eventPrifix+"-webcam-requested","mic-requested":eventPrifix+"-mic-requested","pin-state-changed":eventPrifix+"-pin-state-changed","connection-open":eventPrifix+"-connection-open","connection-close":eventPrifix+"-connection-close","switch-meeting":eventPrifix+"-switch-meeting",error:eventPrifix+"-error","hls-started":eventPrifix+"-hls-started","hls-stopped":eventPrifix+"-hls-stopped","hls-state-changed":eventPrifix+"-hls-state-changed","hls-playable-state-changed":eventPrifix+"-hls-playable-state-changed","recording-state-changed":eventPrifix+"-recording-state-changed","livestream-state-changed":eventPrifix+"-livestream-state-changed","meeting-state-changed":eventPrifix+"-meeting-state-changed","participant-mode-changed":eventPrifix+"-participant-mode-changed"},eventEmitter=new EventEmitter$1;eventEmitter.setMaxListeners(9999);var MeetingProviderContex=reactExports.createContext(),useMeeting=function(rt){var it=rt===void 0?{}:rt,st=it.onParticipantJoined,lt=st===void 0?function(){}:st,ct=it.onParticipantLeft,ut=ct===void 0?function(){}:ct,dt=it.onSpeakerChanged,ht=dt===void 0?function(){}:dt,ft=it.onPresenterChanged,pt=ft===void 0?function(){}:ft,mt=it.onMainParticipantChanged,gt=mt===void 0?function(){}:mt,xt=it.onEntryRequested,yt=xt===void 0?function(){}:xt,vt=it.onEntryResponded,St=vt===void 0?function(){}:vt,wt=it.onRecordingStarted,Et=wt===void 0?function(){}:wt,Rt=it.onRecordingStopped,Tt=Rt===void 0?function(){}:Rt,It=it.onChatMessage,At=It===void 0?function(){}:It,Dt=it.onMeetingJoined,jt=Dt===void 0?function(){}:Dt,Ft=it.onMeetingLeft,Lt=Ft===void 0?function(){}:Ft,Mt=it.onLiveStreamStarted,Ot=Mt===void 0?function(){}:Mt,Nt=it.onLiveStreamStopped,$t=Nt===void 0?function(){}:Nt,Vt=it.onVideoStateChanged,Ut=Vt===void 0?function(){}:Vt,zt=it.onVideoSeeked,Bt=zt===void 0?function(){}:zt,Ht=it.onWebcamRequested,Gt=Ht===void 0?function(){}:Ht,Xt=it.onMicRequested,Zt=Xt===void 0?function(){}:Xt,hr=it.onPinStateChanged,nr=hr===void 0?function(){}:hr,ir=it.onConnectionOpen,yr=ir===void 0?function(){}:ir,Cr=it.onConnetionClose,Sr=Cr===void 0?function(){}:Cr,xr=it.onSwitchMeeting,gr=xr===void 0?function(){}:xr,_r=it.onError,fr=_r===void 0?function(){}:_r,Nr=it.onHlsStarted,Tr=Nr===void 0?function(){}:Nr,Hr=it.onHlsStopped,Vr=Hr===void 0?function(){}:Hr,mn=it.onHlsStateChanged,tn=mn===void 0?function(){}:mn,er=it.onRecordingStateChanged,tr=er===void 0?function(){}:er,vr=it.onLivestreamStateChanged,Fr=vr===void 0?function(){}:vr,Kr=it.onMeetingStateChanged,qr=Kr===void 0?function(){}:Kr,pn=it.onParticipantModeChanged,En=pn===void 0?function(){}:pn;return reactExports.useEffect(function(){return eventEmitter.on(events["participant-joined"],lt),eventEmitter.on(events["participant-left"],ut),eventEmitter.on(events["speaker-changed"],ht),eventEmitter.on(events["presenter-changed"],pt),eventEmitter.on(events["main-participant-changed"],gt),eventEmitter.on(events["entry-requested"],yt),eventEmitter.on(events["entry-responded"],St),eventEmitter.on(events["recording-started"],Et),eventEmitter.on(events["recording-stopped"],Tt),eventEmitter.on(events["chat-message"],At),eventEmitter.on(events["meeting-joined"],jt),eventEmitter.on(events["meeting-left"],Lt),eventEmitter.on(events["live-stream-started"],Ot),eventEmitter.on(events["live-stream-stopped"],$t),eventEmitter.on(events["video-state-changed"],Ut),eventEmitter.on(events["video-seeked"],Bt),eventEmitter.on(events["webcam-requested"],Gt),eventEmitter.on(events["mic-requested"],Zt),eventEmitter.on(events["pin-state-changed"],nr),eventEmitter.on(events["connection-open"],yr),eventEmitter.on(events["connection-close"],Sr),eventEmitter.on(events["switch-meeting"],gr),eventEmitter.on(events.error,fr),eventEmitter.on(events["hls-started"],Tr),eventEmitter.on(events["hls-stopped"],Vr),eventEmitter.on(events["hls-state-changed"],tn),eventEmitter.on(events["recording-state-changed"],tr),eventEmitter.on(events["livestream-state-changed"],Fr),eventEmitter.on(events["meeting-state-changed"],qr),eventEmitter.on(events["participant-mode-changed"],En),function(){eventEmitter.off(events["meeting-state-changed"],qr),eventEmitter.off(events["participant-joined"],lt),eventEmitter.off(events["participant-left"],ut),eventEmitter.off(events["speaker-changed"],ht),eventEmitter.off(events["presenter-changed"],pt),eventEmitter.off(events["main-participant-changed"],gt),eventEmitter.off(events["entry-requested"],yt),eventEmitter.off(events["entry-responded"],St),eventEmitter.off(events["recording-started"],Et),eventEmitter.off(events["recording-stopped"],Tt),eventEmitter.off(events["chat-message"],At),eventEmitter.off(events["meeting-joined"],jt),eventEmitter.off(events["meeting-left"],Lt),eventEmitter.off(events["live-stream-started"],Ot),eventEmitter.off(events["live-stream-stopped"],$t),eventEmitter.off(events["video-state-changed"],Ut),eventEmitter.off(events["video-seeked"],Bt),eventEmitter.off(events["webcam-requested"],Gt),eventEmitter.off(events["mic-requested"],Zt),eventEmitter.off(events["pin-state-changed"],nr),eventEmitter.off(events["connection-open"],yr),eventEmitter.off(events["connection-close"],Sr),eventEmitter.off(events["switch-meeting"],gr),eventEmitter.off(events.error,fr),eventEmitter.off(events["hls-started"],Tr),eventEmitter.off(events["hls-stopped"],Vr),eventEmitter.off(events["hls-state-changed"],tn),eventEmitter.off(events["recording-state-changed"],tr),eventEmitter.off(events["livestream-state-changed"],Fr),eventEmitter.off(events["participant-mode-changed"],En)}},[]),reactExports.useContext(MeetingProviderContex)},version="0.1.83",MeetingProvider=function(rt){var it=rt.children,st=rt.config,lt=rt.token,ct=rt.joinWithoutUserInteraction,ut=rt.reinitialiseMeetingOnConfigChange,dt=rt.deviceInfo,ht=reactExports.useState(null),ft=ht[0],pt=ht[1],mt=reactExports.useState(null),gt=mt[0],xt=mt[1],yt=reactExports.useState(null),vt=yt[0],St=yt[1],wt=reactExports.useState(null),Et=wt[0],Rt=wt[1],Tt=reactExports.useState(null),It=Tt[0],At=Tt[1],Dt=reactExports.useState(!1),jt=Dt[0],Ft=Dt[1],Lt=reactExports.useState(!1),Mt=Lt[0],Ot=Lt[1],Nt=reactExports.useState(!1),$t=Nt[0],Vt=Nt[1],Ut=reactExports.useState(!1),zt=Ut[0],Bt=Ut[1],Ht=reactExports.useState([]),Gt=Ht[0],Xt=Ht[1],Zt=reactExports.useState(new Map),hr=Zt[0],nr=Zt[1],ir=reactExports.useState(new Map),yr=ir[0],Cr=ir[1],Sr=reactExports.useState(!1),xr=Sr[0],gr=Sr[1],_r=reactExports.useState(new Map),fr=_r[0],Nr=_r[1],Tr=reactExports.useState(!1),Hr=Tr[0],Vr=Tr[1],mn=reactExports.useState(!1),tn=mn[0],er=mn[1],tr=reactExports.useState("RECORDING_STOPPED"),vr=tr[0],Fr=tr[1],Kr=reactExports.useState("LIVESTREAM_STOPPED"),qr=Kr[0],pn=Kr[1],En=reactExports.useState("HLS_STOPPED"),Rn=En[0],Qn=En[1],Ln=reactExports.useState({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),ln=Ln[0],Xn=Ln[1],Yr=reactExports.useRef(),Qr=reactExports.useRef(),Mn=reactExports.useRef(),Ar=reactExports.useRef(),or=reactExports.useRef(),Wr=reactExports.useRef(st),Ir=reactExports.useRef(lt),dn=reactExports.useRef(!1),kn=reactExports.useRef(),Mr=reactExports.useMemo(function(){return ut},[]);reactExports.useEffect(function(){Yr.current=ft},[ft]),reactExports.useEffect(function(){Qr.current=jt},[jt]),reactExports.useEffect(function(){Mn.current=Mt},[Mt]),reactExports.useEffect(function(){Ar.current=$t},[$t]),reactExports.useEffect(function(){or.current=zt},[zt]),reactExports.useEffect(function(){Wr.current=st},[st]),reactExports.useEffect(function(){Ir.current=lt},[lt]),reactExports.useEffect(function(){kn.current=tn},[tn]);var vn=function(){pt(null),xt(null),St(null),Rt(null),At(null),Ft(!1),Ot(!1),Vt(!1),Bt(!1),Xt([]),gr(!1),nr(new Map),Cr(new Map),Nr(new Map),Vr(!1),er(!1),Fr("RECORDING_STOPPED"),pn("LIVESTREAM_STOPPED"),Qn("HLS_STOPPED"),Xn({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null})},kr=function(jr){nr(function(cs){cs.set(jr.id,jr);var uo=new Map(cs);return uo}),eventEmitter.emit(events["participant-joined"],jr)},Er=function(jr){nr(function(cs){cs.delete(jr.id);var uo=new Map(cs);return uo}),eventEmitter.emit(events["participant-left"],jr)},Ur=function(jr){var cs,uo;At(jr),Vt(jr===(Yr==null||(cs=Yr.current)===null||cs===void 0||(uo=cs.localParticipant)===null||uo===void 0?void 0:uo.id)),eventEmitter.emit(events["presenter-changed"],jr)},on=function(jr){St(jr),eventEmitter.emit(events["main-participant-changed"],jr)},fn=function(jr){Rt(jr),eventEmitter.emit(events["speaker-changed"],jr)},Kn=function(jr){Xt(function(cs){return[].concat(cs,[jr])}),eventEmitter.emit(events["chat-message"],jr)},es=function(jr){eventEmitter.emit(events["entry-requested"],jr)},Zn=function(jr,cs){eventEmitter.emit(events["entry-responded"],jr,cs)},Dn=function(){Bt(!0),eventEmitter.emit(events["recording-started"])},ss=function(){Bt(!1),eventEmitter.emit(events["recording-stopped"])},$s=function(jr){jr.track.readyState==="live"&&(jr.kind==="video"?Ot(!0):jr.kind==="audio"&&Ft(!0))},ws=function(jr){jr.kind==="video"?Ot(!1):jr.kind==="audio"&&Ft(!1)},As=function(jr){gr(!0),eventEmitter.emit(events["live-stream-started"],jr)},Vs=function(){gr(!1),eventEmitter.emit(events["live-stream-stopped"])},Fo=function(jr){er(!0),eventEmitter.emit(events["hls-started"],jr)},Lo=function(){er(!1),eventEmitter.emit(events["hls-stopped"])},Ho=function(jr){eventEmitter.emit(events["video-state-changed"],jr)},Bo=function(jr){eventEmitter.emit(events["video-seeked"],jr)},Kl=function(jr){eventEmitter.emit(events["webcam-requested"],jr)},Nl=function(jr){eventEmitter.emit(events["mic-requested"],jr)},Lr=function(jr){dn.current=!0,Xt(function(cs){return[].concat(cs,jr.messages)}),eventEmitter.emit(events["meeting-joined"],jr),Vr(!0)},wn=function Is(){eventEmitter.emit(events["meeting-left"]);var jr=Yr.current;if(jr){var cs;typeof(jr==null?void 0:jr.off)=="function"&&(jr.off("meeting-state-changed",Ys),jr.off("participant-joined",kr),jr.off("participant-left",Er),jr.off("presenter-changed",Ur),jr.off("main-participant-changed",on),jr.off("speaker-changed",fn),jr.off("entry-requested",es),jr.off("entry-responded",Zn),jr.off("chat-message",Kn),jr.off("recording-started",Dn),jr.off("recording-stopped",ss),jr.off("meeting-joined",Lr),jr.off("meeting-left",Is),jr.off("livestream-started",As),jr.off("livestream-stopped",Vs),jr.off("video-state-changed",Ho),jr.off("video-seeked",Bo),jr.off("webcam-requested",Kl),jr.off("mic-requested",Nl),jr.off("pin-state-changed",On),jr.off("connection-open",In),jr.off("connection-close",Br),jr.off("switch-meeting",gs),jr.off("error",os),jr.off("hls-started",Fo),jr.off("hls-stopped",Lo),jr.off("recording-state-changed",ys),jr.off("livestream-state-changed",Os),jr.off("hls-state-changed",Zs),jr.off("participant-mode-changed",un)),typeof(jr==null||(cs=jr.localParticipant)===null||cs===void 0?void 0:cs.off)=="function"&&(jr.localParticipant.off("stream-enabled",$s),jr.localParticipant.off("stream-disabled",ws)),vn()}},On=function(jr){var cs=jr.participantId,uo=jr.state,Wl=jr.pinnedBy;Cr(function(Uo){!uo.cam&&!uo.share?Uo.delete(cs):Uo.set(cs,uo);var ju=new Map(Uo);return ju}),eventEmitter.emit(events["pin-state-changed"],{participantId:cs,state:uo,pinnedBy:Wl})},In=function(jr){Nr(function(cs){cs.set(jr.id,jr);var uo=new Map(cs);return uo}),eventEmitter.emit(events["connection-open"],jr)},Br=function(jr){Nr(function(cs){cs.delete(jr);var uo=new Map(cs);return uo}),eventEmitter.emit(events["connection-close"],jr)},gs=function(jr){eventEmitter.emit(events["switch-meeting"],jr)},os=function(jr){eventEmitter.emit(events.error,jr)},ys=function(jr){Fr(jr==null?void 0:jr.status),eventEmitter.emit(events["recording-state-changed"],jr)},Os=function(jr){pn(jr==null?void 0:jr.status),eventEmitter.emit(events["livestream-state-changed"],jr)},Zs=function(jr){Qn(jr==null?void 0:jr.status),(jr==null?void 0:jr.status)=="HLS_PLAYABLE"?Xn({downstreamUrl:jr==null?void 0:jr.downstreamUrl,playbackHlsUrl:jr==null?void 0:jr.playbackHlsUrl,livestreamUrl:jr==null?void 0:jr.livestreamUrl}):(jr==null?void 0:jr.status)=="HLS_STOPPED"&&Xn({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),eventEmitter.emit(events["hls-state-changed"],jr)},Ys=function(jr){eventEmitter.emit(events["meeting-state-changed"],jr)},un=function(jr){var cs,uo;nr(function(Wl){var Uo=Wl.get(jr.participantId);Uo.mode=jr.mode,Wl.set(Uo.id,Uo);var ju=new Map(Wl);return ju}),jr.participantId===(Yr==null||(cs=Yr.current)===null||cs===void 0||(uo=cs.localParticipant)===null||uo===void 0?void 0:uo.id)&&xt(function(Wl){return Wl.mode=jr.mode,Wl}),eventEmitter.emit(events["participant-mode-changed"],jr)},Vo=function(){var jr=videosdkExports.VideoSDK&&videosdkExports.VideoSDK.initMeeting(Wr.current);pt(jr);var cs=jr.localParticipant,uo=jr.participants;uo.set(cs.id,cs),nr(uo),xt(cs),jr.on("meeting-state-changed",Ys),jr.on("participant-joined",kr),jr.on("participant-left",Er),jr.on("presenter-changed",Ur),jr.on("main-participant-changed",on),jr.on("speaker-changed",fn),jr.on("entry-requested",es),jr.on("entry-responded",Zn),jr.on("chat-message",Kn),jr.on("recording-started",Dn),jr.on("recording-stopped",ss),jr.on("meeting-joined",Lr),jr.on("meeting-left",wn),jr.on("livestream-started",As),jr.on("livestream-stopped",Vs),jr.on("video-state-changed",Ho),jr.on("video-seeked",Bo),jr.on("webcam-requested",Kl),jr.on("mic-requested",Nl),jr.on("pin-state-changed",On),jr.on("connection-open",In),jr.on("connection-close",Br),jr.on("switch-meeting",gs),jr.on("error",os),jr.on("hls-started",Fo),jr.on("hls-stopped",Lo),jr.on("recording-state-changed",ys),jr.on("livestream-state-changed",Os),jr.on("hls-state-changed",Zs),jr.on("participant-mode-changed",un),jr.localParticipant.on("stream-enabled",$s),jr.localParticipant.on("stream-disabled",ws),jr.join()},xn=function(){var jr=Yr.current;jr&&jr.leave()},An=function(){var jr=Yr.current;jr&&jr.end()},Hn=function(jr,cs,uo){var Wl=Yr.current;Wl&&Wl.startRecording(jr,cs,uo)},Un=function(){var jr=Yr.current;if(jr){var cs=or.current;cs&&jr.stopRecording()}},Gn=function(jr){jr===void 0&&(jr=void 0);var cs=Yr.current;cs&&cs.unmuteMic(jr)},Hs=function(){var jr=Yr.current;jr&&jr.muteMic()},ps=function(jr){jr===void 0&&(jr=void 0);var cs=Qr.current;cs?Hs():Gn(jr)},Us=function(){var jr=Yr.current;jr&&jr.disableWebcam()},js=function(jr){jr===void 0&&(jr=void 0);var cs=Yr.current;cs&&cs.enableWebcam(jr)},yo=function(jr){jr===void 0&&(jr=void 0);var cs=Mn.current;cs?Us():js(jr)},Bs=function(){var jr=Yr.current;jr&&jr.disableScreenShare()},Ws=function(jr){jr===void 0&&(jr=void 0);var cs=Yr.current;cs&&cs.enableScreenShare(jr)},io=function(jr){jr===void 0&&(jr=void 0);var cs=Ar.current;cs?Bs():Ws(jr)},na=function(jr){var cs=Yr.current;cs&&cs.changeMode(jr)},To=function(jr){var cs=Yr.current;cs&&cs.sendChatMessage(jr)},_l=function(jr,cs){var uo=Yr.current;uo&&uo.respondEntry(jr,cs)},Go=function(){try{var jr=Yr.current;return Promise.resolve(function(){if(jr)return Promise.resolve(jr.getMics())}())}catch(cs){return Promise.reject(cs)}},zl=function(){try{var jr=Yr.current;return Promise.resolve(function(){if(jr)return Promise.resolve(jr.getWebcams())}())}catch(cs){return Promise.reject(cs)}},Yl=function(jr){var cs=Yr.current;cs&&cs.changeWebcam(jr)},$l=function(jr){var cs=Yr.current;cs&&cs.replaceWebcamStream(jr)},Ml=function(jr){var cs=Yr.current;cs&&cs.changeMic(jr)},Hl=function(jr){var cs=jr.link,uo=Yr.current;uo&&uo.startVideo({link:cs})},Fl=function(){var jr=Yr.current;jr&&jr.stopVideo()},zo=function(){var jr=Yr.current;jr&&jr.resumeVideo()},_p=function(jr){var cs=jr.currentTime,uo=Yr.current;uo&&uo.pauseVideo({currentTime:cs})},Ap=function(jr){var cs=jr.currentTime,uo=Yr.current;uo&&uo.seekVideo({currentTime:cs})},Qu=function(jr,cs){var uo=Yr.current;uo&&uo.startLivestream(jr,cs)},$u=function(){var jr=Yr.current;jr&&jr.stopLivestream()},Ju=function(jr){var cs=jr.meetingId,uo=jr.payload;try{var Wl=Yr.current,Uo=function(){if(Wl)return Promise.resolve(Wl.connectTo({meetingId:cs,payload:uo})).then(function(){})}();return Promise.resolve(Uo&&Uo.then?Uo.then(function(){}):void 0)}catch(ju){return Promise.reject(ju)}},xp=function(jr){var cs=Yr.current;cs&&cs.startHls(jr)},kp=function(){var jr=Yr.current;jr&&jr.stopHls()},Mo=function(){videosdkExports.VideoSDK.config(Ir.current),dt?videosdkExports.VideoSDK.analytics(dt):videosdkExports.VideoSDK.analytics({sdkType:"react-web",sdkVersion:version}),ct&&Vo()};return reactExports.useEffect(function(){Mo()},[]),reactExports.useEffect(function(){Mr&&dn.current&&(xn(),Mo(),!ct&&Vo())},[st.meetingId,lt,Mr]),e$2.createElement(MeetingProviderContex.Provider,{value:{meetingId:ft==null?void 0:ft.id,meeting:ft,baseUrl:ft==null?void 0:ft.baseUrl,localParticipant:gt,mainParticipant:vt,activeSpeakerId:Et,participants:hr,presenterId:It,localMicOn:jt,localWebcamOn:Mt,localScreenShareOn:$t,messages:Gt,isRecording:zt,isLiveStreaming:xr,pinnedParticipants:yr,connections:fr,isHls:tn,recordingState:vr,livestreamState:qr,hlsState:Rn,hlsUrls:ln,isMeetingJoined:Hr,join:Vo,leave:xn,end:An,startRecording:Hn,stopRecording:Un,sendChatMessage:To,respondEntry:_l,muteMic:Hs,unmuteMic:Gn,toggleMic:ps,disableWebcam:Us,enableWebcam:js,toggleWebcam:yo,disableScreenShare:Bs,enableScreenShare:Ws,toggleScreenShare:io,getMics:Go,getWebcams:zl,changeWebcam:Yl,replaceWebcamStream:$l,changeMic:Ml,changeMode:na,startVideo:Hl,stopVideo:Fl,resumeVideo:zo,pauseVideo:_p,seekVideo:Ap,startLivestream:Qu,stopLivestream:$u,connectTo:Ju,startHls:xp,stopHls:kp}},it)},useParticipant=function(rt,it){var st=it===void 0?{}:it,lt=st.onStreamEnabled,ct=lt===void 0?function(){}:lt,ut=st.onStreamDisabled,dt=ut===void 0?function(){}:ut,ht=st.onMediaStatusChanged,ft=ht===void 0?function(){}:ht,pt=st.onVideoQualityChanged,mt=pt===void 0?function(){}:pt,gt=reactExports.useState(null),xt=gt[0],yt=gt[1],vt=reactExports.useState(null),St=vt[0],wt=vt[1],Et=reactExports.useState(null),Rt=Et[0],Tt=Et[1],It=reactExports.useState(null),At=It[0],Dt=It[1],jt=useMeeting(),Ft=reactExports.useMemo(function(){var ln,Xn=jt==null?void 0:jt.participants,Yr=jt==null?void 0:jt.localParticipant,Qr=jt==null?void 0:jt.activeSpeakerId,Mn=jt==null?void 0:jt.mainParticipant,Ar=(jt==null||(ln=jt.pinnedParticipants)===null||ln===void 0?void 0:ln.get(rt))||{cam:!1,share:!1};return{participants:Xn,localParticipant:Yr,activeSpeakerId:Qr,mainParticipant:Mn,pinState:Ar}},[jt]),Lt=Ft.participants,Mt=Ft.localParticipant,Ot=Ft.activeSpeakerId,Nt=Ft.mainParticipant,$t=Ft.pinState,Vt=Lt==null?void 0:Lt.get(rt),Ut=reactExports.useState(Vt==null?void 0:Vt.webcamOn),zt=Ut[0],Bt=Ut[1],Ht=reactExports.useState(Vt==null?void 0:Vt.micOn),Gt=Ht[0],Xt=Ht[1],Zt=reactExports.useState(Vt==null?void 0:Vt.mode),hr=Zt[0],nr=Zt[1],ir=function(Xn){if(Xn.track.readyState==="live")switch(Xn.kind){case"video":xt!=null&&yt(null),yt(Xn);break;case"audio":St!=null&&wt(null),wt(Xn);break;case"share":Rt!=null&&Tt(null),Tt(Xn);break;case"shareAudio":At!=null&&Dt(null),Dt(Xn);break}},yr=function(Xn){switch(Xn.kind){case"video":yt(null);break;case"audio":wt(null);break;case"share":Tt(null);break;case"shareAudio":Dt(null);break}},Cr=function(Xn){ir(Xn),ct(Xn)},Sr=function(Xn){rt===Xn.participantId&&nr(Xn.mode)},xr=function(Xn){yr(Xn),dt(Xn)},gr=function(Xn){var Yr=Xn.peerId,Qr=Xn.prevQuality,Mn=Xn.currentQuality;mt({peerId:Yr,prevQuality:Qr,currentQuality:Mn})},_r=function(Xn){var Yr=Xn.kind,Qr=Xn.peerId,Mn=Xn.newStatus;Yr=="audio"?Xt(Mn):Yr=="video"&&Bt(Mn),ft({kind:Yr,peerId:Qr,newStatus:Mn})},fr=function(Xn){Vt==null||Vt.setQuality(Xn)},Nr=function(Xn,Yr){Vt==null||Vt.setViewPort(Xn,Yr)},Tr=function(){Vt==null||Vt.enableMic()},Hr=function(){Vt==null||Vt.disableMic()},Vr=function(){Vt==null||Vt.enableWebcam()},mn=function(){Vt==null||Vt.disableWebcam()},tn=function(Xn){Vt==null||Vt.pin(Xn)},er=function(Xn){Vt==null||Vt.unpin(Xn)},tr=function(){Vt==null||Vt.remove()},vr=function(Xn){var Yr=Xn===void 0?{}:Xn,Qr=Yr.height,Mn=Yr.width;return Promise.resolve(Vt==null?void 0:Vt.captureImage({height:Qr,width:Mn}))},Fr=function(){return Promise.resolve(Vt==null?void 0:Vt.getAudioStats())},Kr=function(){return Promise.resolve(Vt==null?void 0:Vt.getVideoStats())},qr=function(){return Promise.resolve(Vt==null?void 0:Vt.getShareStats())},pn=function(){Vt==null||Vt.consumeWebcamStreams()},En=function(){Vt==null||Vt.consumeMicStreams()},Rn=function(){Vt==null||Vt.stopConsumingWebcamStreams()},Qn=function(){Vt==null||Vt.stopConsumingMicStreams()},Ln=function(Xn){return Promise.resolve(Vt==null?void 0:Vt.switchTo(Xn)).then(function(){})};return reactExports.useEffect(function(){var ln=Vt==null?void 0:Vt.streams;return ln&&ln.forEach(function(Xn){ir(Xn)}),Vt!=null&&Vt.micOn&&Xt(Gt),Vt!=null&&Vt.webcamOn&&Bt(zt),Vt==null||Vt.on("stream-enabled",Cr),Vt==null||Vt.on("stream-disabled",xr),Vt==null||Vt.on("media-status-changed",_r),Vt==null||Vt.on("video-quality-changed",gr),eventEmitter.on(events["participant-mode-changed"],Sr),function(){Vt==null||Vt.off("stream-enabled",Cr),Vt==null||Vt.off("stream-disabled",xr),Vt==null||Vt.off("media-status-changed",_r),Vt==null||Vt.off("video-quality-changed",gr),eventEmitter.off(events["participant-mode-changed"],Sr)}},[Vt]),{displayName:Vt==null?void 0:Vt.displayName,participant:Vt,webcamStream:xt,micStream:St,screenShareStream:Rt,screenShareAudioStream:At,webcamOn:zt||!!xt,micOn:Gt||!!St,mode:hr,metaData:Vt==null?void 0:Vt.metaData,screenShareOn:!!Rt,isLocal:(Mt==null?void 0:Mt.id)===rt,isActiveSpeaker:Ot===rt,isMainParticipant:(Nt==null?void 0:Nt.id)===rt,pinState:$t,consumeMicStreams:En,consumeWebcamStreams:pn,stopConsumingMicStreams:Qn,stopConsumingWebcamStreams:Rn,setQuality:fr,setViewPort:Nr,enableMic:Tr,disableMic:Hr,enableWebcam:Vr,disableWebcam:mn,captureImage:vr,pin:tn,unpin:er,remove:tr,switchTo:Ln,getAudioStats:Fr,getVideoStats:Kr,getShareStats:qr}},usePubSub=function(rt,it){var st=it===void 0?{}:it,lt=st.onMessageReceived,ct=lt===void 0?function(){}:lt,ut=st.onOldMessagesReceived,dt=ut===void 0?function(){}:ut,ht=useMeeting(),ft=ht.meeting,pt=ht.isMeetingJoined,mt=reactExports.useState([]),gt=mt[0],xt=mt[1],yt=reactExports.useRef(!1),vt=function(Rt,Tt,It){ft&&ft.pubSub.publish(rt,Rt,Tt,It)},St=function(Rt){xt(function(Tt){return[].concat(Tt,[Rt])}),ct(Rt)},wt=function(Rt){try{var Tt;return Promise.resolve(Rt==null||(Tt=Rt.pubSub)===null||Tt===void 0?void 0:Tt.subscribe(rt,St)).then(function(It){It&&(dt(It.messages),xt(It.messages))})}catch(It){return Promise.reject(It)}};return reactExports.useEffect(function(){if(ft&&!yt.current&&pt)return yt.current=!0,wt(ft),function(){var Et;ft==null||(Et=ft.pubSub)===null||Et===void 0||Et.unsubscribe(rt,St)}},[ft,pt]),{publish:vt,messages:gt}},Constants=videosdkExports.VideoSDK.Constants,createCameraVideoTrack=function(rt){var it=rt.cameraId,st=it===void 0?void 0:it,lt=rt.encoderConfig,ct=lt===void 0?void 0:lt,ut=rt.facingMode,dt=ut===void 0?void 0:ut,ht=rt.optimizationMode,ft=ht===void 0?void 0:ht,pt=rt.multiStream,mt=pt===void 0?!0:pt;try{return Promise.resolve(videosdkExports.VideoSDK.createCameraVideoTrack({cameraId:st,encoderConfig:ct,facingMode:dt,optimizationMode:ft,multiStream:mt}))}catch(gt){return Promise.reject(gt)}};function LeaveScreen({setIsMeetingLeft:nt}){const rt=useNavigate();return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 h-screen bg-gray-200",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl text-gray-700",children:"감사합니다"}),jsxRuntimeExports.jsx("div",{className:"mt-12 mb-8",children:jsxRuntimeExports.jsx("button",{className:"`w-full bg-teal-700 text-white px-16 py-3 rounded-lg text-sm",onClick:()=>{nt(!1)},children:"다시 참여 하시겠습니까?"})}),jsxRuntimeExports.jsx("button",{className:"`w-full bg-teal-600 text-white px-16 py-3 rounded-lg text-sm",onClick:()=>{rt("/")},children:"홈으로"})]})}function MeetingDetailsScreen({onClickJoin:nt,_handleOnCreateMeeting:rt,participantName:it,setParticipantName:st,videoTrack:lt,setVideoTrack:ct,onClickStartMeeting:ut,setMeetingMode:dt}){const[ht,ft]=reactExports.useState(""),[pt,mt]=reactExports.useState(!1),[gt,xt]=reactExports.useState(!1),[yt,vt]=reactExports.useState(!1),[St,wt]=reactExports.useState(!1),Et=Recoil_index_20(userState);return jsxRuntimeExports.jsxs("div",{className:"flex flex-1 flex-col justify-center w-full md:p-[6px] sm:p-1 p-1.5",children:[yt?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center px-4 py-3 border border-gray-400 border-solid rounded-md",children:[jsxRuntimeExports.jsx("p",{className:"text-black",children:"입장코드"}),jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("p",{className:"text-base text-black",children:`${ht}`}),jsxRuntimeExports.jsx("button",{className:"ml-2",onClick:()=>{navigator.clipboard.writeText(ht),xt(!0),setTimeout(()=>{xt(!1)},3e3)},children:gt?jsxRuntimeExports.jsx(CheckIcon$1,{className:"w-5 h-5 text-green-700"}):jsxRuntimeExports.jsx(ClipboardIcon$1,{className:"w-5 h-5 text-black"})})]})]}):St?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{defaultValue:ht,onChange:Rt=>{ft(Rt.target.value)},placeholder:"입장 코드번호를 입력해주세요",className:"w-full px-4 py-3 text-center text-black rounded-md"}),pt&&jsxRuntimeExports.jsx("p",{className:"mx-auto mt-2 text-xs text-red-600",children:"올바른 코드 번호를 입력해 주세요"})]}):null,(yt||St)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{value:it,onChange:Rt=>st(Rt.target.value),placeholder:"이름을 입력해주세요",className:"w-full px-4 py-3 mt-5 text-center text-black rounded-md"}),jsxRuntimeExports.jsx("button",{disabled:it.length<1,className:`w-full ${it.length<1?"bg-gray-600":"bg-teal-700"}  text-white px-2 py-3 rounded-md mt-5`,onClick:Rt=>{yt?(lt&&(lt.stop(),ct(null)),ut()):ht.match("\\w{4}\\-\\w{4}\\-\\w{4}")?nt(ht):mt(!0)},children:"시작하기"})]}),!yt&&!St&&Et.info.role==="ROLE_ADMIN"?jsxRuntimeExports.jsx("div",{className:"flex flex-col w-full mt-4 md:mt-0",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center w-full",children:[jsxRuntimeExports.jsx("button",{className:"w-full px-2 py-3 text-white bg-teal-700 rounded-md",onClick:async Rt=>{const Tt=await rt();ft(Tt),vt(!0),dt(Constants.modes.CONFERENCE)},children:"방 만들기"}),jsxRuntimeExports.jsx("button",{className:"w-full px-2 py-3 mt-5 text-white bg-teal-700 rounded-md",onClick:async Rt=>{wt(!0),dt(Constants.modes.CONFERENCE)},children:"참여하기"})]})}):jsxRuntimeExports.jsx("div",{className:"flex flex-col w-full mt-4 md:mt-0",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center w-full",children:jsxRuntimeExports.jsx("button",{className:"w-full px-2 py-3 mt-5 text-white bg-teal-700 rounded-md",onClick:async Rt=>{wt(!0),dt(Constants.modes.CONFERENCE)},children:"참여하기"})})})]})}var define_import_meta_env_default={VITE_AWS_ACCESS_KEY_ID:"AKIAQ3EGP36XU5CEUPOS",VITE_AWS_SECRET_ACCESS_KEY:"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",VITE_VIDEOSDK_TOKEN:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcGlrZXkiOiJhY2ZiODk4Yy1kZTExLTRmMGUtOTZmZi1mYWQzYWQwZDA4MDEiLCJwZXJtaXNzaW9ucyI6WyJhbGxvd19qb2luIl0sImlhdCI6MTcwNzE5NjIyOCwiZXhwIjoxNzA5Nzg4MjI4fQ.-z1CumhwuJJESfeP_ZwZMAnt_zLiStnASC_NGqxgPQY",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const API_BASE_URL="https://api.videosdk.live",VIDEOSDK_TOKEN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcGlrZXkiOiJhY2ZiODk4Yy1kZTExLTRmMGUtOTZmZi1mYWQzYWQwZDA4MDEiLCJwZXJtaXNzaW9ucyI6WyJhbGxvd19qb2luIl0sImlhdCI6MTcwNzE5NjIyOCwiZXhwIjoxNzA5Nzg4MjI4fQ.-z1CumhwuJJESfeP_ZwZMAnt_zLiStnASC_NGqxgPQY",API_AUTH_URL=define_import_meta_env_default.REACT_APP_AUTH_URL,getToken=async()=>{if(API_AUTH_URL)console.error("Error: Provide only ONE PARAMETER - either Token or Auth API");else return VIDEOSDK_TOKEN},createMeeting=async({token:nt})=>{const rt=`${API_BASE_URL}/v2/rooms`,it={method:"POST",headers:{Authorization:nt,"Content-Type":"application/json"}},{roomId:st}=await fetch(rt,it).then(lt=>lt.json()).catch(lt=>console.error("error",lt));return st},validateMeeting=async({roomId:nt,token:rt})=>{const it=`${API_BASE_URL}/v2/rooms/validate/${nt}`,lt=await fetch(it,{method:"GET",headers:{Authorization:rt,"Content-Type":"application/json"}}).then(ct=>ct.json()).catch(ct=>console.error("error",ct));return lt?lt.roomId===nt:!1};var i$4=Object.defineProperty,d$6=(nt,rt,it)=>rt in nt?i$4(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,r$3=(nt,rt,it)=>(d$6(nt,typeof rt!="symbol"?rt+"":rt,it),it);let o$5=class{constructor(){r$3(this,"current",this.detect()),r$3(this,"handoffState","pending"),r$3(this,"currentId",0)}set(rt){this.current!==rt&&(this.handoffState="pending",this.currentId=0,this.current=rt)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},s$8=new o$5,l$5=(nt,rt)=>{s$8.isServer?reactExports.useEffect(nt,rt):reactExports.useLayoutEffect(nt,rt)};function s$7(nt){let rt=reactExports.useRef(nt);return l$5(()=>{rt.current=nt},[nt]),rt}let o$4=function(nt){let rt=s$7(nt);return e$2.useCallback((...it)=>rt.current(...it),[rt])};function t$6(nt){typeof queueMicrotask=="function"?queueMicrotask(nt):Promise.resolve().then(nt).catch(rt=>setTimeout(()=>{throw rt}))}function o$3(){let nt=[],rt={addEventListener(it,st,lt,ct){return it.addEventListener(st,lt,ct),rt.add(()=>it.removeEventListener(st,lt,ct))},requestAnimationFrame(...it){let st=requestAnimationFrame(...it);return rt.add(()=>cancelAnimationFrame(st))},nextFrame(...it){return rt.requestAnimationFrame(()=>rt.requestAnimationFrame(...it))},setTimeout(...it){let st=setTimeout(...it);return rt.add(()=>clearTimeout(st))},microTask(...it){let st={current:!0};return t$6(()=>{st.current&&it[0]()}),rt.add(()=>{st.current=!1})},style(it,st,lt){let ct=it.style.getPropertyValue(st);return Object.assign(it.style,{[st]:lt}),this.add(()=>{Object.assign(it.style,{[st]:ct})})},group(it){let st=o$3();return it(st),this.add(()=>st.dispose())},add(it){return nt.push(it),()=>{let st=nt.indexOf(it);if(st>=0)for(let lt of nt.splice(st,1))lt()}},dispose(){for(let it of nt.splice(0))it()}};return rt}function p$3(){let[nt]=reactExports.useState(o$3);return reactExports.useEffect(()=>()=>nt.dispose(),[nt]),nt}function s$6(){let nt=typeof document>"u";return"useSyncExternalStore"in e$3?(rt=>rt.useSyncExternalStore)(e$3)(()=>()=>{},()=>!1,()=>!nt):!1}function l$4(){let nt=s$6(),[rt,it]=reactExports.useState(s$8.isHandoffComplete);return rt&&s$8.isHandoffComplete===!1&&it(!1),reactExports.useEffect(()=>{rt!==!0&&it(!0)},[rt]),reactExports.useEffect(()=>s$8.handoff(),[]),nt?!1:rt}var o$2;let I$7=(o$2=e$2.useId)!=null?o$2:function(){let nt=l$4(),[rt,it]=e$2.useState(nt?()=>s$8.nextId():null);return l$5(()=>{rt===null&&it(s$8.nextId())},[rt]),rt!=null?""+rt:void 0};function u$5(nt,rt,...it){if(nt in rt){let lt=rt[nt];return typeof lt=="function"?lt(...it):lt}let st=new Error(`Tried to handle "${nt}" but there is no handler defined. Only defined handlers are: ${Object.keys(rt).map(lt=>`"${lt}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(st,u$5),st}function o$1(nt){return s$8.isServer?null:nt instanceof Node?nt.ownerDocument:nt!=null&&nt.hasOwnProperty("current")&&nt.current instanceof Node?nt.current.ownerDocument:document}let c$5=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(nt=>`${nt}:not([tabindex='-1'])`).join(",");var M$3=(nt=>(nt[nt.First=1]="First",nt[nt.Previous=2]="Previous",nt[nt.Next=4]="Next",nt[nt.Last=8]="Last",nt[nt.WrapAround=16]="WrapAround",nt[nt.NoScroll=32]="NoScroll",nt))(M$3||{}),N$2=(nt=>(nt[nt.Error=0]="Error",nt[nt.Overflow=1]="Overflow",nt[nt.Success=2]="Success",nt[nt.Underflow=3]="Underflow",nt))(N$2||{}),F$2=(nt=>(nt[nt.Previous=-1]="Previous",nt[nt.Next=1]="Next",nt))(F$2||{});function f$5(nt=document.body){return nt==null?[]:Array.from(nt.querySelectorAll(c$5)).sort((rt,it)=>Math.sign((rt.tabIndex||Number.MAX_SAFE_INTEGER)-(it.tabIndex||Number.MAX_SAFE_INTEGER)))}var T$3=(nt=>(nt[nt.Strict=0]="Strict",nt[nt.Loose=1]="Loose",nt))(T$3||{});function h$3(nt,rt=0){var it;return nt===((it=o$1(nt))==null?void 0:it.body)?!1:u$5(rt,{0(){return nt.matches(c$5)},1(){let st=nt;for(;st!==null;){if(st.matches(c$5))return!0;st=st.parentElement}return!1}})}var w$2=(nt=>(nt[nt.Keyboard=0]="Keyboard",nt[nt.Mouse=1]="Mouse",nt))(w$2||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",nt=>{nt.metaKey||nt.altKey||nt.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",nt=>{nt.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:nt.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function y$4(nt){nt==null||nt.focus({preventScroll:!0})}let S$5=["textarea","input"].join(",");function H(nt){var rt,it;return(it=(rt=nt==null?void 0:nt.matches)==null?void 0:rt.call(nt,S$5))!=null?it:!1}function I$6(nt,rt=it=>it){return nt.slice().sort((it,st)=>{let lt=rt(it),ct=rt(st);if(lt===null||ct===null)return 0;let ut=lt.compareDocumentPosition(ct);return ut&Node.DOCUMENT_POSITION_FOLLOWING?-1:ut&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function O$1(nt,rt,{sorted:it=!0,relativeTo:st=null,skipElements:lt=[]}={}){let ct=Array.isArray(nt)?nt.length>0?nt[0].ownerDocument:document:nt.ownerDocument,ut=Array.isArray(nt)?it?I$6(nt):nt:f$5(nt);lt.length>0&&ut.length>1&&(ut=ut.filter(xt=>!lt.includes(xt))),st=st??ct.activeElement;let dt=(()=>{if(rt&5)return 1;if(rt&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),ht=(()=>{if(rt&1)return 0;if(rt&2)return Math.max(0,ut.indexOf(st))-1;if(rt&4)return Math.max(0,ut.indexOf(st))+1;if(rt&8)return ut.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),ft=rt&32?{preventScroll:!0}:{},pt=0,mt=ut.length,gt;do{if(pt>=mt||pt+mt<=0)return 0;let xt=ht+pt;if(rt&16)xt=(xt+mt)%mt;else{if(xt<0)return 3;if(xt>=mt)return 1}gt=ut[xt],gt==null||gt.focus(ft),pt+=dt}while(gt!==ct.activeElement);return rt&6&&H(gt)&&gt.select(),2}function t$5(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function i$3(){return/Android/gi.test(window.navigator.userAgent)}function n$3(){return t$5()||i$3()}function d$5(nt,rt,it){let st=s$7(rt);reactExports.useEffect(()=>{function lt(ct){st.current(ct)}return document.addEventListener(nt,lt,it),()=>document.removeEventListener(nt,lt,it)},[nt,it])}function s$5(nt,rt,it){let st=s$7(rt);reactExports.useEffect(()=>{function lt(ct){st.current(ct)}return window.addEventListener(nt,lt,it),()=>window.removeEventListener(nt,lt,it)},[nt,it])}function y$3(nt,rt,it=!0){let st=reactExports.useRef(!1);reactExports.useEffect(()=>{requestAnimationFrame(()=>{st.current=it})},[it]);function lt(ut,dt){if(!st.current||ut.defaultPrevented)return;let ht=dt(ut);if(ht===null||!ht.getRootNode().contains(ht)||!ht.isConnected)return;let ft=function pt(mt){return typeof mt=="function"?pt(mt()):Array.isArray(mt)||mt instanceof Set?mt:[mt]}(nt);for(let pt of ft){if(pt===null)continue;let mt=pt instanceof HTMLElement?pt:pt.current;if(mt!=null&&mt.contains(ht)||ut.composed&&ut.composedPath().includes(mt))return}return!h$3(ht,T$3.Loose)&&ht.tabIndex!==-1&&ut.preventDefault(),rt(ut,ht)}let ct=reactExports.useRef(null);d$5("pointerdown",ut=>{var dt,ht;st.current&&(ct.current=((ht=(dt=ut.composedPath)==null?void 0:dt.call(ut))==null?void 0:ht[0])||ut.target)},!0),d$5("mousedown",ut=>{var dt,ht;st.current&&(ct.current=((ht=(dt=ut.composedPath)==null?void 0:dt.call(ut))==null?void 0:ht[0])||ut.target)},!0),d$5("click",ut=>{n$3()||ct.current&&(lt(ut,()=>ct.current),ct.current=null)},!0),d$5("touchend",ut=>lt(ut,()=>ut.target instanceof HTMLElement?ut.target:null),!0),s$5("blur",ut=>lt(ut,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function n$2(...nt){return reactExports.useMemo(()=>o$1(...nt),[...nt])}function i$2(nt){var rt;if(nt.type)return nt.type;let it=(rt=nt.as)!=null?rt:"button";if(typeof it=="string"&&it.toLowerCase()==="button")return"button"}function T$2(nt,rt){let[it,st]=reactExports.useState(()=>i$2(nt));return l$5(()=>{st(i$2(nt))},[nt.type,nt.as]),l$5(()=>{it||rt.current&&rt.current instanceof HTMLButtonElement&&!rt.current.hasAttribute("type")&&st("button")},[it,rt]),it}let u$4=Symbol();function T$1(nt,rt=!0){return Object.assign(nt,{[u$4]:rt})}function y$2(...nt){let rt=reactExports.useRef(nt);reactExports.useEffect(()=>{rt.current=nt},[nt]);let it=o$4(st=>{for(let lt of rt.current)lt!=null&&(typeof lt=="function"?lt(st):lt.current=st)});return nt.every(st=>st==null||(st==null?void 0:st[u$4]))?void 0:it}function m$3(nt,rt){let it=reactExports.useRef([]),st=o$4(nt);reactExports.useEffect(()=>{let lt=[...it.current];for(let[ct,ut]of rt.entries())if(it.current[ct]!==ut){let dt=st(rt,lt);return it.current=rt,dt}},[st,...rt])}function t$4(...nt){return Array.from(new Set(nt.flatMap(rt=>typeof rt=="string"?rt.split(" "):[]))).filter(Boolean).join(" ")}var O=(nt=>(nt[nt.None=0]="None",nt[nt.RenderStrategy=1]="RenderStrategy",nt[nt.Static=2]="Static",nt))(O||{}),v$2=(nt=>(nt[nt.Unmount=0]="Unmount",nt[nt.Hidden=1]="Hidden",nt))(v$2||{});function C$1({ourProps:nt,theirProps:rt,slot:it,defaultTag:st,features:lt,visible:ct=!0,name:ut,mergeRefs:dt}){dt=dt??k$1;let ht=R(rt,nt);if(ct)return m$2(ht,it,st,ut,dt);let ft=lt??0;if(ft&2){let{static:pt=!1,...mt}=ht;if(pt)return m$2(mt,it,st,ut,dt)}if(ft&1){let{unmount:pt=!0,...mt}=ht;return u$5(pt?0:1,{0(){return null},1(){return m$2({...mt,hidden:!0,style:{display:"none"}},it,st,ut,dt)}})}return m$2(ht,it,st,ut,dt)}function m$2(nt,rt={},it,st,lt){let{as:ct=it,children:ut,refName:dt="ref",...ht}=F$1(nt,["unmount","static"]),ft=nt.ref!==void 0?{[dt]:nt.ref}:{},pt=typeof ut=="function"?ut(rt):ut;"className"in ht&&ht.className&&typeof ht.className=="function"&&(ht.className=ht.className(rt));let mt={};if(rt){let gt=!1,xt=[];for(let[yt,vt]of Object.entries(rt))typeof vt=="boolean"&&(gt=!0),vt===!0&&xt.push(yt);gt&&(mt["data-headlessui-state"]=xt.join(" "))}if(ct===reactExports.Fragment&&Object.keys(x$2(ht)).length>0){if(!reactExports.isValidElement(pt)||Array.isArray(pt)&&pt.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${st} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(ht).map(vt=>`  - ${vt}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(vt=>`  - ${vt}`).join(`
`)].join(`
`));let gt=pt.props,xt=typeof(gt==null?void 0:gt.className)=="function"?(...vt)=>t$4(gt==null?void 0:gt.className(...vt),ht.className):t$4(gt==null?void 0:gt.className,ht.className),yt=xt?{className:xt}:{};return reactExports.cloneElement(pt,Object.assign({},R(pt.props,x$2(F$1(ht,["ref"]))),mt,ft,{ref:lt(pt.ref,ft.ref)},yt))}return reactExports.createElement(ct,Object.assign({},F$1(ht,["ref"]),ct!==reactExports.Fragment&&ft,ct!==reactExports.Fragment&&mt),pt)}function I$5(){let nt=reactExports.useRef([]),rt=reactExports.useCallback(it=>{for(let st of nt.current)st!=null&&(typeof st=="function"?st(it):st.current=it)},[]);return(...it)=>{if(!it.every(st=>st==null))return nt.current=it,rt}}function k$1(...nt){return nt.every(rt=>rt==null)?void 0:rt=>{for(let it of nt)it!=null&&(typeof it=="function"?it(rt):it.current=rt)}}function R(...nt){if(nt.length===0)return{};if(nt.length===1)return nt[0];let rt={},it={};for(let st of nt)for(let lt in st)lt.startsWith("on")&&typeof st[lt]=="function"?(it[lt]!=null||(it[lt]=[]),it[lt].push(st[lt])):rt[lt]=st[lt];if(rt.disabled||rt["aria-disabled"])return Object.assign(rt,Object.fromEntries(Object.keys(it).map(st=>[st,void 0])));for(let st in it)Object.assign(rt,{[st](lt,...ct){let ut=it[st];for(let dt of ut){if((lt instanceof Event||(lt==null?void 0:lt.nativeEvent)instanceof Event)&&lt.defaultPrevented)return;dt(lt,...ct)}}});return rt}function U$2(nt){var rt;return Object.assign(reactExports.forwardRef(nt),{displayName:(rt=nt.displayName)!=null?rt:nt.name})}function x$2(nt){let rt=Object.assign({},nt);for(let it in rt)rt[it]===void 0&&delete rt[it];return rt}function F$1(nt,rt=[]){let it=Object.assign({},nt);for(let st of rt)st in it&&delete it[st];return it}let p$2="div";var s$4=(nt=>(nt[nt.None=1]="None",nt[nt.Focusable=2]="Focusable",nt[nt.Hidden=4]="Hidden",nt))(s$4||{});function l$3(nt,rt){var it;let{features:st=1,...lt}=nt,ct={ref:rt,"aria-hidden":(st&2)===2?!0:(it=lt["aria-hidden"])!=null?it:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(st&4)===4&&(st&2)!==2&&{display:"none"}}};return C$1({ourProps:ct,theirProps:lt,slot:{},defaultTag:p$2,name:"Hidden"})}let f$4=U$2(l$3),n$1=reactExports.createContext(null);n$1.displayName="OpenClosedContext";var d$4=(nt=>(nt[nt.Open=1]="Open",nt[nt.Closed=2]="Closed",nt[nt.Closing=4]="Closing",nt[nt.Opening=8]="Opening",nt))(d$4||{});function u$3(){return reactExports.useContext(n$1)}function s$3({value:nt,children:rt}){return e$2.createElement(n$1.Provider,{value:nt},rt)}function t$3(nt){function rt(){document.readyState!=="loading"&&(nt(),document.removeEventListener("DOMContentLoaded",rt))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",rt),rt())}let t$2=[];t$3(()=>{function nt(rt){rt.target instanceof HTMLElement&&rt.target!==document.body&&t$2[0]!==rt.target&&(t$2.unshift(rt.target),t$2=t$2.filter(it=>it!=null&&it.isConnected),t$2.splice(10))}window.addEventListener("click",nt,{capture:!0}),window.addEventListener("mousedown",nt,{capture:!0}),window.addEventListener("focus",nt,{capture:!0}),document.body.addEventListener("click",nt,{capture:!0}),document.body.addEventListener("mousedown",nt,{capture:!0}),document.body.addEventListener("focus",nt,{capture:!0})});function r$2(nt){let rt=nt.parentElement,it=null;for(;rt&&!(rt instanceof HTMLFieldSetElement);)rt instanceof HTMLLegendElement&&(it=rt),rt=rt.parentElement;let st=(rt==null?void 0:rt.getAttribute("disabled"))==="";return st&&i$1(it)?!1:st}function i$1(nt){if(!nt)return!1;let rt=nt.previousElementSibling;for(;rt!==null;){if(rt instanceof HTMLLegendElement)return!1;rt=rt.previousElementSibling}return!0}var o=(nt=>(nt.Space=" ",nt.Enter="Enter",nt.Escape="Escape",nt.Backspace="Backspace",nt.Delete="Delete",nt.ArrowLeft="ArrowLeft",nt.ArrowUp="ArrowUp",nt.ArrowRight="ArrowRight",nt.ArrowDown="ArrowDown",nt.Home="Home",nt.End="End",nt.PageUp="PageUp",nt.PageDown="PageDown",nt.Tab="Tab",nt))(o||{});function E(nt,rt,it,st){let lt=s$7(it);reactExports.useEffect(()=>{nt=nt??window;function ct(ut){lt.current(ut)}return nt.addEventListener(rt,ct,st),()=>nt.removeEventListener(rt,ct,st)},[nt,rt,st])}function f$3(){let nt=reactExports.useRef(!1);return l$5(()=>(nt.current=!0,()=>{nt.current=!1}),[]),nt}function c$4(nt){let rt=o$4(nt),it=reactExports.useRef(!1);reactExports.useEffect(()=>(it.current=!1,()=>{it.current=!0,t$6(()=>{it.current&&rt()})}),[rt])}var s$2=(nt=>(nt[nt.Forwards=0]="Forwards",nt[nt.Backwards=1]="Backwards",nt))(s$2||{});function n(){let nt=reactExports.useRef(0);return s$5("keydown",rt=>{rt.key==="Tab"&&(nt.current=rt.shiftKey?1:0)},!0),nt}function P$1(nt){if(!nt)return new Set;if(typeof nt=="function")return new Set(nt());let rt=new Set;for(let it of nt.current)it.current instanceof HTMLElement&&rt.add(it.current);return rt}let X="div";var _$2=(nt=>(nt[nt.None=1]="None",nt[nt.InitialFocus=2]="InitialFocus",nt[nt.TabLock=4]="TabLock",nt[nt.FocusLock=8]="FocusLock",nt[nt.RestoreFocus=16]="RestoreFocus",nt[nt.All=30]="All",nt))(_$2||{});function z(nt,rt){let it=reactExports.useRef(null),st=y$2(it,rt),{initialFocus:lt,containers:ct,features:ut=30,...dt}=nt;l$4()||(ut=1);let ht=n$2(it);Y({ownerDocument:ht},!!(ut&16));let ft=Z({ownerDocument:ht,container:it,initialFocus:lt},!!(ut&2));$({ownerDocument:ht,container:it,containers:ct,previousActiveElement:ft},!!(ut&8));let pt=n(),mt=o$4(vt=>{let St=it.current;St&&(wt=>wt())(()=>{u$5(pt.current,{[s$2.Forwards]:()=>{O$1(St,M$3.First,{skipElements:[vt.relatedTarget]})},[s$2.Backwards]:()=>{O$1(St,M$3.Last,{skipElements:[vt.relatedTarget]})}})})}),gt=p$3(),xt=reactExports.useRef(!1),yt={ref:st,onKeyDown(vt){vt.key=="Tab"&&(xt.current=!0,gt.requestAnimationFrame(()=>{xt.current=!1}))},onBlur(vt){let St=P$1(ct);it.current instanceof HTMLElement&&St.add(it.current);let wt=vt.relatedTarget;wt instanceof HTMLElement&&wt.dataset.headlessuiFocusGuard!=="true"&&(S$4(St,wt)||(xt.current?O$1(it.current,u$5(pt.current,{[s$2.Forwards]:()=>M$3.Next,[s$2.Backwards]:()=>M$3.Previous})|M$3.WrapAround,{relativeTo:vt.target}):vt.target instanceof HTMLElement&&y$4(vt.target)))}};return e$2.createElement(e$2.Fragment,null,!!(ut&4)&&e$2.createElement(f$4,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:mt,features:s$4.Focusable}),C$1({ourProps:yt,theirProps:dt,defaultTag:X,name:"FocusTrap"}),!!(ut&4)&&e$2.createElement(f$4,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:mt,features:s$4.Focusable}))}let D$2=U$2(z),de=Object.assign(D$2,{features:_$2});function Q(nt=!0){let rt=reactExports.useRef(t$2.slice());return m$3(([it],[st])=>{st===!0&&it===!1&&t$6(()=>{rt.current.splice(0)}),st===!1&&it===!0&&(rt.current=t$2.slice())},[nt,t$2,rt]),o$4(()=>{var it;return(it=rt.current.find(st=>st!=null&&st.isConnected))!=null?it:null})}function Y({ownerDocument:nt},rt){let it=Q(rt);m$3(()=>{rt||(nt==null?void 0:nt.activeElement)===(nt==null?void 0:nt.body)&&y$4(it())},[rt]),c$4(()=>{rt&&y$4(it())})}function Z({ownerDocument:nt,container:rt,initialFocus:it},st){let lt=reactExports.useRef(null),ct=f$3();return m$3(()=>{if(!st)return;let ut=rt.current;ut&&t$6(()=>{if(!ct.current)return;let dt=nt==null?void 0:nt.activeElement;if(it!=null&&it.current){if((it==null?void 0:it.current)===dt){lt.current=dt;return}}else if(ut.contains(dt)){lt.current=dt;return}it!=null&&it.current?y$4(it.current):O$1(ut,M$3.First)===N$2.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),lt.current=nt==null?void 0:nt.activeElement})},[st]),lt}function $({ownerDocument:nt,container:rt,containers:it,previousActiveElement:st},lt){let ct=f$3();E(nt==null?void 0:nt.defaultView,"focus",ut=>{if(!lt||!ct.current)return;let dt=P$1(it);rt.current instanceof HTMLElement&&dt.add(rt.current);let ht=st.current;if(!ht)return;let ft=ut.target;ft&&ft instanceof HTMLElement?S$4(dt,ft)?(st.current=ft,y$4(ft)):(ut.preventDefault(),ut.stopPropagation(),y$4(ht)):y$4(st.current)},!0)}function S$4(nt,rt){for(let it of nt)if(it.contains(rt))return!0;return!1}let e=reactExports.createContext(!1);function a$4(){return reactExports.useContext(e)}function l$2(nt){return e$2.createElement(e.Provider,{value:nt.force},nt.children)}function F(nt){let rt=a$4(),it=reactExports.useContext(_$1),st=n$2(nt),[lt,ct]=reactExports.useState(()=>{if(!rt&&it!==null||s$8.isServer)return null;let ut=st==null?void 0:st.getElementById("headlessui-portal-root");if(ut)return ut;if(st===null)return null;let dt=st.createElement("div");return dt.setAttribute("id","headlessui-portal-root"),st.body.appendChild(dt)});return reactExports.useEffect(()=>{lt!==null&&(st!=null&&st.body.contains(lt)||st==null||st.body.appendChild(lt))},[lt,st]),reactExports.useEffect(()=>{rt||it!==null&&ct(it.current)},[it,ct,rt]),lt}let U$1=reactExports.Fragment;function N$1(nt,rt){let it=nt,st=reactExports.useRef(null),lt=y$2(T$1(pt=>{st.current=pt}),rt),ct=n$2(st),ut=F(st),[dt]=reactExports.useState(()=>{var pt;return s$8.isServer?null:(pt=ct==null?void 0:ct.createElement("div"))!=null?pt:null}),ht=reactExports.useContext(f$2),ft=l$4();return l$5(()=>{!ut||!dt||ut.contains(dt)||(dt.setAttribute("data-headlessui-portal",""),ut.appendChild(dt))},[ut,dt]),l$5(()=>{if(dt&&ht)return ht.register(dt)},[ht,dt]),c$4(()=>{var pt;!ut||!dt||(dt instanceof Node&&ut.contains(dt)&&ut.removeChild(dt),ut.childNodes.length<=0&&((pt=ut.parentElement)==null||pt.removeChild(ut)))}),ft?!ut||!dt?null:reactDomExports.createPortal(C$1({ourProps:{ref:lt},theirProps:it,defaultTag:U$1,name:"Portal"}),dt):null}let S$3=reactExports.Fragment,_$1=reactExports.createContext(null);function j(nt,rt){let{target:it,...st}=nt,lt={ref:y$2(rt)};return e$2.createElement(_$1.Provider,{value:it},C$1({ourProps:lt,theirProps:st,defaultTag:S$3,name:"Popover.Group"}))}let f$2=reactExports.createContext(null);function ee(){let nt=reactExports.useContext(f$2),rt=reactExports.useRef([]),it=o$4(ct=>(rt.current.push(ct),nt&&nt.register(ct),()=>st(ct))),st=o$4(ct=>{let ut=rt.current.indexOf(ct);ut!==-1&&rt.current.splice(ut,1),nt&&nt.unregister(ct)}),lt=reactExports.useMemo(()=>({register:it,unregister:st,portals:rt}),[it,st,rt]);return[rt,reactExports.useMemo(()=>function({children:ct}){return e$2.createElement(f$2.Provider,{value:lt},ct)},[lt])]}let D$1=U$2(N$1),I$4=U$2(j),te=Object.assign(D$1,{Group:I$4});function i(nt,rt){return nt===rt&&(nt!==0||1/nt===1/rt)||nt!==nt&&rt!==rt}const d$3=typeof Object.is=="function"?Object.is:i,{useState:u$2,useEffect:h$2,useLayoutEffect:f$1,useDebugValue:p$1}=e$3;function y$1(nt,rt,it){const st=rt(),[{inst:lt},ct]=u$2({inst:{value:st,getSnapshot:rt}});return f$1(()=>{lt.value=st,lt.getSnapshot=rt,r$1(lt)&&ct({inst:lt})},[nt,st,rt]),h$2(()=>(r$1(lt)&&ct({inst:lt}),nt(()=>{r$1(lt)&&ct({inst:lt})})),[nt]),p$1(st),st}function r$1(nt){const rt=nt.getSnapshot,it=nt.value;try{const st=rt();return!d$3(it,st)}catch{return!0}}function t$1(nt,rt,it){return rt()}const r=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",s$1=!r,c$3=s$1?t$1:y$1,a$3="useSyncExternalStore"in e$3?(nt=>nt.useSyncExternalStore)(e$3):c$3;function S$2(nt){return a$3(nt.subscribe,nt.getSnapshot,nt.getSnapshot)}function a$2(nt,rt){let it=nt(),st=new Set;return{getSnapshot(){return it},subscribe(lt){return st.add(lt),()=>st.delete(lt)},dispatch(lt,...ct){let ut=rt[lt].call(it,...ct);ut&&(it=ut,st.forEach(dt=>dt()))}}}function c$2(){let nt;return{before({doc:rt}){var it;let st=rt.documentElement;nt=((it=rt.defaultView)!=null?it:window).innerWidth-st.clientWidth},after({doc:rt,d:it}){let st=rt.documentElement,lt=st.clientWidth-st.offsetWidth,ct=nt-lt;it.style(st,"paddingRight",`${ct}px`)}}}function d$2(){return t$5()?{before({doc:nt,d:rt,meta:it}){function st(lt){return it.containers.flatMap(ct=>ct()).some(ct=>ct.contains(lt))}rt.microTask(()=>{var lt;if(window.getComputedStyle(nt.documentElement).scrollBehavior!=="auto"){let dt=o$3();dt.style(nt.documentElement,"scrollBehavior","auto"),rt.add(()=>rt.microTask(()=>dt.dispose()))}let ct=(lt=window.scrollY)!=null?lt:window.pageYOffset,ut=null;rt.addEventListener(nt,"click",dt=>{if(dt.target instanceof HTMLElement)try{let ht=dt.target.closest("a");if(!ht)return;let{hash:ft}=new URL(ht.href),pt=nt.querySelector(ft);pt&&!st(pt)&&(ut=pt)}catch{}},!0),rt.addEventListener(nt,"touchstart",dt=>{if(dt.target instanceof HTMLElement)if(st(dt.target)){let ht=dt.target;for(;ht.parentElement&&st(ht.parentElement);)ht=ht.parentElement;rt.style(ht,"overscrollBehavior","contain")}else rt.style(dt.target,"touchAction","none")}),rt.addEventListener(nt,"touchmove",dt=>{if(dt.target instanceof HTMLElement)if(st(dt.target)){let ht=dt.target;for(;ht.parentElement&&ht.dataset.headlessuiPortal!==""&&!(ht.scrollHeight>ht.clientHeight||ht.scrollWidth>ht.clientWidth);)ht=ht.parentElement;ht.dataset.headlessuiPortal===""&&dt.preventDefault()}else dt.preventDefault()},{passive:!1}),rt.add(()=>{var dt;let ht=(dt=window.scrollY)!=null?dt:window.pageYOffset;ct!==ht&&window.scrollTo(0,ct),ut&&ut.isConnected&&(ut.scrollIntoView({block:"nearest"}),ut=null)})})}}:{}}function l$1(){return{before({doc:nt,d:rt}){rt.style(nt.documentElement,"overflow","hidden")}}}function m$1(nt){let rt={};for(let it of nt)Object.assign(rt,it(rt));return rt}let a$1=a$2(()=>new Map,{PUSH(nt,rt){var it;let st=(it=this.get(nt))!=null?it:{doc:nt,count:0,d:o$3(),meta:new Set};return st.count++,st.meta.add(rt),this.set(nt,st),this},POP(nt,rt){let it=this.get(nt);return it&&(it.count--,it.meta.delete(rt)),this},SCROLL_PREVENT({doc:nt,d:rt,meta:it}){let st={doc:nt,d:rt,meta:m$1(it)},lt=[d$2(),c$2(),l$1()];lt.forEach(({before:ct})=>ct==null?void 0:ct(st)),lt.forEach(({after:ct})=>ct==null?void 0:ct(st))},SCROLL_ALLOW({d:nt}){nt.dispose()},TEARDOWN({doc:nt}){this.delete(nt)}});a$1.subscribe(()=>{let nt=a$1.getSnapshot(),rt=new Map;for(let[it]of nt)rt.set(it,it.documentElement.style.overflow);for(let it of nt.values()){let st=rt.get(it.doc)==="hidden",lt=it.count!==0;(lt&&!st||!lt&&st)&&a$1.dispatch(it.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",it),it.count===0&&a$1.dispatch("TEARDOWN",it)}});function p(nt,rt,it){let st=S$2(a$1),lt=nt?st.get(nt):void 0,ct=lt?lt.count>0:!1;return l$5(()=>{if(!(!nt||!rt))return a$1.dispatch("PUSH",nt,it),()=>a$1.dispatch("POP",nt,it)},[rt,nt]),ct}let u$1=new Map,t=new Map;function b$4(nt,rt=!0){l$5(()=>{var it;if(!rt)return;let st=typeof nt=="function"?nt():nt.current;if(!st)return;function lt(){var ut;if(!st)return;let dt=(ut=t.get(st))!=null?ut:1;if(dt===1?t.delete(st):t.set(st,dt-1),dt!==1)return;let ht=u$1.get(st);ht&&(ht["aria-hidden"]===null?st.removeAttribute("aria-hidden"):st.setAttribute("aria-hidden",ht["aria-hidden"]),st.inert=ht.inert,u$1.delete(st))}let ct=(it=t.get(st))!=null?it:0;return t.set(st,ct+1),ct!==0||(u$1.set(st,{"aria-hidden":st.getAttribute("aria-hidden"),inert:st.inert}),st.setAttribute("aria-hidden","true"),st.inert=!0),lt},[nt,rt])}function N({defaultContainers:nt=[],portals:rt,mainTreeNodeRef:it}={}){var st;let lt=reactExports.useRef((st=it==null?void 0:it.current)!=null?st:null),ct=n$2(lt),ut=o$4(()=>{var dt,ht,ft;let pt=[];for(let mt of nt)mt!==null&&(mt instanceof HTMLElement?pt.push(mt):"current"in mt&&mt.current instanceof HTMLElement&&pt.push(mt.current));if(rt!=null&&rt.current)for(let mt of rt.current)pt.push(mt);for(let mt of(dt=ct==null?void 0:ct.querySelectorAll("html > *, body > *"))!=null?dt:[])mt!==document.body&&mt!==document.head&&mt instanceof HTMLElement&&mt.id!=="headlessui-portal-root"&&(mt.contains(lt.current)||mt.contains((ft=(ht=lt.current)==null?void 0:ht.getRootNode())==null?void 0:ft.host)||pt.some(gt=>mt.contains(gt))||pt.push(mt));return pt});return{resolveContainers:ut,contains:o$4(dt=>ut().some(ht=>ht.contains(dt))),mainTreeNodeRef:lt,MainTreeNode:reactExports.useMemo(()=>function(){return it!=null?null:e$2.createElement(f$4,{features:s$4.Hidden,ref:lt})},[lt,it])}}function y(){let nt=reactExports.useRef(null);return{mainTreeNodeRef:nt,MainTreeNode:reactExports.useMemo(()=>function(){return e$2.createElement(f$4,{features:s$4.Hidden,ref:nt})},[nt])}}let a=reactExports.createContext(()=>{});a.displayName="StackContext";var s=(nt=>(nt[nt.Add=0]="Add",nt[nt.Remove=1]="Remove",nt))(s||{});function x$1(){return reactExports.useContext(a)}function b$3({children:nt,onUpdate:rt,type:it,element:st,enabled:lt}){let ct=x$1(),ut=o$4((...dt)=>{rt==null||rt(...dt),ct(...dt)});return l$5(()=>{let dt=lt===void 0||lt===!0;return dt&&ut(0,it,st),()=>{dt&&ut(1,it,st)}},[ut,it,st,lt]),e$2.createElement(a.Provider,{value:ut},nt)}let d$1=reactExports.createContext(null);function f(){let nt=reactExports.useContext(d$1);if(nt===null){let rt=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(rt,f),rt}return nt}function w$1(){let[nt,rt]=reactExports.useState([]);return[nt.length>0?nt.join(" "):void 0,reactExports.useMemo(()=>function(it){let st=o$4(ct=>(rt(ut=>[...ut,ct]),()=>rt(ut=>{let dt=ut.slice(),ht=dt.indexOf(ct);return ht!==-1&&dt.splice(ht,1),dt}))),lt=reactExports.useMemo(()=>({register:st,slot:it.slot,name:it.name,props:it.props}),[st,it.slot,it.name,it.props]);return e$2.createElement(d$1.Provider,{value:lt},it.children)},[rt])]}let I$3="p";function S$1(nt,rt){let it=I$7(),{id:st=`headlessui-description-${it}`,...lt}=nt,ct=f(),ut=y$2(rt);l$5(()=>ct.register(st),[st,ct.register]);let dt={ref:ut,...ct.props,id:st};return C$1({ourProps:dt,theirProps:lt,slot:ct.slot||{},defaultTag:I$3,name:ct.name||"Description"})}let h$1=U$2(S$1),G=Object.assign(h$1,{});var Me=(nt=>(nt[nt.Open=0]="Open",nt[nt.Closed=1]="Closed",nt))(Me||{}),we$1=(nt=>(nt[nt.SetTitleId=0]="SetTitleId",nt))(we$1||{});let He$2={0(nt,rt){return nt.titleId===rt.id?nt:{...nt,titleId:rt.id}}},I$2=reactExports.createContext(null);I$2.displayName="DialogContext";function b$2(nt){let rt=reactExports.useContext(I$2);if(rt===null){let it=new Error(`<${nt} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(it,b$2),it}return rt}function Be(nt,rt,it=()=>[document.body]){p(nt,rt,st=>{var lt;return{containers:[...(lt=st.containers)!=null?lt:[],it]}})}function Ge$1(nt,rt){return u$5(rt.type,He$2,nt,rt)}let Ne$2="div",Ue$1=O.RenderStrategy|O.Static;function We$1(nt,rt){let it=I$7(),{id:st=`headlessui-dialog-${it}`,open:lt,onClose:ct,initialFocus:ut,role:dt="dialog",__demoMode:ht=!1,...ft}=nt,[pt,mt]=reactExports.useState(0),gt=reactExports.useRef(!1);dt=function(){return dt==="dialog"||dt==="alertdialog"?dt:(gt.current||(gt.current=!0,console.warn(`Invalid role [${dt}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let xt=u$3();lt===void 0&&xt!==null&&(lt=(xt&d$4.Open)===d$4.Open);let yt=reactExports.useRef(null),vt=y$2(yt,rt),St=n$2(yt),wt=nt.hasOwnProperty("open")||xt!==null,Et=nt.hasOwnProperty("onClose");if(!wt&&!Et)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!wt)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!Et)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof lt!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${lt}`);if(typeof ct!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${ct}`);let Rt=lt?0:1,[Tt,It]=reactExports.useReducer(Ge$1,{titleId:null,descriptionId:null,panelRef:reactExports.createRef()}),At=o$4(()=>ct(!1)),Dt=o$4(_r=>It({type:0,id:_r})),jt=l$4()?ht?!1:Rt===0:!1,Ft=pt>1,Lt=reactExports.useContext(I$2)!==null,[Mt,Ot]=ee(),Nt={get current(){var _r;return(_r=Tt.panelRef.current)!=null?_r:yt.current}},{resolveContainers:$t,mainTreeNodeRef:Vt,MainTreeNode:Ut}=N({portals:Mt,defaultContainers:[Nt]}),zt=Ft?"parent":"leaf",Bt=xt!==null?(xt&d$4.Closing)===d$4.Closing:!1,Ht=Lt||Bt?!1:jt,Gt=reactExports.useCallback(()=>{var _r,fr;return(fr=Array.from((_r=St==null?void 0:St.querySelectorAll("body > *"))!=null?_r:[]).find(Nr=>Nr.id==="headlessui-portal-root"?!1:Nr.contains(Vt.current)&&Nr instanceof HTMLElement))!=null?fr:null},[Vt]);b$4(Gt,Ht);let Xt=Ft?!0:jt,Zt=reactExports.useCallback(()=>{var _r,fr;return(fr=Array.from((_r=St==null?void 0:St.querySelectorAll("[data-headlessui-portal]"))!=null?_r:[]).find(Nr=>Nr.contains(Vt.current)&&Nr instanceof HTMLElement))!=null?fr:null},[Vt]);b$4(Zt,Xt),y$3($t,At,!(!jt||Ft));let nr=!(Ft||Rt!==0);E(St==null?void 0:St.defaultView,"keydown",_r=>{nr&&(_r.defaultPrevented||_r.key===o.Escape&&(_r.preventDefault(),_r.stopPropagation(),At()))}),Be(St,!(Bt||Rt!==0||Lt),$t),reactExports.useEffect(()=>{if(Rt!==0||!yt.current)return;let _r=new ResizeObserver(fr=>{for(let Nr of fr){let Tr=Nr.target.getBoundingClientRect();Tr.x===0&&Tr.y===0&&Tr.width===0&&Tr.height===0&&At()}});return _r.observe(yt.current),()=>_r.disconnect()},[Rt,yt,At]);let[yr,Cr]=w$1(),Sr=reactExports.useMemo(()=>[{dialogState:Rt,close:At,setTitleId:Dt},Tt],[Rt,Tt,At,Dt]),xr=reactExports.useMemo(()=>({open:Rt===0}),[Rt]),gr={ref:vt,id:st,role:dt,"aria-modal":Rt===0?!0:void 0,"aria-labelledby":Tt.titleId,"aria-describedby":yr};return e$2.createElement(b$3,{type:"Dialog",enabled:Rt===0,element:yt,onUpdate:o$4((_r,fr)=>{fr==="Dialog"&&u$5(_r,{[s.Add]:()=>mt(Nr=>Nr+1),[s.Remove]:()=>mt(Nr=>Nr-1)})})},e$2.createElement(l$2,{force:!0},e$2.createElement(te,null,e$2.createElement(I$2.Provider,{value:Sr},e$2.createElement(te.Group,{target:yt},e$2.createElement(l$2,{force:!1},e$2.createElement(Cr,{slot:xr,name:"Dialog.Description"},e$2.createElement(de,{initialFocus:ut,containers:$t,features:jt?u$5(zt,{parent:de.features.RestoreFocus,leaf:de.features.All&~de.features.FocusLock}):de.features.None},e$2.createElement(Ot,null,C$1({ourProps:gr,theirProps:ft,slot:xr,defaultTag:Ne$2,features:Ue$1,visible:Rt===0,name:"Dialog"}))))))))),e$2.createElement(Ut,null))}let $e$1="div";function Ye$1(nt,rt){let it=I$7(),{id:st=`headlessui-dialog-overlay-${it}`,...lt}=nt,[{dialogState:ct,close:ut}]=b$2("Dialog.Overlay"),dt=y$2(rt),ht=o$4(pt=>{if(pt.target===pt.currentTarget){if(r$2(pt.currentTarget))return pt.preventDefault();pt.preventDefault(),pt.stopPropagation(),ut()}}),ft=reactExports.useMemo(()=>({open:ct===0}),[ct]);return C$1({ourProps:{ref:dt,id:st,"aria-hidden":!0,onClick:ht},theirProps:lt,slot:ft,defaultTag:$e$1,name:"Dialog.Overlay"})}let je$1="div";function Je$1(nt,rt){let it=I$7(),{id:st=`headlessui-dialog-backdrop-${it}`,...lt}=nt,[{dialogState:ct},ut]=b$2("Dialog.Backdrop"),dt=y$2(rt);reactExports.useEffect(()=>{if(ut.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[ut.panelRef]);let ht=reactExports.useMemo(()=>({open:ct===0}),[ct]);return e$2.createElement(l$2,{force:!0},e$2.createElement(te,null,C$1({ourProps:{ref:dt,id:st,"aria-hidden":!0},theirProps:lt,slot:ht,defaultTag:je$1,name:"Dialog.Backdrop"})))}let Xe$1="div";function Ke$1(nt,rt){let it=I$7(),{id:st=`headlessui-dialog-panel-${it}`,...lt}=nt,[{dialogState:ct},ut]=b$2("Dialog.Panel"),dt=y$2(rt,ut.panelRef),ht=reactExports.useMemo(()=>({open:ct===0}),[ct]),ft=o$4(pt=>{pt.stopPropagation()});return C$1({ourProps:{ref:dt,id:st,onClick:ft},theirProps:lt,slot:ht,defaultTag:Xe$1,name:"Dialog.Panel"})}let Ve$1="h2";function qe$2(nt,rt){let it=I$7(),{id:st=`headlessui-dialog-title-${it}`,...lt}=nt,[{dialogState:ct,setTitleId:ut}]=b$2("Dialog.Title"),dt=y$2(rt);reactExports.useEffect(()=>(ut(st),()=>ut(null)),[st,ut]);let ht=reactExports.useMemo(()=>({open:ct===0}),[ct]);return C$1({ourProps:{ref:dt,id:st},theirProps:lt,slot:ht,defaultTag:Ve$1,name:"Dialog.Title"})}let ze$1=U$2(We$1),Qe$1=U$2(Je$1),Ze$1=U$2(Ke$1),et$1=U$2(Ye$1),tt$1=U$2(qe$2),_t=Object.assign(ze$1,{Backdrop:Qe$1,Panel:Ze$1,Overlay:et$1,Title:tt$1,Description:G});var he=(nt=>(nt[nt.Open=0]="Open",nt[nt.Closed=1]="Closed",nt))(he||{}),He$1=(nt=>(nt[nt.TogglePopover=0]="TogglePopover",nt[nt.ClosePopover=1]="ClosePopover",nt[nt.SetButton=2]="SetButton",nt[nt.SetButtonId=3]="SetButtonId",nt[nt.SetPanel=4]="SetPanel",nt[nt.SetPanelId=5]="SetPanelId",nt))(He$1||{});let Ge={0:nt=>{let rt={...nt,popoverState:u$5(nt.popoverState,{0:1,1:0})};return rt.popoverState===0&&(rt.__demoMode=!1),rt},1(nt){return nt.popoverState===1?nt:{...nt,popoverState:1}},2(nt,rt){return nt.button===rt.button?nt:{...nt,button:rt.button}},3(nt,rt){return nt.buttonId===rt.buttonId?nt:{...nt,buttonId:rt.buttonId}},4(nt,rt){return nt.panel===rt.panel?nt:{...nt,panel:rt.panel}},5(nt,rt){return nt.panelId===rt.panelId?nt:{...nt,panelId:rt.panelId}}},ue$1=reactExports.createContext(null);ue$1.displayName="PopoverContext";function oe(nt){let rt=reactExports.useContext(ue$1);if(rt===null){let it=new Error(`<${nt} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(it,oe),it}return rt}let ie=reactExports.createContext(null);ie.displayName="PopoverAPIContext";function fe(nt){let rt=reactExports.useContext(ie);if(rt===null){let it=new Error(`<${nt} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(it,fe),it}return rt}let Pe$1=reactExports.createContext(null);Pe$1.displayName="PopoverGroupContext";function Ee(){return reactExports.useContext(Pe$1)}let re=reactExports.createContext(null);re.displayName="PopoverPanelContext";function Ne$1(){return reactExports.useContext(re)}function ke(nt,rt){return u$5(rt.type,Ge,nt,rt)}let we="div";function Ue(nt,rt){var it;let{__demoMode:st=!1,...lt}=nt,ct=reactExports.useRef(null),ut=y$2(rt,T$1(Ut=>{ct.current=Ut})),dt=reactExports.useRef([]),ht=reactExports.useReducer(ke,{__demoMode:st,popoverState:st?0:1,buttons:dt,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:reactExports.createRef(),afterPanelSentinel:reactExports.createRef()}),[{popoverState:ft,button:pt,buttonId:mt,panel:gt,panelId:xt,beforePanelSentinel:yt,afterPanelSentinel:vt},St]=ht,wt=n$2((it=ct.current)!=null?it:pt),Et=reactExports.useMemo(()=>{if(!pt||!gt)return!1;for(let Zt of document.querySelectorAll("body > *"))if(Number(Zt==null?void 0:Zt.contains(pt))^Number(Zt==null?void 0:Zt.contains(gt)))return!0;let Ut=f$5(),zt=Ut.indexOf(pt),Bt=(zt+Ut.length-1)%Ut.length,Ht=(zt+1)%Ut.length,Gt=Ut[Bt],Xt=Ut[Ht];return!gt.contains(Gt)&&!gt.contains(Xt)},[pt,gt]),Rt=s$7(mt),Tt=s$7(xt),It=reactExports.useMemo(()=>({buttonId:Rt,panelId:Tt,close:()=>St({type:1})}),[Rt,Tt,St]),At=Ee(),Dt=At==null?void 0:At.registerPopover,jt=o$4(()=>{var Ut;return(Ut=At==null?void 0:At.isFocusWithinPopoverGroup())!=null?Ut:(wt==null?void 0:wt.activeElement)&&((pt==null?void 0:pt.contains(wt.activeElement))||(gt==null?void 0:gt.contains(wt.activeElement)))});reactExports.useEffect(()=>Dt==null?void 0:Dt(It),[Dt,It]);let[Ft,Lt]=ee(),Mt=N({mainTreeNodeRef:At==null?void 0:At.mainTreeNodeRef,portals:Ft,defaultContainers:[pt,gt]});E(wt==null?void 0:wt.defaultView,"focus",Ut=>{var zt,Bt,Ht,Gt;Ut.target!==window&&Ut.target instanceof HTMLElement&&ft===0&&(jt()||pt&&gt&&(Mt.contains(Ut.target)||(Bt=(zt=yt.current)==null?void 0:zt.contains)!=null&&Bt.call(zt,Ut.target)||(Gt=(Ht=vt.current)==null?void 0:Ht.contains)!=null&&Gt.call(Ht,Ut.target)||St({type:1})))},!0),y$3(Mt.resolveContainers,(Ut,zt)=>{St({type:1}),h$3(zt,T$3.Loose)||(Ut.preventDefault(),pt==null||pt.focus())},ft===0);let Ot=o$4(Ut=>{St({type:1});let zt=Ut?Ut instanceof HTMLElement?Ut:"current"in Ut&&Ut.current instanceof HTMLElement?Ut.current:pt:pt;zt==null||zt.focus()}),Nt=reactExports.useMemo(()=>({close:Ot,isPortalled:Et}),[Ot,Et]),$t=reactExports.useMemo(()=>({open:ft===0,close:Ot}),[ft,Ot]),Vt={ref:ut};return e$2.createElement(re.Provider,{value:null},e$2.createElement(ue$1.Provider,{value:ht},e$2.createElement(ie.Provider,{value:Nt},e$2.createElement(s$3,{value:u$5(ft,{0:d$4.Open,1:d$4.Closed})},e$2.createElement(Lt,null,C$1({ourProps:Vt,theirProps:lt,slot:$t,defaultTag:we,name:"Popover"}),e$2.createElement(Mt.MainTreeNode,null))))))}let We="button";function Ke(nt,rt){let it=I$7(),{id:st=`headlessui-popover-button-${it}`,...lt}=nt,[ct,ut]=oe("Popover.Button"),{isPortalled:dt}=fe("Popover.Button"),ht=reactExports.useRef(null),ft=`headlessui-focus-sentinel-${I$7()}`,pt=Ee(),mt=pt==null?void 0:pt.closeOthers,gt=Ne$1()!==null;reactExports.useEffect(()=>{if(!gt)return ut({type:3,buttonId:st}),()=>{ut({type:3,buttonId:null})}},[gt,st,ut]);let[xt]=reactExports.useState(()=>Symbol()),yt=y$2(ht,rt,gt?null:Mt=>{if(Mt)ct.buttons.current.push(xt);else{let Ot=ct.buttons.current.indexOf(xt);Ot!==-1&&ct.buttons.current.splice(Ot,1)}ct.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),Mt&&ut({type:2,button:Mt})}),vt=y$2(ht,rt),St=n$2(ht),wt=o$4(Mt=>{var Ot,Nt,$t;if(gt){if(ct.popoverState===1)return;switch(Mt.key){case o.Space:case o.Enter:Mt.preventDefault(),(Nt=(Ot=Mt.target).click)==null||Nt.call(Ot),ut({type:1}),($t=ct.button)==null||$t.focus();break}}else switch(Mt.key){case o.Space:case o.Enter:Mt.preventDefault(),Mt.stopPropagation(),ct.popoverState===1&&(mt==null||mt(ct.buttonId)),ut({type:0});break;case o.Escape:if(ct.popoverState!==0)return mt==null?void 0:mt(ct.buttonId);if(!ht.current||St!=null&&St.activeElement&&!ht.current.contains(St.activeElement))return;Mt.preventDefault(),Mt.stopPropagation(),ut({type:1});break}}),Et=o$4(Mt=>{gt||Mt.key===o.Space&&Mt.preventDefault()}),Rt=o$4(Mt=>{var Ot,Nt;r$2(Mt.currentTarget)||nt.disabled||(gt?(ut({type:1}),(Ot=ct.button)==null||Ot.focus()):(Mt.preventDefault(),Mt.stopPropagation(),ct.popoverState===1&&(mt==null||mt(ct.buttonId)),ut({type:0}),(Nt=ct.button)==null||Nt.focus()))}),Tt=o$4(Mt=>{Mt.preventDefault(),Mt.stopPropagation()}),It=ct.popoverState===0,At=reactExports.useMemo(()=>({open:It}),[It]),Dt=T$2(nt,ht),jt=gt?{ref:vt,type:Dt,onKeyDown:wt,onClick:Rt}:{ref:yt,id:ct.buttonId,type:Dt,"aria-expanded":ct.popoverState===0,"aria-controls":ct.panel?ct.panelId:void 0,onKeyDown:wt,onKeyUp:Et,onClick:Rt,onMouseDown:Tt},Ft=n(),Lt=o$4(()=>{let Mt=ct.panel;if(!Mt)return;function Ot(){u$5(Ft.current,{[s$2.Forwards]:()=>O$1(Mt,M$3.First),[s$2.Backwards]:()=>O$1(Mt,M$3.Last)})===N$2.Error&&O$1(f$5().filter(Nt=>Nt.dataset.headlessuiFocusGuard!=="true"),u$5(Ft.current,{[s$2.Forwards]:M$3.Next,[s$2.Backwards]:M$3.Previous}),{relativeTo:ct.button})}Ot()});return e$2.createElement(e$2.Fragment,null,C$1({ourProps:jt,theirProps:lt,slot:At,defaultTag:We,name:"Popover.Button"}),It&&!gt&&dt&&e$2.createElement(f$4,{id:ft,features:s$4.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:Lt}))}let je="div",Ve=O.RenderStrategy|O.Static;function $e(nt,rt){let it=I$7(),{id:st=`headlessui-popover-overlay-${it}`,...lt}=nt,[{popoverState:ct},ut]=oe("Popover.Overlay"),dt=y$2(rt),ht=u$3(),ft=ht!==null?(ht&d$4.Open)===d$4.Open:ct===0,pt=o$4(gt=>{if(r$2(gt.currentTarget))return gt.preventDefault();ut({type:1})}),mt=reactExports.useMemo(()=>({open:ct===0}),[ct]);return C$1({ourProps:{ref:dt,id:st,"aria-hidden":!0,onClick:pt},theirProps:lt,slot:mt,defaultTag:je,features:Ve,visible:ft,name:"Popover.Overlay"})}let Je="div",Xe=O.RenderStrategy|O.Static;function Ye(nt,rt){let it=I$7(),{id:st=`headlessui-popover-panel-${it}`,focus:lt=!1,...ct}=nt,[ut,dt]=oe("Popover.Panel"),{close:ht,isPortalled:ft}=fe("Popover.Panel"),pt=`headlessui-focus-sentinel-before-${I$7()}`,mt=`headlessui-focus-sentinel-after-${I$7()}`,gt=reactExports.useRef(null),xt=y$2(gt,rt,jt=>{dt({type:4,panel:jt})}),yt=n$2(gt),vt=I$5();l$5(()=>(dt({type:5,panelId:st}),()=>{dt({type:5,panelId:null})}),[st,dt]);let St=u$3(),wt=St!==null?(St&d$4.Open)===d$4.Open:ut.popoverState===0,Et=o$4(jt=>{var Ft;switch(jt.key){case o.Escape:if(ut.popoverState!==0||!gt.current||yt!=null&&yt.activeElement&&!gt.current.contains(yt.activeElement))return;jt.preventDefault(),jt.stopPropagation(),dt({type:1}),(Ft=ut.button)==null||Ft.focus();break}});reactExports.useEffect(()=>{var jt;nt.static||ut.popoverState===1&&((jt=nt.unmount)==null||jt)&&dt({type:4,panel:null})},[ut.popoverState,nt.unmount,nt.static,dt]),reactExports.useEffect(()=>{if(ut.__demoMode||!lt||ut.popoverState!==0||!gt.current)return;let jt=yt==null?void 0:yt.activeElement;gt.current.contains(jt)||O$1(gt.current,M$3.First)},[ut.__demoMode,lt,gt,ut.popoverState]);let Rt=reactExports.useMemo(()=>({open:ut.popoverState===0,close:ht}),[ut,ht]),Tt={ref:xt,id:st,onKeyDown:Et,onBlur:lt&&ut.popoverState===0?jt=>{var Ft,Lt,Mt,Ot,Nt;let $t=jt.relatedTarget;$t&&gt.current&&((Ft=gt.current)!=null&&Ft.contains($t)||(dt({type:1}),((Mt=(Lt=ut.beforePanelSentinel.current)==null?void 0:Lt.contains)!=null&&Mt.call(Lt,$t)||(Nt=(Ot=ut.afterPanelSentinel.current)==null?void 0:Ot.contains)!=null&&Nt.call(Ot,$t))&&$t.focus({preventScroll:!0})))}:void 0,tabIndex:-1},It=n(),At=o$4(()=>{let jt=gt.current;if(!jt)return;function Ft(){u$5(It.current,{[s$2.Forwards]:()=>{var Lt;O$1(jt,M$3.First)===N$2.Error&&((Lt=ut.afterPanelSentinel.current)==null||Lt.focus())},[s$2.Backwards]:()=>{var Lt;(Lt=ut.button)==null||Lt.focus({preventScroll:!0})}})}Ft()}),Dt=o$4(()=>{let jt=gt.current;if(!jt)return;function Ft(){u$5(It.current,{[s$2.Forwards]:()=>{var Lt;if(!ut.button)return;let Mt=f$5(),Ot=Mt.indexOf(ut.button),Nt=Mt.slice(0,Ot+1),$t=[...Mt.slice(Ot+1),...Nt];for(let Vt of $t.slice())if(Vt.dataset.headlessuiFocusGuard==="true"||(Lt=ut.panel)!=null&&Lt.contains(Vt)){let Ut=$t.indexOf(Vt);Ut!==-1&&$t.splice(Ut,1)}O$1($t,M$3.First,{sorted:!1})},[s$2.Backwards]:()=>{var Lt;O$1(jt,M$3.Previous)===N$2.Error&&((Lt=ut.button)==null||Lt.focus())}})}Ft()});return e$2.createElement(re.Provider,{value:st},wt&&ft&&e$2.createElement(f$4,{id:pt,ref:ut.beforePanelSentinel,features:s$4.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:At}),C$1({mergeRefs:vt,ourProps:Tt,theirProps:ct,slot:Rt,defaultTag:Je,features:Xe,visible:wt,name:"Popover.Panel"}),wt&&ft&&e$2.createElement(f$4,{id:mt,ref:ut.afterPanelSentinel,features:s$4.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:Dt}))}let qe$1="div";function ze(nt,rt){let it=reactExports.useRef(null),st=y$2(it,rt),[lt,ct]=reactExports.useState([]),ut=y(),dt=o$4(vt=>{ct(St=>{let wt=St.indexOf(vt);if(wt!==-1){let Et=St.slice();return Et.splice(wt,1),Et}return St})}),ht=o$4(vt=>(ct(St=>[...St,vt]),()=>dt(vt))),ft=o$4(()=>{var vt;let St=o$1(it);if(!St)return!1;let wt=St.activeElement;return(vt=it.current)!=null&&vt.contains(wt)?!0:lt.some(Et=>{var Rt,Tt;return((Rt=St.getElementById(Et.buttonId.current))==null?void 0:Rt.contains(wt))||((Tt=St.getElementById(Et.panelId.current))==null?void 0:Tt.contains(wt))})}),pt=o$4(vt=>{for(let St of lt)St.buttonId.current!==vt&&St.close()}),mt=reactExports.useMemo(()=>({registerPopover:ht,unregisterPopover:dt,isFocusWithinPopoverGroup:ft,closeOthers:pt,mainTreeNodeRef:ut.mainTreeNodeRef}),[ht,dt,ft,pt,ut.mainTreeNodeRef]),gt=reactExports.useMemo(()=>({}),[]),xt=nt,yt={ref:st};return e$2.createElement(Pe$1.Provider,{value:mt},C$1({ourProps:yt,theirProps:xt,slot:gt,defaultTag:qe$1,name:"Popover.Group"}),e$2.createElement(ut.MainTreeNode,null))}let Qe=U$2(Ue),Ze=U$2(Ke),et=U$2($e),tt=U$2(Ye),ot=U$2(ze),Ct=Object.assign(Qe,{Button:Ze,Overlay:et,Panel:tt,Group:ot});function c$1(nt=0){let[rt,it]=reactExports.useState(nt),st=f$3(),lt=reactExports.useCallback(ht=>{st.current&&it(ft=>ft|ht)},[rt,st]),ct=reactExports.useCallback(ht=>!!(rt&ht),[rt]),ut=reactExports.useCallback(ht=>{st.current&&it(ft=>ft&~ht)},[it,st]),dt=reactExports.useCallback(ht=>{st.current&&it(ft=>ft^ht)},[it]);return{flags:rt,addFlag:lt,hasFlag:ct,removeFlag:ut,toggleFlag:dt}}function l(nt){let rt={called:!1};return(...it)=>{if(!rt.called)return rt.called=!0,nt(...it)}}function g(nt,...rt){nt&&rt.length>0&&nt.classList.add(...rt)}function v$1(nt,...rt){nt&&rt.length>0&&nt.classList.remove(...rt)}function b$1(nt,rt){let it=o$3();if(!nt)return it.dispose;let{transitionDuration:st,transitionDelay:lt}=getComputedStyle(nt),[ct,ut]=[st,lt].map(ht=>{let[ft=0]=ht.split(",").filter(Boolean).map(pt=>pt.includes("ms")?parseFloat(pt):parseFloat(pt)*1e3).sort((pt,mt)=>mt-pt);return ft}),dt=ct+ut;if(dt!==0){it.group(ft=>{ft.setTimeout(()=>{rt(),ft.dispose()},dt),ft.addEventListener(nt,"transitionrun",pt=>{pt.target===pt.currentTarget&&ft.dispose()})});let ht=it.addEventListener(nt,"transitionend",ft=>{ft.target===ft.currentTarget&&(rt(),ht())})}else rt();return it.add(()=>rt()),it.dispose}function M$2(nt,rt,it,st){let lt=it?"enter":"leave",ct=o$3(),ut=st!==void 0?l(st):()=>{};lt==="enter"&&(nt.removeAttribute("hidden"),nt.style.display="");let dt=u$5(lt,{enter:()=>rt.enter,leave:()=>rt.leave}),ht=u$5(lt,{enter:()=>rt.enterTo,leave:()=>rt.leaveTo}),ft=u$5(lt,{enter:()=>rt.enterFrom,leave:()=>rt.leaveFrom});return v$1(nt,...rt.base,...rt.enter,...rt.enterTo,...rt.enterFrom,...rt.leave,...rt.leaveFrom,...rt.leaveTo,...rt.entered),g(nt,...rt.base,...dt,...ft),ct.nextFrame(()=>{v$1(nt,...rt.base,...dt,...ft),g(nt,...rt.base,...dt,...ht),b$1(nt,()=>(v$1(nt,...rt.base,...dt),g(nt,...rt.base,...rt.entered),ut()))}),ct.dispose}function D({immediate:nt,container:rt,direction:it,classes:st,onStart:lt,onStop:ct}){let ut=f$3(),dt=p$3(),ht=s$7(it);l$5(()=>{nt&&(ht.current="enter")},[nt]),l$5(()=>{let ft=o$3();dt.add(ft.dispose);let pt=rt.current;if(pt&&ht.current!=="idle"&&ut.current)return ft.dispose(),lt.current(ht.current),ft.add(M$2(pt,st.current,ht.current==="enter",()=>{ft.dispose(),ct.current(ht.current)})),ft.dispose},[it])}function S(nt=""){return nt.split(/\s+/).filter(rt=>rt.length>1)}let I$1=reactExports.createContext(null);I$1.displayName="TransitionContext";var Se=(nt=>(nt.Visible="visible",nt.Hidden="hidden",nt))(Se||{});function ye(){let nt=reactExports.useContext(I$1);if(nt===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return nt}function xe(){let nt=reactExports.useContext(M$1);if(nt===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return nt}let M$1=reactExports.createContext(null);M$1.displayName="NestingContext";function U(nt){return"children"in nt?U(nt.children):nt.current.filter(({el:rt})=>rt.current!==null).filter(({state:rt})=>rt==="visible").length>0}function se(nt,rt){let it=s$7(nt),st=reactExports.useRef([]),lt=f$3(),ct=p$3(),ut=o$4((xt,yt=v$2.Hidden)=>{let vt=st.current.findIndex(({el:St})=>St===xt);vt!==-1&&(u$5(yt,{[v$2.Unmount](){st.current.splice(vt,1)},[v$2.Hidden](){st.current[vt].state="hidden"}}),ct.microTask(()=>{var St;!U(st)&&lt.current&&((St=it.current)==null||St.call(it))}))}),dt=o$4(xt=>{let yt=st.current.find(({el:vt})=>vt===xt);return yt?yt.state!=="visible"&&(yt.state="visible"):st.current.push({el:xt,state:"visible"}),()=>ut(xt,v$2.Unmount)}),ht=reactExports.useRef([]),ft=reactExports.useRef(Promise.resolve()),pt=reactExports.useRef({enter:[],leave:[],idle:[]}),mt=o$4((xt,yt,vt)=>{ht.current.splice(0),rt&&(rt.chains.current[yt]=rt.chains.current[yt].filter(([St])=>St!==xt)),rt==null||rt.chains.current[yt].push([xt,new Promise(St=>{ht.current.push(St)})]),rt==null||rt.chains.current[yt].push([xt,new Promise(St=>{Promise.all(pt.current[yt].map(([wt,Et])=>Et)).then(()=>St())})]),yt==="enter"?ft.current=ft.current.then(()=>rt==null?void 0:rt.wait.current).then(()=>vt(yt)):vt(yt)}),gt=o$4((xt,yt,vt)=>{Promise.all(pt.current[yt].splice(0).map(([St,wt])=>wt)).then(()=>{var St;(St=ht.current.shift())==null||St()}).then(()=>vt(yt))});return reactExports.useMemo(()=>({children:st,register:dt,unregister:ut,onStart:mt,onStop:gt,wait:ft,chains:pt}),[dt,ut,st,mt,gt,pt,ft])}function Ne(){}let Pe=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function ae(nt){var rt;let it={};for(let st of Pe)it[st]=(rt=nt[st])!=null?rt:Ne;return it}function Re(nt){let rt=reactExports.useRef(ae(nt));return reactExports.useEffect(()=>{rt.current=ae(nt)},[nt]),rt}let De="div",le=O.RenderStrategy;function He(nt,rt){var it,st;let{beforeEnter:lt,afterEnter:ct,beforeLeave:ut,afterLeave:dt,enter:ht,enterFrom:ft,enterTo:pt,entered:mt,leave:gt,leaveFrom:xt,leaveTo:yt,...vt}=nt,St=reactExports.useRef(null),wt=y$2(St,rt),Et=(it=vt.unmount)==null||it?v$2.Unmount:v$2.Hidden,{show:Rt,appear:Tt,initial:It}=ye(),[At,Dt]=reactExports.useState(Rt?"visible":"hidden"),jt=xe(),{register:Ft,unregister:Lt}=jt;reactExports.useEffect(()=>Ft(St),[Ft,St]),reactExports.useEffect(()=>{if(Et===v$2.Hidden&&St.current){if(Rt&&At!=="visible"){Dt("visible");return}return u$5(At,{hidden:()=>Lt(St),visible:()=>Ft(St)})}},[At,St,Ft,Lt,Rt,Et]);let Mt=s$7({base:S(vt.className),enter:S(ht),enterFrom:S(ft),enterTo:S(pt),entered:S(mt),leave:S(gt),leaveFrom:S(xt),leaveTo:S(yt)}),Ot=Re({beforeEnter:lt,afterEnter:ct,beforeLeave:ut,afterLeave:dt}),Nt=l$4();reactExports.useEffect(()=>{if(Nt&&At==="visible"&&St.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[St,At,Nt]);let $t=It&&!Tt,Vt=Tt&&Rt&&It,Ut=!Nt||$t?"idle":Rt?"enter":"leave",zt=c$1(0),Bt=o$4(nr=>u$5(nr,{enter:()=>{zt.addFlag(d$4.Opening),Ot.current.beforeEnter()},leave:()=>{zt.addFlag(d$4.Closing),Ot.current.beforeLeave()},idle:()=>{}})),Ht=o$4(nr=>u$5(nr,{enter:()=>{zt.removeFlag(d$4.Opening),Ot.current.afterEnter()},leave:()=>{zt.removeFlag(d$4.Closing),Ot.current.afterLeave()},idle:()=>{}})),Gt=se(()=>{Dt("hidden"),Lt(St)},jt),Xt=reactExports.useRef(!1);D({immediate:Vt,container:St,classes:Mt,direction:Ut,onStart:s$7(nr=>{Xt.current=!0,Gt.onStart(St,nr,Bt)}),onStop:s$7(nr=>{Xt.current=!1,Gt.onStop(St,nr,Ht),nr==="leave"&&!U(Gt)&&(Dt("hidden"),Lt(St))})});let Zt=vt,hr={ref:wt};return Vt?Zt={...Zt,className:t$4(vt.className,...Mt.current.enter,...Mt.current.enterFrom)}:Xt.current&&(Zt.className=t$4(vt.className,(st=St.current)==null?void 0:st.className),Zt.className===""&&delete Zt.className),e$2.createElement(M$1.Provider,{value:Gt},e$2.createElement(s$3,{value:u$5(At,{visible:d$4.Open,hidden:d$4.Closed})|zt.flags},C$1({ourProps:hr,theirProps:Zt,defaultTag:De,features:le,visible:At==="visible",name:"Transition.Child"})))}function Fe(nt,rt){let{show:it,appear:st=!1,unmount:lt=!0,...ct}=nt,ut=reactExports.useRef(null),dt=y$2(ut,rt);l$4();let ht=u$3();if(it===void 0&&ht!==null&&(it=(ht&d$4.Open)===d$4.Open),![!0,!1].includes(it))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[ft,pt]=reactExports.useState(it?"visible":"hidden"),mt=se(()=>{pt("hidden")}),[gt,xt]=reactExports.useState(!0),yt=reactExports.useRef([it]);l$5(()=>{gt!==!1&&yt.current[yt.current.length-1]!==it&&(yt.current.push(it),xt(!1))},[yt,it]);let vt=reactExports.useMemo(()=>({show:it,appear:st,initial:gt}),[it,st,gt]);reactExports.useEffect(()=>{if(it)pt("visible");else if(!U(mt))pt("hidden");else{let Rt=ut.current;if(!Rt)return;let Tt=Rt.getBoundingClientRect();Tt.x===0&&Tt.y===0&&Tt.width===0&&Tt.height===0&&pt("hidden")}},[it,mt]);let St={unmount:lt},wt=o$4(()=>{var Rt;gt&&xt(!1),(Rt=nt.beforeEnter)==null||Rt.call(nt)}),Et=o$4(()=>{var Rt;gt&&xt(!1),(Rt=nt.beforeLeave)==null||Rt.call(nt)});return e$2.createElement(M$1.Provider,{value:mt},e$2.createElement(I$1.Provider,{value:vt},C$1({ourProps:{...St,as:reactExports.Fragment,children:e$2.createElement(ue,{ref:dt,...St,...ct,beforeEnter:wt,beforeLeave:Et})},theirProps:{},defaultTag:reactExports.Fragment,features:le,visible:ft==="visible",name:"Transition"})))}function _e(nt,rt){let it=reactExports.useContext(I$1)!==null,st=u$3()!==null;return e$2.createElement(e$2.Fragment,null,!it&&st?e$2.createElement(q,{ref:rt,...nt}):e$2.createElement(ue,{ref:rt,...nt}))}let q=U$2(Fe),ue=U$2(He),Le=U$2(_e),qe=Object.assign(q,{Child:Le,Root:q});function useWindowSize(){const[nt,rt]=reactExports.useState({width:void 0,height:void 0});return reactExports.useEffect(()=>{function it(){rt({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",it),it(),()=>window.removeEventListener("resize",it)},[]),nt}const ConfirmBox=({successText:nt,rejectText:rt,onSuccess:it,open:st,onReject:lt,title:ct,subTitle:ut,subTitleColor:dt})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(qe,{appear:!0,show:st,as:reactExports.Fragment,children:jsxRuntimeExports.jsxs(_t,{as:"div",className:"relative z-10",onClose:()=>{},children:[jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-full text-center",children:jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:jsxRuntimeExports.jsxs(_t.Panel,{className:"w-11/12 max-w-md p-4 overflow-hidden text-left align-middle transition-all transform rounded shadow-xl bg-gray-750",children:[jsxRuntimeExports.jsx(_t.Title,{className:"text-base font-medium text-white ",children:ct}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx("p",{className:"text-base",style:{color:dt||"#9FA0A7"},children:ut})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end mt-6",children:[rt&&jsxRuntimeExports.jsx("button",{type:"button",className:"px-4 py-2 mr-2 text-sm font-medium text-white rounded hover:bg-gray-700 ",onClick:lt,children:rt}),jsxRuntimeExports.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-white bg-transparent border border-white rounded hover:bg-gray-700",onClick:it,children:nt})]})]})})})})]})})}),AudioAnalyser=({audioTrack:nt})=>{const rt=reactExports.useRef(),it=reactExports.useRef(),[st,lt]=reactExports.useState(null),ct=dt=>{const ht=new MediaStream([dt]),ft=new AudioContext,pt=ft.createMediaStreamSource(ht),mt=ft.createAnalyser();mt.fftSize=512,mt.minDecibels=-127,mt.maxDecibels=0,mt.smoothingTimeConstant=.4,pt.connect(mt);const gt=new Uint8Array(mt.frequencyBinCount),xt=()=>{mt.getByteFrequencyData(gt);const vt=gt.reduce((St,wt)=>St+wt)/gt.length;lt(vt)};it.current=setInterval(xt,100)},ut=()=>{clearInterval(it.current)};return reactExports.useEffect(()=>{rt.current=nt,nt?ct(nt):ut()},[nt]),jsxRuntimeExports.jsx("div",{className:"relative w-20 h-[100px]",children:[{borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:100,borderTopRightRadius:100,top:0,alignItems:"flex-end"},{borderBottomLeftRadius:100,borderBottomRightRadius:100,borderTopLeftRadius:0,borderTopRightRadius:0,top:"50%",alignItems:"flex-start"}].map(({alignItems:dt,top:ht,borderBottomLeftRadius:ft,borderBottomRightRadius:pt,borderTopLeftRadius:mt,borderTopRightRadius:gt},xt)=>jsxRuntimeExports.jsx("div",{className:"h-1/2 flex justify-evenly left-0 right-0 absolute",style:{alignItems:dt,top:ht},children:[40,70,100,100,70,40].map((yt,vt)=>jsxRuntimeExports.jsx("div",{style:{borderBottomLeftRadius:ft,borderBottomRightRadius:pt,borderTopLeftRadius:mt,borderTopRightRadius:gt,backgroundColor:"#1178F8",width:80/12,height:`${st/256*yt}%`,transition:"all 50ms",transitionTimingFunction:"ease-in"}},`audio_analyzer_j_${vt}`))},`audio_analyzer_i_${xt}`))})};function SettingDialogueBox({open:nt,onClose:rt,popupVideoPlayerRef:it,webcams:st,mics:lt,setting:ct,setSetting:ut,setSelectedMic:dt,setSelectedWebcam:ht,changeWebcam:ft,changeMic:pt,videoTrack:mt,audioTrack:gt}){const[xt,yt]=reactExports.useState(null),[vt,St]=reactExports.useState(null),[wt,Et]=reactExports.useState(!1),[Rt,Tt]=reactExports.useState(0),It=reactExports.useRef(),{width:At}=useWindowSize();reactExports.useEffect(()=>{It.current&&It.current.offsetHeight!==Rt&&Tt(It.current.offsetHeight)},[At]);const Dt=(Ft,Lt)=>{ut(Lt)},jt=()=>{rt()};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(qe,{appear:!0,show:nt,as:reactExports.Fragment,children:jsxRuntimeExports.jsxs(_t,{as:"div",className:"relative z-10",onClose:jt,children:[jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-full p-4 text-center",children:jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:jsxRuntimeExports.jsxs(_t.Panel,{className:"w-full max-w-2xl p-6 overflow-hidden text-center align-middle transition-all transform bg-gray-800 rounded shadow-xl",children:[jsxRuntimeExports.jsx(_t.Title,{as:"h5",className:"text-lg font-medium leading-6 text-white",children:"세팅"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-1  flex-col overflow-hidden xl:p-[2px] lg:p-[5px] p-[2px]",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2 focus-visible:border-none",children:jsxRuntimeExports.jsx("button",{onClick:()=>{jt()},className:"focus-visible:border-none",children:jsxRuntimeExports.jsx(XMarkIcon$3,{className:"w-6 h-6 text-white"})})})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center flex-1",children:jsxRuntimeExports.jsx("div",{className:"mt-10",children:jsxRuntimeExports.jsx("div",{children:[{value:"audio",label:"오디오"},{value:"video",label:"비디오"}].map(({value:Ft,label:Lt},Mt)=>Lt==="오디오"||Lt==="비디오"?jsxRuntimeExports.jsx("button",{className:`inline-flex items-center justify-center px-4 py-2 border ${ct===Ft?"bg-teal-700 border-transparent border-teal-700":"border-gray-100"}  text-sm font-medium rounded-sm text-white bg-gray-750`,onClick:()=>{Dt(null,Ft)},children:Lt},Mt):null)})})}),ct==="audio"?jsxRuntimeExports.jsx("div",{ref:It,children:jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsx("div",{className:"container grid grid-flow-col",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-12",children:[jsxRuntimeExports.jsx("div",{className:"col-span-7",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col mt-6",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-bold text-left text-white",children:"마이크"}),jsxRuntimeExports.jsx("div",{className:"w-full mt-4 text-left",children:jsxRuntimeExports.jsx(Ct,{className:"relative",children:({close:Ft})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Ct.Button,{className:"flex w-full ",children:jsxRuntimeExports.jsxs("button",{className:"flex items-center justify-between w-full px-2 py-3 text-white border border-gray-300 rounded",children:[xt||"선택",jsxRuntimeExports.jsx(ChevronDownIcon$3,{className:"w-4 h-4",style:{color:"white"}})]})}),jsxRuntimeExports.jsx(qe,{as:reactExports.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:jsxRuntimeExports.jsx(Ct.Panel,{children:jsxRuntimeExports.jsx("div",{className:"overflow-hidden rounded-lg shadow-lg ring-1 ring-black ring-opacity-5",children:jsxRuntimeExports.jsx("div",{className:"bg-gray-800 py-1",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:lt.map((Lt,Mt)=>(Lt==null?void 0:Lt.kind)==="audioinput"&&jsxRuntimeExports.jsx("div",{className:`px-3 py-1 my-1 pl-6 text-white text-left 
                                                            `,children:jsxRuntimeExports.jsx("button",{className:`flex flex-1 w-full 
                                                              `,value:Lt==null?void 0:Lt.deviceId,onClick:()=>{yt(Lt==null?void 0:Lt.label),dt(Ot=>({...Ot,id:Lt==null?void 0:Lt.deviceId})),pt(Lt==null?void 0:Lt.deviceId),Ft()},children:Lt!=null&&Lt.label?Lt==null?void 0:Lt.label:`Mic ${Mt+1}`},`mics_${Mt}`)}))})})})})})})]})})})]})}),jsxRuntimeExports.jsx("div",{class:"col-span-5",children:jsxRuntimeExports.jsx("div",{className:"relative p-4 mt-0 md:mt-10 ",children:jsxRuntimeExports.jsx("div",{className:"relative flex flex-1 w-1/2 overflow-hidden rounded md:w-full h-1/2 md:h-auto",style:{paddingTop:"56.25%"},children:jsxRuntimeExports.jsx("div",{className:"top-0 bottom-0 left-0 right-0 flex flex-col items-start overflow-hidden rounded-sm md:absolute",children:jsxRuntimeExports.jsx(AudioAnalyser,{audioTrack:gt})})})})})]})})})}):ct==="video"?jsxRuntimeExports.jsx("div",{ref:It,children:jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsx("div",{className:"container grid grid-flow-col",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-12",children:[jsxRuntimeExports.jsx("div",{className:"col-span-7",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col mt-6",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-bold text-left text-white",children:"카메라"}),jsxRuntimeExports.jsx("div",{className:"w-full mt-4 text-left",children:jsxRuntimeExports.jsx(Ct,{className:"relative",children:({close:Ft})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Ct.Button,{className:"flex w-full ",children:jsxRuntimeExports.jsxs("button",{className:"flex items-center justify-between w-full px-2 py-3 text-white border border-gray-300 rounded",children:[vt||"선택",jsxRuntimeExports.jsx(ChevronDownIcon$3,{className:"w-4 h-4",style:{color:"white"}})]})}),jsxRuntimeExports.jsx(qe,{as:reactExports.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:jsxRuntimeExports.jsx(Ct.Panel,{children:jsxRuntimeExports.jsx("div",{className:"overflow-hidden rounded-lg shadow-lg ring-1 ring-black ring-opacity-5",children:jsxRuntimeExports.jsx("div",{className:"bg-gray-800 py-1",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:st.map((Lt,Mt)=>(Lt==null?void 0:Lt.kind)==="videoinput"&&jsxRuntimeExports.jsxs("div",{className:`px-3 py-1 my-1 pl-6 text-white text-left 
                                                            `,children:[jsxRuntimeExports.jsx("button",{className:`flex flex-1 w-full 
                                                              `,value:Lt==null?void 0:Lt.deviceId,onClick:()=>{St(Lt==null?void 0:Lt.label),ht(Ot=>({...Ot,id:Lt==null?void 0:Lt.deviceId})),ft(Lt==null?void 0:Lt.deviceId),Ft()},children:(Lt==null?void 0:Lt.label)===""?`Webcam ${Mt+1}`:Lt==null?void 0:Lt.label},`webcam_${Mt}`),jsxRuntimeExports.jsx("hr",{})]}))})})})})})})]})})})]})}),jsxRuntimeExports.jsx("div",{className:"col-span-5",children:jsxRuntimeExports.jsx("div",{className:"relative p-4 mt-0 md:mt-10 ",children:jsxRuntimeExports.jsx("div",{className:"relative flex flex-1 w-1/2 overflow-hidden rounded md:w-full h-1/2 md:h-auto",style:{paddingTop:"56.25%"},children:jsxRuntimeExports.jsx("div",{className:"top-0 bottom-0 left-0 right-0 flex flex-col items-start overflow-hidden rounded-sm md:absolute",children:jsxRuntimeExports.jsx("video",{autoPlay:!0,playsInline:!0,muted:!0,ref:it,controls:!1,style:{backgroundColor:"#1c1c1c"},className:"rounded-md h-full w-full object-cover flip"})})})})})]})})})}):null]})]})})})})]})}),jsxRuntimeExports.jsx(ConfirmBox,{open:wt,title:"Mic or webcam not available",subTitle:"Please connect a mic and webcam to speak and share your video in the meeting. You can also join without them.",successText:"DISMISS",onSuccess:()=>{Et(!1)}})]})}var reactResponsive={exports:{}};(function(nt,rt){(function(st,lt){nt.exports=lt(reactExports)})(commonjsGlobal,it=>(()=>{var st={"./node_modules/css-mediaquery/index.js":(dt,ht)=>{ht.match=yt,ht.parse=vt;var ft=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,pt=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,mt=/^(?:(min|max)-)?(.+)/,gt=/(em|rem|px|cm|mm|in|pt|pc)?$/,xt=/(dpi|dpcm|dppx)?$/;function yt(Rt,Tt){return vt(Rt).some(function(It){var At=It.inverse,Dt=It.type==="all"||Tt.type===It.type;if(Dt&&At||!(Dt||At))return!1;var jt=It.expressions.every(function(Ft){var Lt=Ft.feature,Mt=Ft.modifier,Ot=Ft.value,Nt=Tt[Lt];if(!Nt)return!1;switch(Lt){case"orientation":case"scan":return Nt.toLowerCase()===Ot.toLowerCase();case"width":case"height":case"device-width":case"device-height":Ot=Et(Ot),Nt=Et(Nt);break;case"resolution":Ot=wt(Ot),Nt=wt(Nt);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":Ot=St(Ot),Nt=St(Nt);break;case"grid":case"color":case"color-index":case"monochrome":Ot=parseInt(Ot,10)||1,Nt=parseInt(Nt,10)||0;break}switch(Mt){case"min":return Nt>=Ot;case"max":return Nt<=Ot;default:return Nt===Ot}});return jt&&!At||!jt&&At})}function vt(Rt){return Rt.split(",").map(function(Tt){Tt=Tt.trim();var It=Tt.match(ft),At=It[1],Dt=It[2],jt=It[3]||"",Ft={};return Ft.inverse=!!At&&At.toLowerCase()==="not",Ft.type=Dt?Dt.toLowerCase():"all",jt=jt.match(/\([^\)]+\)/g)||[],Ft.expressions=jt.map(function(Lt){var Mt=Lt.match(pt),Ot=Mt[1].toLowerCase().match(mt);return{modifier:Ot[1],feature:Ot[2],value:Mt[2]}}),Ft})}function St(Rt){var Tt=Number(Rt),It;return Tt||(It=Rt.match(/^(\d+)\s*\/\s*(\d+)$/),Tt=It[1]/It[2]),Tt}function wt(Rt){var Tt=parseFloat(Rt),It=String(Rt).match(xt)[1];switch(It){case"dpcm":return Tt/2.54;case"dppx":return Tt*96;default:return Tt}}function Et(Rt){var Tt=parseFloat(Rt),It=String(Rt).match(gt)[1];switch(It){case"em":return Tt*16;case"rem":return Tt*16;case"cm":return Tt*96/2.54;case"mm":return Tt*96/2.54/10;case"in":return Tt*96;case"pt":return Tt*72;case"pc":return Tt*72/12;default:return Tt}}},"./node_modules/hyphenate-style-name/index.js":(dt,ht,ft)=>{ft.r(ht),ft.d(ht,{default:()=>vt});var pt=/[A-Z]/g,mt=/^ms-/,gt={};function xt(St){return"-"+St.toLowerCase()}function yt(St){if(gt.hasOwnProperty(St))return gt[St];var wt=St.replace(pt,xt);return gt[St]=mt.test(wt)?"-"+wt:wt}const vt=yt},"./node_modules/matchmediaquery/index.js":(dt,ht,ft)=>{var pt=ft("./node_modules/css-mediaquery/index.js").match,mt=typeof window<"u"?window.matchMedia:null;function gt(yt,vt,St){var wt=this;if(mt&&!St){var Et=mt.call(window,yt);this.matches=Et.matches,this.media=Et.media,Et.addListener(It)}else this.matches=pt(yt,vt),this.media=yt;this.addListener=Rt,this.removeListener=Tt,this.dispose=At;function Rt(Dt){Et&&Et.addListener(Dt)}function Tt(Dt){Et&&Et.removeListener(Dt)}function It(Dt){wt.matches=Dt.matches,wt.media=Dt.media}function At(){Et&&Et.removeListener(It)}}function xt(yt,vt,St){return new gt(yt,vt,St)}dt.exports=xt},"./node_modules/object-assign/index.js":dt=>{/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var ht=Object.getOwnPropertySymbols,ft=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable;function mt(xt){if(xt==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(xt)}function gt(){try{if(!Object.assign)return!1;var xt=new String("abc");if(xt[5]="de",Object.getOwnPropertyNames(xt)[0]==="5")return!1;for(var yt={},vt=0;vt<10;vt++)yt["_"+String.fromCharCode(vt)]=vt;var St=Object.getOwnPropertyNames(yt).map(function(Et){return yt[Et]});if(St.join("")!=="0123456789")return!1;var wt={};return"abcdefghijklmnopqrst".split("").forEach(function(Et){wt[Et]=Et}),Object.keys(Object.assign({},wt)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}dt.exports=gt()?Object.assign:function(xt,yt){for(var vt,St=mt(xt),wt,Et=1;Et<arguments.length;Et++){vt=Object(arguments[Et]);for(var Rt in vt)ft.call(vt,Rt)&&(St[Rt]=vt[Rt]);if(ht){wt=ht(vt);for(var Tt=0;Tt<wt.length;Tt++)pt.call(vt,wt[Tt])&&(St[wt[Tt]]=vt[wt[Tt]])}}return St}},"./node_modules/prop-types/checkPropTypes.js":(dt,ht,ft)=>{var pt=function(){};{var mt=ft("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),gt={},xt=ft("./node_modules/prop-types/lib/has.js");pt=function(vt){var St="Warning: "+vt;typeof console<"u"&&console.error(St);try{throw new Error(St)}catch{}}}function yt(vt,St,wt,Et,Rt){for(var Tt in vt)if(xt(vt,Tt)){var It;try{if(typeof vt[Tt]!="function"){var At=Error((Et||"React class")+": "+wt+" type `"+Tt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof vt[Tt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw At.name="Invariant Violation",At}It=vt[Tt](St,Tt,Et,wt,null,mt)}catch(jt){It=jt}if(It&&!(It instanceof Error)&&pt((Et||"React class")+": type specification of "+wt+" `"+Tt+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof It+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),It instanceof Error&&!(It.message in gt)){gt[It.message]=!0;var Dt=Rt?Rt():"";pt("Failed "+wt+" type: "+It.message+(Dt??""))}}}yt.resetWarningCache=function(){gt={}},dt.exports=yt},"./node_modules/prop-types/factoryWithTypeCheckers.js":(dt,ht,ft)=>{var pt=ft("./node_modules/react-is/index.js"),mt=ft("./node_modules/object-assign/index.js"),gt=ft("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),xt=ft("./node_modules/prop-types/lib/has.js"),yt=ft("./node_modules/prop-types/checkPropTypes.js"),vt=function(){};vt=function(wt){var Et="Warning: "+wt;typeof console<"u"&&console.error(Et);try{throw new Error(Et)}catch{}};function St(){return null}dt.exports=function(wt,Et){var Rt=typeof Symbol=="function"&&Symbol.iterator,Tt="@@iterator";function It(gr){var _r=gr&&(Rt&&gr[Rt]||gr[Tt]);if(typeof _r=="function")return _r}var At="<<anonymous>>",Dt={array:Mt("array"),bigint:Mt("bigint"),bool:Mt("boolean"),func:Mt("function"),number:Mt("number"),object:Mt("object"),string:Mt("string"),symbol:Mt("symbol"),any:Ot(),arrayOf:Nt,element:$t(),elementType:Vt(),instanceOf:Ut,node:Gt(),objectOf:Bt,oneOf:zt,oneOfType:Ht,shape:Zt,exact:hr};function jt(gr,_r){return gr===_r?gr!==0||1/gr===1/_r:gr!==gr&&_r!==_r}function Ft(gr,_r){this.message=gr,this.data=_r&&typeof _r=="object"?_r:{},this.stack=""}Ft.prototype=Error.prototype;function Lt(gr){var _r={},fr=0;function Nr(Hr,Vr,mn,tn,er,tr,vr){if(tn=tn||At,tr=tr||mn,vr!==gt){if(Et){var Fr=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw Fr.name="Invariant Violation",Fr}else if(typeof console<"u"){var Kr=tn+":"+mn;!_r[Kr]&&fr<3&&(vt("You are manually calling a React.PropTypes validation function for the `"+tr+"` prop on `"+tn+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),_r[Kr]=!0,fr++)}}return Vr[mn]==null?Hr?Vr[mn]===null?new Ft("The "+er+" `"+tr+"` is marked as required "+("in `"+tn+"`, but its value is `null`.")):new Ft("The "+er+" `"+tr+"` is marked as required in "+("`"+tn+"`, but its value is `undefined`.")):null:gr(Vr,mn,tn,er,tr)}var Tr=Nr.bind(null,!1);return Tr.isRequired=Nr.bind(null,!0),Tr}function Mt(gr){function _r(fr,Nr,Tr,Hr,Vr,mn){var tn=fr[Nr],er=yr(tn);if(er!==gr){var tr=Cr(tn);return new Ft("Invalid "+Hr+" `"+Vr+"` of type "+("`"+tr+"` supplied to `"+Tr+"`, expected ")+("`"+gr+"`."),{expectedType:gr})}return null}return Lt(_r)}function Ot(){return Lt(St)}function Nt(gr){function _r(fr,Nr,Tr,Hr,Vr){if(typeof gr!="function")return new Ft("Property `"+Vr+"` of component `"+Tr+"` has invalid PropType notation inside arrayOf.");var mn=fr[Nr];if(!Array.isArray(mn)){var tn=yr(mn);return new Ft("Invalid "+Hr+" `"+Vr+"` of type "+("`"+tn+"` supplied to `"+Tr+"`, expected an array."))}for(var er=0;er<mn.length;er++){var tr=gr(mn,er,Tr,Hr,Vr+"["+er+"]",gt);if(tr instanceof Error)return tr}return null}return Lt(_r)}function $t(){function gr(_r,fr,Nr,Tr,Hr){var Vr=_r[fr];if(!wt(Vr)){var mn=yr(Vr);return new Ft("Invalid "+Tr+" `"+Hr+"` of type "+("`"+mn+"` supplied to `"+Nr+"`, expected a single ReactElement."))}return null}return Lt(gr)}function Vt(){function gr(_r,fr,Nr,Tr,Hr){var Vr=_r[fr];if(!pt.isValidElementType(Vr)){var mn=yr(Vr);return new Ft("Invalid "+Tr+" `"+Hr+"` of type "+("`"+mn+"` supplied to `"+Nr+"`, expected a single ReactElement type."))}return null}return Lt(gr)}function Ut(gr){function _r(fr,Nr,Tr,Hr,Vr){if(!(fr[Nr]instanceof gr)){var mn=gr.name||At,tn=xr(fr[Nr]);return new Ft("Invalid "+Hr+" `"+Vr+"` of type "+("`"+tn+"` supplied to `"+Tr+"`, expected ")+("instance of `"+mn+"`."))}return null}return Lt(_r)}function zt(gr){if(!Array.isArray(gr))return arguments.length>1?vt("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):vt("Invalid argument supplied to oneOf, expected an array."),St;function _r(fr,Nr,Tr,Hr,Vr){for(var mn=fr[Nr],tn=0;tn<gr.length;tn++)if(jt(mn,gr[tn]))return null;var er=JSON.stringify(gr,function(vr,Fr){var Kr=Cr(Fr);return Kr==="symbol"?String(Fr):Fr});return new Ft("Invalid "+Hr+" `"+Vr+"` of value `"+String(mn)+"` "+("supplied to `"+Tr+"`, expected one of "+er+"."))}return Lt(_r)}function Bt(gr){function _r(fr,Nr,Tr,Hr,Vr){if(typeof gr!="function")return new Ft("Property `"+Vr+"` of component `"+Tr+"` has invalid PropType notation inside objectOf.");var mn=fr[Nr],tn=yr(mn);if(tn!=="object")return new Ft("Invalid "+Hr+" `"+Vr+"` of type "+("`"+tn+"` supplied to `"+Tr+"`, expected an object."));for(var er in mn)if(xt(mn,er)){var tr=gr(mn,er,Tr,Hr,Vr+"."+er,gt);if(tr instanceof Error)return tr}return null}return Lt(_r)}function Ht(gr){if(!Array.isArray(gr))return vt("Invalid argument supplied to oneOfType, expected an instance of array."),St;for(var _r=0;_r<gr.length;_r++){var fr=gr[_r];if(typeof fr!="function")return vt("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+Sr(fr)+" at index "+_r+"."),St}function Nr(Tr,Hr,Vr,mn,tn){for(var er=[],tr=0;tr<gr.length;tr++){var vr=gr[tr],Fr=vr(Tr,Hr,Vr,mn,tn,gt);if(Fr==null)return null;Fr.data&&xt(Fr.data,"expectedType")&&er.push(Fr.data.expectedType)}var Kr=er.length>0?", expected one of type ["+er.join(", ")+"]":"";return new Ft("Invalid "+mn+" `"+tn+"` supplied to "+("`"+Vr+"`"+Kr+"."))}return Lt(Nr)}function Gt(){function gr(_r,fr,Nr,Tr,Hr){return nr(_r[fr])?null:new Ft("Invalid "+Tr+" `"+Hr+"` supplied to "+("`"+Nr+"`, expected a ReactNode."))}return Lt(gr)}function Xt(gr,_r,fr,Nr,Tr){return new Ft((gr||"React class")+": "+_r+" type `"+fr+"."+Nr+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+Tr+"`.")}function Zt(gr){function _r(fr,Nr,Tr,Hr,Vr){var mn=fr[Nr],tn=yr(mn);if(tn!=="object")return new Ft("Invalid "+Hr+" `"+Vr+"` of type `"+tn+"` "+("supplied to `"+Tr+"`, expected `object`."));for(var er in gr){var tr=gr[er];if(typeof tr!="function")return Xt(Tr,Hr,Vr,er,Cr(tr));var vr=tr(mn,er,Tr,Hr,Vr+"."+er,gt);if(vr)return vr}return null}return Lt(_r)}function hr(gr){function _r(fr,Nr,Tr,Hr,Vr){var mn=fr[Nr],tn=yr(mn);if(tn!=="object")return new Ft("Invalid "+Hr+" `"+Vr+"` of type `"+tn+"` "+("supplied to `"+Tr+"`, expected `object`."));var er=mt({},fr[Nr],gr);for(var tr in er){var vr=gr[tr];if(xt(gr,tr)&&typeof vr!="function")return Xt(Tr,Hr,Vr,tr,Cr(vr));if(!vr)return new Ft("Invalid "+Hr+" `"+Vr+"` key `"+tr+"` supplied to `"+Tr+"`.\nBad object: "+JSON.stringify(fr[Nr],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(gr),null,"  "));var Fr=vr(mn,tr,Tr,Hr,Vr+"."+tr,gt);if(Fr)return Fr}return null}return Lt(_r)}function nr(gr){switch(typeof gr){case"number":case"string":case"undefined":return!0;case"boolean":return!gr;case"object":if(Array.isArray(gr))return gr.every(nr);if(gr===null||wt(gr))return!0;var _r=It(gr);if(_r){var fr=_r.call(gr),Nr;if(_r!==gr.entries){for(;!(Nr=fr.next()).done;)if(!nr(Nr.value))return!1}else for(;!(Nr=fr.next()).done;){var Tr=Nr.value;if(Tr&&!nr(Tr[1]))return!1}}else return!1;return!0;default:return!1}}function ir(gr,_r){return gr==="symbol"?!0:_r?_r["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&_r instanceof Symbol:!1}function yr(gr){var _r=typeof gr;return Array.isArray(gr)?"array":gr instanceof RegExp?"object":ir(_r,gr)?"symbol":_r}function Cr(gr){if(typeof gr>"u"||gr===null)return""+gr;var _r=yr(gr);if(_r==="object"){if(gr instanceof Date)return"date";if(gr instanceof RegExp)return"regexp"}return _r}function Sr(gr){var _r=Cr(gr);switch(_r){case"array":case"object":return"an "+_r;case"boolean":case"date":case"regexp":return"a "+_r;default:return _r}}function xr(gr){return!gr.constructor||!gr.constructor.name?At:gr.constructor.name}return Dt.checkPropTypes=yt,Dt.resetWarningCache=yt.resetWarningCache,Dt.PropTypes=Dt,Dt}},"./node_modules/prop-types/index.js":(dt,ht,ft)=>{{var pt=ft("./node_modules/react-is/index.js"),mt=!0;dt.exports=ft("./node_modules/prop-types/factoryWithTypeCheckers.js")(pt.isElement,mt)}},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":dt=>{var ht="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";dt.exports=ht},"./node_modules/prop-types/lib/has.js":dt=>{dt.exports=Function.call.bind(Object.prototype.hasOwnProperty)},"./node_modules/react-is/cjs/react-is.development.js":(dt,ht)=>{/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var ft=typeof Symbol=="function"&&Symbol.for,pt=ft?Symbol.for("react.element"):60103,mt=ft?Symbol.for("react.portal"):60106,gt=ft?Symbol.for("react.fragment"):60107,xt=ft?Symbol.for("react.strict_mode"):60108,yt=ft?Symbol.for("react.profiler"):60114,vt=ft?Symbol.for("react.provider"):60109,St=ft?Symbol.for("react.context"):60110,wt=ft?Symbol.for("react.async_mode"):60111,Et=ft?Symbol.for("react.concurrent_mode"):60111,Rt=ft?Symbol.for("react.forward_ref"):60112,Tt=ft?Symbol.for("react.suspense"):60113,It=ft?Symbol.for("react.suspense_list"):60120,At=ft?Symbol.for("react.memo"):60115,Dt=ft?Symbol.for("react.lazy"):60116,jt=ft?Symbol.for("react.block"):60121,Ft=ft?Symbol.for("react.fundamental"):60117,Lt=ft?Symbol.for("react.responder"):60118,Mt=ft?Symbol.for("react.scope"):60119;function Ot(vr){return typeof vr=="string"||typeof vr=="function"||vr===gt||vr===Et||vr===yt||vr===xt||vr===Tt||vr===It||typeof vr=="object"&&vr!==null&&(vr.$$typeof===Dt||vr.$$typeof===At||vr.$$typeof===vt||vr.$$typeof===St||vr.$$typeof===Rt||vr.$$typeof===Ft||vr.$$typeof===Lt||vr.$$typeof===Mt||vr.$$typeof===jt)}function Nt(vr){if(typeof vr=="object"&&vr!==null){var Fr=vr.$$typeof;switch(Fr){case pt:var Kr=vr.type;switch(Kr){case wt:case Et:case gt:case yt:case xt:case Tt:return Kr;default:var qr=Kr&&Kr.$$typeof;switch(qr){case St:case Rt:case Dt:case At:case vt:return qr;default:return Fr}}case mt:return Fr}}}var $t=wt,Vt=Et,Ut=St,zt=vt,Bt=pt,Ht=Rt,Gt=gt,Xt=Dt,Zt=At,hr=mt,nr=yt,ir=xt,yr=Tt,Cr=!1;function Sr(vr){return Cr||(Cr=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),xr(vr)||Nt(vr)===wt}function xr(vr){return Nt(vr)===Et}function gr(vr){return Nt(vr)===St}function _r(vr){return Nt(vr)===vt}function fr(vr){return typeof vr=="object"&&vr!==null&&vr.$$typeof===pt}function Nr(vr){return Nt(vr)===Rt}function Tr(vr){return Nt(vr)===gt}function Hr(vr){return Nt(vr)===Dt}function Vr(vr){return Nt(vr)===At}function mn(vr){return Nt(vr)===mt}function tn(vr){return Nt(vr)===yt}function er(vr){return Nt(vr)===xt}function tr(vr){return Nt(vr)===Tt}ht.AsyncMode=$t,ht.ConcurrentMode=Vt,ht.ContextConsumer=Ut,ht.ContextProvider=zt,ht.Element=Bt,ht.ForwardRef=Ht,ht.Fragment=Gt,ht.Lazy=Xt,ht.Memo=Zt,ht.Portal=hr,ht.Profiler=nr,ht.StrictMode=ir,ht.Suspense=yr,ht.isAsyncMode=Sr,ht.isConcurrentMode=xr,ht.isContextConsumer=gr,ht.isContextProvider=_r,ht.isElement=fr,ht.isForwardRef=Nr,ht.isFragment=Tr,ht.isLazy=Hr,ht.isMemo=Vr,ht.isPortal=mn,ht.isProfiler=tn,ht.isStrictMode=er,ht.isSuspense=tr,ht.isValidElementType=Ot,ht.typeOf=Nt})()},"./node_modules/react-is/index.js":(dt,ht,ft)=>{dt.exports=ft("./node_modules/react-is/cjs/react-is.development.js")},"./node_modules/shallow-equal/dist/index.esm.js":(dt,ht,ft)=>{ft.r(ht),ft.d(ht,{shallowEqualArrays:()=>mt,shallowEqualObjects:()=>pt});function pt(gt,xt){if(gt===xt)return!0;if(!gt||!xt)return!1;var yt=Object.keys(gt),vt=Object.keys(xt),St=yt.length;if(vt.length!==St)return!1;for(var wt=0;wt<St;wt++){var Et=yt[wt];if(gt[Et]!==xt[Et]||!Object.prototype.hasOwnProperty.call(xt,Et))return!1}return!0}function mt(gt,xt){if(gt===xt)return!0;if(!gt||!xt)return!1;var yt=gt.length;if(xt.length!==yt)return!1;for(var vt=0;vt<yt;vt++)if(gt[vt]!==xt[vt])return!1;return!0}},"./src/Component.ts":function(dt,ht,ft){var pt=this&&this.__rest||function(yt,vt){var St={};for(var wt in yt)Object.prototype.hasOwnProperty.call(yt,wt)&&vt.indexOf(wt)<0&&(St[wt]=yt[wt]);if(yt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Et=0,wt=Object.getOwnPropertySymbols(yt);Et<wt.length;Et++)vt.indexOf(wt[Et])<0&&Object.prototype.propertyIsEnumerable.call(yt,wt[Et])&&(St[wt[Et]]=yt[wt[Et]]);return St},mt=this&&this.__importDefault||function(yt){return yt&&yt.__esModule?yt:{default:yt}};Object.defineProperty(ht,"__esModule",{value:!0});var gt=mt(ft("./src/useMediaQuery.ts")),xt=function(yt){var vt=yt.children,St=yt.device,wt=yt.onChange,Et=pt(yt,["children","device","onChange"]),Rt=(0,gt.default)(Et,St,wt);return typeof vt=="function"?vt(Rt):Rt?vt:null};ht.default=xt},"./src/Context.ts":(dt,ht,ft)=>{Object.defineProperty(ht,"__esModule",{value:!0});var pt=ft("react"),mt=(0,pt.createContext)(void 0);ht.default=mt},"./src/index.ts":function(dt,ht,ft){var pt=this&&this.__importDefault||function(vt){return vt&&vt.__esModule?vt:{default:vt}};Object.defineProperty(ht,"__esModule",{value:!0}),ht.Context=ht.toQuery=ht.useMediaQuery=ht.default=void 0;var mt=pt(ft("./src/useMediaQuery.ts"));ht.useMediaQuery=mt.default;var gt=pt(ft("./src/Component.ts"));ht.default=gt.default;var xt=pt(ft("./src/toQuery.ts"));ht.toQuery=xt.default;var yt=pt(ft("./src/Context.ts"));ht.Context=yt.default},"./src/mediaQuery.ts":function(dt,ht,ft){var pt=this&&this.__assign||function(){return pt=Object.assign||function(Tt){for(var It,At=1,Dt=arguments.length;At<Dt;At++){It=arguments[At];for(var jt in It)Object.prototype.hasOwnProperty.call(It,jt)&&(Tt[jt]=It[jt])}return Tt},pt.apply(this,arguments)},mt=this&&this.__rest||function(Tt,It){var At={};for(var Dt in Tt)Object.prototype.hasOwnProperty.call(Tt,Dt)&&It.indexOf(Dt)<0&&(At[Dt]=Tt[Dt]);if(Tt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var jt=0,Dt=Object.getOwnPropertySymbols(Tt);jt<Dt.length;jt++)It.indexOf(Dt[jt])<0&&Object.prototype.propertyIsEnumerable.call(Tt,Dt[jt])&&(At[Dt[jt]]=Tt[Dt[jt]]);return At},gt=this&&this.__importDefault||function(Tt){return Tt&&Tt.__esModule?Tt:{default:Tt}};Object.defineProperty(ht,"__esModule",{value:!0});var xt=gt(ft("./node_modules/prop-types/index.js")),yt=xt.default.oneOfType([xt.default.string,xt.default.number]),vt={all:xt.default.bool,grid:xt.default.bool,aural:xt.default.bool,braille:xt.default.bool,handheld:xt.default.bool,print:xt.default.bool,projection:xt.default.bool,screen:xt.default.bool,tty:xt.default.bool,tv:xt.default.bool,embossed:xt.default.bool},St={orientation:xt.default.oneOf(["portrait","landscape"]),scan:xt.default.oneOf(["progressive","interlace"]),aspectRatio:xt.default.string,deviceAspectRatio:xt.default.string,height:yt,deviceHeight:yt,width:yt,deviceWidth:yt,color:xt.default.bool,colorIndex:xt.default.bool,monochrome:xt.default.bool,resolution:yt,type:Object.keys(vt)};St.type;var wt=mt(St,["type"]),Et=pt({minAspectRatio:xt.default.string,maxAspectRatio:xt.default.string,minDeviceAspectRatio:xt.default.string,maxDeviceAspectRatio:xt.default.string,minHeight:yt,maxHeight:yt,minDeviceHeight:yt,maxDeviceHeight:yt,minWidth:yt,maxWidth:yt,minDeviceWidth:yt,maxDeviceWidth:yt,minColor:xt.default.number,maxColor:xt.default.number,minColorIndex:xt.default.number,maxColorIndex:xt.default.number,minMonochrome:xt.default.number,maxMonochrome:xt.default.number,minResolution:yt,maxResolution:yt},wt),Rt=pt(pt({},vt),Et);ht.default={all:Rt,types:vt,matchers:St,features:Et}},"./src/toQuery.ts":function(dt,ht,ft){var pt=this&&this.__importDefault||function(wt){return wt&&wt.__esModule?wt:{default:wt}};Object.defineProperty(ht,"__esModule",{value:!0});var mt=pt(ft("./node_modules/hyphenate-style-name/index.js")),gt=pt(ft("./src/mediaQuery.ts")),xt=function(wt){return"not ".concat(wt)},yt=function(wt,Et){var Rt=(0,mt.default)(wt);return typeof Et=="number"&&(Et="".concat(Et,"px")),Et===!0?Rt:Et===!1?xt(Rt):"(".concat(Rt,": ").concat(Et,")")},vt=function(wt){return wt.join(" and ")},St=function(wt){var Et=[];return Object.keys(gt.default.all).forEach(function(Rt){var Tt=wt[Rt];Tt!=null&&Et.push(yt(Rt,Tt))}),vt(Et)};ht.default=St},"./src/useMediaQuery.ts":function(dt,ht,ft){var pt=this&&this.__importDefault||function(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}};Object.defineProperty(ht,"__esModule",{value:!0});var mt=ft("react"),gt=pt(ft("./node_modules/matchmediaquery/index.js")),xt=pt(ft("./node_modules/hyphenate-style-name/index.js")),yt=ft("./node_modules/shallow-equal/dist/index.esm.js"),vt=pt(ft("./src/toQuery.ts")),St=pt(ft("./src/Context.ts")),wt=function(Ft){return Ft.query||(0,vt.default)(Ft)},Et=function(Ft){if(Ft){var Lt=Object.keys(Ft);return Lt.reduce(function(Mt,Ot){return Mt[(0,xt.default)(Ot)]=Ft[Ot],Mt},{})}},Rt=function(){var Ft=(0,mt.useRef)(!1);return(0,mt.useEffect)(function(){Ft.current=!0},[]),Ft.current},Tt=function(Ft){var Lt=(0,mt.useContext)(St.default),Mt=function(){return Et(Ft)||Et(Lt)},Ot=(0,mt.useState)(Mt),Nt=Ot[0],$t=Ot[1];return(0,mt.useEffect)(function(){var Vt=Mt();(0,yt.shallowEqualObjects)(Nt,Vt)||$t(Vt)},[Ft,Lt]),Nt},It=function(Ft){var Lt=function(){return wt(Ft)},Mt=(0,mt.useState)(Lt),Ot=Mt[0],Nt=Mt[1];return(0,mt.useEffect)(function(){var $t=Lt();Ot!==$t&&Nt($t)},[Ft]),Ot},At=function(Ft,Lt){var Mt=function(){return(0,gt.default)(Ft,Lt||{},!!Lt)},Ot=(0,mt.useState)(Mt),Nt=Ot[0],$t=Ot[1],Vt=Rt();return(0,mt.useEffect)(function(){if(Vt){var Ut=Mt();return $t(Ut),function(){Ut&&Ut.dispose()}}},[Ft,Lt]),Nt},Dt=function(Ft){var Lt=(0,mt.useState)(Ft.matches),Mt=Lt[0],Ot=Lt[1];return(0,mt.useEffect)(function(){var Nt=function($t){Ot($t.matches)};return Ft.addListener(Nt),Ot(Ft.matches),function(){Ft.removeListener(Nt)}},[Ft]),Mt},jt=function(Ft,Lt,Mt){var Ot=Tt(Lt),Nt=It(Ft);if(!Nt)throw new Error("Invalid or missing MediaQuery!");var $t=At(Nt,Ot),Vt=Dt($t),Ut=Rt();return(0,mt.useEffect)(function(){Ut&&Mt&&Mt(Vt)},[Vt]),(0,mt.useEffect)(function(){return function(){$t&&$t.dispose()}},[]),Vt};ht.default=jt},react:dt=>{dt.exports=it}},lt={};function ct(dt){var ht=lt[dt];if(ht!==void 0)return ht.exports;var ft=lt[dt]={exports:{}};return st[dt].call(ft.exports,ft,ft.exports,ct),ft.exports}ct.d=(dt,ht)=>{for(var ft in ht)ct.o(ht,ft)&&!ct.o(dt,ft)&&Object.defineProperty(dt,ft,{enumerable:!0,get:ht[ft]})},ct.o=(dt,ht)=>Object.prototype.hasOwnProperty.call(dt,ht),ct.r=dt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(dt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(dt,"__esModule",{value:!0})};var ut=ct("./src/index.ts");return ut})())})(reactResponsive);var reactResponsiveExports=reactResponsive.exports;const useIsMobile=nt=>reactResponsiveExports.useMediaQuery({maxWidth:nt||767});var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(nt,rt){return nt.concat([rt+"-"+start,rt+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(nt,rt){return nt.concat([rt,rt+"-"+start,rt+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(nt){return nt?(nt.nodeName||"").toLowerCase():null}function getWindow(nt){if(nt==null)return window;if(nt.toString()!=="[object Window]"){var rt=nt.ownerDocument;return rt&&rt.defaultView||window}return nt}function isElement(nt){var rt=getWindow(nt).Element;return nt instanceof rt||nt instanceof Element}function isHTMLElement(nt){var rt=getWindow(nt).HTMLElement;return nt instanceof rt||nt instanceof HTMLElement}function isShadowRoot(nt){if(typeof ShadowRoot>"u")return!1;var rt=getWindow(nt).ShadowRoot;return nt instanceof rt||nt instanceof ShadowRoot}function applyStyles(nt){var rt=nt.state;Object.keys(rt.elements).forEach(function(it){var st=rt.styles[it]||{},lt=rt.attributes[it]||{},ct=rt.elements[it];!isHTMLElement(ct)||!getNodeName(ct)||(Object.assign(ct.style,st),Object.keys(lt).forEach(function(ut){var dt=lt[ut];dt===!1?ct.removeAttribute(ut):ct.setAttribute(ut,dt===!0?"":dt)}))})}function effect$2(nt){var rt=nt.state,it={popper:{position:rt.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(rt.elements.popper.style,it.popper),rt.styles=it,rt.elements.arrow&&Object.assign(rt.elements.arrow.style,it.arrow),function(){Object.keys(rt.elements).forEach(function(st){var lt=rt.elements[st],ct=rt.attributes[st]||{},ut=Object.keys(rt.styles.hasOwnProperty(st)?rt.styles[st]:it[st]),dt=ut.reduce(function(ht,ft){return ht[ft]="",ht},{});!isHTMLElement(lt)||!getNodeName(lt)||(Object.assign(lt.style,dt),Object.keys(ct).forEach(function(ht){lt.removeAttribute(ht)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(nt){return nt.split("-")[0]}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var nt=navigator.userAgentData;return nt!=null&&nt.brands&&Array.isArray(nt.brands)?nt.brands.map(function(rt){return rt.brand+"/"+rt.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(nt,rt,it){rt===void 0&&(rt=!1),it===void 0&&(it=!1);var st=nt.getBoundingClientRect(),lt=1,ct=1;rt&&isHTMLElement(nt)&&(lt=nt.offsetWidth>0&&round(st.width)/nt.offsetWidth||1,ct=nt.offsetHeight>0&&round(st.height)/nt.offsetHeight||1);var ut=isElement(nt)?getWindow(nt):window,dt=ut.visualViewport,ht=!isLayoutViewport()&&it,ft=(st.left+(ht&&dt?dt.offsetLeft:0))/lt,pt=(st.top+(ht&&dt?dt.offsetTop:0))/ct,mt=st.width/lt,gt=st.height/ct;return{width:mt,height:gt,top:pt,right:ft+mt,bottom:pt+gt,left:ft,x:ft,y:pt}}function getLayoutRect(nt){var rt=getBoundingClientRect(nt),it=nt.offsetWidth,st=nt.offsetHeight;return Math.abs(rt.width-it)<=1&&(it=rt.width),Math.abs(rt.height-st)<=1&&(st=rt.height),{x:nt.offsetLeft,y:nt.offsetTop,width:it,height:st}}function contains(nt,rt){var it=rt.getRootNode&&rt.getRootNode();if(nt.contains(rt))return!0;if(it&&isShadowRoot(it)){var st=rt;do{if(st&&nt.isSameNode(st))return!0;st=st.parentNode||st.host}while(st)}return!1}function getComputedStyle$1(nt){return getWindow(nt).getComputedStyle(nt)}function isTableElement(nt){return["table","td","th"].indexOf(getNodeName(nt))>=0}function getDocumentElement(nt){return((isElement(nt)?nt.ownerDocument:nt.document)||window.document).documentElement}function getParentNode(nt){return getNodeName(nt)==="html"?nt:nt.assignedSlot||nt.parentNode||(isShadowRoot(nt)?nt.host:null)||getDocumentElement(nt)}function getTrueOffsetParent(nt){return!isHTMLElement(nt)||getComputedStyle$1(nt).position==="fixed"?null:nt.offsetParent}function getContainingBlock(nt){var rt=/firefox/i.test(getUAString()),it=/Trident/i.test(getUAString());if(it&&isHTMLElement(nt)){var st=getComputedStyle$1(nt);if(st.position==="fixed")return null}var lt=getParentNode(nt);for(isShadowRoot(lt)&&(lt=lt.host);isHTMLElement(lt)&&["html","body"].indexOf(getNodeName(lt))<0;){var ct=getComputedStyle$1(lt);if(ct.transform!=="none"||ct.perspective!=="none"||ct.contain==="paint"||["transform","perspective"].indexOf(ct.willChange)!==-1||rt&&ct.willChange==="filter"||rt&&ct.filter&&ct.filter!=="none")return lt;lt=lt.parentNode}return null}function getOffsetParent(nt){for(var rt=getWindow(nt),it=getTrueOffsetParent(nt);it&&isTableElement(it)&&getComputedStyle$1(it).position==="static";)it=getTrueOffsetParent(it);return it&&(getNodeName(it)==="html"||getNodeName(it)==="body"&&getComputedStyle$1(it).position==="static")?rt:it||getContainingBlock(nt)||rt}function getMainAxisFromPlacement(nt){return["top","bottom"].indexOf(nt)>=0?"x":"y"}function within(nt,rt,it){return max(nt,min(rt,it))}function withinMaxClamp(nt,rt,it){var st=within(nt,rt,it);return st>it?it:st}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(nt){return Object.assign({},getFreshSideObject(),nt)}function expandToHashMap(nt,rt){return rt.reduce(function(it,st){return it[st]=nt,it},{})}var toPaddingObject=function(rt,it){return rt=typeof rt=="function"?rt(Object.assign({},it.rects,{placement:it.placement})):rt,mergePaddingObject(typeof rt!="number"?rt:expandToHashMap(rt,basePlacements))};function arrow(nt){var rt,it=nt.state,st=nt.name,lt=nt.options,ct=it.elements.arrow,ut=it.modifiersData.popperOffsets,dt=getBasePlacement(it.placement),ht=getMainAxisFromPlacement(dt),ft=[left,right].indexOf(dt)>=0,pt=ft?"height":"width";if(!(!ct||!ut)){var mt=toPaddingObject(lt.padding,it),gt=getLayoutRect(ct),xt=ht==="y"?top:left,yt=ht==="y"?bottom:right,vt=it.rects.reference[pt]+it.rects.reference[ht]-ut[ht]-it.rects.popper[pt],St=ut[ht]-it.rects.reference[ht],wt=getOffsetParent(ct),Et=wt?ht==="y"?wt.clientHeight||0:wt.clientWidth||0:0,Rt=vt/2-St/2,Tt=mt[xt],It=Et-gt[pt]-mt[yt],At=Et/2-gt[pt]/2+Rt,Dt=within(Tt,At,It),jt=ht;it.modifiersData[st]=(rt={},rt[jt]=Dt,rt.centerOffset=Dt-At,rt)}}function effect$1(nt){var rt=nt.state,it=nt.options,st=it.element,lt=st===void 0?"[data-popper-arrow]":st;lt!=null&&(typeof lt=="string"&&(lt=rt.elements.popper.querySelector(lt),!lt)||contains(rt.elements.popper,lt)&&(rt.elements.arrow=lt))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(nt){return nt.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(nt,rt){var it=nt.x,st=nt.y,lt=rt.devicePixelRatio||1;return{x:round(it*lt)/lt||0,y:round(st*lt)/lt||0}}function mapToStyles(nt){var rt,it=nt.popper,st=nt.popperRect,lt=nt.placement,ct=nt.variation,ut=nt.offsets,dt=nt.position,ht=nt.gpuAcceleration,ft=nt.adaptive,pt=nt.roundOffsets,mt=nt.isFixed,gt=ut.x,xt=gt===void 0?0:gt,yt=ut.y,vt=yt===void 0?0:yt,St=typeof pt=="function"?pt({x:xt,y:vt}):{x:xt,y:vt};xt=St.x,vt=St.y;var wt=ut.hasOwnProperty("x"),Et=ut.hasOwnProperty("y"),Rt=left,Tt=top,It=window;if(ft){var At=getOffsetParent(it),Dt="clientHeight",jt="clientWidth";if(At===getWindow(it)&&(At=getDocumentElement(it),getComputedStyle$1(At).position!=="static"&&dt==="absolute"&&(Dt="scrollHeight",jt="scrollWidth")),At=At,lt===top||(lt===left||lt===right)&&ct===end){Tt=bottom;var Ft=mt&&At===It&&It.visualViewport?It.visualViewport.height:At[Dt];vt-=Ft-st.height,vt*=ht?1:-1}if(lt===left||(lt===top||lt===bottom)&&ct===end){Rt=right;var Lt=mt&&At===It&&It.visualViewport?It.visualViewport.width:At[jt];xt-=Lt-st.width,xt*=ht?1:-1}}var Mt=Object.assign({position:dt},ft&&unsetSides),Ot=pt===!0?roundOffsetsByDPR({x:xt,y:vt},getWindow(it)):{x:xt,y:vt};if(xt=Ot.x,vt=Ot.y,ht){var Nt;return Object.assign({},Mt,(Nt={},Nt[Tt]=Et?"0":"",Nt[Rt]=wt?"0":"",Nt.transform=(It.devicePixelRatio||1)<=1?"translate("+xt+"px, "+vt+"px)":"translate3d("+xt+"px, "+vt+"px, 0)",Nt))}return Object.assign({},Mt,(rt={},rt[Tt]=Et?vt+"px":"",rt[Rt]=wt?xt+"px":"",rt.transform="",rt))}function computeStyles(nt){var rt=nt.state,it=nt.options,st=it.gpuAcceleration,lt=st===void 0?!0:st,ct=it.adaptive,ut=ct===void 0?!0:ct,dt=it.roundOffsets,ht=dt===void 0?!0:dt,ft={placement:getBasePlacement(rt.placement),variation:getVariation(rt.placement),popper:rt.elements.popper,popperRect:rt.rects.popper,gpuAcceleration:lt,isFixed:rt.options.strategy==="fixed"};rt.modifiersData.popperOffsets!=null&&(rt.styles.popper=Object.assign({},rt.styles.popper,mapToStyles(Object.assign({},ft,{offsets:rt.modifiersData.popperOffsets,position:rt.options.strategy,adaptive:ut,roundOffsets:ht})))),rt.modifiersData.arrow!=null&&(rt.styles.arrow=Object.assign({},rt.styles.arrow,mapToStyles(Object.assign({},ft,{offsets:rt.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ht})))),rt.attributes.popper=Object.assign({},rt.attributes.popper,{"data-popper-placement":rt.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(nt){var rt=nt.state,it=nt.instance,st=nt.options,lt=st.scroll,ct=lt===void 0?!0:lt,ut=st.resize,dt=ut===void 0?!0:ut,ht=getWindow(rt.elements.popper),ft=[].concat(rt.scrollParents.reference,rt.scrollParents.popper);return ct&&ft.forEach(function(pt){pt.addEventListener("scroll",it.update,passive)}),dt&&ht.addEventListener("resize",it.update,passive),function(){ct&&ft.forEach(function(pt){pt.removeEventListener("scroll",it.update,passive)}),dt&&ht.removeEventListener("resize",it.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(nt){return nt.replace(/left|right|bottom|top/g,function(rt){return hash$1[rt]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(nt){return nt.replace(/start|end/g,function(rt){return hash[rt]})}function getWindowScroll(nt){var rt=getWindow(nt),it=rt.pageXOffset,st=rt.pageYOffset;return{scrollLeft:it,scrollTop:st}}function getWindowScrollBarX(nt){return getBoundingClientRect(getDocumentElement(nt)).left+getWindowScroll(nt).scrollLeft}function getViewportRect(nt,rt){var it=getWindow(nt),st=getDocumentElement(nt),lt=it.visualViewport,ct=st.clientWidth,ut=st.clientHeight,dt=0,ht=0;if(lt){ct=lt.width,ut=lt.height;var ft=isLayoutViewport();(ft||!ft&&rt==="fixed")&&(dt=lt.offsetLeft,ht=lt.offsetTop)}return{width:ct,height:ut,x:dt+getWindowScrollBarX(nt),y:ht}}function getDocumentRect(nt){var rt,it=getDocumentElement(nt),st=getWindowScroll(nt),lt=(rt=nt.ownerDocument)==null?void 0:rt.body,ct=max(it.scrollWidth,it.clientWidth,lt?lt.scrollWidth:0,lt?lt.clientWidth:0),ut=max(it.scrollHeight,it.clientHeight,lt?lt.scrollHeight:0,lt?lt.clientHeight:0),dt=-st.scrollLeft+getWindowScrollBarX(nt),ht=-st.scrollTop;return getComputedStyle$1(lt||it).direction==="rtl"&&(dt+=max(it.clientWidth,lt?lt.clientWidth:0)-ct),{width:ct,height:ut,x:dt,y:ht}}function isScrollParent(nt){var rt=getComputedStyle$1(nt),it=rt.overflow,st=rt.overflowX,lt=rt.overflowY;return/auto|scroll|overlay|hidden/.test(it+lt+st)}function getScrollParent(nt){return["html","body","#document"].indexOf(getNodeName(nt))>=0?nt.ownerDocument.body:isHTMLElement(nt)&&isScrollParent(nt)?nt:getScrollParent(getParentNode(nt))}function listScrollParents(nt,rt){var it;rt===void 0&&(rt=[]);var st=getScrollParent(nt),lt=st===((it=nt.ownerDocument)==null?void 0:it.body),ct=getWindow(st),ut=lt?[ct].concat(ct.visualViewport||[],isScrollParent(st)?st:[]):st,dt=rt.concat(ut);return lt?dt:dt.concat(listScrollParents(getParentNode(ut)))}function rectToClientRect(nt){return Object.assign({},nt,{left:nt.x,top:nt.y,right:nt.x+nt.width,bottom:nt.y+nt.height})}function getInnerBoundingClientRect(nt,rt){var it=getBoundingClientRect(nt,!1,rt==="fixed");return it.top=it.top+nt.clientTop,it.left=it.left+nt.clientLeft,it.bottom=it.top+nt.clientHeight,it.right=it.left+nt.clientWidth,it.width=nt.clientWidth,it.height=nt.clientHeight,it.x=it.left,it.y=it.top,it}function getClientRectFromMixedType(nt,rt,it){return rt===viewport?rectToClientRect(getViewportRect(nt,it)):isElement(rt)?getInnerBoundingClientRect(rt,it):rectToClientRect(getDocumentRect(getDocumentElement(nt)))}function getClippingParents(nt){var rt=listScrollParents(getParentNode(nt)),it=["absolute","fixed"].indexOf(getComputedStyle$1(nt).position)>=0,st=it&&isHTMLElement(nt)?getOffsetParent(nt):nt;return isElement(st)?rt.filter(function(lt){return isElement(lt)&&contains(lt,st)&&getNodeName(lt)!=="body"}):[]}function getClippingRect(nt,rt,it,st){var lt=rt==="clippingParents"?getClippingParents(nt):[].concat(rt),ct=[].concat(lt,[it]),ut=ct[0],dt=ct.reduce(function(ht,ft){var pt=getClientRectFromMixedType(nt,ft,st);return ht.top=max(pt.top,ht.top),ht.right=min(pt.right,ht.right),ht.bottom=min(pt.bottom,ht.bottom),ht.left=max(pt.left,ht.left),ht},getClientRectFromMixedType(nt,ut,st));return dt.width=dt.right-dt.left,dt.height=dt.bottom-dt.top,dt.x=dt.left,dt.y=dt.top,dt}function computeOffsets(nt){var rt=nt.reference,it=nt.element,st=nt.placement,lt=st?getBasePlacement(st):null,ct=st?getVariation(st):null,ut=rt.x+rt.width/2-it.width/2,dt=rt.y+rt.height/2-it.height/2,ht;switch(lt){case top:ht={x:ut,y:rt.y-it.height};break;case bottom:ht={x:ut,y:rt.y+rt.height};break;case right:ht={x:rt.x+rt.width,y:dt};break;case left:ht={x:rt.x-it.width,y:dt};break;default:ht={x:rt.x,y:rt.y}}var ft=lt?getMainAxisFromPlacement(lt):null;if(ft!=null){var pt=ft==="y"?"height":"width";switch(ct){case start:ht[ft]=ht[ft]-(rt[pt]/2-it[pt]/2);break;case end:ht[ft]=ht[ft]+(rt[pt]/2-it[pt]/2);break}}return ht}function detectOverflow(nt,rt){rt===void 0&&(rt={});var it=rt,st=it.placement,lt=st===void 0?nt.placement:st,ct=it.strategy,ut=ct===void 0?nt.strategy:ct,dt=it.boundary,ht=dt===void 0?clippingParents:dt,ft=it.rootBoundary,pt=ft===void 0?viewport:ft,mt=it.elementContext,gt=mt===void 0?popper:mt,xt=it.altBoundary,yt=xt===void 0?!1:xt,vt=it.padding,St=vt===void 0?0:vt,wt=mergePaddingObject(typeof St!="number"?St:expandToHashMap(St,basePlacements)),Et=gt===popper?reference:popper,Rt=nt.rects.popper,Tt=nt.elements[yt?Et:gt],It=getClippingRect(isElement(Tt)?Tt:Tt.contextElement||getDocumentElement(nt.elements.popper),ht,pt,ut),At=getBoundingClientRect(nt.elements.reference),Dt=computeOffsets({reference:At,element:Rt,strategy:"absolute",placement:lt}),jt=rectToClientRect(Object.assign({},Rt,Dt)),Ft=gt===popper?jt:At,Lt={top:It.top-Ft.top+wt.top,bottom:Ft.bottom-It.bottom+wt.bottom,left:It.left-Ft.left+wt.left,right:Ft.right-It.right+wt.right},Mt=nt.modifiersData.offset;if(gt===popper&&Mt){var Ot=Mt[lt];Object.keys(Lt).forEach(function(Nt){var $t=[right,bottom].indexOf(Nt)>=0?1:-1,Vt=[top,bottom].indexOf(Nt)>=0?"y":"x";Lt[Nt]+=Ot[Vt]*$t})}return Lt}function computeAutoPlacement(nt,rt){rt===void 0&&(rt={});var it=rt,st=it.placement,lt=it.boundary,ct=it.rootBoundary,ut=it.padding,dt=it.flipVariations,ht=it.allowedAutoPlacements,ft=ht===void 0?placements:ht,pt=getVariation(st),mt=pt?dt?variationPlacements:variationPlacements.filter(function(yt){return getVariation(yt)===pt}):basePlacements,gt=mt.filter(function(yt){return ft.indexOf(yt)>=0});gt.length===0&&(gt=mt);var xt=gt.reduce(function(yt,vt){return yt[vt]=detectOverflow(nt,{placement:vt,boundary:lt,rootBoundary:ct,padding:ut})[getBasePlacement(vt)],yt},{});return Object.keys(xt).sort(function(yt,vt){return xt[yt]-xt[vt]})}function getExpandedFallbackPlacements(nt){if(getBasePlacement(nt)===auto)return[];var rt=getOppositePlacement(nt);return[getOppositeVariationPlacement(nt),rt,getOppositeVariationPlacement(rt)]}function flip(nt){var rt=nt.state,it=nt.options,st=nt.name;if(!rt.modifiersData[st]._skip){for(var lt=it.mainAxis,ct=lt===void 0?!0:lt,ut=it.altAxis,dt=ut===void 0?!0:ut,ht=it.fallbackPlacements,ft=it.padding,pt=it.boundary,mt=it.rootBoundary,gt=it.altBoundary,xt=it.flipVariations,yt=xt===void 0?!0:xt,vt=it.allowedAutoPlacements,St=rt.options.placement,wt=getBasePlacement(St),Et=wt===St,Rt=ht||(Et||!yt?[getOppositePlacement(St)]:getExpandedFallbackPlacements(St)),Tt=[St].concat(Rt).reduce(function(nr,ir){return nr.concat(getBasePlacement(ir)===auto?computeAutoPlacement(rt,{placement:ir,boundary:pt,rootBoundary:mt,padding:ft,flipVariations:yt,allowedAutoPlacements:vt}):ir)},[]),It=rt.rects.reference,At=rt.rects.popper,Dt=new Map,jt=!0,Ft=Tt[0],Lt=0;Lt<Tt.length;Lt++){var Mt=Tt[Lt],Ot=getBasePlacement(Mt),Nt=getVariation(Mt)===start,$t=[top,bottom].indexOf(Ot)>=0,Vt=$t?"width":"height",Ut=detectOverflow(rt,{placement:Mt,boundary:pt,rootBoundary:mt,altBoundary:gt,padding:ft}),zt=$t?Nt?right:left:Nt?bottom:top;It[Vt]>At[Vt]&&(zt=getOppositePlacement(zt));var Bt=getOppositePlacement(zt),Ht=[];if(ct&&Ht.push(Ut[Ot]<=0),dt&&Ht.push(Ut[zt]<=0,Ut[Bt]<=0),Ht.every(function(nr){return nr})){Ft=Mt,jt=!1;break}Dt.set(Mt,Ht)}if(jt)for(var Gt=yt?3:1,Xt=function(ir){var yr=Tt.find(function(Cr){var Sr=Dt.get(Cr);if(Sr)return Sr.slice(0,ir).every(function(xr){return xr})});if(yr)return Ft=yr,"break"},Zt=Gt;Zt>0;Zt--){var hr=Xt(Zt);if(hr==="break")break}rt.placement!==Ft&&(rt.modifiersData[st]._skip=!0,rt.placement=Ft,rt.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(nt,rt,it){return it===void 0&&(it={x:0,y:0}),{top:nt.top-rt.height-it.y,right:nt.right-rt.width+it.x,bottom:nt.bottom-rt.height+it.y,left:nt.left-rt.width-it.x}}function isAnySideFullyClipped(nt){return[top,right,bottom,left].some(function(rt){return nt[rt]>=0})}function hide(nt){var rt=nt.state,it=nt.name,st=rt.rects.reference,lt=rt.rects.popper,ct=rt.modifiersData.preventOverflow,ut=detectOverflow(rt,{elementContext:"reference"}),dt=detectOverflow(rt,{altBoundary:!0}),ht=getSideOffsets(ut,st),ft=getSideOffsets(dt,lt,ct),pt=isAnySideFullyClipped(ht),mt=isAnySideFullyClipped(ft);rt.modifiersData[it]={referenceClippingOffsets:ht,popperEscapeOffsets:ft,isReferenceHidden:pt,hasPopperEscaped:mt},rt.attributes.popper=Object.assign({},rt.attributes.popper,{"data-popper-reference-hidden":pt,"data-popper-escaped":mt})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(nt,rt,it){var st=getBasePlacement(nt),lt=[left,top].indexOf(st)>=0?-1:1,ct=typeof it=="function"?it(Object.assign({},rt,{placement:nt})):it,ut=ct[0],dt=ct[1];return ut=ut||0,dt=(dt||0)*lt,[left,right].indexOf(st)>=0?{x:dt,y:ut}:{x:ut,y:dt}}function offset(nt){var rt=nt.state,it=nt.options,st=nt.name,lt=it.offset,ct=lt===void 0?[0,0]:lt,ut=placements.reduce(function(pt,mt){return pt[mt]=distanceAndSkiddingToXY(mt,rt.rects,ct),pt},{}),dt=ut[rt.placement],ht=dt.x,ft=dt.y;rt.modifiersData.popperOffsets!=null&&(rt.modifiersData.popperOffsets.x+=ht,rt.modifiersData.popperOffsets.y+=ft),rt.modifiersData[st]=ut}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(nt){var rt=nt.state,it=nt.name;rt.modifiersData[it]=computeOffsets({reference:rt.rects.reference,element:rt.rects.popper,strategy:"absolute",placement:rt.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(nt){return nt==="x"?"y":"x"}function preventOverflow(nt){var rt=nt.state,it=nt.options,st=nt.name,lt=it.mainAxis,ct=lt===void 0?!0:lt,ut=it.altAxis,dt=ut===void 0?!1:ut,ht=it.boundary,ft=it.rootBoundary,pt=it.altBoundary,mt=it.padding,gt=it.tether,xt=gt===void 0?!0:gt,yt=it.tetherOffset,vt=yt===void 0?0:yt,St=detectOverflow(rt,{boundary:ht,rootBoundary:ft,padding:mt,altBoundary:pt}),wt=getBasePlacement(rt.placement),Et=getVariation(rt.placement),Rt=!Et,Tt=getMainAxisFromPlacement(wt),It=getAltAxis(Tt),At=rt.modifiersData.popperOffsets,Dt=rt.rects.reference,jt=rt.rects.popper,Ft=typeof vt=="function"?vt(Object.assign({},rt.rects,{placement:rt.placement})):vt,Lt=typeof Ft=="number"?{mainAxis:Ft,altAxis:Ft}:Object.assign({mainAxis:0,altAxis:0},Ft),Mt=rt.modifiersData.offset?rt.modifiersData.offset[rt.placement]:null,Ot={x:0,y:0};if(At){if(ct){var Nt,$t=Tt==="y"?top:left,Vt=Tt==="y"?bottom:right,Ut=Tt==="y"?"height":"width",zt=At[Tt],Bt=zt+St[$t],Ht=zt-St[Vt],Gt=xt?-jt[Ut]/2:0,Xt=Et===start?Dt[Ut]:jt[Ut],Zt=Et===start?-jt[Ut]:-Dt[Ut],hr=rt.elements.arrow,nr=xt&&hr?getLayoutRect(hr):{width:0,height:0},ir=rt.modifiersData["arrow#persistent"]?rt.modifiersData["arrow#persistent"].padding:getFreshSideObject(),yr=ir[$t],Cr=ir[Vt],Sr=within(0,Dt[Ut],nr[Ut]),xr=Rt?Dt[Ut]/2-Gt-Sr-yr-Lt.mainAxis:Xt-Sr-yr-Lt.mainAxis,gr=Rt?-Dt[Ut]/2+Gt+Sr+Cr+Lt.mainAxis:Zt+Sr+Cr+Lt.mainAxis,_r=rt.elements.arrow&&getOffsetParent(rt.elements.arrow),fr=_r?Tt==="y"?_r.clientTop||0:_r.clientLeft||0:0,Nr=(Nt=Mt==null?void 0:Mt[Tt])!=null?Nt:0,Tr=zt+xr-Nr-fr,Hr=zt+gr-Nr,Vr=within(xt?min(Bt,Tr):Bt,zt,xt?max(Ht,Hr):Ht);At[Tt]=Vr,Ot[Tt]=Vr-zt}if(dt){var mn,tn=Tt==="x"?top:left,er=Tt==="x"?bottom:right,tr=At[It],vr=It==="y"?"height":"width",Fr=tr+St[tn],Kr=tr-St[er],qr=[top,left].indexOf(wt)!==-1,pn=(mn=Mt==null?void 0:Mt[It])!=null?mn:0,En=qr?Fr:tr-Dt[vr]-jt[vr]-pn+Lt.altAxis,Rn=qr?tr+Dt[vr]+jt[vr]-pn-Lt.altAxis:Kr,Qn=xt&&qr?withinMaxClamp(En,tr,Rn):within(xt?En:Fr,tr,xt?Rn:Kr);At[It]=Qn,Ot[It]=Qn-tr}rt.modifiersData[st]=Ot}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(nt){return{scrollLeft:nt.scrollLeft,scrollTop:nt.scrollTop}}function getNodeScroll(nt){return nt===getWindow(nt)||!isHTMLElement(nt)?getWindowScroll(nt):getHTMLElementScroll(nt)}function isElementScaled(nt){var rt=nt.getBoundingClientRect(),it=round(rt.width)/nt.offsetWidth||1,st=round(rt.height)/nt.offsetHeight||1;return it!==1||st!==1}function getCompositeRect(nt,rt,it){it===void 0&&(it=!1);var st=isHTMLElement(rt),lt=isHTMLElement(rt)&&isElementScaled(rt),ct=getDocumentElement(rt),ut=getBoundingClientRect(nt,lt,it),dt={scrollLeft:0,scrollTop:0},ht={x:0,y:0};return(st||!st&&!it)&&((getNodeName(rt)!=="body"||isScrollParent(ct))&&(dt=getNodeScroll(rt)),isHTMLElement(rt)?(ht=getBoundingClientRect(rt,!0),ht.x+=rt.clientLeft,ht.y+=rt.clientTop):ct&&(ht.x=getWindowScrollBarX(ct))),{x:ut.left+dt.scrollLeft-ht.x,y:ut.top+dt.scrollTop-ht.y,width:ut.width,height:ut.height}}function order(nt){var rt=new Map,it=new Set,st=[];nt.forEach(function(ct){rt.set(ct.name,ct)});function lt(ct){it.add(ct.name);var ut=[].concat(ct.requires||[],ct.requiresIfExists||[]);ut.forEach(function(dt){if(!it.has(dt)){var ht=rt.get(dt);ht&&lt(ht)}}),st.push(ct)}return nt.forEach(function(ct){it.has(ct.name)||lt(ct)}),st}function orderModifiers(nt){var rt=order(nt);return modifierPhases.reduce(function(it,st){return it.concat(rt.filter(function(lt){return lt.phase===st}))},[])}function debounce(nt){var rt;return function(){return rt||(rt=new Promise(function(it){Promise.resolve().then(function(){rt=void 0,it(nt())})})),rt}}function mergeByName(nt){var rt=nt.reduce(function(it,st){var lt=it[st.name];return it[st.name]=lt?Object.assign({},lt,st,{options:Object.assign({},lt.options,st.options),data:Object.assign({},lt.data,st.data)}):st,it},{});return Object.keys(rt).map(function(it){return rt[it]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var nt=arguments.length,rt=new Array(nt),it=0;it<nt;it++)rt[it]=arguments[it];return!rt.some(function(st){return!(st&&typeof st.getBoundingClientRect=="function")})}function popperGenerator(nt){nt===void 0&&(nt={});var rt=nt,it=rt.defaultModifiers,st=it===void 0?[]:it,lt=rt.defaultOptions,ct=lt===void 0?DEFAULT_OPTIONS:lt;return function(dt,ht,ft){ft===void 0&&(ft=ct);var pt={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,ct),modifiersData:{},elements:{reference:dt,popper:ht},attributes:{},styles:{}},mt=[],gt=!1,xt={state:pt,setOptions:function(wt){var Et=typeof wt=="function"?wt(pt.options):wt;vt(),pt.options=Object.assign({},ct,pt.options,Et),pt.scrollParents={reference:isElement(dt)?listScrollParents(dt):dt.contextElement?listScrollParents(dt.contextElement):[],popper:listScrollParents(ht)};var Rt=orderModifiers(mergeByName([].concat(st,pt.options.modifiers)));return pt.orderedModifiers=Rt.filter(function(Tt){return Tt.enabled}),yt(),xt.update()},forceUpdate:function(){if(!gt){var wt=pt.elements,Et=wt.reference,Rt=wt.popper;if(areValidElements(Et,Rt)){pt.rects={reference:getCompositeRect(Et,getOffsetParent(Rt),pt.options.strategy==="fixed"),popper:getLayoutRect(Rt)},pt.reset=!1,pt.placement=pt.options.placement,pt.orderedModifiers.forEach(function(Lt){return pt.modifiersData[Lt.name]=Object.assign({},Lt.data)});for(var Tt=0;Tt<pt.orderedModifiers.length;Tt++){if(pt.reset===!0){pt.reset=!1,Tt=-1;continue}var It=pt.orderedModifiers[Tt],At=It.fn,Dt=It.options,jt=Dt===void 0?{}:Dt,Ft=It.name;typeof At=="function"&&(pt=At({state:pt,options:jt,name:Ft,instance:xt})||pt)}}}},update:debounce(function(){return new Promise(function(St){xt.forceUpdate(),St(pt)})}),destroy:function(){vt(),gt=!0}};if(!areValidElements(dt,ht))return xt;xt.setOptions(ft).then(function(St){!gt&&ft.onFirstUpdate&&ft.onFirstUpdate(St)});function yt(){pt.orderedModifiers.forEach(function(St){var wt=St.name,Et=St.options,Rt=Et===void 0?{}:Et,Tt=St.effect;if(typeof Tt=="function"){var It=Tt({state:pt,name:wt,instance:xt,options:Rt}),At=function(){};mt.push(It||At)}})}function vt(){mt.forEach(function(St){return St()}),mt=[]}return xt}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});const WebcamOffIcon$1=nt=>jsxRuntimeExports.jsxs("svg",{width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:[jsxRuntimeExports.jsx("g",{clipPath:"url(#a)",children:jsxRuntimeExports.jsx("path",{d:"M22.359 17.84a1.196 1.196 0 0 0 .548-1.017V7.786a1.36 1.36 0 0 0-.548-1.017.97.97 0 0 0-1.095 0L17.43 8.804a3.4 3.4 0 0 0-3.286-3.286h-4.052L22.14 17.949c-.001-.11.108-.11.219-.11Zm.219 3.841-5.257-5.424L6.916 5.517 2.863 1.34a1.036 1.036 0 0 0-1.533 0 1.117 1.117 0 0 0 0 1.583l2.519 2.596A3.379 3.379 0 0 0 1 8.91v6.78a3.386 3.386 0 0 0 .945 2.415 3.175 3.175 0 0 0 2.341.975h9.857a2.84 2.84 0 0 0 2.082-.791l4.819 4.972a1.06 1.06 0 0 0 1.533 0 1.144 1.144 0 0 0 0-1.582v.002Z",fill:nt.fillcolor?nt.fillcolor:"#050A0E"})}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:"a",children:jsxRuntimeExports.jsx("path",{fill:nt.fillcolor,transform:"translate(1 1)",d:"M0 0h21.905v22.59H0z"})})})]});function WebcamOnIcon(nt){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...nt,children:[jsxRuntimeExports.jsx("mask",{id:"mask0_27_287",style:{maskType:"alpha"},width:"24",height:"24",x:"0",y:"0",maskUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 0H24V24H0z"})}),jsxRuntimeExports.jsx("g",{mask:"url(#mask0_27_287)",children:jsxRuntimeExports.jsx("path",{fill:nt.fillcolor,d:"M22.03 7.187a.98.98 0 00-1.079 0l-3.774 1.94a3.3 3.3 0 00-3.236-3.126H4.236A3.178 3.178 0 001 9.236v6.47a3.178 3.178 0 003.235 3.236h9.706a3.3 3.3 0 003.235-3.127l3.881 1.94a1.136 1.136 0 001.4-.43.972.972 0 00.109-.54V8.158a1.286 1.286 0 00-.538-.971z"})})]})}function MicOffIcon$2(nt){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("mask",{id:"mask0_25_170",style:{maskType:"alpha"},width:"24",height:"24",x:"0",y:"0",maskUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 0H24V24H0z"})}),jsxRuntimeExports.jsxs("g",{fill:nt.fillcolor?nt.fillcolor:"#050A0E",mask:"url(#mask0_25_170)",children:[jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M8.6 10.692V12.2c0 .902.38 1.767 1.054 2.404a3.71 3.71 0 002.546.996c.346 0 .687-.047 1.014-.138L8.6 10.692zm5.915 6.116a5.665 5.665 0 01-2.315.492 5.565 5.565 0 01-3.819-1.494C7.37 14.85 6.8 13.553 6.8 12.2v-.405a.827.827 0 00-.264-.6.928.928 0 00-.636-.25.928.928 0 00-.637.25.827.827 0 00-.263.6v.405c0 3.468 2.748 6.33 6.3 6.748V20.7H9.5a.928.928 0 00-.637.249.827.827 0 00-.263.601c0 .225.095.442.263.601.17.16.398.249.637.249h5.4c.238 0 .467-.09.636-.249a.827.827 0 00.264-.601.827.827 0 00-.264-.601.927.927 0 00-.636-.249h-1.8v-1.752a7.495 7.495 0 002.67-.842l-1.255-1.298zm4.16-1.633l-1.343-1.388A4.84 4.84 0 0017.6 12.2v-.405c0-.225.095-.441.263-.6a.927.927 0 01.637-.25c.238 0 .467.09.636.25.169.159.264.375.264.6v.405a6.491 6.491 0 01-.726 2.975zM15.8 12.203L8.654 4.814a3.34 3.34 0 011-1.818A3.71 3.71 0 0112.2 2c.955 0 1.87.358 2.545.996A3.307 3.307 0 0115.8 5.4v6.803z",clipRule:"evenodd"}),jsxRuntimeExports.jsx("rect",{width:"24.979",height:"1.817",x:"3.306",y:"3",rx:"0.909",transform:"rotate(45.956 3.306 3)"})]})]})}function MicOnIcon$1(nt){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...nt,children:[jsxRuntimeExports.jsx("mask",{id:"mask0_27_238",style:{maskType:"alpha"},width:"24",height:"24",x:"0",y:"0",maskUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 0H24V24H0z"})}),jsxRuntimeExports.jsx("g",{mask:"url(#mask0_27_238)",children:jsxRuntimeExports.jsx("path",{fill:nt.fillcolor?nt.fillcolor:"#fff",fillRule:"evenodd",d:"M9.655 2.996A3.307 3.307 0 008.6 5.4v6.8c0 .902.38 1.767 1.055 2.404a3.71 3.71 0 002.545.996 3.71 3.71 0 002.546-.996A3.307 3.307 0 0015.8 12.2V5.4c0-.902-.38-1.767-1.054-2.404A3.71 3.71 0 0012.2 2a3.71 3.71 0 00-2.545.996zm-3.119 8.198c.17.16.264.376.264.601v.405c0 1.353.569 2.65 1.582 3.606A5.565 5.565 0 0012.2 17.3a5.565 5.565 0 003.818-1.494c1.013-.956 1.582-2.253 1.582-3.606v-.405c0-.225.095-.441.264-.6a.928.928 0 01.636-.25c.239 0 .468.09.636.25.17.159.264.375.264.6v.405c0 1.656-.64 3.256-1.8 4.498-1.16 1.243-2.76 2.043-4.5 2.25V20.7h1.8c.239 0 .468.09.636.249.17.16.264.376.264.601a.827.827 0 01-.264.601.928.928 0 01-.636.249H9.5a.928.928 0 01-.636-.249.827.827 0 01-.264-.601c0-.225.095-.442.264-.601A.928.928 0 019.5 20.7h1.8v-1.752C7.748 18.53 5 15.668 5 12.2v-.405c0-.225.095-.441.264-.6a.928.928 0 01.636-.25c.239 0 .468.09.636.25z",clipRule:"evenodd"})})]})}function JoiningScreen({participantName:nt,setParticipantName:rt,setMeetingId:it,setToken:st,setSelectedMic:lt,setSelectedWebcam:ct,onClickStartMeeting:ut,micEnabled:dt,webcamEnabled:ht,setWebcamOn:ft,setMicOn:pt,setMeetingMode:mt,meetingMode:gt}){const[xt,yt]=reactExports.useState("video"),[{webcams:vt,mics:St},wt]=reactExports.useState({devices:[],webcams:[],mics:[]}),[Et,Rt]=reactExports.useState(null),[Tt,It]=reactExports.useState(!1),[At,Dt]=reactExports.useState(!1),jt=reactExports.useRef(),Ft=reactExports.useRef(),Lt=reactExports.useRef(),Mt=reactExports.useRef(),Ot=reactExports.useRef(),Nt=reactExports.useRef(),[$t,Vt]=reactExports.useState(!1),[Ut,zt]=reactExports.useState(null),Bt=()=>{Vt(!0)},Ht=Tr=>{Vt(!1)};useIsMobile();const Gt=reactExports.useMemo(()=>!!Et,[Et]),Xt=reactExports.useMemo(()=>!!Ut,[Ut]),Zt=()=>{const Tr=Mt.current;Tr&&(Tr.stop(),Rt(null),ft(!1))},hr=()=>{Mt.current||(gr({mic:!1,webcam:!0}),ft(!0))},nr=()=>{Mt.current?Zt():hr()},ir=()=>{const Tr=Ot.current;Tr&&(Tr.stop(),zt(null),pt(!1))},yr=()=>{Ot.current||(gr({mic:!0,webcam:!1}),pt(!0))},Cr=()=>{Ot.current?ir():yr()},Sr=async Tr=>{const Hr=Mt.current;Hr&&Hr.stop();const mn=(await navigator.mediaDevices.getUserMedia({video:{deviceId:Tr}})).getVideoTracks(),tn=mn.length?mn[0]:null;Rt(tn)},xr=async Tr=>{const Hr=Ot.current;Hr&&Hr.stop();const mn=(await navigator.mediaDevices.getUserMedia({audio:{deviceId:Tr}})).getAudioTracks(),tn=mn.length?mn[0]:null;clearInterval(Nt.current),zt(tn)},gr=async({mic:Tr,webcam:Hr,firstTime:Vr})=>{var mn,tn;if(Tr){const er={audio:!0},vr=(await navigator.mediaDevices.getUserMedia(er)).getAudioTracks(),Fr=vr.length?vr[0]:null;zt(Fr),Vr&&lt({id:(mn=Fr==null?void 0:Fr.getSettings())==null?void 0:mn.deviceId})}if(Hr){const er={video:{width:1280,height:720}},vr=(await navigator.mediaDevices.getUserMedia(er)).getVideoTracks(),Fr=vr.length?vr[0]:null;Rt(Fr),Vr&&ct({id:(tn=Fr==null?void 0:Fr.getSettings())==null?void 0:tn.deviceId})}};async function _r(){const Tr=Ot.current;Tr&&(Tr.muted&&It(!0),Tr.addEventListener("mute",Hr=>{It(!0)}))}const fr=async({micEnabled:Tr,webcamEnabled:Hr})=>{try{const Vr=await navigator.mediaDevices.enumerateDevices(),mn=Vr.filter(vr=>vr.kind==="videoinput"),tn=Vr.filter(vr=>vr.kind==="audioinput"),er=tn.length>0,tr=mn.length>0;wt({webcams:mn,mics:tn,devices:Vr}),er&&_r(),gr({mic:er&&Tr,webcam:tr&&Hr,firstTime:!0})}catch(Vr){console.log(Vr)}};reactExports.useEffect(()=>(Ot.current=Ut,_r(),()=>{const Tr=Ot.current;Tr&&Tr.stop(),Ot.current=null}),[Ut]),reactExports.useEffect(()=>{gt===Constants.modes.VIEWER&&(ir(),Zt())},[gt]),reactExports.useEffect(()=>{Mt.current=Et;var Tr=jt.current.currentTime>0&&!jt.current.paused&&!jt.current.ended&&jt.current.readyState>jt.current.HAVE_CURRENT_DATA;if(Et){const Hr=new MediaStream([Et]);if(jt.current&&(jt.current.srcObject=Hr,jt.current.pause&&!Tr))try{jt.current.play()}catch(Vr){console.log("error in playing video",Vr)}setTimeout(()=>{if(Ft.current){Ft.current.srcObject=Hr;try{Ft.current.play()}catch(Vr){console.log("error in playing video",Vr)}}},1e3)}else jt.current&&(jt.current.srcObject=null),Ft.current&&(Ft.current.srcObject=null)},[Et,xt,$t]),reactExports.useEffect(()=>{fr({micEnabled:dt,webcamEnabled:ht})},[]);const Nr=({onClick:Tr,onState:Hr,OnIcon:Vr,OffIcon:mn,mic:tn})=>{const[er,tr]=reactExports.useState(!1),vr=reactExports.useRef(),Fr=reactExports.useRef(),Kr=()=>{createPopper(vr.current,Fr.current,{placement:"top"}),tr(!0)},qr=()=>{tr(!1)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("button",{ref:vr,onMouseEnter:Kr,onMouseLeave:qr,onClick:Tr,className:`rounded-full min-w-auto w-11 h-11 flex items-center justify-center ${Hr?"bg-white":"bg-red-600 text-white"}`,disabled:gt===Constants.modes.VIEWER,children:Hr?jsxRuntimeExports.jsx(Vr,{fillcolor:Hr?"#050A0E":"#fff"}):jsxRuntimeExports.jsx(mn,{fillcolor:Hr?"#050A0E":"#fff"})})}),jsxRuntimeExports.jsx("div",{style:{zIndex:999},className:`${er?"":"hidden"} overflow-hidden flex flex-col items-center justify-center pb-1.5`,ref:Fr})]})};return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0",children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col flex-1 h-screen overflow-y-auto bg-gray-200",children:jsxRuntimeExports.jsx("div",{className:"flex flex-1 flex-col md:flex-row items-center justify-center md:m-[72px] m-16",children:jsxRuntimeExports.jsx("div",{className:"container grid grid-flow-row md:grid-flow-col ",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-12",children:[jsxRuntimeExports.jsx("div",{className:"col-span-12 md:col-span-7 2xl:col-span-6",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center p-1.5 sm:p-4 lg:p-6",children:jsxRuntimeExports.jsx("div",{className:"relative w-full pl-5 pr-5 md:pl-4 sm:pl-10 md:pr-4 sm:pr-10",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full",style:{height:"45vh"},children:[jsxRuntimeExports.jsx("video",{autoPlay:!0,playsInline:!0,muted:!0,ref:jt,controls:!1,style:{backgroundColor:"#1c1c1c"},className:"rounded-[10px] h-full w-full object-cover flex items-center justify-center flip"}),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"absolute top-0 bottom-0 left-0 right-0 flex items-center justify-center",children:Gt?null:jsxRuntimeExports.jsx("p",{className:"text-xl text-white xl:text-lg 2xl:text-xl",children:gt===Constants.modes.VIEWER?"카메라와 마이크가 허용되지 않았습니다.":"카메라가 꺼져있습니다."})})}),$t?jsxRuntimeExports.jsx(SettingDialogueBox,{open:$t,onClose:Ht,popupVideoPlayerRef:Ft,popupAudioPlayerRef:Lt,changeWebcam:Sr,changeMic:xr,setting:xt,setSetting:yt,webcams:vt,mics:St,setSelectedMic:lt,setSelectedWebcam:ct,videoTrack:Et,audioTrack:Ut}):null,gt===Constants.modes.CONFERENCE&&jsxRuntimeExports.jsx("div",{className:"absolute left-0 right-0 xl:bottom-6 bottom-4",children:jsxRuntimeExports.jsxs("div",{className:"container grid items-center justify-center grid-flow-col space-x-4 md:-m-2",children:[jsxRuntimeExports.jsx(Nr,{onClick:Cr,onState:Xt,mic:!0,OnIcon:MicOnIcon$1,OffIcon:MicOffIcon$2}),jsxRuntimeExports.jsx(Nr,{onClick:nr,onState:Gt,mic:!1,OnIcon:WebcamOnIcon,OffIcon:WebcamOffIcon$1})]})})]})})})}),jsxRuntimeExports.jsx("div",{className:"col-start-1 col-end-13",children:gt===Constants.modes.CONFERENCE&&jsxRuntimeExports.jsx("div",{className:"bg-gray-700 rounded cursor-pointer md:left-12 lg:left-24 xl:left-44 md:right-12 lg:right-24 xl:right-44",onClick:Tr=>{Bt()},children:jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-center justify-center p-1 m-1",children:[jsxRuntimeExports.jsx("button",{className:"text-white",children:jsxRuntimeExports.jsx(CheckCircleIcon$1,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("p",{className:"ml-1 text-sm text-white",children:"카메라와 마이크를 확인하세요"})]})})}),jsxRuntimeExports.jsx("div",{className:"col-span-12 md:col-span-5 2xl:col-span-6 md:relative",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center flex-1 mt-3 xl:m-16 lg:m-6 md:mt-9 lg:mt-14 xl:mt-20 md:absolute md:left-0 md:right-0 md:top-0 md:bottom-0",children:jsxRuntimeExports.jsx(MeetingDetailsScreen,{participantName:nt,setParticipantName:rt,videoTrack:Et,setVideoTrack:Rt,setMeetingMode:mt,meetingMode:gt,onClickStartMeeting:ut,onClickJoin:async Tr=>{const Hr=await getToken();await validateMeeting({roomId:Tr,token:Hr})?(st(Hr),it(Tr),Et&&(Et.stop(),Rt(null)),ut()):Swal.fire({title:"올바른 입장 코드를 입력해주세요.",icon:"error",showConfirmButton:!0})},_handleOnCreateMeeting:async()=>{const Tr=await getToken(),Hr=await createMeeting({token:Tr});return st(Tr),it(Hr),Hr}})})})]})})})}),jsxRuntimeExports.jsx(ConfirmBox,{open:Tt,successText:"OKAY",onSuccess:()=>{It(!1)},title:"System mic is muted",subTitle:`You're default microphone is muted, please unmute it or increase audio\r
            input volume from system settings.`}),jsxRuntimeExports.jsx(ConfirmBox,{open:At,successText:"DISMISS",onSuccess:()=>{Dt(!1)},title:"Mic or webcam not available",subTitle:"Please connect a mic and webcam to speak and share your video in the meeting. You can also join without them."})]})}const useIsTab=()=>reactResponsiveExports.useMediaQuery({minWidth:768,maxWidth:1223});function getQualityScore(nt){const rt=nt.packetsLost/nt.totalPackets||0,it=nt.jitter,st=nt.rtt;let lt=100;return lt-=rt*50>50?50:rt*50,lt-=(it/30*25>25?25:it/30*25)||0,lt-=(st/300*25>25?25:st/300*25)||0,lt/10}const nameTructed$1=(nt,rt)=>(nt==null?void 0:nt.length)>rt?rt===15?`${nt.substr(0,12)}...`:`${nt.substr(0,rt)}...`:nt,sideBarModes={PARTICIPANTS:"PARTICIPANTS",CHAT:"CHAT",LAYOUT:"LAYOUT",POLLS:"POLLS",CREATE_POLL:"CREATE_POLL",ECOMMERCE:"ECOMMERCE"},trimSnackBarText=(nt="")=>nt.length>52?`${nt.substr(0,47)}...`:nt,nameTructed=(nt,rt)=>(nt==null?void 0:nt.length)>rt?rt===15?`${nt.substr(0,12)}...`:`${nt.substr(0,rt)}...`:nt,json_verify=nt=>{try{return JSON.parse(nt),!0}catch{return!1}};function formatAMPM(nt){var rt=nt.getHours(),it=nt.getMinutes(),st=rt>=12?"pm":"am";rt=rt%12,rt=rt||12,it=it<10?"0"+it:it;var lt=rt+":"+it+" "+st;return lt}const ChatMessage=({senderId:nt,senderName:rt,text:it,timestamp:st})=>{var dt;const lt=useMeeting(),ut=((dt=lt==null?void 0:lt.localParticipant)==null?void 0:dt.id)===nt;return jsxRuntimeExports.jsx("div",{className:`flex ${ut?"justify-end":"justify-start"} mt-4`,style:{maxWidth:"100%"},children:jsxRuntimeExports.jsxs("div",{className:`flex ${ut?"items-end bg-teal-700":"items-start bg-gray-500"} flex-col py-1 px-2 rounded-md`,children:[jsxRuntimeExports.jsx("p",{style:{color:"#ffffff80"},children:ut?"You":nameTructed(rt,15)}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("p",{className:"inline-block text-right text-white break-words whitespace-pre-wrap",children:it})}),jsxRuntimeExports.jsx("div",{className:"mt-1",children:jsxRuntimeExports.jsx("p",{className:"text-xs",style:{color:"#ffffff80"},children:formatAMPM(new Date(st))})})]})})},ChatInput=({inputHeight:nt})=>{const[rt,it]=reactExports.useState(""),{publish:st}=usePubSub("CHAT"),lt=reactExports.useRef();return jsxRuntimeExports.jsx("div",{className:"flex items-center w-full px-2",style:{height:nt},children:jsxRuntimeExports.jsxs("div",{className:"relative w-full",children:[jsxRuntimeExports.jsx("span",{className:"absolute inset-y-0 right-0 flex mr-2 rotate-90 ",children:jsxRuntimeExports.jsx("button",{disabled:rt.length<1,type:"submit",className:"p-1 focus:outline-none focus:shadow-outline",onClick:()=>{var ut;const ct=rt.trim();ct.length>0&&(st(ct,{persist:!0}),setTimeout(()=>{it("")},100),(ut=lt.current)==null||ut.focus())},children:jsxRuntimeExports.jsx(PaperAirplaneIcon$1,{className:`w-6 h-6 ${rt.length<1?"text-gray-500":"text-teal-700"}`})})}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full py-4 pl-2 pr-10 text-base text-black border border-gray-400 rounded bg-gray-750 focus:outline-none",placeholder:"메세지를 입력하세요",ref:lt,value:rt,onChange:ct=>{it(ct.target.value)},onKeyPress:ct=>{var ut;if(ct.key==="Enter"&&!ct.shiftKey){ct.preventDefault();const dt=rt.trim();dt.length>0&&(st(dt,{persist:!0}),setTimeout(()=>{it("")},100),(ut=lt.current)==null||ut.focus())}}})]})})},ChatMessages=({listHeight:nt})=>{const rt=reactExports.useRef(),{messages:it}=usePubSub("CHAT"),st=lt=>{if(!lt)rt.current&&(rt.current.scrollTop=rt.current.scrollHeight);else{const{text:ct}=lt;if(json_verify(ct)){const{type:ut}=JSON.parse(ct);ut==="CHAT"&&rt.current&&(rt.current.scrollTop=rt.current.scrollHeight)}}};return reactExports.useEffect(()=>{st()},[it]),it?jsxRuntimeExports.jsx("div",{ref:rt,style:{overflowY:"scroll",height:nt},children:jsxRuntimeExports.jsx("div",{className:"p-4",children:it.map((lt,ct)=>{const{senderId:ut,senderName:dt,message:ht,timestamp:ft}=lt;return jsxRuntimeExports.jsx(ChatMessage,{senderId:ut,senderName:dt,text:ht,timestamp:ft},`chat_item_${ct}`)})})}):jsxRuntimeExports.jsx("p",{children:"No messages"})};function ChatPanel({panelHeight:nt}){const it=nt-72;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ChatMessages,{listHeight:it}),jsxRuntimeExports.jsx(ChatInput,{inputHeight:72})]})}const MicOffIcon$1=nt=>jsxRuntimeExports.jsx("svg",{width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:jsxRuntimeExports.jsx("path",{d:"M14.835 7.607h-1.417c.003.594-.12 1.18-.363 1.721l1.027 1.033c.49-.834.75-1.785.753-2.754Zm-3.346.138c0-.045.012-.092.012-.138V2.573a2.537 2.537 0 0 0-.713-1.816A2.5 2.5 0 0 0 9 0a2.484 2.484 0 0 0-1.787.757 2.522 2.522 0 0 0-.713 1.816v.153l4.988 5.02ZM2.562.895 1.5 1.963l5.009 5.043v.61c0 .665.262 1.304.73 1.776A2.484 2.484 0 0 0 9 10.129c.182-.003.364-.025.542-.067l1.383 1.392c-.603.283-1.26.43-1.925.432a4.294 4.294 0 0 1-3.088-1.216 4.357 4.357 0 0 1-1.325-3.063H3.167a5.88 5.88 0 0 0 1.475 3.742 5.797 5.797 0 0 0 3.525 1.897v2.747h1.666v-2.746a5.88 5.88 0 0 0 2.117-.76L15.438 16l1.062-1.066L2.562.894Z",fill:"#9E9EA7"})}),MicOnIcon=nt=>jsxRuntimeExports.jsx("svg",{width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:jsxRuntimeExports.jsx("path",{d:"M8.92 10.11a2.525 2.525 0 0 0 2.531-2.525l.008-5.048a2.537 2.537 0 1 0-5.074 0v5.048a2.531 2.531 0 0 0 2.535 2.524Zm4.482-2.525a4.373 4.373 0 0 1-4.482 4.29 4.373 4.373 0 0 1-4.483-4.29H3a5.88 5.88 0 0 0 5.075 5.654V16h1.692v-2.761a5.88 5.88 0 0 0 5.074-5.654h-1.439Z",fill:"#fff"})}),SvgComponent=nt=>jsxRuntimeExports.jsxs("svg",{width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:[jsxRuntimeExports.jsxs("g",{clipPath:"url(#a)",children:[jsxRuntimeExports.jsx("mask",{id:"b",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:1,width:24,height:24,children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 1h24v24H0z"})}),jsxRuntimeExports.jsx("g",{mask:"url(#b)",children:jsxRuntimeExports.jsx("path",{d:"M10.903 2.55c0-.278.101-.546.281-.742a.921.921 0 0 1 .68-.308c.254 0 .499.11.679.308.18.196.281.464.281.742v7.671c.442.151.871.357 1.28.615V3.95c0-.278.102-.546.282-.742a.921.921 0 0 1 .68-.308c.254 0 .498.11.678.308.18.196.282.464.282.742v10.208a3.681 3.681 0 0 0-1.626.75 4.126 4.126 0 0 0-1.149 1.465 7.123 7.123 0 0 1 3.415-.873c.17 0 .333-.074.453-.205a.734.734 0 0 0 .187-.495v-2.115c.003-.83.307-1.625.844-2.212a.918.918 0 0 1 .674-.29c.25.004.49.114.667.308a1.1 1.1 0 0 1 .282.73c.003.273-.092.537-.265.736-.089.097-.16.212-.207.338a1.127 1.127 0 0 0-.074.4V15.5h-.004c-.05 1.408-.584 2.743-1.496 3.74l-1.482 1.62c-.96 1.05-2.263 1.64-3.622 1.64h-1.72c-1.698 0-3.327-.738-4.528-2.05-1.2-1.313-1.875-3.093-1.875-4.95V6.75c0-.278.101-.546.281-.742a.92.92 0 0 1 .68-.308.92.92 0 0 1 .679.308c.18.196.281.464.281.742v5.151a6.466 6.466 0 0 1 1.28-1.065V3.95c0-.278.102-.546.282-.742a.92.92 0 0 1 .68-.308.92.92 0 0 1 .678.308c.18.196.282.464.282.742v6.09c.422-.092.85-.14 1.28-.14V2.55Z",fill:nt.fillcolor})})]}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:"a",children:jsxRuntimeExports.jsx("path",{fill:nt.fillcolor,d:"M0 0h24v24H0z"})})})]}),VideoCamOffIcon=nt=>jsxRuntimeExports.jsx("svg",{width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:jsxRuntimeExports.jsx("path",{d:"M16.858 11.741a.844.844 0 0 0 .29-.305.813.813 0 0 0 .104-.404v-6.3a.926.926 0 0 0-.116-.398.956.956 0 0 0-.278-.312.712.712 0 0 0-.788 0l-2.756 1.419a2.337 2.337 0 0 0-.715-1.598 2.482 2.482 0 0 0-1.648-.693H8.037l8.663 8.668c0-.077.078-.077.158-.077Zm.157 2.679-3.78-3.782L5.753 3.15 2.84.236A.745.745 0 0 0 2.29 0a.765.765 0 0 0-.552.236.778.778 0 0 0-.237.552.758.758 0 0 0 .237.552l1.811 1.81a2.449 2.449 0 0 0-1.48.812A2.312 2.312 0 0 0 1.5 5.515v4.728c-.006.31.05.618.167.907.117.29.291.553.513.777.217.219.479.393.768.51.29.116.601.174.915.17h7.088c.275.01.55-.034.806-.128.258-.095.492-.24.69-.424l3.466 3.467a.762.762 0 0 0 .551.228.783.783 0 0 0 .551-.228.785.785 0 0 0 .229-.552.785.785 0 0 0-.229-.552v.002Z",fill:"#9E9EA7"})}),VideoCamOnIcon=nt=>jsxRuntimeExports.jsxs("svg",{width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:[jsxRuntimeExports.jsx("mask",{id:"a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:18,height:18,children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 0h18v18H0z"})}),jsxRuntimeExports.jsx("g",{mask:"url(#a)",children:jsxRuntimeExports.jsx("path",{d:"M17.549 3.99a.818.818 0 0 0-.9 0L13.5 5.61a2.754 2.754 0 0 0-2.7-2.61H2.7A2.652 2.652 0 0 0 0 5.7v5.4a2.652 2.652 0 0 0 2.7 2.7h8.1a2.754 2.754 0 0 0 2.699-2.61l3.24 1.62a.947.947 0 0 0 1.168-.36.81.81 0 0 0 .09-.45V4.8a1.073 1.073 0 0 0-.448-.81Z",fill:"#fff"})})]}),MeetingAppContext=reactExports.createContext(),useMeetingAppContext=()=>reactExports.useContext(MeetingAppContext),MeetingAppProvider=({children:nt})=>{const[rt,it]=reactExports.useState([]),[st,lt]=reactExports.useState(null),[ct,ut]=reactExports.useState([]),[dt,ht]=reactExports.useState([]),[ft,pt]=reactExports.useState([]),[mt,gt]=reactExports.useState(null),xt=reactExports.useMemo(()=>dt.map(vt=>({...vt,isActive:ft.findIndex(({pollId:St})=>St===vt.id)===-1})),[dt,ft]),yt=()=>{const vt=reactExports.useRef(),St=Et=>{const Rt=[...vt.current],Tt={participantId:Et,raisedHandOn:new Date().getTime()},It=Rt.findIndex(({participantId:At})=>At===Et);It===-1?Rt.push(Tt):Rt[It]=Tt,it(Rt)};reactExports.useEffect(()=>{vt.current=rt},[rt]);const wt=()=>{const Et=[...vt.current],Rt=new Date().getTime(),Tt=Et.filter(({raisedHandOn:It})=>parseInt(It)+15e3>parseInt(Rt));Et.length!==Tt.length&&it(Tt)};return reactExports.useEffect(()=>{const Et=setInterval(wt,1e3);return()=>{clearInterval(Et)}},[]),{participantRaisedHand:St}};return jsxRuntimeExports.jsx(MeetingAppContext.Provider,{value:{raisedHandsParticipants:rt,draftPolls:ct,createdPolls:dt,endedPolls:ft,afterMeetingJoinedHLSState:mt,sideBarMode:st,setRaisedHandsParticipants:it,setDraftPolls:ut,setCreatedPolls:ht,setEndedPolls:pt,setAfterMeetingJoinedHLSState:gt,setSideBarMode:lt,polls:xt,useRaisedHandParticipants:yt},children:nt})};function ParticipantListItem({participantId:nt,raisedHand:rt}){const{micOn:it,webcamOn:st,displayName:lt,isLocal:ct,mode:ut}=useParticipant(nt);return jsxRuntimeExports.jsx("div",{className:"p-2 m-2 mt-2 mb-0 bg-gray-700 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"relative flex items-center justify-center flex-1",children:[jsxRuntimeExports.jsx("div",{style:{color:"#212032",backgroundColor:"#757575"},className:"relative flex items-center justify-center w-10 h-10 mt-0 overflow-hidden text-lg rounded",children:lt==null?void 0:lt.charAt(0).toUpperCase()}),jsxRuntimeExports.jsx("div",{className:"flex flex-1 ml-2 mr-1",children:jsxRuntimeExports.jsx("p",{className:"overflow-hidden text-base text-white whitespace-pre-wrap overflow-ellipsis",children:ct?"You":nameTructed(lt,15)})}),rt&&jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center p-1 m-1",children:jsxRuntimeExports.jsx(SvgComponent,{fillcolor:"#fff"})}),jsxRuntimeExports.jsx("div",{className:"p-1 m-1",children:it?jsxRuntimeExports.jsx(MicOnIcon,{}):jsxRuntimeExports.jsx(MicOffIcon$1,{})}),jsxRuntimeExports.jsx("div",{className:"p-1 m-1",children:st?jsxRuntimeExports.jsx(VideoCamOnIcon,{}):jsxRuntimeExports.jsx(VideoCamOffIcon,{})})]})})}function ParticipantPanel({panelHeight:nt}){const{raisedHandsParticipants:rt}=useMeetingAppContext(),st=useMeeting().participants,lt=reactExports.useMemo(()=>{const ht=[...st.keys()].filter(mt=>rt.findIndex(({participantId:gt})=>gt===mt)===-1);return[...rt.sort((mt,gt)=>mt.raisedHandOn>gt.raisedHandOn?-1:mt.raisedHandOn<gt.raisedHandOn?1:0).map(({participantId:mt})=>({raisedHand:!0,participantId:mt})),...ht.map(mt=>({raisedHand:!1,participantId:mt}))]},[rt,st]),ct=dt=>dt,ut=reactExports.useMemo(()=>ct(lt),[lt,st]);return jsxRuntimeExports.jsx("div",{className:"flex w-full flex-col bg-gray-200 overflow-y-auto ",style:{height:nt},children:jsxRuntimeExports.jsx("div",{className:"flex flex-col flex-1",style:{height:nt-100},children:[...st.keys()].map((dt,ht)=>{const{raisedHand:ft,participantId:pt}=ut[ht];return jsxRuntimeExports.jsx(ParticipantListItem,{participantId:pt,raisedHand:ft},ht)})})})}const SideBarTabView=({height:nt,sideBarContainerWidth:rt,panelHeight:it,panelHeaderHeight:st,panelHeaderPadding:lt,panelPadding:ct,handleClose:ut,meetingMode:dt})=>{useMeeting();const{sideBarMode:ht,draftPolls:ft,polls:pt}=useMeetingAppContext();return jsxRuntimeExports.jsx("div",{className:"bg-gray-200",style:{height:nt,width:rt,paddingTop:ct,paddingLeft:ct,paddingRight:ct,paddingBottom:ct},children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{className:"bg-gray-750",style:{height:nt,borderRadius:10,overflow:"hidden"},children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ht&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",style:{padding:lt,height:st-1,borderBottom:"1px solid #70707033"},children:[jsxRuntimeExports.jsx("p",{className:"text-base font-bold text-gray-800",children:ht==="CHAT"?"채팅":"참가자"}),jsxRuntimeExports.jsx("button",{className:"text-gray-800",onClick:ut,style:{margin:0,padding:0},children:jsxRuntimeExports.jsx(XMarkIcon$3,{className:"w-5 h-5"})})]}),ht==="PARTICIPANTS"?jsxRuntimeExports.jsx(ParticipantPanel,{panelHeight:it}):ht==="CHAT"?jsxRuntimeExports.jsx(ChatPanel,{panelHeight:it}):null]})})})})};function SidebarConatiner({height:nt,sideBarContainerWidth:rt,meetingMode:it}){const{raisedHandsParticipants:st,sideBarMode:lt,setSideBarMode:ct}=useMeetingAppContext(),ut=useIsMobile(),dt=useIsTab(),ht=reactResponsiveExports.useMediaQuery({minWidth:1024,maxWidth:1439}),ft=reactResponsiveExports.useMediaQuery({minWidth:1440}),pt=8,mt=nt-pt*3.5,gt=ut?40:dt?44:ht?48:ft?52:0,xt=ut?6:dt?8:ht?10:ft?12:0,yt=()=>{ct(null)};return lt?dt||ut?jsxRuntimeExports.jsx(qe,{appear:!0,show:!!lt,as:reactExports.Fragment,children:jsxRuntimeExports.jsxs(_t,{as:"div",className:"relative",style:{zIndex:9999},onClose:yt,children:[jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"translate-y-full opacity-0 scale-95",enterTo:"translate-y-0 opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"translate-y-0 opacity-100 scale-100",leaveTo:"translate-y-full opacity-0 scale-95",children:jsxRuntimeExports.jsx("div",{className:"fixed inset-0 overflow-y-hidden",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-screen text-center",children:jsxRuntimeExports.jsx(_t.Panel,{className:"w-screen overflow-hidden transition-all transform bg-gray-800 shadow-xl",children:jsxRuntimeExports.jsx(SideBarTabView,{height:"100%",sideBarContainerWidth:"100%",panelHeight:nt,raisedHandsParticipants:st,panelHeaderHeight:gt,panelHeaderPadding:xt,panelPadding:pt,handleClose:yt})})})})})]})}):jsxRuntimeExports.jsx(SideBarTabView,{height:mt,sideBarContainerWidth:rt,panelHeight:mt-gt-xt,raisedHandsParticipants:st,panelHeaderHeight:gt,panelHeaderPadding:xt,panelPadding:pt,handleClose:yt,meetingMode:it}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}var loadScript=function(rt,it,st){var lt=document.head||document.getElementsByTagName("head")[0],ct=document.createElement("script");typeof it=="function"&&(st=it,it={}),it=it||{},st=st||function(){},ct.type=it.type||"text/javascript",ct.charset=it.charset||"utf8",ct.async="async"in it?!!it.async:!0,ct.src=rt,it.attrs&&setAttributes(ct,it.attrs),it.text&&(ct.text=""+it.text);var ut="onload"in ct?stdOnEnd:ieOnEnd;ut(ct,st),ct.onload||stdOnEnd(ct,st),lt.appendChild(ct)};function setAttributes(nt,rt){for(var it in rt)nt.setAttribute(it,rt[it])}function stdOnEnd(nt,rt){nt.onload=function(){this.onerror=this.onload=null,rt(null,nt)},nt.onerror=function(){this.onerror=this.onload=null,rt(new Error("Failed to load "+this.src),nt)}}function ieOnEnd(nt,rt){nt.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,rt(null,nt))}}var isMergeableObject=function(rt){return isNonNullObject(rt)&&!isSpecial(rt)};function isNonNullObject(nt){return!!nt&&typeof nt=="object"}function isSpecial(nt){var rt=Object.prototype.toString.call(nt);return rt==="[object RegExp]"||rt==="[object Date]"||isReactElement(nt)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(nt){return nt.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(nt){return Array.isArray(nt)?[]:{}}function cloneUnlessOtherwiseSpecified(nt,rt){return rt.clone!==!1&&rt.isMergeableObject(nt)?deepmerge(emptyTarget(nt),nt,rt):nt}function defaultArrayMerge(nt,rt,it){return nt.concat(rt).map(function(st){return cloneUnlessOtherwiseSpecified(st,it)})}function getMergeFunction(nt,rt){if(!rt.customMerge)return deepmerge;var it=rt.customMerge(nt);return typeof it=="function"?it:deepmerge}function getEnumerableOwnPropertySymbols(nt){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(nt).filter(function(rt){return Object.propertyIsEnumerable.call(nt,rt)}):[]}function getKeys(nt){return Object.keys(nt).concat(getEnumerableOwnPropertySymbols(nt))}function propertyIsOnObject(nt,rt){try{return rt in nt}catch{return!1}}function propertyIsUnsafe(nt,rt){return propertyIsOnObject(nt,rt)&&!(Object.hasOwnProperty.call(nt,rt)&&Object.propertyIsEnumerable.call(nt,rt))}function mergeObject(nt,rt,it){var st={};return it.isMergeableObject(nt)&&getKeys(nt).forEach(function(lt){st[lt]=cloneUnlessOtherwiseSpecified(nt[lt],it)}),getKeys(rt).forEach(function(lt){propertyIsUnsafe(nt,lt)||(propertyIsOnObject(nt,lt)&&it.isMergeableObject(rt[lt])?st[lt]=getMergeFunction(lt,it)(nt[lt],rt[lt],it):st[lt]=cloneUnlessOtherwiseSpecified(rt[lt],it))}),st}function deepmerge(nt,rt,it){it=it||{},it.arrayMerge=it.arrayMerge||defaultArrayMerge,it.isMergeableObject=it.isMergeableObject||isMergeableObject,it.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var st=Array.isArray(rt),lt=Array.isArray(nt),ct=st===lt;return ct?st?it.arrayMerge(nt,rt,it):mergeObject(nt,rt,it):cloneUnlessOtherwiseSpecified(rt,it)}deepmerge.all=function(rt,it){if(!Array.isArray(rt))throw new Error("first argument should be an array");return rt.reduce(function(st,lt){return deepmerge(st,lt,it)},{})};var deepmerge_1=deepmerge,cjs=deepmerge_1,__create$4=Object.create,__defProp$6=Object.defineProperty,__getOwnPropDesc$6=Object.getOwnPropertyDescriptor,__getOwnPropNames$6=Object.getOwnPropertyNames,__getProtoOf$4=Object.getPrototypeOf,__hasOwnProp$6=Object.prototype.hasOwnProperty,__export$6=(nt,rt)=>{for(var it in rt)__defProp$6(nt,it,{get:rt[it],enumerable:!0})},__copyProps$6=(nt,rt,it,st)=>{if(rt&&typeof rt=="object"||typeof rt=="function")for(let lt of __getOwnPropNames$6(rt))!__hasOwnProp$6.call(nt,lt)&&lt!==it&&__defProp$6(nt,lt,{get:()=>rt[lt],enumerable:!(st=__getOwnPropDesc$6(rt,lt))||st.enumerable});return nt},__toESM$4=(nt,rt,it)=>(it=nt!=null?__create$4(__getProtoOf$4(nt)):{},__copyProps$6(rt||!nt||!nt.__esModule?__defProp$6(it,"default",{value:nt,enumerable:!0}):it,nt)),__toCommonJS$6=nt=>__copyProps$6(__defProp$6({},"__esModule",{value:!0}),nt),utils_exports={};__export$6(utils_exports,{callPlayer:()=>callPlayer,getConfig:()=>getConfig,getSDK:()=>getSDK,isBlobUrl:()=>isBlobUrl,isMediaStream:()=>isMediaStream,lazy:()=>lazy,omit:()=>omit,parseEndTime:()=>parseEndTime,parseStartTime:()=>parseStartTime,queryString:()=>queryString,randomString:()=>randomString,supportsWebKitPresentationMode:()=>supportsWebKitPresentationMode});var utils=__toCommonJS$6(utils_exports),import_react$2=__toESM$4(reactExports),import_load_script=__toESM$4(loadScript),import_deepmerge$1=__toESM$4(cjs);const lazy=nt=>import_react$2.default.lazy(async()=>{const rt=await nt();return typeof rt.default=="function"?rt:rt.default}),MATCH_START_QUERY=/[?&#](?:start|t)=([0-9hms]+)/,MATCH_END_QUERY=/[?&#]end=([0-9hms]+)/,MATCH_START_STAMP=/(\d+)(h|m|s)/g,MATCH_NUMERIC=/^\d+$/;function parseTimeParam(nt,rt){if(nt instanceof Array)return;const it=nt.match(rt);if(it){const st=it[1];if(st.match(MATCH_START_STAMP))return parseTimeString(st);if(MATCH_NUMERIC.test(st))return parseInt(st)}}function parseTimeString(nt){let rt=0,it=MATCH_START_STAMP.exec(nt);for(;it!==null;){const[,st,lt]=it;lt==="h"&&(rt+=parseInt(st,10)*60*60),lt==="m"&&(rt+=parseInt(st,10)*60),lt==="s"&&(rt+=parseInt(st,10)),it=MATCH_START_STAMP.exec(nt)}return rt}function parseStartTime(nt){return parseTimeParam(nt,MATCH_START_QUERY)}function parseEndTime(nt){return parseTimeParam(nt,MATCH_END_QUERY)}function randomString(){return Math.random().toString(36).substr(2,5)}function queryString(nt){return Object.keys(nt).map(rt=>`${rt}=${nt[rt]}`).join("&")}function getGlobal(nt){return window[nt]?window[nt]:window.exports&&window.exports[nt]?window.exports[nt]:window.module&&window.module.exports&&window.module.exports[nt]?window.module.exports[nt]:null}const requests={},getSDK=function(rt,it,st=null,lt=()=>!0,ct=import_load_script.default){const ut=getGlobal(it);return ut&&lt(ut)?Promise.resolve(ut):new Promise((dt,ht)=>{if(requests[rt]){requests[rt].push({resolve:dt,reject:ht});return}requests[rt]=[{resolve:dt,reject:ht}];const ft=pt=>{requests[rt].forEach(mt=>mt.resolve(pt))};if(st){const pt=window[st];window[st]=function(){pt&&pt(),ft(getGlobal(it))}}ct(rt,pt=>{pt?(requests[rt].forEach(mt=>mt.reject(pt)),requests[rt]=null):st||ft(getGlobal(it))})})};function getConfig(nt,rt){return(0,import_deepmerge$1.default)(rt.config,nt.config)}function omit(nt,...rt){const it=[].concat(...rt),st={},lt=Object.keys(nt);for(const ct of lt)it.indexOf(ct)===-1&&(st[ct]=nt[ct]);return st}function callPlayer(nt,...rt){if(!this.player||!this.player[nt]){let it=`ReactPlayer: ${this.constructor.displayName} player could not call %c${nt}%c – `;return this.player?this.player[nt]||(it+="The method was not available"):it+="The player was not available",console.warn(it,"font-weight: bold",""),null}return this.player[nt](...rt)}function isMediaStream(nt){return typeof window<"u"&&typeof window.MediaStream<"u"&&nt instanceof window.MediaStream}function isBlobUrl(nt){return/^blob:/.test(nt)}function supportsWebKitPresentationMode(nt=document.createElement("video")){const rt=/iPhone|iPod/.test(navigator.userAgent)===!1;return nt.webkitSupportsPresentationMode&&typeof nt.webkitSetPresentationMode=="function"&&rt}function enableStubOn(nt){return nt}var __defProp$5=Object.defineProperty,__getOwnPropDesc$5=Object.getOwnPropertyDescriptor,__getOwnPropNames$5=Object.getOwnPropertyNames,__hasOwnProp$5=Object.prototype.hasOwnProperty,__export$5=(nt,rt)=>{for(var it in rt)__defProp$5(nt,it,{get:rt[it],enumerable:!0})},__copyProps$5=(nt,rt,it,st)=>{if(rt&&typeof rt=="object"||typeof rt=="function")for(let lt of __getOwnPropNames$5(rt))!__hasOwnProp$5.call(nt,lt)&&lt!==it&&__defProp$5(nt,lt,{get:()=>rt[lt],enumerable:!(st=__getOwnPropDesc$5(rt,lt))||st.enumerable});return nt},__toCommonJS$5=nt=>__copyProps$5(__defProp$5({},"__esModule",{value:!0}),nt),patterns_exports={};__export$5(patterns_exports,{AUDIO_EXTENSIONS:()=>AUDIO_EXTENSIONS,DASH_EXTENSIONS:()=>DASH_EXTENSIONS,FLV_EXTENSIONS:()=>FLV_EXTENSIONS,HLS_EXTENSIONS:()=>HLS_EXTENSIONS,MATCH_URL_DAILYMOTION:()=>MATCH_URL_DAILYMOTION,MATCH_URL_FACEBOOK:()=>MATCH_URL_FACEBOOK,MATCH_URL_FACEBOOK_WATCH:()=>MATCH_URL_FACEBOOK_WATCH,MATCH_URL_KALTURA:()=>MATCH_URL_KALTURA,MATCH_URL_MIXCLOUD:()=>MATCH_URL_MIXCLOUD,MATCH_URL_SOUNDCLOUD:()=>MATCH_URL_SOUNDCLOUD,MATCH_URL_STREAMABLE:()=>MATCH_URL_STREAMABLE,MATCH_URL_TWITCH_CHANNEL:()=>MATCH_URL_TWITCH_CHANNEL,MATCH_URL_TWITCH_VIDEO:()=>MATCH_URL_TWITCH_VIDEO,MATCH_URL_VIDYARD:()=>MATCH_URL_VIDYARD,MATCH_URL_VIMEO:()=>MATCH_URL_VIMEO,MATCH_URL_WISTIA:()=>MATCH_URL_WISTIA,MATCH_URL_YOUTUBE:()=>MATCH_URL_YOUTUBE,VIDEO_EXTENSIONS:()=>VIDEO_EXTENSIONS,canPlay:()=>canPlay});var patterns=__toCommonJS$5(patterns_exports),import_utils$3=utils;const MATCH_URL_YOUTUBE=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,MATCH_URL_SOUNDCLOUD=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,MATCH_URL_VIMEO=/vimeo\.com\/(?!progressive_redirect).+/,MATCH_URL_FACEBOOK=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,MATCH_URL_FACEBOOK_WATCH=/^https?:\/\/fb\.watch\/.+$/,MATCH_URL_STREAMABLE=/streamable\.com\/([a-z0-9]+)$/,MATCH_URL_WISTIA=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,MATCH_URL_TWITCH_VIDEO=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,MATCH_URL_TWITCH_CHANNEL=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,MATCH_URL_DAILYMOTION=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,MATCH_URL_MIXCLOUD=/mixcloud\.com\/([^/]+\/[^/]+)/,MATCH_URL_VIDYARD=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,MATCH_URL_KALTURA=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,AUDIO_EXTENSIONS=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,VIDEO_EXTENSIONS=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,HLS_EXTENSIONS=/\.(m3u8)($|\?)/i,DASH_EXTENSIONS=/\.(mpd)($|\?)/i,FLV_EXTENSIONS=/\.(flv)($|\?)/i,canPlayFile=nt=>{if(nt instanceof Array){for(const rt of nt)if(typeof rt=="string"&&canPlayFile(rt)||canPlayFile(rt.src))return!0;return!1}return(0,import_utils$3.isMediaStream)(nt)||(0,import_utils$3.isBlobUrl)(nt)?!0:AUDIO_EXTENSIONS.test(nt)||VIDEO_EXTENSIONS.test(nt)||HLS_EXTENSIONS.test(nt)||DASH_EXTENSIONS.test(nt)||FLV_EXTENSIONS.test(nt)},canPlay={youtube:nt=>nt instanceof Array?nt.every(rt=>MATCH_URL_YOUTUBE.test(rt)):MATCH_URL_YOUTUBE.test(nt),soundcloud:nt=>MATCH_URL_SOUNDCLOUD.test(nt)&&!AUDIO_EXTENSIONS.test(nt),vimeo:nt=>MATCH_URL_VIMEO.test(nt)&&!VIDEO_EXTENSIONS.test(nt)&&!HLS_EXTENSIONS.test(nt),facebook:nt=>MATCH_URL_FACEBOOK.test(nt)||MATCH_URL_FACEBOOK_WATCH.test(nt),streamable:nt=>MATCH_URL_STREAMABLE.test(nt),wistia:nt=>MATCH_URL_WISTIA.test(nt),twitch:nt=>MATCH_URL_TWITCH_VIDEO.test(nt)||MATCH_URL_TWITCH_CHANNEL.test(nt),dailymotion:nt=>MATCH_URL_DAILYMOTION.test(nt),mixcloud:nt=>MATCH_URL_MIXCLOUD.test(nt),vidyard:nt=>MATCH_URL_VIDYARD.test(nt),kaltura:nt=>MATCH_URL_KALTURA.test(nt),file:canPlayFile};var __defProp$4=Object.defineProperty,__getOwnPropDesc$4=Object.getOwnPropertyDescriptor,__getOwnPropNames$4=Object.getOwnPropertyNames,__hasOwnProp$4=Object.prototype.hasOwnProperty,__export$4=(nt,rt)=>{for(var it in rt)__defProp$4(nt,it,{get:rt[it],enumerable:!0})},__copyProps$4=(nt,rt,it,st)=>{if(rt&&typeof rt=="object"||typeof rt=="function")for(let lt of __getOwnPropNames$4(rt))!__hasOwnProp$4.call(nt,lt)&&lt!==it&&__defProp$4(nt,lt,{get:()=>rt[lt],enumerable:!(st=__getOwnPropDesc$4(rt,lt))||st.enumerable});return nt},__toCommonJS$4=nt=>__copyProps$4(__defProp$4({},"__esModule",{value:!0}),nt),players_exports={};__export$4(players_exports,{default:()=>players_default});var players=__toCommonJS$4(players_exports),import_utils$2=utils,import_patterns=patterns,players_default=[{key:"youtube",name:"YouTube",canPlay:import_patterns.canPlay.youtube,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./YouTube-oAtUIe6C.js").then(nt=>nt.Y),__vite__mapDeps([])))},{key:"soundcloud",name:"SoundCloud",canPlay:import_patterns.canPlay.soundcloud,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./SoundCloud-4C53RP4Z.js").then(nt=>nt.S),__vite__mapDeps([])))},{key:"vimeo",name:"Vimeo",canPlay:import_patterns.canPlay.vimeo,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Vimeo-d-uLu7wV.js").then(nt=>nt.V),__vite__mapDeps([])))},{key:"facebook",name:"Facebook",canPlay:import_patterns.canPlay.facebook,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Facebook-xk15WD52.js").then(nt=>nt.F),__vite__mapDeps([])))},{key:"streamable",name:"Streamable",canPlay:import_patterns.canPlay.streamable,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Streamable-2e6yz-LT.js").then(nt=>nt.S),__vite__mapDeps([])))},{key:"wistia",name:"Wistia",canPlay:import_patterns.canPlay.wistia,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Wistia-4s4PbJuO.js").then(nt=>nt.W),__vite__mapDeps([])))},{key:"twitch",name:"Twitch",canPlay:import_patterns.canPlay.twitch,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Twitch-ewwj12_1.js").then(nt=>nt.T),__vite__mapDeps([])))},{key:"dailymotion",name:"DailyMotion",canPlay:import_patterns.canPlay.dailymotion,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./DailyMotion-sxRnfBQD.js").then(nt=>nt.D),__vite__mapDeps([])))},{key:"mixcloud",name:"Mixcloud",canPlay:import_patterns.canPlay.mixcloud,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Mixcloud-FVXDrnP9.js").then(nt=>nt.M),__vite__mapDeps([])))},{key:"vidyard",name:"Vidyard",canPlay:import_patterns.canPlay.vidyard,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Vidyard-9DgIZazV.js").then(nt=>nt.V),__vite__mapDeps([])))},{key:"kaltura",name:"Kaltura",canPlay:import_patterns.canPlay.kaltura,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Kaltura-UXkQUc3N.js").then(nt=>nt.K),__vite__mapDeps([])))},{key:"file",name:"FilePlayer",canPlay:import_patterns.canPlay.file,canEnablePIP:nt=>import_patterns.canPlay.file(nt)&&(document.pictureInPictureEnabled||(0,import_utils$2.supportsWebKitPresentationMode)())&&!import_patterns.AUDIO_EXTENSIONS.test(nt),lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./FilePlayer-qEeqMoon.js").then(nt=>nt.F),__vite__mapDeps([])))}],safeIsNaN=Number.isNaN||function(rt){return typeof rt=="number"&&rt!==rt};function isEqual(nt,rt){return!!(nt===rt||safeIsNaN(nt)&&safeIsNaN(rt))}function areInputsEqual(nt,rt){if(nt.length!==rt.length)return!1;for(var it=0;it<nt.length;it++)if(!isEqual(nt[it],rt[it]))return!1;return!0}function memoizeOne(nt,rt){rt===void 0&&(rt=areInputsEqual);var it,st=[],lt,ct=!1;function ut(){for(var dt=[],ht=0;ht<arguments.length;ht++)dt[ht]=arguments[ht];return ct&&it===this&&rt(dt,st)||(lt=nt.apply(this,dt),ct=!0,it=this,st=dt),lt}return ut}const memoizeOne_esm=Object.freeze(Object.defineProperty({__proto__:null,default:memoizeOne},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(memoizeOne_esm);var hasElementType=typeof Element<"u",hasMap=typeof Map=="function",hasSet=typeof Set=="function",hasArrayBuffer=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function equal(nt,rt){if(nt===rt)return!0;if(nt&&rt&&typeof nt=="object"&&typeof rt=="object"){if(nt.constructor!==rt.constructor)return!1;var it,st,lt;if(Array.isArray(nt)){if(it=nt.length,it!=rt.length)return!1;for(st=it;st--!==0;)if(!equal(nt[st],rt[st]))return!1;return!0}var ct;if(hasMap&&nt instanceof Map&&rt instanceof Map){if(nt.size!==rt.size)return!1;for(ct=nt.entries();!(st=ct.next()).done;)if(!rt.has(st.value[0]))return!1;for(ct=nt.entries();!(st=ct.next()).done;)if(!equal(st.value[1],rt.get(st.value[0])))return!1;return!0}if(hasSet&&nt instanceof Set&&rt instanceof Set){if(nt.size!==rt.size)return!1;for(ct=nt.entries();!(st=ct.next()).done;)if(!rt.has(st.value[0]))return!1;return!0}if(hasArrayBuffer&&ArrayBuffer.isView(nt)&&ArrayBuffer.isView(rt)){if(it=nt.length,it!=rt.length)return!1;for(st=it;st--!==0;)if(nt[st]!==rt[st])return!1;return!0}if(nt.constructor===RegExp)return nt.source===rt.source&&nt.flags===rt.flags;if(nt.valueOf!==Object.prototype.valueOf&&typeof nt.valueOf=="function"&&typeof rt.valueOf=="function")return nt.valueOf()===rt.valueOf();if(nt.toString!==Object.prototype.toString&&typeof nt.toString=="function"&&typeof rt.toString=="function")return nt.toString()===rt.toString();if(lt=Object.keys(nt),it=lt.length,it!==Object.keys(rt).length)return!1;for(st=it;st--!==0;)if(!Object.prototype.hasOwnProperty.call(rt,lt[st]))return!1;if(hasElementType&&nt instanceof Element)return!1;for(st=it;st--!==0;)if(!((lt[st]==="_owner"||lt[st]==="__v"||lt[st]==="__o")&&nt.$$typeof)&&!equal(nt[lt[st]],rt[lt[st]]))return!1;return!0}return nt!==nt&&rt!==rt}var reactFastCompare=function(rt,it){try{return equal(rt,it)}catch(st){if((st.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw st}},__create$3=Object.create,__defProp$3=Object.defineProperty,__getOwnPropDesc$3=Object.getOwnPropertyDescriptor,__getOwnPropNames$3=Object.getOwnPropertyNames,__getProtoOf$3=Object.getPrototypeOf,__hasOwnProp$3=Object.prototype.hasOwnProperty,__export$3=(nt,rt)=>{for(var it in rt)__defProp$3(nt,it,{get:rt[it],enumerable:!0})},__copyProps$3=(nt,rt,it,st)=>{if(rt&&typeof rt=="object"||typeof rt=="function")for(let lt of __getOwnPropNames$3(rt))!__hasOwnProp$3.call(nt,lt)&&lt!==it&&__defProp$3(nt,lt,{get:()=>rt[lt],enumerable:!(st=__getOwnPropDesc$3(rt,lt))||st.enumerable});return nt},__toESM$3=(nt,rt,it)=>(it=nt!=null?__create$3(__getProtoOf$3(nt)):{},__copyProps$3(rt||!nt||!nt.__esModule?__defProp$3(it,"default",{value:nt,enumerable:!0}):it,nt)),__toCommonJS$3=nt=>__copyProps$3(__defProp$3({},"__esModule",{value:!0}),nt),props_exports={};__export$3(props_exports,{defaultProps:()=>defaultProps,propTypes:()=>propTypes});var props=__toCommonJS$3(props_exports),import_prop_types=__toESM$3(propTypesExports);const{string,bool,number,array,oneOfType,shape,object,func,node}=import_prop_types.default,propTypes={url:oneOfType([string,array,object]),playing:bool,loop:bool,controls:bool,volume:number,muted:bool,playbackRate:number,width:oneOfType([string,number]),height:oneOfType([string,number]),style:object,progressInterval:number,playsinline:bool,pip:bool,stopOnUnmount:bool,light:oneOfType([bool,string,object]),playIcon:node,previewTabIndex:number,fallback:node,oEmbedUrl:string,wrapper:oneOfType([string,func,shape({render:func.isRequired})]),config:shape({soundcloud:shape({options:object}),youtube:shape({playerVars:object,embedOptions:object,onUnstarted:func}),facebook:shape({appId:string,version:string,playerId:string,attributes:object}),dailymotion:shape({params:object}),vimeo:shape({playerOptions:object,title:string}),file:shape({attributes:object,tracks:array,forceVideo:bool,forceAudio:bool,forceHLS:bool,forceSafariHLS:bool,forceDisableHls:bool,forceDASH:bool,forceFLV:bool,hlsOptions:object,hlsVersion:string,dashVersion:string,flvVersion:string}),wistia:shape({options:object,playerId:string,customControls:array}),mixcloud:shape({options:object}),twitch:shape({options:object,playerId:string}),vidyard:shape({options:object})}),onReady:func,onStart:func,onPlay:func,onPause:func,onBuffer:func,onBufferEnd:func,onEnded:func,onError:func,onDuration:func,onSeek:func,onPlaybackRateChange:func,onPlaybackQualityChange:func,onProgress:func,onClickPreview:func,onEnablePIP:func,onDisablePIP:func},noop=()=>{},defaultProps={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:noop},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:noop,onStart:noop,onPlay:noop,onPause:noop,onBuffer:noop,onBufferEnd:noop,onEnded:noop,onError:noop,onDuration:noop,onSeek:noop,onPlaybackRateChange:noop,onPlaybackQualityChange:noop,onProgress:noop,onClickPreview:noop,onEnablePIP:noop,onDisablePIP:noop};var __create$2=Object.create,__defProp$2=Object.defineProperty,__getOwnPropDesc$2=Object.getOwnPropertyDescriptor,__getOwnPropNames$2=Object.getOwnPropertyNames,__getProtoOf$2=Object.getPrototypeOf,__hasOwnProp$2=Object.prototype.hasOwnProperty,__defNormalProp$1=(nt,rt,it)=>rt in nt?__defProp$2(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,__export$2=(nt,rt)=>{for(var it in rt)__defProp$2(nt,it,{get:rt[it],enumerable:!0})},__copyProps$2=(nt,rt,it,st)=>{if(rt&&typeof rt=="object"||typeof rt=="function")for(let lt of __getOwnPropNames$2(rt))!__hasOwnProp$2.call(nt,lt)&&lt!==it&&__defProp$2(nt,lt,{get:()=>rt[lt],enumerable:!(st=__getOwnPropDesc$2(rt,lt))||st.enumerable});return nt},__toESM$2=(nt,rt,it)=>(it=nt!=null?__create$2(__getProtoOf$2(nt)):{},__copyProps$2(rt||!nt||!nt.__esModule?__defProp$2(it,"default",{value:nt,enumerable:!0}):it,nt)),__toCommonJS$2=nt=>__copyProps$2(__defProp$2({},"__esModule",{value:!0}),nt),__publicField$1=(nt,rt,it)=>(__defNormalProp$1(nt,typeof rt!="symbol"?rt+"":rt,it),it),Player_exports={};__export$2(Player_exports,{default:()=>Player});var Player_1=__toCommonJS$2(Player_exports),import_react$1=__toESM$2(reactExports),import_react_fast_compare$1=__toESM$2(reactFastCompare),import_props$1=props,import_utils$1=utils;const SEEK_ON_PLAY_EXPIRY=5e3;class Player extends import_react$1.Component{constructor(){super(...arguments),__publicField$1(this,"mounted",!1),__publicField$1(this,"isReady",!1),__publicField$1(this,"isPlaying",!1),__publicField$1(this,"isLoading",!0),__publicField$1(this,"loadOnReady",null),__publicField$1(this,"startOnPlay",!0),__publicField$1(this,"seekOnPlay",null),__publicField$1(this,"onDurationCalled",!1),__publicField$1(this,"handlePlayerMount",rt=>{if(this.player){this.progress();return}this.player=rt,this.player.load(this.props.url),this.progress()}),__publicField$1(this,"getInternalPlayer",rt=>this.player?this.player[rt]:null),__publicField$1(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const rt=this.getCurrentTime()||0,it=this.getSecondsLoaded(),st=this.getDuration();if(st){const lt={playedSeconds:rt,played:rt/st};it!==null&&(lt.loadedSeconds=it,lt.loaded=it/st),(lt.playedSeconds!==this.prevPlayed||lt.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(lt),this.prevPlayed=lt.playedSeconds,this.prevLoaded=lt.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),__publicField$1(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:rt,playing:it,volume:st,muted:lt}=this.props;rt(),!lt&&st!==null&&this.player.setVolume(st),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):it&&this.player.play(),this.handleDurationCheck()}),__publicField$1(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:rt,onPlay:it,playbackRate:st}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&st!==1&&this.player.setPlaybackRate(st),rt(),this.startOnPlay=!1),it(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),__publicField$1(this,"handlePause",rt=>{this.isPlaying=!1,this.isLoading||this.props.onPause(rt)}),__publicField$1(this,"handleEnded",()=>{const{activePlayer:rt,loop:it,onEnded:st}=this.props;rt.loopOnEnded&&it&&this.seekTo(0),it||(this.isPlaying=!1,st())}),__publicField$1(this,"handleError",(...rt)=>{this.isLoading=!1,this.props.onError(...rt)}),__publicField$1(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const rt=this.getDuration();rt?this.onDurationCalled||(this.props.onDuration(rt),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),__publicField$1(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(rt){if(!this.player)return;const{url:it,playing:st,volume:lt,muted:ct,playbackRate:ut,pip:dt,loop:ht,activePlayer:ft,disableDeferredLoading:pt}=this.props;if(!(0,import_react_fast_compare$1.default)(rt.url,it)){if(this.isLoading&&!ft.forceLoad&&!pt&&!(0,import_utils$1.isMediaStream)(it)){console.warn(`ReactPlayer: the attempt to load ${it} is being deferred until the player has loaded`),this.loadOnReady=it;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(it,this.isReady)}!rt.playing&&st&&!this.isPlaying&&this.player.play(),rt.playing&&!st&&this.isPlaying&&this.player.pause(),!rt.pip&&dt&&this.player.enablePIP&&this.player.enablePIP(),rt.pip&&!dt&&this.player.disablePIP&&this.player.disablePIP(),rt.volume!==lt&&lt!==null&&this.player.setVolume(lt),rt.muted!==ct&&(ct?this.player.mute():(this.player.unmute(),lt!==null&&setTimeout(()=>this.player.setVolume(lt)))),rt.playbackRate!==ut&&this.player.setPlaybackRate&&this.player.setPlaybackRate(ut),rt.loop!==ht&&this.player.setLoop&&this.player.setLoop(ht)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(rt,it,st){if(!this.isReady){rt!==0&&(this.seekOnPlay=rt,setTimeout(()=>{this.seekOnPlay=null},SEEK_ON_PLAY_EXPIRY));return}if(it?it==="fraction":rt>0&&rt<1){const ct=this.player.getDuration();if(!ct){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(ct*rt,st);return}this.player.seekTo(rt,st)}render(){const rt=this.props.activePlayer;return rt?import_react$1.default.createElement(rt,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}__publicField$1(Player,"displayName","Player");__publicField$1(Player,"propTypes",import_props$1.propTypes);__publicField$1(Player,"defaultProps",import_props$1.defaultProps);var define_global_default={},__create$1=Object.create,__defProp$1=Object.defineProperty,__getOwnPropDesc$1=Object.getOwnPropertyDescriptor,__getOwnPropNames$1=Object.getOwnPropertyNames,__getProtoOf$1=Object.getPrototypeOf,__hasOwnProp$1=Object.prototype.hasOwnProperty,__defNormalProp=(nt,rt,it)=>rt in nt?__defProp$1(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,__export$1=(nt,rt)=>{for(var it in rt)__defProp$1(nt,it,{get:rt[it],enumerable:!0})},__copyProps$1=(nt,rt,it,st)=>{if(rt&&typeof rt=="object"||typeof rt=="function")for(let lt of __getOwnPropNames$1(rt))!__hasOwnProp$1.call(nt,lt)&&lt!==it&&__defProp$1(nt,lt,{get:()=>rt[lt],enumerable:!(st=__getOwnPropDesc$1(rt,lt))||st.enumerable});return nt},__toESM$1=(nt,rt,it)=>(it=nt!=null?__create$1(__getProtoOf$1(nt)):{},__copyProps$1(rt||!nt||!nt.__esModule?__defProp$1(it,"default",{value:nt,enumerable:!0}):it,nt)),__toCommonJS$1=nt=>__copyProps$1(__defProp$1({},"__esModule",{value:!0}),nt),__publicField=(nt,rt,it)=>(__defNormalProp(nt,typeof rt!="symbol"?rt+"":rt,it),it),ReactPlayer_exports={};__export$1(ReactPlayer_exports,{createReactPlayer:()=>createReactPlayer});var ReactPlayer$1=__toCommonJS$1(ReactPlayer_exports),import_react=__toESM$1(reactExports),import_deepmerge=__toESM$1(cjs),import_memoize_one=__toESM$1(require$$2),import_react_fast_compare=__toESM$1(reactFastCompare),import_props=props,import_utils=utils,import_Player=__toESM$1(Player_1);const Preview=(0,import_utils.lazy)(()=>__vitePreload(()=>import("./Preview-77Vg8aQo.js").then(nt=>nt.P),__vite__mapDeps([]))),IS_BROWSER=typeof window<"u"&&window.document,IS_GLOBAL=typeof define_global_default<"u"&&define_global_default.window&&define_global_default.window.document,SUPPORTED_PROPS=Object.keys(import_props.propTypes),UniversalSuspense=IS_BROWSER||IS_GLOBAL?import_react.Suspense:()=>null,customPlayers=[],createReactPlayer=(nt,rt)=>{var it;return it=class extends import_react.Component{constructor(){super(...arguments),__publicField(this,"state",{showPreview:!!this.props.light}),__publicField(this,"references",{wrapper:st=>{this.wrapper=st},player:st=>{this.player=st}}),__publicField(this,"handleClickPreview",st=>{this.setState({showPreview:!1}),this.props.onClickPreview(st)}),__publicField(this,"showPreview",()=>{this.setState({showPreview:!0})}),__publicField(this,"getDuration",()=>this.player?this.player.getDuration():null),__publicField(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),__publicField(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),__publicField(this,"getInternalPlayer",(st="player")=>this.player?this.player.getInternalPlayer(st):null),__publicField(this,"seekTo",(st,lt,ct)=>{if(!this.player)return null;this.player.seekTo(st,lt,ct)}),__publicField(this,"handleReady",()=>{this.props.onReady(this)}),__publicField(this,"getActivePlayer",(0,import_memoize_one.default)(st=>{for(const lt of[...customPlayers,...nt])if(lt.canPlay(st))return lt;return rt||null})),__publicField(this,"getConfig",(0,import_memoize_one.default)((st,lt)=>{const{config:ct}=this.props;return import_deepmerge.default.all([import_props.defaultProps.config,import_props.defaultProps.config[lt]||{},ct,ct[lt]||{}])})),__publicField(this,"getAttributes",(0,import_memoize_one.default)(st=>(0,import_utils.omit)(this.props,SUPPORTED_PROPS))),__publicField(this,"renderActivePlayer",st=>{if(!st)return null;const lt=this.getActivePlayer(st);if(!lt)return null;const ct=this.getConfig(st,lt.key);return import_react.default.createElement(import_Player.default,{...this.props,key:lt.key,ref:this.references.player,config:ct,activePlayer:lt.lazyPlayer||lt,onReady:this.handleReady})})}shouldComponentUpdate(st,lt){return!(0,import_react_fast_compare.default)(this.props,st)||!(0,import_react_fast_compare.default)(this.state,lt)}componentDidUpdate(st){const{light:lt}=this.props;!st.light&&lt&&this.setState({showPreview:!0}),st.light&&!lt&&this.setState({showPreview:!1})}renderPreview(st){if(!st)return null;const{light:lt,playIcon:ct,previewTabIndex:ut,oEmbedUrl:dt}=this.props;return import_react.default.createElement(Preview,{url:st,light:lt,playIcon:ct,previewTabIndex:ut,oEmbedUrl:dt,onClick:this.handleClickPreview})}render(){const{url:st,style:lt,width:ct,height:ut,fallback:dt,wrapper:ht}=this.props,{showPreview:ft}=this.state,pt=this.getAttributes(st),mt=typeof ht=="string"?this.references.wrapper:void 0;return import_react.default.createElement(ht,{ref:mt,style:{...lt,width:ct,height:ut},...pt},import_react.default.createElement(UniversalSuspense,{fallback:dt},ft?this.renderPreview(st):this.renderActivePlayer(st)))}},__publicField(it,"displayName","ReactPlayer"),__publicField(it,"propTypes",import_props.propTypes),__publicField(it,"defaultProps",import_props.defaultProps),__publicField(it,"addCustomPlayer",st=>{customPlayers.push(st)}),__publicField(it,"removeCustomPlayers",()=>{customPlayers.length=0}),__publicField(it,"canPlay",st=>{for(const lt of[...customPlayers,...nt])if(lt.canPlay(st))return!0;return!1}),__publicField(it,"canEnablePIP",st=>{for(const lt of[...customPlayers,...nt])if(lt.canEnablePIP&&lt.canEnablePIP(st))return!0;return!1}),it};var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(nt,rt)=>{for(var it in rt)__defProp(nt,it,{get:rt[it],enumerable:!0})},__copyProps=(nt,rt,it,st)=>{if(rt&&typeof rt=="object"||typeof rt=="function")for(let lt of __getOwnPropNames(rt))!__hasOwnProp.call(nt,lt)&&lt!==it&&__defProp(nt,lt,{get:()=>rt[lt],enumerable:!(st=__getOwnPropDesc(rt,lt))||st.enumerable});return nt},__toESM=(nt,rt,it)=>(it=nt!=null?__create(__getProtoOf(nt)):{},__copyProps(rt||!nt||!nt.__esModule?__defProp(it,"default",{value:nt,enumerable:!0}):it,nt)),__toCommonJS=nt=>__copyProps(__defProp({},"__esModule",{value:!0}),nt),src_exports={};__export(src_exports,{default:()=>src_default});var lib=__toCommonJS(src_exports),import_players=__toESM(players),import_ReactPlayer=ReactPlayer$1;const fallback=import_players.default[import_players.default.length-1];var src_default=(0,import_ReactPlayer.createReactPlayer)(import_players.default,fallback);const ReactPlayer=getDefaultExportFromCjs(lib),MicOffSmallIcon=nt=>jsxRuntimeExports.jsxs("svg",{width:20,height:21,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:[jsxRuntimeExports.jsx("mask",{id:"a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:20,height:21,children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 .543h20v20H0z"})}),jsxRuntimeExports.jsxs("g",{mask:"url(#a)",fill:nt.fillcolor?nt.fillcolor:"#050A0E",children:[jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.167 9.453v1.256c0 .752.316 1.473.878 2.004.563.531 1.326.83 2.122.83.288 0 .572-.04.844-.115L7.167 9.453Zm4.929 5.096a4.72 4.72 0 0 1-1.93.41 4.638 4.638 0 0 1-3.181-1.244 4.134 4.134 0 0 1-1.319-3.006v-.337a.689.689 0 0 0-.22-.5.773.773 0 0 0-.53-.208.773.773 0 0 0-.53.207.689.689 0 0 0-.22.501v.337c0 2.89 2.29 5.275 5.25 5.624v1.46h-1.5a.773.773 0 0 0-.53.207.689.689 0 0 0-.22.501c0 .188.08.368.22.5.14.134.332.208.53.208h4.5c.2 0 .39-.074.53-.207a.689.689 0 0 0 .22-.501.689.689 0 0 0-.22-.5.773.773 0 0 0-.53-.208h-1.5v-1.46a6.246 6.246 0 0 0 2.226-.702l-1.046-1.082Zm3.466-1.36-1.119-1.157c.147-.423.223-.87.223-1.323v-.337c0-.188.08-.368.22-.5a.773.773 0 0 1 .53-.208c.2 0 .39.075.53.207.141.133.22.313.22.501v.337c0 .866-.21 1.713-.604 2.48Zm-2.395-2.477L7.21 4.555c.106-.57.395-1.1.834-1.516a3.092 3.092 0 0 1 2.122-.83c.795 0 1.558.299 2.12.83.563.532.88 1.252.88 2.004V10.712Z"}),jsxRuntimeExports.jsx("rect",{x:2.755,y:3.043,width:20.816,height:1.515,rx:.757,transform:"rotate(45.956 2.755 3.043)"})]})]}),ScreenShareIcon=nt=>jsxRuntimeExports.jsx("svg",{className:"MuiSvgIcon-root ",viewBox:"0 0 24 24","aria-hidden":"true",style:{height:48,width:48},...nt,children:jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6a2 2 0 0 0-2-2H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"})}),SpeakerIcon=nt=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...nt,children:jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M8.8 4.19c0-.63-.537-1.142-1.2-1.142-.663 0-1.2.511-1.2 1.142v6.858c0 .63.537 1.143 1.2 1.143.663 0 1.2-.512 1.2-1.143V4.19ZM4.8 1.905c0-.631-.537-1.143-1.2-1.143-.663 0-1.2.512-1.2 1.143v11.428c0 .631.537 1.143 1.2 1.143.663 0 1.2-.512 1.2-1.143V1.905ZM12.8 1.905c0-.631-.537-1.143-1.2-1.143-.663 0-1.2.512-1.2 1.143v11.428c0 .631.537 1.143 1.2 1.143.663 0 1.2-.512 1.2-1.143V1.905Z"})});function NetworkIcon(nt){return jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:[jsxRuntimeExports.jsx("path",{d:"M3.8 9.33333H2V13H3.8V9.33333Z",fill:nt.color1}),jsxRuntimeExports.jsx("path",{d:"M7.39998 7.5H5.59998V13H7.39998V7.5Z",fill:nt.color2}),jsxRuntimeExports.jsx("path",{d:"M11 5.20831H9.20001V13H11V5.20831Z",fill:nt.color3}),jsxRuntimeExports.jsx("path",{d:"M14.6 2H12.8V13H14.6V2Z",fill:nt.color4})]})}const CornerDisplayName=({participantId:nt,isPresenting:rt,displayName:it,isLocal:st,micOn:lt,screenShareStream:ct,mouseOver:ut,isActiveSpeaker:dt})=>{var Xt,Zt,hr,nr,ir,yr,Cr,Sr,xr,gr,_r,fr,Nr,Tr,Hr,Vr,mn,tn,er,tr,vr,Fr,Kr,qr,pn,En,Rn,Qn,Ln,ln,Xn,Yr,Qr,Mn,Ar,or,Wr,Ir,dn,kn;const ht=useIsMobile(),ft=useIsTab(),pt=reactResponsiveExports.useMediaQuery({minWidth:1024,maxWidth:1439}),mt=reactResponsiveExports.useMediaQuery({minWidth:1440}),{height:gt}=useWindowSize(),[xt,yt]=reactExports.useState(null),[vt,St]=reactExports.useState(null),[wt,Et]=reactExports.useState({}),Rt=reactExports.useMemo(()=>xt==null?void 0:xt.offsetHeight,[xt]),Tt=reactExports.useMemo(()=>vt==null?void 0:vt.offsetWidth,[vt]),It=mt?32:pt?28:ft?24:ht?20:18,At=reactExports.useMemo(()=>ut,[ut]),{webcamStream:Dt,micStream:jt,getVideoStats:Ft,getAudioStats:Lt,getShareStats:Mt}=useParticipant(nt),Ot=reactExports.useRef(),[Nt,$t]=reactExports.useState({}),[Vt,Ut]=reactExports.useState({}),[zt,Bt]=reactExports.useState({}),Ht=async()=>{let Mr=[],vn=[],kr=[];rt?Mr=await Mt():Dt?Mr=await Ft():jt&&(Mr=await Lt()),(Dt||jt||rt)&&(kr=rt?await Mt():await Ft(),vn=rt?[]:await Lt());let Er=Mr&&Mr.length>0?getQualityScore(Mr[0]):100;$t(Er),Ut(vn),Bt(kr)},Gt=[{label:"",audio:"Audio",video:"Video"},{label:"Latency",audio:Vt&&((Xt=Vt[0])!=null&&Xt.rtt)?`${(Zt=Vt[0])==null?void 0:Zt.rtt} ms`:"-",video:zt&&((hr=zt[0])!=null&&hr.rtt)?`${(nr=zt[0])==null?void 0:nr.rtt} ms`:"-"},{label:"Jitter",audio:Vt&&((ir=Vt[0])!=null&&ir.jitter)?`${parseFloat((yr=Vt[0])==null?void 0:yr.jitter).toFixed(2)} ms`:"-",video:zt&&((Cr=zt[0])!=null&&Cr.jitter)?`${parseFloat((Sr=zt[0])==null?void 0:Sr.jitter).toFixed(2)} ms`:"-"},{label:"Packet Loss",audio:Vt&&(xr=Vt[0])!=null&&xr.packetsLost?`${parseFloat(((gr=Vt[0])==null?void 0:gr.packetsLost)*100/((_r=Vt[0])==null?void 0:_r.totalPackets)).toFixed(2)}%`:"-",video:zt&&(fr=zt[0])!=null&&fr.packetsLost?`${parseFloat(((Nr=zt[0])==null?void 0:Nr.packetsLost)*100/((Tr=zt[0])==null?void 0:Tr.totalPackets)).toFixed(2)}%`:"-"},{label:"Bitrate",audio:Vt&&((Hr=Vt[0])!=null&&Hr.bitrate)?`${parseFloat((Vr=Vt[0])==null?void 0:Vr.bitrate).toFixed(2)} kb/s`:"-",video:zt&&((mn=zt[0])!=null&&mn.bitrate)?`${parseFloat((tn=zt[0])==null?void 0:tn.bitrate).toFixed(2)} kb/s`:"-"},{label:"Frame rate",audio:"-",video:zt&&(((tr=(er=zt[0])==null?void 0:er.size)==null?void 0:tr.framerate)===null||((Fr=(vr=zt[0])==null?void 0:vr.size)==null?void 0:Fr.framerate)===void 0)?"-":`${zt?(qr=(Kr=zt[0])==null?void 0:Kr.size)==null?void 0:qr.framerate:"-"}`},{label:"Resolution",audio:"-",video:zt?zt&&((En=(pn=zt[0])==null?void 0:pn.size)==null?void 0:En.width)===null?"-":`${(Qn=(Rn=zt[0])==null?void 0:Rn.size)==null?void 0:Qn.width}x${(ln=(Ln=zt[0])==null?void 0:Ln.size)==null?void 0:ln.height}`:"-"},{label:"Codec",audio:Vt&&((Xn=Vt[0])!=null&&Xn.codec)?(Yr=Vt[0])==null?void 0:Yr.codec:"-",video:zt&&((Qr=zt[0])!=null&&Qr.codec)?(Mn=zt[0])==null?void 0:Mn.codec:"-"},{label:"Cur. Layers",audio:"-",video:zt&&!st?zt&&((Ar=zt[0])==null?void 0:Ar.currentSpatialLayer)===null?"-":`S:${((or=zt[0])==null?void 0:or.currentSpatialLayer)||0} T:${((Wr=zt[0])==null?void 0:Wr.currentTemporalLayer)||0}`:"-"},{label:"Pref. Layers",audio:"-",video:zt&&!st?zt&&((Ir=zt[0])==null?void 0:Ir.preferredSpatialLayer)===null?"-":`S:${((dn=zt[0])==null?void 0:dn.preferredSpatialLayer)||0} T:${((kn=zt[0])==null?void 0:kn.preferredTemporalLayer)||0}`:"-"}];return reactExports.useEffect(()=>(Dt||jt?(Ht(),Ot.current&&clearInterval(Ot.current),Ot.current=setInterval(Ht,500)):Ot.current&&(clearInterval(Ot.current),Ot.current=null),()=>{Ot.current&&clearInterval(Ot.current)}),[Dt,jt]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"absolute flex items-center justify-center p-2 rounded-md bottom-2 left-2",style:{backgroundColor:"#00000066",transition:"all 200ms",transitionTimingFunction:"linear",transform:`scale(${At?1:0})`},children:[!lt&&!rt?jsxRuntimeExports.jsx(MicOffSmallIcon,{fillcolor:"white"}):lt&&dt?jsxRuntimeExports.jsx(SpeakerIcon,{}):null,jsxRuntimeExports.jsx("p",{className:"text-sm text-white ml-0.5",children:rt?st?"You are presenting":`${nameTructed$1(it,15)} is presenting`:st?"You":nameTructed$1(it,26)})]}),(Dt||jt||ct)&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{onClick:Mr=>{Mr.stopPropagation()},className:"absolute p-2 rounded-md cursor-pointer top-2 right-2 ",children:jsxRuntimeExports.jsx(Ct,{className:"relative ",children:({close:Mr})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Ct.Button,{className:"absolute right-0 top-0 rounded-md flex items-center justify-center p-1.5 cursor-pointer",style:{backgroundColor:Nt>7?"#3BA55D":Nt>4?"#faa713":"#FF5D5D"},onClick:vn=>{vn.stopPropagation();const kr=vn.target.getBoundingClientRect();Et({left:Math.round(kr.x+kr.width/2),top:Math.round(kr.y+window.scrollY)})},children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(NetworkIcon,{color1:"#ffffff",color2:"#ffffff",color3:"#ffffff",color4:"#ffffff",style:{height:It*.6,width:It*.6}})})}),jsxRuntimeExports.jsx(qe,{as:reactExports.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:jsxRuntimeExports.jsx(Ct.Panel,{style:{zIndex:999},className:"absolute",children:reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{ref:St,style:{top:(wt==null?void 0:wt.top)+Rt>gt?gt-Rt-20:wt==null?void 0:wt.top,left:(wt==null?void 0:wt.left)-Tt<0?12:(wt==null?void 0:wt.left)-Tt},className:"absolute",children:jsxRuntimeExports.jsxs("div",{ref:yt,className:"bg-gray-800 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 ",children:[jsxRuntimeExports.jsxs("div",{className:"p-[9px] flex items-center justify-between rounded-t-lg",style:{backgroundColor:Nt>7?"#3BA55D":Nt>4?"#faa713":"#FF5D5D"},children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-white",children:`Quality Score : ${Nt>7?"Good":Nt>4?"Average":"Poor"}`}),jsxRuntimeExports.jsx("button",{className:"cursor-pointer text-white hover:bg-[#ffffff33] rounded-full px-1 text-center",onClick:vn=>{vn.stopPropagation(),Mr()},children:jsxRuntimeExports.jsx(XMarkIcon$3,{className:"text-white",style:{height:16,width:16}})})]}),jsxRuntimeExports.jsx("div",{className:"flex",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:Gt.map((vn,kr)=>jsxRuntimeExports.jsxs("div",{className:"flex",style:{borderBottom:kr===Gt.length-1?"":"1px solid #ffffff33"},children:[jsxRuntimeExports.jsx("div",{className:"flex flex-1 items-center w-[120px]",children:kr!==0&&jsxRuntimeExports.jsx("p",{className:"text-xs text-white my-[6px] ml-2",children:vn.label})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center flex-1",style:{borderLeft:"1px solid #ffffff33"},children:jsxRuntimeExports.jsx("p",{className:"text-xs text-white my-[6px] w-[80px] text-center",children:vn.audio})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center flex-1",style:{borderLeft:"1px solid #ffffff33"},children:jsxRuntimeExports.jsx("p",{className:"text-xs text-white my-[6px] w-[80px] text-center",children:vn.video})})]},kr))})})]})}),document.body)})})]})})})})]})};function ParticipantView({participantId:nt}){const{displayName:rt,webcamStream:it,micStream:st,webcamOn:lt,micOn:ct,isLocal:ut,mode:dt,isActiveSpeaker:ht}=useParticipant(nt),ft=reactExports.useRef(null),[pt,mt]=reactExports.useState(!1);reactExports.useEffect(()=>{if(ft.current)if(ct&&st){const xt=new MediaStream;xt.addTrack(st.track),ft.current.srcObject=xt,ft.current.play().catch(yt=>console.error("videoElem.current.play() failed",yt))}else ft.current.srcObject=null},[st,ct]);const gt=reactExports.useMemo(()=>{if(lt&&it){const xt=new MediaStream;return xt.addTrack(it.track),xt}},[it,lt]);return dt==="CONFERENCE"?jsxRuntimeExports.jsxs("div",{onMouseEnter:()=>{mt(!0)},onMouseLeave:()=>{mt(!1)},className:"h-full w-full  bg-gray-750 relative overflow-hidden rounded-lg video-cover",children:[jsxRuntimeExports.jsx("audio",{ref:ft,autoPlay:!0,muted:ut}),lt?jsxRuntimeExports.jsx(ReactPlayer,{playsinline:!0,playIcon:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),pip:!1,light:!1,controls:!1,muted:!0,playing:!0,url:gt,height:"100%",width:"100%",onError:xt=>{console.log(xt,"participant video error")}}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full h-full",children:jsxRuntimeExports.jsx("div",{className:"z-10 flex items-center justify-center rounded-full bg-gray-800 2xl:h-[92px] h-[52px] 2xl:w-[92px] w-[52px]",children:jsxRuntimeExports.jsx("p",{className:"text-2xl text-white",children:String(rt).charAt(0).toUpperCase()})})}),jsxRuntimeExports.jsx(CornerDisplayName,{isLocal:ut,displayName:rt,micOn:ct,webcamOn:lt,isPresenting:!1,participantId:nt,mouseOver:pt,isActiveSpeaker:ht})]}):null}function PresenterView({height:nt}){const rt=useMeeting(),it=rt==null?void 0:rt.presenterId,st=reactExports.useRef(),{micOn:lt,isLocal:ct,screenShareStream:ut,screenShareAudioStream:dt,screenShareOn:ht,displayName:ft,isActiveSpeaker:pt,webcamOn:mt}=useParticipant(it),gt=reactExports.useMemo(()=>{if(ht){const yt=new MediaStream;return yt.addTrack(ut.track),yt}},[ut,ht]),xt=reactExports.useRef();return reactExports.useEffect(()=>{if(!ct&&xt.current&&ht&&dt){const yt=new MediaStream;yt.addTrack(dt.track),xt.current.srcObject=yt,xt.current.play().catch(vt=>{vt.message==="play() failed because the user didn't interact with the document first. https://goo.gl/xX8pDD"&&console.error("audio"+vt.message)})}else xt.current.srcObject=null},[dt,ht,ct]),jsxRuntimeExports.jsxs("div",{className:` bg-gray-750 rounded m-2 relative overflow-hidden w-full h-[${nt-"xl:p-6 lg:p-[52px] md:p-[26px] p-1"}] `,children:[jsxRuntimeExports.jsx("audio",{autoPlay:!0,playsInline:!0,controls:!1,ref:xt}),jsxRuntimeExports.jsxs("div",{className:"video-contain absolute h-full w-full",children:[jsxRuntimeExports.jsx(ReactPlayer,{ref:st,playsinline:!0,playIcon:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),pip:!1,light:!1,controls:!1,muted:!0,playing:!0,url:gt,height:"100%",width:"100%",style:{filter:ct?"blur(1rem)":void 0},onError:yt=>{console.log(yt,"presenter video error")}}),jsxRuntimeExports.jsxs("div",{className:"absolute flex items-center justify-center p-2 rounded-md bottom-2 left-2 bg-gray-750",style:{transition:"all 200ms",transitionTimingFunction:"linear"},children:[lt?lt&&pt?jsxRuntimeExports.jsx(SpeakerIcon,{}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx(MicOffSmallIcon,{fillcolor:"white"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-white",children:ct?"You are presenting":`${nameTructed(ft,15)} is presenting`})]}),ct?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"absolute flex flex-col items-center justify-center p-10 transform -translate-x-1/2 -translate-y-1/2 rounded-2xl top-1/2 left-1/2 bg-gray-750",children:[jsxRuntimeExports.jsx(ScreenShareIcon,{style:{height:48,width:48,color:"white"}}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("p",{className:"text-xl font-semibold text-white",children:"You are presenting to everyone"})}),jsxRuntimeExports.jsx("div",{className:"mt-8",children:jsxRuntimeExports.jsx("button",{className:"px-4 py-2 text-sm font-medium text-center text-white rounded bg-purple-550",onClick:yt=>{yt.stopPropagation(),rt.toggleScreenShare()},children:"STOP PRESENTING"})})]}),jsxRuntimeExports.jsx(CornerDisplayName,{isLocal:ct,displayName:ft,micOn:lt,webcamOn:mt,isPresenting:!0,participantId:it,isActiveSpeaker:pt})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]})]})}function MicOffIcon(){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("mask",{id:"mask0_25_170",style:{maskType:"alpha"},width:"24",height:"24",x:"0",y:"0",maskUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 0H24V24H0z"})}),jsxRuntimeExports.jsxs("g",{fill:"#050A0E",mask:"url(#mask0_25_170)",children:[jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M8.6 10.692V12.2c0 .902.38 1.767 1.054 2.404a3.71 3.71 0 002.546.996c.346 0 .687-.047 1.014-.138L8.6 10.692zm5.915 6.116a5.665 5.665 0 01-2.315.492 5.565 5.565 0 01-3.819-1.494C7.37 14.85 6.8 13.553 6.8 12.2v-.405a.827.827 0 00-.264-.6.928.928 0 00-.636-.25.928.928 0 00-.637.25.827.827 0 00-.263.6v.405c0 3.468 2.748 6.33 6.3 6.748V20.7H9.5a.928.928 0 00-.637.249.827.827 0 00-.263.601c0 .225.095.442.263.601.17.16.398.249.637.249h5.4c.238 0 .467-.09.636-.249a.827.827 0 00.264-.601.827.827 0 00-.264-.601.927.927 0 00-.636-.249h-1.8v-1.752a7.495 7.495 0 002.67-.842l-1.255-1.298zm4.16-1.633l-1.343-1.388A4.84 4.84 0 0017.6 12.2v-.405c0-.225.095-.441.263-.6a.927.927 0 01.637-.25c.238 0 .467.09.636.25.169.159.264.375.264.6v.405a6.491 6.491 0 01-.726 2.975zM15.8 12.203L8.654 4.814a3.34 3.34 0 011-1.818A3.71 3.71 0 0112.2 2c.955 0 1.87.358 2.545.996A3.307 3.307 0 0115.8 5.4v6.803z",clipRule:"evenodd"}),jsxRuntimeExports.jsx("rect",{width:"24.979",height:"1.817",x:"3.306",y:"3",rx:"0.909",transform:"rotate(45.956 3.306 3)"})]})]})}const WebcamOffIcon=nt=>jsxRuntimeExports.jsxs("svg",{width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:[jsxRuntimeExports.jsx("g",{clipPath:"url(#a)",children:jsxRuntimeExports.jsx("path",{d:"M22.359 17.84a1.196 1.196 0 0 0 .548-1.017V7.786a1.36 1.36 0 0 0-.548-1.017.97.97 0 0 0-1.095 0L17.43 8.804a3.4 3.4 0 0 0-3.286-3.286h-4.052L22.14 17.949c-.001-.11.108-.11.219-.11Zm.219 3.841-5.257-5.424L6.916 5.517 2.863 1.34a1.036 1.036 0 0 0-1.533 0 1.117 1.117 0 0 0 0 1.583l2.519 2.596A3.379 3.379 0 0 0 1 8.91v6.78a3.386 3.386 0 0 0 .945 2.415 3.175 3.175 0 0 0 2.341.975h9.857a2.84 2.84 0 0 0 2.082-.791l4.819 4.972a1.06 1.06 0 0 0 1.533 0 1.144 1.144 0 0 0 0-1.582v.002Z",fill:"#050A0E"})}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:"a",children:jsxRuntimeExports.jsx("path",{fill:nt.fillcolor,transform:"translate(1 1)",d:"M0 0h21.905v22.59H0z"})})})]}),ChatIcon=nt=>jsxRuntimeExports.jsx("svg",{width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2.25c-2.66 0-5.276.195-7.833.57C2 3.139.5 5.038.5 7.17v6.59c0 2.132 1.5 4.031 3.667 4.349.96.141 1.929.256 2.904.346v4.332a.821.821 0 0 0 1.402.58l4.583-4.581a.428.428 0 0 1 .291-.123 53.608 53.608 0 0 0 6.486-.554C22 17.79 23.5 15.892 23.5 13.76V7.169c0-2.133-1.5-4.03-3.667-4.348A53.825 53.825 0 0 0 12 2.25ZM7.893 9.232a1.232 1.232 0 1 0 0 2.464 1.232 1.232 0 0 0 0-2.464Zm2.875 1.232a1.232 1.232 0 1 1 2.465 0 1.232 1.232 0 0 1-2.465 0Zm5.34-1.232a1.232 1.232 0 1 0 0 2.465 1.232 1.232 0 0 0 0-2.465Z",fill:nt.fillcolor})}),ParticipantsIcon=nt=>jsxRuntimeExports.jsx("svg",{width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:jsxRuntimeExports.jsx("path",{d:"M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0Zm9.75 2.25a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 1 1 14.25 0v.003l-.001.119a.749.749 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122Zm15.75.003-.001.144a2.25 2.25 0 0 1-.233.96c1.746.108 3.49-.24 5.06-1.01a.75.75 0 0 0 .42-.643 4.874 4.874 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003h.001Z",fill:nt.fillcolor})});function EndIcon(nt){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...nt,children:[jsxRuntimeExports.jsx("mask",{id:"mask0_27_262",style:{maskType:"alpha"},width:"24",height:"24",x:"0",y:"0",maskUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 0H24V24H0z"})}),jsxRuntimeExports.jsx("g",{mask:"url(#mask0_27_262)",children:jsxRuntimeExports.jsx("path",{fill:nt.fillcolor,d:"M12.001 9.858a15.938 15.938 0 00-4.6.668v2.883a.932.932 0 01-.556.836 11.66 11.66 0 00-2.665 1.717 1.04 1.04 0 01-.7.265 1.016 1.016 0 01-.705-.274l-2.48-2.298a.884.884 0 010-1.319A17.65 17.65 0 0112.001 8a17.65 17.65 0 0111.704 4.336.888.888 0 01.218 1.018.873.873 0 01-.218.296l-2.476 2.298a1.049 1.049 0 01-1.405.01 11.656 11.656 0 00-2.665-1.718.932.932 0 01-.556-.835V10.52A16.098 16.098 0 0012 9.858z"})})]})}const RaiseHandIcon=nt=>jsxRuntimeExports.jsxs("svg",{width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",...nt,children:[jsxRuntimeExports.jsxs("g",{clipPath:"url(#a)",children:[jsxRuntimeExports.jsx("mask",{id:"b",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:1,width:24,height:24,children:jsxRuntimeExports.jsx("path",{fill:"#D9D9D9",d:"M0 1h24v24H0z"})}),jsxRuntimeExports.jsx("g",{mask:"url(#b)",children:jsxRuntimeExports.jsx("path",{d:"M10.903 2.55c0-.278.101-.546.281-.742a.921.921 0 0 1 .68-.308c.254 0 .499.11.679.308.18.196.281.464.281.742v7.671c.442.151.871.357 1.28.615V3.95c0-.278.102-.546.282-.742a.921.921 0 0 1 .68-.308c.254 0 .498.11.678.308.18.196.282.464.282.742v10.208a3.681 3.681 0 0 0-1.626.75 4.126 4.126 0 0 0-1.149 1.465 7.123 7.123 0 0 1 3.415-.873c.17 0 .333-.074.453-.205a.734.734 0 0 0 .187-.495v-2.115c.003-.83.307-1.625.844-2.212a.918.918 0 0 1 .674-.29c.25.004.49.114.667.308a1.1 1.1 0 0 1 .282.73c.003.273-.092.537-.265.736-.089.097-.16.212-.207.338a1.127 1.127 0 0 0-.074.4V15.5h-.004c-.05 1.408-.584 2.743-1.496 3.74l-1.482 1.62c-.96 1.05-2.263 1.64-3.622 1.64h-1.72c-1.698 0-3.327-.738-4.528-2.05-1.2-1.313-1.875-3.093-1.875-4.95V6.75c0-.278.101-.546.281-.742a.92.92 0 0 1 .68-.308.92.92 0 0 1 .679.308c.18.196.281.464.281.742v5.151a6.466 6.466 0 0 1 1.28-1.065V3.95c0-.278.102-.546.282-.742a.92.92 0 0 1 .68-.308.92.92 0 0 1 .678.308c.18.196.282.464.282.742v6.09c.422-.092.85-.14 1.28-.14V2.55Z",fill:nt.fillcolor})})]}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:"a",children:jsxRuntimeExports.jsx("path",{fill:nt.fillcolor,d:"M0 0h24v24H0z"})})})]});var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(nt,rt){module.exports=rt()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(rt){_useWebWorker=!!rt},getWebWorker=function(){return _useWebWorker},setLocationHref=function(rt){locationHref=rt},getLocationHref=function(){return locationHref};function createTag(nt){return document.createElement(nt)}function extendPrototype(nt,rt){var it,st=nt.length,lt;for(it=0;it<st;it+=1){lt=nt[it].prototype;for(var ct in lt)Object.prototype.hasOwnProperty.call(lt,ct)&&(rt.prototype[ct]=lt[ct])}}function getDescriptor(nt,rt){return Object.getOwnPropertyDescriptor(nt,rt)}function createProxyFunction(nt){function rt(){}return rt.prototype=nt,rt}var audioControllerFactory=function(){function nt(rt){this.audios=[],this.audioFactory=rt,this._volume=1,this._isMuted=!1}return nt.prototype={addAudio:function(it){this.audios.push(it)},pause:function(){var it,st=this.audios.length;for(it=0;it<st;it+=1)this.audios[it].pause()},resume:function(){var it,st=this.audios.length;for(it=0;it<st;it+=1)this.audios[it].resume()},setRate:function(it){var st,lt=this.audios.length;for(st=0;st<lt;st+=1)this.audios[st].setRate(it)},createAudio:function(it){return this.audioFactory?this.audioFactory(it):window.Howl?new window.Howl({src:[it]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(it){this.audioFactory=it},setVolume:function(it){this._volume=it,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var it,st=this.audios.length;for(it=0;it<st;it+=1)this.audios[it].volume(this._volume*(this._isMuted?0:1))}},function(){return new nt}}(),createTypedArray=function(){function nt(it,st){var lt=0,ct=[],ut;switch(it){case"int16":case"uint8c":ut=1;break;default:ut=1.1;break}for(lt=0;lt<st;lt+=1)ct.push(ut);return ct}function rt(it,st){return it==="float32"?new Float32Array(st):it==="int16"?new Int16Array(st):it==="uint8c"?new Uint8ClampedArray(st):nt(it,st)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?rt:nt}();function createSizedArray(nt){return Array.apply(null,{length:nt})}function _typeof$6(nt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(it){return typeof it}:_typeof$6=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},_typeof$6(nt)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var nt=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],rt,it=nt.length;for(rt=0;rt<it;rt+=1)BMMath[nt[rt]]=Math[nt[rt]]})(),BMMath.random=Math.random,BMMath.abs=function(nt){var rt=_typeof$6(nt);if(rt==="object"&&nt.length){var it=createSizedArray(nt.length),st,lt=nt.length;for(st=0;st<lt;st+=1)it[st]=Math.abs(nt[st]);return it}return Math.abs(nt)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(nt){nt.style.position="absolute",nt.style.top=0,nt.style.left=0,nt.style.display="block",nt.style.transformOrigin="0 0",nt.style.webkitTransformOrigin="0 0",nt.style.backfaceVisibility="visible",nt.style.webkitBackfaceVisibility="visible",nt.style.transformStyle="preserve-3d",nt.style.webkitTransformStyle="preserve-3d",nt.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(nt,rt,it,st){this.type=nt,this.currentTime=rt,this.totalTime=it,this.direction=st<0?-1:1}function BMCompleteEvent(nt,rt){this.type=nt,this.direction=rt<0?-1:1}function BMCompleteLoopEvent(nt,rt,it,st){this.type=nt,this.currentLoop=it,this.totalLoops=rt,this.direction=st<0?-1:1}function BMSegmentStartEvent(nt,rt,it){this.type=nt,this.firstFrame=rt,this.totalFrames=it}function BMDestroyEvent(nt,rt){this.type=nt,this.target=rt}function BMRenderFrameErrorEvent(nt,rt){this.type="renderFrameError",this.nativeError=nt,this.currentTime=rt}function BMConfigErrorEvent(nt){this.type="configError",this.nativeError=nt}var createElementID=function(){var nt=0;return function(){return nt+=1,idPrefix$1+"__lottie_element_"+nt}}();function HSVtoRGB(nt,rt,it){var st,lt,ct,ut,dt,ht,ft,pt;switch(ut=Math.floor(nt*6),dt=nt*6-ut,ht=it*(1-rt),ft=it*(1-dt*rt),pt=it*(1-(1-dt)*rt),ut%6){case 0:st=it,lt=pt,ct=ht;break;case 1:st=ft,lt=it,ct=ht;break;case 2:st=ht,lt=it,ct=pt;break;case 3:st=ht,lt=ft,ct=it;break;case 4:st=pt,lt=ht,ct=it;break;case 5:st=it,lt=ht,ct=ft;break}return[st,lt,ct]}function RGBtoHSV(nt,rt,it){var st=Math.max(nt,rt,it),lt=Math.min(nt,rt,it),ct=st-lt,ut,dt=st===0?0:ct/st,ht=st/255;switch(st){case lt:ut=0;break;case nt:ut=rt-it+ct*(rt<it?6:0),ut/=6*ct;break;case rt:ut=it-nt+ct*2,ut/=6*ct;break;case it:ut=nt-rt+ct*4,ut/=6*ct;break}return[ut,dt,ht]}function addSaturationToRGB(nt,rt){var it=RGBtoHSV(nt[0]*255,nt[1]*255,nt[2]*255);return it[1]+=rt,it[1]>1?it[1]=1:it[1]<=0&&(it[1]=0),HSVtoRGB(it[0],it[1],it[2])}function addBrightnessToRGB(nt,rt){var it=RGBtoHSV(nt[0]*255,nt[1]*255,nt[2]*255);return it[2]+=rt,it[2]>1?it[2]=1:it[2]<0&&(it[2]=0),HSVtoRGB(it[0],it[1],it[2])}function addHueToRGB(nt,rt){var it=RGBtoHSV(nt[0]*255,nt[1]*255,nt[2]*255);return it[0]+=rt/360,it[0]>1?it[0]-=1:it[0]<0&&(it[0]+=1),HSVtoRGB(it[0],it[1],it[2])}var rgbToHex=function(){var nt=[],rt,it;for(rt=0;rt<256;rt+=1)it=rt.toString(16),nt[rt]=it.length===1?"0"+it:it;return function(st,lt,ct){return st<0&&(st=0),lt<0&&(lt=0),ct<0&&(ct=0),"#"+nt[st]+nt[lt]+nt[ct]}}(),setSubframeEnabled=function(rt){subframeEnabled=!!rt},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(rt){expressionsPlugin=rt},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(rt){expressionsInterfaces=rt},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(rt){defaultCurveSegments=rt},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(rt){idPrefix$1=rt};function createNS(nt){return document.createElementNS(svgNS,nt)}function _typeof$5(nt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(it){return typeof it}:_typeof$5=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},_typeof$5(nt)}var dataManager=function(){var nt=1,rt=[],it,st,lt={onmessage:function(){},postMessage:function(xt){it({data:xt})}},ct={postMessage:function(xt){lt.onmessage({data:xt})}};function ut(gt){if(window.Worker&&window.Blob&&getWebWorker()){var xt=new Blob(["var _workerSelf = self; self.onmessage = ",gt.toString()],{type:"text/javascript"}),yt=URL.createObjectURL(xt);return new Worker(yt)}return it=gt,lt}function dt(){st||(st=ut(function(xt){function yt(){function St(Vt,Ut){var zt,Bt,Ht=Vt.length,Gt,Xt,Zt,hr;for(Bt=0;Bt<Ht;Bt+=1)if(zt=Vt[Bt],"ks"in zt&&!zt.completed){if(zt.completed=!0,zt.hasMask){var nr=zt.masksProperties;for(Xt=nr.length,Gt=0;Gt<Xt;Gt+=1)if(nr[Gt].pt.k.i)It(nr[Gt].pt.k);else for(hr=nr[Gt].pt.k.length,Zt=0;Zt<hr;Zt+=1)nr[Gt].pt.k[Zt].s&&It(nr[Gt].pt.k[Zt].s[0]),nr[Gt].pt.k[Zt].e&&It(nr[Gt].pt.k[Zt].e[0])}zt.ty===0?(zt.layers=Rt(zt.refId,Ut),St(zt.layers,Ut)):zt.ty===4?Tt(zt.shapes):zt.ty===5&&Nt(zt)}}function wt(Vt,Ut){if(Vt){var zt=0,Bt=Vt.length;for(zt=0;zt<Bt;zt+=1)Vt[zt].t===1&&(Vt[zt].data.layers=Rt(Vt[zt].data.refId,Ut),St(Vt[zt].data.layers,Ut))}}function Et(Vt,Ut){for(var zt=0,Bt=Ut.length;zt<Bt;){if(Ut[zt].id===Vt)return Ut[zt];zt+=1}return null}function Rt(Vt,Ut){var zt=Et(Vt,Ut);return zt?zt.layers.__used?JSON.parse(JSON.stringify(zt.layers)):(zt.layers.__used=!0,zt.layers):null}function Tt(Vt){var Ut,zt=Vt.length,Bt,Ht;for(Ut=zt-1;Ut>=0;Ut-=1)if(Vt[Ut].ty==="sh")if(Vt[Ut].ks.k.i)It(Vt[Ut].ks.k);else for(Ht=Vt[Ut].ks.k.length,Bt=0;Bt<Ht;Bt+=1)Vt[Ut].ks.k[Bt].s&&It(Vt[Ut].ks.k[Bt].s[0]),Vt[Ut].ks.k[Bt].e&&It(Vt[Ut].ks.k[Bt].e[0]);else Vt[Ut].ty==="gr"&&Tt(Vt[Ut].it)}function It(Vt){var Ut,zt=Vt.i.length;for(Ut=0;Ut<zt;Ut+=1)Vt.i[Ut][0]+=Vt.v[Ut][0],Vt.i[Ut][1]+=Vt.v[Ut][1],Vt.o[Ut][0]+=Vt.v[Ut][0],Vt.o[Ut][1]+=Vt.v[Ut][1]}function At(Vt,Ut){var zt=Ut?Ut.split("."):[100,100,100];return Vt[0]>zt[0]?!0:zt[0]>Vt[0]?!1:Vt[1]>zt[1]?!0:zt[1]>Vt[1]?!1:Vt[2]>zt[2]?!0:zt[2]>Vt[2]?!1:null}var Dt=function(){var Vt=[4,4,14];function Ut(Bt){var Ht=Bt.t.d;Bt.t.d={k:[{s:Ht,t:0}]}}function zt(Bt){var Ht,Gt=Bt.length;for(Ht=0;Ht<Gt;Ht+=1)Bt[Ht].ty===5&&Ut(Bt[Ht])}return function(Bt){if(At(Vt,Bt.v)&&(zt(Bt.layers),Bt.assets)){var Ht,Gt=Bt.assets.length;for(Ht=0;Ht<Gt;Ht+=1)Bt.assets[Ht].layers&&zt(Bt.assets[Ht].layers)}}}(),jt=function(){var Vt=[4,7,99];return function(Ut){if(Ut.chars&&!At(Vt,Ut.v)){var zt,Bt=Ut.chars.length;for(zt=0;zt<Bt;zt+=1){var Ht=Ut.chars[zt];Ht.data&&Ht.data.shapes&&(Tt(Ht.data.shapes),Ht.data.ip=0,Ht.data.op=99999,Ht.data.st=0,Ht.data.sr=1,Ht.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},Ut.chars[zt].t||(Ht.data.shapes.push({ty:"no"}),Ht.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),Ft=function(){var Vt=[5,7,15];function Ut(Bt){var Ht=Bt.t.p;typeof Ht.a=="number"&&(Ht.a={a:0,k:Ht.a}),typeof Ht.p=="number"&&(Ht.p={a:0,k:Ht.p}),typeof Ht.r=="number"&&(Ht.r={a:0,k:Ht.r})}function zt(Bt){var Ht,Gt=Bt.length;for(Ht=0;Ht<Gt;Ht+=1)Bt[Ht].ty===5&&Ut(Bt[Ht])}return function(Bt){if(At(Vt,Bt.v)&&(zt(Bt.layers),Bt.assets)){var Ht,Gt=Bt.assets.length;for(Ht=0;Ht<Gt;Ht+=1)Bt.assets[Ht].layers&&zt(Bt.assets[Ht].layers)}}}(),Lt=function(){var Vt=[4,1,9];function Ut(Bt){var Ht,Gt=Bt.length,Xt,Zt;for(Ht=0;Ht<Gt;Ht+=1)if(Bt[Ht].ty==="gr")Ut(Bt[Ht].it);else if(Bt[Ht].ty==="fl"||Bt[Ht].ty==="st")if(Bt[Ht].c.k&&Bt[Ht].c.k[0].i)for(Zt=Bt[Ht].c.k.length,Xt=0;Xt<Zt;Xt+=1)Bt[Ht].c.k[Xt].s&&(Bt[Ht].c.k[Xt].s[0]/=255,Bt[Ht].c.k[Xt].s[1]/=255,Bt[Ht].c.k[Xt].s[2]/=255,Bt[Ht].c.k[Xt].s[3]/=255),Bt[Ht].c.k[Xt].e&&(Bt[Ht].c.k[Xt].e[0]/=255,Bt[Ht].c.k[Xt].e[1]/=255,Bt[Ht].c.k[Xt].e[2]/=255,Bt[Ht].c.k[Xt].e[3]/=255);else Bt[Ht].c.k[0]/=255,Bt[Ht].c.k[1]/=255,Bt[Ht].c.k[2]/=255,Bt[Ht].c.k[3]/=255}function zt(Bt){var Ht,Gt=Bt.length;for(Ht=0;Ht<Gt;Ht+=1)Bt[Ht].ty===4&&Ut(Bt[Ht].shapes)}return function(Bt){if(At(Vt,Bt.v)&&(zt(Bt.layers),Bt.assets)){var Ht,Gt=Bt.assets.length;for(Ht=0;Ht<Gt;Ht+=1)Bt.assets[Ht].layers&&zt(Bt.assets[Ht].layers)}}}(),Mt=function(){var Vt=[4,4,18];function Ut(Bt){var Ht,Gt=Bt.length,Xt,Zt;for(Ht=Gt-1;Ht>=0;Ht-=1)if(Bt[Ht].ty==="sh")if(Bt[Ht].ks.k.i)Bt[Ht].ks.k.c=Bt[Ht].closed;else for(Zt=Bt[Ht].ks.k.length,Xt=0;Xt<Zt;Xt+=1)Bt[Ht].ks.k[Xt].s&&(Bt[Ht].ks.k[Xt].s[0].c=Bt[Ht].closed),Bt[Ht].ks.k[Xt].e&&(Bt[Ht].ks.k[Xt].e[0].c=Bt[Ht].closed);else Bt[Ht].ty==="gr"&&Ut(Bt[Ht].it)}function zt(Bt){var Ht,Gt,Xt=Bt.length,Zt,hr,nr,ir;for(Gt=0;Gt<Xt;Gt+=1){if(Ht=Bt[Gt],Ht.hasMask){var yr=Ht.masksProperties;for(hr=yr.length,Zt=0;Zt<hr;Zt+=1)if(yr[Zt].pt.k.i)yr[Zt].pt.k.c=yr[Zt].cl;else for(ir=yr[Zt].pt.k.length,nr=0;nr<ir;nr+=1)yr[Zt].pt.k[nr].s&&(yr[Zt].pt.k[nr].s[0].c=yr[Zt].cl),yr[Zt].pt.k[nr].e&&(yr[Zt].pt.k[nr].e[0].c=yr[Zt].cl)}Ht.ty===4&&Ut(Ht.shapes)}}return function(Bt){if(At(Vt,Bt.v)&&(zt(Bt.layers),Bt.assets)){var Ht,Gt=Bt.assets.length;for(Ht=0;Ht<Gt;Ht+=1)Bt.assets[Ht].layers&&zt(Bt.assets[Ht].layers)}}}();function Ot(Vt){Vt.__complete||(Lt(Vt),Dt(Vt),jt(Vt),Ft(Vt),Mt(Vt),St(Vt.layers,Vt.assets),wt(Vt.chars,Vt.assets),Vt.__complete=!0)}function Nt(Vt){Vt.t.a.length===0&&"m"in Vt.t.p}var $t={};return $t.completeData=Ot,$t.checkColors=Lt,$t.checkChars=jt,$t.checkPathProperties=Ft,$t.checkShapes=Mt,$t.completeLayers=St,$t}if(ct.dataManager||(ct.dataManager=yt()),ct.assetLoader||(ct.assetLoader=function(){function St(Et){var Rt=Et.getResponseHeader("content-type");return Rt&&Et.responseType==="json"&&Rt.indexOf("json")!==-1||Et.response&&_typeof$5(Et.response)==="object"?Et.response:Et.response&&typeof Et.response=="string"?JSON.parse(Et.response):Et.responseText?JSON.parse(Et.responseText):null}function wt(Et,Rt,Tt,It){var At,Dt=new XMLHttpRequest;try{Dt.responseType="json"}catch{}Dt.onreadystatechange=function(){if(Dt.readyState===4)if(Dt.status===200)At=St(Dt),Tt(At);else try{At=St(Dt),Tt(At)}catch(jt){It&&It(jt)}};try{Dt.open(["G","E","T"].join(""),Et,!0)}catch{Dt.open(["G","E","T"].join(""),Rt+"/"+Et,!0)}Dt.send()}return{load:wt}}()),xt.data.type==="loadAnimation")ct.assetLoader.load(xt.data.path,xt.data.fullPath,function(St){ct.dataManager.completeData(St),ct.postMessage({id:xt.data.id,payload:St,status:"success"})},function(){ct.postMessage({id:xt.data.id,status:"error"})});else if(xt.data.type==="complete"){var vt=xt.data.animation;ct.dataManager.completeData(vt),ct.postMessage({id:xt.data.id,payload:vt,status:"success"})}else xt.data.type==="loadData"&&ct.assetLoader.load(xt.data.path,xt.data.fullPath,function(St){ct.postMessage({id:xt.data.id,payload:St,status:"success"})},function(){ct.postMessage({id:xt.data.id,status:"error"})})}),st.onmessage=function(gt){var xt=gt.data,yt=xt.id,vt=rt[yt];rt[yt]=null,xt.status==="success"?vt.onComplete(xt.payload):vt.onError&&vt.onError()})}function ht(gt,xt){nt+=1;var yt="processId_"+nt;return rt[yt]={onComplete:gt,onError:xt},yt}function ft(gt,xt,yt){dt();var vt=ht(xt,yt);st.postMessage({type:"loadAnimation",path:gt,fullPath:window.location.origin+window.location.pathname,id:vt})}function pt(gt,xt,yt){dt();var vt=ht(xt,yt);st.postMessage({type:"loadData",path:gt,fullPath:window.location.origin+window.location.pathname,id:vt})}function mt(gt,xt,yt){dt();var vt=ht(xt,yt);st.postMessage({type:"complete",animation:gt,id:vt})}return{loadAnimation:ft,loadData:pt,completeAnimation:mt}}(),ImagePreloader=function(){var nt=function(){var wt=createTag("canvas");wt.width=1,wt.height=1;var Et=wt.getContext("2d");return Et.fillStyle="rgba(0,0,0,0)",Et.fillRect(0,0,1,1),wt}();function rt(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function it(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function st(wt,Et,Rt){var Tt="";if(wt.e)Tt=wt.p;else if(Et){var It=wt.p;It.indexOf("images/")!==-1&&(It=It.split("/")[1]),Tt=Et+It}else Tt=Rt,Tt+=wt.u?wt.u:"",Tt+=wt.p;return Tt}function lt(wt){var Et=0,Rt=setInterval((function(){var Tt=wt.getBBox();(Tt.width||Et>500)&&(this._imageLoaded(),clearInterval(Rt)),Et+=1}).bind(this),50)}function ct(wt){var Et=st(wt,this.assetsPath,this.path),Rt=createNS("image");isSafari?this.testImageLoaded(Rt):Rt.addEventListener("load",this._imageLoaded,!1),Rt.addEventListener("error",(function(){Tt.img=nt,this._imageLoaded()}).bind(this),!1),Rt.setAttributeNS("http://www.w3.org/1999/xlink","href",Et),this._elementHelper.append?this._elementHelper.append(Rt):this._elementHelper.appendChild(Rt);var Tt={img:Rt,assetData:wt};return Tt}function ut(wt){var Et=st(wt,this.assetsPath,this.path),Rt=createTag("img");Rt.crossOrigin="anonymous",Rt.addEventListener("load",this._imageLoaded,!1),Rt.addEventListener("error",(function(){Tt.img=nt,this._imageLoaded()}).bind(this),!1),Rt.src=Et;var Tt={img:Rt,assetData:wt};return Tt}function dt(wt){var Et={assetData:wt},Rt=st(wt,this.assetsPath,this.path);return dataManager.loadData(Rt,(function(Tt){Et.img=Tt,this._footageLoaded()}).bind(this),(function(){Et.img={},this._footageLoaded()}).bind(this)),Et}function ht(wt,Et){this.imagesLoadedCb=Et;var Rt,Tt=wt.length;for(Rt=0;Rt<Tt;Rt+=1)wt[Rt].layers||(!wt[Rt].t||wt[Rt].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(wt[Rt]))):wt[Rt].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(wt[Rt]))))}function ft(wt){this.path=wt||""}function pt(wt){this.assetsPath=wt||""}function mt(wt){for(var Et=0,Rt=this.images.length;Et<Rt;){if(this.images[Et].assetData===wt)return this.images[Et].img;Et+=1}return null}function gt(){this.imagesLoadedCb=null,this.images.length=0}function xt(){return this.totalImages===this.loadedAssets}function yt(){return this.totalFootages===this.loadedFootagesCount}function vt(wt,Et){wt==="svg"?(this._elementHelper=Et,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function St(){this._imageLoaded=rt.bind(this),this._footageLoaded=it.bind(this),this.testImageLoaded=lt.bind(this),this.createFootageData=dt.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return St.prototype={loadAssets:ht,setAssetsPath:pt,setPath:ft,loadedImages:xt,loadedFootages:yt,destroy:gt,getAsset:mt,createImgData:ut,createImageData:ct,imageLoaded:rt,footageLoaded:it,setCacheType:vt},St}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(rt,it){if(this._cbs[rt])for(var st=this._cbs[rt],lt=0;lt<st.length;lt+=1)st[lt](it)},addEventListener:function(rt,it){return this._cbs[rt]||(this._cbs[rt]=[]),this._cbs[rt].push(it),(function(){this.removeEventListener(rt,it)}).bind(this)},removeEventListener:function(rt,it){if(!it)this._cbs[rt]=null;else if(this._cbs[rt]){for(var st=0,lt=this._cbs[rt].length;st<lt;)this._cbs[rt][st]===it&&(this._cbs[rt].splice(st,1),st-=1,lt-=1),st+=1;this._cbs[rt].length||(this._cbs[rt]=null)}}};var markerParser=function(){function nt(rt){for(var it=rt.split(`\r
`),st={},lt,ct=0,ut=0;ut<it.length;ut+=1)lt=it[ut].split(":"),lt.length===2&&(st[lt[0]]=lt[1].trim(),ct+=1);if(ct===0)throw new Error;return st}return function(rt){for(var it=[],st=0;st<rt.length;st+=1){var lt=rt[st],ct={time:lt.tm,duration:lt.dr};try{ct.payload=JSON.parse(rt[st].cm)}catch{try{ct.payload=nt(rt[st].cm)}catch{ct.payload={name:rt[st].cm}}}it.push(ct)}return it}}(),ProjectInterface=function(){function nt(rt){this.compositions.push(rt)}return function(){function rt(it){for(var st=0,lt=this.compositions.length;st<lt;){if(this.compositions[st].data&&this.compositions[st].data.nm===it)return this.compositions[st].prepareFrame&&this.compositions[st].data.xt&&this.compositions[st].prepareFrame(this.currentFrame),this.compositions[st].compInterface;st+=1}return null}return rt.compositions=[],rt.currentFrame=0,rt.registerComposition=nt,rt}}(),renderers={},registerRenderer=function(rt,it){renderers[rt]=it};function getRenderer(nt){return renderers[nt]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var nt in renderers)if(renderers[nt])return nt;return""}function _typeof$4(nt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(it){return typeof it}:_typeof$4=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},_typeof$4(nt)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(nt){(nt.wrapper||nt.container)&&(this.wrapper=nt.wrapper||nt.container);var rt="svg";nt.animType?rt=nt.animType:nt.renderer&&(rt=nt.renderer);var it=getRenderer(rt);this.renderer=new it(this,nt.rendererSettings),this.imagePreloader.setCacheType(rt,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=rt,nt.loop===""||nt.loop===null||nt.loop===void 0||nt.loop===!0?this.loop=!0:nt.loop===!1?this.loop=!1:this.loop=parseInt(nt.loop,10),this.autoplay="autoplay"in nt?nt.autoplay:!0,this.name=nt.name?nt.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(nt,"autoloadSegments")?nt.autoloadSegments:!0,this.assetsPath=nt.assetsPath,this.initialSegment=nt.initialSegment,nt.audioFactory&&this.audioController.setAudioFactory(nt.audioFactory),nt.animationData?this.setupAnimation(nt.animationData):nt.path&&(nt.path.lastIndexOf("\\")!==-1?this.path=nt.path.substr(0,nt.path.lastIndexOf("\\")+1):this.path=nt.path.substr(0,nt.path.lastIndexOf("/")+1),this.fileName=nt.path.substr(nt.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(nt.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(nt){dataManager.completeAnimation(nt,this.configAnimation)},AnimationItem.prototype.setData=function(nt,rt){rt&&_typeof$4(rt)!=="object"&&(rt=JSON.parse(rt));var it={wrapper:nt,animationData:rt},st=nt.attributes;it.path=st.getNamedItem("data-animation-path")?st.getNamedItem("data-animation-path").value:st.getNamedItem("data-bm-path")?st.getNamedItem("data-bm-path").value:st.getNamedItem("bm-path")?st.getNamedItem("bm-path").value:"",it.animType=st.getNamedItem("data-anim-type")?st.getNamedItem("data-anim-type").value:st.getNamedItem("data-bm-type")?st.getNamedItem("data-bm-type").value:st.getNamedItem("bm-type")?st.getNamedItem("bm-type").value:st.getNamedItem("data-bm-renderer")?st.getNamedItem("data-bm-renderer").value:st.getNamedItem("bm-renderer")?st.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var lt=st.getNamedItem("data-anim-loop")?st.getNamedItem("data-anim-loop").value:st.getNamedItem("data-bm-loop")?st.getNamedItem("data-bm-loop").value:st.getNamedItem("bm-loop")?st.getNamedItem("bm-loop").value:"";lt==="false"?it.loop=!1:lt==="true"?it.loop=!0:lt!==""&&(it.loop=parseInt(lt,10));var ct=st.getNamedItem("data-anim-autoplay")?st.getNamedItem("data-anim-autoplay").value:st.getNamedItem("data-bm-autoplay")?st.getNamedItem("data-bm-autoplay").value:st.getNamedItem("bm-autoplay")?st.getNamedItem("bm-autoplay").value:!0;it.autoplay=ct!=="false",it.name=st.getNamedItem("data-name")?st.getNamedItem("data-name").value:st.getNamedItem("data-bm-name")?st.getNamedItem("data-bm-name").value:st.getNamedItem("bm-name")?st.getNamedItem("bm-name").value:"";var ut=st.getNamedItem("data-anim-prerender")?st.getNamedItem("data-anim-prerender").value:st.getNamedItem("data-bm-prerender")?st.getNamedItem("data-bm-prerender").value:st.getNamedItem("bm-prerender")?st.getNamedItem("bm-prerender").value:"";ut==="false"&&(it.prerender=!1),it.path?this.setParams(it):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(nt){nt.op>this.animationData.op&&(this.animationData.op=nt.op,this.totalFrames=Math.floor(nt.op-this.animationData.ip));var rt=this.animationData.layers,it,st=rt.length,lt=nt.layers,ct,ut=lt.length;for(ct=0;ct<ut;ct+=1)for(it=0;it<st;){if(rt[it].id===lt[ct].id){rt[it]=lt[ct];break}it+=1}if((nt.chars||nt.fonts)&&(this.renderer.globalData.fontManager.addChars(nt.chars),this.renderer.globalData.fontManager.addFonts(nt.fonts,this.renderer.globalData.defs)),nt.assets)for(st=nt.assets.length,it=0;it<st;it+=1)this.animationData.assets.push(nt.assets[it]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(nt){this.animationData=nt;var rt=getExpressionsPlugin();rt&&rt.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var nt=this.animationData.segments;if(!nt||nt.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var rt=nt.shift();this.timeCompleted=rt.time*this.frameRate;var it=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(it,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var nt=this.animationData.segments;nt||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(nt){if(this.renderer)try{this.animationData=nt,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(nt),nt.assets||(nt.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(nt.assets),this.markers=markerParser(nt.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(rt){this.triggerConfigError(rt)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var nt=getExpressionsPlugin();nt&&nt.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(nt,rt){var it=typeof nt=="number"?nt:void 0,st=typeof rt=="number"?rt:void 0;this.renderer.updateContainerSize(it,st)},AnimationItem.prototype.setSubframe=function(nt){this.isSubframeEnabled=!!nt},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(nt){this.triggerRenderFrameError(nt)}},AnimationItem.prototype.play=function(nt){nt&&this.name!==nt||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(nt){nt&&this.name!==nt||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(nt){nt&&this.name!==nt||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(nt){nt&&this.name!==nt||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(nt){for(var rt,it=0;it<this.markers.length;it+=1)if(rt=this.markers[it],rt.payload&&rt.payload.name===nt)return rt;return null},AnimationItem.prototype.goToAndStop=function(nt,rt,it){if(!(it&&this.name!==it)){var st=Number(nt);if(isNaN(st)){var lt=this.getMarkerData(nt);lt&&this.goToAndStop(lt.time,!0)}else rt?this.setCurrentRawFrameValue(nt):this.setCurrentRawFrameValue(nt*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(nt,rt,it){if(!(it&&this.name!==it)){var st=Number(nt);if(isNaN(st)){var lt=this.getMarkerData(nt);lt&&(lt.duration?this.playSegments([lt.time,lt.time+lt.duration],!0):this.goToAndStop(lt.time,!0))}else this.goToAndStop(st,rt,it);this.play()}},AnimationItem.prototype.advanceTime=function(nt){if(!(this.isPaused===!0||this.isLoaded===!1)){var rt=this.currentRawFrame+nt*this.frameModifier,it=!1;rt>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(rt>this.totalFrames?rt%this.totalFrames:0)||(it=!0,rt=this.totalFrames-1):rt>=this.totalFrames?(this.playCount+=1,this.checkSegments(rt%this.totalFrames)||(this.setCurrentRawFrameValue(rt%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(rt):rt<0?this.checkSegments(rt%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+rt%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(it=!0,rt=0)):this.setCurrentRawFrameValue(rt),it&&(this.setCurrentRawFrameValue(rt),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(nt,rt){this.playCount=0,nt[1]<nt[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=nt[0]-nt[1],this.timeCompleted=this.totalFrames,this.firstFrame=nt[1],this.setCurrentRawFrameValue(this.totalFrames-.001-rt)):nt[1]>nt[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=nt[1]-nt[0],this.timeCompleted=this.totalFrames,this.firstFrame=nt[0],this.setCurrentRawFrameValue(.001+rt)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(nt,rt){var it=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<nt?it=nt:this.currentRawFrame+this.firstFrame>rt&&(it=rt-nt)),this.firstFrame=nt,this.totalFrames=rt-nt,this.timeCompleted=this.totalFrames,it!==-1&&this.goToAndStop(it,!0)},AnimationItem.prototype.playSegments=function(nt,rt){if(rt&&(this.segments.length=0),_typeof$4(nt[0])==="object"){var it,st=nt.length;for(it=0;it<st;it+=1)this.segments.push(nt[it])}else this.segments.push(nt);this.segments.length&&rt&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(nt){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),nt&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(nt){return this.segments.length?(this.adjustSegment(this.segments.shift(),nt),!0):!1},AnimationItem.prototype.destroy=function(nt){nt&&this.name!==nt||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(nt){this.currentRawFrame=nt,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(nt){this.playSpeed=nt,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(nt){this.playDirection=nt<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(nt){this.loop=nt},AnimationItem.prototype.setVolume=function(nt,rt){rt&&this.name!==rt||this.audioController.setVolume(nt)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(nt){nt&&this.name!==nt||this.audioController.mute()},AnimationItem.prototype.unmute=function(nt){nt&&this.name!==nt||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(nt){var rt="";if(nt.e)rt=nt.p;else if(this.assetsPath){var it=nt.p;it.indexOf("images/")!==-1&&(it=it.split("/")[1]),rt=this.assetsPath+it}else rt=this.path,rt+=nt.u?nt.u:"",rt+=nt.p;return rt},AnimationItem.prototype.getAssetData=function(nt){for(var rt=0,it=this.assets.length;rt<it;){if(nt===this.assets[rt].id)return this.assets[rt];rt+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(nt){return nt?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(nt,rt,it){try{var st=this.renderer.getElementByPath(nt);st.updateDocumentData(rt,it)}catch{}},AnimationItem.prototype.trigger=function(nt){if(this._cbs&&this._cbs[nt])switch(nt){case"enterFrame":this.triggerEvent(nt,new BMEnterFrameEvent(nt,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(nt,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(nt,new BMCompleteLoopEvent(nt,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(nt,new BMCompleteEvent(nt,this.frameMult));break;case"segmentStart":this.triggerEvent(nt,new BMSegmentStartEvent(nt,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(nt,new BMDestroyEvent(nt,this));break;default:this.triggerEvent(nt)}nt==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(nt,this.currentFrame,this.totalFrames,this.frameMult)),nt==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(nt,this.loop,this.playCount,this.frameMult)),nt==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(nt,this.frameMult)),nt==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(nt,this.firstFrame,this.totalFrames)),nt==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(nt,this))},AnimationItem.prototype.triggerRenderFrameError=function(nt){var rt=new BMRenderFrameErrorEvent(nt,this.currentFrame);this.triggerEvent("error",rt),this.onError&&this.onError.call(this,rt)},AnimationItem.prototype.triggerConfigError=function(nt){var rt=new BMConfigErrorEvent(nt,this.currentFrame);this.triggerEvent("error",rt),this.onError&&this.onError.call(this,rt)};var animationManager=function(){var nt={},rt=[],it=0,st=0,lt=0,ct=!0,ut=!1;function dt(Ut){for(var zt=0,Bt=Ut.target;zt<st;)rt[zt].animation===Bt&&(rt.splice(zt,1),zt-=1,st-=1,Bt.isPaused||mt()),zt+=1}function ht(Ut,zt){if(!Ut)return null;for(var Bt=0;Bt<st;){if(rt[Bt].elem===Ut&&rt[Bt].elem!==null)return rt[Bt].animation;Bt+=1}var Ht=new AnimationItem;return gt(Ht,Ut),Ht.setData(Ut,zt),Ht}function ft(){var Ut,zt=rt.length,Bt=[];for(Ut=0;Ut<zt;Ut+=1)Bt.push(rt[Ut].animation);return Bt}function pt(){lt+=1,Lt()}function mt(){lt-=1}function gt(Ut,zt){Ut.addEventListener("destroy",dt),Ut.addEventListener("_active",pt),Ut.addEventListener("_idle",mt),rt.push({elem:zt,animation:Ut}),st+=1}function xt(Ut){var zt=new AnimationItem;return gt(zt,null),zt.setParams(Ut),zt}function yt(Ut,zt){var Bt;for(Bt=0;Bt<st;Bt+=1)rt[Bt].animation.setSpeed(Ut,zt)}function vt(Ut,zt){var Bt;for(Bt=0;Bt<st;Bt+=1)rt[Bt].animation.setDirection(Ut,zt)}function St(Ut){var zt;for(zt=0;zt<st;zt+=1)rt[zt].animation.play(Ut)}function wt(Ut){var zt=Ut-it,Bt;for(Bt=0;Bt<st;Bt+=1)rt[Bt].animation.advanceTime(zt);it=Ut,lt&&!ut?window.requestAnimationFrame(wt):ct=!0}function Et(Ut){it=Ut,window.requestAnimationFrame(wt)}function Rt(Ut){var zt;for(zt=0;zt<st;zt+=1)rt[zt].animation.pause(Ut)}function Tt(Ut,zt,Bt){var Ht;for(Ht=0;Ht<st;Ht+=1)rt[Ht].animation.goToAndStop(Ut,zt,Bt)}function It(Ut){var zt;for(zt=0;zt<st;zt+=1)rt[zt].animation.stop(Ut)}function At(Ut){var zt;for(zt=0;zt<st;zt+=1)rt[zt].animation.togglePause(Ut)}function Dt(Ut){var zt;for(zt=st-1;zt>=0;zt-=1)rt[zt].animation.destroy(Ut)}function jt(Ut,zt,Bt){var Ht=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Gt,Xt=Ht.length;for(Gt=0;Gt<Xt;Gt+=1)Bt&&Ht[Gt].setAttribute("data-bm-type",Bt),ht(Ht[Gt],Ut);if(zt&&Xt===0){Bt||(Bt="svg");var Zt=document.getElementsByTagName("body")[0];Zt.innerText="";var hr=createTag("div");hr.style.width="100%",hr.style.height="100%",hr.setAttribute("data-bm-type",Bt),Zt.appendChild(hr),ht(hr,Ut)}}function Ft(){var Ut;for(Ut=0;Ut<st;Ut+=1)rt[Ut].animation.resize()}function Lt(){!ut&&lt&&ct&&(window.requestAnimationFrame(Et),ct=!1)}function Mt(){ut=!0}function Ot(){ut=!1,Lt()}function Nt(Ut,zt){var Bt;for(Bt=0;Bt<st;Bt+=1)rt[Bt].animation.setVolume(Ut,zt)}function $t(Ut){var zt;for(zt=0;zt<st;zt+=1)rt[zt].animation.mute(Ut)}function Vt(Ut){var zt;for(zt=0;zt<st;zt+=1)rt[zt].animation.unmute(Ut)}return nt.registerAnimation=ht,nt.loadAnimation=xt,nt.setSpeed=yt,nt.setDirection=vt,nt.play=St,nt.pause=Rt,nt.stop=It,nt.togglePause=At,nt.searchAnimations=jt,nt.resize=Ft,nt.goToAndStop=Tt,nt.destroy=Dt,nt.freeze=Mt,nt.unfreeze=Ot,nt.setVolume=Nt,nt.mute=$t,nt.unmute=Vt,nt.getRegisteredAnimations=ft,nt}(),BezierFactory=function(){var nt={};nt.getBezierEasing=it;var rt={};function it(Et,Rt,Tt,It,At){var Dt=At||("bez_"+Et+"_"+Rt+"_"+Tt+"_"+It).replace(/\./g,"p");if(rt[Dt])return rt[Dt];var jt=new wt([Et,Rt,Tt,It]);return rt[Dt]=jt,jt}var st=4,lt=.001,ct=1e-7,ut=10,dt=11,ht=1/(dt-1),ft=typeof Float32Array=="function";function pt(Et,Rt){return 1-3*Rt+3*Et}function mt(Et,Rt){return 3*Rt-6*Et}function gt(Et){return 3*Et}function xt(Et,Rt,Tt){return((pt(Rt,Tt)*Et+mt(Rt,Tt))*Et+gt(Rt))*Et}function yt(Et,Rt,Tt){return 3*pt(Rt,Tt)*Et*Et+2*mt(Rt,Tt)*Et+gt(Rt)}function vt(Et,Rt,Tt,It,At){var Dt,jt,Ft=0;do jt=Rt+(Tt-Rt)/2,Dt=xt(jt,It,At)-Et,Dt>0?Tt=jt:Rt=jt;while(Math.abs(Dt)>ct&&++Ft<ut);return jt}function St(Et,Rt,Tt,It){for(var At=0;At<st;++At){var Dt=yt(Rt,Tt,It);if(Dt===0)return Rt;var jt=xt(Rt,Tt,It)-Et;Rt-=jt/Dt}return Rt}function wt(Et){this._p=Et,this._mSampleValues=ft?new Float32Array(dt):new Array(dt),this._precomputed=!1,this.get=this.get.bind(this)}return wt.prototype={get:function(Rt){var Tt=this._p[0],It=this._p[1],At=this._p[2],Dt=this._p[3];return this._precomputed||this._precompute(),Tt===It&&At===Dt?Rt:Rt===0?0:Rt===1?1:xt(this._getTForX(Rt),It,Dt)},_precompute:function(){var Rt=this._p[0],Tt=this._p[1],It=this._p[2],At=this._p[3];this._precomputed=!0,(Rt!==Tt||It!==At)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Rt=this._p[0],Tt=this._p[2],It=0;It<dt;++It)this._mSampleValues[It]=xt(It*ht,Rt,Tt)},_getTForX:function(Rt){for(var Tt=this._p[0],It=this._p[2],At=this._mSampleValues,Dt=0,jt=1,Ft=dt-1;jt!==Ft&&At[jt]<=Rt;++jt)Dt+=ht;--jt;var Lt=(Rt-At[jt])/(At[jt+1]-At[jt]),Mt=Dt+Lt*ht,Ot=yt(Mt,Tt,It);return Ot>=lt?St(Rt,Mt,Tt,It):Ot===0?Mt:vt(Rt,Dt,Dt+ht,Tt,It)}},nt}(),pooling=function(){function nt(rt){return rt.concat(createSizedArray(rt.length))}return{double:nt}}(),poolFactory=function(){return function(nt,rt,it){var st=0,lt=nt,ct=createSizedArray(lt),ut={newElement:dt,release:ht};function dt(){var ft;return st?(st-=1,ft=ct[st]):ft=rt(),ft}function ht(ft){st===lt&&(ct=pooling.double(ct),lt*=2),it&&it(ft),ct[st]=ft,st+=1}return ut}}(),bezierLengthPool=function(){function nt(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,nt)}(),segmentsLengthPool=function(){function nt(){return{lengths:[],totalLength:0}}function rt(it){var st,lt=it.lengths.length;for(st=0;st<lt;st+=1)bezierLengthPool.release(it.lengths[st]);it.lengths.length=0}return poolFactory(8,nt,rt)}();function bezFunction(){var nt=Math;function rt(gt,xt,yt,vt,St,wt){var Et=gt*vt+xt*St+yt*wt-St*vt-wt*gt-yt*xt;return Et>-.001&&Et<.001}function it(gt,xt,yt,vt,St,wt,Et,Rt,Tt){if(yt===0&&wt===0&&Tt===0)return rt(gt,xt,vt,St,Et,Rt);var It=nt.sqrt(nt.pow(vt-gt,2)+nt.pow(St-xt,2)+nt.pow(wt-yt,2)),At=nt.sqrt(nt.pow(Et-gt,2)+nt.pow(Rt-xt,2)+nt.pow(Tt-yt,2)),Dt=nt.sqrt(nt.pow(Et-vt,2)+nt.pow(Rt-St,2)+nt.pow(Tt-wt,2)),jt;return It>At?It>Dt?jt=It-At-Dt:jt=Dt-At-It:Dt>At?jt=Dt-At-It:jt=At-It-Dt,jt>-1e-4&&jt<1e-4}var st=function(){return function(gt,xt,yt,vt){var St=getDefaultCurveSegments(),wt,Et,Rt,Tt,It,At=0,Dt,jt=[],Ft=[],Lt=bezierLengthPool.newElement();for(Rt=yt.length,wt=0;wt<St;wt+=1){for(It=wt/(St-1),Dt=0,Et=0;Et<Rt;Et+=1)Tt=bmPow(1-It,3)*gt[Et]+3*bmPow(1-It,2)*It*yt[Et]+3*(1-It)*bmPow(It,2)*vt[Et]+bmPow(It,3)*xt[Et],jt[Et]=Tt,Ft[Et]!==null&&(Dt+=bmPow(jt[Et]-Ft[Et],2)),Ft[Et]=jt[Et];Dt&&(Dt=bmSqrt(Dt),At+=Dt),Lt.percents[wt]=It,Lt.lengths[wt]=At}return Lt.addedLength=At,Lt}}();function lt(gt){var xt=segmentsLengthPool.newElement(),yt=gt.c,vt=gt.v,St=gt.o,wt=gt.i,Et,Rt=gt._length,Tt=xt.lengths,It=0;for(Et=0;Et<Rt-1;Et+=1)Tt[Et]=st(vt[Et],vt[Et+1],St[Et],wt[Et+1]),It+=Tt[Et].addedLength;return yt&&Rt&&(Tt[Et]=st(vt[Et],vt[0],St[Et],wt[0]),It+=Tt[Et].addedLength),xt.totalLength=It,xt}function ct(gt){this.segmentLength=0,this.points=new Array(gt)}function ut(gt,xt){this.partialLength=gt,this.point=xt}var dt=function(){var gt={};return function(xt,yt,vt,St){var wt=(xt[0]+"_"+xt[1]+"_"+yt[0]+"_"+yt[1]+"_"+vt[0]+"_"+vt[1]+"_"+St[0]+"_"+St[1]).replace(/\./g,"p");if(!gt[wt]){var Et=getDefaultCurveSegments(),Rt,Tt,It,At,Dt,jt=0,Ft,Lt,Mt=null;xt.length===2&&(xt[0]!==yt[0]||xt[1]!==yt[1])&&rt(xt[0],xt[1],yt[0],yt[1],xt[0]+vt[0],xt[1]+vt[1])&&rt(xt[0],xt[1],yt[0],yt[1],yt[0]+St[0],yt[1]+St[1])&&(Et=2);var Ot=new ct(Et);for(It=vt.length,Rt=0;Rt<Et;Rt+=1){for(Lt=createSizedArray(It),Dt=Rt/(Et-1),Ft=0,Tt=0;Tt<It;Tt+=1)At=bmPow(1-Dt,3)*xt[Tt]+3*bmPow(1-Dt,2)*Dt*(xt[Tt]+vt[Tt])+3*(1-Dt)*bmPow(Dt,2)*(yt[Tt]+St[Tt])+bmPow(Dt,3)*yt[Tt],Lt[Tt]=At,Mt!==null&&(Ft+=bmPow(Lt[Tt]-Mt[Tt],2));Ft=bmSqrt(Ft),jt+=Ft,Ot.points[Rt]=new ut(Ft,Lt),Mt=Lt}Ot.segmentLength=jt,gt[wt]=Ot}return gt[wt]}}();function ht(gt,xt){var yt=xt.percents,vt=xt.lengths,St=yt.length,wt=bmFloor((St-1)*gt),Et=gt*xt.addedLength,Rt=0;if(wt===St-1||wt===0||Et===vt[wt])return yt[wt];for(var Tt=vt[wt]>Et?-1:1,It=!0;It;)if(vt[wt]<=Et&&vt[wt+1]>Et?(Rt=(Et-vt[wt])/(vt[wt+1]-vt[wt]),It=!1):wt+=Tt,wt<0||wt>=St-1){if(wt===St-1)return yt[wt];It=!1}return yt[wt]+(yt[wt+1]-yt[wt])*Rt}function ft(gt,xt,yt,vt,St,wt){var Et=ht(St,wt),Rt=1-Et,Tt=nt.round((Rt*Rt*Rt*gt[0]+(Et*Rt*Rt+Rt*Et*Rt+Rt*Rt*Et)*yt[0]+(Et*Et*Rt+Rt*Et*Et+Et*Rt*Et)*vt[0]+Et*Et*Et*xt[0])*1e3)/1e3,It=nt.round((Rt*Rt*Rt*gt[1]+(Et*Rt*Rt+Rt*Et*Rt+Rt*Rt*Et)*yt[1]+(Et*Et*Rt+Rt*Et*Et+Et*Rt*Et)*vt[1]+Et*Et*Et*xt[1])*1e3)/1e3;return[Tt,It]}var pt=createTypedArray("float32",8);function mt(gt,xt,yt,vt,St,wt,Et){St<0?St=0:St>1&&(St=1);var Rt=ht(St,Et);wt=wt>1?1:wt;var Tt=ht(wt,Et),It,At=gt.length,Dt=1-Rt,jt=1-Tt,Ft=Dt*Dt*Dt,Lt=Rt*Dt*Dt*3,Mt=Rt*Rt*Dt*3,Ot=Rt*Rt*Rt,Nt=Dt*Dt*jt,$t=Rt*Dt*jt+Dt*Rt*jt+Dt*Dt*Tt,Vt=Rt*Rt*jt+Dt*Rt*Tt+Rt*Dt*Tt,Ut=Rt*Rt*Tt,zt=Dt*jt*jt,Bt=Rt*jt*jt+Dt*Tt*jt+Dt*jt*Tt,Ht=Rt*Tt*jt+Dt*Tt*Tt+Rt*jt*Tt,Gt=Rt*Tt*Tt,Xt=jt*jt*jt,Zt=Tt*jt*jt+jt*Tt*jt+jt*jt*Tt,hr=Tt*Tt*jt+jt*Tt*Tt+Tt*jt*Tt,nr=Tt*Tt*Tt;for(It=0;It<At;It+=1)pt[It*4]=nt.round((Ft*gt[It]+Lt*yt[It]+Mt*vt[It]+Ot*xt[It])*1e3)/1e3,pt[It*4+1]=nt.round((Nt*gt[It]+$t*yt[It]+Vt*vt[It]+Ut*xt[It])*1e3)/1e3,pt[It*4+2]=nt.round((zt*gt[It]+Bt*yt[It]+Ht*vt[It]+Gt*xt[It])*1e3)/1e3,pt[It*4+3]=nt.round((Xt*gt[It]+Zt*yt[It]+hr*vt[It]+nr*xt[It])*1e3)/1e3;return pt}return{getSegmentsLength:lt,getNewSegment:mt,getPointInSegment:ft,buildBezierData:dt,pointOnLine2D:rt,pointOnLine3D:it}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(nt,rt){var it=this.offsetTime,st;this.propType==="multidimensional"&&(st=createTypedArray("float32",this.pv.length));for(var lt=rt.lastIndex,ct=lt,ut=this.keyframes.length-1,dt=!0,ht,ft,pt;dt;){if(ht=this.keyframes[ct],ft=this.keyframes[ct+1],ct===ut-1&&nt>=ft.t-it){ht.h&&(ht=ft),lt=0;break}if(ft.t-it>nt){lt=ct;break}ct<ut-1?ct+=1:(lt=0,dt=!1)}pt=this.keyframesMetadata[ct]||{};var mt,gt,xt,yt,vt,St,wt=ft.t-it,Et=ht.t-it,Rt;if(ht.to){pt.bezierData||(pt.bezierData=bez.buildBezierData(ht.s,ft.s||ht.e,ht.to,ht.ti));var Tt=pt.bezierData;if(nt>=wt||nt<Et){var It=nt>=wt?Tt.points.length-1:0;for(gt=Tt.points[It].point.length,mt=0;mt<gt;mt+=1)st[mt]=Tt.points[It].point[mt]}else{pt.__fnct?St=pt.__fnct:(St=BezierFactory.getBezierEasing(ht.o.x,ht.o.y,ht.i.x,ht.i.y,ht.n).get,pt.__fnct=St),xt=St((nt-Et)/(wt-Et));var At=Tt.segmentLength*xt,Dt,jt=rt.lastFrame<nt&&rt._lastKeyframeIndex===ct?rt._lastAddedLength:0;for(vt=rt.lastFrame<nt&&rt._lastKeyframeIndex===ct?rt._lastPoint:0,dt=!0,yt=Tt.points.length;dt;){if(jt+=Tt.points[vt].partialLength,At===0||xt===0||vt===Tt.points.length-1){for(gt=Tt.points[vt].point.length,mt=0;mt<gt;mt+=1)st[mt]=Tt.points[vt].point[mt];break}else if(At>=jt&&At<jt+Tt.points[vt+1].partialLength){for(Dt=(At-jt)/Tt.points[vt+1].partialLength,gt=Tt.points[vt].point.length,mt=0;mt<gt;mt+=1)st[mt]=Tt.points[vt].point[mt]+(Tt.points[vt+1].point[mt]-Tt.points[vt].point[mt])*Dt;break}vt<yt-1?vt+=1:dt=!1}rt._lastPoint=vt,rt._lastAddedLength=jt-Tt.points[vt].partialLength,rt._lastKeyframeIndex=ct}}else{var Ft,Lt,Mt,Ot,Nt;if(ut=ht.s.length,Rt=ft.s||ht.e,this.sh&&ht.h!==1)if(nt>=wt)st[0]=Rt[0],st[1]=Rt[1],st[2]=Rt[2];else if(nt<=Et)st[0]=ht.s[0],st[1]=ht.s[1],st[2]=ht.s[2];else{var $t=createQuaternion(ht.s),Vt=createQuaternion(Rt),Ut=(nt-Et)/(wt-Et);quaternionToEuler(st,slerp($t,Vt,Ut))}else for(ct=0;ct<ut;ct+=1)ht.h!==1&&(nt>=wt?xt=1:nt<Et?xt=0:(ht.o.x.constructor===Array?(pt.__fnct||(pt.__fnct=[]),pt.__fnct[ct]?St=pt.__fnct[ct]:(Ft=ht.o.x[ct]===void 0?ht.o.x[0]:ht.o.x[ct],Lt=ht.o.y[ct]===void 0?ht.o.y[0]:ht.o.y[ct],Mt=ht.i.x[ct]===void 0?ht.i.x[0]:ht.i.x[ct],Ot=ht.i.y[ct]===void 0?ht.i.y[0]:ht.i.y[ct],St=BezierFactory.getBezierEasing(Ft,Lt,Mt,Ot).get,pt.__fnct[ct]=St)):pt.__fnct?St=pt.__fnct:(Ft=ht.o.x,Lt=ht.o.y,Mt=ht.i.x,Ot=ht.i.y,St=BezierFactory.getBezierEasing(Ft,Lt,Mt,Ot).get,ht.keyframeMetadata=St),xt=St((nt-Et)/(wt-Et)))),Rt=ft.s||ht.e,Nt=ht.h===1?ht.s[ct]:ht.s[ct]+(Rt[ct]-ht.s[ct])*xt,this.propType==="multidimensional"?st[ct]=Nt:st=Nt}return rt.lastIndex=lt,st}function slerp(nt,rt,it){var st=[],lt=nt[0],ct=nt[1],ut=nt[2],dt=nt[3],ht=rt[0],ft=rt[1],pt=rt[2],mt=rt[3],gt,xt,yt,vt,St;return xt=lt*ht+ct*ft+ut*pt+dt*mt,xt<0&&(xt=-xt,ht=-ht,ft=-ft,pt=-pt,mt=-mt),1-xt>1e-6?(gt=Math.acos(xt),yt=Math.sin(gt),vt=Math.sin((1-it)*gt)/yt,St=Math.sin(it*gt)/yt):(vt=1-it,St=it),st[0]=vt*lt+St*ht,st[1]=vt*ct+St*ft,st[2]=vt*ut+St*pt,st[3]=vt*dt+St*mt,st}function quaternionToEuler(nt,rt){var it=rt[0],st=rt[1],lt=rt[2],ct=rt[3],ut=Math.atan2(2*st*ct-2*it*lt,1-2*st*st-2*lt*lt),dt=Math.asin(2*it*st+2*lt*ct),ht=Math.atan2(2*it*ct-2*st*lt,1-2*it*it-2*lt*lt);nt[0]=ut/degToRads,nt[1]=dt/degToRads,nt[2]=ht/degToRads}function createQuaternion(nt){var rt=nt[0]*degToRads,it=nt[1]*degToRads,st=nt[2]*degToRads,lt=Math.cos(rt/2),ct=Math.cos(it/2),ut=Math.cos(st/2),dt=Math.sin(rt/2),ht=Math.sin(it/2),ft=Math.sin(st/2),pt=lt*ct*ut-dt*ht*ft,mt=dt*ht*ut+lt*ct*ft,gt=dt*ct*ut+lt*ht*ft,xt=lt*ht*ut-dt*ct*ft;return[mt,gt,xt,pt]}function getValueAtCurrentTime(){var nt=this.comp.renderedFrame-this.offsetTime,rt=this.keyframes[0].t-this.offsetTime,it=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(nt===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=it&&nt>=it||this._caching.lastFrame<rt&&nt<rt))){this._caching.lastFrame>=nt&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var st=this.interpolateValue(nt,this._caching);this.pv=st}return this._caching.lastFrame=nt,this.pv}function setVValue(nt){var rt;if(this.propType==="unidimensional")rt=nt*this.mult,mathAbs(this.v-rt)>1e-5&&(this.v=rt,this._mdf=!0);else for(var it=0,st=this.v.length;it<st;)rt=nt[it]*this.mult,mathAbs(this.v[it]-rt)>1e-5&&(this.v[it]=rt,this._mdf=!0),it+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var nt,rt=this.effectsSequence.length,it=this.kf?this.pv:this.data.k;for(nt=0;nt<rt;nt+=1)it=this.effectsSequence[nt](it);this.setVValue(it),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(nt){this.effectsSequence.push(nt),this.container.addDynamicProperty(this)}function ValueProperty(nt,rt,it,st){this.propType="unidimensional",this.mult=it||1,this.data=rt,this.v=it?rt.k*it:rt.k,this.pv=rt.k,this._mdf=!1,this.elem=nt,this.container=st,this.comp=nt.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(nt,rt,it,st){this.propType="multidimensional",this.mult=it||1,this.data=rt,this._mdf=!1,this.elem=nt,this.container=st,this.comp=nt.comp,this.k=!1,this.kf=!1,this.frameId=-1;var lt,ct=rt.k.length;for(this.v=createTypedArray("float32",ct),this.pv=createTypedArray("float32",ct),this.vel=createTypedArray("float32",ct),lt=0;lt<ct;lt+=1)this.v[lt]=rt.k[lt]*this.mult,this.pv[lt]=rt.k[lt];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(nt,rt,it,st){this.propType="unidimensional",this.keyframes=rt.k,this.keyframesMetadata=[],this.offsetTime=nt.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=rt,this.mult=it||1,this.elem=nt,this.container=st,this.comp=nt.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(nt,rt,it,st){this.propType="multidimensional";var lt,ct=rt.k.length,ut,dt,ht,ft;for(lt=0;lt<ct-1;lt+=1)rt.k[lt].to&&rt.k[lt].s&&rt.k[lt+1]&&rt.k[lt+1].s&&(ut=rt.k[lt].s,dt=rt.k[lt+1].s,ht=rt.k[lt].to,ft=rt.k[lt].ti,(ut.length===2&&!(ut[0]===dt[0]&&ut[1]===dt[1])&&bez.pointOnLine2D(ut[0],ut[1],dt[0],dt[1],ut[0]+ht[0],ut[1]+ht[1])&&bez.pointOnLine2D(ut[0],ut[1],dt[0],dt[1],dt[0]+ft[0],dt[1]+ft[1])||ut.length===3&&!(ut[0]===dt[0]&&ut[1]===dt[1]&&ut[2]===dt[2])&&bez.pointOnLine3D(ut[0],ut[1],ut[2],dt[0],dt[1],dt[2],ut[0]+ht[0],ut[1]+ht[1],ut[2]+ht[2])&&bez.pointOnLine3D(ut[0],ut[1],ut[2],dt[0],dt[1],dt[2],dt[0]+ft[0],dt[1]+ft[1],dt[2]+ft[2]))&&(rt.k[lt].to=null,rt.k[lt].ti=null),ut[0]===dt[0]&&ut[1]===dt[1]&&ht[0]===0&&ht[1]===0&&ft[0]===0&&ft[1]===0&&(ut.length===2||ut[2]===dt[2]&&ht[2]===0&&ft[2]===0)&&(rt.k[lt].to=null,rt.k[lt].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=rt,this.keyframes=rt.k,this.keyframesMetadata=[],this.offsetTime=nt.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=it||1,this.elem=nt,this.container=st,this.comp=nt.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var pt=rt.k[0].s.length;for(this.v=createTypedArray("float32",pt),this.pv=createTypedArray("float32",pt),lt=0;lt<pt;lt+=1)this.v[lt]=initFrame,this.pv[lt]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",pt)},this.addEffect=addEffect}var PropertyFactory=function(){function nt(it,st,lt,ct,ut){st.sid&&(st=it.globalData.slotManager.getProp(st));var dt;if(!st.k.length)dt=new ValueProperty(it,st,ct,ut);else if(typeof st.k[0]=="number")dt=new MultiDimensionalProperty(it,st,ct,ut);else switch(lt){case 0:dt=new KeyframedValueProperty(it,st,ct,ut);break;case 1:dt=new KeyframedMultidimensionalProperty(it,st,ct,ut);break}return dt.effectsSequence.length&&ut.addDynamicProperty(dt),dt}var rt={getProp:nt};return rt}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(rt){this.dynamicProperties.indexOf(rt)===-1&&(this.dynamicProperties.push(rt),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var rt,it=this.dynamicProperties.length;for(rt=0;rt<it;rt+=1)this.dynamicProperties[rt].getValue(),this.dynamicProperties[rt]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(rt){this.container=rt,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function nt(){return createTypedArray("float32",2)}return poolFactory(8,nt)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(nt,rt){this.c=nt,this.setLength(rt);for(var it=0;it<rt;)this.v[it]=pointPool.newElement(),this.o[it]=pointPool.newElement(),this.i[it]=pointPool.newElement(),it+=1},ShapePath.prototype.setLength=function(nt){for(;this._maxLength<nt;)this.doubleArrayLength();this._length=nt},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(nt,rt,it,st,lt){var ct;switch(this._length=Math.max(this._length,st+1),this._length>=this._maxLength&&this.doubleArrayLength(),it){case"v":ct=this.v;break;case"i":ct=this.i;break;case"o":ct=this.o;break;default:ct=[];break}(!ct[st]||ct[st]&&!lt)&&(ct[st]=pointPool.newElement()),ct[st][0]=nt,ct[st][1]=rt},ShapePath.prototype.setTripleAt=function(nt,rt,it,st,lt,ct,ut,dt){this.setXYAt(nt,rt,"v",ut,dt),this.setXYAt(it,st,"o",ut,dt),this.setXYAt(lt,ct,"i",ut,dt)},ShapePath.prototype.reverse=function(){var nt=new ShapePath;nt.setPathData(this.c,this._length);var rt=this.v,it=this.o,st=this.i,lt=0;this.c&&(nt.setTripleAt(rt[0][0],rt[0][1],st[0][0],st[0][1],it[0][0],it[0][1],0,!1),lt=1);var ct=this._length-1,ut=this._length,dt;for(dt=lt;dt<ut;dt+=1)nt.setTripleAt(rt[ct][0],rt[ct][1],st[ct][0],st[ct][1],it[ct][0],it[ct][1],dt,!1),ct-=1;return nt},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function nt(){return new ShapePath}function rt(lt){var ct=lt._length,ut;for(ut=0;ut<ct;ut+=1)pointPool.release(lt.v[ut]),pointPool.release(lt.i[ut]),pointPool.release(lt.o[ut]),lt.v[ut]=null,lt.i[ut]=null,lt.o[ut]=null;lt._length=0,lt.c=!1}function it(lt){var ct=st.newElement(),ut,dt=lt._length===void 0?lt.v.length:lt._length;for(ct.setLength(dt),ct.c=lt.c,ut=0;ut<dt;ut+=1)ct.setTripleAt(lt.v[ut][0],lt.v[ut][1],lt.o[ut][0],lt.o[ut][1],lt.i[ut][0],lt.i[ut][1],ut);return ct}var st=poolFactory(4,nt,rt);return st.clone=it,st}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(nt){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=nt,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var nt;for(nt=0;nt<this._length;nt+=1)shapePool.release(this.shapes[nt]);this._length=0};var shapeCollectionPool=function(){var nt={newShapeCollection:lt,release:ct},rt=0,it=4,st=createSizedArray(it);function lt(){var ut;return rt?(rt-=1,ut=st[rt]):ut=new ShapeCollection,ut}function ct(ut){var dt,ht=ut._length;for(dt=0;dt<ht;dt+=1)shapePool.release(ut.shapes[dt]);ut._length=0,rt===it&&(st=pooling.double(st),it*=2),st[rt]=ut,rt+=1}return nt}(),ShapePropertyFactory=function(){var nt=-999999;function rt(wt,Et,Rt){var Tt=Rt.lastIndex,It,At,Dt,jt,Ft,Lt,Mt,Ot,Nt,$t=this.keyframes;if(wt<$t[0].t-this.offsetTime)It=$t[0].s[0],Dt=!0,Tt=0;else if(wt>=$t[$t.length-1].t-this.offsetTime)It=$t[$t.length-1].s?$t[$t.length-1].s[0]:$t[$t.length-2].e[0],Dt=!0;else{for(var Vt=Tt,Ut=$t.length-1,zt=!0,Bt,Ht,Gt;zt&&(Bt=$t[Vt],Ht=$t[Vt+1],!(Ht.t-this.offsetTime>wt));)Vt<Ut-1?Vt+=1:zt=!1;if(Gt=this.keyframesMetadata[Vt]||{},Dt=Bt.h===1,Tt=Vt,!Dt){if(wt>=Ht.t-this.offsetTime)Ot=1;else if(wt<Bt.t-this.offsetTime)Ot=0;else{var Xt;Gt.__fnct?Xt=Gt.__fnct:(Xt=BezierFactory.getBezierEasing(Bt.o.x,Bt.o.y,Bt.i.x,Bt.i.y).get,Gt.__fnct=Xt),Ot=Xt((wt-(Bt.t-this.offsetTime))/(Ht.t-this.offsetTime-(Bt.t-this.offsetTime)))}At=Ht.s?Ht.s[0]:Bt.e[0]}It=Bt.s[0]}for(Lt=Et._length,Mt=It.i[0].length,Rt.lastIndex=Tt,jt=0;jt<Lt;jt+=1)for(Ft=0;Ft<Mt;Ft+=1)Nt=Dt?It.i[jt][Ft]:It.i[jt][Ft]+(At.i[jt][Ft]-It.i[jt][Ft])*Ot,Et.i[jt][Ft]=Nt,Nt=Dt?It.o[jt][Ft]:It.o[jt][Ft]+(At.o[jt][Ft]-It.o[jt][Ft])*Ot,Et.o[jt][Ft]=Nt,Nt=Dt?It.v[jt][Ft]:It.v[jt][Ft]+(At.v[jt][Ft]-It.v[jt][Ft])*Ot,Et.v[jt][Ft]=Nt}function it(){var wt=this.comp.renderedFrame-this.offsetTime,Et=this.keyframes[0].t-this.offsetTime,Rt=this.keyframes[this.keyframes.length-1].t-this.offsetTime,Tt=this._caching.lastFrame;return Tt!==nt&&(Tt<Et&&wt<Et||Tt>Rt&&wt>Rt)||(this._caching.lastIndex=Tt<wt?this._caching.lastIndex:0,this.interpolateShape(wt,this.pv,this._caching)),this._caching.lastFrame=wt,this.pv}function st(){this.paths=this.localShapeCollection}function lt(wt,Et){if(wt._length!==Et._length||wt.c!==Et.c)return!1;var Rt,Tt=wt._length;for(Rt=0;Rt<Tt;Rt+=1)if(wt.v[Rt][0]!==Et.v[Rt][0]||wt.v[Rt][1]!==Et.v[Rt][1]||wt.o[Rt][0]!==Et.o[Rt][0]||wt.o[Rt][1]!==Et.o[Rt][1]||wt.i[Rt][0]!==Et.i[Rt][0]||wt.i[Rt][1]!==Et.i[Rt][1])return!1;return!0}function ct(wt){lt(this.v,wt)||(this.v=shapePool.clone(wt),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function ut(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var wt;this.kf?wt=this.pv:this.data.ks?wt=this.data.ks.k:wt=this.data.pt.k;var Et,Rt=this.effectsSequence.length;for(Et=0;Et<Rt;Et+=1)wt=this.effectsSequence[Et](wt);this.setVValue(wt),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function dt(wt,Et,Rt){this.propType="shape",this.comp=wt.comp,this.container=wt,this.elem=wt,this.data=Et,this.k=!1,this.kf=!1,this._mdf=!1;var Tt=Rt===3?Et.pt.k:Et.ks.k;this.v=shapePool.clone(Tt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=st,this.effectsSequence=[]}function ht(wt){this.effectsSequence.push(wt),this.container.addDynamicProperty(this)}dt.prototype.interpolateShape=rt,dt.prototype.getValue=ut,dt.prototype.setVValue=ct,dt.prototype.addEffect=ht;function ft(wt,Et,Rt){this.propType="shape",this.comp=wt.comp,this.elem=wt,this.container=wt,this.offsetTime=wt.data.st,this.keyframes=Rt===3?Et.pt.k:Et.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var Tt=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,Tt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=nt,this.reset=st,this._caching={lastFrame:nt,lastIndex:0},this.effectsSequence=[it.bind(this)]}ft.prototype.getValue=ut,ft.prototype.interpolateShape=rt,ft.prototype.setVValue=ct,ft.prototype.addEffect=ht;var pt=function(){var wt=roundCorner;function Et(Rt,Tt){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=Tt.d,this.elem=Rt,this.comp=Rt.comp,this.frameId=-1,this.initDynamicPropertyContainer(Rt),this.p=PropertyFactory.getProp(Rt,Tt.p,1,0,this),this.s=PropertyFactory.getProp(Rt,Tt.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return Et.prototype={reset:st,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Tt=this.p.v[0],It=this.p.v[1],At=this.s.v[0]/2,Dt=this.s.v[1]/2,jt=this.d!==3,Ft=this.v;Ft.v[0][0]=Tt,Ft.v[0][1]=It-Dt,Ft.v[1][0]=jt?Tt+At:Tt-At,Ft.v[1][1]=It,Ft.v[2][0]=Tt,Ft.v[2][1]=It+Dt,Ft.v[3][0]=jt?Tt-At:Tt+At,Ft.v[3][1]=It,Ft.i[0][0]=jt?Tt-At*wt:Tt+At*wt,Ft.i[0][1]=It-Dt,Ft.i[1][0]=jt?Tt+At:Tt-At,Ft.i[1][1]=It-Dt*wt,Ft.i[2][0]=jt?Tt+At*wt:Tt-At*wt,Ft.i[2][1]=It+Dt,Ft.i[3][0]=jt?Tt-At:Tt+At,Ft.i[3][1]=It+Dt*wt,Ft.o[0][0]=jt?Tt+At*wt:Tt-At*wt,Ft.o[0][1]=It-Dt,Ft.o[1][0]=jt?Tt+At:Tt-At,Ft.o[1][1]=It+Dt*wt,Ft.o[2][0]=jt?Tt-At*wt:Tt+At*wt,Ft.o[2][1]=It+Dt,Ft.o[3][0]=jt?Tt-At:Tt+At,Ft.o[3][1]=It-Dt*wt}},extendPrototype([DynamicPropertyContainer],Et),Et}(),mt=function(){function wt(Et,Rt){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=Et,this.comp=Et.comp,this.data=Rt,this.frameId=-1,this.d=Rt.d,this.initDynamicPropertyContainer(Et),Rt.sy===1?(this.ir=PropertyFactory.getProp(Et,Rt.ir,0,0,this),this.is=PropertyFactory.getProp(Et,Rt.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(Et,Rt.pt,0,0,this),this.p=PropertyFactory.getProp(Et,Rt.p,1,0,this),this.r=PropertyFactory.getProp(Et,Rt.r,0,degToRads,this),this.or=PropertyFactory.getProp(Et,Rt.or,0,0,this),this.os=PropertyFactory.getProp(Et,Rt.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return wt.prototype={reset:st,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Rt=Math.floor(this.pt.v)*2,Tt=Math.PI*2/Rt,It=!0,At=this.or.v,Dt=this.ir.v,jt=this.os.v,Ft=this.is.v,Lt=2*Math.PI*At/(Rt*2),Mt=2*Math.PI*Dt/(Rt*2),Ot,Nt,$t,Vt,Ut=-Math.PI/2;Ut+=this.r.v;var zt=this.data.d===3?-1:1;for(this.v._length=0,Ot=0;Ot<Rt;Ot+=1){Nt=It?At:Dt,$t=It?jt:Ft,Vt=It?Lt:Mt;var Bt=Nt*Math.cos(Ut),Ht=Nt*Math.sin(Ut),Gt=Bt===0&&Ht===0?0:Ht/Math.sqrt(Bt*Bt+Ht*Ht),Xt=Bt===0&&Ht===0?0:-Bt/Math.sqrt(Bt*Bt+Ht*Ht);Bt+=+this.p.v[0],Ht+=+this.p.v[1],this.v.setTripleAt(Bt,Ht,Bt-Gt*Vt*$t*zt,Ht-Xt*Vt*$t*zt,Bt+Gt*Vt*$t*zt,Ht+Xt*Vt*$t*zt,Ot,!0),It=!It,Ut+=Tt*zt}},convertPolygonToPath:function(){var Rt=Math.floor(this.pt.v),Tt=Math.PI*2/Rt,It=this.or.v,At=this.os.v,Dt=2*Math.PI*It/(Rt*4),jt,Ft=-Math.PI*.5,Lt=this.data.d===3?-1:1;for(Ft+=this.r.v,this.v._length=0,jt=0;jt<Rt;jt+=1){var Mt=It*Math.cos(Ft),Ot=It*Math.sin(Ft),Nt=Mt===0&&Ot===0?0:Ot/Math.sqrt(Mt*Mt+Ot*Ot),$t=Mt===0&&Ot===0?0:-Mt/Math.sqrt(Mt*Mt+Ot*Ot);Mt+=+this.p.v[0],Ot+=+this.p.v[1],this.v.setTripleAt(Mt,Ot,Mt-Nt*Dt*At*Lt,Ot-$t*Dt*At*Lt,Mt+Nt*Dt*At*Lt,Ot+$t*Dt*At*Lt,jt,!0),Ft+=Tt*Lt}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],wt),wt}(),gt=function(){function wt(Et,Rt){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=Et,this.comp=Et.comp,this.frameId=-1,this.d=Rt.d,this.initDynamicPropertyContainer(Et),this.p=PropertyFactory.getProp(Et,Rt.p,1,0,this),this.s=PropertyFactory.getProp(Et,Rt.s,1,0,this),this.r=PropertyFactory.getProp(Et,Rt.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return wt.prototype={convertRectToPath:function(){var Rt=this.p.v[0],Tt=this.p.v[1],It=this.s.v[0]/2,At=this.s.v[1]/2,Dt=bmMin(It,At,this.r.v),jt=Dt*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Rt+It,Tt-At+Dt,Rt+It,Tt-At+Dt,Rt+It,Tt-At+jt,0,!0),this.v.setTripleAt(Rt+It,Tt+At-Dt,Rt+It,Tt+At-jt,Rt+It,Tt+At-Dt,1,!0),Dt!==0?(this.v.setTripleAt(Rt+It-Dt,Tt+At,Rt+It-Dt,Tt+At,Rt+It-jt,Tt+At,2,!0),this.v.setTripleAt(Rt-It+Dt,Tt+At,Rt-It+jt,Tt+At,Rt-It+Dt,Tt+At,3,!0),this.v.setTripleAt(Rt-It,Tt+At-Dt,Rt-It,Tt+At-Dt,Rt-It,Tt+At-jt,4,!0),this.v.setTripleAt(Rt-It,Tt-At+Dt,Rt-It,Tt-At+jt,Rt-It,Tt-At+Dt,5,!0),this.v.setTripleAt(Rt-It+Dt,Tt-At,Rt-It+Dt,Tt-At,Rt-It+jt,Tt-At,6,!0),this.v.setTripleAt(Rt+It-Dt,Tt-At,Rt+It-jt,Tt-At,Rt+It-Dt,Tt-At,7,!0)):(this.v.setTripleAt(Rt-It,Tt+At,Rt-It+jt,Tt+At,Rt-It,Tt+At,2),this.v.setTripleAt(Rt-It,Tt-At,Rt-It,Tt-At+jt,Rt-It,Tt-At,3))):(this.v.setTripleAt(Rt+It,Tt-At+Dt,Rt+It,Tt-At+jt,Rt+It,Tt-At+Dt,0,!0),Dt!==0?(this.v.setTripleAt(Rt+It-Dt,Tt-At,Rt+It-Dt,Tt-At,Rt+It-jt,Tt-At,1,!0),this.v.setTripleAt(Rt-It+Dt,Tt-At,Rt-It+jt,Tt-At,Rt-It+Dt,Tt-At,2,!0),this.v.setTripleAt(Rt-It,Tt-At+Dt,Rt-It,Tt-At+Dt,Rt-It,Tt-At+jt,3,!0),this.v.setTripleAt(Rt-It,Tt+At-Dt,Rt-It,Tt+At-jt,Rt-It,Tt+At-Dt,4,!0),this.v.setTripleAt(Rt-It+Dt,Tt+At,Rt-It+Dt,Tt+At,Rt-It+jt,Tt+At,5,!0),this.v.setTripleAt(Rt+It-Dt,Tt+At,Rt+It-jt,Tt+At,Rt+It-Dt,Tt+At,6,!0),this.v.setTripleAt(Rt+It,Tt+At-Dt,Rt+It,Tt+At-Dt,Rt+It,Tt+At-jt,7,!0)):(this.v.setTripleAt(Rt-It,Tt-At,Rt-It+jt,Tt-At,Rt-It,Tt-At,1,!0),this.v.setTripleAt(Rt-It,Tt+At,Rt-It,Tt+At-jt,Rt-It,Tt+At,2,!0),this.v.setTripleAt(Rt+It,Tt+At,Rt+It-jt,Tt+At,Rt+It,Tt+At,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:st},extendPrototype([DynamicPropertyContainer],wt),wt}();function xt(wt,Et,Rt){var Tt;if(Rt===3||Rt===4){var It=Rt===3?Et.pt:Et.ks,At=It.k;At.length?Tt=new ft(wt,Et,Rt):Tt=new dt(wt,Et,Rt)}else Rt===5?Tt=new gt(wt,Et):Rt===6?Tt=new pt(wt,Et):Rt===7&&(Tt=new mt(wt,Et));return Tt.k&&wt.addDynamicProperty(Tt),Tt}function yt(){return dt}function vt(){return ft}var St={};return St.getShapeProp=xt,St.getConstructorFunction=yt,St.getKeyframedConstructorFunction=vt,St}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var nt=Math.cos,rt=Math.sin,it=Math.tan,st=Math.round;function lt(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function ct(Bt){if(Bt===0)return this;var Ht=nt(Bt),Gt=rt(Bt);return this._t(Ht,-Gt,0,0,Gt,Ht,0,0,0,0,1,0,0,0,0,1)}function ut(Bt){if(Bt===0)return this;var Ht=nt(Bt),Gt=rt(Bt);return this._t(1,0,0,0,0,Ht,-Gt,0,0,Gt,Ht,0,0,0,0,1)}function dt(Bt){if(Bt===0)return this;var Ht=nt(Bt),Gt=rt(Bt);return this._t(Ht,0,Gt,0,0,1,0,0,-Gt,0,Ht,0,0,0,0,1)}function ht(Bt){if(Bt===0)return this;var Ht=nt(Bt),Gt=rt(Bt);return this._t(Ht,-Gt,0,0,Gt,Ht,0,0,0,0,1,0,0,0,0,1)}function ft(Bt,Ht){return this._t(1,Ht,Bt,1,0,0)}function pt(Bt,Ht){return this.shear(it(Bt),it(Ht))}function mt(Bt,Ht){var Gt=nt(Ht),Xt=rt(Ht);return this._t(Gt,Xt,0,0,-Xt,Gt,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,it(Bt),1,0,0,0,0,1,0,0,0,0,1)._t(Gt,-Xt,0,0,Xt,Gt,0,0,0,0,1,0,0,0,0,1)}function gt(Bt,Ht,Gt){return!Gt&&Gt!==0&&(Gt=1),Bt===1&&Ht===1&&Gt===1?this:this._t(Bt,0,0,0,0,Ht,0,0,0,0,Gt,0,0,0,0,1)}function xt(Bt,Ht,Gt,Xt,Zt,hr,nr,ir,yr,Cr,Sr,xr,gr,_r,fr,Nr){return this.props[0]=Bt,this.props[1]=Ht,this.props[2]=Gt,this.props[3]=Xt,this.props[4]=Zt,this.props[5]=hr,this.props[6]=nr,this.props[7]=ir,this.props[8]=yr,this.props[9]=Cr,this.props[10]=Sr,this.props[11]=xr,this.props[12]=gr,this.props[13]=_r,this.props[14]=fr,this.props[15]=Nr,this}function yt(Bt,Ht,Gt){return Gt=Gt||0,Bt!==0||Ht!==0||Gt!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Bt,Ht,Gt,1):this}function vt(Bt,Ht,Gt,Xt,Zt,hr,nr,ir,yr,Cr,Sr,xr,gr,_r,fr,Nr){var Tr=this.props;if(Bt===1&&Ht===0&&Gt===0&&Xt===0&&Zt===0&&hr===1&&nr===0&&ir===0&&yr===0&&Cr===0&&Sr===1&&xr===0)return Tr[12]=Tr[12]*Bt+Tr[15]*gr,Tr[13]=Tr[13]*hr+Tr[15]*_r,Tr[14]=Tr[14]*Sr+Tr[15]*fr,Tr[15]*=Nr,this._identityCalculated=!1,this;var Hr=Tr[0],Vr=Tr[1],mn=Tr[2],tn=Tr[3],er=Tr[4],tr=Tr[5],vr=Tr[6],Fr=Tr[7],Kr=Tr[8],qr=Tr[9],pn=Tr[10],En=Tr[11],Rn=Tr[12],Qn=Tr[13],Ln=Tr[14],ln=Tr[15];return Tr[0]=Hr*Bt+Vr*Zt+mn*yr+tn*gr,Tr[1]=Hr*Ht+Vr*hr+mn*Cr+tn*_r,Tr[2]=Hr*Gt+Vr*nr+mn*Sr+tn*fr,Tr[3]=Hr*Xt+Vr*ir+mn*xr+tn*Nr,Tr[4]=er*Bt+tr*Zt+vr*yr+Fr*gr,Tr[5]=er*Ht+tr*hr+vr*Cr+Fr*_r,Tr[6]=er*Gt+tr*nr+vr*Sr+Fr*fr,Tr[7]=er*Xt+tr*ir+vr*xr+Fr*Nr,Tr[8]=Kr*Bt+qr*Zt+pn*yr+En*gr,Tr[9]=Kr*Ht+qr*hr+pn*Cr+En*_r,Tr[10]=Kr*Gt+qr*nr+pn*Sr+En*fr,Tr[11]=Kr*Xt+qr*ir+pn*xr+En*Nr,Tr[12]=Rn*Bt+Qn*Zt+Ln*yr+ln*gr,Tr[13]=Rn*Ht+Qn*hr+Ln*Cr+ln*_r,Tr[14]=Rn*Gt+Qn*nr+Ln*Sr+ln*fr,Tr[15]=Rn*Xt+Qn*ir+Ln*xr+ln*Nr,this._identityCalculated=!1,this}function St(Bt){var Ht=Bt.props;return this.transform(Ht[0],Ht[1],Ht[2],Ht[3],Ht[4],Ht[5],Ht[6],Ht[7],Ht[8],Ht[9],Ht[10],Ht[11],Ht[12],Ht[13],Ht[14],Ht[15])}function wt(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function Et(Bt){for(var Ht=0;Ht<16;){if(Bt.props[Ht]!==this.props[Ht])return!1;Ht+=1}return!0}function Rt(Bt){var Ht;for(Ht=0;Ht<16;Ht+=1)Bt.props[Ht]=this.props[Ht];return Bt}function Tt(Bt){var Ht;for(Ht=0;Ht<16;Ht+=1)this.props[Ht]=Bt[Ht]}function It(Bt,Ht,Gt){return{x:Bt*this.props[0]+Ht*this.props[4]+Gt*this.props[8]+this.props[12],y:Bt*this.props[1]+Ht*this.props[5]+Gt*this.props[9]+this.props[13],z:Bt*this.props[2]+Ht*this.props[6]+Gt*this.props[10]+this.props[14]}}function At(Bt,Ht,Gt){return Bt*this.props[0]+Ht*this.props[4]+Gt*this.props[8]+this.props[12]}function Dt(Bt,Ht,Gt){return Bt*this.props[1]+Ht*this.props[5]+Gt*this.props[9]+this.props[13]}function jt(Bt,Ht,Gt){return Bt*this.props[2]+Ht*this.props[6]+Gt*this.props[10]+this.props[14]}function Ft(){var Bt=this.props[0]*this.props[5]-this.props[1]*this.props[4],Ht=this.props[5]/Bt,Gt=-this.props[1]/Bt,Xt=-this.props[4]/Bt,Zt=this.props[0]/Bt,hr=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Bt,nr=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Bt,ir=new Matrix;return ir.props[0]=Ht,ir.props[1]=Gt,ir.props[4]=Xt,ir.props[5]=Zt,ir.props[12]=hr,ir.props[13]=nr,ir}function Lt(Bt){var Ht=this.getInverseMatrix();return Ht.applyToPointArray(Bt[0],Bt[1],Bt[2]||0)}function Mt(Bt){var Ht,Gt=Bt.length,Xt=[];for(Ht=0;Ht<Gt;Ht+=1)Xt[Ht]=Lt(Bt[Ht]);return Xt}function Ot(Bt,Ht,Gt){var Xt=createTypedArray("float32",6);if(this.isIdentity())Xt[0]=Bt[0],Xt[1]=Bt[1],Xt[2]=Ht[0],Xt[3]=Ht[1],Xt[4]=Gt[0],Xt[5]=Gt[1];else{var Zt=this.props[0],hr=this.props[1],nr=this.props[4],ir=this.props[5],yr=this.props[12],Cr=this.props[13];Xt[0]=Bt[0]*Zt+Bt[1]*nr+yr,Xt[1]=Bt[0]*hr+Bt[1]*ir+Cr,Xt[2]=Ht[0]*Zt+Ht[1]*nr+yr,Xt[3]=Ht[0]*hr+Ht[1]*ir+Cr,Xt[4]=Gt[0]*Zt+Gt[1]*nr+yr,Xt[5]=Gt[0]*hr+Gt[1]*ir+Cr}return Xt}function Nt(Bt,Ht,Gt){var Xt;return this.isIdentity()?Xt=[Bt,Ht,Gt]:Xt=[Bt*this.props[0]+Ht*this.props[4]+Gt*this.props[8]+this.props[12],Bt*this.props[1]+Ht*this.props[5]+Gt*this.props[9]+this.props[13],Bt*this.props[2]+Ht*this.props[6]+Gt*this.props[10]+this.props[14]],Xt}function $t(Bt,Ht){if(this.isIdentity())return Bt+","+Ht;var Gt=this.props;return Math.round((Bt*Gt[0]+Ht*Gt[4]+Gt[12])*100)/100+","+Math.round((Bt*Gt[1]+Ht*Gt[5]+Gt[13])*100)/100}function Vt(){for(var Bt=0,Ht=this.props,Gt="matrix3d(",Xt=1e4;Bt<16;)Gt+=st(Ht[Bt]*Xt)/Xt,Gt+=Bt===15?")":",",Bt+=1;return Gt}function Ut(Bt){var Ht=1e4;return Bt<1e-6&&Bt>0||Bt>-1e-6&&Bt<0?st(Bt*Ht)/Ht:Bt}function zt(){var Bt=this.props,Ht=Ut(Bt[0]),Gt=Ut(Bt[1]),Xt=Ut(Bt[4]),Zt=Ut(Bt[5]),hr=Ut(Bt[12]),nr=Ut(Bt[13]);return"matrix("+Ht+","+Gt+","+Xt+","+Zt+","+hr+","+nr+")"}return function(){this.reset=lt,this.rotate=ct,this.rotateX=ut,this.rotateY=dt,this.rotateZ=ht,this.skew=pt,this.skewFromAxis=mt,this.shear=ft,this.scale=gt,this.setTransform=xt,this.translate=yt,this.transform=vt,this.multiply=St,this.applyToPoint=It,this.applyToX=At,this.applyToY=Dt,this.applyToZ=jt,this.applyToPointArray=Nt,this.applyToTriplePoints=Ot,this.applyToPointStringified=$t,this.toCSS=Vt,this.to2dCSS=zt,this.clone=Rt,this.cloneFromProps=Tt,this.equals=Et,this.inversePoints=Mt,this.inversePoint=Lt,this.getInverseMatrix=Ft,this._t=this.transform,this.isIdentity=wt,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(nt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(it){return typeof it}:_typeof$3=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},_typeof$3(nt)}var lottie={};function setLocation(nt){setLocationHref(nt)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(nt){setSubframeEnabled(nt)}function setPrefix(nt){setIdPrefix(nt)}function loadAnimation(nt){return animationManager.loadAnimation(nt)}function setQuality(nt){if(typeof nt=="string")switch(nt){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(nt)&&nt>1&&setDefaultCurveSegments(nt)}function inBrowser(){return typeof navigator<"u"}function installPlugin(nt,rt){nt==="expressions"&&setExpressionsPlugin(rt)}function getFactory(nt){switch(nt){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(nt){for(var rt=queryString.split("&"),it=0;it<rt.length;it+=1){var st=rt[it].split("=");if(decodeURIComponent(st[0])==nt)return decodeURIComponent(st[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(nt){}var ShapeModifiers=function(){var nt={},rt={};nt.registerModifier=it,nt.getModifier=st;function it(lt,ct){rt[lt]||(rt[lt]=ct)}function st(lt,ct,ut){return new rt[lt](ct,ut)}return nt}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(nt){if(!this.closed){nt.sh.container.addDynamicProperty(nt.sh);var rt={shape:nt.sh,data:nt,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(rt),this.addShapeToModifier(rt),this._isAnimated&&nt.setAsAnimated()}},ShapeModifier.prototype.init=function(nt,rt){this.shapes=[],this.elem=nt,this.initDynamicPropertyContainer(nt),this.initModifierProperties(nt,rt),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(nt,rt){this.s=PropertyFactory.getProp(nt,rt.s,0,.01,this),this.e=PropertyFactory.getProp(nt,rt.e,0,.01,this),this.o=PropertyFactory.getProp(nt,rt.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=rt.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(nt){nt.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(nt,rt,it,st,lt){var ct=[];rt<=1?ct.push({s:nt,e:rt}):nt>=1?ct.push({s:nt-1,e:rt-1}):(ct.push({s:nt,e:1}),ct.push({s:0,e:rt-1}));var ut=[],dt,ht=ct.length,ft;for(dt=0;dt<ht;dt+=1)if(ft=ct[dt],!(ft.e*lt<st||ft.s*lt>st+it)){var pt,mt;ft.s*lt<=st?pt=0:pt=(ft.s*lt-st)/it,ft.e*lt>=st+it?mt=1:mt=(ft.e*lt-st)/it,ut.push([pt,mt])}return ut.length||ut.push([0,0]),ut},TrimModifier.prototype.releasePathsData=function(nt){var rt,it=nt.length;for(rt=0;rt<it;rt+=1)segmentsLengthPool.release(nt[rt]);return nt.length=0,nt},TrimModifier.prototype.processShapes=function(nt){var rt,it;if(this._mdf||nt){var st=this.o.v%360/360;if(st<0&&(st+=1),this.s.v>1?rt=1+st:this.s.v<0?rt=0+st:rt=this.s.v+st,this.e.v>1?it=1+st:this.e.v<0?it=0+st:it=this.e.v+st,rt>it){var lt=rt;rt=it,it=lt}rt=Math.round(rt*1e4)*1e-4,it=Math.round(it*1e4)*1e-4,this.sValue=rt,this.eValue=it}else rt=this.sValue,it=this.eValue;var ct,ut,dt=this.shapes.length,ht,ft,pt,mt,gt,xt=0;if(it===rt)for(ut=0;ut<dt;ut+=1)this.shapes[ut].localShapeCollection.releaseShapes(),this.shapes[ut].shape._mdf=!0,this.shapes[ut].shape.paths=this.shapes[ut].localShapeCollection,this._mdf&&(this.shapes[ut].pathsData.length=0);else if(it===1&&rt===0||it===0&&rt===1){if(this._mdf)for(ut=0;ut<dt;ut+=1)this.shapes[ut].pathsData.length=0,this.shapes[ut].shape._mdf=!0}else{var yt=[],vt,St;for(ut=0;ut<dt;ut+=1)if(vt=this.shapes[ut],!vt.shape._mdf&&!this._mdf&&!nt&&this.m!==2)vt.shape.paths=vt.localShapeCollection;else{if(ct=vt.shape.paths,ft=ct._length,gt=0,!vt.shape._mdf&&vt.pathsData.length)gt=vt.totalShapeLength;else{for(pt=this.releasePathsData(vt.pathsData),ht=0;ht<ft;ht+=1)mt=bez.getSegmentsLength(ct.shapes[ht]),pt.push(mt),gt+=mt.totalLength;vt.totalShapeLength=gt,vt.pathsData=pt}xt+=gt,vt.shape._mdf=!0}var wt=rt,Et=it,Rt=0,Tt;for(ut=dt-1;ut>=0;ut-=1)if(vt=this.shapes[ut],vt.shape._mdf){for(St=vt.localShapeCollection,St.releaseShapes(),this.m===2&&dt>1?(Tt=this.calculateShapeEdges(rt,it,vt.totalShapeLength,Rt,xt),Rt+=vt.totalShapeLength):Tt=[[wt,Et]],ft=Tt.length,ht=0;ht<ft;ht+=1){wt=Tt[ht][0],Et=Tt[ht][1],yt.length=0,Et<=1?yt.push({s:vt.totalShapeLength*wt,e:vt.totalShapeLength*Et}):wt>=1?yt.push({s:vt.totalShapeLength*(wt-1),e:vt.totalShapeLength*(Et-1)}):(yt.push({s:vt.totalShapeLength*wt,e:vt.totalShapeLength}),yt.push({s:0,e:vt.totalShapeLength*(Et-1)}));var It=this.addShapes(vt,yt[0]);if(yt[0].s!==yt[0].e){if(yt.length>1){var At=vt.shape.paths.shapes[vt.shape.paths._length-1];if(At.c){var Dt=It.pop();this.addPaths(It,St),It=this.addShapes(vt,yt[1],Dt)}else this.addPaths(It,St),It=this.addShapes(vt,yt[1])}this.addPaths(It,St)}}vt.shape.paths=St}}},TrimModifier.prototype.addPaths=function(nt,rt){var it,st=nt.length;for(it=0;it<st;it+=1)rt.addShape(nt[it])},TrimModifier.prototype.addSegment=function(nt,rt,it,st,lt,ct,ut){lt.setXYAt(rt[0],rt[1],"o",ct),lt.setXYAt(it[0],it[1],"i",ct+1),ut&&lt.setXYAt(nt[0],nt[1],"v",ct),lt.setXYAt(st[0],st[1],"v",ct+1)},TrimModifier.prototype.addSegmentFromArray=function(nt,rt,it,st){rt.setXYAt(nt[1],nt[5],"o",it),rt.setXYAt(nt[2],nt[6],"i",it+1),st&&rt.setXYAt(nt[0],nt[4],"v",it),rt.setXYAt(nt[3],nt[7],"v",it+1)},TrimModifier.prototype.addShapes=function(nt,rt,it){var st=nt.pathsData,lt=nt.shape.paths.shapes,ct,ut=nt.shape.paths._length,dt,ht,ft=0,pt,mt,gt,xt,yt=[],vt,St=!0;for(it?(mt=it._length,vt=it._length):(it=shapePool.newElement(),mt=0,vt=0),yt.push(it),ct=0;ct<ut;ct+=1){for(gt=st[ct].lengths,it.c=lt[ct].c,ht=lt[ct].c?gt.length:gt.length+1,dt=1;dt<ht;dt+=1)if(pt=gt[dt-1],ft+pt.addedLength<rt.s)ft+=pt.addedLength,it.c=!1;else if(ft>rt.e){it.c=!1;break}else rt.s<=ft&&rt.e>=ft+pt.addedLength?(this.addSegment(lt[ct].v[dt-1],lt[ct].o[dt-1],lt[ct].i[dt],lt[ct].v[dt],it,mt,St),St=!1):(xt=bez.getNewSegment(lt[ct].v[dt-1],lt[ct].v[dt],lt[ct].o[dt-1],lt[ct].i[dt],(rt.s-ft)/pt.addedLength,(rt.e-ft)/pt.addedLength,gt[dt-1]),this.addSegmentFromArray(xt,it,mt,St),St=!1,it.c=!1),ft+=pt.addedLength,mt+=1;if(lt[ct].c&&gt.length){if(pt=gt[dt-1],ft<=rt.e){var wt=gt[dt-1].addedLength;rt.s<=ft&&rt.e>=ft+wt?(this.addSegment(lt[ct].v[dt-1],lt[ct].o[dt-1],lt[ct].i[0],lt[ct].v[0],it,mt,St),St=!1):(xt=bez.getNewSegment(lt[ct].v[dt-1],lt[ct].v[0],lt[ct].o[dt-1],lt[ct].i[0],(rt.s-ft)/wt,(rt.e-ft)/wt,gt[dt-1]),this.addSegmentFromArray(xt,it,mt,St),St=!1,it.c=!1)}else it.c=!1;ft+=pt.addedLength,mt+=1}if(it._length&&(it.setXYAt(it.v[vt][0],it.v[vt][1],"i",vt),it.setXYAt(it.v[it._length-1][0],it.v[it._length-1][1],"o",it._length-1)),ft>rt.e)break;ct<ut-1&&(it=shapePool.newElement(),St=!0,yt.push(it),mt=0)}return yt};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(nt,rt){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(nt,rt.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(nt,rt){var it=rt/100,st=[0,0],lt=nt._length,ct=0;for(ct=0;ct<lt;ct+=1)st[0]+=nt.v[ct][0],st[1]+=nt.v[ct][1];st[0]/=lt,st[1]/=lt;var ut=shapePool.newElement();ut.c=nt.c;var dt,ht,ft,pt,mt,gt;for(ct=0;ct<lt;ct+=1)dt=nt.v[ct][0]+(st[0]-nt.v[ct][0])*it,ht=nt.v[ct][1]+(st[1]-nt.v[ct][1])*it,ft=nt.o[ct][0]+(st[0]-nt.o[ct][0])*-it,pt=nt.o[ct][1]+(st[1]-nt.o[ct][1])*-it,mt=nt.i[ct][0]+(st[0]-nt.i[ct][0])*-it,gt=nt.i[ct][1]+(st[1]-nt.i[ct][1])*-it,ut.setTripleAt(dt,ht,ft,pt,mt,gt,ct);return ut},PuckerAndBloatModifier.prototype.processShapes=function(nt){var rt,it,st=this.shapes.length,lt,ct,ut=this.amount.v;if(ut!==0){var dt,ht;for(it=0;it<st;it+=1){if(dt=this.shapes[it],ht=dt.localShapeCollection,!(!dt.shape._mdf&&!this._mdf&&!nt))for(ht.releaseShapes(),dt.shape._mdf=!0,rt=dt.shape.paths.shapes,ct=dt.shape.paths._length,lt=0;lt<ct;lt+=1)ht.addShape(this.processPath(rt[lt],ut));dt.shape.paths=dt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var nt=[0,0];function rt(ht){var ft=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||ft,this.a&&ht.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&ht.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&ht.skewFromAxis(-this.sk.v,this.sa.v),this.r?ht.rotate(-this.r.v):ht.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?ht.translate(this.px.v,this.py.v,-this.pz.v):ht.translate(this.px.v,this.py.v,0):ht.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function it(ht){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||ht){var ft;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var pt,mt;if(ft=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(pt=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/ft,0),mt=this.p.getValueAtTime(this.p.keyframes[0].t/ft,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(pt=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/ft,0),mt=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/ft,0)):(pt=this.p.pv,mt=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/ft,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){pt=[],mt=[];var gt=this.px,xt=this.py;gt._caching.lastFrame+gt.offsetTime<=gt.keyframes[0].t?(pt[0]=gt.getValueAtTime((gt.keyframes[0].t+.01)/ft,0),pt[1]=xt.getValueAtTime((xt.keyframes[0].t+.01)/ft,0),mt[0]=gt.getValueAtTime(gt.keyframes[0].t/ft,0),mt[1]=xt.getValueAtTime(xt.keyframes[0].t/ft,0)):gt._caching.lastFrame+gt.offsetTime>=gt.keyframes[gt.keyframes.length-1].t?(pt[0]=gt.getValueAtTime(gt.keyframes[gt.keyframes.length-1].t/ft,0),pt[1]=xt.getValueAtTime(xt.keyframes[xt.keyframes.length-1].t/ft,0),mt[0]=gt.getValueAtTime((gt.keyframes[gt.keyframes.length-1].t-.01)/ft,0),mt[1]=xt.getValueAtTime((xt.keyframes[xt.keyframes.length-1].t-.01)/ft,0)):(pt=[gt.pv,xt.pv],mt[0]=gt.getValueAtTime((gt._caching.lastFrame+gt.offsetTime-.01)/ft,gt.offsetTime),mt[1]=xt.getValueAtTime((xt._caching.lastFrame+xt.offsetTime-.01)/ft,xt.offsetTime))}else mt=nt,pt=mt;this.v.rotate(-Math.atan2(pt[1]-mt[1],pt[0]-mt[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function st(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function lt(){}function ct(ht){this._addDynamicProperty(ht),this.elem.addDynamicProperty(ht),this._isDirty=!0}function ut(ht,ft,pt){if(this.elem=ht,this.frameId=-1,this.propType="transform",this.data=ft,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(pt||ht),ft.p&&ft.p.s?(this.px=PropertyFactory.getProp(ht,ft.p.x,0,0,this),this.py=PropertyFactory.getProp(ht,ft.p.y,0,0,this),ft.p.z&&(this.pz=PropertyFactory.getProp(ht,ft.p.z,0,0,this))):this.p=PropertyFactory.getProp(ht,ft.p||{k:[0,0,0]},1,0,this),ft.rx){if(this.rx=PropertyFactory.getProp(ht,ft.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(ht,ft.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(ht,ft.rz,0,degToRads,this),ft.or.k[0].ti){var mt,gt=ft.or.k.length;for(mt=0;mt<gt;mt+=1)ft.or.k[mt].to=null,ft.or.k[mt].ti=null}this.or=PropertyFactory.getProp(ht,ft.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(ht,ft.r||{k:0},0,degToRads,this);ft.sk&&(this.sk=PropertyFactory.getProp(ht,ft.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(ht,ft.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(ht,ft.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(ht,ft.s||{k:[100,100,100]},1,.01,this),ft.o?this.o=PropertyFactory.getProp(ht,ft.o,0,.01,ht):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}ut.prototype={applyToMatrix:rt,getValue:it,precalculateMatrix:st,autoOrient:lt},extendPrototype([DynamicPropertyContainer],ut),ut.prototype.addDynamicProperty=ct,ut.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function dt(ht,ft,pt){return new ut(ht,ft,pt)}return{getTransformProperty:dt}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(nt,rt){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(nt,rt.c,0,null,this),this.o=PropertyFactory.getProp(nt,rt.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(nt,rt.tr,this),this.so=PropertyFactory.getProp(nt,rt.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(nt,rt.tr.eo,0,.01,this),this.data=rt,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(nt,rt,it,st,lt,ct){var ut=ct?-1:1,dt=st.s.v[0]+(1-st.s.v[0])*(1-lt),ht=st.s.v[1]+(1-st.s.v[1])*(1-lt);nt.translate(st.p.v[0]*ut*lt,st.p.v[1]*ut*lt,st.p.v[2]),rt.translate(-st.a.v[0],-st.a.v[1],st.a.v[2]),rt.rotate(-st.r.v*ut*lt),rt.translate(st.a.v[0],st.a.v[1],st.a.v[2]),it.translate(-st.a.v[0],-st.a.v[1],st.a.v[2]),it.scale(ct?1/dt:dt,ct?1/ht:ht),it.translate(st.a.v[0],st.a.v[1],st.a.v[2])},RepeaterModifier.prototype.init=function(nt,rt,it,st){for(this.elem=nt,this.arr=rt,this.pos=it,this.elemsData=st,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(nt),this.initModifierProperties(nt,rt[it]);it>0;)it-=1,this._elements.unshift(rt[it]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(nt){var rt,it=nt.length;for(rt=0;rt<it;rt+=1)nt[rt]._processed=!1,nt[rt].ty==="gr"&&this.resetElements(nt[rt].it)},RepeaterModifier.prototype.cloneElements=function(nt){var rt=JSON.parse(JSON.stringify(nt));return this.resetElements(rt),rt},RepeaterModifier.prototype.changeGroupRender=function(nt,rt){var it,st=nt.length;for(it=0;it<st;it+=1)nt[it]._render=rt,nt[it].ty==="gr"&&this.changeGroupRender(nt[it].it,rt)},RepeaterModifier.prototype.processShapes=function(nt){var rt,it,st,lt,ct,ut=!1;if(this._mdf||nt){var dt=Math.ceil(this.c.v);if(this._groups.length<dt){for(;this._groups.length<dt;){var ht={it:this.cloneElements(this._elements),ty:"gr"};ht.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,ht),this._groups.splice(0,0,ht),this._currentCopies+=1}this.elem.reloadShapes(),ut=!0}ct=0;var ft;for(st=0;st<=this._groups.length-1;st+=1){if(ft=ct<dt,this._groups[st]._render=ft,this.changeGroupRender(this._groups[st].it,ft),!ft){var pt=this.elemsData[st].it,mt=pt[pt.length-1];mt.transform.op.v!==0?(mt.transform.op._mdf=!0,mt.transform.op.v=0):mt.transform.op._mdf=!1}ct+=1}this._currentCopies=dt;var gt=this.o.v,xt=gt%1,yt=gt>0?Math.floor(gt):Math.ceil(gt),vt=this.pMatrix.props,St=this.rMatrix.props,wt=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var Et=0;if(gt>0){for(;Et<yt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Et+=1;xt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,xt,!1),Et+=xt)}else if(gt<0){for(;Et>yt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Et-=1;xt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-xt,!0),Et-=xt)}st=this.data.m===1?0:this._currentCopies-1,lt=this.data.m===1?1:-1,ct=this._currentCopies;for(var Rt,Tt;ct;){if(rt=this.elemsData[st].it,it=rt[rt.length-1].transform.mProps.v.props,Tt=it.length,rt[rt.length-1].transform.mProps._mdf=!0,rt[rt.length-1].transform.op._mdf=!0,rt[rt.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(st/(this._currentCopies-1)),Et!==0){for((st!==0&&lt===1||st!==this._currentCopies-1&&lt===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(St[0],St[1],St[2],St[3],St[4],St[5],St[6],St[7],St[8],St[9],St[10],St[11],St[12],St[13],St[14],St[15]),this.matrix.transform(wt[0],wt[1],wt[2],wt[3],wt[4],wt[5],wt[6],wt[7],wt[8],wt[9],wt[10],wt[11],wt[12],wt[13],wt[14],wt[15]),this.matrix.transform(vt[0],vt[1],vt[2],vt[3],vt[4],vt[5],vt[6],vt[7],vt[8],vt[9],vt[10],vt[11],vt[12],vt[13],vt[14],vt[15]),Rt=0;Rt<Tt;Rt+=1)it[Rt]=this.matrix.props[Rt];this.matrix.reset()}else for(this.matrix.reset(),Rt=0;Rt<Tt;Rt+=1)it[Rt]=this.matrix.props[Rt];Et+=1,ct-=1,st+=lt}}else for(ct=this._currentCopies,st=0,lt=1;ct;)rt=this.elemsData[st].it,it=rt[rt.length-1].transform.mProps.v.props,rt[rt.length-1].transform.mProps._mdf=!1,rt[rt.length-1].transform.op._mdf=!1,ct-=1,st+=lt;return ut},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(nt,rt){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(nt,rt.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(nt,rt){var it=shapePool.newElement();it.c=nt.c;var st,lt=nt._length,ct,ut,dt,ht,ft,pt,mt=0,gt,xt,yt,vt,St,wt;for(st=0;st<lt;st+=1)ct=nt.v[st],dt=nt.o[st],ut=nt.i[st],ct[0]===dt[0]&&ct[1]===dt[1]&&ct[0]===ut[0]&&ct[1]===ut[1]?(st===0||st===lt-1)&&!nt.c?(it.setTripleAt(ct[0],ct[1],dt[0],dt[1],ut[0],ut[1],mt),mt+=1):(st===0?ht=nt.v[lt-1]:ht=nt.v[st-1],ft=Math.sqrt(Math.pow(ct[0]-ht[0],2)+Math.pow(ct[1]-ht[1],2)),pt=ft?Math.min(ft/2,rt)/ft:0,St=ct[0]+(ht[0]-ct[0])*pt,gt=St,wt=ct[1]-(ct[1]-ht[1])*pt,xt=wt,yt=gt-(gt-ct[0])*roundCorner,vt=xt-(xt-ct[1])*roundCorner,it.setTripleAt(gt,xt,yt,vt,St,wt,mt),mt+=1,st===lt-1?ht=nt.v[0]:ht=nt.v[st+1],ft=Math.sqrt(Math.pow(ct[0]-ht[0],2)+Math.pow(ct[1]-ht[1],2)),pt=ft?Math.min(ft/2,rt)/ft:0,yt=ct[0]+(ht[0]-ct[0])*pt,gt=yt,vt=ct[1]+(ht[1]-ct[1])*pt,xt=vt,St=gt-(gt-ct[0])*roundCorner,wt=xt-(xt-ct[1])*roundCorner,it.setTripleAt(gt,xt,yt,vt,St,wt,mt),mt+=1):(it.setTripleAt(nt.v[st][0],nt.v[st][1],nt.o[st][0],nt.o[st][1],nt.i[st][0],nt.i[st][1],mt),mt+=1);return it},RoundCornersModifier.prototype.processShapes=function(nt){var rt,it,st=this.shapes.length,lt,ct,ut=this.rd.v;if(ut!==0){var dt,ht;for(it=0;it<st;it+=1){if(dt=this.shapes[it],ht=dt.localShapeCollection,!(!dt.shape._mdf&&!this._mdf&&!nt))for(ht.releaseShapes(),dt.shape._mdf=!0,rt=dt.shape.paths.shapes,ct=dt.shape.paths._length,lt=0;lt<ct;lt+=1)ht.addShape(this.processPath(rt[lt],ut));dt.shape.paths=dt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(nt,rt){return Math.abs(nt-rt)*1e5<=Math.min(Math.abs(nt),Math.abs(rt))}function floatZero(nt){return Math.abs(nt)<=1e-5}function lerp(nt,rt,it){return nt*(1-it)+rt*it}function lerpPoint(nt,rt,it){return[lerp(nt[0],rt[0],it),lerp(nt[1],rt[1],it)]}function quadRoots(nt,rt,it){if(nt===0)return[];var st=rt*rt-4*nt*it;if(st<0)return[];var lt=-rt/(2*nt);if(st===0)return[lt];var ct=Math.sqrt(st)/(2*nt);return[lt-ct,lt+ct]}function polynomialCoefficients(nt,rt,it,st){return[-nt+3*rt-3*it+st,3*nt-6*rt+3*it,-3*nt+3*rt,nt]}function singlePoint(nt){return new PolynomialBezier(nt,nt,nt,nt,!1)}function PolynomialBezier(nt,rt,it,st,lt){lt&&pointEqual(nt,rt)&&(rt=lerpPoint(nt,st,1/3)),lt&&pointEqual(it,st)&&(it=lerpPoint(nt,st,2/3));var ct=polynomialCoefficients(nt[0],rt[0],it[0],st[0]),ut=polynomialCoefficients(nt[1],rt[1],it[1],st[1]);this.a=[ct[0],ut[0]],this.b=[ct[1],ut[1]],this.c=[ct[2],ut[2]],this.d=[ct[3],ut[3]],this.points=[nt,rt,it,st]}PolynomialBezier.prototype.point=function(nt){return[((this.a[0]*nt+this.b[0])*nt+this.c[0])*nt+this.d[0],((this.a[1]*nt+this.b[1])*nt+this.c[1])*nt+this.d[1]]},PolynomialBezier.prototype.derivative=function(nt){return[(3*nt*this.a[0]+2*this.b[0])*nt+this.c[0],(3*nt*this.a[1]+2*this.b[1])*nt+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(nt){var rt=this.derivative(nt);return Math.atan2(rt[1],rt[0])},PolynomialBezier.prototype.normalAngle=function(nt){var rt=this.derivative(nt);return Math.atan2(rt[0],rt[1])},PolynomialBezier.prototype.inflectionPoints=function(){var nt=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(nt))return[];var rt=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/nt,it=rt*rt-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/nt;if(it<0)return[];var st=Math.sqrt(it);return floatZero(st)?st>0&&st<1?[rt]:[]:[rt-st,rt+st].filter(function(lt){return lt>0&&lt<1})},PolynomialBezier.prototype.split=function(nt){if(nt<=0)return[singlePoint(this.points[0]),this];if(nt>=1)return[this,singlePoint(this.points[this.points.length-1])];var rt=lerpPoint(this.points[0],this.points[1],nt),it=lerpPoint(this.points[1],this.points[2],nt),st=lerpPoint(this.points[2],this.points[3],nt),lt=lerpPoint(rt,it,nt),ct=lerpPoint(it,st,nt),ut=lerpPoint(lt,ct,nt);return[new PolynomialBezier(this.points[0],rt,lt,ut,!0),new PolynomialBezier(ut,ct,st,this.points[3],!0)]};function extrema(nt,rt){var it=nt.points[0][rt],st=nt.points[nt.points.length-1][rt];if(it>st){var lt=st;st=it,it=lt}for(var ct=quadRoots(3*nt.a[rt],2*nt.b[rt],nt.c[rt]),ut=0;ut<ct.length;ut+=1)if(ct[ut]>0&&ct[ut]<1){var dt=nt.point(ct[ut])[rt];dt<it?it=dt:dt>st&&(st=dt)}return{min:it,max:st}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var nt=this.bounds();return{left:nt.x.min,right:nt.x.max,top:nt.y.min,bottom:nt.y.max,width:nt.x.max-nt.x.min,height:nt.y.max-nt.y.min,cx:(nt.x.max+nt.x.min)/2,cy:(nt.y.max+nt.y.min)/2}};function intersectData(nt,rt,it){var st=nt.boundingBox();return{cx:st.cx,cy:st.cy,width:st.width,height:st.height,bez:nt,t:(rt+it)/2,t1:rt,t2:it}}function splitData(nt){var rt=nt.bez.split(.5);return[intersectData(rt[0],nt.t1,nt.t),intersectData(rt[1],nt.t,nt.t2)]}function boxIntersect(nt,rt){return Math.abs(nt.cx-rt.cx)*2<nt.width+rt.width&&Math.abs(nt.cy-rt.cy)*2<nt.height+rt.height}function intersectsImpl(nt,rt,it,st,lt,ct){if(boxIntersect(nt,rt)){if(it>=ct||nt.width<=st&&nt.height<=st&&rt.width<=st&&rt.height<=st){lt.push([nt.t,rt.t]);return}var ut=splitData(nt),dt=splitData(rt);intersectsImpl(ut[0],dt[0],it+1,st,lt,ct),intersectsImpl(ut[0],dt[1],it+1,st,lt,ct),intersectsImpl(ut[1],dt[0],it+1,st,lt,ct),intersectsImpl(ut[1],dt[1],it+1,st,lt,ct)}}PolynomialBezier.prototype.intersections=function(nt,rt,it){rt===void 0&&(rt=2),it===void 0&&(it=7);var st=[];return intersectsImpl(intersectData(this,0,1),intersectData(nt,0,1),0,rt,st,it),st},PolynomialBezier.shapeSegment=function(nt,rt){var it=(rt+1)%nt.length();return new PolynomialBezier(nt.v[rt],nt.o[rt],nt.i[it],nt.v[it],!0)},PolynomialBezier.shapeSegmentInverted=function(nt,rt){var it=(rt+1)%nt.length();return new PolynomialBezier(nt.v[it],nt.i[it],nt.o[rt],nt.v[rt],!0)};function crossProduct(nt,rt){return[nt[1]*rt[2]-nt[2]*rt[1],nt[2]*rt[0]-nt[0]*rt[2],nt[0]*rt[1]-nt[1]*rt[0]]}function lineIntersection(nt,rt,it,st){var lt=[nt[0],nt[1],1],ct=[rt[0],rt[1],1],ut=[it[0],it[1],1],dt=[st[0],st[1],1],ht=crossProduct(crossProduct(lt,ct),crossProduct(ut,dt));return floatZero(ht[2])?null:[ht[0]/ht[2],ht[1]/ht[2]]}function polarOffset(nt,rt,it){return[nt[0]+Math.cos(rt)*it,nt[1]-Math.sin(rt)*it]}function pointDistance(nt,rt){return Math.hypot(nt[0]-rt[0],nt[1]-rt[1])}function pointEqual(nt,rt){return floatEqual(nt[0],rt[0])&&floatEqual(nt[1],rt[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(nt,rt){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(nt,rt.s,0,null,this),this.frequency=PropertyFactory.getProp(nt,rt.r,0,null,this),this.pointsType=PropertyFactory.getProp(nt,rt.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(nt,rt,it,st,lt,ct,ut){var dt=it-Math.PI/2,ht=it+Math.PI/2,ft=rt[0]+Math.cos(it)*st*lt,pt=rt[1]-Math.sin(it)*st*lt;nt.setTripleAt(ft,pt,ft+Math.cos(dt)*ct,pt-Math.sin(dt)*ct,ft+Math.cos(ht)*ut,pt-Math.sin(ht)*ut,nt.length())}function getPerpendicularVector(nt,rt){var it=[rt[0]-nt[0],rt[1]-nt[1]],st=-Math.PI*.5,lt=[Math.cos(st)*it[0]-Math.sin(st)*it[1],Math.sin(st)*it[0]+Math.cos(st)*it[1]];return lt}function getProjectingAngle(nt,rt){var it=rt===0?nt.length()-1:rt-1,st=(rt+1)%nt.length(),lt=nt.v[it],ct=nt.v[st],ut=getPerpendicularVector(lt,ct);return Math.atan2(0,1)-Math.atan2(ut[1],ut[0])}function zigZagCorner(nt,rt,it,st,lt,ct,ut){var dt=getProjectingAngle(rt,it),ht=rt.v[it%rt._length],ft=rt.v[it===0?rt._length-1:it-1],pt=rt.v[(it+1)%rt._length],mt=ct===2?Math.sqrt(Math.pow(ht[0]-ft[0],2)+Math.pow(ht[1]-ft[1],2)):0,gt=ct===2?Math.sqrt(Math.pow(ht[0]-pt[0],2)+Math.pow(ht[1]-pt[1],2)):0;setPoint(nt,rt.v[it%rt._length],dt,ut,st,gt/((lt+1)*2),mt/((lt+1)*2))}function zigZagSegment(nt,rt,it,st,lt,ct){for(var ut=0;ut<st;ut+=1){var dt=(ut+1)/(st+1),ht=lt===2?Math.sqrt(Math.pow(rt.points[3][0]-rt.points[0][0],2)+Math.pow(rt.points[3][1]-rt.points[0][1],2)):0,ft=rt.normalAngle(dt),pt=rt.point(dt);setPoint(nt,pt,ft,ct,it,ht/((st+1)*2),ht/((st+1)*2)),ct=-ct}return ct}ZigZagModifier.prototype.processPath=function(nt,rt,it,st){var lt=nt._length,ct=shapePool.newElement();if(ct.c=nt.c,nt.c||(lt-=1),lt===0)return ct;var ut=-1,dt=PolynomialBezier.shapeSegment(nt,0);zigZagCorner(ct,nt,0,rt,it,st,ut);for(var ht=0;ht<lt;ht+=1)ut=zigZagSegment(ct,dt,rt,it,st,-ut),ht===lt-1&&!nt.c?dt=null:dt=PolynomialBezier.shapeSegment(nt,(ht+1)%lt),zigZagCorner(ct,nt,ht+1,rt,it,st,ut);return ct},ZigZagModifier.prototype.processShapes=function(nt){var rt,it,st=this.shapes.length,lt,ct,ut=this.amplitude.v,dt=Math.max(0,Math.round(this.frequency.v)),ht=this.pointsType.v;if(ut!==0){var ft,pt;for(it=0;it<st;it+=1){if(ft=this.shapes[it],pt=ft.localShapeCollection,!(!ft.shape._mdf&&!this._mdf&&!nt))for(pt.releaseShapes(),ft.shape._mdf=!0,rt=ft.shape.paths.shapes,ct=ft.shape.paths._length,lt=0;lt<ct;lt+=1)pt.addShape(this.processPath(rt[lt],ut,dt,ht));ft.shape.paths=ft.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(nt,rt,it){var st=Math.atan2(rt[0]-nt[0],rt[1]-nt[1]);return[polarOffset(nt,st,it),polarOffset(rt,st,it)]}function offsetSegment(nt,rt){var it,st,lt,ct,ut,dt,ht;ht=linearOffset(nt.points[0],nt.points[1],rt),it=ht[0],st=ht[1],ht=linearOffset(nt.points[1],nt.points[2],rt),lt=ht[0],ct=ht[1],ht=linearOffset(nt.points[2],nt.points[3],rt),ut=ht[0],dt=ht[1];var ft=lineIntersection(it,st,lt,ct);ft===null&&(ft=st);var pt=lineIntersection(ut,dt,lt,ct);return pt===null&&(pt=ut),new PolynomialBezier(it,ft,pt,dt)}function joinLines(nt,rt,it,st,lt){var ct=rt.points[3],ut=it.points[0];if(st===3||pointEqual(ct,ut))return ct;if(st===2){var dt=-rt.tangentAngle(1),ht=-it.tangentAngle(0)+Math.PI,ft=lineIntersection(ct,polarOffset(ct,dt+Math.PI/2,100),ut,polarOffset(ut,dt+Math.PI/2,100)),pt=ft?pointDistance(ft,ct):pointDistance(ct,ut)/2,mt=polarOffset(ct,dt,2*pt*roundCorner);return nt.setXYAt(mt[0],mt[1],"o",nt.length()-1),mt=polarOffset(ut,ht,2*pt*roundCorner),nt.setTripleAt(ut[0],ut[1],ut[0],ut[1],mt[0],mt[1],nt.length()),ut}var gt=pointEqual(ct,rt.points[2])?rt.points[0]:rt.points[2],xt=pointEqual(ut,it.points[1])?it.points[3]:it.points[1],yt=lineIntersection(gt,ct,ut,xt);return yt&&pointDistance(yt,ct)<lt?(nt.setTripleAt(yt[0],yt[1],yt[0],yt[1],yt[0],yt[1],nt.length()),yt):ct}function getIntersection(nt,rt){var it=nt.intersections(rt);return it.length&&floatEqual(it[0][0],1)&&it.shift(),it.length?it[0]:null}function pruneSegmentIntersection(nt,rt){var it=nt.slice(),st=rt.slice(),lt=getIntersection(nt[nt.length-1],rt[0]);return lt&&(it[nt.length-1]=nt[nt.length-1].split(lt[0])[0],st[0]=rt[0].split(lt[1])[1]),nt.length>1&&rt.length>1&&(lt=getIntersection(nt[0],rt[rt.length-1]),lt)?[[nt[0].split(lt[0])[0]],[rt[rt.length-1].split(lt[1])[1]]]:[it,st]}function pruneIntersections(nt){for(var rt,it=1;it<nt.length;it+=1)rt=pruneSegmentIntersection(nt[it-1],nt[it]),nt[it-1]=rt[0],nt[it]=rt[1];return nt.length>1&&(rt=pruneSegmentIntersection(nt[nt.length-1],nt[0]),nt[nt.length-1]=rt[0],nt[0]=rt[1]),nt}function offsetSegmentSplit(nt,rt){var it=nt.inflectionPoints(),st,lt,ct,ut;if(it.length===0)return[offsetSegment(nt,rt)];if(it.length===1||floatEqual(it[1],1))return ct=nt.split(it[0]),st=ct[0],lt=ct[1],[offsetSegment(st,rt),offsetSegment(lt,rt)];ct=nt.split(it[0]),st=ct[0];var dt=(it[1]-it[0])/(1-it[0]);return ct=ct[1].split(dt),ut=ct[0],lt=ct[1],[offsetSegment(st,rt),offsetSegment(ut,rt),offsetSegment(lt,rt)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(nt,rt){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(nt,rt.a,0,null,this),this.miterLimit=PropertyFactory.getProp(nt,rt.ml,0,null,this),this.lineJoin=rt.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(nt,rt,it,st){var lt=shapePool.newElement();lt.c=nt.c;var ct=nt.length();nt.c||(ct-=1);var ut,dt,ht,ft=[];for(ut=0;ut<ct;ut+=1)ht=PolynomialBezier.shapeSegment(nt,ut),ft.push(offsetSegmentSplit(ht,rt));if(!nt.c)for(ut=ct-1;ut>=0;ut-=1)ht=PolynomialBezier.shapeSegmentInverted(nt,ut),ft.push(offsetSegmentSplit(ht,rt));ft=pruneIntersections(ft);var pt=null,mt=null;for(ut=0;ut<ft.length;ut+=1){var gt=ft[ut];for(mt&&(pt=joinLines(lt,mt,gt[0],it,st)),mt=gt[gt.length-1],dt=0;dt<gt.length;dt+=1)ht=gt[dt],pt&&pointEqual(ht.points[0],pt)?lt.setXYAt(ht.points[1][0],ht.points[1][1],"o",lt.length()-1):lt.setTripleAt(ht.points[0][0],ht.points[0][1],ht.points[1][0],ht.points[1][1],ht.points[0][0],ht.points[0][1],lt.length()),lt.setTripleAt(ht.points[3][0],ht.points[3][1],ht.points[3][0],ht.points[3][1],ht.points[2][0],ht.points[2][1],lt.length()),pt=ht.points[3]}return ft.length&&joinLines(lt,mt,ft[0][0],it,st),lt},OffsetPathModifier.prototype.processShapes=function(nt){var rt,it,st=this.shapes.length,lt,ct,ut=this.amount.v,dt=this.miterLimit.v,ht=this.lineJoin;if(ut!==0){var ft,pt;for(it=0;it<st;it+=1){if(ft=this.shapes[it],pt=ft.localShapeCollection,!(!ft.shape._mdf&&!this._mdf&&!nt))for(pt.releaseShapes(),ft.shape._mdf=!0,rt=ft.shape.paths.shapes,ct=ft.shape.paths._length,lt=0;lt<ct;lt+=1)pt.addShape(this.processPath(rt[lt],ut,ht,dt));ft.shape.paths=ft.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(nt){for(var rt=nt.fStyle?nt.fStyle.split(" "):[],it="normal",st="normal",lt=rt.length,ct,ut=0;ut<lt;ut+=1)switch(ct=rt[ut].toLowerCase(),ct){case"italic":st="italic";break;case"bold":it="700";break;case"black":it="900";break;case"medium":it="500";break;case"regular":case"normal":it="400";break;case"light":case"thin":it="200";break}return{style:st,weight:nt.fWeight||it}}var FontManager=function(){var nt=5e3,rt={w:0,size:0,shapes:[],data:{shapes:[]}},it=[];it=it.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var st=127988,lt=917631,ct=917601,ut=917626,dt=65039,ht=8205,ft=127462,pt=127487,mt=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function gt(Ut){var zt=Ut.split(","),Bt,Ht=zt.length,Gt=[];for(Bt=0;Bt<Ht;Bt+=1)zt[Bt]!=="sans-serif"&&zt[Bt]!=="monospace"&&Gt.push(zt[Bt]);return Gt.join(",")}function xt(Ut,zt){var Bt=createTag("span");Bt.setAttribute("aria-hidden",!0),Bt.style.fontFamily=zt;var Ht=createTag("span");Ht.innerText="giItT1WQy@!-/#",Bt.style.position="absolute",Bt.style.left="-10000px",Bt.style.top="-10000px",Bt.style.fontSize="300px",Bt.style.fontVariant="normal",Bt.style.fontStyle="normal",Bt.style.fontWeight="normal",Bt.style.letterSpacing="0",Bt.appendChild(Ht),document.body.appendChild(Bt);var Gt=Ht.offsetWidth;return Ht.style.fontFamily=gt(Ut)+", "+zt,{node:Ht,w:Gt,parent:Bt}}function yt(){var Ut,zt=this.fonts.length,Bt,Ht,Gt=zt;for(Ut=0;Ut<zt;Ut+=1)this.fonts[Ut].loaded?Gt-=1:this.fonts[Ut].fOrigin==="n"||this.fonts[Ut].origin===0?this.fonts[Ut].loaded=!0:(Bt=this.fonts[Ut].monoCase.node,Ht=this.fonts[Ut].monoCase.w,Bt.offsetWidth!==Ht?(Gt-=1,this.fonts[Ut].loaded=!0):(Bt=this.fonts[Ut].sansCase.node,Ht=this.fonts[Ut].sansCase.w,Bt.offsetWidth!==Ht&&(Gt-=1,this.fonts[Ut].loaded=!0)),this.fonts[Ut].loaded&&(this.fonts[Ut].sansCase.parent.parentNode.removeChild(this.fonts[Ut].sansCase.parent),this.fonts[Ut].monoCase.parent.parentNode.removeChild(this.fonts[Ut].monoCase.parent)));Gt!==0&&Date.now()-this.initTime<nt?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function vt(Ut,zt){var Bt=document.body&&zt?"svg":"canvas",Ht,Gt=getFontProperties(Ut);if(Bt==="svg"){var Xt=createNS("text");Xt.style.fontSize="100px",Xt.setAttribute("font-family",Ut.fFamily),Xt.setAttribute("font-style",Gt.style),Xt.setAttribute("font-weight",Gt.weight),Xt.textContent="1",Ut.fClass?(Xt.style.fontFamily="inherit",Xt.setAttribute("class",Ut.fClass)):Xt.style.fontFamily=Ut.fFamily,zt.appendChild(Xt),Ht=Xt}else{var Zt=new OffscreenCanvas(500,500).getContext("2d");Zt.font=Gt.style+" "+Gt.weight+" 100px "+Ut.fFamily,Ht=Zt}function hr(nr){return Bt==="svg"?(Ht.textContent=nr,Ht.getComputedTextLength()):Ht.measureText(nr).width}return{measureText:hr}}function St(Ut,zt){if(!Ut){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=Ut.list;return}if(!document.body){this.isLoaded=!0,Ut.list.forEach(function(Sr){Sr.helper=vt(Sr),Sr.cache={}}),this.fonts=Ut.list;return}var Bt=Ut.list,Ht,Gt=Bt.length,Xt=Gt;for(Ht=0;Ht<Gt;Ht+=1){var Zt=!0,hr,nr;if(Bt[Ht].loaded=!1,Bt[Ht].monoCase=xt(Bt[Ht].fFamily,"monospace"),Bt[Ht].sansCase=xt(Bt[Ht].fFamily,"sans-serif"),!Bt[Ht].fPath)Bt[Ht].loaded=!0,Xt-=1;else if(Bt[Ht].fOrigin==="p"||Bt[Ht].origin===3){if(hr=document.querySelectorAll('style[f-forigin="p"][f-family="'+Bt[Ht].fFamily+'"], style[f-origin="3"][f-family="'+Bt[Ht].fFamily+'"]'),hr.length>0&&(Zt=!1),Zt){var ir=createTag("style");ir.setAttribute("f-forigin",Bt[Ht].fOrigin),ir.setAttribute("f-origin",Bt[Ht].origin),ir.setAttribute("f-family",Bt[Ht].fFamily),ir.type="text/css",ir.innerText="@font-face {font-family: "+Bt[Ht].fFamily+"; font-style: normal; src: url('"+Bt[Ht].fPath+"');}",zt.appendChild(ir)}}else if(Bt[Ht].fOrigin==="g"||Bt[Ht].origin===1){for(hr=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),nr=0;nr<hr.length;nr+=1)hr[nr].href.indexOf(Bt[Ht].fPath)!==-1&&(Zt=!1);if(Zt){var yr=createTag("link");yr.setAttribute("f-forigin",Bt[Ht].fOrigin),yr.setAttribute("f-origin",Bt[Ht].origin),yr.type="text/css",yr.rel="stylesheet",yr.href=Bt[Ht].fPath,document.body.appendChild(yr)}}else if(Bt[Ht].fOrigin==="t"||Bt[Ht].origin===2){for(hr=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),nr=0;nr<hr.length;nr+=1)Bt[Ht].fPath===hr[nr].src&&(Zt=!1);if(Zt){var Cr=createTag("link");Cr.setAttribute("f-forigin",Bt[Ht].fOrigin),Cr.setAttribute("f-origin",Bt[Ht].origin),Cr.setAttribute("rel","stylesheet"),Cr.setAttribute("href",Bt[Ht].fPath),zt.appendChild(Cr)}}Bt[Ht].helper=vt(Bt[Ht],zt),Bt[Ht].cache={},this.fonts.push(Bt[Ht])}Xt===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function wt(Ut){if(Ut){this.chars||(this.chars=[]);var zt,Bt=Ut.length,Ht,Gt=this.chars.length,Xt;for(zt=0;zt<Bt;zt+=1){for(Ht=0,Xt=!1;Ht<Gt;)this.chars[Ht].style===Ut[zt].style&&this.chars[Ht].fFamily===Ut[zt].fFamily&&this.chars[Ht].ch===Ut[zt].ch&&(Xt=!0),Ht+=1;Xt||(this.chars.push(Ut[zt]),Gt+=1)}}}function Et(Ut,zt,Bt){for(var Ht=0,Gt=this.chars.length;Ht<Gt;){if(this.chars[Ht].ch===Ut&&this.chars[Ht].style===zt&&this.chars[Ht].fFamily===Bt)return this.chars[Ht];Ht+=1}return(typeof Ut=="string"&&Ut.charCodeAt(0)!==13||!Ut)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",Ut,zt,Bt)),rt}function Rt(Ut,zt,Bt){var Ht=this.getFontByName(zt),Gt=Ut;if(!Ht.cache[Gt]){var Xt=Ht.helper;if(Ut===" "){var Zt=Xt.measureText("|"+Ut+"|"),hr=Xt.measureText("||");Ht.cache[Gt]=(Zt-hr)/100}else Ht.cache[Gt]=Xt.measureText(Ut)/100}return Ht.cache[Gt]*Bt}function Tt(Ut){for(var zt=0,Bt=this.fonts.length;zt<Bt;){if(this.fonts[zt].fName===Ut)return this.fonts[zt];zt+=1}return this.fonts[0]}function It(Ut){var zt=0,Bt=Ut.charCodeAt(0);if(Bt>=55296&&Bt<=56319){var Ht=Ut.charCodeAt(1);Ht>=56320&&Ht<=57343&&(zt=(Bt-55296)*1024+Ht-56320+65536)}return zt}function At(Ut,zt){var Bt=Ut.toString(16)+zt.toString(16);return mt.indexOf(Bt)!==-1}function Dt(Ut){return Ut===ht}function jt(Ut){return Ut===dt}function Ft(Ut){var zt=It(Ut);return zt>=ft&&zt<=pt}function Lt(Ut){return Ft(Ut.substr(0,2))&&Ft(Ut.substr(2,2))}function Mt(Ut){return it.indexOf(Ut)!==-1}function Ot(Ut,zt){var Bt=It(Ut.substr(zt,2));if(Bt!==st)return!1;var Ht=0;for(zt+=2;Ht<5;){if(Bt=It(Ut.substr(zt,2)),Bt<ct||Bt>ut)return!1;Ht+=1,zt+=2}return It(Ut.substr(zt,2))===lt}function Nt(){this.isLoaded=!0}var $t=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};$t.isModifier=At,$t.isZeroWidthJoiner=Dt,$t.isFlagEmoji=Lt,$t.isRegionalCode=Ft,$t.isCombinedCharacter=Mt,$t.isRegionalFlag=Ot,$t.isVariationSelector=jt,$t.BLACK_FLAG_CODE_POINT=st;var Vt={addChars:wt,addFonts:St,getCharData:Et,getFontByName:Tt,measureText:Rt,checkLoadedFonts:yt,setIsLoaded:Nt};return $t.prototype=Vt,$t}();function SlotManager(nt){this.animationData=nt}SlotManager.prototype.getProp=function(nt){return this.animationData.slots&&this.animationData.slots[nt.sid]?Object.assign(nt,this.animationData.slots[nt.sid].p):nt};function slotFactory(nt){return new SlotManager(nt)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(rt){this.renderableComponents.indexOf(rt)===-1&&this.renderableComponents.push(rt)},removeRenderableComponent:function(rt){this.renderableComponents.indexOf(rt)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(rt),1)},prepareRenderableFrame:function(rt){this.checkLayerLimits(rt)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(rt){this.data.ip-this.data.st<=rt&&this.data.op-this.data.st>rt?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var rt,it=this.renderableComponents.length;for(rt=0;rt<it;rt+=1)this.renderableComponents[rt].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var nt={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(rt){return nt[rt]||""}}();function SliderEffect(nt,rt,it){this.p=PropertyFactory.getProp(rt,nt.v,0,0,it)}function AngleEffect(nt,rt,it){this.p=PropertyFactory.getProp(rt,nt.v,0,0,it)}function ColorEffect(nt,rt,it){this.p=PropertyFactory.getProp(rt,nt.v,1,0,it)}function PointEffect(nt,rt,it){this.p=PropertyFactory.getProp(rt,nt.v,1,0,it)}function LayerIndexEffect(nt,rt,it){this.p=PropertyFactory.getProp(rt,nt.v,0,0,it)}function MaskIndexEffect(nt,rt,it){this.p=PropertyFactory.getProp(rt,nt.v,0,0,it)}function CheckboxEffect(nt,rt,it){this.p=PropertyFactory.getProp(rt,nt.v,0,0,it)}function NoValueEffect(){this.p={}}function EffectsManager(nt,rt){var it=nt.ef||[];this.effectElements=[];var st,lt=it.length,ct;for(st=0;st<lt;st+=1)ct=new GroupEffect(it[st],rt),this.effectElements.push(ct)}function GroupEffect(nt,rt){this.init(nt,rt)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(nt,rt){this.data=nt,this.effectElements=[],this.initDynamicPropertyContainer(rt);var it,st=this.data.ef.length,lt,ct=this.data.ef;for(it=0;it<st;it+=1){switch(lt=null,ct[it].ty){case 0:lt=new SliderEffect(ct[it],rt,this);break;case 1:lt=new AngleEffect(ct[it],rt,this);break;case 2:lt=new ColorEffect(ct[it],rt,this);break;case 3:lt=new PointEffect(ct[it],rt,this);break;case 4:case 7:lt=new CheckboxEffect(ct[it],rt,this);break;case 10:lt=new LayerIndexEffect(ct[it],rt,this);break;case 11:lt=new MaskIndexEffect(ct[it],rt,this);break;case 5:lt=new EffectsManager(ct[it],rt);break;default:lt=new NoValueEffect(ct[it]);break}lt&&this.effectElements.push(lt)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var rt=0,it=this.data.masksProperties.length;rt<it;){if(this.data.masksProperties[rt].mode!=="n"&&this.data.masksProperties[rt].cl!==!1)return!0;rt+=1}return!1},initExpressions:function(){var rt=getExpressionInterfaces();if(rt){var it=rt("layer"),st=rt("effects"),lt=rt("shape"),ct=rt("text"),ut=rt("comp");this.layerInterface=it(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var dt=st.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(dt),this.data.ty===0||this.data.xt?this.compInterface=ut(this):this.data.ty===4?(this.layerInterface.shapeInterface=lt(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=ct(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var rt=getBlendMode(this.data.bm),it=this.baseElement||this.layerElement;it.style["mix-blend-mode"]=rt},initBaseData:function(rt,it,st){this.globalData=it,this.comp=st,this.data=rt,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(rt,it){var st,lt=this.dynamicProperties.length;for(st=0;st<lt;st+=1)(it||this._isParent&&this.dynamicProperties[st].propType==="transform")&&(this.dynamicProperties[st].getValue(),this.dynamicProperties[st]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(rt){this.dynamicProperties.indexOf(rt)===-1&&this.dynamicProperties.push(rt)}};function FootageElement(nt,rt,it){this.initFrame(),this.initRenderable(),this.assetData=rt.getAssetData(nt.refId),this.footageData=rt.imageLoader.getAsset(this.assetData),this.initBaseData(nt,rt,it)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var nt=getExpressionInterfaces();if(nt){var rt=nt("footage");this.layerInterface=rt(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(nt,rt,it){this.initFrame(),this.initRenderable(),this.assetData=rt.getAssetData(nt.refId),this.initBaseData(nt,rt,it),this._isPlaying=!1,this._canPlay=!1;var st=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(st),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=nt.tm?PropertyFactory.getProp(this,nt.tm,0,rt.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,nt.au&&nt.au.lv?nt.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(nt){if(this.prepareRenderableFrame(nt,!0),this.prepareProperties(nt,!0),this.tm._placeholder)this._currentTime=nt/this.data.sr;else{var rt=this.tm.v;this._currentTime=rt}this._volume=this.lv.v[0];var it=this._volume*this._volumeMultiplier;this._previousVolume!==it&&(this._previousVolume=it,this.audio.volume(it))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(nt){this.audio.rate(nt)},AudioElement.prototype.volume=function(nt){this._volumeMultiplier=nt,this._previousVolume=nt*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(nt){var rt,it=this.layers.length,st;for(this.completeLayers=!0,rt=it-1;rt>=0;rt-=1)this.elements[rt]||(st=this.layers[rt],st.ip-st.st<=nt-this.layers[rt].st&&st.op-st.st>nt-this.layers[rt].st&&this.buildItem(rt)),this.completeLayers=this.elements[rt]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(nt){switch(nt.ty){case 2:return this.createImage(nt);case 0:return this.createComp(nt);case 1:return this.createSolid(nt);case 3:return this.createNull(nt);case 4:return this.createShape(nt);case 5:return this.createText(nt);case 6:return this.createAudio(nt);case 13:return this.createCamera(nt);case 15:return this.createFootage(nt);default:return this.createNull(nt)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(nt){return new AudioElement(nt,this.globalData,this)},BaseRenderer.prototype.createFootage=function(nt){return new FootageElement(nt,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var nt,rt=this.layers.length;for(nt=0;nt<rt;nt+=1)this.buildItem(nt);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(nt){this.completeLayers=!1;var rt,it=nt.length,st,lt=this.layers.length;for(rt=0;rt<it;rt+=1)for(st=0;st<lt;){if(this.layers[st].id===nt[rt].id){this.layers[st]=nt[rt];break}st+=1}},BaseRenderer.prototype.setProjectInterface=function(nt){this.globalData.projectInterface=nt},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(nt,rt,it){for(var st=this.elements,lt=this.layers,ct=0,ut=lt.length;ct<ut;)lt[ct].ind==rt&&(!st[ct]||st[ct]===!0?(this.buildItem(ct),this.addPendingElement(nt)):(it.push(st[ct]),st[ct].setAsParent(),lt[ct].parent!==void 0?this.buildElementParenting(nt,lt[ct].parent,it):nt.setHierarchy(it))),ct+=1},BaseRenderer.prototype.addPendingElement=function(nt){this.pendingElements.push(nt)},BaseRenderer.prototype.searchExtraCompositions=function(nt){var rt,it=nt.length;for(rt=0;rt<it;rt+=1)if(nt[rt].xt){var st=this.createComp(nt[rt]);st.initExpressions(),this.globalData.projectInterface.registerComposition(st)}},BaseRenderer.prototype.getElementById=function(nt){var rt,it=this.elements.length;for(rt=0;rt<it;rt+=1)if(this.elements[rt].data.ind===nt)return this.elements[rt];return null},BaseRenderer.prototype.getElementByPath=function(nt){var rt=nt.shift(),it;if(typeof rt=="number")it=this.elements[rt];else{var st,lt=this.elements.length;for(st=0;st<lt;st+=1)if(this.elements[st].data.nm===rt){it=this.elements[st];break}}return nt.length===0?it:it.getElementByPath(nt)},BaseRenderer.prototype.setupGlobalData=function(nt,rt){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(nt),this.globalData.fontManager.addChars(nt.chars),this.globalData.fontManager.addFonts(nt.fonts,rt),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=nt.fr,this.globalData.nm=nt.nm,this.globalData.compSize={w:nt.w,h:nt.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var rt=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:rt,localMat:rt,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var rt,it=this.finalTransform.mat,st=0,lt=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;st<lt;){if(this.hierarchy[st].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}st+=1}if(this.finalTransform._matMdf)for(rt=this.finalTransform.mProp.v.props,it.cloneFromProps(rt),st=0;st<lt;st+=1)it.multiply(this.hierarchy[st].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var rt=0,it=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;rt<it;)this.localTransforms[rt]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[rt]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),rt+=1;if(this.finalTransform._localMatMdf){var st=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(st),rt=1;rt<it;rt+=1){var lt=this.localTransforms[rt].matrix;st.multiply(lt)}st.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var ct=this.finalTransform.localOpacity;for(rt=0;rt<it;rt+=1)ct*=this.localTransforms[rt].opacity*.01;this.finalTransform.localOpacity=ct}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var rt=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(rt.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var it=0,st=rt.length;for(it=0;it<st;it+=1)this.localTransforms.push(rt[it])}}},globalToLocal:function(rt){var it=[];it.push(this.finalTransform);for(var st=!0,lt=this.comp;st;)lt.finalTransform?(lt.data.hasMask&&it.splice(0,0,lt.finalTransform),lt=lt.comp):st=!1;var ct,ut=it.length,dt;for(ct=0;ct<ut;ct+=1)dt=it[ct].mat.applyToPointArray(0,0,0),rt=[rt[0]-dt[0],rt[1]-dt[1],0];return rt},mHelper:new Matrix};function MaskElement(nt,rt,it){this.data=nt,this.element=rt,this.globalData=it,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var st=this.globalData.defs,lt,ct=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(ct),this.solidPath="";var ut,dt=this.masksProperties,ht=0,ft=[],pt,mt,gt=createElementID(),xt,yt,vt,St,wt="clipPath",Et="clip-path";for(lt=0;lt<ct;lt+=1)if((dt[lt].mode!=="a"&&dt[lt].mode!=="n"||dt[lt].inv||dt[lt].o.k!==100||dt[lt].o.x)&&(wt="mask",Et="mask"),(dt[lt].mode==="s"||dt[lt].mode==="i")&&ht===0?(xt=createNS("rect"),xt.setAttribute("fill","#ffffff"),xt.setAttribute("width",this.element.comp.data.w||0),xt.setAttribute("height",this.element.comp.data.h||0),ft.push(xt)):xt=null,ut=createNS("path"),dt[lt].mode==="n")this.viewData[lt]={op:PropertyFactory.getProp(this.element,dt[lt].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,dt[lt],3),elem:ut,lastPath:""},st.appendChild(ut);else{ht+=1,ut.setAttribute("fill",dt[lt].mode==="s"?"#000000":"#ffffff"),ut.setAttribute("clip-rule","nonzero");var Rt;if(dt[lt].x.k!==0?(wt="mask",Et="mask",St=PropertyFactory.getProp(this.element,dt[lt].x,0,null,this.element),Rt=createElementID(),yt=createNS("filter"),yt.setAttribute("id",Rt),vt=createNS("feMorphology"),vt.setAttribute("operator","erode"),vt.setAttribute("in","SourceGraphic"),vt.setAttribute("radius","0"),yt.appendChild(vt),st.appendChild(yt),ut.setAttribute("stroke",dt[lt].mode==="s"?"#000000":"#ffffff")):(vt=null,St=null),this.storedData[lt]={elem:ut,x:St,expan:vt,lastPath:"",lastOperator:"",filterId:Rt,lastRadius:0},dt[lt].mode==="i"){mt=ft.length;var Tt=createNS("g");for(pt=0;pt<mt;pt+=1)Tt.appendChild(ft[pt]);var It=createNS("mask");It.setAttribute("mask-type","alpha"),It.setAttribute("id",gt+"_"+ht),It.appendChild(ut),st.appendChild(It),Tt.setAttribute("mask","url("+getLocationHref()+"#"+gt+"_"+ht+")"),ft.length=0,ft.push(Tt)}else ft.push(ut);dt[lt].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[lt]={elem:ut,lastPath:"",op:PropertyFactory.getProp(this.element,dt[lt].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,dt[lt],3),invRect:xt},this.viewData[lt].prop.k||this.drawPath(dt[lt],this.viewData[lt].prop.v,this.viewData[lt])}for(this.maskElement=createNS(wt),ct=ft.length,lt=0;lt<ct;lt+=1)this.maskElement.appendChild(ft[lt]);ht>0&&(this.maskElement.setAttribute("id",gt),this.element.maskedElement.setAttribute(Et,"url("+getLocationHref()+"#"+gt+")"),st.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(nt){return this.viewData[nt].prop},MaskElement.prototype.renderFrame=function(nt){var rt=this.element.finalTransform.mat,it,st=this.masksProperties.length;for(it=0;it<st;it+=1)if((this.viewData[it].prop._mdf||nt)&&this.drawPath(this.masksProperties[it],this.viewData[it].prop.v,this.viewData[it]),(this.viewData[it].op._mdf||nt)&&this.viewData[it].elem.setAttribute("fill-opacity",this.viewData[it].op.v),this.masksProperties[it].mode!=="n"&&(this.viewData[it].invRect&&(this.element.finalTransform.mProp._mdf||nt)&&this.viewData[it].invRect.setAttribute("transform",rt.getInverseMatrix().to2dCSS()),this.storedData[it].x&&(this.storedData[it].x._mdf||nt))){var lt=this.storedData[it].expan;this.storedData[it].x.v<0?(this.storedData[it].lastOperator!=="erode"&&(this.storedData[it].lastOperator="erode",this.storedData[it].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[it].filterId+")")),lt.setAttribute("radius",-this.storedData[it].x.v)):(this.storedData[it].lastOperator!=="dilate"&&(this.storedData[it].lastOperator="dilate",this.storedData[it].elem.setAttribute("filter",null)),this.storedData[it].elem.setAttribute("stroke-width",this.storedData[it].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var nt="M0,0 ";return nt+=" h"+this.globalData.compSize.w,nt+=" v"+this.globalData.compSize.h,nt+=" h-"+this.globalData.compSize.w,nt+=" v-"+this.globalData.compSize.h+" ",nt},MaskElement.prototype.drawPath=function(nt,rt,it){var st=" M"+rt.v[0][0]+","+rt.v[0][1],lt,ct;for(ct=rt._length,lt=1;lt<ct;lt+=1)st+=" C"+rt.o[lt-1][0]+","+rt.o[lt-1][1]+" "+rt.i[lt][0]+","+rt.i[lt][1]+" "+rt.v[lt][0]+","+rt.v[lt][1];if(rt.c&&ct>1&&(st+=" C"+rt.o[lt-1][0]+","+rt.o[lt-1][1]+" "+rt.i[0][0]+","+rt.i[0][1]+" "+rt.v[0][0]+","+rt.v[0][1]),it.lastPath!==st){var ut="";it.elem&&(rt.c&&(ut=nt.inv?this.solidPath+st:st),it.elem.setAttribute("d",ut)),it.lastPath=st}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var nt={};nt.createFilter=rt,nt.createAlphaToLuminanceFilter=it;function rt(st,lt){var ct=createNS("filter");return ct.setAttribute("id",st),lt!==!0&&(ct.setAttribute("filterUnits","objectBoundingBox"),ct.setAttribute("x","0%"),ct.setAttribute("y","0%"),ct.setAttribute("width","100%"),ct.setAttribute("height","100%")),ct}function it(){var st=createNS("feColorMatrix");return st.setAttribute("type","matrix"),st.setAttribute("color-interpolation-filters","sRGB"),st.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),st}return nt}(),featureSupport=function(){var nt={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(nt.maskType=!1),/firefox/i.test(navigator.userAgent)&&(nt.svgLumaHidden=!1),nt}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(nt){var rt,it="SourceGraphic",st=nt.data.ef?nt.data.ef.length:0,lt=createElementID(),ct=filtersFactory.createFilter(lt,!0),ut=0;this.filters=[];var dt;for(rt=0;rt<st;rt+=1){dt=null;var ht=nt.data.ef[rt].ty;if(registeredEffects$1[ht]){var ft=registeredEffects$1[ht].effect;dt=new ft(ct,nt.effectsManager.effectElements[rt],nt,idPrefix+ut,it),it=idPrefix+ut,registeredEffects$1[ht].countsAsEffect&&(ut+=1)}dt&&this.filters.push(dt)}ut&&(nt.globalData.defs.appendChild(ct),nt.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+lt+")")),this.filters.length&&nt.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(nt){var rt,it=this.filters.length;for(rt=0;rt<it;rt+=1)this.filters[rt].renderFrame(nt)},SVGEffects.prototype.getEffects=function(nt){var rt,it=this.filters.length,st=[];for(rt=0;rt<it;rt+=1)this.filters[rt].type===nt&&st.push(this.filters[rt]);return st};function registerEffect$1(nt,rt,it){registeredEffects$1[nt]={effect:rt,countsAsEffect:it}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var rt=null;if(this.data.td){this.matteMasks={};var it=createNS("g");it.setAttribute("id",this.layerId),it.appendChild(this.layerElement),rt=it,this.globalData.defs.appendChild(it)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),rt=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var st=createNS("clipPath"),lt=createNS("path");lt.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var ct=createElementID();if(st.setAttribute("id",ct),st.appendChild(lt),this.globalData.defs.appendChild(st),this.checkMasks()){var ut=createNS("g");ut.setAttribute("clip-path","url("+getLocationHref()+"#"+ct+")"),ut.appendChild(this.layerElement),this.transformedElement=ut,rt?rt.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ct+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(rt){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[rt]){var it=this.layerId+"_"+rt,st,lt,ct,ut;if(rt===1||rt===3){var dt=createNS("mask");dt.setAttribute("id",it),dt.setAttribute("mask-type",rt===3?"luminance":"alpha"),ct=createNS("use"),ct.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),dt.appendChild(ct),this.globalData.defs.appendChild(dt),!featureSupport.maskType&&rt===1&&(dt.setAttribute("mask-type","luminance"),st=createElementID(),lt=filtersFactory.createFilter(st),this.globalData.defs.appendChild(lt),lt.appendChild(filtersFactory.createAlphaToLuminanceFilter()),ut=createNS("g"),ut.appendChild(ct),dt.appendChild(ut),ut.setAttribute("filter","url("+getLocationHref()+"#"+st+")"))}else if(rt===2){var ht=createNS("mask");ht.setAttribute("id",it),ht.setAttribute("mask-type","alpha");var ft=createNS("g");ht.appendChild(ft),st=createElementID(),lt=filtersFactory.createFilter(st);var pt=createNS("feComponentTransfer");pt.setAttribute("in","SourceGraphic"),lt.appendChild(pt);var mt=createNS("feFuncA");mt.setAttribute("type","table"),mt.setAttribute("tableValues","1.0 0.0"),pt.appendChild(mt),this.globalData.defs.appendChild(lt);var gt=createNS("rect");gt.setAttribute("width",this.comp.data.w),gt.setAttribute("height",this.comp.data.h),gt.setAttribute("x","0"),gt.setAttribute("y","0"),gt.setAttribute("fill","#ffffff"),gt.setAttribute("opacity","0"),ft.setAttribute("filter","url("+getLocationHref()+"#"+st+")"),ft.appendChild(gt),ct=createNS("use"),ct.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),ft.appendChild(ct),featureSupport.maskType||(ht.setAttribute("mask-type","luminance"),lt.appendChild(filtersFactory.createAlphaToLuminanceFilter()),ut=createNS("g"),ft.appendChild(gt),ut.appendChild(this.layerElement),ft.appendChild(ut)),this.globalData.defs.appendChild(ht)}this.matteMasks[rt]=it}return this.matteMasks[rt]},setMatte:function(rt){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+rt+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(rt){this.hierarchy=rt},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var nt={initElement:function(it,st,lt){this.initFrame(),this.initBaseData(it,st,lt),this.initTransform(it,st,lt),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var it=this.baseElement||this.layerElement;it.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var it=this.baseElement||this.layerElement;it.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(it){this._mdf=!1,this.prepareRenderableFrame(it),this.prepareProperties(it,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(nt)],RenderableDOMElement)})();function IImageElement(nt,rt,it){this.assetData=rt.getAssetData(nt.refId),this.assetData&&this.assetData.sid&&(this.assetData=rt.slotManager.getProp(this.assetData)),this.initElement(nt,rt,it),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var nt=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",nt),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(nt,rt){this.elem=nt,this.pos=rt}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(rt){var it,st=this.shapeModifiers.length;for(it=0;it<st;it+=1)this.shapeModifiers[it].addShape(rt)},isShapeInAnimatedModifiers:function(rt){for(var it=0,st=this.shapeModifiers.length;it<st;)if(this.shapeModifiers[it].isAnimatedWithShape(rt))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var rt,it=this.shapes.length;for(rt=0;rt<it;rt+=1)this.shapes[rt].sh.reset();it=this.shapeModifiers.length;var st;for(rt=it-1;rt>=0&&(st=this.shapeModifiers[rt].processShapes(this._isFirstFrame),!st);rt-=1);}},searchProcessedElement:function(rt){for(var it=this.processedElements,st=0,lt=it.length;st<lt;){if(it[st].elem===rt)return it[st].pos;st+=1}return 0},addProcessedElement:function(rt,it){for(var st=this.processedElements,lt=st.length;lt;)if(lt-=1,st[lt].elem===rt){st[lt].pos=it;return}st.push(new ProcessedElement(rt,it))},prepareFrame:function(rt){this.prepareRenderableFrame(rt),this.prepareProperties(rt,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(nt,rt,it){this.caches=[],this.styles=[],this.transformers=nt,this.lStr="",this.sh=it,this.lvl=rt,this._isAnimated=!!it.k;for(var st=0,lt=nt.length;st<lt;){if(nt[st].mProps.dynamicProperties.length){this._isAnimated=!0;break}st+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(nt,rt){this.data=nt,this.type=nt.ty,this.d="",this.lvl=rt,this._mdf=!1,this.closed=nt.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(nt,rt,it,st){this.elem=nt,this.frameId=-1,this.dataProps=createSizedArray(rt.length),this.renderer=it,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",rt.length?rt.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(st);var lt,ct=rt.length||0,ut;for(lt=0;lt<ct;lt+=1)ut=PropertyFactory.getProp(nt,rt[lt].v,0,0,this),this.k=ut.k||this.k,this.dataProps[lt]={n:rt[lt].n,p:ut};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(nt){if(!(this.elem.globalData.frameId===this.frameId&&!nt)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||nt,this._mdf)){var rt=0,it=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),rt=0;rt<it;rt+=1)this.dataProps[rt].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[rt].p.v:this.dashArray[rt]=this.dataProps[rt].p.v:this.dashoffset[0]=this.dataProps[rt].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(nt,rt,it){this.initDynamicPropertyContainer(nt),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(nt,rt.o,0,.01,this),this.w=PropertyFactory.getProp(nt,rt.w,0,null,this),this.d=new DashProperty(nt,rt.d||{},"svg",this),this.c=PropertyFactory.getProp(nt,rt.c,1,255,this),this.style=it,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(nt,rt,it){this.initDynamicPropertyContainer(nt),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(nt,rt.o,0,.01,this),this.c=PropertyFactory.getProp(nt,rt.c,1,255,this),this.style=it}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(nt,rt,it){this.initDynamicPropertyContainer(nt),this.getValue=this.iterateDynamicProperties,this.style=it}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(nt,rt,it){this.data=rt,this.c=createTypedArray("uint8c",rt.p*4);var st=rt.k.k[0].s?rt.k.k[0].s.length-rt.p*4:rt.k.k.length-rt.p*4;this.o=createTypedArray("float32",st),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=st,this.initDynamicPropertyContainer(it),this.prop=PropertyFactory.getProp(nt,rt.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(nt,rt){for(var it=0,st=this.o.length/2,lt;it<st;){if(lt=Math.abs(nt[it*4]-nt[rt*4+it*2]),lt>.01)return!1;it+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var nt=0,rt=this.data.k.k.length;nt<rt;){if(!this.comparePoints(this.data.k.k[nt].s,this.data.p))return!1;nt+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(nt){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||nt){var rt,it=this.data.p*4,st,lt;for(rt=0;rt<it;rt+=1)st=rt%4===0?100:255,lt=Math.round(this.prop.v[rt]*st),this.c[rt]!==lt&&(this.c[rt]=lt,this._cmdf=!nt);if(this.o.length)for(it=this.prop.v.length,rt=this.data.p*4;rt<it;rt+=1)st=rt%2===0?100:1,lt=rt%2===0?Math.round(this.prop.v[rt]*100):this.prop.v[rt],this.o[rt-this.data.p*4]!==lt&&(this.o[rt-this.data.p*4]=lt,this._omdf=!nt);this._mdf=!nt}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(nt,rt,it){this.initDynamicPropertyContainer(nt),this.getValue=this.iterateDynamicProperties,this.initGradientData(nt,rt,it)}SVGGradientFillStyleData.prototype.initGradientData=function(nt,rt,it){this.o=PropertyFactory.getProp(nt,rt.o,0,.01,this),this.s=PropertyFactory.getProp(nt,rt.s,1,null,this),this.e=PropertyFactory.getProp(nt,rt.e,1,null,this),this.h=PropertyFactory.getProp(nt,rt.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(nt,rt.a||{k:0},0,degToRads,this),this.g=new GradientProperty(nt,rt.g,this),this.style=it,this.stops=[],this.setGradientData(it.pElem,rt),this.setGradientOpacity(rt,it),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(nt,rt){var it=createElementID(),st=createNS(rt.t===1?"linearGradient":"radialGradient");st.setAttribute("id",it),st.setAttribute("spreadMethod","pad"),st.setAttribute("gradientUnits","userSpaceOnUse");var lt=[],ct,ut,dt;for(dt=rt.g.p*4,ut=0;ut<dt;ut+=4)ct=createNS("stop"),st.appendChild(ct),lt.push(ct);nt.setAttribute(rt.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+it+")"),this.gf=st,this.cst=lt},SVGGradientFillStyleData.prototype.setGradientOpacity=function(nt,rt){if(this.g._hasOpacity&&!this.g._collapsable){var it,st,lt,ct=createNS("mask"),ut=createNS("path");ct.appendChild(ut);var dt=createElementID(),ht=createElementID();ct.setAttribute("id",ht);var ft=createNS(nt.t===1?"linearGradient":"radialGradient");ft.setAttribute("id",dt),ft.setAttribute("spreadMethod","pad"),ft.setAttribute("gradientUnits","userSpaceOnUse"),lt=nt.g.k.k[0].s?nt.g.k.k[0].s.length:nt.g.k.k.length;var pt=this.stops;for(st=nt.g.p*4;st<lt;st+=2)it=createNS("stop"),it.setAttribute("stop-color","rgb(255,255,255)"),ft.appendChild(it),pt.push(it);ut.setAttribute(nt.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+dt+")"),nt.ty==="gs"&&(ut.setAttribute("stroke-linecap",lineCapEnum[nt.lc||2]),ut.setAttribute("stroke-linejoin",lineJoinEnum[nt.lj||2]),nt.lj===1&&ut.setAttribute("stroke-miterlimit",nt.ml)),this.of=ft,this.ms=ct,this.ost=pt,this.maskId=ht,rt.msElem=ut}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(nt,rt,it){this.initDynamicPropertyContainer(nt),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(nt,rt.w,0,null,this),this.d=new DashProperty(nt,rt.d||{},"svg",this),this.initGradientData(nt,rt,it),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(nt,rt,it){this.transform={mProps:nt,op:rt,container:it},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(rt,it,st,lt){if(it===0)return"";var ct=rt.o,ut=rt.i,dt=rt.v,ht,ft=" M"+lt.applyToPointStringified(dt[0][0],dt[0][1]);for(ht=1;ht<it;ht+=1)ft+=" C"+lt.applyToPointStringified(ct[ht-1][0],ct[ht-1][1])+" "+lt.applyToPointStringified(ut[ht][0],ut[ht][1])+" "+lt.applyToPointStringified(dt[ht][0],dt[ht][1]);return st&&it&&(ft+=" C"+lt.applyToPointStringified(ct[ht-1][0],ct[ht-1][1])+" "+lt.applyToPointStringified(ut[0][0],ut[0][1])+" "+lt.applyToPointStringified(dt[0][0],dt[0][1]),ft+="z"),ft},SVGElementsRenderer=function(){var nt=new Matrix,rt=new Matrix,it={createRenderFunction:st};function st(mt){switch(mt.ty){case"fl":return dt;case"gf":return ft;case"gs":return ht;case"st":return pt;case"sh":case"el":case"rc":case"sr":return ut;case"tr":return lt;case"no":return ct;default:return null}}function lt(mt,gt,xt){(xt||gt.transform.op._mdf)&&gt.transform.container.setAttribute("opacity",gt.transform.op.v),(xt||gt.transform.mProps._mdf)&&gt.transform.container.setAttribute("transform",gt.transform.mProps.v.to2dCSS())}function ct(){}function ut(mt,gt,xt){var yt,vt,St,wt,Et,Rt,Tt=gt.styles.length,It=gt.lvl,At,Dt,jt,Ft;for(Rt=0;Rt<Tt;Rt+=1){if(wt=gt.sh._mdf||xt,gt.styles[Rt].lvl<It){for(Dt=rt.reset(),jt=It-gt.styles[Rt].lvl,Ft=gt.transformers.length-1;!wt&&jt>0;)wt=gt.transformers[Ft].mProps._mdf||wt,jt-=1,Ft-=1;if(wt)for(jt=It-gt.styles[Rt].lvl,Ft=gt.transformers.length-1;jt>0;)Dt.multiply(gt.transformers[Ft].mProps.v),jt-=1,Ft-=1}else Dt=nt;if(At=gt.sh.paths,vt=At._length,wt){for(St="",yt=0;yt<vt;yt+=1)Et=At.shapes[yt],Et&&Et._length&&(St+=buildShapeString(Et,Et._length,Et.c,Dt));gt.caches[Rt]=St}else St=gt.caches[Rt];gt.styles[Rt].d+=mt.hd===!0?"":St,gt.styles[Rt]._mdf=wt||gt.styles[Rt]._mdf}}function dt(mt,gt,xt){var yt=gt.style;(gt.c._mdf||xt)&&yt.pElem.setAttribute("fill","rgb("+bmFloor(gt.c.v[0])+","+bmFloor(gt.c.v[1])+","+bmFloor(gt.c.v[2])+")"),(gt.o._mdf||xt)&&yt.pElem.setAttribute("fill-opacity",gt.o.v)}function ht(mt,gt,xt){ft(mt,gt,xt),pt(mt,gt,xt)}function ft(mt,gt,xt){var yt=gt.gf,vt=gt.g._hasOpacity,St=gt.s.v,wt=gt.e.v;if(gt.o._mdf||xt){var Et=mt.ty==="gf"?"fill-opacity":"stroke-opacity";gt.style.pElem.setAttribute(Et,gt.o.v)}if(gt.s._mdf||xt){var Rt=mt.t===1?"x1":"cx",Tt=Rt==="x1"?"y1":"cy";yt.setAttribute(Rt,St[0]),yt.setAttribute(Tt,St[1]),vt&&!gt.g._collapsable&&(gt.of.setAttribute(Rt,St[0]),gt.of.setAttribute(Tt,St[1]))}var It,At,Dt,jt;if(gt.g._cmdf||xt){It=gt.cst;var Ft=gt.g.c;for(Dt=It.length,At=0;At<Dt;At+=1)jt=It[At],jt.setAttribute("offset",Ft[At*4]+"%"),jt.setAttribute("stop-color","rgb("+Ft[At*4+1]+","+Ft[At*4+2]+","+Ft[At*4+3]+")")}if(vt&&(gt.g._omdf||xt)){var Lt=gt.g.o;for(gt.g._collapsable?It=gt.cst:It=gt.ost,Dt=It.length,At=0;At<Dt;At+=1)jt=It[At],gt.g._collapsable||jt.setAttribute("offset",Lt[At*2]+"%"),jt.setAttribute("stop-opacity",Lt[At*2+1])}if(mt.t===1)(gt.e._mdf||xt)&&(yt.setAttribute("x2",wt[0]),yt.setAttribute("y2",wt[1]),vt&&!gt.g._collapsable&&(gt.of.setAttribute("x2",wt[0]),gt.of.setAttribute("y2",wt[1])));else{var Mt;if((gt.s._mdf||gt.e._mdf||xt)&&(Mt=Math.sqrt(Math.pow(St[0]-wt[0],2)+Math.pow(St[1]-wt[1],2)),yt.setAttribute("r",Mt),vt&&!gt.g._collapsable&&gt.of.setAttribute("r",Mt)),gt.e._mdf||gt.h._mdf||gt.a._mdf||xt){Mt||(Mt=Math.sqrt(Math.pow(St[0]-wt[0],2)+Math.pow(St[1]-wt[1],2)));var Ot=Math.atan2(wt[1]-St[1],wt[0]-St[0]),Nt=gt.h.v;Nt>=1?Nt=.99:Nt<=-1&&(Nt=-.99);var $t=Mt*Nt,Vt=Math.cos(Ot+gt.a.v)*$t+St[0],Ut=Math.sin(Ot+gt.a.v)*$t+St[1];yt.setAttribute("fx",Vt),yt.setAttribute("fy",Ut),vt&&!gt.g._collapsable&&(gt.of.setAttribute("fx",Vt),gt.of.setAttribute("fy",Ut))}}}function pt(mt,gt,xt){var yt=gt.style,vt=gt.d;vt&&(vt._mdf||xt)&&vt.dashStr&&(yt.pElem.setAttribute("stroke-dasharray",vt.dashStr),yt.pElem.setAttribute("stroke-dashoffset",vt.dashoffset[0])),gt.c&&(gt.c._mdf||xt)&&yt.pElem.setAttribute("stroke","rgb("+bmFloor(gt.c.v[0])+","+bmFloor(gt.c.v[1])+","+bmFloor(gt.c.v[2])+")"),(gt.o._mdf||xt)&&yt.pElem.setAttribute("stroke-opacity",gt.o.v),(gt.w._mdf||xt)&&(yt.pElem.setAttribute("stroke-width",gt.w.v),yt.msElem&&yt.msElem.setAttribute("stroke-width",gt.w.v))}return it}();function SVGShapeElement(nt,rt,it){this.shapes=[],this.shapesData=nt.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(nt,rt,it),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var nt,rt=this.shapes.length,it,st,lt=this.stylesList.length,ct,ut=[],dt=!1;for(st=0;st<lt;st+=1){for(ct=this.stylesList[st],dt=!1,ut.length=0,nt=0;nt<rt;nt+=1)it=this.shapes[nt],it.styles.indexOf(ct)!==-1&&(ut.push(it),dt=it._isAnimated||dt);ut.length>1&&dt&&this.setShapesAsAnimated(ut)}},SVGShapeElement.prototype.setShapesAsAnimated=function(nt){var rt,it=nt.length;for(rt=0;rt<it;rt+=1)nt[rt].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(nt,rt){var it,st=new SVGStyleData(nt,rt),lt=st.pElem;if(nt.ty==="st")it=new SVGStrokeStyleData(this,nt,st);else if(nt.ty==="fl")it=new SVGFillStyleData(this,nt,st);else if(nt.ty==="gf"||nt.ty==="gs"){var ct=nt.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;it=new ct(this,nt,st),this.globalData.defs.appendChild(it.gf),it.maskId&&(this.globalData.defs.appendChild(it.ms),this.globalData.defs.appendChild(it.of),lt.setAttribute("mask","url("+getLocationHref()+"#"+it.maskId+")"))}else nt.ty==="no"&&(it=new SVGNoStyleData(this,nt,st));return(nt.ty==="st"||nt.ty==="gs")&&(lt.setAttribute("stroke-linecap",lineCapEnum[nt.lc||2]),lt.setAttribute("stroke-linejoin",lineJoinEnum[nt.lj||2]),lt.setAttribute("fill-opacity","0"),nt.lj===1&&lt.setAttribute("stroke-miterlimit",nt.ml)),nt.r===2&&lt.setAttribute("fill-rule","evenodd"),nt.ln&&lt.setAttribute("id",nt.ln),nt.cl&&lt.setAttribute("class",nt.cl),nt.bm&&(lt.style["mix-blend-mode"]=getBlendMode(nt.bm)),this.stylesList.push(st),this.addToAnimatedContents(nt,it),it},SVGShapeElement.prototype.createGroupElement=function(nt){var rt=new ShapeGroupData;return nt.ln&&rt.gr.setAttribute("id",nt.ln),nt.cl&&rt.gr.setAttribute("class",nt.cl),nt.bm&&(rt.gr.style["mix-blend-mode"]=getBlendMode(nt.bm)),rt},SVGShapeElement.prototype.createTransformElement=function(nt,rt){var it=TransformPropertyFactory.getTransformProperty(this,nt,this),st=new SVGTransformData(it,it.o,rt);return this.addToAnimatedContents(nt,st),st},SVGShapeElement.prototype.createShapeElement=function(nt,rt,it){var st=4;nt.ty==="rc"?st=5:nt.ty==="el"?st=6:nt.ty==="sr"&&(st=7);var lt=ShapePropertyFactory.getShapeProp(this,nt,st,this),ct=new SVGShapeData(rt,it,lt);return this.shapes.push(ct),this.addShapeToModifiers(ct),this.addToAnimatedContents(nt,ct),ct},SVGShapeElement.prototype.addToAnimatedContents=function(nt,rt){for(var it=0,st=this.animatedContents.length;it<st;){if(this.animatedContents[it].element===rt)return;it+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(nt),element:rt,data:nt})},SVGShapeElement.prototype.setElementStyles=function(nt){var rt=nt.styles,it,st=this.stylesList.length;for(it=0;it<st;it+=1)this.stylesList[it].closed||rt.push(this.stylesList[it])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var nt,rt=this.itemsData.length;for(nt=0;nt<rt;nt+=1)this.prevViewData[nt]=this.itemsData[nt];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),rt=this.dynamicProperties.length,nt=0;nt<rt;nt+=1)this.dynamicProperties[nt].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(nt,rt,it,st,lt,ct,ut){var dt=[].concat(ct),ht,ft=nt.length-1,pt,mt,gt=[],xt=[],yt,vt,St;for(ht=ft;ht>=0;ht-=1){if(St=this.searchProcessedElement(nt[ht]),St?rt[ht]=it[St-1]:nt[ht]._render=ut,nt[ht].ty==="fl"||nt[ht].ty==="st"||nt[ht].ty==="gf"||nt[ht].ty==="gs"||nt[ht].ty==="no")St?rt[ht].style.closed=!1:rt[ht]=this.createStyleElement(nt[ht],lt),nt[ht]._render&&rt[ht].style.pElem.parentNode!==st&&st.appendChild(rt[ht].style.pElem),gt.push(rt[ht].style);else if(nt[ht].ty==="gr"){if(!St)rt[ht]=this.createGroupElement(nt[ht]);else for(mt=rt[ht].it.length,pt=0;pt<mt;pt+=1)rt[ht].prevViewData[pt]=rt[ht].it[pt];this.searchShapes(nt[ht].it,rt[ht].it,rt[ht].prevViewData,rt[ht].gr,lt+1,dt,ut),nt[ht]._render&&rt[ht].gr.parentNode!==st&&st.appendChild(rt[ht].gr)}else nt[ht].ty==="tr"?(St||(rt[ht]=this.createTransformElement(nt[ht],st)),yt=rt[ht].transform,dt.push(yt)):nt[ht].ty==="sh"||nt[ht].ty==="rc"||nt[ht].ty==="el"||nt[ht].ty==="sr"?(St||(rt[ht]=this.createShapeElement(nt[ht],dt,lt)),this.setElementStyles(rt[ht])):nt[ht].ty==="tm"||nt[ht].ty==="rd"||nt[ht].ty==="ms"||nt[ht].ty==="pb"||nt[ht].ty==="zz"||nt[ht].ty==="op"?(St?(vt=rt[ht],vt.closed=!1):(vt=ShapeModifiers.getModifier(nt[ht].ty),vt.init(this,nt[ht]),rt[ht]=vt,this.shapeModifiers.push(vt)),xt.push(vt)):nt[ht].ty==="rp"&&(St?(vt=rt[ht],vt.closed=!0):(vt=ShapeModifiers.getModifier(nt[ht].ty),rt[ht]=vt,vt.init(this,nt,ht,rt),this.shapeModifiers.push(vt),ut=!1),xt.push(vt));this.addProcessedElement(nt[ht],ht+1)}for(ft=gt.length,ht=0;ht<ft;ht+=1)gt[ht].closed=!0;for(ft=xt.length,ht=0;ht<ft;ht+=1)xt[ht].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var nt,rt=this.stylesList.length;for(nt=0;nt<rt;nt+=1)this.stylesList[nt].reset();for(this.renderShape(),nt=0;nt<rt;nt+=1)(this.stylesList[nt]._mdf||this._isFirstFrame)&&(this.stylesList[nt].msElem&&(this.stylesList[nt].msElem.setAttribute("d",this.stylesList[nt].d),this.stylesList[nt].d="M0 0"+this.stylesList[nt].d),this.stylesList[nt].pElem.setAttribute("d",this.stylesList[nt].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var nt,rt=this.animatedContents.length,it;for(nt=0;nt<rt;nt+=1)it=this.animatedContents[nt],(this._isFirstFrame||it.element._isAnimated)&&it.data!==!0&&it.fn(it.data,it.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(nt,rt,it,st,lt,ct){this.o=nt,this.sw=rt,this.sc=it,this.fc=st,this.m=lt,this.p=ct,this._mdf={o:!0,sw:!!rt,sc:!!it,fc:!!st,m:!0,p:!0}}LetterProps.prototype.update=function(nt,rt,it,st,lt,ct){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var ut=!1;return this.o!==nt&&(this.o=nt,this._mdf.o=!0,ut=!0),this.sw!==rt&&(this.sw=rt,this._mdf.sw=!0,ut=!0),this.sc!==it&&(this.sc=it,this._mdf.sc=!0,ut=!0),this.fc!==st&&(this.fc=st,this._mdf.fc=!0,ut=!0),this.m!==lt&&(this.m=lt,this._mdf.m=!0,ut=!0),ct.length&&(this.p[0]!==ct[0]||this.p[1]!==ct[1]||this.p[4]!==ct[4]||this.p[5]!==ct[5]||this.p[12]!==ct[12]||this.p[13]!==ct[13])&&(this.p=ct,this._mdf.p=!0,ut=!0),ut};function TextProperty(nt,rt){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,rt.d&&rt.d.sid&&(rt.d=nt.globalData.slotManager.getProp(rt.d)),this.data=rt,this.elem=nt,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(nt,rt){for(var it in rt)Object.prototype.hasOwnProperty.call(rt,it)&&(nt[it]=rt[it]);return nt},TextProperty.prototype.setCurrentData=function(nt){nt.__complete||this.completeTextData(nt),this.currentData=nt,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(nt){this.effectsSequence.push(nt),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(nt){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!nt)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var rt=this.currentData,it=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var st,lt=this.effectsSequence.length,ct=nt||this.data.d.k[this.keysIndex].s;for(st=0;st<lt;st+=1)it!==this.keysIndex?ct=this.effectsSequence[st](ct,ct.t):ct=this.effectsSequence[st](this.currentData,ct.t);rt!==ct&&this.setCurrentData(ct),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var nt=this.data.d.k,rt=this.elem.comp.renderedFrame,it=0,st=nt.length;it<=st-1&&!(it===st-1||nt[it+1].t>rt);)it+=1;return this.keysIndex!==it&&(this.keysIndex=it),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(nt){for(var rt=[],it=0,st=nt.length,lt,ct,ut=!1,dt=!1,ht="";it<st;)ut=dt,dt=!1,lt=nt.charCodeAt(it),ht=nt.charAt(it),FontManager.isCombinedCharacter(lt)?ut=!0:lt>=55296&&lt<=56319?FontManager.isRegionalFlag(nt,it)?ht=nt.substr(it,14):(ct=nt.charCodeAt(it+1),ct>=56320&&ct<=57343&&(FontManager.isModifier(lt,ct)?(ht=nt.substr(it,2),ut=!0):FontManager.isFlagEmoji(nt.substr(it,4))?ht=nt.substr(it,4):ht=nt.substr(it,2))):lt>56319?(ct=nt.charCodeAt(it+1),FontManager.isVariationSelector(lt)&&(ut=!0)):FontManager.isZeroWidthJoiner(lt)&&(ut=!0,dt=!0),ut?(rt[rt.length-1]+=ht,ut=!1):rt.push(ht),it+=ht.length;return rt},TextProperty.prototype.completeTextData=function(nt){nt.__complete=!0;var rt=this.elem.globalData.fontManager,it=this.data,st=[],lt,ct,ut,dt=0,ht,ft=it.m.g,pt=0,mt=0,gt=0,xt=[],yt=0,vt=0,St,wt,Et=rt.getFontByName(nt.f),Rt,Tt=0,It=getFontProperties(Et);nt.fWeight=It.weight,nt.fStyle=It.style,nt.finalSize=nt.s,nt.finalText=this.buildFinalText(nt.t),ct=nt.finalText.length,nt.finalLineHeight=nt.lh;var At=nt.tr/1e3*nt.finalSize,Dt;if(nt.sz)for(var jt=!0,Ft=nt.sz[0],Lt=nt.sz[1],Mt,Ot;jt;){Ot=this.buildFinalText(nt.t),Mt=0,yt=0,ct=Ot.length,At=nt.tr/1e3*nt.finalSize;var Nt=-1;for(lt=0;lt<ct;lt+=1)Dt=Ot[lt].charCodeAt(0),ut=!1,Ot[lt]===" "?Nt=lt:(Dt===13||Dt===3)&&(yt=0,ut=!0,Mt+=nt.finalLineHeight||nt.finalSize*1.2),rt.chars?(Rt=rt.getCharData(Ot[lt],Et.fStyle,Et.fFamily),Tt=ut?0:Rt.w*nt.finalSize/100):Tt=rt.measureText(Ot[lt],nt.f,nt.finalSize),yt+Tt>Ft&&Ot[lt]!==" "?(Nt===-1?ct+=1:lt=Nt,Mt+=nt.finalLineHeight||nt.finalSize*1.2,Ot.splice(lt,Nt===lt?1:0,"\r"),Nt=-1,yt=0):(yt+=Tt,yt+=At);Mt+=Et.ascent*nt.finalSize/100,this.canResize&&nt.finalSize>this.minimumFontSize&&Lt<Mt?(nt.finalSize-=1,nt.finalLineHeight=nt.finalSize*nt.lh/nt.s):(nt.finalText=Ot,ct=nt.finalText.length,jt=!1)}yt=-At,Tt=0;var $t=0,Vt;for(lt=0;lt<ct;lt+=1)if(ut=!1,Vt=nt.finalText[lt],Dt=Vt.charCodeAt(0),Dt===13||Dt===3?($t=0,xt.push(yt),vt=yt>vt?yt:vt,yt=-2*At,ht="",ut=!0,gt+=1):ht=Vt,rt.chars?(Rt=rt.getCharData(Vt,Et.fStyle,rt.getFontByName(nt.f).fFamily),Tt=ut?0:Rt.w*nt.finalSize/100):Tt=rt.measureText(ht,nt.f,nt.finalSize),Vt===" "?$t+=Tt+At:(yt+=Tt+At+$t,$t=0),st.push({l:Tt,an:Tt,add:pt,n:ut,anIndexes:[],val:ht,line:gt,animatorJustifyOffset:0}),ft==2){if(pt+=Tt,ht===""||ht===" "||lt===ct-1){for((ht===""||ht===" ")&&(pt-=Tt);mt<=lt;)st[mt].an=pt,st[mt].ind=dt,st[mt].extra=Tt,mt+=1;dt+=1,pt=0}}else if(ft==3){if(pt+=Tt,ht===""||lt===ct-1){for(ht===""&&(pt-=Tt);mt<=lt;)st[mt].an=pt,st[mt].ind=dt,st[mt].extra=Tt,mt+=1;pt=0,dt+=1}}else st[dt].ind=dt,st[dt].extra=0,dt+=1;if(nt.l=st,vt=yt>vt?yt:vt,xt.push(yt),nt.sz)nt.boxWidth=nt.sz[0],nt.justifyOffset=0;else switch(nt.boxWidth=vt,nt.j){case 1:nt.justifyOffset=-nt.boxWidth;break;case 2:nt.justifyOffset=-nt.boxWidth/2;break;default:nt.justifyOffset=0}nt.lineWidths=xt;var Ut=it.a,zt,Bt;wt=Ut.length;var Ht,Gt,Xt=[];for(St=0;St<wt;St+=1){for(zt=Ut[St],zt.a.sc&&(nt.strokeColorAnim=!0),zt.a.sw&&(nt.strokeWidthAnim=!0),(zt.a.fc||zt.a.fh||zt.a.fs||zt.a.fb)&&(nt.fillColorAnim=!0),Gt=0,Ht=zt.s.b,lt=0;lt<ct;lt+=1)Bt=st[lt],Bt.anIndexes[St]=Gt,(Ht==1&&Bt.val!==""||Ht==2&&Bt.val!==""&&Bt.val!==" "||Ht==3&&(Bt.n||Bt.val==" "||lt==ct-1)||Ht==4&&(Bt.n||lt==ct-1))&&(zt.s.rn===1&&Xt.push(Gt),Gt+=1);it.a[St].s.totalChars=Gt;var Zt=-1,hr;if(zt.s.rn===1)for(lt=0;lt<ct;lt+=1)Bt=st[lt],Zt!=Bt.anIndexes[St]&&(Zt=Bt.anIndexes[St],hr=Xt.splice(Math.floor(Math.random()*Xt.length),1)[0]),Bt.anIndexes[St]=hr}nt.yOffset=nt.finalLineHeight||nt.finalSize*1.2,nt.ls=nt.ls||0,nt.ascent=Et.ascent*nt.finalSize/100},TextProperty.prototype.updateDocumentData=function(nt,rt){rt=rt===void 0?this.keysIndex:rt;var it=this.copyData({},this.data.d.k[rt].s);it=this.copyData(it,nt),this.data.d.k[rt].s=it,this.recalculate(rt),this.setCurrentData(it),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(nt){var rt=this.data.d.k[nt].s;rt.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(rt)},TextProperty.prototype.canResizeFont=function(nt){this.canResize=nt,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(nt){this.minimumFontSize=Math.floor(nt)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var nt=Math.max,rt=Math.min,it=Math.floor;function st(ct,ut){this._currentTextLength=-1,this.k=!1,this.data=ut,this.elem=ct,this.comp=ct.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(ct),this.s=PropertyFactory.getProp(ct,ut.s||{k:0},0,0,this),"e"in ut?this.e=PropertyFactory.getProp(ct,ut.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(ct,ut.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(ct,ut.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(ct,ut.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(ct,ut.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(ct,ut.a,0,.01,this),this.dynamicProperties.length||this.getValue()}st.prototype={getMult:function(ut){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var dt=0,ht=0,ft=1,pt=1;this.ne.v>0?dt=this.ne.v/100:ht=-this.ne.v/100,this.xe.v>0?ft=1-this.xe.v/100:pt=1+this.xe.v/100;var mt=BezierFactory.getBezierEasing(dt,ht,ft,pt).get,gt=0,xt=this.finalS,yt=this.finalE,vt=this.data.sh;if(vt===2)yt===xt?gt=ut>=yt?1:0:gt=nt(0,rt(.5/(yt-xt)+(ut-xt)/(yt-xt),1)),gt=mt(gt);else if(vt===3)yt===xt?gt=ut>=yt?0:1:gt=1-nt(0,rt(.5/(yt-xt)+(ut-xt)/(yt-xt),1)),gt=mt(gt);else if(vt===4)yt===xt?gt=0:(gt=nt(0,rt(.5/(yt-xt)+(ut-xt)/(yt-xt),1)),gt<.5?gt*=2:gt=1-2*(gt-.5)),gt=mt(gt);else if(vt===5){if(yt===xt)gt=0;else{var St=yt-xt;ut=rt(nt(0,ut+.5-xt),yt-xt);var wt=-St/2+ut,Et=St/2;gt=Math.sqrt(1-wt*wt/(Et*Et))}gt=mt(gt)}else vt===6?(yt===xt?gt=0:(ut=rt(nt(0,ut+.5-xt),yt-xt),gt=(1+Math.cos(Math.PI+Math.PI*2*ut/(yt-xt)))/2),gt=mt(gt)):(ut>=it(xt)&&(ut-xt<0?gt=nt(0,rt(rt(yt,1)-(xt-ut),1)):gt=nt(0,rt(yt-ut,1))),gt=mt(gt));if(this.sm.v!==100){var Rt=this.sm.v*.01;Rt===0&&(Rt=1e-8);var Tt=.5-Rt*.5;gt<Tt?gt=0:(gt=(gt-Tt)/Rt,gt>1&&(gt=1))}return gt*this.a.v},getValue:function(ut){this.iterateDynamicProperties(),this._mdf=ut||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,ut&&this.data.r===2&&(this.e.v=this._currentTextLength);var dt=this.data.r===2?1:100/this.data.totalChars,ht=this.o.v/dt,ft=this.s.v/dt+ht,pt=this.e.v/dt+ht;if(ft>pt){var mt=ft;ft=pt,pt=mt}this.finalS=ft,this.finalE=pt}},extendPrototype([DynamicPropertyContainer],st);function lt(ct,ut,dt){return new st(ct,ut)}return{getTextSelectorProp:lt}}();function TextAnimatorDataProperty(nt,rt,it){var st={propType:!1},lt=PropertyFactory.getProp,ct=rt.a;this.a={r:ct.r?lt(nt,ct.r,0,degToRads,it):st,rx:ct.rx?lt(nt,ct.rx,0,degToRads,it):st,ry:ct.ry?lt(nt,ct.ry,0,degToRads,it):st,sk:ct.sk?lt(nt,ct.sk,0,degToRads,it):st,sa:ct.sa?lt(nt,ct.sa,0,degToRads,it):st,s:ct.s?lt(nt,ct.s,1,.01,it):st,a:ct.a?lt(nt,ct.a,1,0,it):st,o:ct.o?lt(nt,ct.o,0,.01,it):st,p:ct.p?lt(nt,ct.p,1,0,it):st,sw:ct.sw?lt(nt,ct.sw,0,0,it):st,sc:ct.sc?lt(nt,ct.sc,1,0,it):st,fc:ct.fc?lt(nt,ct.fc,1,0,it):st,fh:ct.fh?lt(nt,ct.fh,0,0,it):st,fs:ct.fs?lt(nt,ct.fs,0,.01,it):st,fb:ct.fb?lt(nt,ct.fb,0,.01,it):st,t:ct.t?lt(nt,ct.t,0,0,it):st},this.s=TextSelectorProp.getTextSelectorProp(nt,rt.s,it),this.s.t=rt.s.t}function TextAnimatorProperty(nt,rt,it){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=nt,this._renderType=rt,this._elem=it,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(it)}TextAnimatorProperty.prototype.searchProperties=function(){var nt,rt=this._textData.a.length,it,st=PropertyFactory.getProp;for(nt=0;nt<rt;nt+=1)it=this._textData.a[nt],this._animatorsData[nt]=new TextAnimatorDataProperty(this._elem,it,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:st(this._elem,this._textData.p.a,0,0,this),f:st(this._elem,this._textData.p.f,0,0,this),l:st(this._elem,this._textData.p.l,0,0,this),r:st(this._elem,this._textData.p.r,0,0,this),p:st(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=st(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(nt,rt){if(this.lettersChangedFlag=rt,!(!this._mdf&&!this._isFirstFrame&&!rt&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var it=this._moreOptions.alignment.v,st=this._animatorsData,lt=this._textData,ct=this.mHelper,ut=this._renderType,dt=this.renderedLetters.length,ht,ft,pt,mt,gt=nt.l,xt,yt,vt,St,wt,Et,Rt,Tt,It,At,Dt,jt,Ft,Lt,Mt;if(this._hasMaskedPath){if(Mt=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Ot=Mt.v;this._pathData.r.v&&(Ot=Ot.reverse()),xt={tLength:0,segments:[]},mt=Ot._length-1;var Nt;for(jt=0,pt=0;pt<mt;pt+=1)Nt=bez.buildBezierData(Ot.v[pt],Ot.v[pt+1],[Ot.o[pt][0]-Ot.v[pt][0],Ot.o[pt][1]-Ot.v[pt][1]],[Ot.i[pt+1][0]-Ot.v[pt+1][0],Ot.i[pt+1][1]-Ot.v[pt+1][1]]),xt.tLength+=Nt.segmentLength,xt.segments.push(Nt),jt+=Nt.segmentLength;pt=mt,Mt.v.c&&(Nt=bez.buildBezierData(Ot.v[pt],Ot.v[0],[Ot.o[pt][0]-Ot.v[pt][0],Ot.o[pt][1]-Ot.v[pt][1]],[Ot.i[0][0]-Ot.v[0][0],Ot.i[0][1]-Ot.v[0][1]]),xt.tLength+=Nt.segmentLength,xt.segments.push(Nt),jt+=Nt.segmentLength),this._pathData.pi=xt}if(xt=this._pathData.pi,yt=this._pathData.f.v,Rt=0,Et=1,St=0,wt=!0,At=xt.segments,yt<0&&Mt.v.c)for(xt.tLength<Math.abs(yt)&&(yt=-Math.abs(yt)%xt.tLength),Rt=At.length-1,It=At[Rt].points,Et=It.length-1;yt<0;)yt+=It[Et].partialLength,Et-=1,Et<0&&(Rt-=1,It=At[Rt].points,Et=It.length-1);It=At[Rt].points,Tt=It[Et-1],vt=It[Et],Dt=vt.partialLength}mt=gt.length,ht=0,ft=0;var $t=nt.finalSize*1.2*.714,Vt=!0,Ut,zt,Bt,Ht,Gt;Ht=st.length;var Xt,Zt=-1,hr,nr,ir,yr=yt,Cr=Rt,Sr=Et,xr=-1,gr,_r,fr,Nr,Tr,Hr,Vr,mn,tn="",er=this.defaultPropsArray,tr;if(nt.j===2||nt.j===1){var vr=0,Fr=0,Kr=nt.j===2?-.5:-1,qr=0,pn=!0;for(pt=0;pt<mt;pt+=1)if(gt[pt].n){for(vr&&(vr+=Fr);qr<pt;)gt[qr].animatorJustifyOffset=vr,qr+=1;vr=0,pn=!0}else{for(Bt=0;Bt<Ht;Bt+=1)Ut=st[Bt].a,Ut.t.propType&&(pn&&nt.j===2&&(Fr+=Ut.t.v*Kr),zt=st[Bt].s,Xt=zt.getMult(gt[pt].anIndexes[Bt],lt.a[Bt].s.totalChars),Xt.length?vr+=Ut.t.v*Xt[0]*Kr:vr+=Ut.t.v*Xt*Kr);pn=!1}for(vr&&(vr+=Fr);qr<pt;)gt[qr].animatorJustifyOffset=vr,qr+=1}for(pt=0;pt<mt;pt+=1){if(ct.reset(),gr=1,gt[pt].n)ht=0,ft+=nt.yOffset,ft+=Vt?1:0,yt=yr,Vt=!1,this._hasMaskedPath&&(Rt=Cr,Et=Sr,It=At[Rt].points,Tt=It[Et-1],vt=It[Et],Dt=vt.partialLength,St=0),tn="",mn="",Hr="",tr="",er=this.defaultPropsArray;else{if(this._hasMaskedPath){if(xr!==gt[pt].line){switch(nt.j){case 1:yt+=jt-nt.lineWidths[gt[pt].line];break;case 2:yt+=(jt-nt.lineWidths[gt[pt].line])/2;break}xr=gt[pt].line}Zt!==gt[pt].ind&&(gt[Zt]&&(yt+=gt[Zt].extra),yt+=gt[pt].an/2,Zt=gt[pt].ind),yt+=it[0]*gt[pt].an*.005;var En=0;for(Bt=0;Bt<Ht;Bt+=1)Ut=st[Bt].a,Ut.p.propType&&(zt=st[Bt].s,Xt=zt.getMult(gt[pt].anIndexes[Bt],lt.a[Bt].s.totalChars),Xt.length?En+=Ut.p.v[0]*Xt[0]:En+=Ut.p.v[0]*Xt),Ut.a.propType&&(zt=st[Bt].s,Xt=zt.getMult(gt[pt].anIndexes[Bt],lt.a[Bt].s.totalChars),Xt.length?En+=Ut.a.v[0]*Xt[0]:En+=Ut.a.v[0]*Xt);for(wt=!0,this._pathData.a.v&&(yt=gt[0].an*.5+(jt-this._pathData.f.v-gt[0].an*.5-gt[gt.length-1].an*.5)*Zt/(mt-1),yt+=this._pathData.f.v);wt;)St+Dt>=yt+En||!It?(Ft=(yt+En-St)/vt.partialLength,nr=Tt.point[0]+(vt.point[0]-Tt.point[0])*Ft,ir=Tt.point[1]+(vt.point[1]-Tt.point[1])*Ft,ct.translate(-it[0]*gt[pt].an*.005,-(it[1]*$t)*.01),wt=!1):It&&(St+=vt.partialLength,Et+=1,Et>=It.length&&(Et=0,Rt+=1,At[Rt]?It=At[Rt].points:Mt.v.c?(Et=0,Rt=0,It=At[Rt].points):(St-=vt.partialLength,It=null)),It&&(Tt=vt,vt=It[Et],Dt=vt.partialLength));hr=gt[pt].an/2-gt[pt].add,ct.translate(-hr,0,0)}else hr=gt[pt].an/2-gt[pt].add,ct.translate(-hr,0,0),ct.translate(-it[0]*gt[pt].an*.005,-it[1]*$t*.01,0);for(Bt=0;Bt<Ht;Bt+=1)Ut=st[Bt].a,Ut.t.propType&&(zt=st[Bt].s,Xt=zt.getMult(gt[pt].anIndexes[Bt],lt.a[Bt].s.totalChars),(ht!==0||nt.j!==0)&&(this._hasMaskedPath?Xt.length?yt+=Ut.t.v*Xt[0]:yt+=Ut.t.v*Xt:Xt.length?ht+=Ut.t.v*Xt[0]:ht+=Ut.t.v*Xt));for(nt.strokeWidthAnim&&(fr=nt.sw||0),nt.strokeColorAnim&&(nt.sc?_r=[nt.sc[0],nt.sc[1],nt.sc[2]]:_r=[0,0,0]),nt.fillColorAnim&&nt.fc&&(Nr=[nt.fc[0],nt.fc[1],nt.fc[2]]),Bt=0;Bt<Ht;Bt+=1)Ut=st[Bt].a,Ut.a.propType&&(zt=st[Bt].s,Xt=zt.getMult(gt[pt].anIndexes[Bt],lt.a[Bt].s.totalChars),Xt.length?ct.translate(-Ut.a.v[0]*Xt[0],-Ut.a.v[1]*Xt[1],Ut.a.v[2]*Xt[2]):ct.translate(-Ut.a.v[0]*Xt,-Ut.a.v[1]*Xt,Ut.a.v[2]*Xt));for(Bt=0;Bt<Ht;Bt+=1)Ut=st[Bt].a,Ut.s.propType&&(zt=st[Bt].s,Xt=zt.getMult(gt[pt].anIndexes[Bt],lt.a[Bt].s.totalChars),Xt.length?ct.scale(1+(Ut.s.v[0]-1)*Xt[0],1+(Ut.s.v[1]-1)*Xt[1],1):ct.scale(1+(Ut.s.v[0]-1)*Xt,1+(Ut.s.v[1]-1)*Xt,1));for(Bt=0;Bt<Ht;Bt+=1){if(Ut=st[Bt].a,zt=st[Bt].s,Xt=zt.getMult(gt[pt].anIndexes[Bt],lt.a[Bt].s.totalChars),Ut.sk.propType&&(Xt.length?ct.skewFromAxis(-Ut.sk.v*Xt[0],Ut.sa.v*Xt[1]):ct.skewFromAxis(-Ut.sk.v*Xt,Ut.sa.v*Xt)),Ut.r.propType&&(Xt.length?ct.rotateZ(-Ut.r.v*Xt[2]):ct.rotateZ(-Ut.r.v*Xt)),Ut.ry.propType&&(Xt.length?ct.rotateY(Ut.ry.v*Xt[1]):ct.rotateY(Ut.ry.v*Xt)),Ut.rx.propType&&(Xt.length?ct.rotateX(Ut.rx.v*Xt[0]):ct.rotateX(Ut.rx.v*Xt)),Ut.o.propType&&(Xt.length?gr+=(Ut.o.v*Xt[0]-gr)*Xt[0]:gr+=(Ut.o.v*Xt-gr)*Xt),nt.strokeWidthAnim&&Ut.sw.propType&&(Xt.length?fr+=Ut.sw.v*Xt[0]:fr+=Ut.sw.v*Xt),nt.strokeColorAnim&&Ut.sc.propType)for(Tr=0;Tr<3;Tr+=1)Xt.length?_r[Tr]+=(Ut.sc.v[Tr]-_r[Tr])*Xt[0]:_r[Tr]+=(Ut.sc.v[Tr]-_r[Tr])*Xt;if(nt.fillColorAnim&&nt.fc){if(Ut.fc.propType)for(Tr=0;Tr<3;Tr+=1)Xt.length?Nr[Tr]+=(Ut.fc.v[Tr]-Nr[Tr])*Xt[0]:Nr[Tr]+=(Ut.fc.v[Tr]-Nr[Tr])*Xt;Ut.fh.propType&&(Xt.length?Nr=addHueToRGB(Nr,Ut.fh.v*Xt[0]):Nr=addHueToRGB(Nr,Ut.fh.v*Xt)),Ut.fs.propType&&(Xt.length?Nr=addSaturationToRGB(Nr,Ut.fs.v*Xt[0]):Nr=addSaturationToRGB(Nr,Ut.fs.v*Xt)),Ut.fb.propType&&(Xt.length?Nr=addBrightnessToRGB(Nr,Ut.fb.v*Xt[0]):Nr=addBrightnessToRGB(Nr,Ut.fb.v*Xt))}}for(Bt=0;Bt<Ht;Bt+=1)Ut=st[Bt].a,Ut.p.propType&&(zt=st[Bt].s,Xt=zt.getMult(gt[pt].anIndexes[Bt],lt.a[Bt].s.totalChars),this._hasMaskedPath?Xt.length?ct.translate(0,Ut.p.v[1]*Xt[0],-Ut.p.v[2]*Xt[1]):ct.translate(0,Ut.p.v[1]*Xt,-Ut.p.v[2]*Xt):Xt.length?ct.translate(Ut.p.v[0]*Xt[0],Ut.p.v[1]*Xt[1],-Ut.p.v[2]*Xt[2]):ct.translate(Ut.p.v[0]*Xt,Ut.p.v[1]*Xt,-Ut.p.v[2]*Xt));if(nt.strokeWidthAnim&&(Hr=fr<0?0:fr),nt.strokeColorAnim&&(Vr="rgb("+Math.round(_r[0]*255)+","+Math.round(_r[1]*255)+","+Math.round(_r[2]*255)+")"),nt.fillColorAnim&&nt.fc&&(mn="rgb("+Math.round(Nr[0]*255)+","+Math.round(Nr[1]*255)+","+Math.round(Nr[2]*255)+")"),this._hasMaskedPath){if(ct.translate(0,-nt.ls),ct.translate(0,it[1]*$t*.01+ft,0),this._pathData.p.v){Lt=(vt.point[1]-Tt.point[1])/(vt.point[0]-Tt.point[0]);var Rn=Math.atan(Lt)*180/Math.PI;vt.point[0]<Tt.point[0]&&(Rn+=180),ct.rotate(-Rn*Math.PI/180)}ct.translate(nr,ir,0),yt-=it[0]*gt[pt].an*.005,gt[pt+1]&&Zt!==gt[pt+1].ind&&(yt+=gt[pt].an/2,yt+=nt.tr*.001*nt.finalSize)}else{switch(ct.translate(ht,ft,0),nt.ps&&ct.translate(nt.ps[0],nt.ps[1]+nt.ascent,0),nt.j){case 1:ct.translate(gt[pt].animatorJustifyOffset+nt.justifyOffset+(nt.boxWidth-nt.lineWidths[gt[pt].line]),0,0);break;case 2:ct.translate(gt[pt].animatorJustifyOffset+nt.justifyOffset+(nt.boxWidth-nt.lineWidths[gt[pt].line])/2,0,0);break}ct.translate(0,-nt.ls),ct.translate(hr,0,0),ct.translate(it[0]*gt[pt].an*.005,it[1]*$t*.01,0),ht+=gt[pt].l+nt.tr*.001*nt.finalSize}ut==="html"?tn=ct.toCSS():ut==="svg"?tn=ct.to2dCSS():er=[ct.props[0],ct.props[1],ct.props[2],ct.props[3],ct.props[4],ct.props[5],ct.props[6],ct.props[7],ct.props[8],ct.props[9],ct.props[10],ct.props[11],ct.props[12],ct.props[13],ct.props[14],ct.props[15]],tr=gr}dt<=pt?(Gt=new LetterProps(tr,Hr,Vr,mn,tn,er),this.renderedLetters.push(Gt),dt+=1,this.lettersChangedFlag=!0):(Gt=this.renderedLetters[pt],this.lettersChangedFlag=Gt.update(tr,Hr,Vr,mn,tn,er)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(nt,rt,it){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(nt,rt,it),this.textProperty=new TextProperty(this,nt.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(nt.t,this.renderType,this),this.initTransform(nt,rt,it),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(nt){this._mdf=!1,this.prepareRenderableFrame(nt),this.prepareProperties(nt,this.isInRange)},ITextElement.prototype.createPathShape=function(nt,rt){var it,st=rt.length,lt,ct="";for(it=0;it<st;it+=1)rt[it].ty==="sh"&&(lt=rt[it].ks.k,ct+=buildShapeString(lt,lt.i.length,!0,nt));return ct},ITextElement.prototype.updateDocumentData=function(nt,rt){this.textProperty.updateDocumentData(nt,rt)},ITextElement.prototype.canResizeFont=function(nt){this.textProperty.canResizeFont(nt)},ITextElement.prototype.setMinimumFontSize=function(nt){this.textProperty.setMinimumFontSize(nt)},ITextElement.prototype.applyTextPropertiesToMatrix=function(nt,rt,it,st,lt){switch(nt.ps&&rt.translate(nt.ps[0],nt.ps[1]+nt.ascent,0),rt.translate(0,-nt.ls,0),nt.j){case 1:rt.translate(nt.justifyOffset+(nt.boxWidth-nt.lineWidths[it]),0,0);break;case 2:rt.translate(nt.justifyOffset+(nt.boxWidth-nt.lineWidths[it])/2,0,0);break}rt.translate(st,lt,0)},ITextElement.prototype.buildColor=function(nt){return"rgb("+Math.round(nt[0]*255)+","+Math.round(nt[1]*255)+","+Math.round(nt[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(nt,rt,it){this.textSpans=[],this.renderType="svg",this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(nt){for(var rt=0,it=nt.length,st=[],lt="";rt<it;)nt[rt]==="\r"||nt[rt]===""?(st.push(lt),lt=""):lt+=nt[rt],rt+=1;return st.push(lt),st},SVGTextLottieElement.prototype.buildShapeData=function(nt,rt){if(nt.shapes&&nt.shapes.length){var it=nt.shapes[0];if(it.it){var st=it.it[it.it.length-1];st.s&&(st.s.k[0]=rt,st.s.k[1]=rt)}}return nt},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var nt,rt,it=this.textProperty.currentData;this.renderedLetters=createSizedArray(it?it.l.length:0),it.fc?this.layerElement.setAttribute("fill",this.buildColor(it.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),it.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(it.sc)),this.layerElement.setAttribute("stroke-width",it.sw)),this.layerElement.setAttribute("font-size",it.finalSize);var st=this.globalData.fontManager.getFontByName(it.f);if(st.fClass)this.layerElement.setAttribute("class",st.fClass);else{this.layerElement.setAttribute("font-family",st.fFamily);var lt=it.fWeight,ct=it.fStyle;this.layerElement.setAttribute("font-style",ct),this.layerElement.setAttribute("font-weight",lt)}this.layerElement.setAttribute("aria-label",it.t);var ut=it.l||[],dt=!!this.globalData.fontManager.chars;rt=ut.length;var ht,ft=this.mHelper,pt="",mt=this.data.singleShape,gt=0,xt=0,yt=!0,vt=it.tr*.001*it.finalSize;if(mt&&!dt&&!it.sz){var St=this.textContainer,wt="start";switch(it.j){case 1:wt="end";break;case 2:wt="middle";break;default:wt="start";break}St.setAttribute("text-anchor",wt),St.setAttribute("letter-spacing",vt);var Et=this.buildTextContents(it.finalText);for(rt=Et.length,xt=it.ps?it.ps[1]+it.ascent:0,nt=0;nt<rt;nt+=1)ht=this.textSpans[nt].span||createNS("tspan"),ht.textContent=Et[nt],ht.setAttribute("x",0),ht.setAttribute("y",xt),ht.style.display="inherit",St.appendChild(ht),this.textSpans[nt]||(this.textSpans[nt]={span:null,glyph:null}),this.textSpans[nt].span=ht,xt+=it.finalLineHeight;this.layerElement.appendChild(St)}else{var Rt=this.textSpans.length,Tt;for(nt=0;nt<rt;nt+=1){if(this.textSpans[nt]||(this.textSpans[nt]={span:null,childSpan:null,glyph:null}),!dt||!mt||nt===0){if(ht=Rt>nt?this.textSpans[nt].span:createNS(dt?"g":"text"),Rt<=nt){if(ht.setAttribute("stroke-linecap","butt"),ht.setAttribute("stroke-linejoin","round"),ht.setAttribute("stroke-miterlimit","4"),this.textSpans[nt].span=ht,dt){var It=createNS("g");ht.appendChild(It),this.textSpans[nt].childSpan=It}this.textSpans[nt].span=ht,this.layerElement.appendChild(ht)}ht.style.display="inherit"}if(ft.reset(),mt&&(ut[nt].n&&(gt=-vt,xt+=it.yOffset,xt+=yt?1:0,yt=!1),this.applyTextPropertiesToMatrix(it,ft,ut[nt].line,gt,xt),gt+=ut[nt].l||0,gt+=vt),dt){Tt=this.globalData.fontManager.getCharData(it.finalText[nt],st.fStyle,this.globalData.fontManager.getFontByName(it.f).fFamily);var At;if(Tt.t===1)At=new SVGCompElement(Tt.data,this.globalData,this);else{var Dt=emptyShapeData;Tt.data&&Tt.data.shapes&&(Dt=this.buildShapeData(Tt.data,it.finalSize)),At=new SVGShapeElement(Dt,this.globalData,this)}if(this.textSpans[nt].glyph){var jt=this.textSpans[nt].glyph;this.textSpans[nt].childSpan.removeChild(jt.layerElement),jt.destroy()}this.textSpans[nt].glyph=At,At._debug=!0,At.prepareFrame(0),At.renderFrame(),this.textSpans[nt].childSpan.appendChild(At.layerElement),Tt.t===1&&this.textSpans[nt].childSpan.setAttribute("transform","scale("+it.finalSize/100+","+it.finalSize/100+")")}else mt&&ht.setAttribute("transform","translate("+ft.props[12]+","+ft.props[13]+")"),ht.textContent=ut[nt].val,ht.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}mt&&ht&&ht.setAttribute("d",pt)}for(;nt<this.textSpans.length;)this.textSpans[nt].span.style.display="none",nt+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var nt=this.layerElement.getBBox();this.bbox={top:nt.y,left:nt.x,width:nt.width,height:nt.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var nt,rt=this.textSpans.length,it;for(this.renderedFrame=this.comp.renderedFrame,nt=0;nt<rt;nt+=1)it=this.textSpans[nt].glyph,it&&(it.prepareFrame(this.comp.renderedFrame-this.data.st),it._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var nt,rt,it=this.textAnimator.renderedLetters,st=this.textProperty.currentData.l;rt=st.length;var lt,ct,ut;for(nt=0;nt<rt;nt+=1)st[nt].n||(lt=it[nt],ct=this.textSpans[nt].span,ut=this.textSpans[nt].glyph,ut&&ut.renderFrame(),lt._mdf.m&&ct.setAttribute("transform",lt.m),lt._mdf.o&&ct.setAttribute("opacity",lt.o),lt._mdf.sw&&ct.setAttribute("stroke-width",lt.sw),lt._mdf.sc&&ct.setAttribute("stroke",lt.sc),lt._mdf.fc&&ct.setAttribute("fill",lt.fc))}};function ISolidElement(nt,rt,it){this.initElement(nt,rt,it)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var nt=createNS("rect");nt.setAttribute("width",this.data.sw),nt.setAttribute("height",this.data.sh),nt.setAttribute("fill",this.data.sc),this.layerElement.appendChild(nt)};function NullElement(nt,rt,it){this.initFrame(),this.initBaseData(nt,rt,it),this.initFrame(),this.initTransform(nt,rt,it),this.initHierarchy()}NullElement.prototype.prepareFrame=function(nt){this.prepareProperties(nt,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(nt){return new NullElement(nt,this.globalData,this)},SVGRendererBase.prototype.createShape=function(nt){return new SVGShapeElement(nt,this.globalData,this)},SVGRendererBase.prototype.createText=function(nt){return new SVGTextLottieElement(nt,this.globalData,this)},SVGRendererBase.prototype.createImage=function(nt){return new IImageElement(nt,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(nt){return new ISolidElement(nt,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(nt){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+nt.w+" "+nt.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",nt.w),this.svgElement.setAttribute("height",nt.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var rt=this.globalData.defs;this.setupGlobalData(nt,rt),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=nt;var it=createNS("clipPath"),st=createNS("rect");st.setAttribute("width",nt.w),st.setAttribute("height",nt.h),st.setAttribute("x",0),st.setAttribute("y",0);var lt=createElementID();it.setAttribute("id",lt),it.appendChild(st),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+lt+")"),rt.appendChild(it),this.layers=nt.layers,this.elements=createSizedArray(nt.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var nt,rt=this.layers?this.layers.length:0;for(nt=0;nt<rt;nt+=1)this.elements[nt]&&this.elements[nt].destroy&&this.elements[nt].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(nt){var rt=0,it=this.layers.length;for(rt=0;rt<it;rt+=1)if(this.layers[rt].ind===nt)return rt;return-1},SVGRendererBase.prototype.buildItem=function(nt){var rt=this.elements;if(!(rt[nt]||this.layers[nt].ty===99)){rt[nt]=!0;var it=this.createItem(this.layers[nt]);if(rt[nt]=it,getExpressionsPlugin()&&(this.layers[nt].ty===0&&this.globalData.projectInterface.registerComposition(it),it.initExpressions()),this.appendElementInPos(it,nt),this.layers[nt].tt){var st="tp"in this.layers[nt]?this.findIndexByInd(this.layers[nt].tp):nt-1;if(st===-1)return;if(!this.elements[st]||this.elements[st]===!0)this.buildItem(st),this.addPendingElement(it);else{var lt=rt[st],ct=lt.getMatte(this.layers[nt].tt);it.setMatte(ct)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var nt=this.pendingElements.pop();if(nt.checkParenting(),nt.data.tt)for(var rt=0,it=this.elements.length;rt<it;){if(this.elements[rt]===nt){var st="tp"in nt.data?this.findIndexByInd(nt.data.tp):rt-1,lt=this.elements[st],ct=lt.getMatte(this.layers[rt].tt);nt.setMatte(ct);break}rt+=1}}},SVGRendererBase.prototype.renderFrame=function(nt){if(!(this.renderedFrame===nt||this.destroyed)){nt===null?nt=this.renderedFrame:this.renderedFrame=nt,this.globalData.frameNum=nt,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=nt,this.globalData._mdf=!1;var rt,it=this.layers.length;for(this.completeLayers||this.checkLayers(nt),rt=it-1;rt>=0;rt-=1)(this.completeLayers||this.elements[rt])&&this.elements[rt].prepareFrame(nt-this.layers[rt].st);if(this.globalData._mdf)for(rt=0;rt<it;rt+=1)(this.completeLayers||this.elements[rt])&&this.elements[rt].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(nt,rt){var it=nt.getBaseElement();if(it){for(var st=0,lt;st<rt;)this.elements[st]&&this.elements[st]!==!0&&this.elements[st].getBaseElement()&&(lt=this.elements[st].getBaseElement()),st+=1;lt?this.layerElement.insertBefore(it,lt):this.layerElement.appendChild(it)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(nt,rt,it){this.initFrame(),this.initBaseData(nt,rt,it),this.initTransform(nt,rt,it),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!rt.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(nt){if(this._mdf=!1,this.prepareRenderableFrame(nt),this.prepareProperties(nt,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=nt/this.data.sr;else{var rt=this.tm.v;rt===this.data.op&&(rt=this.data.op-1),this.renderedFrame=rt}var it,st=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),it=st-1;it>=0;it-=1)(this.completeLayers||this.elements[it])&&(this.elements[it].prepareFrame(this.renderedFrame-this.layers[it].st),this.elements[it]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var nt,rt=this.layers.length;for(nt=0;nt<rt;nt+=1)(this.completeLayers||this.elements[nt])&&this.elements[nt].renderFrame()},ICompElement.prototype.setElements=function(nt){this.elements=nt},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var nt,rt=this.layers.length;for(nt=0;nt<rt;nt+=1)this.elements[nt]&&this.elements[nt].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(nt,rt,it){this.layers=nt.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(nt,rt,it),this.tm=nt.tm?PropertyFactory.getProp(this,nt.tm,0,rt.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(nt){return new SVGCompElement(nt,this.globalData,this)};function SVGRenderer(nt,rt){this.animationItem=nt,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var it="";if(rt&&rt.title){var st=createNS("title"),lt=createElementID();st.setAttribute("id",lt),st.textContent=rt.title,this.svgElement.appendChild(st),it+=lt}if(rt&&rt.description){var ct=createNS("desc"),ut=createElementID();ct.setAttribute("id",ut),ct.textContent=rt.description,this.svgElement.appendChild(ct),it+=" "+ut}it&&this.svgElement.setAttribute("aria-labelledby",it);var dt=createNS("defs");this.svgElement.appendChild(dt);var ht=createNS("g");this.svgElement.appendChild(ht),this.layerElement=ht,this.renderConfig={preserveAspectRatio:rt&&rt.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:rt&&rt.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:rt&&rt.contentVisibility||"visible",progressiveLoad:rt&&rt.progressiveLoad||!1,hideOnTransparent:!(rt&&rt.hideOnTransparent===!1),viewBoxOnly:rt&&rt.viewBoxOnly||!1,viewBoxSize:rt&&rt.viewBoxSize||!1,className:rt&&rt.className||"",id:rt&&rt.id||"",focusable:rt&&rt.focusable,filterSize:{width:rt&&rt.filterSize&&rt.filterSize.width||"100%",height:rt&&rt.filterSize&&rt.filterSize.height||"100%",x:rt&&rt.filterSize&&rt.filterSize.x||"0%",y:rt&&rt.filterSize&&rt.filterSize.y||"0%"},width:rt&&rt.width,height:rt&&rt.height,runExpressions:!rt||rt.runExpressions===void 0||rt.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:dt,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(nt){return new SVGCompElement(nt,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(rt){var it,st=rt.length,lt="_";for(it=0;it<st;it+=1)lt+=rt[it].transform.key+"_";var ct=this.sequences[lt];return ct||(ct={transforms:[].concat(rt),finalTransform:new Matrix,_mdf:!1},this.sequences[lt]=ct,this.sequenceList.push(ct)),ct},processSequence:function(rt,it){for(var st=0,lt=rt.transforms.length,ct=it;st<lt&&!it;){if(rt.transforms[st].transform.mProps._mdf){ct=!0;break}st+=1}if(ct)for(rt.finalTransform.reset(),st=lt-1;st>=0;st-=1)rt.finalTransform.multiply(rt.transforms[st].transform.mProps.v);rt._mdf=ct},processSequences:function(rt){var it,st=this.sequenceList.length;for(it=0;it<st;it+=1)this.processSequence(this.sequenceList[it],rt)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var rt="__lottie_element_luma_buffer",it=null,st=null,lt=null;function ct(){var ht=createNS("svg"),ft=createNS("filter"),pt=createNS("feColorMatrix");return ft.setAttribute("id",rt),pt.setAttribute("type","matrix"),pt.setAttribute("color-interpolation-filters","sRGB"),pt.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),ft.appendChild(pt),ht.appendChild(ft),ht.setAttribute("id",rt+"_svg"),featureSupport.svgLumaHidden&&(ht.style.display="none"),ht}function ut(){it||(lt=ct(),document.body.appendChild(lt),it=createTag("canvas"),st=it.getContext("2d"),st.filter="url(#"+rt+")",st.fillStyle="rgba(0,0,0,0)",st.fillRect(0,0,1,1))}function dt(ht){return it||ut(),it.width=ht.width,it.height=ht.height,st.filter="url(#"+rt+")",it}return{load:ut,get:dt}};function createCanvas(nt,rt){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(nt,rt);var it=createTag("canvas");return it.width=nt,it.height=rt,it}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(nt){var rt,it=nt.data.ef?nt.data.ef.length:0;this.filters=[];var st;for(rt=0;rt<it;rt+=1){st=null;var lt=nt.data.ef[rt].ty;if(registeredEffects[lt]){var ct=registeredEffects[lt].effect;st=new ct(nt.effectsManager.effectElements[rt],nt)}st&&this.filters.push(st)}this.filters.length&&nt.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(nt){var rt,it=this.filters.length;for(rt=0;rt<it;rt+=1)this.filters[rt].renderFrame(nt)},CVEffects.prototype.getEffects=function(nt){var rt,it=this.filters.length,st=[];for(rt=0;rt<it;rt+=1)this.filters[rt].type===nt&&st.push(this.filters[rt]);return st};function registerEffect(nt,rt){registeredEffects[nt]={effect:rt}}function CVMaskElement(nt,rt){this.data=nt,this.element=rt,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var it,st=this.masksProperties.length,lt=!1;for(it=0;it<st;it+=1)this.masksProperties[it].mode!=="n"&&(lt=!0),this.viewData[it]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[it],3);this.hasMasks=lt,lt&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var nt=this.element.finalTransform.mat,rt=this.element.canvasContext,it,st=this.masksProperties.length,lt,ct,ut;for(rt.beginPath(),it=0;it<st;it+=1)if(this.masksProperties[it].mode!=="n"){this.masksProperties[it].inv&&(rt.moveTo(0,0),rt.lineTo(this.element.globalData.compSize.w,0),rt.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),rt.lineTo(0,this.element.globalData.compSize.h),rt.lineTo(0,0)),ut=this.viewData[it].v,lt=nt.applyToPointArray(ut.v[0][0],ut.v[0][1],0),rt.moveTo(lt[0],lt[1]);var dt,ht=ut._length;for(dt=1;dt<ht;dt+=1)ct=nt.applyToTriplePoints(ut.o[dt-1],ut.i[dt],ut.v[dt]),rt.bezierCurveTo(ct[0],ct[1],ct[2],ct[3],ct[4],ct[5]);ct=nt.applyToTriplePoints(ut.o[dt-1],ut.i[0],ut.v[0]),rt.bezierCurveTo(ct[0],ct[1],ct[2],ct[3],ct[4],ct[5])}this.element.globalData.renderer.save(!0),rt.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var rt=this.globalData.canvasContext,it=assetLoader.createCanvas(rt.canvas.width,rt.canvas.height);this.buffers.push(it);var st=assetLoader.createCanvas(rt.canvas.width,rt.canvas.height);this.buffers.push(st),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var rt=this.globalData;if(rt.blendMode!==this.data.bm){rt.blendMode=this.data.bm;var it=getBlendMode(this.data.bm);rt.canvasContext.globalCompositeOperation=it}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(rt){rt.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var rt=this.buffers[0],it=rt.getContext("2d");this.clearCanvas(it),it.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var rt=this.buffers[1],it=rt.getContext("2d");this.clearCanvas(it),it.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var st=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(st.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var lt=assetLoader.getLumaCanvas(this.canvasContext.canvas),ct=lt.getContext("2d");ct.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(lt,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(rt,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(rt){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!rt)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var it=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(it),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(it),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(nt,rt,it,st){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var lt=4;rt.ty==="rc"?lt=5:rt.ty==="el"?lt=6:rt.ty==="sr"&&(lt=7),this.sh=ShapePropertyFactory.getShapeProp(nt,rt,lt,nt);var ct,ut=it.length,dt;for(ct=0;ct<ut;ct+=1)it[ct].closed||(dt={transforms:st.addTransformSequence(it[ct].transforms),trNodes:[]},this.styledShapes.push(dt),it[ct].elements.push(dt))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(nt,rt,it){this.shapes=[],this.shapesData=nt.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(nt,rt){var it={data:nt,type:nt.ty,preTransforms:this.transformsManager.addTransformSequence(rt),transforms:[],elements:[],closed:nt.hd===!0},st={};if(nt.ty==="fl"||nt.ty==="st"?(st.c=PropertyFactory.getProp(this,nt.c,1,255,this),st.c.k||(it.co="rgb("+bmFloor(st.c.v[0])+","+bmFloor(st.c.v[1])+","+bmFloor(st.c.v[2])+")")):(nt.ty==="gf"||nt.ty==="gs")&&(st.s=PropertyFactory.getProp(this,nt.s,1,null,this),st.e=PropertyFactory.getProp(this,nt.e,1,null,this),st.h=PropertyFactory.getProp(this,nt.h||{k:0},0,.01,this),st.a=PropertyFactory.getProp(this,nt.a||{k:0},0,degToRads,this),st.g=new GradientProperty(this,nt.g,this)),st.o=PropertyFactory.getProp(this,nt.o,0,.01,this),nt.ty==="st"||nt.ty==="gs"){if(it.lc=lineCapEnum[nt.lc||2],it.lj=lineJoinEnum[nt.lj||2],nt.lj==1&&(it.ml=nt.ml),st.w=PropertyFactory.getProp(this,nt.w,0,null,this),st.w.k||(it.wi=st.w.v),nt.d){var lt=new DashProperty(this,nt.d,"canvas",this);st.d=lt,st.d.k||(it.da=st.d.dashArray,it.do=st.d.dashoffset[0])}}else it.r=nt.r===2?"evenodd":"nonzero";return this.stylesList.push(it),st.style=it,st},CVShapeElement.prototype.createGroupElement=function(){var nt={it:[],prevViewData:[]};return nt},CVShapeElement.prototype.createTransformElement=function(nt){var rt={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,nt.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,nt,this)}};return rt},CVShapeElement.prototype.createShapeElement=function(nt){var rt=new CVShapeData(this,nt,this.stylesList,this.transformsManager);return this.shapes.push(rt),this.addShapeToModifiers(rt),rt},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var nt,rt=this.itemsData.length;for(nt=0;nt<rt;nt+=1)this.prevViewData[nt]=this.itemsData[nt];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),rt=this.dynamicProperties.length,nt=0;nt<rt;nt+=1)this.dynamicProperties[nt].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(nt){var rt,it=this.stylesList.length;for(rt=0;rt<it;rt+=1)this.stylesList[rt].closed||this.stylesList[rt].transforms.push(nt)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var nt,rt=this.stylesList.length;for(nt=0;nt<rt;nt+=1)this.stylesList[nt].closed||this.stylesList[nt].transforms.pop()},CVShapeElement.prototype.closeStyles=function(nt){var rt,it=nt.length;for(rt=0;rt<it;rt+=1)nt[rt].closed=!0},CVShapeElement.prototype.searchShapes=function(nt,rt,it,st,lt){var ct,ut=nt.length-1,dt,ht,ft=[],pt=[],mt,gt,xt,yt=[].concat(lt);for(ct=ut;ct>=0;ct-=1){if(mt=this.searchProcessedElement(nt[ct]),mt?rt[ct]=it[mt-1]:nt[ct]._shouldRender=st,nt[ct].ty==="fl"||nt[ct].ty==="st"||nt[ct].ty==="gf"||nt[ct].ty==="gs")mt?rt[ct].style.closed=!1:rt[ct]=this.createStyleElement(nt[ct],yt),ft.push(rt[ct].style);else if(nt[ct].ty==="gr"){if(!mt)rt[ct]=this.createGroupElement(nt[ct]);else for(ht=rt[ct].it.length,dt=0;dt<ht;dt+=1)rt[ct].prevViewData[dt]=rt[ct].it[dt];this.searchShapes(nt[ct].it,rt[ct].it,rt[ct].prevViewData,st,yt)}else nt[ct].ty==="tr"?(mt||(xt=this.createTransformElement(nt[ct]),rt[ct]=xt),yt.push(rt[ct]),this.addTransformToStyleList(rt[ct])):nt[ct].ty==="sh"||nt[ct].ty==="rc"||nt[ct].ty==="el"||nt[ct].ty==="sr"?mt||(rt[ct]=this.createShapeElement(nt[ct])):nt[ct].ty==="tm"||nt[ct].ty==="rd"||nt[ct].ty==="pb"||nt[ct].ty==="zz"||nt[ct].ty==="op"?(mt?(gt=rt[ct],gt.closed=!1):(gt=ShapeModifiers.getModifier(nt[ct].ty),gt.init(this,nt[ct]),rt[ct]=gt,this.shapeModifiers.push(gt)),pt.push(gt)):nt[ct].ty==="rp"&&(mt?(gt=rt[ct],gt.closed=!0):(gt=ShapeModifiers.getModifier(nt[ct].ty),rt[ct]=gt,gt.init(this,nt,ct,rt),this.shapeModifiers.push(gt),st=!1),pt.push(gt));this.addProcessedElement(nt[ct],ct+1)}for(this.removeTransformFromStyleList(),this.closeStyles(ft),ut=pt.length,ct=0;ct<ut;ct+=1)pt[ct].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(nt,rt){(nt._opMdf||rt.op._mdf||this._isFirstFrame)&&(rt.opacity=nt.opacity,rt.opacity*=rt.op.v,rt._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var nt,rt=this.stylesList.length,it,st,lt,ct,ut,dt,ht=this.globalData.renderer,ft=this.globalData.canvasContext,pt,mt;for(nt=0;nt<rt;nt+=1)if(mt=this.stylesList[nt],pt=mt.type,!((pt==="st"||pt==="gs")&&mt.wi===0||!mt.data._shouldRender||mt.coOp===0||this.globalData.currentGlobalAlpha===0)){for(ht.save(),ut=mt.elements,pt==="st"||pt==="gs"?(ht.ctxStrokeStyle(pt==="st"?mt.co:mt.grd),ht.ctxLineWidth(mt.wi),ht.ctxLineCap(mt.lc),ht.ctxLineJoin(mt.lj),ht.ctxMiterLimit(mt.ml||0)):ht.ctxFillStyle(pt==="fl"?mt.co:mt.grd),ht.ctxOpacity(mt.coOp),pt!=="st"&&pt!=="gs"&&ft.beginPath(),ht.ctxTransform(mt.preTransforms.finalTransform.props),st=ut.length,it=0;it<st;it+=1){for((pt==="st"||pt==="gs")&&(ft.beginPath(),mt.da&&(ft.setLineDash(mt.da),ft.lineDashOffset=mt.do)),dt=ut[it].trNodes,ct=dt.length,lt=0;lt<ct;lt+=1)dt[lt].t==="m"?ft.moveTo(dt[lt].p[0],dt[lt].p[1]):dt[lt].t==="c"?ft.bezierCurveTo(dt[lt].pts[0],dt[lt].pts[1],dt[lt].pts[2],dt[lt].pts[3],dt[lt].pts[4],dt[lt].pts[5]):ft.closePath();(pt==="st"||pt==="gs")&&(ht.ctxStroke(),mt.da&&ft.setLineDash(this.dashResetter))}pt!=="st"&&pt!=="gs"&&this.globalData.renderer.ctxFill(mt.r),ht.restore()}},CVShapeElement.prototype.renderShape=function(nt,rt,it,st){var lt,ct=rt.length-1,ut;for(ut=nt,lt=ct;lt>=0;lt-=1)rt[lt].ty==="tr"?(ut=it[lt].transform,this.renderShapeTransform(nt,ut)):rt[lt].ty==="sh"||rt[lt].ty==="el"||rt[lt].ty==="rc"||rt[lt].ty==="sr"?this.renderPath(rt[lt],it[lt]):rt[lt].ty==="fl"?this.renderFill(rt[lt],it[lt],ut):rt[lt].ty==="st"?this.renderStroke(rt[lt],it[lt],ut):rt[lt].ty==="gf"||rt[lt].ty==="gs"?this.renderGradientFill(rt[lt],it[lt],ut):rt[lt].ty==="gr"?this.renderShape(ut,rt[lt].it,it[lt].it):rt[lt].ty;st&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(nt,rt){if(this._isFirstFrame||rt._mdf||nt.transforms._mdf){var it=nt.trNodes,st=rt.paths,lt,ct,ut,dt=st._length;it.length=0;var ht=nt.transforms.finalTransform;for(ut=0;ut<dt;ut+=1){var ft=st.shapes[ut];if(ft&&ft.v){for(ct=ft._length,lt=1;lt<ct;lt+=1)lt===1&&it.push({t:"m",p:ht.applyToPointArray(ft.v[0][0],ft.v[0][1],0)}),it.push({t:"c",pts:ht.applyToTriplePoints(ft.o[lt-1],ft.i[lt],ft.v[lt])});ct===1&&it.push({t:"m",p:ht.applyToPointArray(ft.v[0][0],ft.v[0][1],0)}),ft.c&&ct&&(it.push({t:"c",pts:ht.applyToTriplePoints(ft.o[lt-1],ft.i[0],ft.v[0])}),it.push({t:"z"}))}}nt.trNodes=it}},CVShapeElement.prototype.renderPath=function(nt,rt){if(nt.hd!==!0&&nt._shouldRender){var it,st=rt.styledShapes.length;for(it=0;it<st;it+=1)this.renderStyledShape(rt.styledShapes[it],rt.sh)}},CVShapeElement.prototype.renderFill=function(nt,rt,it){var st=rt.style;(rt.c._mdf||this._isFirstFrame)&&(st.co="rgb("+bmFloor(rt.c.v[0])+","+bmFloor(rt.c.v[1])+","+bmFloor(rt.c.v[2])+")"),(rt.o._mdf||it._opMdf||this._isFirstFrame)&&(st.coOp=rt.o.v*it.opacity)},CVShapeElement.prototype.renderGradientFill=function(nt,rt,it){var st=rt.style,lt;if(!st.grd||rt.g._mdf||rt.s._mdf||rt.e._mdf||nt.t!==1&&(rt.h._mdf||rt.a._mdf)){var ct=this.globalData.canvasContext,ut=rt.s.v,dt=rt.e.v;if(nt.t===1)lt=ct.createLinearGradient(ut[0],ut[1],dt[0],dt[1]);else{var ht=Math.sqrt(Math.pow(ut[0]-dt[0],2)+Math.pow(ut[1]-dt[1],2)),ft=Math.atan2(dt[1]-ut[1],dt[0]-ut[0]),pt=rt.h.v;pt>=1?pt=.99:pt<=-1&&(pt=-.99);var mt=ht*pt,gt=Math.cos(ft+rt.a.v)*mt+ut[0],xt=Math.sin(ft+rt.a.v)*mt+ut[1];lt=ct.createRadialGradient(gt,xt,0,ut[0],ut[1],ht)}var yt,vt=nt.g.p,St=rt.g.c,wt=1;for(yt=0;yt<vt;yt+=1)rt.g._hasOpacity&&rt.g._collapsable&&(wt=rt.g.o[yt*2+1]),lt.addColorStop(St[yt*4]/100,"rgba("+St[yt*4+1]+","+St[yt*4+2]+","+St[yt*4+3]+","+wt+")");st.grd=lt}st.coOp=rt.o.v*it.opacity},CVShapeElement.prototype.renderStroke=function(nt,rt,it){var st=rt.style,lt=rt.d;lt&&(lt._mdf||this._isFirstFrame)&&(st.da=lt.dashArray,st.do=lt.dashoffset[0]),(rt.c._mdf||this._isFirstFrame)&&(st.co="rgb("+bmFloor(rt.c.v[0])+","+bmFloor(rt.c.v[1])+","+bmFloor(rt.c.v[2])+")"),(rt.o._mdf||it._opMdf||this._isFirstFrame)&&(st.coOp=rt.o.v*it.opacity),(rt.w._mdf||this._isFirstFrame)&&(st.wi=rt.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(nt,rt,it){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var nt=this.textProperty.currentData;this.renderedLetters=createSizedArray(nt.l?nt.l.length:0);var rt=!1;nt.fc?(rt=!0,this.values.fill=this.buildColor(nt.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=rt;var it=!1;nt.sc&&(it=!0,this.values.stroke=this.buildColor(nt.sc),this.values.sWidth=nt.sw);var st=this.globalData.fontManager.getFontByName(nt.f),lt,ct,ut=nt.l,dt=this.mHelper;this.stroke=it,this.values.fValue=nt.finalSize+"px "+this.globalData.fontManager.getFontByName(nt.f).fFamily,ct=nt.finalText.length;var ht,ft,pt,mt,gt,xt,yt,vt,St,wt,Et=this.data.singleShape,Rt=nt.tr*.001*nt.finalSize,Tt=0,It=0,At=!0,Dt=0;for(lt=0;lt<ct;lt+=1){ht=this.globalData.fontManager.getCharData(nt.finalText[lt],st.fStyle,this.globalData.fontManager.getFontByName(nt.f).fFamily),ft=ht&&ht.data||{},dt.reset(),Et&&ut[lt].n&&(Tt=-Rt,It+=nt.yOffset,It+=At?1:0,At=!1),gt=ft.shapes?ft.shapes[0].it:[],yt=gt.length,dt.scale(nt.finalSize/100,nt.finalSize/100),Et&&this.applyTextPropertiesToMatrix(nt,dt,ut[lt].line,Tt,It),St=createSizedArray(yt-1);var jt=0;for(xt=0;xt<yt;xt+=1)if(gt[xt].ty==="sh"){for(mt=gt[xt].ks.k.i.length,vt=gt[xt].ks.k,wt=[],pt=1;pt<mt;pt+=1)pt===1&&wt.push(dt.applyToX(vt.v[0][0],vt.v[0][1],0),dt.applyToY(vt.v[0][0],vt.v[0][1],0)),wt.push(dt.applyToX(vt.o[pt-1][0],vt.o[pt-1][1],0),dt.applyToY(vt.o[pt-1][0],vt.o[pt-1][1],0),dt.applyToX(vt.i[pt][0],vt.i[pt][1],0),dt.applyToY(vt.i[pt][0],vt.i[pt][1],0),dt.applyToX(vt.v[pt][0],vt.v[pt][1],0),dt.applyToY(vt.v[pt][0],vt.v[pt][1],0));wt.push(dt.applyToX(vt.o[pt-1][0],vt.o[pt-1][1],0),dt.applyToY(vt.o[pt-1][0],vt.o[pt-1][1],0),dt.applyToX(vt.i[0][0],vt.i[0][1],0),dt.applyToY(vt.i[0][0],vt.i[0][1],0),dt.applyToX(vt.v[0][0],vt.v[0][1],0),dt.applyToY(vt.v[0][0],vt.v[0][1],0)),St[jt]=wt,jt+=1}Et&&(Tt+=ut[lt].l,Tt+=Rt),this.textSpans[Dt]?this.textSpans[Dt].elem=St:this.textSpans[Dt]={elem:St},Dt+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var nt=this.canvasContext;nt.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var rt,it,st,lt,ct,ut,dt=this.textAnimator.renderedLetters,ht=this.textProperty.currentData.l;it=ht.length;var ft,pt=null,mt=null,gt=null,xt,yt,vt=this.globalData.renderer;for(rt=0;rt<it;rt+=1)if(!ht[rt].n){if(ft=dt[rt],ft&&(vt.save(),vt.ctxTransform(ft.p),vt.ctxOpacity(ft.o)),this.fill){for(ft&&ft.fc?pt!==ft.fc&&(vt.ctxFillStyle(ft.fc),pt=ft.fc):pt!==this.values.fill&&(pt=this.values.fill,vt.ctxFillStyle(this.values.fill)),xt=this.textSpans[rt].elem,lt=xt.length,this.globalData.canvasContext.beginPath(),st=0;st<lt;st+=1)for(yt=xt[st],ut=yt.length,this.globalData.canvasContext.moveTo(yt[0],yt[1]),ct=2;ct<ut;ct+=6)this.globalData.canvasContext.bezierCurveTo(yt[ct],yt[ct+1],yt[ct+2],yt[ct+3],yt[ct+4],yt[ct+5]);this.globalData.canvasContext.closePath(),vt.ctxFill()}if(this.stroke){for(ft&&ft.sw?gt!==ft.sw&&(gt=ft.sw,vt.ctxLineWidth(ft.sw)):gt!==this.values.sWidth&&(gt=this.values.sWidth,vt.ctxLineWidth(this.values.sWidth)),ft&&ft.sc?mt!==ft.sc&&(mt=ft.sc,vt.ctxStrokeStyle(ft.sc)):mt!==this.values.stroke&&(mt=this.values.stroke,vt.ctxStrokeStyle(this.values.stroke)),xt=this.textSpans[rt].elem,lt=xt.length,this.globalData.canvasContext.beginPath(),st=0;st<lt;st+=1)for(yt=xt[st],ut=yt.length,this.globalData.canvasContext.moveTo(yt[0],yt[1]),ct=2;ct<ut;ct+=6)this.globalData.canvasContext.bezierCurveTo(yt[ct],yt[ct+1],yt[ct+2],yt[ct+3],yt[ct+4],yt[ct+5]);this.globalData.canvasContext.closePath(),vt.ctxStroke()}ft&&this.globalData.renderer.restore()}};function CVImageElement(nt,rt,it){this.assetData=rt.getAssetData(nt.refId),this.img=rt.imageLoader.getAsset(this.assetData),this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var nt=createTag("canvas");nt.width=this.assetData.w,nt.height=this.assetData.h;var rt=nt.getContext("2d"),it=this.img.width,st=this.img.height,lt=it/st,ct=this.assetData.w/this.assetData.h,ut,dt,ht=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;lt>ct&&ht==="xMidYMid slice"||lt<ct&&ht!=="xMidYMid slice"?(dt=st,ut=dt*ct):(ut=it,dt=ut/ct),rt.drawImage(this.img,(it-ut)/2,(st-dt)/2,ut,dt,0,0,this.assetData.w,this.assetData.h),this.img=nt}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(nt,rt,it){this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(nt){return new CVShapeElement(nt,this.globalData,this)},CanvasRendererBase.prototype.createText=function(nt){return new CVTextElement(nt,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(nt){return new CVImageElement(nt,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(nt){return new CVSolidElement(nt,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(nt){nt[0]===1&&nt[1]===0&&nt[4]===0&&nt[5]===1&&nt[12]===0&&nt[13]===0||this.canvasContext.transform(nt[0],nt[1],nt[4],nt[5],nt[12],nt[13])},CanvasRendererBase.prototype.ctxOpacity=function(nt){this.canvasContext.globalAlpha*=nt<0?0:nt},CanvasRendererBase.prototype.ctxFillStyle=function(nt){this.canvasContext.fillStyle=nt},CanvasRendererBase.prototype.ctxStrokeStyle=function(nt){this.canvasContext.strokeStyle=nt},CanvasRendererBase.prototype.ctxLineWidth=function(nt){this.canvasContext.lineWidth=nt},CanvasRendererBase.prototype.ctxLineCap=function(nt){this.canvasContext.lineCap=nt},CanvasRendererBase.prototype.ctxLineJoin=function(nt){this.canvasContext.lineJoin=nt},CanvasRendererBase.prototype.ctxMiterLimit=function(nt){this.canvasContext.miterLimit=nt},CanvasRendererBase.prototype.ctxFill=function(nt){this.canvasContext.fill(nt)},CanvasRendererBase.prototype.ctxFillRect=function(nt,rt,it,st){this.canvasContext.fillRect(nt,rt,it,st)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(nt){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}nt&&(this.globalData.blendMode="source-over"),this.contextData.restore(nt)},CanvasRendererBase.prototype.configAnimation=function(nt){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var rt=this.animationItem.container.style;rt.width="100%",rt.height="100%";var it="0px 0px 0px";rt.transformOrigin=it,rt.mozTransformOrigin=it,rt.webkitTransformOrigin=it,rt["-webkit-transform"]=it,rt.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=nt,this.layers=nt.layers,this.transformCanvas={w:nt.w,h:nt.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(nt,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(nt.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(nt,rt){this.reset();var it,st;nt?(it=nt,st=rt,this.canvasContext.canvas.width=it,this.canvasContext.canvas.height=st):(this.animationItem.wrapper&&this.animationItem.container?(it=this.animationItem.wrapper.offsetWidth,st=this.animationItem.wrapper.offsetHeight):(it=this.canvasContext.canvas.width,st=this.canvasContext.canvas.height),this.canvasContext.canvas.width=it*this.renderConfig.dpr,this.canvasContext.canvas.height=st*this.renderConfig.dpr);var lt,ct;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var ut=this.renderConfig.preserveAspectRatio.split(" "),dt=ut[1]||"meet",ht=ut[0]||"xMidYMid",ft=ht.substr(0,4),pt=ht.substr(4);lt=it/st,ct=this.transformCanvas.w/this.transformCanvas.h,ct>lt&&dt==="meet"||ct<lt&&dt==="slice"?(this.transformCanvas.sx=it/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=it/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=st/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=st/(this.transformCanvas.h/this.renderConfig.dpr)),ft==="xMid"&&(ct<lt&&dt==="meet"||ct>lt&&dt==="slice")?this.transformCanvas.tx=(it-this.transformCanvas.w*(st/this.transformCanvas.h))/2*this.renderConfig.dpr:ft==="xMax"&&(ct<lt&&dt==="meet"||ct>lt&&dt==="slice")?this.transformCanvas.tx=(it-this.transformCanvas.w*(st/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,pt==="YMid"&&(ct>lt&&dt==="meet"||ct<lt&&dt==="slice")?this.transformCanvas.ty=(st-this.transformCanvas.h*(it/this.transformCanvas.w))/2*this.renderConfig.dpr:pt==="YMax"&&(ct>lt&&dt==="meet"||ct<lt&&dt==="slice")?this.transformCanvas.ty=(st-this.transformCanvas.h*(it/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=it/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=st/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var nt,rt=this.layers?this.layers.length:0;for(nt=rt-1;nt>=0;nt-=1)this.elements[nt]&&this.elements[nt].destroy&&this.elements[nt].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(nt,rt){if(!(this.renderedFrame===nt&&this.renderConfig.clearCanvas===!0&&!rt||this.destroyed||nt===-1)){this.renderedFrame=nt,this.globalData.frameNum=nt-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||rt,this.globalData.projectInterface.currentFrame=nt;var it,st=this.layers.length;for(this.completeLayers||this.checkLayers(nt),it=st-1;it>=0;it-=1)(this.completeLayers||this.elements[it])&&this.elements[it].prepareFrame(nt-this.layers[it].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),it=st-1;it>=0;it-=1)(this.completeLayers||this.elements[it])&&this.elements[it].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(nt){var rt=this.elements;if(!(rt[nt]||this.layers[nt].ty===99)){var it=this.createItem(this.layers[nt],this,this.globalData);rt[nt]=it,it.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var nt=this.pendingElements.pop();nt.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var nt,rt=15;for(nt=0;nt<rt;nt+=1){var it=new CanvasContext;this.stack[nt]=it}this._length=rt,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var nt=this._length*2,rt=0;for(rt=this._length;rt<nt;rt+=1)this.stack[rt]=new CanvasContext;this._length=nt},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(nt){this.cArrPos-=1;var rt=this.stack[this.cArrPos],it=rt.transform,st,lt=this.cTr.props;for(st=0;st<16;st+=1)lt[st]=it[st];if(nt){this.nativeContext.restore();var ct=this.stack[this.cArrPos+1];this.appliedFillStyle=ct.fillStyle,this.appliedStrokeStyle=ct.strokeStyle,this.appliedLineWidth=ct.lineWidth,this.appliedLineCap=ct.lineCap,this.appliedLineJoin=ct.lineJoin,this.appliedMiterLimit=ct.miterLimit}this.nativeContext.setTransform(it[0],it[1],it[4],it[5],it[12],it[13]),(nt||rt.opacity!==-1&&this.currentOpacity!==rt.opacity)&&(this.nativeContext.globalAlpha=rt.opacity,this.currentOpacity=rt.opacity),this.currentFillStyle=rt.fillStyle,this.currentStrokeStyle=rt.strokeStyle,this.currentLineWidth=rt.lineWidth,this.currentLineCap=rt.lineCap,this.currentLineJoin=rt.lineJoin,this.currentMiterLimit=rt.miterLimit},CVContextData.prototype.save=function(nt){nt&&this.nativeContext.save();var rt=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var it=this.stack[this.cArrPos],st;for(st=0;st<16;st+=1)it.transform[st]=rt[st];this.cArrPos+=1;var lt=this.stack[this.cArrPos];lt.opacity=it.opacity,lt.fillStyle=it.fillStyle,lt.strokeStyle=it.strokeStyle,lt.lineWidth=it.lineWidth,lt.lineCap=it.lineCap,lt.lineJoin=it.lineJoin,lt.miterLimit=it.miterLimit},CVContextData.prototype.setOpacity=function(nt){this.stack[this.cArrPos].opacity=nt},CVContextData.prototype.setContext=function(nt){this.nativeContext=nt},CVContextData.prototype.fillStyle=function(nt){this.stack[this.cArrPos].fillStyle!==nt&&(this.currentFillStyle=nt,this.stack[this.cArrPos].fillStyle=nt)},CVContextData.prototype.strokeStyle=function(nt){this.stack[this.cArrPos].strokeStyle!==nt&&(this.currentStrokeStyle=nt,this.stack[this.cArrPos].strokeStyle=nt)},CVContextData.prototype.lineWidth=function(nt){this.stack[this.cArrPos].lineWidth!==nt&&(this.currentLineWidth=nt,this.stack[this.cArrPos].lineWidth=nt)},CVContextData.prototype.lineCap=function(nt){this.stack[this.cArrPos].lineCap!==nt&&(this.currentLineCap=nt,this.stack[this.cArrPos].lineCap=nt)},CVContextData.prototype.lineJoin=function(nt){this.stack[this.cArrPos].lineJoin!==nt&&(this.currentLineJoin=nt,this.stack[this.cArrPos].lineJoin=nt)},CVContextData.prototype.miterLimit=function(nt){this.stack[this.cArrPos].miterLimit!==nt&&(this.currentMiterLimit=nt,this.stack[this.cArrPos].miterLimit=nt)},CVContextData.prototype.transform=function(nt){this.transformMat.cloneFromProps(nt);var rt=this.cTr;this.transformMat.multiply(rt),rt.cloneFromProps(this.transformMat.props);var it=rt.props;this.nativeContext.setTransform(it[0],it[1],it[4],it[5],it[12],it[13])},CVContextData.prototype.opacity=function(nt){var rt=this.stack[this.cArrPos].opacity;rt*=nt<0?0:nt,this.stack[this.cArrPos].opacity!==rt&&(this.currentOpacity!==nt&&(this.nativeContext.globalAlpha=nt,this.currentOpacity=nt),this.stack[this.cArrPos].opacity=rt)},CVContextData.prototype.fill=function(nt){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(nt)},CVContextData.prototype.fillRect=function(nt,rt,it,st){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(nt,rt,it,st)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(nt,rt,it){this.completeLayers=!1,this.layers=nt.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(nt,rt,it),this.tm=nt.tm?PropertyFactory.getProp(this,nt.tm,0,rt.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var nt=this.canvasContext;nt.beginPath(),nt.moveTo(0,0),nt.lineTo(this.data.w,0),nt.lineTo(this.data.w,this.data.h),nt.lineTo(0,this.data.h),nt.lineTo(0,0),nt.clip();var rt,it=this.layers.length;for(rt=it-1;rt>=0;rt-=1)(this.completeLayers||this.elements[rt])&&this.elements[rt].renderFrame()},CVCompElement.prototype.destroy=function(){var nt,rt=this.layers.length;for(nt=rt-1;nt>=0;nt-=1)this.elements[nt]&&this.elements[nt].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(nt){return new CVCompElement(nt,this.globalData,this)};function CanvasRenderer(nt,rt){this.animationItem=nt,this.renderConfig={clearCanvas:rt&&rt.clearCanvas!==void 0?rt.clearCanvas:!0,context:rt&&rt.context||null,progressiveLoad:rt&&rt.progressiveLoad||!1,preserveAspectRatio:rt&&rt.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:rt&&rt.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:rt&&rt.contentVisibility||"visible",className:rt&&rt.className||"",id:rt&&rt.id||"",runExpressions:!rt||rt.runExpressions===void 0||rt.runExpressions},this.renderConfig.dpr=rt&&rt.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=rt&&rt.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(nt){return new CVCompElement(nt,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var rt=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var it=this.finalTransform.mat.toCSS();rt.transform=it,rt.webkitTransform=it}this.finalTransform._opMdf&&(rt.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(nt,rt,it){this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var nt;this.data.hasMask?(nt=createNS("rect"),nt.setAttribute("width",this.data.sw),nt.setAttribute("height",this.data.sh),nt.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(nt=createTag("div"),nt.style.width=this.data.sw+"px",nt.style.height=this.data.sh+"px",nt.style.backgroundColor=this.data.sc),this.layerElement.appendChild(nt)};function HShapeElement(nt,rt,it){this.shapes=[],this.shapesData=nt.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(nt,rt,it),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var nt;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),nt=this.svgElement;else{nt=createNS("svg");var rt=this.comp.data?this.comp.data:this.globalData.compSize;nt.setAttribute("width",rt.w),nt.setAttribute("height",rt.h),nt.appendChild(this.shapesContainer),this.layerElement.appendChild(nt)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=nt},HShapeElement.prototype.getTransformedPoint=function(nt,rt){var it,st=nt.length;for(it=0;it<st;it+=1)rt=nt[it].mProps.v.applyToPointArray(rt[0],rt[1],0);return rt},HShapeElement.prototype.calculateShapeBoundingBox=function(nt,rt){var it=nt.sh.v,st=nt.transformers,lt,ct=it._length,ut,dt,ht,ft;if(!(ct<=1)){for(lt=0;lt<ct-1;lt+=1)ut=this.getTransformedPoint(st,it.v[lt]),dt=this.getTransformedPoint(st,it.o[lt]),ht=this.getTransformedPoint(st,it.i[lt+1]),ft=this.getTransformedPoint(st,it.v[lt+1]),this.checkBounds(ut,dt,ht,ft,rt);it.c&&(ut=this.getTransformedPoint(st,it.v[lt]),dt=this.getTransformedPoint(st,it.o[lt]),ht=this.getTransformedPoint(st,it.i[0]),ft=this.getTransformedPoint(st,it.v[0]),this.checkBounds(ut,dt,ht,ft,rt))}},HShapeElement.prototype.checkBounds=function(nt,rt,it,st,lt){this.getBoundsOfCurve(nt,rt,it,st);var ct=this.shapeBoundingBox;lt.x=bmMin(ct.left,lt.x),lt.xMax=bmMax(ct.right,lt.xMax),lt.y=bmMin(ct.top,lt.y),lt.yMax=bmMax(ct.bottom,lt.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(nt,rt,it,st){for(var lt=[[nt[0],st[0]],[nt[1],st[1]]],ct,ut,dt,ht,ft,pt,mt,gt=0;gt<2;++gt)ut=6*nt[gt]-12*rt[gt]+6*it[gt],ct=-3*nt[gt]+9*rt[gt]-9*it[gt]+3*st[gt],dt=3*rt[gt]-3*nt[gt],ut|=0,ct|=0,dt|=0,ct===0&&ut===0||(ct===0?(ht=-dt/ut,ht>0&&ht<1&&lt[gt].push(this.calculateF(ht,nt,rt,it,st,gt))):(ft=ut*ut-4*dt*ct,ft>=0&&(pt=(-ut+bmSqrt(ft))/(2*ct),pt>0&&pt<1&&lt[gt].push(this.calculateF(pt,nt,rt,it,st,gt)),mt=(-ut-bmSqrt(ft))/(2*ct),mt>0&&mt<1&&lt[gt].push(this.calculateF(mt,nt,rt,it,st,gt)))));this.shapeBoundingBox.left=bmMin.apply(null,lt[0]),this.shapeBoundingBox.top=bmMin.apply(null,lt[1]),this.shapeBoundingBox.right=bmMax.apply(null,lt[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,lt[1])},HShapeElement.prototype.calculateF=function(nt,rt,it,st,lt,ct){return bmPow(1-nt,3)*rt[ct]+3*bmPow(1-nt,2)*nt*it[ct]+3*(1-nt)*bmPow(nt,2)*st[ct]+bmPow(nt,3)*lt[ct]},HShapeElement.prototype.calculateBoundingBox=function(nt,rt){var it,st=nt.length;for(it=0;it<st;it+=1)nt[it]&&nt[it].sh?this.calculateShapeBoundingBox(nt[it],rt):nt[it]&&nt[it].it?this.calculateBoundingBox(nt[it].it,rt):nt[it]&&nt[it].style&&nt[it].w&&this.expandStrokeBoundingBox(nt[it].w,rt)},HShapeElement.prototype.expandStrokeBoundingBox=function(nt,rt){var it=0;if(nt.keyframes){for(var st=0;st<nt.keyframes.length;st+=1){var lt=nt.keyframes[st].s;lt>it&&(it=lt)}it*=nt.mult}else it=nt.v*nt.mult;rt.x-=it,rt.xMax+=it,rt.y-=it,rt.yMax+=it},HShapeElement.prototype.currentBoxContains=function(nt){return this.currentBBox.x<=nt.x&&this.currentBBox.y<=nt.y&&this.currentBBox.width+this.currentBBox.x>=nt.x+nt.width&&this.currentBBox.height+this.currentBBox.y>=nt.y+nt.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var nt=this.tempBoundingBox,rt=999999;if(nt.x=rt,nt.xMax=-rt,nt.y=rt,nt.yMax=-rt,this.calculateBoundingBox(this.itemsData,nt),nt.width=nt.xMax<nt.x?0:nt.xMax-nt.x,nt.height=nt.yMax<nt.y?0:nt.yMax-nt.y,this.currentBoxContains(nt))return;var it=!1;if(this.currentBBox.w!==nt.width&&(this.currentBBox.w=nt.width,this.shapeCont.setAttribute("width",nt.width),it=!0),this.currentBBox.h!==nt.height&&(this.currentBBox.h=nt.height,this.shapeCont.setAttribute("height",nt.height),it=!0),it||this.currentBBox.x!==nt.x||this.currentBBox.y!==nt.y){this.currentBBox.w=nt.width,this.currentBBox.h=nt.height,this.currentBBox.x=nt.x,this.currentBBox.y=nt.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var st=this.shapeCont.style,lt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";st.transform=lt,st.webkitTransform=lt}}};function HTextElement(nt,rt,it){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var nt=createNS("g");this.maskedElement.appendChild(nt),this.innerElem=nt}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var nt=this.textProperty.currentData;this.renderedLetters=createSizedArray(nt.l?nt.l.length:0);var rt=this.innerElem.style,it=nt.fc?this.buildColor(nt.fc):"rgba(0,0,0,0)";rt.fill=it,rt.color=it,nt.sc&&(rt.stroke=this.buildColor(nt.sc),rt.strokeWidth=nt.sw+"px");var st=this.globalData.fontManager.getFontByName(nt.f);if(!this.globalData.fontManager.chars)if(rt.fontSize=nt.finalSize+"px",rt.lineHeight=nt.finalSize+"px",st.fClass)this.innerElem.className=st.fClass;else{rt.fontFamily=st.fFamily;var lt=nt.fWeight,ct=nt.fStyle;rt.fontStyle=ct,rt.fontWeight=lt}var ut,dt,ht=nt.l;dt=ht.length;var ft,pt,mt,gt=this.mHelper,xt,yt="",vt=0;for(ut=0;ut<dt;ut+=1){if(this.globalData.fontManager.chars?(this.textPaths[vt]?ft=this.textPaths[vt]:(ft=createNS("path"),ft.setAttribute("stroke-linecap",lineCapEnum[1]),ft.setAttribute("stroke-linejoin",lineJoinEnum[2]),ft.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[vt]?(pt=this.textSpans[vt],mt=pt.children[0]):(pt=createTag("div"),pt.style.lineHeight=0,mt=createNS("svg"),mt.appendChild(ft),styleDiv(pt)))):this.isMasked?ft=this.textPaths[vt]?this.textPaths[vt]:createNS("text"):this.textSpans[vt]?(pt=this.textSpans[vt],ft=this.textPaths[vt]):(pt=createTag("span"),styleDiv(pt),ft=createTag("span"),styleDiv(ft),pt.appendChild(ft)),this.globalData.fontManager.chars){var St=this.globalData.fontManager.getCharData(nt.finalText[ut],st.fStyle,this.globalData.fontManager.getFontByName(nt.f).fFamily),wt;if(St?wt=St.data:wt=null,gt.reset(),wt&&wt.shapes&&wt.shapes.length&&(xt=wt.shapes[0].it,gt.scale(nt.finalSize/100,nt.finalSize/100),yt=this.createPathShape(gt,xt),ft.setAttribute("d",yt)),this.isMasked)this.innerElem.appendChild(ft);else{if(this.innerElem.appendChild(pt),wt&&wt.shapes){document.body.appendChild(mt);var Et=mt.getBBox();mt.setAttribute("width",Et.width+2),mt.setAttribute("height",Et.height+2),mt.setAttribute("viewBox",Et.x-1+" "+(Et.y-1)+" "+(Et.width+2)+" "+(Et.height+2));var Rt=mt.style,Tt="translate("+(Et.x-1)+"px,"+(Et.y-1)+"px)";Rt.transform=Tt,Rt.webkitTransform=Tt,ht[ut].yOffset=Et.y-1}else mt.setAttribute("width",1),mt.setAttribute("height",1);pt.appendChild(mt)}}else if(ft.textContent=ht[ut].val,ft.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(ft);else{this.innerElem.appendChild(pt);var It=ft.style,At="translate3d(0,"+-nt.finalSize/1.2+"px,0)";It.transform=At,It.webkitTransform=At}this.isMasked?this.textSpans[vt]=ft:this.textSpans[vt]=pt,this.textSpans[vt].style.display="block",this.textPaths[vt]=ft,vt+=1}for(;vt<this.textSpans.length;)this.textSpans[vt].style.display="none",vt+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var nt;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),nt=this.svgElement.style;var rt="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";nt.transform=rt,nt.webkitTransform=rt}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var it,st,lt=0,ct=this.textAnimator.renderedLetters,ut=this.textProperty.currentData.l;st=ut.length;var dt,ht,ft;for(it=0;it<st;it+=1)ut[it].n?lt+=1:(ht=this.textSpans[it],ft=this.textPaths[it],dt=ct[lt],lt+=1,dt._mdf.m&&(this.isMasked?ht.setAttribute("transform",dt.m):(ht.style.webkitTransform=dt.m,ht.style.transform=dt.m)),ht.style.opacity=dt.o,dt.sw&&dt._mdf.sw&&ft.setAttribute("stroke-width",dt.sw),dt.sc&&dt._mdf.sc&&ft.setAttribute("stroke",dt.sc),dt.fc&&dt._mdf.fc&&(ft.setAttribute("fill",dt.fc),ft.style.color=dt.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var pt=this.innerElem.getBBox();this.currentBBox.w!==pt.width&&(this.currentBBox.w=pt.width,this.svgElement.setAttribute("width",pt.width)),this.currentBBox.h!==pt.height&&(this.currentBBox.h=pt.height,this.svgElement.setAttribute("height",pt.height));var mt=1;if(this.currentBBox.w!==pt.width+mt*2||this.currentBBox.h!==pt.height+mt*2||this.currentBBox.x!==pt.x-mt||this.currentBBox.y!==pt.y-mt){this.currentBBox.w=pt.width+mt*2,this.currentBBox.h=pt.height+mt*2,this.currentBBox.x=pt.x-mt,this.currentBBox.y=pt.y-mt,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),nt=this.svgElement.style;var gt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";nt.transform=gt,nt.webkitTransform=gt}}}};function HCameraElement(nt,rt,it){this.initFrame(),this.initBaseData(nt,rt,it),this.initHierarchy();var st=PropertyFactory.getProp;if(this.pe=st(this,nt.pe,0,0,this),nt.ks.p.s?(this.px=st(this,nt.ks.p.x,1,0,this),this.py=st(this,nt.ks.p.y,1,0,this),this.pz=st(this,nt.ks.p.z,1,0,this)):this.p=st(this,nt.ks.p,1,0,this),nt.ks.a&&(this.a=st(this,nt.ks.a,1,0,this)),nt.ks.or.k.length&&nt.ks.or.k[0].to){var lt,ct=nt.ks.or.k.length;for(lt=0;lt<ct;lt+=1)nt.ks.or.k[lt].to=null,nt.ks.or.k[lt].ti=null}this.or=st(this,nt.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=st(this,nt.ks.rx,0,degToRads,this),this.ry=st(this,nt.ks.ry,0,degToRads,this),this.rz=st(this,nt.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var nt,rt=this.comp.threeDElements.length,it,st,lt;for(nt=0;nt<rt;nt+=1)if(it=this.comp.threeDElements[nt],it.type==="3d"){st=it.perspectiveElem.style,lt=it.container.style;var ct=this.pe.v+"px",ut="0px 0px 0px",dt="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";st.perspective=ct,st.webkitPerspective=ct,lt.transformOrigin=ut,lt.mozTransformOrigin=ut,lt.webkitTransformOrigin=ut,st.transform=dt,st.webkitTransform=dt}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var nt=this._isFirstFrame,rt,it;if(this.hierarchy)for(it=this.hierarchy.length,rt=0;rt<it;rt+=1)nt=this.hierarchy[rt].finalTransform.mProp._mdf||nt;if(nt||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(it=this.hierarchy.length-1,rt=it;rt>=0;rt-=1){var st=this.hierarchy[rt].finalTransform.mProp;this.mat.translate(-st.p.v[0],-st.p.v[1],st.p.v[2]),this.mat.rotateX(-st.or.v[0]).rotateY(-st.or.v[1]).rotateZ(st.or.v[2]),this.mat.rotateX(-st.rx.v).rotateY(-st.ry.v).rotateZ(st.rz.v),this.mat.scale(1/st.s.v[0],1/st.s.v[1],1/st.s.v[2]),this.mat.translate(st.a.v[0],st.a.v[1],st.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var lt;this.p?lt=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:lt=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var ct=Math.sqrt(Math.pow(lt[0],2)+Math.pow(lt[1],2)+Math.pow(lt[2],2)),ut=[lt[0]/ct,lt[1]/ct,lt[2]/ct],dt=Math.sqrt(ut[2]*ut[2]+ut[0]*ut[0]),ht=Math.atan2(ut[1],dt),ft=Math.atan2(ut[0],-ut[2]);this.mat.rotateY(ft).rotateX(-ht)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var pt=!this._prevMat.equals(this.mat);if((pt||this.pe._mdf)&&this.comp.threeDElements){it=this.comp.threeDElements.length;var mt,gt,xt;for(rt=0;rt<it;rt+=1)if(mt=this.comp.threeDElements[rt],mt.type==="3d"){if(pt){var yt=this.mat.toCSS();xt=mt.container.style,xt.transform=yt,xt.webkitTransform=yt}this.pe._mdf&&(gt=mt.perspectiveElem.style,gt.perspective=this.pe.v+"px",gt.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(nt){this.prepareProperties(nt,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(nt,rt,it){this.assetData=rt.getAssetData(nt.refId),this.initElement(nt,rt,it)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var nt=this.globalData.getAssetsPath(this.assetData),rt=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",nt),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(rt),rt.crossOrigin="anonymous",rt.src=nt,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(nt,rt){this.animationItem=nt,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:rt&&rt.className||"",imagePreserveAspectRatio:rt&&rt.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(rt&&rt.hideOnTransparent===!1),filterSize:{width:rt&&rt.filterSize&&rt.filterSize.width||"400%",height:rt&&rt.filterSize&&rt.filterSize.height||"400%",x:rt&&rt.filterSize&&rt.filterSize.x||"-100%",y:rt&&rt.filterSize&&rt.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var nt=this.pendingElements.pop();nt.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(nt,rt){var it=nt.getBaseElement();if(it){var st=this.layers[rt];if(!st.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(it,rt);else{for(var lt=0,ct,ut,dt;lt<rt;)this.elements[lt]&&this.elements[lt]!==!0&&this.elements[lt].getBaseElement&&(ut=this.elements[lt],dt=this.layers[lt].ddd?this.getThreeDContainerByPos(lt):ut.getBaseElement(),ct=dt||ct),lt+=1;ct?(!st.ddd||!this.supports3d)&&this.layerElement.insertBefore(it,ct):(!st.ddd||!this.supports3d)&&this.layerElement.appendChild(it)}else this.addTo3dContainer(it,rt)}},HybridRendererBase.prototype.createShape=function(nt){return this.supports3d?new HShapeElement(nt,this.globalData,this):new SVGShapeElement(nt,this.globalData,this)},HybridRendererBase.prototype.createText=function(nt){return this.supports3d?new HTextElement(nt,this.globalData,this):new SVGTextLottieElement(nt,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(nt){return this.camera=new HCameraElement(nt,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(nt){return this.supports3d?new HImageElement(nt,this.globalData,this):new IImageElement(nt,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(nt){return this.supports3d?new HSolidElement(nt,this.globalData,this):new ISolidElement(nt,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(nt){for(var rt=0,it=this.threeDElements.length;rt<it;){if(this.threeDElements[rt].startPos<=nt&&this.threeDElements[rt].endPos>=nt)return this.threeDElements[rt].perspectiveElem;rt+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(nt,rt){var it=createTag("div"),st,lt;styleDiv(it);var ct=createTag("div");if(styleDiv(ct),rt==="3d"){st=it.style,st.width=this.globalData.compSize.w+"px",st.height=this.globalData.compSize.h+"px";var ut="50% 50%";st.webkitTransformOrigin=ut,st.mozTransformOrigin=ut,st.transformOrigin=ut,lt=ct.style;var dt="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";lt.transform=dt,lt.webkitTransform=dt}it.appendChild(ct);var ht={container:ct,perspectiveElem:it,startPos:nt,endPos:nt,type:rt};return this.threeDElements.push(ht),ht},HybridRendererBase.prototype.build3dContainers=function(){var nt,rt=this.layers.length,it,st="";for(nt=0;nt<rt;nt+=1)this.layers[nt].ddd&&this.layers[nt].ty!==3?(st!=="3d"&&(st="3d",it=this.createThreeDContainer(nt,"3d")),it.endPos=Math.max(it.endPos,nt)):(st!=="2d"&&(st="2d",it=this.createThreeDContainer(nt,"2d")),it.endPos=Math.max(it.endPos,nt));for(rt=this.threeDElements.length,nt=rt-1;nt>=0;nt-=1)this.resizerElem.appendChild(this.threeDElements[nt].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(nt,rt){for(var it=0,st=this.threeDElements.length;it<st;){if(rt<=this.threeDElements[it].endPos){for(var lt=this.threeDElements[it].startPos,ct;lt<rt;)this.elements[lt]&&this.elements[lt].getBaseElement&&(ct=this.elements[lt].getBaseElement()),lt+=1;ct?this.threeDElements[it].container.insertBefore(nt,ct):this.threeDElements[it].container.appendChild(nt);break}it+=1}},HybridRendererBase.prototype.configAnimation=function(nt){var rt=createTag("div"),it=this.animationItem.wrapper,st=rt.style;st.width=nt.w+"px",st.height=nt.h+"px",this.resizerElem=rt,styleDiv(rt),st.transformStyle="flat",st.mozTransformStyle="flat",st.webkitTransformStyle="flat",this.renderConfig.className&&rt.setAttribute("class",this.renderConfig.className),it.appendChild(rt),st.overflow="hidden";var lt=createNS("svg");lt.setAttribute("width","1"),lt.setAttribute("height","1"),styleDiv(lt),this.resizerElem.appendChild(lt);var ct=createNS("defs");lt.appendChild(ct),this.data=nt,this.setupGlobalData(nt,lt),this.globalData.defs=ct,this.layers=nt.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var nt,rt=this.layers?this.layers.length:0;for(nt=0;nt<rt;nt+=1)this.elements[nt]&&this.elements[nt].destroy&&this.elements[nt].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var nt=this.animationItem.wrapper.offsetWidth,rt=this.animationItem.wrapper.offsetHeight,it=nt/rt,st=this.globalData.compSize.w/this.globalData.compSize.h,lt,ct,ut,dt;st>it?(lt=nt/this.globalData.compSize.w,ct=nt/this.globalData.compSize.w,ut=0,dt=(rt-this.globalData.compSize.h*(nt/this.globalData.compSize.w))/2):(lt=rt/this.globalData.compSize.h,ct=rt/this.globalData.compSize.h,ut=(nt-this.globalData.compSize.w*(rt/this.globalData.compSize.h))/2,dt=0);var ht=this.resizerElem.style;ht.webkitTransform="matrix3d("+lt+",0,0,0,0,"+ct+",0,0,0,0,1,0,"+ut+","+dt+",0,1)",ht.transform=ht.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var nt=this.globalData.compSize.w,rt=this.globalData.compSize.h,it,st=this.threeDElements.length;for(it=0;it<st;it+=1){var lt=this.threeDElements[it].perspectiveElem.style;lt.webkitPerspective=Math.sqrt(Math.pow(nt,2)+Math.pow(rt,2))+"px",lt.perspective=lt.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(nt){var rt,it=nt.length,st=createTag("div");for(rt=0;rt<it;rt+=1)if(nt[rt].xt){var lt=this.createComp(nt[rt],st,this.globalData.comp,null);lt.initExpressions(),this.globalData.projectInterface.registerComposition(lt)}};function HCompElement(nt,rt,it){this.layers=nt.layers,this.supports3d=!nt.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(nt,rt,it),this.tm=nt.tm?PropertyFactory.getProp(this,nt.tm,0,rt.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(nt,rt){for(var it=0,st;it<rt;)this.elements[it]&&this.elements[it].getBaseElement&&(st=this.elements[it].getBaseElement()),it+=1;st?this.layerElement.insertBefore(nt,st):this.layerElement.appendChild(nt)},HCompElement.prototype.createComp=function(nt){return this.supports3d?new HCompElement(nt,this.globalData,this):new SVGCompElement(nt,this.globalData,this)};function HybridRenderer(nt,rt){this.animationItem=nt,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:rt&&rt.className||"",imagePreserveAspectRatio:rt&&rt.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(rt&&rt.hideOnTransparent===!1),filterSize:{width:rt&&rt.filterSize&&rt.filterSize.width||"400%",height:rt&&rt.filterSize&&rt.filterSize.height||"400%",x:rt&&rt.filterSize&&rt.filterSize.x||"-100%",y:rt&&rt.filterSize&&rt.filterSize.y||"-100%"},runExpressions:!rt||rt.runExpressions===void 0||rt.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(nt){return this.supports3d?new HCompElement(nt,this.globalData,this):new SVGCompElement(nt,this.globalData,this)};var CompExpressionInterface=function(){return function(nt){function rt(it){for(var st=0,lt=nt.layers.length;st<lt;){if(nt.layers[st].nm===it||nt.layers[st].ind===it)return nt.elements[st].layerInterface;st+=1}return null}return Object.defineProperty(rt,"_name",{value:nt.data.nm}),rt.layer=rt,rt.pixelAspect=1,rt.height=nt.data.h||nt.globalData.compSize.h,rt.width=nt.data.w||nt.globalData.compSize.w,rt.pixelAspect=1,rt.frameDuration=1/nt.globalData.frameRate,rt.displayStartTime=0,rt.numLayers=nt.layers.length,rt}}();function _typeof$2(nt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(it){return typeof it}:_typeof$2=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},_typeof$2(nt)}function seedRandom(nt,rt){var it=this,st=256,lt=6,ct=52,ut="random",dt=rt.pow(st,lt),ht=rt.pow(2,ct),ft=ht*2,pt=st-1,mt;function gt(Rt,Tt,It){var At=[];Tt=Tt===!0?{entropy:!0}:Tt||{};var Dt=St(vt(Tt.entropy?[Rt,Et(nt)]:Rt===null?wt():Rt,3),At),jt=new xt(At),Ft=function(){for(var Mt=jt.g(lt),Ot=dt,Nt=0;Mt<ht;)Mt=(Mt+Nt)*st,Ot*=st,Nt=jt.g(1);for(;Mt>=ft;)Mt/=2,Ot/=2,Nt>>>=1;return(Mt+Nt)/Ot};return Ft.int32=function(){return jt.g(4)|0},Ft.quick=function(){return jt.g(4)/4294967296},Ft.double=Ft,St(Et(jt.S),nt),(Tt.pass||It||function(Lt,Mt,Ot,Nt){return Nt&&(Nt.S&&yt(Nt,jt),Lt.state=function(){return yt(jt,{})}),Ot?(rt[ut]=Lt,Mt):Lt})(Ft,Dt,"global"in Tt?Tt.global:this==rt,Tt.state)}rt["seed"+ut]=gt;function xt(Rt){var Tt,It=Rt.length,At=this,Dt=0,jt=At.i=At.j=0,Ft=At.S=[];for(It||(Rt=[It++]);Dt<st;)Ft[Dt]=Dt++;for(Dt=0;Dt<st;Dt++)Ft[Dt]=Ft[jt=pt&jt+Rt[Dt%It]+(Tt=Ft[Dt])],Ft[jt]=Tt;At.g=function(Lt){for(var Mt,Ot=0,Nt=At.i,$t=At.j,Vt=At.S;Lt--;)Mt=Vt[Nt=pt&Nt+1],Ot=Ot*st+Vt[pt&(Vt[Nt]=Vt[$t=pt&$t+Mt])+(Vt[$t]=Mt)];return At.i=Nt,At.j=$t,Ot}}function yt(Rt,Tt){return Tt.i=Rt.i,Tt.j=Rt.j,Tt.S=Rt.S.slice(),Tt}function vt(Rt,Tt){var It=[],At=_typeof$2(Rt),Dt;if(Tt&&At=="object")for(Dt in Rt)try{It.push(vt(Rt[Dt],Tt-1))}catch{}return It.length?It:At=="string"?Rt:Rt+"\0"}function St(Rt,Tt){for(var It=Rt+"",At,Dt=0;Dt<It.length;)Tt[pt&Dt]=pt&(At^=Tt[pt&Dt]*19)+It.charCodeAt(Dt++);return Et(Tt)}function wt(){try{var Rt=new Uint8Array(st);return(it.crypto||it.msCrypto).getRandomValues(Rt),Et(Rt)}catch{var Tt=it.navigator,It=Tt&&Tt.plugins;return[+new Date,it,It,it.screen,Et(nt)]}}function Et(Rt){return String.fromCharCode.apply(0,Rt)}St(rt.random(),nt)}function initialize$2(nt){seedRandom([],nt)}var propTypes={SHAPE:"shape"};function _typeof$1(nt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(it){return typeof it}:_typeof$1=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},_typeof$1(nt)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(nt){return nt.constructor===Array||nt.constructor===Float32Array}function isNumerable(nt,rt){return nt==="number"||rt instanceof Number||nt==="boolean"||nt==="string"}function $bm_neg(nt){var rt=_typeof$1(nt);if(rt==="number"||nt instanceof Number||rt==="boolean")return-nt;if($bm_isInstanceOfArray(nt)){var it,st=nt.length,lt=[];for(it=0;it<st;it+=1)lt[it]=-nt[it];return lt}return nt.propType?nt.v:-nt}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(nt,rt){var it=_typeof$1(nt),st=_typeof$1(rt);if(isNumerable(it,nt)&&isNumerable(st,rt)||it==="string"||st==="string")return nt+rt;if($bm_isInstanceOfArray(nt)&&isNumerable(st,rt))return nt=nt.slice(0),nt[0]+=rt,nt;if(isNumerable(it,nt)&&$bm_isInstanceOfArray(rt))return rt=rt.slice(0),rt[0]=nt+rt[0],rt;if($bm_isInstanceOfArray(nt)&&$bm_isInstanceOfArray(rt)){for(var lt=0,ct=nt.length,ut=rt.length,dt=[];lt<ct||lt<ut;)(typeof nt[lt]=="number"||nt[lt]instanceof Number)&&(typeof rt[lt]=="number"||rt[lt]instanceof Number)?dt[lt]=nt[lt]+rt[lt]:dt[lt]=rt[lt]===void 0?nt[lt]:nt[lt]||rt[lt],lt+=1;return dt}return 0}var add=sum;function sub(nt,rt){var it=_typeof$1(nt),st=_typeof$1(rt);if(isNumerable(it,nt)&&isNumerable(st,rt))return it==="string"&&(nt=parseInt(nt,10)),st==="string"&&(rt=parseInt(rt,10)),nt-rt;if($bm_isInstanceOfArray(nt)&&isNumerable(st,rt))return nt=nt.slice(0),nt[0]-=rt,nt;if(isNumerable(it,nt)&&$bm_isInstanceOfArray(rt))return rt=rt.slice(0),rt[0]=nt-rt[0],rt;if($bm_isInstanceOfArray(nt)&&$bm_isInstanceOfArray(rt)){for(var lt=0,ct=nt.length,ut=rt.length,dt=[];lt<ct||lt<ut;)(typeof nt[lt]=="number"||nt[lt]instanceof Number)&&(typeof rt[lt]=="number"||rt[lt]instanceof Number)?dt[lt]=nt[lt]-rt[lt]:dt[lt]=rt[lt]===void 0?nt[lt]:nt[lt]||rt[lt],lt+=1;return dt}return 0}function mul(nt,rt){var it=_typeof$1(nt),st=_typeof$1(rt),lt;if(isNumerable(it,nt)&&isNumerable(st,rt))return nt*rt;var ct,ut;if($bm_isInstanceOfArray(nt)&&isNumerable(st,rt)){for(ut=nt.length,lt=createTypedArray("float32",ut),ct=0;ct<ut;ct+=1)lt[ct]=nt[ct]*rt;return lt}if(isNumerable(it,nt)&&$bm_isInstanceOfArray(rt)){for(ut=rt.length,lt=createTypedArray("float32",ut),ct=0;ct<ut;ct+=1)lt[ct]=nt*rt[ct];return lt}return 0}function div(nt,rt){var it=_typeof$1(nt),st=_typeof$1(rt),lt;if(isNumerable(it,nt)&&isNumerable(st,rt))return nt/rt;var ct,ut;if($bm_isInstanceOfArray(nt)&&isNumerable(st,rt)){for(ut=nt.length,lt=createTypedArray("float32",ut),ct=0;ct<ut;ct+=1)lt[ct]=nt[ct]/rt;return lt}if(isNumerable(it,nt)&&$bm_isInstanceOfArray(rt)){for(ut=rt.length,lt=createTypedArray("float32",ut),ct=0;ct<ut;ct+=1)lt[ct]=nt/rt[ct];return lt}return 0}function mod(nt,rt){return typeof nt=="string"&&(nt=parseInt(nt,10)),typeof rt=="string"&&(rt=parseInt(rt,10)),nt%rt}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(nt,rt,it){if(rt>it){var st=it;it=rt,rt=st}return Math.min(Math.max(nt,rt),it)}function radiansToDegrees(nt){return nt/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(nt){return nt*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(nt,rt){if(typeof nt=="number"||nt instanceof Number)return rt=rt||0,Math.abs(nt-rt);rt||(rt=helperLengthArray);var it,st=Math.min(nt.length,rt.length),lt=0;for(it=0;it<st;it+=1)lt+=Math.pow(rt[it]-nt[it],2);return Math.sqrt(lt)}function normalize(nt){return div(nt,length(nt))}function rgbToHsl(nt){var rt=nt[0],it=nt[1],st=nt[2],lt=Math.max(rt,it,st),ct=Math.min(rt,it,st),ut,dt,ht=(lt+ct)/2;if(lt===ct)ut=0,dt=0;else{var ft=lt-ct;switch(dt=ht>.5?ft/(2-lt-ct):ft/(lt+ct),lt){case rt:ut=(it-st)/ft+(it<st?6:0);break;case it:ut=(st-rt)/ft+2;break;case st:ut=(rt-it)/ft+4;break}ut/=6}return[ut,dt,ht,nt[3]]}function hue2rgb(nt,rt,it){return it<0&&(it+=1),it>1&&(it-=1),it<1/6?nt+(rt-nt)*6*it:it<1/2?rt:it<2/3?nt+(rt-nt)*(2/3-it)*6:nt}function hslToRgb(nt){var rt=nt[0],it=nt[1],st=nt[2],lt,ct,ut;if(it===0)lt=st,ut=st,ct=st;else{var dt=st<.5?st*(1+it):st+it-st*it,ht=2*st-dt;lt=hue2rgb(ht,dt,rt+1/3),ct=hue2rgb(ht,dt,rt),ut=hue2rgb(ht,dt,rt-1/3)}return[lt,ct,ut,nt[3]]}function linear(nt,rt,it,st,lt){if((st===void 0||lt===void 0)&&(st=rt,lt=it,rt=0,it=1),it<rt){var ct=it;it=rt,rt=ct}if(nt<=rt)return st;if(nt>=it)return lt;var ut=it===rt?0:(nt-rt)/(it-rt);if(!st.length)return st+(lt-st)*ut;var dt,ht=st.length,ft=createTypedArray("float32",ht);for(dt=0;dt<ht;dt+=1)ft[dt]=st[dt]+(lt[dt]-st[dt])*ut;return ft}function random(nt,rt){if(rt===void 0&&(nt===void 0?(nt=0,rt=1):(rt=nt,nt=void 0)),rt.length){var it,st=rt.length;nt||(nt=createTypedArray("float32",st));var lt=createTypedArray("float32",st),ct=BMMath.random();for(it=0;it<st;it+=1)lt[it]=nt[it]+ct*(rt[it]-nt[it]);return lt}nt===void 0&&(nt=0);var ut=BMMath.random();return nt+ut*(rt-nt)}function createPath(nt,rt,it,st){var lt,ct=nt.length,ut=shapePool.newElement();ut.setPathData(!!st,ct);var dt=[0,0],ht,ft;for(lt=0;lt<ct;lt+=1)ht=rt&&rt[lt]?rt[lt]:dt,ft=it&&it[lt]?it[lt]:dt,ut.setTripleAt(nt[lt][0],nt[lt][1],ft[0]+nt[lt][0],ft[1]+nt[lt][1],ht[0]+nt[lt][0],ht[1]+nt[lt][1],lt,!0);return ut}function initiateExpression(elem,data,property){function noOp(nt){return nt}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function nt(rt,it){var st,lt,ct=this.pv.length?this.pv.length:1,ut=createTypedArray("float32",ct);rt=5;var dt=Math.floor(time*rt);for(st=0,lt=0;st<dt;){for(lt=0;lt<ct;lt+=1)ut[lt]+=-it+it*2*BMMath.random();st+=1}var ht=time*rt,ft=ht-Math.floor(ht),pt=createTypedArray("float32",ct);if(ct>1){for(lt=0;lt<ct;lt+=1)pt[lt]=this.pv[lt]+ut[lt]+(-it+it*2*BMMath.random())*ft;return pt}return this.pv+ut[0]+(-it+it*2*BMMath.random())*ft}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(nt,rt){return loopIn(nt,rt,!0)}function loopOutDuration(nt,rt){return loopOut(nt,rt,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(nt,rt){var it=[rt[0]-nt[0],rt[1]-nt[1],rt[2]-nt[2]],st=Math.atan2(it[0],Math.sqrt(it[1]*it[1]+it[2]*it[2]))/degToRads,lt=-Math.atan2(it[1],it[2])/degToRads;return[lt,st,0]}function easeOut(nt,rt,it,st,lt){return applyEase(easeOutBez,nt,rt,it,st,lt)}function easeIn(nt,rt,it,st,lt){return applyEase(easeInBez,nt,rt,it,st,lt)}function ease(nt,rt,it,st,lt){return applyEase(easeInOutBez,nt,rt,it,st,lt)}function applyEase(nt,rt,it,st,lt,ct){lt===void 0?(lt=it,ct=st):rt=(rt-it)/(st-it),rt>1?rt=1:rt<0&&(rt=0);var ut=nt(rt);if($bm_isInstanceOfArray(lt)){var dt,ht=lt.length,ft=createTypedArray("float32",ht);for(dt=0;dt<ht;dt+=1)ft[dt]=(ct[dt]-lt[dt])*ut+lt[dt];return ft}return(ct-lt)*ut+lt}function nearestKey(nt){var rt,it=data.k.length,st,lt;if(!data.k.length||typeof data.k[0]=="number")st=0,lt=0;else if(st=-1,nt*=elem.comp.globalData.frameRate,nt<data.k[0].t)st=1,lt=data.k[0].t;else{for(rt=0;rt<it-1;rt+=1)if(nt===data.k[rt].t){st=rt+1,lt=data.k[rt].t;break}else if(nt>data.k[rt].t&&nt<data.k[rt+1].t){nt-data.k[rt].t>data.k[rt+1].t-nt?(st=rt+2,lt=data.k[rt+1].t):(st=rt+1,lt=data.k[rt].t);break}st===-1&&(st=rt+1,lt=data.k[rt].t)}var ct={};return ct.index=st,ct.time=lt/elem.comp.globalData.frameRate,ct}function key(nt){var rt,it,st;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+nt);nt-=1,rt={time:data.k[nt].t/elem.comp.globalData.frameRate,value:[]};var lt=Object.prototype.hasOwnProperty.call(data.k[nt],"s")?data.k[nt].s:data.k[nt-1].e;for(st=lt.length,it=0;it<st;it+=1)rt[it]=lt[it],rt.value[it]=lt[it];return rt}function framesToTime(nt,rt){return rt||(rt=elem.comp.globalData.frameRate),nt/rt}function timeToFrames(nt,rt){return!nt&&nt!==0&&(nt=time),rt||(rt=elem.comp.globalData.frameRate),nt*rt}function seedRandom(nt){BMMath.seedrandom(randSeed+nt)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(nt,rt){return typeof value=="string"?rt===void 0?value.substring(nt):value.substring(nt,rt):""}function substr(nt,rt){return typeof value=="string"?rt===void 0?value.substr(nt):value.substr(nt,rt):""}function posterizeTime(nt){time=nt===0?0:Math.floor(time*nt)/nt,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(nt){return value=nt,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var nt={};nt.initExpressions=rt,nt.resetFrame=ExpressionManager.resetFrame;function rt(it){var st=0,lt=[];function ct(){st+=1}function ut(){st-=1,st===0&&ht()}function dt(ft){lt.indexOf(ft)===-1&&lt.push(ft)}function ht(){var ft,pt=lt.length;for(ft=0;ft<pt;ft+=1)lt[ft].release();lt.length=0}it.renderer.compInterface=CompExpressionInterface(it.renderer),it.renderer.globalData.projectInterface.registerComposition(it.renderer),it.renderer.globalData.pushExpression=ct,it.renderer.globalData.popExpression=ut,it.renderer.globalData.registerExpressionProperty=dt}return nt}(),MaskManagerInterface=function(){function nt(it,st){this._mask=it,this._data=st}Object.defineProperty(nt.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(nt.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var rt=function(st){var lt=createSizedArray(st.viewData.length),ct,ut=st.viewData.length;for(ct=0;ct<ut;ct+=1)lt[ct]=new nt(st.viewData[ct],st.masksProperties[ct]);var dt=function(ft){for(ct=0;ct<ut;){if(st.masksProperties[ct].nm===ft)return lt[ct];ct+=1}return null};return dt};return rt}(),ExpressionPropertyInterface=function(){var nt={pv:0,v:0,mult:1},rt={pv:[0,0,0],v:[0,0,0],mult:1};function it(ut,dt,ht){Object.defineProperty(ut,"velocity",{get:function(){return dt.getVelocityAtTime(dt.comp.currentFrame)}}),ut.numKeys=dt.keyframes?dt.keyframes.length:0,ut.key=function(ft){if(!ut.numKeys)return 0;var pt="";"s"in dt.keyframes[ft-1]?pt=dt.keyframes[ft-1].s:"e"in dt.keyframes[ft-2]?pt=dt.keyframes[ft-2].e:pt=dt.keyframes[ft-2].s;var mt=ht==="unidimensional"?new Number(pt):Object.assign({},pt);return mt.time=dt.keyframes[ft-1].t/dt.elem.comp.globalData.frameRate,mt.value=ht==="unidimensional"?pt[0]:pt,mt},ut.valueAtTime=dt.getValueAtTime,ut.speedAtTime=dt.getSpeedAtTime,ut.velocityAtTime=dt.getVelocityAtTime,ut.propertyGroup=dt.propertyGroup}function st(ut){(!ut||!("pv"in ut))&&(ut=nt);var dt=1/ut.mult,ht=ut.pv*dt,ft=new Number(ht);return ft.value=ht,it(ft,ut,"unidimensional"),function(){return ut.k&&ut.getValue(),ht=ut.v*dt,ft.value!==ht&&(ft=new Number(ht),ft.value=ht,it(ft,ut,"unidimensional")),ft}}function lt(ut){(!ut||!("pv"in ut))&&(ut=rt);var dt=1/ut.mult,ht=ut.data&&ut.data.l||ut.pv.length,ft=createTypedArray("float32",ht),pt=createTypedArray("float32",ht);return ft.value=pt,it(ft,ut,"multidimensional"),function(){ut.k&&ut.getValue();for(var mt=0;mt<ht;mt+=1)pt[mt]=ut.v[mt]*dt,ft[mt]=pt[mt];return ft}}function ct(){return nt}return function(ut){return ut?ut.propType==="unidimensional"?st(ut):lt(ut):ct}}(),TransformExpressionInterface=function(){return function(nt){function rt(ut){switch(ut){case"scale":case"Scale":case"ADBE Scale":case 6:return rt.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return rt.rotation;case"ADBE Rotate X":return rt.xRotation;case"ADBE Rotate Y":return rt.yRotation;case"position":case"Position":case"ADBE Position":case 2:return rt.position;case"ADBE Position_0":return rt.xPosition;case"ADBE Position_1":return rt.yPosition;case"ADBE Position_2":return rt.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return rt.anchorPoint;case"opacity":case"Opacity":case 11:return rt.opacity;default:return null}}Object.defineProperty(rt,"rotation",{get:ExpressionPropertyInterface(nt.r||nt.rz)}),Object.defineProperty(rt,"zRotation",{get:ExpressionPropertyInterface(nt.rz||nt.r)}),Object.defineProperty(rt,"xRotation",{get:ExpressionPropertyInterface(nt.rx)}),Object.defineProperty(rt,"yRotation",{get:ExpressionPropertyInterface(nt.ry)}),Object.defineProperty(rt,"scale",{get:ExpressionPropertyInterface(nt.s)});var it,st,lt,ct;return nt.p?ct=ExpressionPropertyInterface(nt.p):(it=ExpressionPropertyInterface(nt.px),st=ExpressionPropertyInterface(nt.py),nt.pz&&(lt=ExpressionPropertyInterface(nt.pz))),Object.defineProperty(rt,"position",{get:function(){return nt.p?ct():[it(),st(),lt?lt():0]}}),Object.defineProperty(rt,"xPosition",{get:ExpressionPropertyInterface(nt.px)}),Object.defineProperty(rt,"yPosition",{get:ExpressionPropertyInterface(nt.py)}),Object.defineProperty(rt,"zPosition",{get:ExpressionPropertyInterface(nt.pz)}),Object.defineProperty(rt,"anchorPoint",{get:ExpressionPropertyInterface(nt.a)}),Object.defineProperty(rt,"opacity",{get:ExpressionPropertyInterface(nt.o)}),Object.defineProperty(rt,"skew",{get:ExpressionPropertyInterface(nt.sk)}),Object.defineProperty(rt,"skewAxis",{get:ExpressionPropertyInterface(nt.sa)}),Object.defineProperty(rt,"orientation",{get:ExpressionPropertyInterface(nt.or)}),rt}}(),LayerExpressionInterface=function(){function nt(ft){var pt=new Matrix;if(ft!==void 0){var mt=this._elem.finalTransform.mProp.getValueAtTime(ft);mt.clone(pt)}else{var gt=this._elem.finalTransform.mProp;gt.applyToMatrix(pt)}return pt}function rt(ft,pt){var mt=this.getMatrix(pt);return mt.props[12]=0,mt.props[13]=0,mt.props[14]=0,this.applyPoint(mt,ft)}function it(ft,pt){var mt=this.getMatrix(pt);return this.applyPoint(mt,ft)}function st(ft,pt){var mt=this.getMatrix(pt);return mt.props[12]=0,mt.props[13]=0,mt.props[14]=0,this.invertPoint(mt,ft)}function lt(ft,pt){var mt=this.getMatrix(pt);return this.invertPoint(mt,ft)}function ct(ft,pt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var mt,gt=this._elem.hierarchy.length;for(mt=0;mt<gt;mt+=1)this._elem.hierarchy[mt].finalTransform.mProp.applyToMatrix(ft)}return ft.applyToPointArray(pt[0],pt[1],pt[2]||0)}function ut(ft,pt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var mt,gt=this._elem.hierarchy.length;for(mt=0;mt<gt;mt+=1)this._elem.hierarchy[mt].finalTransform.mProp.applyToMatrix(ft)}return ft.inversePoint(pt)}function dt(ft){var pt=new Matrix;if(pt.reset(),this._elem.finalTransform.mProp.applyToMatrix(pt),this._elem.hierarchy&&this._elem.hierarchy.length){var mt,gt=this._elem.hierarchy.length;for(mt=0;mt<gt;mt+=1)this._elem.hierarchy[mt].finalTransform.mProp.applyToMatrix(pt);return pt.inversePoint(ft)}return pt.inversePoint(ft)}function ht(){return[1,1,1,1]}return function(ft){var pt;function mt(vt){xt.mask=new MaskManagerInterface(vt,ft)}function gt(vt){xt.effect=vt}function xt(vt){switch(vt){case"ADBE Root Vectors Group":case"Contents":case 2:return xt.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return pt;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return xt.effect;case"ADBE Text Properties":return xt.textInterface;default:return null}}xt.getMatrix=nt,xt.invertPoint=ut,xt.applyPoint=ct,xt.toWorld=it,xt.toWorldVec=rt,xt.fromWorld=lt,xt.fromWorldVec=st,xt.toComp=it,xt.fromComp=dt,xt.sampleImage=ht,xt.sourceRectAtTime=ft.sourceRectAtTime.bind(ft),xt._elem=ft,pt=TransformExpressionInterface(ft.finalTransform.mProp);var yt=getDescriptor(pt,"anchorPoint");return Object.defineProperties(xt,{hasParent:{get:function(){return ft.hierarchy.length}},parent:{get:function(){return ft.hierarchy[0].layerInterface}},rotation:getDescriptor(pt,"rotation"),scale:getDescriptor(pt,"scale"),position:getDescriptor(pt,"position"),opacity:getDescriptor(pt,"opacity"),anchorPoint:yt,anchor_point:yt,transform:{get:function(){return pt}},active:{get:function(){return ft.isInRange}}}),xt.startTime=ft.data.st,xt.index=ft.data.ind,xt.source=ft.data.refId,xt.height=ft.data.ty===0?ft.data.h:100,xt.width=ft.data.ty===0?ft.data.w:100,xt.inPoint=ft.data.ip/ft.comp.globalData.frameRate,xt.outPoint=ft.data.op/ft.comp.globalData.frameRate,xt._name=ft.data.nm,xt.registerMaskInterface=mt,xt.registerEffectsInterface=gt,xt}}(),propertyGroupFactory=function(){return function(nt,rt){return function(it){return it=it===void 0?1:it,it<=0?nt:rt(it-1)}}}(),PropertyInterface=function(){return function(nt,rt){var it={_name:nt};function st(lt){return lt=lt===void 0?1:lt,lt<=0?it:rt(lt-1)}return st}}(),EffectsExpressionInterface=function(){var nt={createEffectsInterface:rt};function rt(lt,ct){if(lt.effectsManager){var ut=[],dt=lt.data.ef,ht,ft=lt.effectsManager.effectElements.length;for(ht=0;ht<ft;ht+=1)ut.push(it(dt[ht],lt.effectsManager.effectElements[ht],ct,lt));var pt=lt.data.ef||[],mt=function(xt){for(ht=0,ft=pt.length;ht<ft;){if(xt===pt[ht].nm||xt===pt[ht].mn||xt===pt[ht].ix)return ut[ht];ht+=1}return null};return Object.defineProperty(mt,"numProperties",{get:function(){return pt.length}}),mt}return null}function it(lt,ct,ut,dt){function ht(xt){for(var yt=lt.ef,vt=0,St=yt.length;vt<St;){if(xt===yt[vt].nm||xt===yt[vt].mn||xt===yt[vt].ix)return yt[vt].ty===5?pt[vt]:pt[vt]();vt+=1}throw new Error}var ft=propertyGroupFactory(ht,ut),pt=[],mt,gt=lt.ef.length;for(mt=0;mt<gt;mt+=1)lt.ef[mt].ty===5?pt.push(it(lt.ef[mt],ct.effectElements[mt],ct.effectElements[mt].propertyGroup,dt)):pt.push(st(ct.effectElements[mt],lt.ef[mt].ty,dt,ft));return lt.mn==="ADBE Color Control"&&Object.defineProperty(ht,"color",{get:function(){return pt[0]()}}),Object.defineProperties(ht,{numProperties:{get:function(){return lt.np}},_name:{value:lt.nm},propertyGroup:{value:ft}}),ht.enabled=lt.en!==0,ht.active=ht.enabled,ht}function st(lt,ct,ut,dt){var ht=ExpressionPropertyInterface(lt.p);function ft(){return ct===10?ut.comp.compInterface(lt.p.v):ht()}return lt.p.setGroupProperty&&lt.p.setGroupProperty(PropertyInterface("",dt)),ft}return nt}(),ShapePathInterface=function(){return function(rt,it,st){var lt=it.sh;function ct(dt){return dt==="Shape"||dt==="shape"||dt==="Path"||dt==="path"||dt==="ADBE Vector Shape"||dt===2?ct.path:null}var ut=propertyGroupFactory(ct,st);return lt.setGroupProperty(PropertyInterface("Path",ut)),Object.defineProperties(ct,{path:{get:function(){return lt.k&&lt.getValue(),lt}},shape:{get:function(){return lt.k&&lt.getValue(),lt}},_name:{value:rt.nm},ix:{value:rt.ix},propertyIndex:{value:rt.ix},mn:{value:rt.mn},propertyGroup:{value:st}}),ct}}(),ShapeExpressionInterface=function(){function nt(yt,vt,St){var wt=[],Et,Rt=yt?yt.length:0;for(Et=0;Et<Rt;Et+=1)yt[Et].ty==="gr"?wt.push(it(yt[Et],vt[Et],St)):yt[Et].ty==="fl"?wt.push(st(yt[Et],vt[Et],St)):yt[Et].ty==="st"?wt.push(ut(yt[Et],vt[Et],St)):yt[Et].ty==="tm"?wt.push(dt(yt[Et],vt[Et],St)):yt[Et].ty==="tr"||(yt[Et].ty==="el"?wt.push(ft(yt[Et],vt[Et],St)):yt[Et].ty==="sr"?wt.push(pt(yt[Et],vt[Et],St)):yt[Et].ty==="sh"?wt.push(ShapePathInterface(yt[Et],vt[Et],St)):yt[Et].ty==="rc"?wt.push(mt(yt[Et],vt[Et],St)):yt[Et].ty==="rd"?wt.push(gt(yt[Et],vt[Et],St)):yt[Et].ty==="rp"?wt.push(xt(yt[Et],vt[Et],St)):yt[Et].ty==="gf"?wt.push(lt(yt[Et],vt[Et],St)):wt.push(ct(yt[Et],vt[Et])));return wt}function rt(yt,vt,St){var wt,Et=function(It){for(var At=0,Dt=wt.length;At<Dt;){if(wt[At]._name===It||wt[At].mn===It||wt[At].propertyIndex===It||wt[At].ix===It||wt[At].ind===It)return wt[At];At+=1}return typeof It=="number"?wt[It-1]:null};Et.propertyGroup=propertyGroupFactory(Et,St),wt=nt(yt.it,vt.it,Et.propertyGroup),Et.numProperties=wt.length;var Rt=ht(yt.it[yt.it.length-1],vt.it[vt.it.length-1],Et.propertyGroup);return Et.transform=Rt,Et.propertyIndex=yt.cix,Et._name=yt.nm,Et}function it(yt,vt,St){var wt=function(It){switch(It){case"ADBE Vectors Group":case"Contents":case 2:return wt.content;default:return wt.transform}};wt.propertyGroup=propertyGroupFactory(wt,St);var Et=rt(yt,vt,wt.propertyGroup),Rt=ht(yt.it[yt.it.length-1],vt.it[vt.it.length-1],wt.propertyGroup);return wt.content=Et,wt.transform=Rt,Object.defineProperty(wt,"_name",{get:function(){return yt.nm}}),wt.numProperties=yt.np,wt.propertyIndex=yt.ix,wt.nm=yt.nm,wt.mn=yt.mn,wt}function st(yt,vt,St){function wt(Et){return Et==="Color"||Et==="color"?wt.color:Et==="Opacity"||Et==="opacity"?wt.opacity:null}return Object.defineProperties(wt,{color:{get:ExpressionPropertyInterface(vt.c)},opacity:{get:ExpressionPropertyInterface(vt.o)},_name:{value:yt.nm},mn:{value:yt.mn}}),vt.c.setGroupProperty(PropertyInterface("Color",St)),vt.o.setGroupProperty(PropertyInterface("Opacity",St)),wt}function lt(yt,vt,St){function wt(Et){return Et==="Start Point"||Et==="start point"?wt.startPoint:Et==="End Point"||Et==="end point"?wt.endPoint:Et==="Opacity"||Et==="opacity"?wt.opacity:null}return Object.defineProperties(wt,{startPoint:{get:ExpressionPropertyInterface(vt.s)},endPoint:{get:ExpressionPropertyInterface(vt.e)},opacity:{get:ExpressionPropertyInterface(vt.o)},type:{get:function(){return"a"}},_name:{value:yt.nm},mn:{value:yt.mn}}),vt.s.setGroupProperty(PropertyInterface("Start Point",St)),vt.e.setGroupProperty(PropertyInterface("End Point",St)),vt.o.setGroupProperty(PropertyInterface("Opacity",St)),wt}function ct(){function yt(){return null}return yt}function ut(yt,vt,St){var wt=propertyGroupFactory(Dt,St),Et=propertyGroupFactory(At,wt);function Rt(jt){Object.defineProperty(At,yt.d[jt].nm,{get:ExpressionPropertyInterface(vt.d.dataProps[jt].p)})}var Tt,It=yt.d?yt.d.length:0,At={};for(Tt=0;Tt<It;Tt+=1)Rt(Tt),vt.d.dataProps[Tt].p.setGroupProperty(Et);function Dt(jt){return jt==="Color"||jt==="color"?Dt.color:jt==="Opacity"||jt==="opacity"?Dt.opacity:jt==="Stroke Width"||jt==="stroke width"?Dt.strokeWidth:null}return Object.defineProperties(Dt,{color:{get:ExpressionPropertyInterface(vt.c)},opacity:{get:ExpressionPropertyInterface(vt.o)},strokeWidth:{get:ExpressionPropertyInterface(vt.w)},dash:{get:function(){return At}},_name:{value:yt.nm},mn:{value:yt.mn}}),vt.c.setGroupProperty(PropertyInterface("Color",wt)),vt.o.setGroupProperty(PropertyInterface("Opacity",wt)),vt.w.setGroupProperty(PropertyInterface("Stroke Width",wt)),Dt}function dt(yt,vt,St){function wt(Rt){return Rt===yt.e.ix||Rt==="End"||Rt==="end"?wt.end:Rt===yt.s.ix?wt.start:Rt===yt.o.ix?wt.offset:null}var Et=propertyGroupFactory(wt,St);return wt.propertyIndex=yt.ix,vt.s.setGroupProperty(PropertyInterface("Start",Et)),vt.e.setGroupProperty(PropertyInterface("End",Et)),vt.o.setGroupProperty(PropertyInterface("Offset",Et)),wt.propertyIndex=yt.ix,wt.propertyGroup=St,Object.defineProperties(wt,{start:{get:ExpressionPropertyInterface(vt.s)},end:{get:ExpressionPropertyInterface(vt.e)},offset:{get:ExpressionPropertyInterface(vt.o)},_name:{value:yt.nm}}),wt.mn=yt.mn,wt}function ht(yt,vt,St){function wt(Rt){return yt.a.ix===Rt||Rt==="Anchor Point"?wt.anchorPoint:yt.o.ix===Rt||Rt==="Opacity"?wt.opacity:yt.p.ix===Rt||Rt==="Position"?wt.position:yt.r.ix===Rt||Rt==="Rotation"||Rt==="ADBE Vector Rotation"?wt.rotation:yt.s.ix===Rt||Rt==="Scale"?wt.scale:yt.sk&&yt.sk.ix===Rt||Rt==="Skew"?wt.skew:yt.sa&&yt.sa.ix===Rt||Rt==="Skew Axis"?wt.skewAxis:null}var Et=propertyGroupFactory(wt,St);return vt.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",Et)),vt.transform.mProps.p.setGroupProperty(PropertyInterface("Position",Et)),vt.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",Et)),vt.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",Et)),vt.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",Et)),vt.transform.mProps.sk&&(vt.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",Et)),vt.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",Et))),vt.transform.op.setGroupProperty(PropertyInterface("Opacity",Et)),Object.defineProperties(wt,{opacity:{get:ExpressionPropertyInterface(vt.transform.mProps.o)},position:{get:ExpressionPropertyInterface(vt.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(vt.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(vt.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(vt.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(vt.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(vt.transform.mProps.sa)},_name:{value:yt.nm}}),wt.ty="tr",wt.mn=yt.mn,wt.propertyGroup=St,wt}function ft(yt,vt,St){function wt(Tt){return yt.p.ix===Tt?wt.position:yt.s.ix===Tt?wt.size:null}var Et=propertyGroupFactory(wt,St);wt.propertyIndex=yt.ix;var Rt=vt.sh.ty==="tm"?vt.sh.prop:vt.sh;return Rt.s.setGroupProperty(PropertyInterface("Size",Et)),Rt.p.setGroupProperty(PropertyInterface("Position",Et)),Object.defineProperties(wt,{size:{get:ExpressionPropertyInterface(Rt.s)},position:{get:ExpressionPropertyInterface(Rt.p)},_name:{value:yt.nm}}),wt.mn=yt.mn,wt}function pt(yt,vt,St){function wt(Tt){return yt.p.ix===Tt?wt.position:yt.r.ix===Tt?wt.rotation:yt.pt.ix===Tt?wt.points:yt.or.ix===Tt||Tt==="ADBE Vector Star Outer Radius"?wt.outerRadius:yt.os.ix===Tt?wt.outerRoundness:yt.ir&&(yt.ir.ix===Tt||Tt==="ADBE Vector Star Inner Radius")?wt.innerRadius:yt.is&&yt.is.ix===Tt?wt.innerRoundness:null}var Et=propertyGroupFactory(wt,St),Rt=vt.sh.ty==="tm"?vt.sh.prop:vt.sh;return wt.propertyIndex=yt.ix,Rt.or.setGroupProperty(PropertyInterface("Outer Radius",Et)),Rt.os.setGroupProperty(PropertyInterface("Outer Roundness",Et)),Rt.pt.setGroupProperty(PropertyInterface("Points",Et)),Rt.p.setGroupProperty(PropertyInterface("Position",Et)),Rt.r.setGroupProperty(PropertyInterface("Rotation",Et)),yt.ir&&(Rt.ir.setGroupProperty(PropertyInterface("Inner Radius",Et)),Rt.is.setGroupProperty(PropertyInterface("Inner Roundness",Et))),Object.defineProperties(wt,{position:{get:ExpressionPropertyInterface(Rt.p)},rotation:{get:ExpressionPropertyInterface(Rt.r)},points:{get:ExpressionPropertyInterface(Rt.pt)},outerRadius:{get:ExpressionPropertyInterface(Rt.or)},outerRoundness:{get:ExpressionPropertyInterface(Rt.os)},innerRadius:{get:ExpressionPropertyInterface(Rt.ir)},innerRoundness:{get:ExpressionPropertyInterface(Rt.is)},_name:{value:yt.nm}}),wt.mn=yt.mn,wt}function mt(yt,vt,St){function wt(Tt){return yt.p.ix===Tt?wt.position:yt.r.ix===Tt?wt.roundness:yt.s.ix===Tt||Tt==="Size"||Tt==="ADBE Vector Rect Size"?wt.size:null}var Et=propertyGroupFactory(wt,St),Rt=vt.sh.ty==="tm"?vt.sh.prop:vt.sh;return wt.propertyIndex=yt.ix,Rt.p.setGroupProperty(PropertyInterface("Position",Et)),Rt.s.setGroupProperty(PropertyInterface("Size",Et)),Rt.r.setGroupProperty(PropertyInterface("Rotation",Et)),Object.defineProperties(wt,{position:{get:ExpressionPropertyInterface(Rt.p)},roundness:{get:ExpressionPropertyInterface(Rt.r)},size:{get:ExpressionPropertyInterface(Rt.s)},_name:{value:yt.nm}}),wt.mn=yt.mn,wt}function gt(yt,vt,St){function wt(Tt){return yt.r.ix===Tt||Tt==="Round Corners 1"?wt.radius:null}var Et=propertyGroupFactory(wt,St),Rt=vt;return wt.propertyIndex=yt.ix,Rt.rd.setGroupProperty(PropertyInterface("Radius",Et)),Object.defineProperties(wt,{radius:{get:ExpressionPropertyInterface(Rt.rd)},_name:{value:yt.nm}}),wt.mn=yt.mn,wt}function xt(yt,vt,St){function wt(Tt){return yt.c.ix===Tt||Tt==="Copies"?wt.copies:yt.o.ix===Tt||Tt==="Offset"?wt.offset:null}var Et=propertyGroupFactory(wt,St),Rt=vt;return wt.propertyIndex=yt.ix,Rt.c.setGroupProperty(PropertyInterface("Copies",Et)),Rt.o.setGroupProperty(PropertyInterface("Offset",Et)),Object.defineProperties(wt,{copies:{get:ExpressionPropertyInterface(Rt.c)},offset:{get:ExpressionPropertyInterface(Rt.o)},_name:{value:yt.nm}}),wt.mn=yt.mn,wt}return function(yt,vt,St){var wt;function Et(Tt){if(typeof Tt=="number")return Tt=Tt===void 0?1:Tt,Tt===0?St:wt[Tt-1];for(var It=0,At=wt.length;It<At;){if(wt[It]._name===Tt)return wt[It];It+=1}return null}function Rt(){return St}return Et.propertyGroup=propertyGroupFactory(Et,Rt),wt=nt(yt,vt,Et.propertyGroup),Et.numProperties=wt.length,Et._name="Contents",Et}}(),TextExpressionInterface=function(){return function(nt){var rt;function it(st){switch(st){case"ADBE Text Document":return it.sourceText;default:return null}}return Object.defineProperty(it,"sourceText",{get:function(){nt.textProperty.getValue();var lt=nt.textProperty.currentData.t;return(!rt||lt!==rt.value)&&(rt=new String(lt),rt.value=lt||new String(lt),Object.defineProperty(rt,"style",{get:function(){return{fillColor:nt.textProperty.currentData.fc}}})),rt}}),it}}();function _typeof(nt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(it){return typeof it}:_typeof=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},_typeof(nt)}var FootageInterface=function(){var nt=function(st){var lt="",ct=st.getFootageData();function ut(){return lt="",ct=st.getFootageData(),dt}function dt(ht){if(ct[ht])return lt=ht,ct=ct[ht],_typeof(ct)==="object"?dt:ct;var ft=ht.indexOf(lt);if(ft!==-1){var pt=parseInt(ht.substr(ft+lt.length),10);return ct=ct[pt],_typeof(ct)==="object"?dt:ct}return""}return ut},rt=function(st){function lt(ct){return ct==="Outline"?lt.outlineInterface():null}return lt._name="Outline",lt.outlineInterface=nt(st),lt};return function(it){function st(lt){return lt==="Data"?st.dataInterface:null}return st._name="Data",st.dataInterface=rt(it),st}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(nt){return interfaces[nt]||null}var expressionHelpers=function(){function nt(ut,dt,ht){dt.x&&(ht.k=!0,ht.x=!0,ht.initiateExpression=ExpressionManager.initiateExpression,ht.effectsSequence.push(ht.initiateExpression(ut,dt,ht).bind(ht)))}function rt(ut){return ut*=this.elem.globalData.frameRate,ut-=this.offsetTime,ut!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<ut?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(ut,this._cachingAtTime),this._cachingAtTime.lastFrame=ut),this._cachingAtTime.value}function it(ut){var dt=-.01,ht=this.getValueAtTime(ut),ft=this.getValueAtTime(ut+dt),pt=0;if(ht.length){var mt;for(mt=0;mt<ht.length;mt+=1)pt+=Math.pow(ft[mt]-ht[mt],2);pt=Math.sqrt(pt)*100}else pt=0;return pt}function st(ut){if(this.vel!==void 0)return this.vel;var dt=-.001,ht=this.getValueAtTime(ut),ft=this.getValueAtTime(ut+dt),pt;if(ht.length){pt=createTypedArray("float32",ht.length);var mt;for(mt=0;mt<ht.length;mt+=1)pt[mt]=(ft[mt]-ht[mt])/dt}else pt=(ft-ht)/dt;return pt}function lt(){return this.pv}function ct(ut){this.propertyGroup=ut}return{searchExpressions:nt,getSpeedAtTime:it,getVelocityAtTime:st,getValueAtTime:rt,getStaticValueAtTime:lt,setGroupProperty:ct}}();function addPropertyDecorator(){function nt(gt,xt,yt){if(!this.k||!this.keyframes)return this.pv;gt=gt?gt.toLowerCase():"";var vt=this.comp.renderedFrame,St=this.keyframes,wt=St[St.length-1].t;if(vt<=wt)return this.pv;var Et,Rt;yt?(xt?Et=Math.abs(wt-this.elem.comp.globalData.frameRate*xt):Et=Math.max(0,wt-this.elem.data.ip),Rt=wt-Et):((!xt||xt>St.length-1)&&(xt=St.length-1),Rt=St[St.length-1-xt].t,Et=wt-Rt);var Tt,It,At;if(gt==="pingpong"){var Dt=Math.floor((vt-Rt)/Et);if(Dt%2!==0)return this.getValueAtTime((Et-(vt-Rt)%Et+Rt)/this.comp.globalData.frameRate,0)}else if(gt==="offset"){var jt=this.getValueAtTime(Rt/this.comp.globalData.frameRate,0),Ft=this.getValueAtTime(wt/this.comp.globalData.frameRate,0),Lt=this.getValueAtTime(((vt-Rt)%Et+Rt)/this.comp.globalData.frameRate,0),Mt=Math.floor((vt-Rt)/Et);if(this.pv.length){for(At=new Array(jt.length),It=At.length,Tt=0;Tt<It;Tt+=1)At[Tt]=(Ft[Tt]-jt[Tt])*Mt+Lt[Tt];return At}return(Ft-jt)*Mt+Lt}else if(gt==="continue"){var Ot=this.getValueAtTime(wt/this.comp.globalData.frameRate,0),Nt=this.getValueAtTime((wt-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(At=new Array(Ot.length),It=At.length,Tt=0;Tt<It;Tt+=1)At[Tt]=Ot[Tt]+(Ot[Tt]-Nt[Tt])*((vt-wt)/this.comp.globalData.frameRate)/5e-4;return At}return Ot+(Ot-Nt)*((vt-wt)/.001)}return this.getValueAtTime(((vt-Rt)%Et+Rt)/this.comp.globalData.frameRate,0)}function rt(gt,xt,yt){if(!this.k)return this.pv;gt=gt?gt.toLowerCase():"";var vt=this.comp.renderedFrame,St=this.keyframes,wt=St[0].t;if(vt>=wt)return this.pv;var Et,Rt;yt?(xt?Et=Math.abs(this.elem.comp.globalData.frameRate*xt):Et=Math.max(0,this.elem.data.op-wt),Rt=wt+Et):((!xt||xt>St.length-1)&&(xt=St.length-1),Rt=St[xt].t,Et=Rt-wt);var Tt,It,At;if(gt==="pingpong"){var Dt=Math.floor((wt-vt)/Et);if(Dt%2===0)return this.getValueAtTime(((wt-vt)%Et+wt)/this.comp.globalData.frameRate,0)}else if(gt==="offset"){var jt=this.getValueAtTime(wt/this.comp.globalData.frameRate,0),Ft=this.getValueAtTime(Rt/this.comp.globalData.frameRate,0),Lt=this.getValueAtTime((Et-(wt-vt)%Et+wt)/this.comp.globalData.frameRate,0),Mt=Math.floor((wt-vt)/Et)+1;if(this.pv.length){for(At=new Array(jt.length),It=At.length,Tt=0;Tt<It;Tt+=1)At[Tt]=Lt[Tt]-(Ft[Tt]-jt[Tt])*Mt;return At}return Lt-(Ft-jt)*Mt}else if(gt==="continue"){var Ot=this.getValueAtTime(wt/this.comp.globalData.frameRate,0),Nt=this.getValueAtTime((wt+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(At=new Array(Ot.length),It=At.length,Tt=0;Tt<It;Tt+=1)At[Tt]=Ot[Tt]+(Ot[Tt]-Nt[Tt])*(wt-vt)/.001;return At}return Ot+(Ot-Nt)*(wt-vt)/.001}return this.getValueAtTime((Et-((wt-vt)%Et+wt))/this.comp.globalData.frameRate,0)}function it(gt,xt){if(!this.k)return this.pv;if(gt=(gt||.4)*.5,xt=Math.floor(xt||5),xt<=1)return this.pv;var yt=this.comp.renderedFrame/this.comp.globalData.frameRate,vt=yt-gt,St=yt+gt,wt=xt>1?(St-vt)/(xt-1):1,Et=0,Rt=0,Tt;this.pv.length?Tt=createTypedArray("float32",this.pv.length):Tt=0;for(var It;Et<xt;){if(It=this.getValueAtTime(vt+Et*wt),this.pv.length)for(Rt=0;Rt<this.pv.length;Rt+=1)Tt[Rt]+=It[Rt];else Tt+=It;Et+=1}if(this.pv.length)for(Rt=0;Rt<this.pv.length;Rt+=1)Tt[Rt]/=xt;else Tt/=xt;return Tt}function st(gt){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var xt=this._transformCachingAtTime.v;if(xt.cloneFromProps(this.pre.props),this.appliedTransformations<1){var yt=this.a.getValueAtTime(gt);xt.translate(-yt[0]*this.a.mult,-yt[1]*this.a.mult,yt[2]*this.a.mult)}if(this.appliedTransformations<2){var vt=this.s.getValueAtTime(gt);xt.scale(vt[0]*this.s.mult,vt[1]*this.s.mult,vt[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var St=this.sk.getValueAtTime(gt),wt=this.sa.getValueAtTime(gt);xt.skewFromAxis(-St*this.sk.mult,wt*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var Et=this.r.getValueAtTime(gt);xt.rotate(-Et*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Rt=this.rz.getValueAtTime(gt),Tt=this.ry.getValueAtTime(gt),It=this.rx.getValueAtTime(gt),At=this.or.getValueAtTime(gt);xt.rotateZ(-Rt*this.rz.mult).rotateY(Tt*this.ry.mult).rotateX(It*this.rx.mult).rotateZ(-At[2]*this.or.mult).rotateY(At[1]*this.or.mult).rotateX(At[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var Dt=this.px.getValueAtTime(gt),jt=this.py.getValueAtTime(gt);if(this.data.p.z){var Ft=this.pz.getValueAtTime(gt);xt.translate(Dt*this.px.mult,jt*this.py.mult,-Ft*this.pz.mult)}else xt.translate(Dt*this.px.mult,jt*this.py.mult,0)}else{var Lt=this.p.getValueAtTime(gt);xt.translate(Lt[0]*this.p.mult,Lt[1]*this.p.mult,-Lt[2]*this.p.mult)}return xt}function lt(){return this.v.clone(new Matrix)}var ct=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(gt,xt,yt){var vt=ct(gt,xt,yt);return vt.dynamicProperties.length?vt.getValueAtTime=st.bind(vt):vt.getValueAtTime=lt.bind(vt),vt.setGroupProperty=expressionHelpers.setGroupProperty,vt};var ut=PropertyFactory.getProp;PropertyFactory.getProp=function(gt,xt,yt,vt,St){var wt=ut(gt,xt,yt,vt,St);wt.kf?wt.getValueAtTime=expressionHelpers.getValueAtTime.bind(wt):wt.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(wt),wt.setGroupProperty=expressionHelpers.setGroupProperty,wt.loopOut=nt,wt.loopIn=rt,wt.smooth=it,wt.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(wt),wt.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(wt),wt.numKeys=xt.a===1?xt.k.length:0,wt.propertyIndex=xt.ix;var Et=0;return yt!==0&&(Et=createTypedArray("float32",xt.a===1?xt.k[0].s.length:xt.k.length)),wt._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:Et},expressionHelpers.searchExpressions(gt,xt,wt),wt.k&&St.addDynamicProperty(wt),wt};function dt(gt){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),gt*=this.elem.globalData.frameRate,gt-=this.offsetTime,gt!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<gt?this._caching.lastIndex:0,this._cachingAtTime.lastTime=gt,this.interpolateShape(gt,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var ht=ShapePropertyFactory.getConstructorFunction(),ft=ShapePropertyFactory.getKeyframedConstructorFunction();function pt(){}pt.prototype={vertices:function(xt,yt){this.k&&this.getValue();var vt=this.v;yt!==void 0&&(vt=this.getValueAtTime(yt,0));var St,wt=vt._length,Et=vt[xt],Rt=vt.v,Tt=createSizedArray(wt);for(St=0;St<wt;St+=1)xt==="i"||xt==="o"?Tt[St]=[Et[St][0]-Rt[St][0],Et[St][1]-Rt[St][1]]:Tt[St]=[Et[St][0],Et[St][1]];return Tt},points:function(xt){return this.vertices("v",xt)},inTangents:function(xt){return this.vertices("i",xt)},outTangents:function(xt){return this.vertices("o",xt)},isClosed:function(){return this.v.c},pointOnPath:function(xt,yt){var vt=this.v;yt!==void 0&&(vt=this.getValueAtTime(yt,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(vt));for(var St=this._segmentsLength,wt=St.lengths,Et=St.totalLength*xt,Rt=0,Tt=wt.length,It=0,At;Rt<Tt;){if(It+wt[Rt].addedLength>Et){var Dt=Rt,jt=vt.c&&Rt===Tt-1?0:Rt+1,Ft=(Et-It)/wt[Rt].addedLength;At=bez.getPointInSegment(vt.v[Dt],vt.v[jt],vt.o[Dt],vt.i[jt],Ft,wt[Rt]);break}else It+=wt[Rt].addedLength;Rt+=1}return At||(At=vt.c?[vt.v[0][0],vt.v[0][1]]:[vt.v[vt._length-1][0],vt.v[vt._length-1][1]]),At},vectorOnPath:function(xt,yt,vt){xt==1?xt=this.v.c:xt==0&&(xt=.999);var St=this.pointOnPath(xt,yt),wt=this.pointOnPath(xt+.001,yt),Et=wt[0]-St[0],Rt=wt[1]-St[1],Tt=Math.sqrt(Math.pow(Et,2)+Math.pow(Rt,2));if(Tt===0)return[0,0];var It=vt==="tangent"?[Et/Tt,Rt/Tt]:[-Rt/Tt,Et/Tt];return It},tangentOnPath:function(xt,yt){return this.vectorOnPath(xt,yt,"tangent")},normalOnPath:function(xt,yt){return this.vectorOnPath(xt,yt,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([pt],ht),extendPrototype([pt],ft),ft.prototype.getValueAtTime=dt,ft.prototype.initiateExpression=ExpressionManager.initiateExpression;var mt=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(gt,xt,yt,vt,St){var wt=mt(gt,xt,yt,vt,St);return wt.propertyIndex=xt.ix,wt.lock=!1,yt===3?expressionHelpers.searchExpressions(gt,xt.pt,wt):yt===4&&expressionHelpers.searchExpressions(gt,xt.ks,wt),wt.k&&gt.addDynamicProperty(wt),wt}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function nt(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(rt,it){var st=this.calculateExpression(it);if(rt.t!==st){var lt={};return this.copyData(lt,rt),lt.t=st.toString(),lt.__complete=!1,lt}return rt},TextProperty.prototype.searchProperty=function(){var rt=this.searchKeyframes(),it=this.searchExpressions();return this.kf=rt||it,this.kf},TextProperty.prototype.searchExpressions=nt}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function nt(rt,it){var st=createNS("feMerge");st.setAttribute("result",rt);var lt,ct;for(ct=0;ct<it.length;ct+=1)lt=createNS("feMergeNode"),lt.setAttribute("in",it[ct]),st.appendChild(lt),st.appendChild(lt);return st}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(nt,rt,it,st,lt){this.filterManager=rt;var ct=createNS("feColorMatrix");ct.setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","linearRGB"),ct.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=ct,ct.setAttribute("result",st+"_tint_1"),nt.appendChild(ct),ct=createNS("feColorMatrix"),ct.setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ct.setAttribute("result",st+"_tint_2"),nt.appendChild(ct),this.matrixFilter=ct;var ut=this.createMergeNode(st,[lt,st+"_tint_1",st+"_tint_2"]);nt.appendChild(ut)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(nt){if(nt||this.filterManager._mdf){var rt=this.filterManager.effectElements[0].p.v,it=this.filterManager.effectElements[1].p.v,st=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+st+" 0"),this.matrixFilter.setAttribute("values",it[0]-rt[0]+" 0 0 0 "+rt[0]+" "+(it[1]-rt[1])+" 0 0 0 "+rt[1]+" "+(it[2]-rt[2])+" 0 0 0 "+rt[2]+" 0 0 0 1 0")}};function SVGFillFilter(nt,rt,it,st){this.filterManager=rt;var lt=createNS("feColorMatrix");lt.setAttribute("type","matrix"),lt.setAttribute("color-interpolation-filters","sRGB"),lt.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),lt.setAttribute("result",st),nt.appendChild(lt),this.matrixFilter=lt}SVGFillFilter.prototype.renderFrame=function(nt){if(nt||this.filterManager._mdf){var rt=this.filterManager.effectElements[2].p.v,it=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+rt[0]+" 0 0 0 0 "+rt[1]+" 0 0 0 0 "+rt[2]+" 0 0 0 "+it+" 0")}};function SVGStrokeEffect(nt,rt,it){this.initialized=!1,this.filterManager=rt,this.elem=it,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var nt=this.elem.layerElement.children||this.elem.layerElement.childNodes,rt,it,st,lt;for(this.filterManager.effectElements[1].p.v===1?(lt=this.elem.maskManager.masksProperties.length,st=0):(st=this.filterManager.effectElements[0].p.v-1,lt=st+1),it=createNS("g"),it.setAttribute("fill","none"),it.setAttribute("stroke-linecap","round"),it.setAttribute("stroke-dashoffset",1),st;st<lt;st+=1)rt=createNS("path"),it.appendChild(rt),this.paths.push({p:rt,m:st});if(this.filterManager.effectElements[10].p.v===3){var ct=createNS("mask"),ut=createElementID();ct.setAttribute("id",ut),ct.setAttribute("mask-type","alpha"),ct.appendChild(it),this.elem.globalData.defs.appendChild(ct);var dt=createNS("g");for(dt.setAttribute("mask","url("+getLocationHref()+"#"+ut+")");nt[0];)dt.appendChild(nt[0]);this.elem.layerElement.appendChild(dt),this.masker=ct,it.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(nt=this.elem.layerElement.children||this.elem.layerElement.childNodes;nt.length;)this.elem.layerElement.removeChild(nt[0]);this.elem.layerElement.appendChild(it),this.elem.layerElement.removeAttribute("mask"),it.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=it},SVGStrokeEffect.prototype.renderFrame=function(nt){this.initialized||this.initialize();var rt,it=this.paths.length,st,lt;for(rt=0;rt<it;rt+=1)if(this.paths[rt].m!==-1&&(st=this.elem.maskManager.viewData[this.paths[rt].m],lt=this.paths[rt].p,(nt||this.filterManager._mdf||st.prop._mdf)&&lt.setAttribute("d",st.lastPath),nt||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||st.prop._mdf)){var ct;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var ut=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,dt=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,ht=lt.getTotalLength();ct="0 0 0 "+ht*ut+" ";var ft=ht*(dt-ut),pt=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,mt=Math.floor(ft/pt),gt;for(gt=0;gt<mt;gt+=1)ct+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";ct+="0 "+ht*10+" 0 0"}else ct="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;lt.setAttribute("stroke-dasharray",ct)}if((nt||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(nt||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(nt||this.filterManager.effectElements[3].p._mdf)){var xt=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(xt[0]*255)+","+bmFloor(xt[1]*255)+","+bmFloor(xt[2]*255)+")")}};function SVGTritoneFilter(nt,rt,it,st){this.filterManager=rt;var lt=createNS("feColorMatrix");lt.setAttribute("type","matrix"),lt.setAttribute("color-interpolation-filters","linearRGB"),lt.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),nt.appendChild(lt);var ct=createNS("feComponentTransfer");ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("result",st),this.matrixFilter=ct;var ut=createNS("feFuncR");ut.setAttribute("type","table"),ct.appendChild(ut),this.feFuncR=ut;var dt=createNS("feFuncG");dt.setAttribute("type","table"),ct.appendChild(dt),this.feFuncG=dt;var ht=createNS("feFuncB");ht.setAttribute("type","table"),ct.appendChild(ht),this.feFuncB=ht,nt.appendChild(ct)}SVGTritoneFilter.prototype.renderFrame=function(nt){if(nt||this.filterManager._mdf){var rt=this.filterManager.effectElements[0].p.v,it=this.filterManager.effectElements[1].p.v,st=this.filterManager.effectElements[2].p.v,lt=st[0]+" "+it[0]+" "+rt[0],ct=st[1]+" "+it[1]+" "+rt[1],ut=st[2]+" "+it[2]+" "+rt[2];this.feFuncR.setAttribute("tableValues",lt),this.feFuncG.setAttribute("tableValues",ct),this.feFuncB.setAttribute("tableValues",ut)}};function SVGProLevelsFilter(nt,rt,it,st){this.filterManager=rt;var lt=this.filterManager.effectElements,ct=createNS("feComponentTransfer");(lt[10].p.k||lt[10].p.v!==0||lt[11].p.k||lt[11].p.v!==1||lt[12].p.k||lt[12].p.v!==1||lt[13].p.k||lt[13].p.v!==0||lt[14].p.k||lt[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",ct)),(lt[17].p.k||lt[17].p.v!==0||lt[18].p.k||lt[18].p.v!==1||lt[19].p.k||lt[19].p.v!==1||lt[20].p.k||lt[20].p.v!==0||lt[21].p.k||lt[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",ct)),(lt[24].p.k||lt[24].p.v!==0||lt[25].p.k||lt[25].p.v!==1||lt[26].p.k||lt[26].p.v!==1||lt[27].p.k||lt[27].p.v!==0||lt[28].p.k||lt[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",ct)),(lt[31].p.k||lt[31].p.v!==0||lt[32].p.k||lt[32].p.v!==1||lt[33].p.k||lt[33].p.v!==1||lt[34].p.k||lt[34].p.v!==0||lt[35].p.k||lt[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",ct)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(ct.setAttribute("color-interpolation-filters","sRGB"),nt.appendChild(ct)),(lt[3].p.k||lt[3].p.v!==0||lt[4].p.k||lt[4].p.v!==1||lt[5].p.k||lt[5].p.v!==1||lt[6].p.k||lt[6].p.v!==0||lt[7].p.k||lt[7].p.v!==1)&&(ct=createNS("feComponentTransfer"),ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("result",st),nt.appendChild(ct),this.feFuncRComposed=this.createFeFunc("feFuncR",ct),this.feFuncGComposed=this.createFeFunc("feFuncG",ct),this.feFuncBComposed=this.createFeFunc("feFuncB",ct))}SVGProLevelsFilter.prototype.createFeFunc=function(nt,rt){var it=createNS(nt);return it.setAttribute("type","table"),rt.appendChild(it),it},SVGProLevelsFilter.prototype.getTableValue=function(nt,rt,it,st,lt){for(var ct=0,ut=256,dt,ht=Math.min(nt,rt),ft=Math.max(nt,rt),pt=Array.call(null,{length:ut}),mt,gt=0,xt=lt-st,yt=rt-nt;ct<=256;)dt=ct/256,dt<=ht?mt=yt<0?lt:st:dt>=ft?mt=yt<0?st:lt:mt=st+xt*Math.pow((dt-nt)/yt,1/it),pt[gt]=mt,gt+=1,ct+=256/(ut-1);return pt.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(nt){if(nt||this.filterManager._mdf){var rt,it=this.filterManager.effectElements;this.feFuncRComposed&&(nt||it[3].p._mdf||it[4].p._mdf||it[5].p._mdf||it[6].p._mdf||it[7].p._mdf)&&(rt=this.getTableValue(it[3].p.v,it[4].p.v,it[5].p.v,it[6].p.v,it[7].p.v),this.feFuncRComposed.setAttribute("tableValues",rt),this.feFuncGComposed.setAttribute("tableValues",rt),this.feFuncBComposed.setAttribute("tableValues",rt)),this.feFuncR&&(nt||it[10].p._mdf||it[11].p._mdf||it[12].p._mdf||it[13].p._mdf||it[14].p._mdf)&&(rt=this.getTableValue(it[10].p.v,it[11].p.v,it[12].p.v,it[13].p.v,it[14].p.v),this.feFuncR.setAttribute("tableValues",rt)),this.feFuncG&&(nt||it[17].p._mdf||it[18].p._mdf||it[19].p._mdf||it[20].p._mdf||it[21].p._mdf)&&(rt=this.getTableValue(it[17].p.v,it[18].p.v,it[19].p.v,it[20].p.v,it[21].p.v),this.feFuncG.setAttribute("tableValues",rt)),this.feFuncB&&(nt||it[24].p._mdf||it[25].p._mdf||it[26].p._mdf||it[27].p._mdf||it[28].p._mdf)&&(rt=this.getTableValue(it[24].p.v,it[25].p.v,it[26].p.v,it[27].p.v,it[28].p.v),this.feFuncB.setAttribute("tableValues",rt)),this.feFuncA&&(nt||it[31].p._mdf||it[32].p._mdf||it[33].p._mdf||it[34].p._mdf||it[35].p._mdf)&&(rt=this.getTableValue(it[31].p.v,it[32].p.v,it[33].p.v,it[34].p.v,it[35].p.v),this.feFuncA.setAttribute("tableValues",rt))}};function SVGDropShadowEffect(nt,rt,it,st,lt){var ct=rt.container.globalData.renderConfig.filterSize,ut=rt.data.fs||ct;nt.setAttribute("x",ut.x||ct.x),nt.setAttribute("y",ut.y||ct.y),nt.setAttribute("width",ut.width||ct.width),nt.setAttribute("height",ut.height||ct.height),this.filterManager=rt;var dt=createNS("feGaussianBlur");dt.setAttribute("in","SourceAlpha"),dt.setAttribute("result",st+"_drop_shadow_1"),dt.setAttribute("stdDeviation","0"),this.feGaussianBlur=dt,nt.appendChild(dt);var ht=createNS("feOffset");ht.setAttribute("dx","25"),ht.setAttribute("dy","0"),ht.setAttribute("in",st+"_drop_shadow_1"),ht.setAttribute("result",st+"_drop_shadow_2"),this.feOffset=ht,nt.appendChild(ht);var ft=createNS("feFlood");ft.setAttribute("flood-color","#00ff00"),ft.setAttribute("flood-opacity","1"),ft.setAttribute("result",st+"_drop_shadow_3"),this.feFlood=ft,nt.appendChild(ft);var pt=createNS("feComposite");pt.setAttribute("in",st+"_drop_shadow_3"),pt.setAttribute("in2",st+"_drop_shadow_2"),pt.setAttribute("operator","in"),pt.setAttribute("result",st+"_drop_shadow_4"),nt.appendChild(pt);var mt=this.createMergeNode(st,[st+"_drop_shadow_4",lt]);nt.appendChild(mt)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(nt){if(nt||this.filterManager._mdf){if((nt||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),nt||this.filterManager.effectElements[0].p._mdf){var rt=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(rt[0]*255),Math.round(rt[1]*255),Math.round(rt[2]*255)))}if((nt||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),nt||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var it=this.filterManager.effectElements[3].p.v,st=(this.filterManager.effectElements[2].p.v-90)*degToRads,lt=it*Math.cos(st),ct=it*Math.sin(st);this.feOffset.setAttribute("dx",lt),this.feOffset.setAttribute("dy",ct)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(nt,rt,it){this.initialized=!1,this.filterManager=rt,this.filterElem=nt,this.elem=it,it.matteElement=createNS("g"),it.matteElement.appendChild(it.layerElement),it.matteElement.appendChild(it.transformedElement),it.baseElement=it.matteElement}SVGMatte3Effect.prototype.findSymbol=function(nt){for(var rt=0,it=_svgMatteSymbols.length;rt<it;){if(_svgMatteSymbols[rt]===nt)return _svgMatteSymbols[rt];rt+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(nt,rt){var it=nt.layerElement.parentNode;if(it){for(var st=it.children,lt=0,ct=st.length;lt<ct&&st[lt]!==nt.layerElement;)lt+=1;var ut;lt<=ct-2&&(ut=st[lt+1]);var dt=createNS("use");dt.setAttribute("href","#"+rt),ut?it.insertBefore(dt,ut):it.appendChild(dt)}},SVGMatte3Effect.prototype.setElementAsMask=function(nt,rt){if(!this.findSymbol(rt)){var it=createElementID(),st=createNS("mask");st.setAttribute("id",rt.layerId),st.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(rt);var lt=nt.globalData.defs;lt.appendChild(st);var ct=createNS("symbol");ct.setAttribute("id",it),this.replaceInParent(rt,it),ct.appendChild(rt.layerElement),lt.appendChild(ct);var ut=createNS("use");ut.setAttribute("href","#"+it),st.appendChild(ut),rt.data.hd=!1,rt.show()}nt.setMatte(rt.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var nt=this.filterManager.effectElements[0].p.v,rt=this.elem.comp.elements,it=0,st=rt.length;it<st;)rt[it]&&rt[it].data.ind===nt&&this.setElementAsMask(this.elem,rt[it]),it+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(nt,rt,it,st){nt.setAttribute("x","-100%"),nt.setAttribute("y","-100%"),nt.setAttribute("width","300%"),nt.setAttribute("height","300%"),this.filterManager=rt;var lt=createNS("feGaussianBlur");lt.setAttribute("result",st),nt.appendChild(lt),this.feGaussianBlur=lt}SVGGaussianBlurEffect.prototype.renderFrame=function(nt){if(nt||this.filterManager._mdf){var rt=.3,it=this.filterManager.effectElements[0].p.v*rt,st=this.filterManager.effectElements[1].p.v,lt=st==3?0:it,ct=st==2?0:it;this.feGaussianBlur.setAttribute("stdDeviation",lt+" "+ct);var ut=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",ut)}};function TransformEffect(){}TransformEffect.prototype.init=function(nt){this.effectsManager=nt,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(nt){if(this._opMdf=!1,this._mdf=!1,nt||this.effectsManager._mdf){var rt=this.effectsManager.effectElements,it=rt[0].p.v,st=rt[1].p.v,lt=rt[2].p.v===1,ct=rt[3].p.v,ut=lt?ct:rt[4].p.v,dt=rt[5].p.v,ht=rt[6].p.v,ft=rt[7].p.v;this.matrix.reset(),this.matrix.translate(-it[0],-it[1],it[2]),this.matrix.scale(ut*.01,ct*.01,1),this.matrix.rotate(-ft*degToRads),this.matrix.skewFromAxis(-dt*degToRads,(ht+90)*degToRads),this.matrix.translate(st[0],st[1],0),this._mdf=!0,this.opacity!==rt[8].p.v&&(this.opacity=rt[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(nt,rt){this.init(rt)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(nt){this.init(nt)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit(nt,rt){var it=nt==null?null:typeof Symbol<"u"&&nt[Symbol.iterator]||nt["@@iterator"];if(it!=null){var st,lt,ct,ut,dt=[],ht=!0,ft=!1;try{if(ct=(it=it.call(nt)).next,rt===0){if(Object(it)!==it)return;ht=!1}else for(;!(ht=(st=ct.call(it)).done)&&(dt.push(st.value),dt.length!==rt);ht=!0);}catch(pt){ft=!0,lt=pt}finally{try{if(!ht&&it.return!=null&&(ut=it.return(),Object(ut)!==ut))return}finally{if(ft)throw lt}}return dt}}function ownKeys(nt,rt){var it=Object.keys(nt);if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(nt);rt&&(st=st.filter(function(lt){return Object.getOwnPropertyDescriptor(nt,lt).enumerable})),it.push.apply(it,st)}return it}function _objectSpread2(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt]!=null?arguments[rt]:{};rt%2?ownKeys(Object(it),!0).forEach(function(st){_defineProperty(nt,st,it[st])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(it)):ownKeys(Object(it)).forEach(function(st){Object.defineProperty(nt,st,Object.getOwnPropertyDescriptor(it,st))})}return nt}function _defineProperty(nt,rt,it){return rt=_toPropertyKey(rt),rt in nt?Object.defineProperty(nt,rt,{value:it,enumerable:!0,configurable:!0,writable:!0}):nt[rt]=it,nt}function _objectWithoutPropertiesLoose(nt,rt){if(nt==null)return{};var it={},st=Object.keys(nt),lt,ct;for(ct=0;ct<st.length;ct++)lt=st[ct],!(rt.indexOf(lt)>=0)&&(it[lt]=nt[lt]);return it}function _objectWithoutProperties(nt,rt){if(nt==null)return{};var it=_objectWithoutPropertiesLoose(nt,rt),st,lt;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(nt);for(lt=0;lt<ct.length;lt++)st=ct[lt],!(rt.indexOf(st)>=0)&&Object.prototype.propertyIsEnumerable.call(nt,st)&&(it[st]=nt[st])}return it}function _slicedToArray(nt,rt){return _arrayWithHoles(nt)||_iterableToArrayLimit(nt,rt)||_unsupportedIterableToArray(nt,rt)||_nonIterableRest()}function _arrayWithHoles(nt){if(Array.isArray(nt))return nt}function _unsupportedIterableToArray(nt,rt){if(nt){if(typeof nt=="string")return _arrayLikeToArray(nt,rt);var it=Object.prototype.toString.call(nt).slice(8,-1);if(it==="Object"&&nt.constructor&&(it=nt.constructor.name),it==="Map"||it==="Set")return Array.from(nt);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return _arrayLikeToArray(nt,rt)}}function _arrayLikeToArray(nt,rt){(rt==null||rt>nt.length)&&(rt=nt.length);for(var it=0,st=new Array(rt);it<rt;it++)st[it]=nt[it];return st}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(nt,rt){if(typeof nt!="object"||nt===null)return nt;var it=nt[Symbol.toPrimitive];if(it!==void 0){var st=it.call(nt,rt||"default");if(typeof st!="object")return st;throw new TypeError("@@toPrimitive must return a primitive value.")}return(rt==="string"?String:Number)(nt)}function _toPropertyKey(nt){var rt=_toPrimitive(nt,"string");return typeof rt=="symbol"?rt:String(rt)}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function nt(rt,it){var st=rt.animationData,lt=rt.loop,ct=rt.autoplay,ut=rt.initialSegment,dt=rt.onComplete,ht=rt.onLoopComplete,ft=rt.onEnterFrame,pt=rt.onSegmentStart,mt=rt.onConfigReady,gt=rt.onDataReady,xt=rt.onDataFailed,yt=rt.onLoadedImages,vt=rt.onDOMLoaded,St=rt.onDestroy;rt.lottieRef,rt.renderer,rt.name,rt.assetsPath,rt.rendererSettings;var wt=_objectWithoutProperties(rt,_excluded$1),Et=reactExports.useState(!1),Rt=_slicedToArray(Et,2),Tt=Rt[0],It=Rt[1],At=reactExports.useRef(),Dt=reactExports.useRef(null),jt=function(){var Zt;(Zt=At.current)===null||Zt===void 0||Zt.play()},Ft=function(){var Zt;(Zt=At.current)===null||Zt===void 0||Zt.stop()},Lt=function(){var Zt;(Zt=At.current)===null||Zt===void 0||Zt.pause()},Mt=function(Zt){var hr;(hr=At.current)===null||hr===void 0||hr.setSpeed(Zt)},Ot=function(Zt,hr){var nr;(nr=At.current)===null||nr===void 0||nr.goToAndPlay(Zt,hr)},Nt=function(Zt,hr){var nr;(nr=At.current)===null||nr===void 0||nr.goToAndStop(Zt,hr)},$t=function(Zt){var hr;(hr=At.current)===null||hr===void 0||hr.setDirection(Zt)},Vt=function(Zt,hr){var nr;(nr=At.current)===null||nr===void 0||nr.playSegments(Zt,hr)},Ut=function(Zt){var hr;(hr=At.current)===null||hr===void 0||hr.setSubframe(Zt)},zt=function(Zt){var hr;return(hr=At.current)===null||hr===void 0?void 0:hr.getDuration(Zt)},Bt=function(){var Zt;(Zt=At.current)===null||Zt===void 0||Zt.destroy(),At.current=void 0},Ht=function(){var Zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},hr;if(Dt.current){(hr=At.current)===null||hr===void 0||hr.destroy();var nr=_objectSpread2(_objectSpread2(_objectSpread2({},rt),Zt),{},{container:Dt.current});return At.current=lottie.loadAnimation(nr),It(!!At.current),function(){var ir;(ir=At.current)===null||ir===void 0||ir.destroy(),At.current=void 0}}};reactExports.useEffect(function(){var Xt=Ht();return function(){return Xt==null?void 0:Xt()}},[st,lt]),reactExports.useEffect(function(){At.current&&(At.current.autoplay=!!ct)},[ct]),reactExports.useEffect(function(){if(At.current){if(!ut){At.current.resetSegments(!0);return}!Array.isArray(ut)||!ut.length||((At.current.currentRawFrame<ut[0]||At.current.currentRawFrame>ut[1])&&(At.current.currentRawFrame=ut[0]),At.current.setSegment(ut[0],ut[1]))}},[ut]),reactExports.useEffect(function(){var Xt=[{name:"complete",handler:dt},{name:"loopComplete",handler:ht},{name:"enterFrame",handler:ft},{name:"segmentStart",handler:pt},{name:"config_ready",handler:mt},{name:"data_ready",handler:gt},{name:"data_failed",handler:xt},{name:"loaded_images",handler:yt},{name:"DOMLoaded",handler:vt},{name:"destroy",handler:St}],Zt=Xt.filter(function(nr){return nr.handler!=null});if(Zt.length){var hr=Zt.map(function(nr){var ir;return(ir=At.current)===null||ir===void 0||ir.addEventListener(nr.name,nr.handler),function(){var yr;(yr=At.current)===null||yr===void 0||yr.removeEventListener(nr.name,nr.handler)}});return function(){hr.forEach(function(nr){return nr()})}}},[dt,ht,ft,pt,mt,gt,xt,yt,vt,St]);var Gt=e$2.createElement("div",_objectSpread2({style:it,ref:Dt},wt));return{View:Gt,play:jt,stop:Ft,pause:Lt,setSpeed:Mt,goToAndStop:Nt,goToAndPlay:Ot,setDirection:$t,playSegments:Vt,setSubframe:Ut,getDuration:zt,destroy:Bt,animationContainerRef:Dt,animationLoaded:Tt,animationItem:At.current}};function getContainerVisibility(nt){var rt=nt.getBoundingClientRect(),it=rt.top,st=rt.height,lt=window.innerHeight-it,ct=window.innerHeight+st;return lt/ct}function getContainerCursorPosition(nt,rt,it){var st=nt.getBoundingClientRect(),lt=st.top,ct=st.left,ut=st.width,dt=st.height,ht=(rt-ct)/ut,ft=(it-lt)/dt;return{x:ht,y:ft}}var useInitInteractivity=function nt(rt){var it=rt.wrapperRef,st=rt.animationItem,lt=rt.mode,ct=rt.actions;reactExports.useEffect(function(){var ut=it.current;if(!(!ut||!st||!ct.length)){st.stop();var dt=function(){var pt=null,mt=function(){var xt=getContainerVisibility(ut),yt=ct.find(function(St){var wt=St.visibility;return wt&&xt>=wt[0]&&xt<=wt[1]});if(yt){if(yt.type==="seek"&&yt.visibility&&yt.frames.length===2){var vt=yt.frames[0]+Math.ceil((xt-yt.visibility[0])/(yt.visibility[1]-yt.visibility[0])*yt.frames[1]);//! goToAndStop must be relative to the start of the current segment
st.goToAndStop(vt-st.firstFrame-1,!0)}yt.type==="loop"&&(pt===null||pt!==yt.frames||st.isPaused)&&(st.playSegments(yt.frames,!0),pt=yt.frames),yt.type==="play"&&st.isPaused&&(st.resetSegments(!0),st.play()),yt.type==="stop"&&st.goToAndStop(yt.frames[0]-st.firstFrame-1,!0)}};return document.addEventListener("scroll",mt),function(){document.removeEventListener("scroll",mt)}},ht=function(){var pt=function(yt,vt){var St=yt,wt=vt;if(St!==-1&&wt!==-1){var Et=getContainerCursorPosition(ut,St,wt);St=Et.x,wt=Et.y}var Rt=ct.find(function(At){var Dt=At.position;return Dt&&Array.isArray(Dt.x)&&Array.isArray(Dt.y)?St>=Dt.x[0]&&St<=Dt.x[1]&&wt>=Dt.y[0]&&wt<=Dt.y[1]:Dt&&!Number.isNaN(Dt.x)&&!Number.isNaN(Dt.y)?St===Dt.x&&wt===Dt.y:!1});if(Rt){if(Rt.type==="seek"&&Rt.position&&Array.isArray(Rt.position.x)&&Array.isArray(Rt.position.y)&&Rt.frames.length===2){var Tt=(St-Rt.position.x[0])/(Rt.position.x[1]-Rt.position.x[0]),It=(wt-Rt.position.y[0])/(Rt.position.y[1]-Rt.position.y[0]);st.playSegments(Rt.frames,!0),st.goToAndStop(Math.ceil((Tt+It)/2*(Rt.frames[1]-Rt.frames[0])),!0)}Rt.type==="loop"&&st.playSegments(Rt.frames,!0),Rt.type==="play"&&(st.isPaused&&st.resetSegments(!1),st.playSegments(Rt.frames)),Rt.type==="stop"&&st.goToAndStop(Rt.frames[0],!0)}},mt=function(yt){pt(yt.clientX,yt.clientY)},gt=function(){pt(-1,-1)};return ut.addEventListener("mousemove",mt),ut.addEventListener("mouseout",gt),function(){ut.removeEventListener("mousemove",mt),ut.removeEventListener("mouseout",gt)}};switch(lt){case"scroll":return dt();case"cursor":return ht()}}},[lt,st])},useLottieInteractivity=function nt(rt){var it=rt.actions,st=rt.mode,lt=rt.lottieObj,ct=lt.animationItem,ut=lt.View,dt=lt.animationContainerRef;return useInitInteractivity({actions:it,animationItem:ct,mode:st,wrapperRef:dt}),ut},_excluded=["style","interactivity"],Lottie=function nt(rt){var it,st,lt,ct=rt.style,ut=rt.interactivity,dt=_objectWithoutProperties(rt,_excluded),ht=useLottie(dt,ct),ft=ht.View,pt=ht.play,mt=ht.stop,gt=ht.pause,xt=ht.setSpeed,yt=ht.goToAndStop,vt=ht.goToAndPlay,St=ht.setDirection,wt=ht.playSegments,Et=ht.setSubframe,Rt=ht.getDuration,Tt=ht.destroy,It=ht.animationContainerRef,At=ht.animationLoaded,Dt=ht.animationItem;return reactExports.useEffect(function(){rt.lottieRef&&(rt.lottieRef.current={play:pt,stop:mt,pause:gt,setSpeed:xt,goToAndPlay:vt,goToAndStop:yt,setDirection:St,playSegments:wt,setSubframe:Et,getDuration:Rt,destroy:Tt,animationContainerRef:It,animationLoaded:At,animationItem:Dt})},[(it=rt.lottieRef)===null||it===void 0?void 0:it.current]),useLottieInteractivity({lottieObj:{View:ft,play:pt,stop:mt,pause:gt,setSpeed:xt,goToAndStop:yt,goToAndPlay:vt,setDirection:St,playSegments:wt,setSubframe:Et,getDuration:Rt,destroy:Tt,animationContainerRef:It,animationLoaded:At,animationItem:Dt},actions:(st=ut==null?void 0:ut.actions)!==null&&st!==void 0?st:[],mode:(lt=ut==null?void 0:ut.mode)!==null&&lt!==void 0?lt:"scroll"})};const OutlinedButton=({bgColor:nt,onClick:rt,Icon:it,isFocused:st,tooltip:lt,badge:ct,lottieOption:ut,disabledOpacity:dt,renderRightComponent:ht,disabled:ft,large:pt,btnID:mt,color:gt,focusIconColor:xt,isRequestProcessing:yt,borderColor:vt,buttonText:St})=>{const[wt,Et]=reactExports.useState(!1),[Rt,Tt]=reactExports.useState(!1),[It,At]=reactExports.useState(1),[Dt,jt]=reactExports.useState(!1),Ft=reactExports.useRef(),Lt=reactExports.useRef(),Mt=()=>{createPopper(Ft.current,Lt.current,{placement:"top",modifiers:[{name:"offset",options:{offset:[-40,0]}}]}),jt(!0)},Ot=()=>{jt(!1)},Nt=reactExports.useRef(),$t=24*(pt?1.7:1),Vt=()=>{Nt.current=setInterval(()=>{At(zt=>zt===1?.4:1)},600)},Ut=()=>{clearInterval(Nt.current),At(1)};return reactExports.useEffect(()=>{yt?Vt():Ut()},[yt]),reactExports.useEffect(()=>()=>{Ut()},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:Ft,onMouseEnter:()=>{Et(!0),Mt()},onMouseLeave:()=>{Et(!1),Ot()},onMouseDown:()=>{Tt(!0)},onMouseUp:()=>{Tt(!1)},children:jsxRuntimeExports.jsxs("div",{className:`flex items-center justify-center  rounded-lg ${nt?`${nt}`:st?"bg-white":"bg-gray-800"} ${wt?"border-2 border-transparent border-solid":vt?`border-2 border-[${vt}] border-solid`:nt?"border-2 border-transparent border-solid":"border-2 border-solid border-[#ffffff33]"} md:m-2 m-1`,style:{transition:"all 200ms",transitionTimingFunction:"ease-in-out",opacity:It},children:[jsxRuntimeExports.jsxs("button",{className:`${ft?"cursor-default":"cursor-pointer"} flex items-center justify-center`,id:mt,onMouseEnter:()=>{Et(!0)},onMouseLeave:()=>{Et(!1)},onMouseDown:()=>{Tt(!0)},onMouseUp:()=>{Tt(!1)},disabled:ft,onClick:rt,children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center p-1 m-1 rounded-lg",style:{opacity:ft?dt||.7:1,transform:`scale(${wt?Rt?.95:1.1:1})`,transition:`all ${200*1}ms`,transitionTimingFunction:"linear"},children:it&&(ut?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{style:{height:$t,width:$t*(ut==null?void 0:ut.width)/(ut==null?void 0:ut.height)},children:jsxRuntimeExports.jsx(Lottie,{loop:ut.loop,autoPlay:ut.autoPlay,animationData:ut.animationData,rendererSettings:{preserveAspectRatio:ut.rendererSettings.preserveAspectRatio},isClickToPauseDisabled:!0})})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(it,{style:{color:st?xt||"#1C1F2E":gt||"#fff",height:$t,width:$t},fillcolor:st?xt||"#1C1F2E":gt||"#fff"}),ct&&jsxRuntimeExports.jsx("p",{className:"text-base ml-2 text-white",children:ct})]}))}),St?jsxRuntimeExports.jsx("p",{className:"mr-2 text-sm font-semibold text-center text-white",children:St}):null]}),typeof ht=="function"&&ht()]})}),jsxRuntimeExports.jsx("div",{style:{zIndex:999},className:`${Dt&&(wt||Rt)?"":"hidden"} overflow-hidden flex flex-col items-center justify-center whitespace-pre-line`,ref:Lt,children:jsxRuntimeExports.jsx("div",{className:"rounded-md p-1.5 bg-black ",children:jsxRuntimeExports.jsx("p",{className:"text-base text-white ",children:lt||""})})})]})},MobileIconButton=({badge:nt,onClick:rt,Icon:it,isFocused:st,bgColor:lt,disabledOpacity:ct,focusIconColor:ut,disabled:dt,large:ht,tooltipTitle:ft,btnID:pt,buttonText:mt,lottieOption:gt})=>{const[xt,yt]=reactExports.useState(!1),[vt,St]=reactExports.useState(!1),[wt,Et]=reactExports.useState(!1),Rt=reactExports.useRef(),Tt=reactExports.useRef(),It=()=>{createPopper(Rt.current,Tt.current,{placement:"bottom"}),Et(!0)},At=()=>{Et(!1)},Dt=24*(ht?1.7:1);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:Rt,onMouseEnter:It,onMouseLeave:At,children:jsxRuntimeExports.jsx("div",{className:"p-0 rounded-lg",style:{transition:`all ${200*.5}ms`,transitionTimingFunction:"linear"},children:jsxRuntimeExports.jsxs("button",{className:"flex flex-col items-center justify-center",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},id:pt,onMouseEnter:()=>{yt(!0)},onMouseLeave:()=>{yt(!1)},onMouseDown:()=>{St(!0)},onMouseUp:()=>{St(!1)},disabled:dt,onClick:rt,children:[jsxRuntimeExports.jsxs("div",{className:"relative flex items-center justify-center p-1 rounded-lg",style:{opacity:dt?ct||.7:1,transform:`scale(${xt?vt?.95:1.1:1})`,transition:`all ${200*.5}ms`,transitionTimingFunction:"linear"},children:[nt&&jsxRuntimeExports.jsx("div",{class:"inline-flex absolute -top-2 -right-3 justify-center items-center w-6 h-6 text-xs font-bold text-white bg-black rounded-full",children:nt}),gt?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center p-[5px] rounded-[5px]",style:{backgroundColor:lt},children:jsxRuntimeExports.jsx("div",{style:{height:Dt,width:Dt*(gt==null?void 0:gt.width)/(gt==null?void 0:gt.height)},children:jsxRuntimeExports.jsx(Lottie,{loop:gt.loop,autoPlay:gt.autoPlay,animationData:gt.animationData,rendererSettings:{preserveAspectRatio:gt.rendererSettings.preserveAspectRatio},isClickToPauseDisabled:!0})})}):jsxRuntimeExports.jsx(it,{style:{color:st?ut||"#fff":"#95959E",height:Dt,width:Dt},fillcolor:st?ut||"#fff":"#95959E"})]}),jsxRuntimeExports.jsx("div",{children:mt?jsxRuntimeExports.jsx("p",{className:"text-sm text-white",children:mt}):null})]})})}),jsxRuntimeExports.jsx("div",{style:{zIndex:999},className:`${wt?"":"hidden"} overflow-hidden flex flex-col items-center justify-center pb-1`,ref:Tt,children:jsxRuntimeExports.jsx("div",{className:"rounded-md p-1.5 bg-black ",children:jsxRuntimeExports.jsx("p",{className:"text-base text-white ",children:ft||""})})})]})};function ILSBottomBar({bottomBarHeight:nt,setIsMeetingLeft:rt,selectWebcamDeviceId:it,setSelectWebcamDeviceId:st,selectMicDeviceId:lt,setSelectMicDeviceId:ct,meetingMode:ut}){const{sideBarMode:dt,setSideBarMode:ht}=useMeetingAppContext(),ft=({isMobile:jt,isTab:Ft})=>{const{publish:Lt}=usePubSub("RAISE_HAND"),Mt=()=>{Lt("Raise Hand")};return jt||Ft?jsxRuntimeExports.jsx(MobileIconButton,{id:"RaiseHandBTN",tooltipTitle:"Raise hand",Icon:RaiseHandIcon,onClick:Mt,buttonText:"손들기"}):jsxRuntimeExports.jsx(OutlinedButton,{onClick:Mt,tooltip:"Raise Hand",Icon:RaiseHandIcon})},pt=()=>{const jt=useMeeting(),Ft=jt==null?void 0:jt.localMicOn;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(OutlinedButton,{Icon:Ft?MicOnIcon$1:MicOffIcon,onClick:()=>{jt.toggleMic()},bgColor:Ft?"bg-gray-800":"bg-white",borderColor:Ft&&"#ffffff33",isFocused:Ft,focusIconColor:Ft&&"white"})})},mt=()=>{const jt=useMeeting(),Ft=jt==null?void 0:jt.localWebcamOn;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(OutlinedButton,{Icon:Ft?WebcamOnIcon:WebcamOffIcon,onClick:async()=>{let Lt;Ft||(Lt=await createCameraVideoTrack({optimizationMode:"motion",encoderConfig:"h540p_w960p",facingMode:"environment",multiStream:!1,cameraId:it})),jt.toggleWebcam(Lt)},bgColor:Ft?"bg-gray-800":"bg-white",borderColor:Ft&&"#ffffff33",isFocused:Ft,focusIconColor:Ft&&"white"})})},gt=()=>{const{leave:jt}=useMeeting();return jsxRuntimeExports.jsx(OutlinedButton,{Icon:EndIcon,bgColor:"bg-red-600",onClick:()=>{Swal.fire({title:"종료하시겠습니까?",icon:"warning",showConfirmButton:!0}).then(()=>{jt(),rt(!0)})}})},xt=({isMobile:jt,isTab:Ft})=>jt||Ft?jsxRuntimeExports.jsx(MobileIconButton,{tooltipTitle:"Chat",buttonText:"채팅",Icon:ChatIcon,isFocused:dt===sideBarModes.CHAT,onClick:()=>{ht(Lt=>Lt===sideBarModes.CHAT?null:sideBarModes.CHAT)}}):jsxRuntimeExports.jsx(OutlinedButton,{Icon:ChatIcon,onClick:()=>{ht(Lt=>Lt===sideBarModes.CHAT?null:sideBarModes.CHAT)},isFocused:dt==="CHAT",tooltip:"View Chat"}),yt=({isMobile:jt,isTab:Ft})=>{var Mt,Ot;const{participants:Lt}=useMeeting();return jt||Ft?jsxRuntimeExports.jsx(MobileIconButton,{tooltipTitle:"Participants",isFocused:dt===sideBarModes.PARTICIPANTS,buttonText:"참가자",disabledOpacity:1,Icon:ParticipantsIcon,onClick:()=>{ht(Nt=>Nt===sideBarModes.PARTICIPANTS?null:sideBarModes.PARTICIPANTS)},badge:`${(Mt=new Map(Lt))==null?void 0:Mt.size}`,disabled:ut===Constants.modes.VIEWER}):jsxRuntimeExports.jsx(OutlinedButton,{Icon:ParticipantsIcon,onClick:()=>{ht(Nt=>Nt===sideBarModes.PARTICIPANTS?null:sideBarModes.PARTICIPANTS)},isFocused:dt===sideBarModes.PARTICIPANTS,tooltip:`View 
Participants`,badge:`${(Ot=new Map(Lt))==null?void 0:Ot.size}`,disabled:ut===Constants.modes.VIEWER})},vt=()=>{const{meetingId:jt}=useMeeting(),[Ft,Lt]=reactExports.useState(!1);return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mt-0 ml-0 lg:ml-0 xl:mt-0",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center p-2 border-2 rounded-md",children:[jsxRuntimeExports.jsx("h1",{className:"text-base text-white ",children:`입장 코드 : ${jt}`}),jsxRuntimeExports.jsx("button",{className:"ml-2",onClick:()=>{navigator.clipboard.writeText(jt),Lt(!0),setTimeout(()=>{Lt(!1)},3e3)},children:Ft?jsxRuntimeExports.jsx(CheckIcon$1,{className:"w-5 h-5 text-green-400"}):jsxRuntimeExports.jsx(ClipboardIcon$1,{className:"w-5 h-5 text-white"})})]})})},St=useIsMobile(),wt=useIsTab(),[Et,Rt]=reactExports.useState(!1),Tt=()=>{Rt(!0)},It=()=>{Rt(!1)},At=reactExports.useMemo(()=>({END_CALL:"END_CALL",CHAT:"CHAT",PARTICIPANTS:"PARTICIPANTS",WEBCAM:"WEBCAM",MIC:"MIC",RAISE_HAND:"RAISE_HAND",MEETING_ID_COPY:"MEETING_ID_COPY"}),[]),Dt=[{icon:At.RAISE_HAND},{icon:At.CHAT},{icon:At.PARTICIPANTS},{icon:At.MEETING_ID_COPY}];return St||wt?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center",style:{height:nt},children:[jsxRuntimeExports.jsx(gt,{}),ut===Constants.modes.CONFERENCE&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(pt,{}),jsxRuntimeExports.jsx(mt,{})]}),jsxRuntimeExports.jsx(OutlinedButton,{Icon:EllipsisHorizontalIcon$1,onClick:Tt}),jsxRuntimeExports.jsx(qe,{appear:!0,show:!!Et,as:reactExports.Fragment,children:jsxRuntimeExports.jsxs(_t,{as:"div",className:"relative",style:{zIndex:9999},onClose:It,children:[jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),jsxRuntimeExports.jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"translate-y-full opacity-0 scale-95",enterTo:"translate-y-0 opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"translate-y-0 opacity-100 scale-100",leaveTo:"translate-y-full opacity-0 scale-95",children:jsxRuntimeExports.jsx("div",{className:"fixed inset-0 overflow-y-hidden",children:jsxRuntimeExports.jsx("div",{className:"flex items-end justify-end h-full text-center",children:jsxRuntimeExports.jsx(_t.Panel,{className:"w-screen overflow-hidden transition-all transform bg-gray-800 shadow-xl",children:jsxRuntimeExports.jsx("div",{className:"container grid py-6 bg-gray-800",children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-12 gap-2",children:Dt.map(({icon:jt},Ft)=>jsxRuntimeExports.jsx("div",{className:`grid items-center justify-center ${jt===At.MEETING_ID_COPY?"col-start-2 col-end-12 col-span-7 sm:col-span-5 md:col-span-3":"col-span-4 sm:col-span-3 md:col-span-2"}`,children:jt===At.RAISE_HAND?jsxRuntimeExports.jsx(ft,{isMobile:St,isTab:wt}):jt===At.CHAT?jsxRuntimeExports.jsx(xt,{isMobile:St,isTab:wt}):jt===At.PARTICIPANTS?jsxRuntimeExports.jsx(yt,{isMobile:St,isTab:wt}):jt===At.MEETING_ID_COPY?jsxRuntimeExports.jsx(vt,{isMobile:St,isTab:wt}):null},Ft))})})})})})})]})})]}):null}const MemoizedParticipant=e$2.memo(ParticipantView,(nt,rt)=>nt.participantId===rt.participantId);function ParticipantGrid({participantIds:nt,isPresenting:rt}){const{sideBarMode:it}=useMeetingAppContext(),lt=window.matchMedia("only screen and (max-width: 768px)").matches||rt?nt.length<4?1:nt.length<9?2:3:nt.length<5?2:nt.length<7?3:nt.length<9?4:nt.length<10?3:(nt.length<11,4);return jsxRuntimeExports.jsx("div",{className:`flex flex-col md:flex-row flex-grow m-3 items-center justify-center ${nt.length<2&&!it&&!rt?"md:px-16 md:py-2":nt.length<3&&!it&&!rt?"md:px-16 md:py-8":nt.length<4&&!it&&!rt?"md:px-16 md:py-4":nt.length>4&&!it&&!rt?"md:px-14":"md:px-0"}`,children:jsxRuntimeExports.jsx("div",{className:"flex flex-col w-full h-full",children:Array.from({length:Math.ceil(nt.length/lt)},(ct,ut)=>jsxRuntimeExports.jsx("div",{className:`flex flex-1 ${rt&&nt.length===1?"justify-start items-start":"items-center justify-center"}`,children:nt.slice(ut*lt,(ut+1)*lt).map(dt=>jsxRuntimeExports.jsx("div",{className:`flex flex-1 ${rt?nt.length===1?"md:h-48 md:w-44 xl:w-52 xl:h-48 ":nt.length===2?"md:w-44 xl:w-56":"md:w-44 xl:w-48":"w-full"} items-center justify-center h-full ${nt.length===1?"md:max-w-7xl 2xl:max-w-[1480px] ":"md:max-w-lg 2xl:max-w-2xl"} overflow-clip overflow-hidden  p-1`,children:jsxRuntimeExports.jsx(MemoizedParticipant,{participantId:dt})},`participant_${dt}`))},`participant-${ut}`))})})}const MemoizedParticipantGrid=e$2.memo(ParticipantGrid,(nt,rt)=>JSON.stringify(nt.participantIds)===JSON.stringify(rt.participantIds)&&nt.isPresenting===rt.isPresenting);function ILSParticipantView({isPresenting:nt}){const{participants:rt,pinnedParticipants:it,activeSpeakerId:st,localParticipant:lt,localScreenShareOn:ct,presenterId:ut}=useMeeting(),dt=reactExports.useMemo(()=>{const ht=[...it.keys()].filter(gt=>gt!=lt.id),ft=[...rt.keys()].filter(gt=>![...it.keys()].includes(gt)&&lt.id!=gt),pt=[lt.id,...ht,...ft],mt=pt.filter(gt=>{var xt;return((xt=rt.get(gt))==null?void 0:xt.mode)==="CONFERENCE"}).slice(0,16);return st&&(pt.includes(st)||(pt[pt.length-1]=st)),mt},[rt,st,it,ut,ct]);return jsxRuntimeExports.jsx(MemoizedParticipantGrid,{participantIds:dt,isPresenting:nt})}const MemorizedILSParticipantView=e$2.memo(ILSParticipantView,(nt,rt)=>nt.isPresenting===rt.isPresenting),WaitingToJoinScreen=()=>{const nt=[{index:0,text:"방을 만들고 있습니다..."},{index:1,text:"입장 중입니다..."}],[rt,it]=reactExports.useState(nt[0]),st=reactExports.useRef(null);reactExports.useEffect(()=>(st.current=setInterval(()=>{it(ut=>ut.index===nt.length-1?ut:nt[ut.index+1])},3e3),()=>{clearInterval(st.current)}),[]);const lt=useIsTab(),ct=useIsMobile();return jsxRuntimeExports.jsx("div",{className:"bg-gray-200",style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{style:{height:lt||ct?200:250,width:lt||ct?200:250},children:jsxRuntimeExports.jsx("img",{src:"/common/로딩스피너.gif",alt:"..."})}),jsxRuntimeExports.jsx("h1",{className:"mt-1 text-xl font-bold text-center text-gray-700",children:rt.text})]})})},c=nt=>typeof nt=="number"&&!isNaN(nt),d=nt=>typeof nt=="string",u=nt=>typeof nt=="function",m=nt=>reactExports.isValidElement(nt)||d(nt)||u(nt)||c(nt),v=new Map;let h=[];const T=new Set,b=()=>v.size>0;function I(nt,rt){var it;if(rt)return!((it=v.get(rt))==null||!it.isToastActive(nt));let st=!1;return v.forEach(lt=>{lt.isToastActive(nt)&&(st=!0)}),st}function _(nt,rt){m(nt)&&(b()||h.push({content:nt,options:rt}),v.forEach(it=>{it.buildToast(nt,rt)}))}function C(nt,rt){v.forEach(it=>{rt!=null&&rt!=null&&rt.containerId?(rt==null?void 0:rt.containerId)===it.id&&it.toggle(nt,rt==null?void 0:rt.id):it.toggle(nt,rt==null?void 0:rt.id)})}let w=1;const k=()=>""+w++;function P(nt){return nt&&(d(nt.toastId)||c(nt.toastId))?nt.toastId:k()}function M(nt,rt){return _(nt,rt),rt.toastId}function x(nt,rt){return{...rt,type:rt&&rt.type||nt,toastId:P(rt)}}function A(nt){return(rt,it)=>M(rt,x(nt,it))}function B(nt,rt){return M(nt,x("default",rt))}B.loading=(nt,rt)=>M(nt,x("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...rt})),B.promise=function(nt,rt,it){let st,{pending:lt,error:ct,success:ut}=rt;lt&&(st=d(lt)?B.loading(lt,it):B.loading(lt.render,{...it,...lt}));const dt={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},ht=(pt,mt,gt)=>{if(mt==null)return void B.dismiss(st);const xt={type:pt,...dt,...it,data:gt},yt=d(mt)?{render:mt}:mt;return st?B.update(st,{...xt,...yt}):B(yt.render,{...xt,...yt}),gt},ft=u(nt)?nt():nt;return ft.then(pt=>ht("success",ut,pt)).catch(pt=>ht("error",ct,pt)),ft},B.success=A("success"),B.info=A("info"),B.error=A("error"),B.warning=A("warning"),B.warn=B.warning,B.dark=(nt,rt)=>M(nt,x("default",{theme:"dark",...rt})),B.dismiss=function(nt){(function(rt){var it;if(b()){if(rt==null||d(it=rt)||c(it))v.forEach(lt=>{lt.removeToast(rt)});else if(rt&&("containerId"in rt||"id"in rt)){var st;(st=v.get(rt.containerId))!=null&&st.removeToast(rt.id)||v.forEach(lt=>{lt.removeToast(rt.id)})}}else h=h.filter(lt=>rt!=null&&lt.options.toastId!==rt)})(nt)},B.clearWaitingQueue=function(nt){nt===void 0&&(nt={}),v.forEach(rt=>{!rt.props.limit||nt.containerId&&rt.id!==nt.containerId||rt.clearQueue()})},B.isActive=I,B.update=function(nt,rt){rt===void 0&&(rt={});const it=((st,lt)=>{var ct;let{containerId:ut}=lt;return(ct=v.get(ut||1))==null?void 0:ct.toasts.get(st)})(nt,rt);if(it){const{props:st,content:lt}=it,ct={delay:100,...st,...rt,toastId:rt.toastId||nt,updateId:k()};ct.toastId!==nt&&(ct.staleId=nt);const ut=ct.render||lt;delete ct.render,M(ut,ct)}},B.done=nt=>{B.update(nt,{progress:1})},B.onChange=function(nt){return T.add(nt),()=>{T.delete(nt)}},B.play=nt=>C(!0,nt),B.pause=nt=>C(!1,nt);const reqInfoDefaultState={enabled:!1,mode:null,senderId:null,accept:()=>{},reject:()=>{}},ModeListner=({setMeetingMode:nt,meetingMode:rt})=>{var gt,xt;const it=reactExports.useRef(),{setSideBarMode:st}=useMeetingAppContext(),[lt,ct]=reactExports.useState(reqInfoDefaultState),ut=useMeeting(),dt=(gt=ut==null?void 0:ut.localParticipant)==null?void 0:gt.id,ht=useParticipant(dt),ft=reactExports.useRef();reactExports.useEffect(()=>{it.current=ut},[ut]),reactExports.useEffect(()=>{ft.current=ht},[ht]),usePubSub(`CHANGE_MODE_${(xt=ut==null?void 0:ut.localParticipant)==null?void 0:xt.id}`,{onMessageReceived:yt=>{var St,wt,Et,Rt,Tt,It;const vt=JSON.parse(yt.message);if(vt.mode===Constants.modes.CONFERENCE){const At=(St=it.current)==null?void 0:St.muteMic,Dt=(wt=it.current)==null?void 0:wt.disableWebcam,jt=(Et=it.current)==null?void 0:Et.disableScreenShare;At(),Dt(),jt(),ct({enabled:!0,senderId:yt.senderId,mode:vt.mode,accept:()=>{},reject:()=>{}})}else{ut.changeMode(vt.mode);const At=(Rt=it.current)==null?void 0:Rt.muteMic,Dt=(Tt=it.current)==null?void 0:Tt.disableWebcam,jt=(It=it.current)==null?void 0:It.disableScreenShare;At(),Dt(),jt(),st(null)}}});const{publish:pt}=usePubSub("INVITATION_ACCEPT_BY_COHOST",{onMessageReceived:yt=>{new Audio("https://static.videosdk.live/prebuilt/notification.mp3").play(),B(`${yt.senderName} has been added as a Co-host`,{position:"bottom-left",autoClose:4e3,hideProgressBar:!0,closeButton:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})},onOldMessagesReceived:yt=>{}}),{publish:mt}=usePubSub("INVITATION_REJECT_BY_COHOST",{onMessageReceived:yt=>{yt.message.senderId===ft.current.participant.id&&(new Audio("https://static.videosdk.live/prebuilt/notification.mp3").play(),B(`${yt.senderName} has rejected the request to become Co-host`,{position:"bottom-left",autoClose:4e3,hideProgressBar:!0,closeButton:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))}});return useMeeting({onParticipantModeChanged:({mode:yt,participantId:vt})=>{vt===dt&&nt(yt)}}),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(ConfirmBox,{open:lt.enabled,successText:"Accept",rejectText:"Deny",onReject:()=>{ct(reqInfoDefaultState),mt({senderId:lt.senderId},{persist:!0})},onSuccess:()=>{ut.changeMode(lt.mode),ct(reqInfoDefaultState),pt({},{persist:!0})},title:"Request to become a Co-host",subTitle:"Host has requested you to become a Co-host"})})};function ILSContainer({onMeetingLeave:nt,setIsMeetingLeft:rt,selectedMic:it,selectedWebcam:st,selectWebcamDeviceId:lt,setSelectWebcamDeviceId:ct,selectMicDeviceId:ut,setSelectMicDeviceId:dt,micEnabled:ht,webcamEnabled:ft,meetingMode:pt,setMeetingMode:mt}){const{setAfterMeetingJoinedHLSState:gt,useRaisedHandParticipants:xt,sideBarMode:yt}=useMeetingAppContext(),vt=60,St=60,[wt,Et]=reactExports.useState(0),[Rt,Tt]=reactExports.useState(0),[It,At]=reactExports.useState(!1),[Dt,jt]=reactExports.useState(!1),Ft=reactExports.useRef(),[Lt,Mt]=reactExports.useState(null),Ot=reactExports.createRef(),Nt=reactExports.useRef(),$t=reactExports.useRef(),Vt=reactExports.useRef(pt);reactExports.useEffect(()=>{Nt.current=wt,$t.current=Rt},[wt,Rt]);const Ut=useIsMobile(),zt=useIsTab(),Bt=reactResponsiveExports.useMediaQuery({minWidth:1024,maxWidth:1439}),Gt=reactResponsiveExports.useMediaQuery({minWidth:1440})?400:Bt?360:zt?320:Ut?280:240;reactExports.useEffect(()=>{var fr,Nr;(fr=Ot.current)!=null&&fr.offsetHeight&&Et(Ot.current.offsetHeight),(Nr=Ot.current)!=null&&Nr.offsetWidth&&Tt(Ot.current.offsetWidth),window.addEventListener("resize",({target:Tr})=>{var Hr,Vr;(Hr=Ot.current)!=null&&Hr.offsetHeight&&Et(Ot.current.offsetHeight),(Vr=Ot.current)!=null&&Vr.offsetWidth&&Tt(Ot.current.offsetWidth)})},[Ot]);const{participantRaisedHand:Xt}=xt(),Zt=()=>{rt(!0)},hr=({status:fr})=>{Vt.current===Constants.modes.CONFERENCE&&(fr===Constants.recordingEvents.RECORDING_STARTED||fr===Constants.recordingEvents.RECORDING_STOPPED)&&B(`${fr===Constants.recordingEvents.RECORDING_STARTED?"Meeting recording is started.":"Meeting recording is stopped."}`,{position:"bottom-left",autoClose:4e3,hideProgressBar:!0,closeButton:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})},nr=fr=>{Vt.current===Constants.modes.CONFERENCE&&(fr.status===Constants.hlsEvents.HLS_STARTED||fr.status===Constants.hlsEvents.HLS_STOPPED)&&B(`${fr.status===Constants.hlsEvents.HLS_STARTED?"Meeting HLS is started.":"Meeting HLS is stopped."}`,{position:"bottom-left",autoClose:4e3,hideProgressBar:!0,closeButton:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),fr.status===Constants.hlsEvents.HLS_STARTED&&gt("STARTED"),fr.status===Constants.hlsEvents.HLS_STOPPED&&gt("STOPPED")};function ir(fr){fr&&fr.setQuality("high")}function yr(fr,Nr){var Tr,Hr;((Hr=(Tr=Ft.current)==null?void 0:Tr.localParticipant)==null?void 0:Hr.id)===fr&&(Nr==="allowed"?Mt(!0):(Mt(!1),setTimeout(()=>{Zt()},3e3)))}async function Cr(){const{changeWebcam:fr,changeMic:Nr,muteMic:Tr,disableWebcam:Hr}=Ft.current;ft&&st.id&&await new Promise(Vr=>{Hr(),setTimeout(async()=>{const mn=await createCameraVideoTrack({optimizationMode:"motion",encoderConfig:"h540p_w960p",facingMode:"environment",cameraId:st.id,multiStream:!1});fr(mn),Vr()},500)}),ht&&it.id&&await new Promise(Vr=>{Tr(),setTimeout(()=>{Nr(it.id),Vr()},500)})}function Sr(){nt()}const gr=useMeeting({onParticipantJoined:ir,onEntryResponded:yr,onMeetingJoined:Cr,onMeetingLeft:Sr,onError:fr=>{const{code:Nr,message:Tr}=fr,Vr=[4001,4002,4003,4004,4005,4006,4007,4008,4009,4010].findIndex(tn=>tn===Nr)!==-1,mn=`${Nr}`.startsWith("500");new Audio(mn?"https://static.videosdk.live/prebuilt/notification_critical_err.mp3":"https://static.videosdk.live/prebuilt/notification_err.mp3").play(),jt(!0),At({code:Nr,message:Vr?"Unable to join meeting!":Tr})},onRecordingStateChanged:hr,onHlsStateChanged:nr});reactExports.useEffect(()=>{Ft.current=gr},[gr]);const _r=!!gr.presenterId;return usePubSub("RAISE_HAND",{onMessageReceived:fr=>{var mn;const Nr=(mn=gr==null?void 0:gr.localParticipant)==null?void 0:mn.id,{senderId:Tr,senderName:Hr}=fr,Vr=Tr===Nr;new Audio("https://static.videosdk.live/prebuilt/notification.mp3").play(),B(`${Vr?"You":nameTructed(Hr,15)} raised hand 🖐🏼`,{position:"bottom-left",autoClose:4e3,hideProgressBar:!0,closeButton:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),Xt(Tr)}}),usePubSub("CHAT",{onMessageReceived:fr=>{var tn;const Nr=(tn=gr==null?void 0:gr.localParticipant)==null?void 0:tn.id,{senderId:Tr,senderName:Hr,message:Vr}=fr;Tr===Nr||(new Audio("https://static.videosdk.live/prebuilt/notification.mp3").play(),B(`${trimSnackBarText(`${nameTructed(Hr,15)} says: ${Vr}`)}`,{position:"bottom-left",autoClose:4e3,hideProgressBar:!0,closeButton:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))}}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-20",children:jsxRuntimeExports.jsxs("div",{ref:Ot,className:"flex flex-col h-full bg-gray-200",children:[typeof Lt=="boolean"?Lt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ModeListner,{setMeetingMode:mt,meetingMode:pt}),pt===Constants.modes.CONFERENCE&&(Ut||zt?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:zt||Ut?"":"column",height:St}})),jsxRuntimeExports.jsxs("div",{className:" flex flex-1 flex-row bg-gray-200",children:[pt===Constants.modes.CONFERENCE?jsxRuntimeExports.jsxs("div",{className:"flex flex-1 ",children:[_r?jsxRuntimeExports.jsx(PresenterView,{height:wt-St-vt}):null,_r&&Ut?null:jsxRuntimeExports.jsx(MemorizedILSParticipantView,{isPresenting:_r})]}):null,jsxRuntimeExports.jsx(SidebarConatiner,{height:pt===Constants.modes.VIEWER||Ut||zt?wt-vt:wt-St-vt,sideBarContainerWidth:Gt,meetingMode:pt})]}),jsxRuntimeExports.jsx(ILSBottomBar,{bottomBarHeight:vt,setIsMeetingLeft:rt,selectWebcamDeviceId:lt,setSelectWebcamDeviceId:ct,selectMicDeviceId:ut,setSelectMicDeviceId:dt,meetingMode:pt})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):!gr.isMeetingJoined&&jsxRuntimeExports.jsx(WaitingToJoinScreen,{}),jsxRuntimeExports.jsx(ConfirmBox,{open:Dt,successText:"OKAY",onSuccess:()=>{jt(!1)},title:`Error Code: ${It.code}`,subTitle:It.message})]})})}const WebRTCPage=()=>{const[nt,rt]=reactExports.useState(""),[it,st]=reactExports.useState(""),[lt,ct]=reactExports.useState(""),[ut,dt]=reactExports.useState(!0),[ht,ft]=reactExports.useState(!0),[pt,mt]=reactExports.useState({id:null}),[gt,xt]=reactExports.useState({id:null}),[yt,vt]=reactExports.useState(gt.id),[St,wt]=reactExports.useState(Constants.modes.CONFERENCE),[Et,Rt]=reactExports.useState(pt.id),[Tt,It]=reactExports.useState(!1),[At,Dt]=reactExports.useState(!1),jt=window.matchMedia("only screen and (max-width: 768px)").matches;return reactExports.useEffect(()=>{jt&&(window.onbeforeunload=()=>"Are you sure you want to exit?")},[jt]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Tt?jsxRuntimeExports.jsx(MeetingAppProvider,{selectedMic:pt,selectedWebcam:gt,initialMicOn:ut,initialWebcamOn:ht,children:jsxRuntimeExports.jsx(MeetingProvider,{config:{meetingId:it,micEnabled:ut,webcamEnabled:ht,name:lt||"TestUser",mode:St,multiStream:!1},token:nt,reinitialiseMeetingOnConfigChange:!0,joinWithoutUserInteraction:!0,children:jsxRuntimeExports.jsx(ILSContainer,{onMeetingLeave:()=>{rt(""),st(""),ct(""),ft(!1),dt(!1),It(!1)},setIsMeetingLeft:Dt,selectedMic:pt,selectedWebcam:gt,selectWebcamDeviceId:yt,setSelectWebcamDeviceId:vt,selectMicDeviceId:Et,setSelectMicDeviceId:Rt,micEnabled:ut,webcamEnabled:ht,meetingMode:St,setMeetingMode:wt})})}):At?jsxRuntimeExports.jsx(LeaveScreen,{setIsMeetingLeft:Dt}):jsxRuntimeExports.jsx(JoiningScreen,{participantName:lt,setParticipantName:ct,setMeetingId:st,setToken:rt,setMicOn:dt,micEnabled:ut,webcamEnabled:ht,setSelectedMic:mt,setSelectedWebcam:xt,setWebcamOn:ft,onClickStartMeeting:()=>{It(!0)},startMeeting:Tt,setIsMeetingLeft:Dt,meetingMode:St,setMeetingMode:wt})})},PinChangePage=()=>{const nt=Recoil_index_20(baseUrlState),[rt,it]=Recoil_index_22(userState),{watch:st,getValues:lt,register:ct,handleSubmit:ut,reset:dt,setError:ht,clearErrors:ft,formState:{errors:pt}}=useForm({mode:"onChange",defaultValues:{currentPin:"",newPin:"",newPinCheck:""}});reactExports.useEffect(()=>{st("newPin")!==st("newPinCheck")&&st("newPinCheck")?ht("newPinCheck",{type:"password-mismatch",message:"비밀번호가 일치하지 않습니다"}):ft("newPinCheck")},[st("newPin"),st("newPinCheck")]);const mt=gt=>{axios({method:"patch",url:`${nt}api/users/${rt.info.userId}/pin`,headers:{Authorization:`Bearer ${rt.token}`},data:{current_pin:gt.currentPin,new_pin:gt.newPin,new_pin_check:gt.newPinCheck}}).then(xt=>{console.log(xt),xt.data.data_header.success_code===0?(alert("PIN 번호가 변경되었습니다."),it({token:rt.token,info:{...rt.info,pin:gt.newPin}}),window.location.reload("/")):(alert(xt.data.data_header.result_message),dt())})};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"PIN 변경"}),jsxRuntimeExports.jsx("div",{className:"m-4",children:jsxRuntimeExports.jsxs("form",{onSubmit:ut(mt),className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsx("label",{htmlFor:"currentPin",children:"현재 PIN번호"}),jsxRuntimeExports.jsx("input",{className:"p-2 border-2 rounded-md",id:"currentPin",placeholder:"기존 PIN번호",type:"password",autoComplete:"on",maxLength:6,...ct("currentPin",{required:!0,maxLength:6})}),jsxRuntimeExports.jsx("label",{htmlFor:"newPin",children:"새 PIN번호"}),jsxRuntimeExports.jsx("input",{className:"p-2 border-2 rounded-md",id:"newPin",type:"password",autoComplete:"on",placeholder:"새 PIN번호",maxLength:6,...ct("newPin",{required:!0,pattern:{value:/^[0-9]*$/,message:"숫자만 입력해주세요"}})}),pt.newPin&&jsxRuntimeExports.jsx("p",{children:pt.newPin.message}),jsxRuntimeExports.jsx("label",{htmlFor:"newPinCheck",children:"새 PIN번호 확인"}),jsxRuntimeExports.jsx("input",{className:"p-2 border-2 rounded-md",id:"newPinCheck",type:"password",autoComplete:"on",placeholder:"새 PIN번호 확인",maxLength:6,...ct("newPinCheck",{required:!0,validate:{matchPassword:gt=>{const{newPin:xt}=lt();return xt===gt||"비밀번호가 일치하지 않습니다"}}})}),pt.newPinCheck&&jsxRuntimeExports.jsx("p",{children:pt.newPinCheck.message}),jsxRuntimeExports.jsx("input",{type:"submit",className:"p-2 text-white bg-teal-700 border rounded-md"})]})})]})},userCategoryFoodState=Recoil_index_8({key:"userCategoryFoodState",default:[]}),FoodDetailBox=({data:nt,category:rt})=>{const it=Recoil_index_20(baseUrlState),st=Recoil_index_20(userState),lt=Recoil_index_20(selectedDateState),ct=Recoil_index_24(userCategoryFoodState),[ut,dt]=reactExports.useState("left"),[ht,ft]=reactExports.useState(""),pt=()=>{dt("left")},mt=()=>{dt("right")},gt=St=>{ft(St.target.value)},xt=async()=>{await axios.get(`${it}api/management/food/list/category/${st.info.userId}?year=${lt[0]}&month=${lt[1]}&day=${lt[2]}&category=${rt.substring(0,2)}`).then(St=>{console.log("FoodList Reloading"),ct(St.data)}).catch(St=>{console.log(St)})},yt=async St=>{St.preventDefault(),await axios.put(`${it}api/management/food/update/${nt.userFoodId}`,{servingSize:parseInt(ht,10)}).then(wt=>{xt()}).catch(wt=>{console.log(wt)})},vt=async St=>{St.preventDefault(),await axios.put(`${it}api/management/food/update/${nt.userFoodId}`,{foodCount:ht.replace(/개/g,"")}).then(wt=>{xt()}).catch(wt=>{console.log(wt)})};return reactExports.useEffect(()=>{ft(ut==="left"?nt.servingSize+" g":nt.foodCount+" 개")},[ut]),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("button",{className:`text-xs ${ut==="left"?"text-teal-700 font-semibold":""}`,onClick:()=>pt(),children:"그램"}),jsxRuntimeExports.jsx("button",{className:`text-xs ${ut==="right"?"text-teal-700 font-semibold":""}`,onClick:()=>mt(),children:"개수"})]}),jsxRuntimeExports.jsx("form",{onSubmit:ut==="left"?yt:vt,onBlur:ut==="left"?yt:vt,children:jsxRuntimeExports.jsx("input",{type:"text",value:ht,onChange:gt,className:"p-1 my-1 text-center border-2 rounded-md"})})]})};FoodDetailBox.propTypes={data:PropTypes.object,category:PropTypes.string};const FoodCategoryPage=()=>{const nt=Recoil_index_20(baseUrlState),rt=Recoil_index_20(userState),it=Recoil_index_20(selectedDateState),[st,lt]=Recoil_index_22(userCategoryFoodState),ct=useNavigate(),{category:ut}=useParams(),[dt,ht]=reactExports.useState(!1),ft=st.reduce((St,wt)=>St+wt.food.calorie*(wt.servingSize/wt.food.servingSize)*wt.foodCount,0).toFixed(1),pt=st.reduce((St,wt)=>St+wt.food.carbohydrate*(wt.servingSize/wt.food.servingSize)*wt.foodCount,0).toFixed(1),mt=st.reduce((St,wt)=>St+wt.food.protein*(wt.servingSize/wt.food.servingSize)*wt.foodCount,0).toFixed(1),gt=st.reduce((St,wt)=>St+wt.food.lipid*(wt.servingSize/wt.food.servingSize)*wt.foodCount,0).toFixed(1),xt=()=>{ct(`/diary/food/${it[0]}/${it[1]}/${it[2]}`)},yt=async()=>{await axios.get(`${nt}api/management/food/list/category/${rt.info.userId}?year=${it[0]}&month=${it[1]}&day=${it[2]}&category=${ut.substring(0,2)}`).then(St=>{lt(St.data)}).catch(St=>{console.log(St)})},vt=async St=>{await axios.delete(`${nt}api/management/food/delete/${St}`).then(wt=>{yt()}).catch(wt=>{console.log(wt)})};return reactExports.useEffect(()=>{yt()},[]),jsxRuntimeExports.jsxs("div",{className:`bg-[#C9DECF]/30 pb-2 ${st.length>5?"":"h-screen"}`,children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsx("div",{className:"absolute my-4",children:jsxRuntimeExports.jsx(ChevronLeftIcon$1,{className:"w-6 h-6 ml-2",onClick:xt})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:ut}),jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-[#C9DECF]/30 border rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mx-2 my-2 justify-evenly",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center p-1 bg-white border-white basis-2/5 rounded-xl",children:jsxRuntimeExports.jsx(Description,{Title:ft+" kcal",subTitle:"칼로리",size:"xl",subsize:"sm"})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center p-1 bg-white border-white basis-2/5 rounded-xl",children:jsxRuntimeExports.jsx(Description,{Title:pt+" g",subTitle:"탄수화물",size:"xl",subsize:"sm"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mx-2 mb-2 justify-evenly",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center p-1 bg-white border-white basis-2/5 rounded-xl",children:jsxRuntimeExports.jsx(Description,{Title:mt+" g",subTitle:"단백질",size:"xl",subsize:"sm"})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center p-1 bg-white border-white basis-2/5 rounded-xl",children:jsxRuntimeExports.jsx(Description,{Title:gt+" g",subTitle:"지방",size:"xl",subsize:"sm"})})]})]})}),jsxRuntimeExports.jsx("hr",{className:"mb-4 border border-gray-300"})]}),jsxRuntimeExports.jsxs("div",{className:`mx-4 ${st.length>5?"mb-16":"h-1/2"}`,children:[jsxRuntimeExports.jsx("div",{className:`flex justify-center p-4 mb-2 bg-white border border-white rounded-xl ${st.length?"hidden":""}`,children:jsxRuntimeExports.jsx("p",{className:"italic",children:"등록된 식단이 없습니다."})}),st.map(St=>jsxRuntimeExports.jsxs("div",{className:"flex mb-2 bg-white border border-white rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center pb-1 pl-4 basis-full",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-base hover:font-semibold",onClick:()=>{ht(!dt)},children:St.food.name}),jsxRuntimeExports.jsxs("span",{className:`${dt?"":"hidden"}`,children:[" : ",St.food.calorie.toFixed(1),"kcal"]})]}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"12px"},children:["탄 ",(St.food.carbohydrate*(St.servingSize/St.food.servingSize)*St.foodCount).toFixed(1),"g 단"," ",(St.food.protein*(St.servingSize/St.food.servingSize)*St.foodCount).toFixed(1),"g 지"," ",(St.food.lipid*(St.servingSize/St.food.servingSize)*St.foodCount).toFixed(1),"g"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 ml-8 mr-4",children:[jsxRuntimeExports.jsx(FoodDetailBox,{data:St,category:ut}),jsxRuntimeExports.jsx("div",{className:"flex items-center",onClick:()=>vt(St.userFoodId),children:jsxRuntimeExports.jsx(BsFillTrash3Fill,{className:"w-6 h-6"})})]})]},St.userFoodId)),jsxRuntimeExports.jsx("div",{className:"flex justify-center p-4 bg-white border border-white rounded-xl",children:jsxRuntimeExports.jsx(Link,{to:`/diary/food/${ut}/add`,children:jsxRuntimeExports.jsx(PlusCircleIcon$1,{className:"w-6 h-6 text-gray-700"})})})]})]})},FoodAddFage=()=>{const nt=Recoil_index_20(baseUrlState),{category:rt}=useParams(),it=Recoil_index_20(userState),st=Recoil_index_20(selectedDateState),[lt,ct]=reactExports.useState(null),[ut,dt]=reactExports.useState([]),[ht,ft]=reactExports.useState([]),pt=Recoil_index_24(modalState),[mt,gt]=reactExports.useState(!1),xt=new Date(st[0],st[1]-1,st[2]),yt=9*60*60*1e3,vt=new Date(xt.getTime()+yt),St=It=>{ct(It.target.value)},wt=async It=>{It.preventDefault(),await axios.get(`${nt}api/management/food/search?keyword=${lt}`).then(At=>{console.log(At.data),dt(At.data)}).catch(At=>{console.log(At)})},Et=It=>{ht.includes(It)?ft(ht.filter(At=>At!==It)):ft([...ht,It])},Rt=async It=>{for(const At of It)try{await axios.post(`${nt}api/management/food/list/add`,{user_id:it.info.userId,food_id:At,category:rt.substring(0,2),date:vt})}catch(Dt){console.error("Error during request:",Dt)}},Tt=()=>{pt({type:"selfInputFood",data:rt.substring(0,2)})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-white",children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"음식 추가하기"})]}),jsxRuntimeExports.jsx(Search,{onSubmit:wt,onChange:St,placeholder:"찾으시는 음식을 검색해보세요.",onBlur:wt}),jsxRuntimeExports.jsx("div",{className:"m-4 mb-48",children:ut.map(It=>jsxRuntimeExports.jsxs("div",{className:"flex mb-2 border rounded-md",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",onChange:()=>Et(It.foodId),className:"w-6 ml-4 accent-teal-600"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col py-1 pl-4 basis-3/5",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-base",onClick:()=>{gt(!mt)},children:It.name}),jsxRuntimeExports.jsxs("span",{className:`${mt?"":"hidden"}`,children:[" ",": ",It.calorie.toFixed(1),"kcal"]})]}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"12px"},children:["탄 ",It.carbohydrate.toFixed(1),"g 단"," ",It.protein.toFixed(1),"g 지 ",It.lipid.toFixed(1),"g"]})]}),jsxRuntimeExports.jsx("div",{className:"flex basis-2/5",children:jsxRuntimeExports.jsx("input",{type:"text",onChange:At=>{console.log(At.target.value)},value:It.servingSize+" g",className:"m-2 text-center border-2 rounded-md basis-3/5",disabled:!0})})]},It.foodId))}),jsxRuntimeExports.jsx("div",{className:"fixed w-full bg-white bottom-16",children:jsxRuntimeExports.jsx("div",{className:"m-4",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx(Button,{btnCss:"basis-1/2 text-center border border-teal-700 rounded-md p-2",buttonName:"직접 입력하기",onClick:Tt}),jsxRuntimeExports.jsx(Button,{btnCss:"basis-1/2 text-center text-white bg-teal-700 rounded-md p-2 ",buttonName:"추가하기",onClick:()=>Rt(ht)})]})})})]})},FAQDetailPage=()=>{const{postId:nt}=useParams(),rt=Recoil_index_20(baseUrlState),[it,st]=reactExports.useState({}),lt=()=>{axios({method:"get",url:`${rt}api/faq/posts/${nt}`}).then(ct=>{st(ct.data)})};return reactExports.useEffect(()=>{lt()},[]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"absolute",children:jsxRuntimeExports.jsx(BackButton,{})}),jsxRuntimeExports.jsx(PageTitle,{pageTitle:"FAQ 상세"}),jsxRuntimeExports.jsx("div",{children:it.content})]})},UserDelete=()=>{const nt=Recoil_index_20(userState),rt=Recoil_index_20(baseUrlState),it=useNavigate();reactExports.useEffect(()=>{confirm("정말 탈퇴하시겠습니까?")?axios({method:"delete",url:`${rt}api/users/${nt.info.userId}`,headers:{Authorization:`Bearer ${nt.token}`}}).then(st=>{st.data.data_header.success_code===0&&(localStorage.clear(),setTimeout(()=>{it("/")},1e3))}):it(-1)})},router=createBrowserRouter([{path:"/",element:jsxRuntimeExports.jsx(App,{}),children:[{path:"",Component:HomePage},{path:"/diary",Component:DiaryPage},{path:"/diary/training/:year/:month/:date",Component:DiaryTrainingPage$1},{path:"/diary/food/:year/:month/:date",Component:DiaryTrainingPage},{path:"/diary/training/load/:basepage",Component:TrainingLoadPage},{path:"/diary/training/choice/:basepage",Component:TrainingChoicePage},{path:"/diary/training/myroutine",Component:MyRoutinePage},{path:"/diary/training/myroutine/edit",Component:RoutineEditPage},{path:"/diary/food/:category",Component:FoodCategoryPage},{path:"/diary/food/:category/add",Component:FoodAddFage},{path:"/mypage",Component:MyPage},{path:"/mypage/myinfo",Component:MyInfoPage},{path:"/mypage/passwordchange",Component:PasswordChangePage},{path:"/mypage/pinchange",Component:PinChangePage},{path:"/mypage/notice",Component:NoticePage},{path:"/mypage/notice/:postId",Component:NoticeDetailPage},{path:"/mypage/FAQ",Component:FAQPage},{path:"/mypage/FAQ/:postId",Component:FAQDetailPage},{path:"/mypage/delete",Component:UserDelete},{path:"/challenge",Component:Challenge},{path:"challenge/:challengeId",Component:ChallengeDetail},{path:"challenge/registration",Component:ChallengeRegistrationPage},{path:"challenge/:challengeId/update",Component:ChallengeUpdatePage},{path:"/challenge/ongoing",Component:WebRTCPage}]}]);client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(Recoil_index_5,{children:jsxRuntimeExports.jsx(reactExports.Suspense,{children:jsxRuntimeExports.jsx(RouterProvider,{router,fallbackElement:"로딩중!!!!!"})})}));export{getDefaultExportFromCjs as g,patterns as p,reactExports as r,utils as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
